!function(i){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=i,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=66)}([function(e,t){function i(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=i=function(t){return typeof t}:e.exports=i=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}e.exports=i},function(t,e,i){t.exports=i(40)},function(t,e){function l(t,e,i,n,o,r,s){try{var a=t[r](s),l=a.value}catch(t){return void i(t)}a.done?e(l):Promise.resolve(l).then(n,o)}t.exports=function(a){return function(){var t=this,s=arguments;return new Promise(function(e,i){var n=a.apply(t,s);function o(t){l(n,e,i,o,r,"next",t)}function r(t){l(n,e,i,o,r,"throw",t)}o(void 0)})}}},function(t,e,i){var n,o,r;o=[e],void 0===(r="function"==typeof(n=function(t){var a=window,l=document,d="mousemove",h="mouseup",u="mousedown",e="EventListener",c="add"+e,n="remove"+e,f,p,o=[],i=function t(e,i){for(e=0;e<o.length;){i=o[e++];i=i.container||i;i[n](u,i.md,0);a[n](h,i.mu,0);a[n](d,i.mm,0)}o=[].slice.call(l.getElementsByClassName("dragscroll"));for(e=0;e<o.length;){(function(e,i,n,o,r,s){(s=e.container||e)[c](u,s.md=function(t){if(!e.hasAttribute("nochilddrag")||l.elementFromPoint(t.pageX,t.pageY)==s){o=1;i=t.clientX;n=t.clientY;t.preventDefault()}},0);a[c](h,s.mu=function(){o=0},0);a[c](d,s.mm=function(t){if(o){(r=e.scroller||e).scrollLeft-=f=-i+(i=t.clientX);r.scrollTop-=p=-n+(n=t.clientY);if(e==l.body){(r=l.documentElement).scrollLeft-=f;r.scrollTop-=p}}},0)})(o[e++])}};if(l.readyState=="complete"){i()}else{a[c]("load",i,0)}t.reset=i})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){"use strict";
/**!
 * Sortable 1.10.1
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function I(o){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},e=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.forEach(function(t){var e,i,n;e=o,n=r[i=t],i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n})}return o}function a(t,e){if(null==t)return{};var i,n,o=function(t,e){if(null==t)return{};var i,n,o={},r=Object.keys(t);for(n=0;n<r.length;n++)i=r[n],0<=e.indexOf(i)||(o[i]=t[i]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)i=r[n],0<=e.indexOf(i)||Object.prototype.propertyIsEnumerable.call(t,i)&&(o[i]=t[i])}return o}function o(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var w=o(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),_=o(/Edge/i),d=o(/firefox/i),l=o(/safari/i)&&!o(/chrome/i)&&!o(/android/i),r=o(/iP(ad|od|hone)/i),h=o(/chrome/i)&&o(/android/i),u={capture:!1,passive:!1};function c(t,e,i){t.addEventListener(e,i,!w&&u)}function f(t,e,i){t.removeEventListener(e,i,!w&&u)}function p(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function A(t,e,i,n){if(t){i=i||document;do{if(null!=e&&(">"===e[0]?t.parentNode===i&&p(t,e):p(t,e))||n&&t===i)return t;if(t===i)break}while(t=(o=t).host&&o!==document&&o.host.nodeType?o.host:o.parentNode)}var o;return null}var m,v=/\s+/g;function P(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(v," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(v," ")}}function N(t,e,i){var n=t&&t.style;if(n){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=i+("string"==typeof i?"":"px")}}function g(t,e){var i="";if("string"==typeof t)i=t;else do{var n=N(t,"transform");n&&"none"!==n&&(i=n+" "+i)}while(!e&&(t=t.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix;return o&&new o(i)}function y(t,e,i){if(t){var n=t.getElementsByTagName(e),o=0,r=n.length;if(i)for(;o<r;o++)i(n[o],o);return n}return[]}function L(){return w?document.documentElement:document.scrollingElement}function j(t,e,i,n,o){if(t.getBoundingClientRect||t===window){var r,s,a,l,d,h,u;if(u=t!==window&&t!==L()?(s=(r=t.getBoundingClientRect()).top,a=r.left,l=r.bottom,d=r.right,h=r.height,r.width):(a=s=0,l=window.innerHeight,d=window.innerWidth,h=window.innerHeight,window.innerWidth),(e||i)&&t!==window&&(o=o||t.parentNode,!w))do{if(o&&o.getBoundingClientRect&&("none"!==N(o,"transform")||i&&"static"!==N(o,"position"))){var c=o.getBoundingClientRect();s-=c.top+parseInt(N(o,"border-top-width")),a-=c.left+parseInt(N(o,"border-left-width")),l=s+r.height,d=a+r.width;break}}while(o=o.parentNode);if(n&&t!==window){var f=g(o||t),p=f&&f.a,m=f&&f.d;f&&(l=(s/=m)+(h/=m),d=(a/=p)+(u/=p))}return{top:s,left:a,bottom:l,right:d,width:u,height:h}}}function B(t,e,i){for(var n=z(t,!0),o=j(t)[e];n;){var r=j(n)[i];if(!("top"===i||"left"===i?r<=o:o<=r))return n;if(n===L())break;n=z(n,!1)}return!1}function b(t,e,i){for(var n=0,o=0,r=t.children;o<r.length;){if("none"!==r[o].style.display&&r[o]!==Nt.ghost&&r[o]!==Nt.dragged&&A(r[o],i.draggable,t,!1)){if(n===e)return r[o];n++}o++}return null}function R(t,e){for(var i=t.lastElementChild;i&&(i===Nt.ghost||"none"===N(i,"display")||e&&!p(i,e));)i=i.previousElementSibling;return i||null}function F(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Nt.clone||e&&!p(t,e)||i++;return i}function x(t){var e=0,i=0,n=L();if(t)do{var o=g(t),r=o.a,s=o.d;e+=t.scrollLeft*r,i+=t.scrollTop*s}while(t!==n&&(t=t.parentNode));return[e,i]}function z(t,e){if(!t||!t.getBoundingClientRect)return L();var i=t,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var o=N(i);if(i.clientWidth<i.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!i.getBoundingClientRect||i===document.body)return L();if(n||e)return i;n=!0}}}while(i=i.parentNode);return L()}function k(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function S(e,i){return function(){if(!m){var t=arguments;1===t.length?e.call(this,t[0]):e.apply(this,t),m=setTimeout(function(){m=void 0},i)}}}function H(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function E(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}var q="Sortable"+(new Date).getTime();function T(){var e,n=[];return{captureAnimationState:function(){n=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){if("none"!==N(t,"display")&&t!==Nt.ghost){n.push({target:t,rect:j(t)});var e=I({},n[n.length-1].rect);if(t.thisAnimationDuration){var i=g(t,!0);i&&(e.top-=i.f,e.left-=i.e)}t.fromRect=e}})},addAnimationState:function(t){n.push(t)},removeAnimationState:function(t){n.splice(function(t,e){for(var i in t)if(t.hasOwnProperty(i))for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[i][n])return Number(i);return-1}(n,{target:t}),1)},animateAll:function(t){var d=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof t&&t());var h=!1,u=0;n.forEach(function(t){var e=0,i=t.target,n=i.fromRect,o=j(i),r=i.prevFromRect,s=i.prevToRect,a=t.rect,l=g(i,!0);l&&(o.top-=l.f,o.left-=l.e),i.toRect=o,i.thisAnimationDuration&&k(r,o)&&!k(n,o)&&(a.top-o.top)/(a.left-o.left)==(n.top-o.top)/(n.left-o.left)&&(e=function(t,e,i,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*n.animation}(a,r,s,d.options)),k(o,n)||(i.prevFromRect=n,i.prevToRect=o,e=e||d.options.animation,d.animate(i,a,o,e)),e&&(h=!0,u=Math.max(u,e),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout(function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null},e),i.thisAnimationDuration=e)}),clearTimeout(e),h?e=setTimeout(function(){"function"==typeof t&&t()},u):"function"==typeof t&&t(),n=[]},animate:function(t,e,i,n){if(n){N(t,"transition",""),N(t,"transform","");var o=g(this.el),r=o&&o.a,s=o&&o.d,a=(e.left-i.left)/(r||1),l=(e.top-i.top)/(s||1);t.animatingX=!!a,t.animatingY=!!l,N(t,"transform","translate3d("+a+"px,"+l+"px,0)"),function(t){t.offsetWidth}(t),N(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),N(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout(function(){N(t,"transition",""),N(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},n)}}}}var D=[],C={initializeByDefault:!0},M={mount:function(t){for(var e in C)!C.hasOwnProperty(e)||e in t||(t[e]=C[e]);D.push(t)},pluginEvent:function(e,i,n){var t=this;this.eventCanceled=!1,n.cancel=function(){t.eventCanceled=!0};var o=e+"Global";D.forEach(function(t){i[t.pluginName]&&(i[t.pluginName][o]&&i[t.pluginName][o](I({sortable:i},n)),i.options[t.pluginName]&&i[t.pluginName][e]&&i[t.pluginName][e](I({sortable:i},n)))})},initializePlugins:function(n,o,r){for(var t in D.forEach(function(t){var e=t.pluginName;if(n.options[e]||t.initializeByDefault){var i=new t(n,o,n.options);i.sortable=n,i.options=n.options,n[e]=i,s(r,i.defaults)}}),n.options)if(n.options.hasOwnProperty(t)){var e=this.modifyOption(n,t,n.options[t]);void 0!==e&&(n.options[t]=e)}},getEventProperties:function(e,i){var n={};return D.forEach(function(t){"function"==typeof t.eventProperties&&s(n,t.eventProperties.call(i[t.pluginName],e))}),n},modifyOption:function(e,i,n){var o;return D.forEach(function(t){e[t.pluginName]&&t.optionListeners&&"function"==typeof t.optionListeners[i]&&(o=t.optionListeners[i].call(e[t.pluginName],n))}),o}};function O(t){var e=t.sortable,i=t.rootEl,n=t.name,o=t.targetEl,r=t.cloneEl,s=t.toEl,a=t.fromEl,l=t.oldIndex,d=t.newIndex,h=t.oldDraggableIndex,u=t.newDraggableIndex,c=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||i&&i[q]){var m,v=e.options,g="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||w||_?(m=document.createEvent("Event")).initEvent(n,!0,!0):m=new CustomEvent(n,{bubbles:!0,cancelable:!0}),m.to=s||i,m.from=a||i,m.item=o||i,m.clone=r,m.oldIndex=l,m.newIndex=d,m.oldDraggableIndex=h,m.newDraggableIndex=u,m.originalEvent=c,m.pullMode=f?f.lastPutMode:void 0;var y=I({},p,M.getEventProperties(n,e));for(var b in y)m[b]=y[b];i&&i.dispatchEvent(m),v[g]&&v[g].call(e,m)}}function Y(t,e,i){var n=2<arguments.length&&void 0!==i?i:{},o=n.evt,r=a(n,["evt"]);M.pluginEvent.bind(Nt)(t,e,I({dragEl:W,parentEl:V,ghostEl:G,rootEl:X,nextEl:J,lastDownEl:Z,cloneEl:K,cloneHidden:Q,dragStarted:ut,putSortable:ot,activeSortable:Nt.active,originalEvent:o,oldIndex:$,oldDraggableIndex:et,newIndex:tt,newDraggableIndex:it,hideGhostForTarget:Lt,unhideGhostForTarget:It,cloneNowHidden:function(){Q=!0},cloneNowShown:function(){Q=!1},dispatchSortableEvent:function(t){U({sortable:e,name:t,originalEvent:o})}},r))}function U(t){O(I({putSortable:ot,cloneEl:K,targetEl:W,rootEl:X,oldIndex:$,oldDraggableIndex:et,newIndex:tt,newDraggableIndex:it},t))}var W,V,G,X,J,Z,K,Q,$,tt,et,it,nt,ot,rt,st,at,lt,dt,ht,ut,ct,ft,pt,mt,vt=!1,gt=!1,yt=[],bt=!1,wt=!1,_t=[],xt=!1,kt=[],St="undefined"!=typeof document,Et=r,Tt=_||w?"cssFloat":"float",Dt=St&&!h&&!r&&"draggable"in document.createElement("div"),Ct=function(){if(St){if(w)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Mt=function(t,e){var i=N(t),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),o=b(t,0,e),r=b(t,1,e),s=o&&N(o),a=r&&N(r),l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+j(o).width,d=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+j(r).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&s.float&&"none"!==s.float){var h="left"===s.float?"left":"right";return!r||"both"!==a.clear&&a.clear!==h?"horizontal":"vertical"}return o&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||n<=l&&"none"===i[Tt]||r&&"none"===i[Tt]&&n<l+d)?"vertical":"horizontal"},Ot=function(t){function l(s,a){return function(t,e,i,n){var o=t.options.group.name&&e.options.group.name&&t.options.group.name===e.options.group.name;if(null==s&&(a||o))return!0;if(null==s||!1===s)return!1;if(a&&"clone"===s)return s;if("function"==typeof s)return l(s(t,e,i,n),a)(t,e,i,n);var r=(a?t:e).options.group.name;return!0===s||"string"==typeof s&&s===r||s.join&&-1<s.indexOf(r)}}var e={},i=t.group;i&&"object"==n(i)||(i={name:i}),e.name=i.name,e.checkPull=l(i.pull,!0),e.checkPut=l(i.put),e.revertClone=i.revertClone,t.group=e},Lt=function(){!Ct&&G&&N(G,"display","none")},It=function(){!Ct&&G&&N(G,"display","")};St&&document.addEventListener("click",function(t){if(gt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),gt=!1},!0);function At(t){if(W){var e=function(r,s){var a;return yt.some(function(t){if(!R(t)){var e=j(t),i=t[q].options.emptyInsertThreshold,n=r>=e.left-i&&r<=e.right+i,o=s>=e.top-i&&s<=e.bottom+i;return i&&n&&o?a=t:void 0}}),a}((t=t.touches?t.touches[0]:t).clientX,t.clientY);if(e){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[q]._onDragOver(i)}}}function Pt(t){W&&W.parentNode[q]._isOutsideThisEl(t.target)}function Nt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=s({},e),t[q]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Mt(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Nt.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var n in M.initializePlugins(this,t,i),i)n in e||(e[n]=i[n]);for(var o in Ot(e),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!e.forceFallback&&Dt,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?c(t,"pointerdown",this._onTapStart):(c(t,"mousedown",this._onTapStart),c(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(c(t,"dragover",this),c(t,"dragenter",this)),yt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),s(this,T())}function jt(t,e,i,n,o,r,s,a){var l,d,h=t[q],u=h.options.onMove;return!window.CustomEvent||w||_?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=i,l.draggedRect=n,l.related=o||e,l.relatedRect=r||j(e),l.willInsertAfter=a,l.originalEvent=s,t.dispatchEvent(l),u&&(d=u.call(h,l,s)),d}function Bt(t){t.draggable=!1}function Rt(){xt=!1}function Ft(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function zt(t){return setTimeout(t,0)}function Ht(t){return clearTimeout(t)}Nt.prototype={constructor:Nt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(ct=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,W):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,n=this.el,t=this.options,o=t.preventOnFilter,r=e.type,s=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,a=(s||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,d=t.filter;if(!function(t){kt.length=0;var e=t.getElementsByTagName("input"),i=e.length;for(;i--;){var n=e[i];n.checked&&kt.push(n)}}(n),!W&&!(/mousedown|pointerdown/.test(r)&&0!==e.button||t.disabled||l.isContentEditable||(a=A(a,t.draggable,n,!1))&&a.animated||Z===a)){if($=F(a),et=F(a,t.draggable),"function"==typeof d){if(d.call(this,e,a,this))return U({sortable:i,rootEl:l,name:"filter",targetEl:a,toEl:n,fromEl:n}),Y("filter",i,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(d=d&&d.split(",").some(function(t){if(t=A(l,t.trim(),n,!1))return U({sortable:i,rootEl:t,name:"filter",targetEl:a,fromEl:n,toEl:n}),Y("filter",i,{evt:e}),!0}))return void(o&&e.cancelable&&e.preventDefault());t.handle&&!A(l,t.handle,n,!1)||this._prepareDragStart(e,s,a)}}},_prepareDragStart:function(t,e,i){var n,o=this,r=o.el,s=o.options,a=r.ownerDocument;if(i&&!W&&i.parentNode===r){var l=j(i);if(X=r,V=(W=i).parentNode,J=W.nextSibling,Z=i,nt=s.group,rt={target:Nt.dragged=W,clientX:(e||t).clientX,clientY:(e||t).clientY},dt=rt.clientX-l.left,ht=rt.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,W.style["will-change"]="all",n=function(){Y("delayEnded",o,{evt:t}),Nt.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!d&&o.nativeDraggable&&(W.draggable=!0),o._triggerDragStart(t,e),U({sortable:o,name:"choose",originalEvent:t}),P(W,s.chosenClass,!0))},s.ignore.split(",").forEach(function(t){y(W,t.trim(),Bt)}),c(a,"dragover",At),c(a,"mousemove",At),c(a,"touchmove",At),c(a,"mouseup",o._onDrop),c(a,"touchend",o._onDrop),c(a,"touchcancel",o._onDrop),d&&this.nativeDraggable&&(this.options.touchStartThreshold=4,W.draggable=!0),Y("delayStart",this,{evt:t}),!s.delay||s.delayOnTouchOnly&&!e||this.nativeDraggable&&(_||w))n();else{if(Nt.eventCanceled)return void this._onDrop();c(a,"mouseup",o._disableDelayedDrag),c(a,"touchend",o._disableDelayedDrag),c(a,"touchcancel",o._disableDelayedDrag),c(a,"mousemove",o._delayedDragTouchMoveHandler),c(a,"touchmove",o._delayedDragTouchMoveHandler),s.supportPointer&&c(a,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(n,s.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){W&&Bt(W),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;f(t,"mouseup",this._disableDelayedDrag),f(t,"touchend",this._disableDelayedDrag),f(t,"touchcancel",this._disableDelayedDrag),f(t,"mousemove",this._delayedDragTouchMoveHandler),f(t,"touchmove",this._delayedDragTouchMoveHandler),f(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?c(document,"pointermove",this._onTouchMove):c(document,e?"touchmove":"mousemove",this._onTouchMove):(c(W,"dragend",this),c(X,"dragstart",this._onDragStart));try{document.selection?zt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(vt=!1,X&&W){Y("dragStarted",this,{evt:e}),this.nativeDraggable&&c(document,"dragover",Pt);var i=this.options;t||P(W,i.dragClass,!1),P(W,i.ghostClass,!0),Nt.active=this,t&&this._appendGhost(),U({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(st){this._lastX=st.clientX,this._lastY=st.clientY,Lt();for(var t=document.elementFromPoint(st.clientX,st.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(st.clientX,st.clientY))!==e;)e=t;if(W.parentNode[q]._isOutsideThisEl(t),e)do{if(e[q]){if(e[q]._onDragOver({clientX:st.clientX,clientY:st.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);It()}},_onTouchMove:function(t){if(rt){var e=this.options,i=e.fallbackTolerance,n=e.fallbackOffset,o=t.touches?t.touches[0]:t,r=G&&g(G),s=G&&r&&r.a,a=G&&r&&r.d,l=Et&&mt&&x(mt),d=(o.clientX-rt.clientX+n.x)/(s||1)+(l?l[0]-_t[0]:0)/(s||1),h=(o.clientY-rt.clientY+n.y)/(a||1)+(l?l[1]-_t[1]:0)/(a||1);if(!Nt.active&&!vt){if(i&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(G){r?(r.e+=d-(at||0),r.f+=h-(lt||0)):r={a:1,b:0,c:0,d:1,e:d,f:h};var u="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");N(G,"webkitTransform",u),N(G,"mozTransform",u),N(G,"msTransform",u),N(G,"transform",u),at=d,lt=h,st=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!G){var t=this.options.fallbackOnBody?document.body:X,e=j(W,!0,Et,!0,t),i=this.options;if(Et){for(mt=t;"static"===N(mt,"position")&&"none"===N(mt,"transform")&&mt!==document;)mt=mt.parentNode;mt!==document.body&&mt!==document.documentElement?(mt===document&&(mt=L()),e.top+=mt.scrollTop,e.left+=mt.scrollLeft):mt=L(),_t=x(mt)}P(G=W.cloneNode(!0),i.ghostClass,!1),P(G,i.fallbackClass,!0),P(G,i.dragClass,!0),N(G,"transition",""),N(G,"transform",""),N(G,"box-sizing","border-box"),N(G,"margin",0),N(G,"top",e.top),N(G,"left",e.left),N(G,"width",e.width),N(G,"height",e.height),N(G,"opacity","0.8"),N(G,"position",Et?"absolute":"fixed"),N(G,"zIndex","100000"),N(G,"pointerEvents","none"),Nt.ghost=G,t.appendChild(G),N(G,"transform-origin",dt/parseInt(G.style.width)*100+"% "+ht/parseInt(G.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,n=t.dataTransfer,o=i.options;Y("dragStart",this,{evt:t}),Nt.eventCanceled?this._onDrop():(Y("setupClone",this),Nt.eventCanceled||((K=E(W)).draggable=!1,K.style["will-change"]="",this._hideClone(),P(K,this.options.chosenClass,!1),Nt.clone=K),i.cloneId=zt(function(){Y("clone",i),Nt.eventCanceled||(i.options.removeCloneOnHide||X.insertBefore(K,W),i._hideClone(),U({sortable:i,name:"clone"}))}),e||P(W,o.dragClass,!0),e?(gt=!0,i._loopId=setInterval(i._emulateDragOver,50)):(f(document,"mouseup",i._onDrop),f(document,"touchend",i._onDrop),f(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",o.setData&&o.setData.call(i,n,W)),c(document,"drop",i),N(W,"transform","translateZ(0)")),vt=!0,i._dragStartId=zt(i._dragStarted.bind(i,e,t)),c(document,"selectstart",i),ut=!0,l&&N(document.body,"user-select","none"))},_onDragOver:function(i){var n,o,r,s,a=this.el,l=i.target,e=this.options,t=e.group,d=Nt.active,h=nt===t,u=e.sort,c=ot||d,f=this,p=!1;if(!xt){if(void 0!==i.preventDefault&&i.cancelable&&i.preventDefault(),l=A(l,e.draggable,a,!0),C("dragOver"),Nt.eventCanceled)return p;if(W.contains(i.target)||l.animated&&l.animatingX&&l.animatingY||f._ignoreWhileAnimating===l)return O(!1);if(gt=!1,d&&!e.disabled&&(h?u||(r=!X.contains(W)):ot===this||(this.lastPutMode=nt.checkPull(this,d,W,i))&&t.checkPut(this,d,W,i))){if(s="vertical"===this._getDirection(i,l),n=j(W),C("dragOverValid"),Nt.eventCanceled)return p;if(r)return V=X,M(),this._hideClone(),C("revert"),Nt.eventCanceled||(J?X.insertBefore(W,J):X.appendChild(W)),O(!0);var m=R(a,e.draggable);if(!m||function(t,e,i){var n=j(R(i.el,i.options.draggable));return e?t.clientX>n.right+10||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+10}(i,s,this)&&!m.animated){if(m===W)return O(!1);if(m&&a===i.target&&(l=m),l&&(o=j(l)),!1!==jt(X,a,W,n,l,o,i,!!l))return M(),a.appendChild(W),V=a,L(),O(!0)}else if(l.parentNode===a){o=j(l);var v,g,y,b=W.parentNode!==a,w=!function(t,e,i){var n=i?t.left:t.top,o=i?t.right:t.bottom,r=i?t.width:t.height,s=i?e.left:e.top,a=i?e.right:e.bottom,l=i?e.width:e.height;return n===s||o===a||n+r/2===s+l/2}(W.animated&&W.toRect||n,l.animated&&l.toRect||o,s),_=s?"top":"left",x=B(l,"top","top")||B(W,"top","top"),k=x?x.scrollTop:void 0;if(ct!==l&&(g=o[_],bt=!1,wt=!w&&e.invertSwap||b),0!==(v=function(t,e,i,n,o,r,s,a){var l=n?t.clientY:t.clientX,d=n?i.height:i.width,h=n?i.top:i.left,u=n?i.bottom:i.right,c=!1;if(!s)if(a&&pt<d*o){if(!bt&&(1===ft?h+d*r/2<l:l<u-d*r/2)&&(bt=!0),bt)c=!0;else if(1===ft?l<h+pt:u-pt<l)return-ft}else if(h+d*(1-o)/2<l&&l<u-d*(1-o)/2)return function(t){return F(W)<F(t)?1:-1}(e);if((c=c||s)&&(l<h+d*r/2||u-d*r/2<l))return h+d/2<l?1:-1;return 0}(i,l,o,s,w?1:e.swapThreshold,null==e.invertedSwapThreshold?e.swapThreshold:e.invertedSwapThreshold,wt,ct===l)))for(var S=F(W);S-=v,(y=V.children[S])&&("none"===N(y,"display")||y===G););if(0===v||y===l)return O(!1);ft=v;var E=(ct=l).nextElementSibling,T=!1,D=jt(X,a,W,n,l,o,i,T=1===v);if(!1!==D)return 1!==D&&-1!==D||(T=1===D),xt=!0,setTimeout(Rt,30),M(),T&&!E?a.appendChild(W):l.parentNode.insertBefore(W,T?E:l),x&&H(x,0,k-x.scrollTop),V=W.parentNode,void 0===g||wt||(pt=Math.abs(g-j(l)[_])),L(),O(!0)}if(a.contains(W))return O(!1)}return!1}function C(t,e){Y(t,f,I({evt:i,isOwner:h,axis:s?"vertical":"horizontal",revert:r,dragRect:n,targetRect:o,canSort:u,fromSortable:c,target:l,completed:O,onMove:function(t,e){return jt(X,a,W,n,t,j(t),i,e)},changed:L},e))}function M(){C("dragOverAnimationCapture"),f.captureAnimationState(),f!==c&&c.captureAnimationState()}function O(t){return C("dragOverCompleted",{insertion:t}),t&&(h?d._hideClone():d._showClone(f),f!==c&&(P(W,ot?ot.options.ghostClass:d.options.ghostClass,!1),P(W,e.ghostClass,!0)),ot!==f&&f!==Nt.active?ot=f:f===Nt.active&&ot&&(ot=null),c===f&&(f._ignoreWhileAnimating=l),f.animateAll(function(){C("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==c&&(c.animateAll(),c._ignoreWhileAnimating=null)),(l===W&&!W.animated||l===a&&!l.animated)&&(ct=null),e.dragoverBubble||i.rootEl||l===document||(W.parentNode[q]._isOutsideThisEl(i.target),t||At(i)),!e.dragoverBubble&&i.stopPropagation&&i.stopPropagation(),p=!0}function L(){tt=F(W),it=F(W,e.draggable),U({sortable:f,name:"change",toEl:a,newIndex:tt,newDraggableIndex:it,originalEvent:i})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){f(document,"mousemove",this._onTouchMove),f(document,"touchmove",this._onTouchMove),f(document,"pointermove",this._onTouchMove),f(document,"dragover",At),f(document,"mousemove",At),f(document,"touchmove",At)},_offUpEvents:function(){var t=this.el.ownerDocument;f(t,"mouseup",this._onDrop),f(t,"touchend",this._onDrop),f(t,"pointerup",this._onDrop),f(t,"touchcancel",this._onDrop),f(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;tt=F(W),it=F(W,i.draggable),Y("drop",this,{evt:t}),V=W&&W.parentNode,tt=F(W),it=F(W,i.draggable),Nt.eventCanceled||(bt=wt=vt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ht(this.cloneId),Ht(this._dragStartId),this.nativeDraggable&&(f(document,"drop",this),f(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),l&&N(document.body,"user-select",""),t&&(ut&&(t.cancelable&&t.preventDefault(),i.dropBubble||t.stopPropagation()),G&&G.parentNode&&G.parentNode.removeChild(G),(X===V||ot&&"clone"!==ot.lastPutMode)&&K&&K.parentNode&&K.parentNode.removeChild(K),W&&(this.nativeDraggable&&f(W,"dragend",this),Bt(W),W.style["will-change"]="",ut&&!vt&&P(W,ot?ot.options.ghostClass:this.options.ghostClass,!1),P(W,this.options.chosenClass,!1),U({sortable:this,name:"unchoose",toEl:V,newIndex:null,newDraggableIndex:null,originalEvent:t}),X!==V?(0<=tt&&(U({rootEl:V,name:"add",toEl:V,fromEl:X,originalEvent:t}),U({sortable:this,name:"remove",toEl:V,originalEvent:t}),U({rootEl:V,name:"sort",toEl:V,fromEl:X,originalEvent:t}),U({sortable:this,name:"sort",toEl:V,originalEvent:t})),ot&&ot.save()):tt!==$&&0<=tt&&(U({sortable:this,name:"update",toEl:V,originalEvent:t}),U({sortable:this,name:"sort",toEl:V,originalEvent:t})),Nt.active&&(null!=tt&&-1!==tt||(tt=$,it=et),U({sortable:this,name:"end",toEl:V,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){Y("nulling",this),X=W=V=G=J=K=Z=Q=rt=st=ut=tt=it=$=et=ct=ft=ot=nt=Nt.dragged=Nt.ghost=Nt.clone=Nt.active=null,kt.forEach(function(t){t.checked=!0}),kt.length=at=lt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":W&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],i=this.el.children,n=0,o=i.length,r=this.options;n<o;n++)A(t=i[n],r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||Ft(t));return e},sort:function(t){var n={},o=this.el;this.toArray().forEach(function(t,e){var i=o.children[e];A(i,this.options.draggable,o,!1)&&(n[t]=i)},this),t.forEach(function(t){n[t]&&(o.removeChild(n[t]),o.appendChild(n[t]))})},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return A(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(void 0===e)return i[t];var n=M.modifyOption(this,t,e);i[t]=void 0!==n?n:e,"group"===t&&Ot(i)},destroy:function(){Y("destroy",this);var t=this.el;t[q]=null,f(t,"mousedown",this._onTapStart),f(t,"touchstart",this._onTapStart),f(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(f(t,"dragover",this),f(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),yt.splice(yt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Q){if(Y("hideClone",this),Nt.eventCanceled)return;N(K,"display","none"),this.options.removeCloneOnHide&&K.parentNode&&K.parentNode.removeChild(K),Q=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(Q){if(Y("showClone",this),Nt.eventCanceled)return;X.contains(W)&&!this.options.group.revertClone?X.insertBefore(K,W):J?X.insertBefore(K,J):X.appendChild(K),this.options.group.revertClone&&this.animate(W,K),N(K,"display",""),Q=!1}}else this._hideClone()}},St&&c(document,"touchmove",function(t){(Nt.active||vt)&&t.cancelable&&t.preventDefault()}),Nt.utils={on:c,off:f,css:N,find:y,is:function(t,e){return!!A(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},throttle:S,closest:A,toggleClass:P,clone:E,index:F,nextTick:zt,cancelNextTick:Ht,detectDirection:Mt,getChild:b},Nt.get=function(t){return t[q]},Nt.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Nt.utils=I({},Nt.utils,t.utils)),M.mount(t)})},Nt.create=function(t,e){return new Nt(t,e)};var qt,Yt,Ut,Wt,Vt,Gt,Xt=[],Jt=!(Nt.version="1.10.1");function Zt(){Xt.forEach(function(t){clearInterval(t.pid)}),Xt=[]}function Kt(){clearInterval(Gt)}function Qt(t){var e=t.originalEvent,i=t.putSortable,n=t.dragEl,o=t.activeSortable,r=t.dispatchSortableEvent,s=t.hideGhostForTarget,a=t.unhideGhostForTarget;if(e){var l=i||o;s();var d=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,h=document.elementFromPoint(d.clientX,d.clientY);a(),l&&!l.el.contains(h)&&(r("spill"),this.onSpill({dragEl:n,putSortable:i}))}}var $t=S(function(i,t,e,n){if(t.scroll){var o,r=(i.touches?i.touches[0]:i).clientX,s=(i.touches?i.touches[0]:i).clientY,a=t.scrollSensitivity,l=t.scrollSpeed,d=L(),h=!1;Yt!==e&&(Yt=e,Zt(),qt=t.scroll,o=t.scrollFn,!0===qt&&(qt=z(e,!0)));var u=0,c=qt;do{var f=c,p=j(f),m=p.top,v=p.bottom,g=p.left,y=p.right,b=p.width,w=p.height,_=void 0,x=void 0,k=f.scrollWidth,S=f.scrollHeight,E=N(f),T=f.scrollLeft,D=f.scrollTop;x=f===d?(_=b<k&&("auto"===E.overflowX||"scroll"===E.overflowX||"visible"===E.overflowX),w<S&&("auto"===E.overflowY||"scroll"===E.overflowY||"visible"===E.overflowY)):(_=b<k&&("auto"===E.overflowX||"scroll"===E.overflowX),w<S&&("auto"===E.overflowY||"scroll"===E.overflowY));var C=_&&(Math.abs(y-r)<=a&&T+b<k)-(Math.abs(g-r)<=a&&!!T),M=x&&(Math.abs(v-s)<=a&&D+w<S)-(Math.abs(m-s)<=a&&!!D);if(!Xt[u])for(var O=0;O<=u;O++)Xt[O]||(Xt[O]={});Xt[u].vx==C&&Xt[u].vy==M&&Xt[u].el===f||(Xt[u].el=f,Xt[u].vx=C,Xt[u].vy=M,clearInterval(Xt[u].pid),0==C&&0==M||(h=!0,Xt[u].pid=setInterval(function(){n&&0===this.layer&&Nt.active._onTouchMove(Vt);var t=Xt[this.layer].vy?Xt[this.layer].vy*l:0,e=Xt[this.layer].vx?Xt[this.layer].vx*l:0;"function"==typeof o&&"continue"!==o.call(Nt.dragged.parentNode[q],e,t,i,Vt,Xt[this.layer].el)||H(Xt[this.layer].el,e,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&c!==d&&(c=z(c,!1)));Jt=h}},30);function te(){}function ee(){}te.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=b(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:Qt},s(te,{pluginName:"revertOnSpill"}),ee.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:Qt},s(ee,{pluginName:"removeOnSpill"});Nt.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?c(document,"dragover",this._handleAutoScroll):this.options.supportPointer?c(document,"pointermove",this._handleFallbackAutoScroll):e.touches?c(document,"touchmove",this._handleFallbackAutoScroll):c(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?f(document,"dragover",this._handleAutoScroll):(f(document,"pointermove",this._handleFallbackAutoScroll),f(document,"touchmove",this._handleFallbackAutoScroll),f(document,"mousemove",this._handleFallbackAutoScroll)),Kt(),Zt(),clearTimeout(m),m=void 0},nulling:function(){Vt=Yt=qt=Jt=Gt=Ut=Wt=null,Xt.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(e,i){var n=this,o=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,t=document.elementFromPoint(o,r);if(Vt=e,i||_||w||l){$t(e,this.options,t,i);var s=z(t,!0);!Jt||Gt&&o===Ut&&r===Wt||(Gt&&Kt(),Gt=setInterval(function(){var t=z(document.elementFromPoint(o,r),!0);t!==s&&(s=t,Zt()),$t(e,n.options,t,i)},10),Ut=o,Wt=r)}else{if(!this.options.bubbleScroll||z(t,!0)===L())return void Zt();$t(e,this.options,z(t,!1),!1)}}},s(t,{pluginName:"scroll",initializeByDefault:!0})}),Nt.mount(ee,te),e.a=Nt},function(t,v,e){"use strict";(function(t){var i="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},h=function(t,e,i,n,o,r,s,a,l){var d=this;d.numeralDecimalMark=t||".",d.numeralIntegerScale=0<e?e:0,d.numeralDecimalScale=0<=i?i:2,d.numeralThousandsGroupStyle=n||h.groupStyle.thousand,d.numeralPositiveOnly=!!o,d.stripLeadingZeroes=!1!==r,d.prefix=s||""===s?s:"",d.signBeforePrefix=!!a,d.delimiter=l||""===l?l:",",d.delimiterRE=l?new RegExp("\\"+l,"g"):""};h.groupStyle={thousand:"thousand",lakh:"lakh",wan:"wan",none:"none"},h.prototype={getRawValue:function(t){return t.replace(this.delimiterRE,"").replace(this.numeralDecimalMark,".")},format:function(t){var e,i,n,o,r=this,s="";switch(t=t.replace(/[A-Za-z]/g,"").replace(r.numeralDecimalMark,"M").replace(/[^\dM-]/g,"").replace(/^\-/,"N").replace(/\-/g,"").replace("N",r.numeralPositiveOnly?"":"-").replace("M",r.numeralDecimalMark),r.stripLeadingZeroes&&(t=t.replace(/^(-)?0+(?=\d)/,"$1")),i="-"===t.slice(0,1)?"-":"",n=void 0!==r.prefix?r.signBeforePrefix?i+r.prefix:r.prefix+i:i,0<=(o=t).indexOf(r.numeralDecimalMark)&&(o=(e=t.split(r.numeralDecimalMark))[0],s=r.numeralDecimalMark+e[1].slice(0,r.numeralDecimalScale)),"-"==i&&(o=o.slice(1)),0<r.numeralIntegerScale&&(o=o.slice(0,r.numeralIntegerScale)),r.numeralThousandsGroupStyle){case h.groupStyle.lakh:o=o.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+r.delimiter);break;case h.groupStyle.wan:o=o.replace(/(\d)(?=(\d{4})+$)/g,"$1"+r.delimiter);break;case h.groupStyle.thousand:o=o.replace(/(\d)(?=(\d{3})+$)/g,"$1"+r.delimiter)}return n+o.toString()+(0<r.numeralDecimalScale?s.toString():"")}};function e(t,e,i){var n=this;n.date=[],n.blocks=[],n.datePattern=t,n.dateMin=e.split("-").reverse().map(function(t){return parseInt(t,10)}),2===n.dateMin.length&&n.dateMin.unshift(0),n.dateMax=i.split("-").reverse().map(function(t){return parseInt(t,10)}),2===n.dateMax.length&&n.dateMax.unshift(0),n.initBlocks()}var n=h;e.prototype={initBlocks:function(){var e=this;e.datePattern.forEach(function(t){"Y"===t?e.blocks.push(4):e.blocks.push(2)})},getISOFormatDate:function(){var t=this.date;return t[2]?t[2]+"-"+this.addLeadingZero(t[1])+"-"+this.addLeadingZero(t[0]):""},getBlocks:function(){return this.blocks},getValidatedDate:function(r){var s=this,a="";return r=r.replace(/[^\d]/g,""),s.blocks.forEach(function(t,e){if(0<r.length){var i=r.slice(0,t),n=i.slice(0,1),o=r.slice(t);switch(s.datePattern[e]){case"d":"00"===i?i="01":3<parseInt(n,10)?i="0"+n:31<parseInt(i,10)&&(i="31");break;case"m":"00"===i?i="01":1<parseInt(n,10)?i="0"+n:12<parseInt(i,10)&&(i="12")}a+=i,r=o}}),this.getFixedDateString(a)},getFixedDateString:function(t){var e,i,n,o=this,r=o.datePattern,s=[],a=0,l=0,d=0,h=0,u=0,c=0,f=!1;return 4===t.length&&"y"!==r[0].toLowerCase()&&"y"!==r[1].toLowerCase()&&(u=2-(h="d"===r[0]?0:2),e=parseInt(t.slice(h,h+2),10),i=parseInt(t.slice(u,u+2),10),s=this.getFixedDate(e,i,0)),8===t.length&&(r.forEach(function(t,e){switch(t){case"d":a=e;break;case"m":l=e;break;default:d=e}}),c=2*d,h=a<=d?2*a:2*a+2,u=l<=d?2*l:2*l+2,e=parseInt(t.slice(h,h+2),10),i=parseInt(t.slice(u,u+2),10),n=parseInt(t.slice(c,c+4),10),f=4===t.slice(c,c+4).length,s=this.getFixedDate(e,i,n)),4!==t.length||"y"!==r[0]&&"y"!==r[1]||(c=2-(u="m"===r[0]?0:2),i=parseInt(t.slice(u,u+2),10),n=parseInt(t.slice(c,c+2),10),f=2===t.slice(c,c+2).length,s=[0,i,n]),6!==t.length||"Y"!==r[0]&&"Y"!==r[1]||(c=2-.5*(u="m"===r[0]?0:4),i=parseInt(t.slice(u,u+2),10),n=parseInt(t.slice(c,c+4),10),f=4===t.slice(c,c+4).length,s=[0,i,n]),s=o.getRangeFixedDate(s),0===(o.date=s).length?t:r.reduce(function(t,e){switch(e){case"d":return t+(0===s[0]?"":o.addLeadingZero(s[0]));case"m":return t+(0===s[1]?"":o.addLeadingZero(s[1]));case"y":return t+(f?o.addLeadingZeroForYear(s[2],!1):"");case"Y":return t+(f?o.addLeadingZeroForYear(s[2],!0):"")}},"")},getRangeFixedDate:function(t){var e=this.datePattern,i=this.dateMin||[],n=this.dateMax||[];return!t.length||i.length<3&&n.length<3?t:e.find(function(t){return"y"===t.toLowerCase()})&&0===t[2]?t:n.length&&(n[2]<t[2]||n[2]===t[2]&&(n[1]<t[1]||n[1]===t[1]&&n[0]<t[0]))?n:i.length&&(i[2]>t[2]||i[2]===t[2]&&(i[1]>t[1]||i[1]===t[1]&&i[0]>t[0]))?i:t},getFixedDate:function(t,e,i){return t=Math.min(t,31),e=Math.min(e,12),i=parseInt(i||0,10),(e<7&&e%2==0||8<e&&e%2==1)&&(t=Math.min(t,2===e?this.isLeapYear(i)?29:28:30)),[t,e,i]},isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},addLeadingZero:function(t){return(t<10?"0":"")+t},addLeadingZeroForYear:function(t,e){return e?(t<10?"000":t<100?"00":t<1e3?"0":"")+t:(t<10?"0":"")+t}};function o(t,e){var i=this;i.time=[],i.blocks=[],i.timePattern=t,i.timeFormat=e,i.initBlocks()}var r=e;o.prototype={initBlocks:function(){var t=this;t.timePattern.forEach(function(){t.blocks.push(2)})},getISOFormatTime:function(){var t=this.time;return t[2]?this.addLeadingZero(t[0])+":"+this.addLeadingZero(t[1])+":"+this.addLeadingZero(t[2]):""},getBlocks:function(){return this.blocks},getTimeFormatOptions:function(){return"12"===String(this.timeFormat)?{maxHourFirstDigit:1,maxHours:12,maxMinutesFirstDigit:5,maxMinutes:60}:{maxHourFirstDigit:2,maxHours:23,maxMinutesFirstDigit:5,maxMinutes:60}},getValidatedTime:function(r){var s=this,a="";r=r.replace(/[^\d]/g,"");var l=s.getTimeFormatOptions();return s.blocks.forEach(function(t,e){if(0<r.length){var i=r.slice(0,t),n=i.slice(0,1),o=r.slice(t);switch(s.timePattern[e]){case"h":parseInt(n,10)>l.maxHourFirstDigit?i="0"+n:parseInt(i,10)>l.maxHours&&(i=l.maxHours+"");break;case"m":case"s":parseInt(n,10)>l.maxMinutesFirstDigit?i="0"+n:parseInt(i,10)>l.maxMinutes&&(i=l.maxMinutes+"")}a+=i,r=o}}),this.getFixedTimeString(a)},getFixedTimeString:function(t){var e,i,n,o=this,r=o.timePattern,s=[],a=0,l=0,d=0,h=0,u=0,c=0;return 6===t.length&&(r.forEach(function(t,e){switch(t){case"s":a=2*e;break;case"m":l=2*e;break;case"h":d=2*e}}),c=d,u=l,h=a,e=parseInt(t.slice(h,h+2),10),i=parseInt(t.slice(u,u+2),10),n=parseInt(t.slice(c,c+2),10),s=this.getFixedTime(n,i,e)),4===t.length&&o.timePattern.indexOf("s")<0&&(r.forEach(function(t,e){switch(t){case"m":l=2*e;break;case"h":d=2*e}}),c=d,u=l,e=0,i=parseInt(t.slice(u,u+2),10),n=parseInt(t.slice(c,c+2),10),s=this.getFixedTime(n,i,e)),0===(o.time=s).length?t:r.reduce(function(t,e){switch(e){case"s":return t+o.addLeadingZero(s[2]);case"m":return t+o.addLeadingZero(s[1]);case"h":return t+o.addLeadingZero(s[0])}},"")},getFixedTime:function(t,e,i){return i=Math.min(parseInt(i||0,10),60),e=Math.min(e,60),[t=Math.min(t,60),e,i]},addLeadingZero:function(t){return(t<10?"0":"")+t}};function s(t,e){this.delimiter=e||""===e?e:" ",this.delimiterRE=e?new RegExp("\\"+e,"g"):"",this.formatter=t}var a=o;s.prototype={setFormatter:function(t){this.formatter=t},format:function(t){this.formatter.clear();for(var e,i="",n=!1,o=0,r=(t=(t=(t=t.replace(/[^\d+]/g,"")).replace(/^\+/,"B").replace(/\+/g,"").replace("B","+")).replace(this.delimiterRE,"")).length;o<r;o++)e=this.formatter.inputDigit(t.charAt(o)),/[\s()-]/g.test(e)?(i=e,n=!0):n||(i=e);return i=(i=i.replace(/[()]/g,"")).replace(/[\s-]/g,this.delimiter)}};var l=s,d={blocks:{uatp:[4,5,6],amex:[4,6,5],diners:[4,6,4],discover:[4,4,4,4],mastercard:[4,4,4,4],dankort:[4,4,4,4],instapayment:[4,4,4,4],jcb15:[4,6,5],jcb:[4,4,4,4],maestro:[4,4,4,4],visa:[4,4,4,4],mir:[4,4,4,4],unionPay:[4,4,4,4],general:[4,4,4,4]},re:{uatp:/^(?!1800)1\d{0,14}/,amex:/^3[47]\d{0,13}/,discover:/^(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/,diners:/^3(?:0([0-5]|9)|[689]\d?)\d{0,11}/,mastercard:/^(5[1-5]\d{0,2}|22[2-9]\d{0,1}|2[3-7]\d{0,2})\d{0,12}/,dankort:/^(5019|4175|4571)\d{0,12}/,instapayment:/^63[7-9]\d{0,13}/,jcb15:/^(?:2131|1800)\d{0,11}/,jcb:/^(?:35\d{0,2})\d{0,12}/,maestro:/^(?:5[0678]\d{0,2}|6304|67\d{0,2})\d{0,12}/,mir:/^220[0-4]\d{0,12}/,visa:/^4\d{0,15}/,unionPay:/^62\d{0,14}/},getStrictBlocks:function(t){var e=t.reduce(function(t,e){return t+e},0);return t.concat(19-e)},getInfo:function(t,e){var i=d.blocks,n=d.re;for(var o in e=!!e,n)if(n[o].test(t)){var r=i[o];return{type:o,blocks:e?this.getStrictBlocks(r):r}}return{type:"unknown",blocks:e?this.getStrictBlocks(i.general):i.general}}},u=d,c={noop:function(){},strip:function(t,e){return t.replace(e,"")},getPostDelimiter:function(e,t,i){if(0===i.length)return e.slice(-t.length)===t?t:"";var n="";return i.forEach(function(t){e.slice(-t.length)===t&&(n=t)}),n},getDelimiterREByDelimiter:function(t){return new RegExp(t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g")},getNextCursorPosition:function(t,e,i,n,o){return e.length===t?i.length:t+this.getPositionOffset(t,e,i,n,o)},getPositionOffset:function(t,e,i,n,o){var r,s,a;return r=this.stripDelimiters(e.slice(0,t),n,o),s=this.stripDelimiters(i.slice(0,t),n,o),0!=(a=r.length-s.length)?a/Math.abs(a):0},stripDelimiters:function(e,t,i){var n=this;if(0!==i.length)return i.forEach(function(t){t.split("").forEach(function(t){e=e.replace(n.getDelimiterREByDelimiter(t),"")})}),e;var o=t?n.getDelimiterREByDelimiter(t):"";return e.replace(o,"")},headStr:function(t,e){return t.slice(0,e)},getMaxLength:function(t){return t.reduce(function(t,e){return t+e},0)},getPrefixStrippedValue:function(t,e,i,n,o,r,s){if(0===i)return t;if(n.slice(0,i)!==e)return s&&!n&&t?t:"";var a=this.stripDelimiters(n,o,r);return t.slice(0,i)!==e?a.slice(i):t.slice(i)},getFirstDiffIndex:function(t,e){for(var i=0;t.charAt(i)===e.charAt(i);)if(""===t.charAt(i++))return-1;return i},getFormattedValue:function(o,t,r,s,a,l){var d,h="",u=0<a.length;return 0===r?o:(t.forEach(function(t,e){if(0<o.length){var i=o.slice(0,t),n=o.slice(t);d=u?a[l?e-1:e]||d:s,l?(0<e&&(h+=d),h+=i):(h+=i,i.length===t&&e<r-1&&(h+=d)),o=n}}),h)},fixPrefixCursor:function(t,e,i,n){if(t){var o=t.value,r=i||n[0]||" ";if(t.setSelectionRange&&e&&!(e.length+r.length<o.length)){var s=2*o.length;setTimeout(function(){t.setSelectionRange(s,s)},1)}}},checkFullSelection:function(t){try{return(window.getSelection()||document.getSelection()||{}).toString().length===t.length}catch(t){}return!1},setSelection:function(t,e,i){if(t===this.getActiveElement(i)&&!(t&&t.value.length<=e))if(t.createTextRange){var n=t.createTextRange();n.move("character",e),n.select()}else try{t.setSelectionRange(e,e)}catch(t){console.warn("The input element type does not support selection")}},getActiveElement:function(t){var e=t.activeElement;return e&&e.shadowRoot?this.getActiveElement(e.shadowRoot):e},isAndroid:function(){return navigator&&/android/i.test(navigator.userAgent)},isAndroidBackspaceKeydown:function(t,e){return!!(this.isAndroid()&&t&&e)&&e===t.slice(0,-1)}},f={assign:function(t,e){return(t=t||{}).creditCard=!!(e=e||{}).creditCard,t.creditCardStrictMode=!!e.creditCardStrictMode,t.creditCardType="",t.onCreditCardTypeChanged=e.onCreditCardTypeChanged||function(){},t.phone=!!e.phone,t.phoneRegionCode=e.phoneRegionCode||"AU",t.phoneFormatter={},t.time=!!e.time,t.timePattern=e.timePattern||["h","m","s"],t.timeFormat=e.timeFormat||"24",t.timeFormatter={},t.date=!!e.date,t.datePattern=e.datePattern||["d","m","Y"],t.dateMin=e.dateMin||"",t.dateMax=e.dateMax||"",t.dateFormatter={},t.numeral=!!e.numeral,t.numeralIntegerScale=0<e.numeralIntegerScale?e.numeralIntegerScale:0,t.numeralDecimalScale=0<=e.numeralDecimalScale?e.numeralDecimalScale:2,t.numeralDecimalMark=e.numeralDecimalMark||".",t.numeralThousandsGroupStyle=e.numeralThousandsGroupStyle||"thousand",t.numeralPositiveOnly=!!e.numeralPositiveOnly,t.stripLeadingZeroes=!1!==e.stripLeadingZeroes,t.signBeforePrefix=!!e.signBeforePrefix,t.numericOnly=t.creditCard||t.date||!!e.numericOnly,t.uppercase=!!e.uppercase,t.lowercase=!!e.lowercase,t.prefix=t.creditCard||t.date?"":e.prefix||"",t.noImmediatePrefix=!!e.noImmediatePrefix,t.prefixLength=t.prefix.length,t.rawValueTrimPrefix=!!e.rawValueTrimPrefix,t.copyDelimiter=!!e.copyDelimiter,t.initValue=void 0!==e.initValue&&null!==e.initValue?e.initValue.toString():"",t.delimiter=e.delimiter||""===e.delimiter?e.delimiter:e.date?"/":e.time?":":e.numeral?",":(e.phone," "),t.delimiterLength=t.delimiter.length,t.delimiterLazyShow=!!e.delimiterLazyShow,t.delimiters=e.delimiters||[],t.blocks=e.blocks||[],t.blocksLength=t.blocks.length,t.root="object"==typeof i&&i?i:window,t.document=e.document||t.root.document,t.maxLength=0,t.backspace=!1,t.result="",t.onValueChanged=e.onValueChanged||function(){},t}},p=function(t,e){var i=this,n=!1;if("string"==typeof t?(i.element=document.querySelector(t),n=1<document.querySelectorAll(t).length):void 0!==t.length&&0<t.length?(i.element=t[0],n=1<t.length):i.element=t,!i.element)throw new Error("[cleave.js] Please check the element");if(n)try{console.warn("[cleave.js] Multiple input fields matched, cleave.js will only take the first one.")}catch(t){}e.initValue=i.element.value,i.properties=p.DefaultProperties.assign({},e),i.init()};p.prototype={init:function(){var t=this,e=t.properties;e.numeral||e.phone||e.creditCard||e.time||e.date||0!==e.blocksLength||e.prefix?(e.maxLength=p.Util.getMaxLength(e.blocks),t.isAndroid=p.Util.isAndroid(),t.lastInputValue="",t.onChangeListener=t.onChange.bind(t),t.onKeyDownListener=t.onKeyDown.bind(t),t.onFocusListener=t.onFocus.bind(t),t.onCutListener=t.onCut.bind(t),t.onCopyListener=t.onCopy.bind(t),t.element.addEventListener("input",t.onChangeListener),t.element.addEventListener("keydown",t.onKeyDownListener),t.element.addEventListener("focus",t.onFocusListener),t.element.addEventListener("cut",t.onCutListener),t.element.addEventListener("copy",t.onCopyListener),t.initPhoneFormatter(),t.initDateFormatter(),t.initTimeFormatter(),t.initNumeralFormatter(),(e.initValue||e.prefix&&!e.noImmediatePrefix)&&t.onInput(e.initValue)):t.onInput(e.initValue)},initNumeralFormatter:function(){var t=this.properties;t.numeral&&(t.numeralFormatter=new p.NumeralFormatter(t.numeralDecimalMark,t.numeralIntegerScale,t.numeralDecimalScale,t.numeralThousandsGroupStyle,t.numeralPositiveOnly,t.stripLeadingZeroes,t.prefix,t.signBeforePrefix,t.delimiter))},initTimeFormatter:function(){var t=this.properties;t.time&&(t.timeFormatter=new p.TimeFormatter(t.timePattern,t.timeFormat),t.blocks=t.timeFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=p.Util.getMaxLength(t.blocks))},initDateFormatter:function(){var t=this.properties;t.date&&(t.dateFormatter=new p.DateFormatter(t.datePattern,t.dateMin,t.dateMax),t.blocks=t.dateFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=p.Util.getMaxLength(t.blocks))},initPhoneFormatter:function(){var t=this.properties;if(t.phone)try{t.phoneFormatter=new p.PhoneFormatter(new t.root.Cleave.AsYouTypeFormatter(t.phoneRegionCode),t.delimiter)}catch(t){throw new Error("[cleave.js] Please include phone-type-formatter.{country}.js lib")}},onKeyDown:function(t){var e=this,i=e.properties,n=t.which||t.keyCode,o=p.Util,r=e.element.value;e.hasBackspaceSupport=e.hasBackspaceSupport||8===n,!e.hasBackspaceSupport&&o.isAndroidBackspaceKeydown(e.lastInputValue,r)&&(n=8),e.lastInputValue=r;var s=o.getPostDelimiter(r,i.delimiter,i.delimiters);i.postDelimiterBackspace=!(8!==n||!s)&&s},onChange:function(){this.onInput(this.element.value)},onFocus:function(){var t=this.properties;p.Util.fixPrefixCursor(this.element,t.prefix,t.delimiter,t.delimiters)},onCut:function(t){p.Util.checkFullSelection(this.element.value)&&(this.copyClipboardData(t),this.onInput(""))},onCopy:function(t){p.Util.checkFullSelection(this.element.value)&&this.copyClipboardData(t)},copyClipboardData:function(t){var e=this.properties,i=p.Util,n=this.element.value,o="";o=e.copyDelimiter?n:i.stripDelimiters(n,e.delimiter,e.delimiters);try{t.clipboardData?t.clipboardData.setData("Text",o):window.clipboardData.setData("Text",o),t.preventDefault()}catch(t){}},onInput:function(t){var e=this,i=e.properties,n=p.Util,o=n.getPostDelimiter(t,i.delimiter,i.delimiters);return i.numeral||!i.postDelimiterBackspace||o||(t=n.headStr(t,t.length-i.postDelimiterBackspace.length)),i.phone?(!i.prefix||i.noImmediatePrefix&&!t.length?i.result=i.phoneFormatter.format(t):i.result=i.prefix+i.phoneFormatter.format(t).slice(i.prefix.length),void e.updateValueState()):i.numeral?(i.prefix&&i.noImmediatePrefix&&0===t.length?i.result="":i.result=i.numeralFormatter.format(t),void e.updateValueState()):(i.date&&(t=i.dateFormatter.getValidatedDate(t)),i.time&&(t=i.timeFormatter.getValidatedTime(t)),t=n.stripDelimiters(t,i.delimiter,i.delimiters),t=n.getPrefixStrippedValue(t,i.prefix,i.prefixLength,i.result,i.delimiter,i.delimiters,i.noImmediatePrefix),t=i.numericOnly?n.strip(t,/[^\d]/g):t,t=i.uppercase?t.toUpperCase():t,t=i.lowercase?t.toLowerCase():t,!i.prefix||i.noImmediatePrefix&&!t.length||(t=i.prefix+t,0!==i.blocksLength)?(i.creditCard&&e.updateCreditCardPropsByValue(t),t=n.headStr(t,i.maxLength),i.result=n.getFormattedValue(t,i.blocks,i.blocksLength,i.delimiter,i.delimiters,i.delimiterLazyShow)):i.result=t,void e.updateValueState())},updateCreditCardPropsByValue:function(t){var e,i=this.properties,n=p.Util;n.headStr(i.result,4)!==n.headStr(t,4)&&(e=p.CreditCardDetector.getInfo(t,i.creditCardStrictMode),i.blocks=e.blocks,i.blocksLength=i.blocks.length,i.maxLength=n.getMaxLength(i.blocks),i.creditCardType!==e.type&&(i.creditCardType=e.type,i.onCreditCardTypeChanged.call(this,i.creditCardType)))},updateValueState:function(){var t=this,e=p.Util,i=t.properties;if(t.element){var n=t.element.selectionEnd,o=t.element.value,r=i.result;n=e.getNextCursorPosition(n,o,r,i.delimiter,i.delimiters),t.isAndroid?window.setTimeout(function(){t.element.value=r,e.setSelection(t.element,n,i.document,!1),t.callOnValueChanged()},1):(t.element.value=r,e.setSelection(t.element,n,i.document,!1),t.callOnValueChanged())}},callOnValueChanged:function(){var t=this.properties;t.onValueChanged.call(this,{target:{value:t.result,rawValue:this.getRawValue()}})},setPhoneRegionCode:function(t){this.properties.phoneRegionCode=t,this.initPhoneFormatter(),this.onChange()},setRawValue:function(t){var e=this.properties;t=null!=t?t.toString():"",e.numeral&&(t=t.replace(".",e.numeralDecimalMark)),e.postDelimiterBackspace=!1,this.element.value=t,this.onInput(t)},getRawValue:function(){var t=this.properties,e=p.Util,i=this.element.value;return t.rawValueTrimPrefix&&(i=e.getPrefixStrippedValue(i,t.prefix,t.prefixLength,t.result,t.delimiter,t.delimiters)),i=t.numeral?t.numeralFormatter.getRawValue(i):e.stripDelimiters(i,t.delimiter,t.delimiters)},getISOFormatDate:function(){var t=this.properties;return t.date?t.dateFormatter.getISOFormatDate():""},getISOFormatTime:function(){var t=this.properties;return t.time?t.timeFormatter.getISOFormatTime():""},getFormattedValue:function(){return this.element.value},destroy:function(){var t=this;t.element.removeEventListener("input",t.onChangeListener),t.element.removeEventListener("keydown",t.onKeyDownListener),t.element.removeEventListener("focus",t.onFocusListener),t.element.removeEventListener("cut",t.onCutListener),t.element.removeEventListener("copy",t.onCopyListener)},toString:function(){return"[Cleave Object]"}},p.NumeralFormatter=n,p.DateFormatter=r,p.TimeFormatter=a,p.PhoneFormatter=l,p.CreditCardDetector=u,p.Util=c,p.DefaultProperties=f;var m=("object"==typeof i&&i?i:window).Cleave=p;v.a=m}).call(this,e(11))},,function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}},function(t,e,i){"use strict";var n=i(29),_=i.n(n),o=i(7),k=i.n(o),r=i(8),s=i.n(r),a=function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN},l=function(r){return 1===r.length&&(r=function(i){return function(t,e){return a(i(t),e)}}(r)),{left:function(t,e,i,n){for(null==i&&(i=0),null==n&&(n=t.length);i<n;){var o=i+n>>>1;r(t[o],e)<0?i=1+o:n=o}return i},right:function(t,e,i,n){for(null==i&&(i=0),null==n&&(n=t.length);i<n;){var o=i+n>>>1;0<r(t[o],e)?n=o:i=1+o}return i}}};var d=l(a),h=d.right,u=(d.left,h);var c=Array.prototype,f=(c.slice,c.map,Math.sqrt(50)),p=Math.sqrt(10),m=Math.sqrt(2),v=function(t,e,i){var n,o,r,s,a=-1;if(i=+i,(t=+t)===(e=+e)&&0<i)return[t];if((n=e<t)&&(o=t,t=e,e=o),0===(s=g(t,e,i))||!isFinite(s))return[];if(0<s)for(t=Math.ceil(t/s),e=Math.floor(e/s),r=new Array(o=Math.ceil(e-t+1));++a<o;)r[a]=(t+a)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),r=new Array(o=Math.ceil(t-e+1));++a<o;)r[a]=(t-a)/s;return n&&r.reverse(),r};function g(t,e,i){var n=(e-t)/Math.max(0,i),o=Math.floor(Math.log(n)/Math.LN10),r=n/Math.pow(10,o);return 0<=o?(f<=r?10:p<=r?5:m<=r?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(f<=r?10:p<=r?5:m<=r?2:1)}function y(t,e,i){var n=Math.abs(e-t)/Math.max(0,i),o=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),r=n/o;return f<=r?o*=10:p<=r?o*=5:m<=r&&(o*=2),e<t?-o:o}function S(t,e){var i,n,o=t.length,r=-1;if(null==e){for(;++r<o;)if(null!=(i=t[r])&&i<=i)for(n=i;++r<o;)null!=(i=t[r])&&n<i&&(n=i)}else for(;++r<o;)if(null!=(i=e(t[r],r,t))&&i<=i)for(n=i;++r<o;)null!=(i=e(t[r],r,t))&&n<i&&(n=i);return n}function b(t,e){var i,n,o=t.length,r=-1;if(null==e){for(;++r<o;)if(null!=(i=t[r])&&i<=i)for(n=i;++r<o;)null!=(i=t[r])&&i<n&&(n=i)}else for(;++r<o;)if(null!=(i=e(t[r],r,t))&&i<=i)for(n=i;++r<o;)null!=(i=e(t[r],r,t))&&i<n&&(n=i);return n}var T=Array.prototype.slice,D=function(t){return t},C=1,M=2,O=3,L=4,I=1e-6;function A(t){return"translate("+(t+.5)+",0)"}function P(t){return"translate(0,"+(t+.5)+")"}function N(){return!this.__axis}function E(m,v){var g=[],y=null,b=null,w=6,_=6,x=3,k=m===C||m===L?-1:1,S=m===L||m===M?"x":"y",E=m===C||m===O?A:P;function e(t){var e=null==y?v.ticks?v.ticks.apply(v,g):v.domain():y,i=null==b?v.tickFormat?v.tickFormat.apply(v,g):D:b,n=Math.max(w,0)+x,o=v.range(),r=+o[0]+.5,s=+o[o.length-1]+.5,a=(v.bandwidth?function(e){var i=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(i=Math.round(i)),function(t){return+e(t)+i}}:function(e){return function(t){return+e(t)}})(v.copy()),l=t.selection?t.selection():t,d=l.selectAll(".domain").data([null]),h=l.selectAll(".tick").data(e,v).order(),u=h.exit(),c=h.enter().append("g").attr("class","tick"),f=h.select("line"),p=h.select("text");d=d.merge(d.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),h=h.merge(c),f=f.merge(c.append("line").attr("stroke","currentColor").attr(S+"2",k*w)),p=p.merge(c.append("text").attr("fill","currentColor").attr(S,k*n).attr("dy",m===C?"0em":m===O?"0.71em":"0.32em")),t!==l&&(d=d.transition(t),h=h.transition(t),f=f.transition(t),p=p.transition(t),u=u.transition(t).attr("opacity",I).attr("transform",function(t){return isFinite(t=a(t))?E(t):this.getAttribute("transform")}),c.attr("opacity",I).attr("transform",function(t){var e=this.parentNode.__axis;return E(e&&isFinite(e=e(t))?e:a(t))})),u.remove(),d.attr("d",m===L||m==M?_?"M"+k*_+","+r+"H0.5V"+s+"H"+k*_:"M0.5,"+r+"V"+s:_?"M"+r+","+k*_+"V0.5H"+s+"V"+k*_:"M"+r+",0.5H"+s),h.attr("opacity",1).attr("transform",function(t){return E(a(t))}),f.attr(S+"2",k*w),p.attr(S,k*n).text(i),l.filter(N).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",m===M?"start":m===L?"end":"middle"),l.each(function(){this.__axis=a})}return e.scale=function(t){return arguments.length?(v=t,e):v},e.ticks=function(){return g=T.call(arguments),e},e.tickArguments=function(t){return arguments.length?(g=null==t?[]:T.call(t),e):g.slice()},e.tickValues=function(t){return arguments.length?(y=null==t?null:T.call(t),e):y&&y.slice()},e.tickFormat=function(t){return arguments.length?(b=t,e):b},e.tickSize=function(t){return arguments.length?(w=_=+t,e):w},e.tickSizeInner=function(t){return arguments.length?(w=+t,e):w},e.tickSizeOuter=function(t){return arguments.length?(_=+t,e):_},e.tickPadding=function(t){return arguments.length?(x=+t,e):x},e}var w={value:function(){}};function j(){for(var t,e=0,i=arguments.length,n={};e<i;++e){if(!(t=arguments[e]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new B(n)}function B(t){this._=t}function R(t,e){for(var i,n=0,o=t.length;n<o;++n)if((i=t[n]).name===e)return i.value}function F(t,e,i){for(var n=0,o=t.length;n<o;++n)if(t[n].name===e){t[n]=w,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=i&&t.push({name:e,value:i}),t}B.prototype=j.prototype={constructor:B,on:function(t,e){var i,n=this._,o=function(t,n){return t.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");if(0<=i&&(e=t.slice(i+1),t=t.slice(0,i)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}(t+"",n),r=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++r<s;)if(i=(t=o[r]).type)n[i]=F(n[i],t.name,e);else if(null==e)for(i in n)n[i]=F(n[i],t.name,null);return this}for(;++r<s;)if((i=(t=o[r]).type)&&(i=R(n[i],t.name)))return i},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new B(t)},call:function(t,e){if(0<(i=arguments.length-2))for(var i,n,o=new Array(i),r=0;r<i;++r)o[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,i=(n=this._[t]).length;r<i;++r)n[r].value.apply(e,o)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,r=n.length;o<r;++o)n[o].value.apply(e,i)}};var z=j;function H(){}function q(t){return null==t?H:function(){return this.querySelector(t)}}function Y(){return[]}function U(t){return null==t?Y:function(){return this.querySelectorAll(t)}}function W(t){return function(){return this.matches(t)}}function V(t){return new Array(t.length)}function G(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}G.prototype={constructor:G,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function X(t,e,i,n,o,r){for(var s,a=0,l=e.length,d=r.length;a<d;++a)(s=e[a])?(s.__data__=r[a],n[a]=s):i[a]=new G(t,r[a]);for(;a<l;++a)(s=e[a])&&(o[a]=s)}function J(t,e,i,n,o,r,s){var a,l,d,h={},u=e.length,c=r.length,f=new Array(u);for(a=0;a<u;++a)(l=e[a])&&(f[a]=d="$"+s.call(l,l.__data__,a,e),d in h?o[a]=l:h[d]=l);for(a=0;a<c;++a)(l=h[d="$"+s.call(t,r[a],a,r)])?((n[a]=l).__data__=r[a],h[d]=null):i[a]=new G(t,r[a]);for(a=0;a<u;++a)(l=e[a])&&h[f[a]]===l&&(o[a]=l)}function Z(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function K(t){var e=t+="",i=e.indexOf(":");return 0<=i&&"xmlns"!==(e=t.slice(0,i))&&(t=t.slice(i+1)),$.hasOwnProperty(e)?{space:$[e],local:t}:t}var Q="http://www.w3.org/1999/xhtml",$={svg:"http://www.w3.org/2000/svg",xhtml:Q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var tt=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function et(t,e){return t.style.getPropertyValue(e)||tt(t).getComputedStyle(t,null).getPropertyValue(e)}function it(t){return t.trim().split(/^|\s+/)}function nt(t){return t.classList||new ot(t)}function ot(t){this._node=t,this._names=it(t.getAttribute("class")||"")}function rt(t,e){for(var i=nt(t),n=-1,o=e.length;++n<o;)i.add(e[n])}function st(t,e){for(var i=nt(t),n=-1,o=e.length;++n<o;)i.remove(e[n])}ot.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};function at(){this.textContent=""}function lt(){this.innerHTML=""}function dt(){this.nextSibling&&this.parentNode.appendChild(this)}function ht(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ut(t){var e=K(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(i){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===Q&&t.documentElement.namespaceURI===Q?t.createElement(i):t.createElementNS(e,i)}})(e)}function ct(){return null}function ft(){var t=this.parentNode;t&&t.removeChild(this)}function pt(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function mt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var vt={},gt=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(vt={mouseenter:"mouseover",mouseleave:"mouseout"}));function yt(i,t,e){return i=bt(i,t,e),function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||i.call(this,t)}}function bt(i,n,o){return function(t){var e=gt;gt=t;try{i.call(this,this.__data__,n,o)}finally{gt=e}}}function wt(r){return function(){var t=this.__on;if(t){for(var e,i=0,n=-1,o=t.length;i<o;++i)e=t[i],r.type&&e.type!==r.type||e.name!==r.name?t[++n]=e:this.removeEventListener(e.type,e.listener,e.capture);++n?t.length=n:delete this.__on}}}function _t(l,d,h){var u=vt.hasOwnProperty(l.type)?yt:bt;return function(t,e,i){var n,o=this.__on,r=u(d,e,i);if(o)for(var s=0,a=o.length;s<a;++s)if((n=o[s]).type===l.type&&n.name===l.name)return this.removeEventListener(n.type,n.listener,n.capture),this.addEventListener(n.type,n.listener=r,n.capture=h),void(n.value=d);this.addEventListener(l.type,r,h),n={type:l.type,name:l.name,value:d,listener:r,capture:h},o?o.push(n):this.__on=[n]}}function xt(t,e,i){var n=tt(t),o=n.CustomEvent;"function"==typeof o?o=new o(e,i):(o=n.document.createEvent("Event"),i?(o.initEvent(e,i.bubbles,i.cancelable),o.detail=i.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}var kt=[null];function St(t,e){this._groups=t,this._parents=e}function Et(){return new St([[document.documentElement]],kt)}St.prototype=Et.prototype={constructor:St,select:function(t){"function"!=typeof t&&(t=q(t));for(var e=this._groups,i=e.length,n=new Array(i),o=0;o<i;++o)for(var r,s,a=e[o],l=a.length,d=n[o]=new Array(l),h=0;h<l;++h)(r=a[h])&&(s=t.call(r,r.__data__,h,a))&&("__data__"in r&&(s.__data__=r.__data__),d[h]=s);return new St(n,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=U(t));for(var e=this._groups,i=e.length,n=[],o=[],r=0;r<i;++r)for(var s,a=e[r],l=a.length,d=0;d<l;++d)(s=a[d])&&(n.push(t.call(s,s.__data__,d,a)),o.push(s));return new St(n,o)},filter:function(t){"function"!=typeof t&&(t=W(t));for(var e=this._groups,i=e.length,n=new Array(i),o=0;o<i;++o)for(var r,s=e[o],a=s.length,l=n[o]=[],d=0;d<a;++d)(r=s[d])&&t.call(r,r.__data__,d,s)&&l.push(r);return new St(n,this._parents)},data:function(t,e){if(!t)return f=new Array(this.size()),d=-1,this.each(function(t){f[++d]=t}),f;var i=e?J:X,n=this._parents,o=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var r=o.length,s=new Array(r),a=new Array(r),l=new Array(r),d=0;d<r;++d){var h=n[d],u=o[d],c=u.length,f=t.call(h,h&&h.__data__,d,n),p=f.length,m=a[d]=new Array(p),v=s[d]=new Array(p);i(h,u,m,v,l[d]=new Array(c),f,e);for(var g,y,b=0,w=0;b<p;++b)if(g=m[b]){for(w<=b&&(w=b+1);!(y=v[w])&&++w<p;);g._next=y||null}}return(s=new St(s,n))._enter=a,s._exit=l,s},enter:function(){return new St(this._enter||this._groups.map(V),this._parents)},exit:function(){return new St(this._exit||this._groups.map(V),this._parents)},join:function(t,e,i){var n=this.enter(),o=this,r=this.exit();return n="function"==typeof t?t(n):n.append(t+""),null!=e&&(o=e(o)),null==i?r.remove():i(r),n&&o?n.merge(o).order():o},merge:function(t){for(var e=this._groups,i=t._groups,n=e.length,o=i.length,r=Math.min(n,o),s=new Array(n),a=0;a<r;++a)for(var l,d=e[a],h=i[a],u=d.length,c=s[a]=new Array(u),f=0;f<u;++f)(l=d[f]||h[f])&&(c[f]=l);for(;a<n;++a)s[a]=e[a];return new St(s,this._parents)},order:function(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var n,o=t[e],r=o.length-1,s=o[r];0<=--r;)(n=o[r])&&(s&&4^n.compareDocumentPosition(s)&&s.parentNode.insertBefore(n,s),s=n);return this},sort:function(i){function t(t,e){return t&&e?i(t.__data__,e.__data__):!t-!e}i=i||Z;for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r){for(var s,a=e[r],l=a.length,d=o[r]=new Array(l),h=0;h<l;++h)(s=a[h])&&(d[h]=s);d.sort(t)}return new St(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var n=t[e],o=0,r=n.length;o<r;++o){var s=n[o];if(s)return s}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,i=0,n=e.length;i<n;++i)for(var o,r=e[i],s=0,a=r.length;s<a;++s)(o=r[s])&&t.call(o,o.__data__,s,r);return this},attr:function(t,e){var i=K(t);if(arguments.length<2){var n=this.node();return i.local?n.getAttributeNS(i.space,i.local):n.getAttribute(i)}return this.each((null==e?i.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?i.local?function(e,i){return function(){var t=i.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,i){return function(){var t=i.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:i.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(i,e))},style:function(t,e,i){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,i,n){return function(){var t=i.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,n)}}:function(t,e,i){return function(){this.style.setProperty(t,e,i)}})(t,e,null==i?"":i)):et(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,i){return function(){var t=i.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var i=it(t+"");if(arguments.length<2){for(var n=nt(this.node()),o=-1,r=i.length;++o<r;)if(!n.contains(i[o]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?rt:st)(this,t)}}:e?function(t){return function(){rt(this,t)}}:function(t){return function(){st(this,t)}})(i,e))},text:function(t){return arguments.length?this.each(null==t?at:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?lt:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(dt)},lower:function(){return this.each(ht)},append:function(t){var e="function"==typeof t?t:ut(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var i="function"==typeof t?t:ut(t),n=null==e?ct:"function"==typeof e?e:q(e);return this.select(function(){return this.insertBefore(i.apply(this,arguments),n.apply(this,arguments)||null)})},remove:function(){return this.each(ft)},clone:function(t){return this.select(t?mt:pt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,i){var n,o,r=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return 0<=i&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}})}(t+""),s=r.length;if(!(arguments.length<2)){for(a=e?_t:wt,null==i&&(i=!1),n=0;n<s;++n)this.each(a(r[n],e,i));return this}var a=this.node().__on;if(a)for(var l,d=0,h=a.length;d<h;++d)for(n=0,l=a[d];n<s;++n)if((o=r[n]).type===l.type&&o.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return xt(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return xt(this,t,e)}})(t,e))}};var Tt=Et,Dt=function(t){return"string"==typeof t?new St([[document.querySelector(t)]],[document.documentElement]):new St([[t]],kt)};function Ct(t,e,i){t.prototype=e.prototype=i,i.constructor=t}function Mt(t,e){var i=Object.create(t.prototype);for(var n in e)i[n]=e[n];return i}function Ot(){}var Lt="\\s*([+-]?\\d+)\\s*",It="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",At="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pt=/^#([0-9a-f]{3,8})$/,Nt=new RegExp("^rgb\\("+[Lt,Lt,Lt]+"\\)$"),jt=new RegExp("^rgb\\("+[At,At,At]+"\\)$"),Bt=new RegExp("^rgba\\("+[Lt,Lt,Lt,It]+"\\)$"),Rt=new RegExp("^rgba\\("+[At,At,At,It]+"\\)$"),Ft=new RegExp("^hsl\\("+[It,At,At]+"\\)$"),zt=new RegExp("^hsla\\("+[It,At,At,It]+"\\)$"),Ht={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function qt(){return this.rgb().formatHex()}function Yt(){return this.rgb().formatRgb()}function Ut(t){var e,i;return t=(t+"").trim().toLowerCase(),(e=Pt.exec(t))?(i=e[1].length,e=parseInt(e[1],16),6===i?Wt(e):3===i?new Xt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===i?new Xt(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===i?new Xt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Nt.exec(t))?new Xt(e[1],e[2],e[3],1):(e=jt.exec(t))?new Xt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Bt.exec(t))?Vt(e[1],e[2],e[3],e[4]):(e=Rt.exec(t))?Vt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ft.exec(t))?Qt(e[1],e[2]/100,e[3]/100,1):(e=zt.exec(t))?Qt(e[1],e[2]/100,e[3]/100,e[4]):Ht.hasOwnProperty(t)?Wt(Ht[t]):"transparent"===t?new Xt(NaN,NaN,NaN,0):null}function Wt(t){return new Xt(t>>16&255,t>>8&255,255&t,1)}function Vt(t,e,i,n){return n<=0&&(t=e=i=NaN),new Xt(t,e,i,n)}function Gt(t,e,i,n){return 1===arguments.length?function(t){return t instanceof Ot||(t=Ut(t)),t?new Xt((t=t.rgb()).r,t.g,t.b,t.opacity):new Xt}(t):new Xt(t,e,i,null==n?1:n)}function Xt(t,e,i,n){this.r=+t,this.g=+e,this.b=+i,this.opacity=+n}function Jt(){return"#"+Kt(this.r)+Kt(this.g)+Kt(this.b)}function Zt(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Kt(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Qt(t,e,i,n){return n<=0?t=e=i=NaN:i<=0||1<=i?t=e=NaN:e<=0&&(t=NaN),new te(t,e,i,n)}function $t(t){if(t instanceof te)return new te(t.h,t.s,t.l,t.opacity);if(t instanceof Ot||(t=Ut(t)),!t)return new te;if(t instanceof te)return t;var e=(t=t.rgb()).r/255,i=t.g/255,n=t.b/255,o=Math.min(e,i,n),r=Math.max(e,i,n),s=NaN,a=r-o,l=(r+o)/2;return a?(s=e===r?(i-n)/a+6*(i<n):i===r?(n-e)/a+2:(e-i)/a+4,a/=l<.5?r+o:2-r-o,s*=60):a=0<l&&l<1?0:s,new te(s,a,l,t.opacity)}function te(t,e,i,n){this.h=+t,this.s=+e,this.l=+i,this.opacity=+n}function ee(t,e,i){return 255*(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)}function ie(t,e,i,n,o){var r=t*t,s=r*t;return((1-3*t+3*r-s)*e+(4-6*r+3*s)*i+(1+3*t+3*r-3*s)*n+s*o)/6}Ct(Ot,Ut,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:qt,formatHex:qt,formatHsl:function(){return $t(this).formatHsl()},formatRgb:Yt,toString:Yt}),Ct(Xt,Gt,Mt(Ot,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Xt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Xt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jt,formatHex:Jt,formatRgb:Zt,toString:Zt})),Ct(te,function(t,e,i,n){return 1===arguments.length?$t(t):new te(t,e,i,null==n?1:n)},Mt(Ot,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new te(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new te(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,n=i+(i<.5?i:1-i)*e,o=2*i-n;return new Xt(ee(240<=t?t-240:120+t,o,n),ee(t,o,n),ee(t<120?240+t:t-120,o,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var ne=function(t){return function(){return t}};function oe(e,i){return function(t){return e+t*i}}function re(i){return 1==(i=+i)?se:function(t,e){return e-t?function(e,i,n){return e=Math.pow(e,n),i=Math.pow(i,n)-e,n=1/n,function(t){return Math.pow(e+t*i,n)}}(t,e,i):ne(isNaN(t)?e:t)}}function se(t,e){var i=e-t;return i?oe(t,i):ne(isNaN(t)?e:t)}var ae=function t(e){var s=re(e);function i(e,t){var i=s((e=Gt(e)).r,(t=Gt(t)).r),n=s(e.g,t.g),o=s(e.b,t.b),r=se(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=n(t),e.b=o(t),e.opacity=r(t),e+""}}return i.gamma=t,i}(1);function le(a){return function(t){var e,i,n=t.length,o=new Array(n),r=new Array(n),s=new Array(n);for(e=0;e<n;++e)i=Gt(t[e]),o[e]=i.r||0,r[e]=i.g||0,s[e]=i.b||0;return o=a(o),r=a(r),s=a(s),i.opacity=1,function(t){return i.r=o(t),i.g=r(t),i.b=s(t),i+""}}}function de(e,i){i=i||[];var n,o=e?Math.min(i.length,e.length):0,r=i.slice();return function(t){for(n=0;n<o;++n)r[n]=e[n]*(1-t)+i[n]*t;return r}}le(function(s){var a=s.length-1;return function(t){var e=t<=0?t=0:1<=t?a-(t=1):Math.floor(t*a),i=s[e],n=s[e+1],o=0<e?s[e-1]:2*i-n,r=e<a-1?s[e+2]:2*n-i;return ie((t-e/a)*a,o,i,n,r)}}),le(function(s){var a=s.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*a),i=s[(e+a-1)%a],n=s[e%a],o=s[(e+1)%a],r=s[(e+2)%a];return ie((t-e/a)*a,i,n,o,r)}});function he(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ue(t,e){var i,n=e?e.length:0,o=t?Math.min(n,t.length):0,r=new Array(o),s=new Array(n);for(i=0;i<o;++i)r[i]=ye(t[i],e[i]);for(;i<n;++i)s[i]=e[i];return function(t){for(i=0;i<o;++i)s[i]=r[i](t);return s}}var ce=function(e,i){return e=+e,i=+i,function(t){return e*(1-t)+i*t}},fe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pe=new RegExp(fe.source,"g");function me(t,n){var e,i,o,r=fe.lastIndex=pe.lastIndex=0,s=-1,a=[],l=[];for(t+="",n+="";(e=fe.exec(t))&&(i=pe.exec(n));)(o=i.index)>r&&(o=n.slice(r,o),a[s]?a[s]+=o:a[++s]=o),(e=e[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:ce(e,i)})),r=pe.lastIndex;return r<n.length&&(o=n.slice(r),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(t){return function(){return t}}(n):(n=l.length,function(t){for(var e,i=0;i<n;++i)a[(e=l[i]).i]=e.x(t);return a.join("")})}var ve,ge,ye=function(t,e){var i,n=typeof e;return null==e||"boolean"==n?ne(e):("number"==n?ce:"string"==n?(i=Ut(e))?(e=i,ae):me:e instanceof Ut?ae:e instanceof Date?function(e,i){var n=new Date;return e=+e,i=+i,function(t){return n.setTime(e*(1-t)+i*t),n}}:he(e)?de:Array.isArray(e)?ue:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var i,n={},o={};for(i in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)i in t?n[i]=ye(t[i],e[i]):o[i]=e[i];return function(t){for(i in n)o[i]=n[i](t);return o}}:ce)(t,e)},be=0,we=0,_e=0,xe=1e3,ke=0,Se=0,Ee=0,Te="object"==typeof performance&&performance.now?performance:Date,De="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ce(){return Se||(De(Me),Se=Te.now()+Ee)}function Me(){Se=0}function Oe(){this._call=this._time=this._next=null}function Le(t,e,i){var n=new Oe;return n.restart(t,e,i),n}function Ie(){Se=(ke=Te.now())+Ee,be=we=0;try{!function(){Ce(),++be;for(var t,e=ve;e;)0<=(t=Se-e._time)&&e._call.call(null,t),e=e._next;--be}()}finally{be=0,function(){var t,e,i=ve,n=1/0;for(;i;)i=i._call?(n>i._time&&(n=i._time),(t=i)._next):(e=i._next,i._next=null,t?t._next=e:ve=e);ge=t,Pe(n)}(),Se=0}}function Ae(){var t=Te.now(),e=t-ke;xe<e&&(Ee-=e,ke=t)}function Pe(t){be||(we=we&&clearTimeout(we),24<t-Se?(t<1/0&&(we=setTimeout(Ie,t-Te.now()-Ee)),_e=_e&&clearInterval(_e)):(_e||(ke=Te.now(),_e=setInterval(Ae,xe)),be=1,De(Ie)))}Oe.prototype=Le.prototype={constructor:Oe,restart:function(t,e,i){if("function"!=typeof t)throw new TypeError("callback is not a function");i=(null==i?Ce():+i)+(null==e?0:+e),this._next||ge===this||(ge?ge._next=this:ve=this,ge=this),this._call=t,this._time=i,Pe()},stop:function(){this._call&&(this._call=null,this._time=1/0,Pe())}};function Ne(e,i,t){var n=new Oe;return i=null==i?0:+i,n.restart(function(t){n.stop(),e(t+i)},i,t),n}function je(t,e,i,n,o,r){var s=t.__transition;if(s){if(i in s)return}else t.__transition={};!function(r,s,a){var l,d=r.__transition;function h(t){var e,i,n,o;if(1!==a.state)return c();for(e in d)if((o=d[e]).name===a.name){if(o.state===ze)return Ne(h);4===o.state?(o.state=6,o.timer.stop(),o.on.call("interrupt",r,r.__data__,o.index,o.group),delete d[e]):+e<s&&(o.state=6,o.timer.stop(),o.on.call("cancel",r,r.__data__,o.index,o.group),delete d[e])}if(Ne(function(){a.state===ze&&(a.state=4,a.timer.restart(u,a.delay,a.time),u(t))}),a.state=2,a.on.call("start",r,r.__data__,a.index,a.group),2===a.state){for(a.state=ze,l=new Array(n=a.tween.length),e=0,i=-1;e<n;++e)(o=a.tween[e].value.call(r,r.__data__,a.index,a.group))&&(l[++i]=o);l.length=i+1}}function u(t){for(var e=t<a.duration?a.ease.call(null,t/a.duration):(a.timer.restart(c),a.state=5,1),i=-1,n=l.length;++i<n;)l[i].call(r,e);5===a.state&&(a.on.call("end",r,r.__data__,a.index,a.group),c())}function c(){for(var t in a.state=6,a.timer.stop(),delete d[s],d)return;delete r.__transition}(d[s]=a).timer=Le(function(t){a.state=1,a.timer.restart(h,a.delay,a.time),a.delay<=t&&h(t-a.delay)},0,a.time)}(t,i,{name:e,index:n,group:o,on:Be,tween:Re,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Fe})}var Be=z("start","end","cancel","interrupt"),Re=[],Fe=0,ze=3;function He(t,e){var i=Ye(t,e);if(i.state>Fe)throw new Error("too late; already scheduled");return i}function qe(t,e){var i=Ye(t,e);if(i.state>ze)throw new Error("too late; already running");return i}function Ye(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function Ue(t,e,i,n,o,r){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*i+e*n)&&(i-=t*l,n-=e*l),(a=Math.sqrt(i*i+n*n))&&(i/=a,n/=a,l/=a),t*n<e*i&&(t=-t,e=-e,l=-l,s=-s),{translateX:o,translateY:r,rotate:Math.atan2(e,t)*Ze,skewX:Math.atan(l)*Ze,scaleX:s,scaleY:a}}var We,Ve,Ge,Xe,Je=function(t,e){var i,n,o,r=t.__transition,s=!0;if(r){for(o in e=null==e?null:e+"",r)(i=r[o]).name===e?(n=2<i.state&&i.state<5,i.state=6,i.timer.stop(),i.on.call(n?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete r[o]):s=!1;s&&delete t.__transition}},Ze=180/Math.PI,Ke={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qe(i,a,l,s){function d(t){return t.length?t.pop()+" ":""}return function(t,e){var o=[],r=[];return t=i(t),e=i(e),function(t,e,i,n,o,r){if(t!==i||e!==n){var s=o.push("translate(",null,a,null,l);r.push({i:s-4,x:ce(t,i)},{i:s-2,x:ce(e,n)})}else(i||n)&&o.push("translate("+i+a+n+l)}(t.translateX,t.translateY,e.translateX,e.translateY,o,r),function(t,e,i,n){t!==e?(180<t-e?e+=360:180<e-t&&(t+=360),n.push({i:i.push(d(i)+"rotate(",null,s)-2,x:ce(t,e)})):e&&i.push(d(i)+"rotate("+e+s)}(t.rotate,e.rotate,o,r),function(t,e,i,n){t!==e?n.push({i:i.push(d(i)+"skewX(",null,s)-2,x:ce(t,e)}):e&&i.push(d(i)+"skewX("+e+s)}(t.skewX,e.skewX,o,r),function(t,e,i,n,o,r){if(t!==i||e!==n){var s=o.push(d(o)+"scale(",null,",",null,")");r.push({i:s-4,x:ce(t,i)},{i:s-2,x:ce(e,n)})}else 1===i&&1===n||o.push(d(o)+"scale("+i+","+n+")")}(t.scaleX,t.scaleY,e.scaleX,e.scaleY,o,r),t=e=null,function(t){for(var e,i=-1,n=r.length;++i<n;)o[(e=r[i]).i]=e.x(t);return o.join("")}}}var $e=Qe(function(t){return"none"===t?Ke:(We||(We=document.createElement("DIV"),Ve=document.documentElement,Ge=document.defaultView),We.style.transform=t,t=Ge.getComputedStyle(Ve.appendChild(We),null).getPropertyValue("transform"),Ve.removeChild(We),t=t.slice(7,-1).split(","),Ue(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),ti=Qe(function(t){return null==t?Ke:((Xe=Xe||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=Xe.transform.baseVal.consolidate())?(t=t.matrix,Ue(t.a,t.b,t.c,t.d,t.e,t.f)):Ke)},", ",")",")");function ei(t,e,i){var n=t._id;return t.each(function(){var t=qe(this,n);(t.value||(t.value={}))[e]=i.apply(this,arguments)}),function(t){return Ye(t,n).value[e]}}function ii(t,e){var i;return("number"==typeof e?ce:e instanceof Ut?ae:(i=Ut(e))?(e=i,ae):me)(t,e)}function ni(e,i){var n,o;function t(){var t=i.apply(this,arguments);return t!==o&&(n=(o=t)&&function(e,i){return function(t){this.setAttributeNS(e.space,e.local,i.call(this,t))}}(e,t)),n}return t._value=i,t}function oi(e,i){var n,o;function t(){var t=i.apply(this,arguments);return t!==o&&(n=(o=t)&&function(e,i){return function(t){this.setAttribute(e,i.call(this,t))}}(e,t)),n}return t._value=i,t}function ri(i,n,o){var r,s,a=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return 0<=e&&(t=t.slice(0,e)),!t||"start"===t})}(n)?He:qe;return function(){var t=a(this,i),e=t.on;e!==r&&(s=(r=e).copy()).on(n,o),t.on=s}}var si=Tt.prototype.constructor;function ai(t){return function(){this.style.removeProperty(t)}}function li(e,i,n){var o,r;function t(){var t=i.apply(this,arguments);return t!==r&&(o=(r=t)&&function(e,i,n){return function(t){this.style.setProperty(e,i.call(this,t),n)}}(e,t,n)),o}return t._value=i,t}function di(e){var i,n;function t(){var t=e.apply(this,arguments);return t!==n&&(i=(n=t)&&function(e){return function(t){this.textContent=e.call(this,t)}}(t)),i}return t._value=e,t}var hi=0;function ui(t,e,i,n){this._groups=t,this._parents=e,this._name=i,this._id=n}function ci(){return++hi}var fi=Tt.prototype;ui.prototype={constructor:ui,select:function(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=q(t));for(var n=this._groups,o=n.length,r=new Array(o),s=0;s<o;++s)for(var a,l,d=n[s],h=d.length,u=r[s]=new Array(h),c=0;c<h;++c)(a=d[c])&&(l=t.call(a,a.__data__,c,d))&&("__data__"in a&&(l.__data__=a.__data__),u[c]=l,je(u[c],e,i,c,u,Ye(a,i)));return new ui(r,this._parents,e,i)},selectAll:function(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=U(t));for(var n=this._groups,o=n.length,r=[],s=[],a=0;a<o;++a)for(var l,d=n[a],h=d.length,u=0;u<h;++u)if(l=d[u]){for(var c,f=t.call(l,l.__data__,u,d),p=Ye(l,i),m=0,v=f.length;m<v;++m)(c=f[m])&&je(c,e,i,m,f,p);r.push(f),s.push(l)}return new ui(r,s,e,i)},filter:function(t){"function"!=typeof t&&(t=W(t));for(var e=this._groups,i=e.length,n=new Array(i),o=0;o<i;++o)for(var r,s=e[o],a=s.length,l=n[o]=[],d=0;d<a;++d)(r=s[d])&&t.call(r,r.__data__,d,s)&&l.push(r);return new ui(n,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,n=e.length,o=i.length,r=Math.min(n,o),s=new Array(n),a=0;a<r;++a)for(var l,d=e[a],h=i[a],u=d.length,c=s[a]=new Array(u),f=0;f<u;++f)(l=d[f]||h[f])&&(c[f]=l);for(;a<n;++a)s[a]=e[a];return new ui(s,this._parents,this._name,this._id)},selection:function(){return new si(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,i=ci(),n=this._groups,o=n.length,r=0;r<o;++r)for(var s,a=n[r],l=a.length,d=0;d<l;++d)if(s=a[d]){var h=Ye(s,e);je(s,t,i,d,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new ui(n,this._parents,t,i)},call:fi.call,nodes:fi.nodes,node:fi.node,size:fi.size,empty:fi.empty,each:fi.each,on:function(t,e){var i=this._id;return arguments.length<2?Ye(this.node(),i).on.on(t):this.each(ri(i,t,e))},attr:function(t,e){var i=K(t),n="transform"===i?ti:ii;return this.attrTween(t,"function"==typeof e?(i.local?function(n,o,r){var s,a,l;return function(){var t,e,i=r(this);if(null!=i)return(t=this.getAttributeNS(n.space,n.local))===(e=i+"")?null:t===s&&e===a?l:(a=e,l=o(s=t,i));this.removeAttributeNS(n.space,n.local)}}:function(n,o,r){var s,a,l;return function(){var t,e,i=r(this);if(null!=i)return(t=this.getAttribute(n))===(e=i+"")?null:t===s&&e===a?l:(a=e,l=o(s=t,i));this.removeAttribute(n)}})(i,n,ei(this,"attr."+t,e)):null==e?(i.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(i):(i.local?function(e,i,n){var o,r,s=n+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===s?null:t===o?r:r=i(o=t,n)}}:function(e,i,n){var o,r,s=n+"";return function(){var t=this.getAttribute(e);return t===s?null:t===o?r:r=i(o=t,n)}})(i,n,e))},attrTween:function(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;var n=K(t);return this.tween(i,(n.local?ni:oi)(n,e))},style:function(t,e,i){var n="transform"==(t+="")?$e:ii;return null==e?this.styleTween(t,function(i,n){var o,r,s;return function(){var t=et(this,i),e=(this.style.removeProperty(i),et(this,i));return t===e?null:t===o&&e===r?s:s=n(o=t,r=e)}}(t,n)).on("end.style."+t,ai(t)):"function"==typeof e?this.styleTween(t,function(n,o,r){var s,a,l;return function(){var t=et(this,n),e=r(this),i=e+"";return null==e&&(this.style.removeProperty(n),i=e=et(this,n)),t===i?null:t===s&&i===a?l:(a=i,l=o(s=t,e))}}(t,n,ei(this,"style."+t,e))).each(function(n,o){var r,s,a,l,d="style."+o,h="end."+d;return function(){var t=qe(this,n),e=t.on,i=null==t.value[d]?l=l||ai(o):void 0;e===r&&a===i||(s=(r=e).copy()).on(h,a=i),t.on=s}}(this._id,t)):this.styleTween(t,function(e,i,n){var o,r,s=n+"";return function(){var t=et(this,e);return t===s?null:t===o?r:r=i(o=t,n)}}(t,n,e),i).on("end.style."+t,null)},styleTween:function(t,e,i){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;return this.tween(n,li(t,e,null==i?"":i))},text:function(t){return this.tween("text","function"==typeof t?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(ei(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,di(t))},remove:function(){return this.on("end.remove",function(i){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==i)return;t&&t.removeChild(this)}}(this._id))},tween:function(t,e){var i=this._id;if(t+="",arguments.length<2){for(var n,o=Ye(this.node(),i).tween,r=0,s=o.length;r<s;++r)if((n=o[r]).name===t)return n.value;return null}return this.each((null==e?function(o,r){var s,a;return function(){var t=qe(this,o),e=t.tween;if(e!==s)for(var i=0,n=(a=s=e).length;i<n;++i)if(a[i].name===r){(a=a.slice()).splice(i,1);break}t.tween=a}}:function(r,s,a){var l,d;if("function"!=typeof a)throw new Error;return function(){var t=qe(this,r),e=t.tween;if(e!==l){d=(l=e).slice();for(var i={name:s,value:a},n=0,o=d.length;n<o;++n)if(d[n].name===s){d[n]=i;break}n===o&&d.push(i)}t.tween=d}})(i,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){He(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){He(this,t).delay=e}})(e,t)):Ye(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){qe(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){qe(this,t).duration=e}})(e,t)):Ye(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){qe(this,t).ease=e}}(e,t)):Ye(this.node(),e).ease},end:function(){var o,r,s=this,a=s._id,l=s.size();return new Promise(function(t,e){var i={value:e},n={value:function(){0==--l&&t()}};s.each(function(){var t=qe(this,a),e=t.on;e!==o&&((r=(o=e).copy())._.cancel.push(i),r._.interrupt.push(i),r._.end.push(n)),t.on=r})})}};var pi={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function mi(t,e){for(var i;!(i=t.__transition)||!(i=i[e]);)if(!(t=t.parentNode))return pi.time=Ce(),pi;return i}Tt.prototype.interrupt=function(t){return this.each(function(){Je(this,t)})},Tt.prototype.transition=function(t){var e,i;t=t instanceof ui?(e=t._id,t._name):(e=ci(),(i=pi).time=Ce(),null==t?null:t+"");for(var n=this._groups,o=n.length,r=0;r<o;++r)for(var s,a=n[r],l=a.length,d=0;d<l;++d)(s=a[d])&&je(s,t,e,d,a,i||mi(s,e));return new ui(n,this._parents,t,e)};function vi(t){return[+t[0],+t[1]]}function gi(t){return[vi(t[0]),vi(t[1])]}["w","e"].map(yi),["n","s"].map(yi),["n","w","e","s","nw","ne","sw","se"].map(yi);function yi(t){return{type:t}}Math.cos,Math.sin,Math.PI,Math.max;Array.prototype.slice;var bi=Math.PI,wi=2*bi,_i=1e-6,xi=wi-_i;function ki(){this._x0=this._y0=this._x1=this._y1=null,this._=""}ki.prototype={constructor:ki,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,n){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+n)},bezierCurveTo:function(t,e,i,n,o,r){this._+="C"+ +t+","+ +e+","+ +i+","+ +n+","+(this._x1=+o)+","+(this._y1=+r)},arcTo:function(t,e,i,n,o){t=+t,e=+e,i=+i,n=+n,o=+o;var r=this._x1,s=this._y1,a=i-t,l=n-e,d=r-t,h=s-e,u=d*d+h*h;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(_i<u)if(Math.abs(h*a-l*d)>_i&&o){var c=i-r,f=n-s,p=a*a+l*l,m=c*c+f*f,v=Math.sqrt(p),g=Math.sqrt(u),y=o*Math.tan((bi-Math.acos((p+u-m)/(2*v*g)))/2),b=y/g,w=y/v;Math.abs(b-1)>_i&&(this._+="L"+(t+b*d)+","+(e+b*h)),this._+="A"+o+","+o+",0,0,"+ +(d*f<h*c)+","+(this._x1=t+w*a)+","+(this._y1=e+w*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,i,n,o,r){t=+t,e=+e,r=!!r;var s=(i=+i)*Math.cos(n),a=i*Math.sin(n),l=t+s,d=e+a,h=1^r,u=r?n-o:o-n;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+l+","+d:(Math.abs(this._x1-l)>_i||Math.abs(this._y1-d)>_i)&&(this._+="L"+l+","+d),i&&(u<0&&(u=u%wi+wi),xi<u?this._+="A"+i+","+i+",0,1,"+h+","+(t-s)+","+(e-a)+"A"+i+","+i+",0,1,"+h+","+(this._x1=l)+","+(this._y1=d):_i<u&&(this._+="A"+i+","+i+",0,"+ +(bi<=u)+","+h+","+(this._x1=t+i*Math.cos(o))+","+(this._y1=e+i*Math.sin(o))))},rect:function(t,e,i,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +n+"h"+-i+"Z"},toString:function(){return this._}};var Si="$";function Ei(){}function Ti(t,e){var i=new Ei;if(t instanceof Ei)t.each(function(t,e){i.set(e,t)});else if(Array.isArray(t)){var n,o=-1,r=t.length;if(null==e)for(;++o<r;)i.set(o,t[o]);else for(;++o<r;)i.set(e(n=t[o],o,t),n)}else if(t)for(var s in t)i.set(s,t[s]);return i}Ei.prototype=Ti.prototype={constructor:Ei,has:function(t){return Si+t in this},get:function(t){return this[Si+t]},set:function(t,e){return this[Si+t]=e,this},remove:function(t){var e=Si+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Si&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Si&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Si&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Si&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Si&&++t;return t},empty:function(){for(var t in this)if(t[0]===Si)return!1;return!0},each:function(t){for(var e in this)e[0]===Si&&t(this[e],e.slice(1),this)}};var Di=Ti;function Ci(){}var Mi=Di.prototype;Ci.prototype={constructor:Ci,has:Mi.has,add:function(t){return this[Si+(t+="")]=t,this},remove:Mi.remove,clear:Mi.clear,values:Mi.keys,size:Mi.size,empty:Mi.empty,each:Mi.each};Array.prototype.slice;var Oi={},Li={};function Ii(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function Ai(t){var i=Object.create(null),n=[];return t.forEach(function(t){for(var e in t)e in i||n.push(i[e]=e)}),n}function Pi(t,e){var i=t+"",n=i.length;return n<e?new Array(e-n+1).join(0)+i:i}function Ni(t){var e=t.getUTCHours(),i=t.getUTCMinutes(),n=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+Pi(-t,6):9999<t?"+"+Pi(t,6):Pi(t,4)}(t.getUTCFullYear())+"-"+Pi(t.getUTCMonth()+1,2)+"-"+Pi(t.getUTCDate(),2)+(o?"T"+Pi(e,2)+":"+Pi(i,2)+":"+Pi(n,2)+"."+Pi(o,3)+"Z":n?"T"+Pi(e,2)+":"+Pi(i,2)+":"+Pi(n,2)+"Z":i||e?"T"+Pi(e,2)+":"+Pi(i,2)+"Z":"")}var ji=function(n){var e=new RegExp('["'+n+"\n\r]"),u=n.charCodeAt(0);function r(n,t){var e,i=[],o=n.length,r=0,s=0,a=o<=0,l=!1;function d(){if(a)return Li;if(l)return l=!1,Oi;var t,e,i=r;if(34===n.charCodeAt(i)){for(;r++<o&&34!==n.charCodeAt(r)||34===n.charCodeAt(++r););return(t=r)>=o?a=!0:10===(e=n.charCodeAt(r++))?l=!0:13===e&&(l=!0,10===n.charCodeAt(r)&&++r),n.slice(i+1,t-1).replace(/""/g,'"')}for(;r<o;){if(10===(e=n.charCodeAt(t=r++)))l=!0;else if(13===e)l=!0,10===n.charCodeAt(r)&&++r;else if(e!==u)continue;return n.slice(i,t)}return a=!0,n.slice(i,o)}for(10===n.charCodeAt(o-1)&&--o,13===n.charCodeAt(o-1)&&--o;(e=d())!==Li;){for(var h=[];e!==Oi&&e!==Li;)h.push(e),e=d();t&&null==(h=t(h,s++))||i.push(h)}return i}function i(t,i){return t.map(function(e){return i.map(function(t){return s(e[t])}).join(n)})}function o(t){return t.map(s).join(n)}function s(t){return null==t?"":t instanceof Date?Ni(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,i){var n,o,e=r(t,function(t,e){if(n)return n(t,e-1);o=t,n=i?function(i,n){var o=Ii(i);return function(t,e){return n(o(t),e,i)}}(t,i):Ii(t)});return e.columns=o||[],e},parseRows:r,format:function(t,e){return null==e&&(e=Ai(t)),[e.map(s).join(n)].concat(i(t,e)).join("\n")},formatBody:function(t,e){return null==e&&(e=Ai(t)),i(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:s}},Bi=ji(","),Ri=Bi.parse,Fi=(Bi.parseRows,Bi.format,Bi.formatBody,Bi.formatRows,Bi.formatRow,Bi.formatValue,ji("\t")),zi=Fi.parse;Fi.parseRows,Fi.format,Fi.formatBody,Fi.formatRows,Fi.formatRow,Fi.formatValue;function Hi(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var qi=function(t,e){return fetch(t,e).then(Hi)};function Yi(n){return function(t,e,i){return 2===arguments.length&&"function"==typeof e&&(i=e,e=void 0),qi(t,e).then(function(t){return n(t,i)})}}Yi(Ri),Yi(zi);function Ui(i){return function(t,e){return qi(t,e).then(function(t){return(new DOMParser).parseFromString(t,i)})}}Ui("application/xml"),Ui("text/html"),Ui("image/svg+xml");function Wi(t,e,i,n){if(isNaN(e)||isNaN(i))return t;var o,r,s,a,l,d,h,u,c,f=t._root,p={data:n},m=t._x0,v=t._y0,g=t._x1,y=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((d=e>=(r=(m+g)/2))?m=r:g=r,(h=i>=(s=(v+y)/2))?v=s:y=s,!(f=(o=f)[u=h<<1|d]))return o[u]=p,t;if(a=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===a&&i===l)return p.next=f,o?o[u]=p:t._root=p,t;for(;o=o?o[u]=new Array(4):t._root=new Array(4),(d=e>=(r=(m+g)/2))?m=r:g=r,(h=i>=(s=(v+y)/2))?v=s:y=s,(u=h<<1|d)==(c=(s<=l)<<1|r<=a););return o[c]=f,o[u]=p,t}function Vi(t,e,i,n,o){this.node=t,this.x0=e,this.y0=i,this.x1=n,this.y1=o}function Gi(t,e,i,n,o,r){this._x=t,this._y=e,this._x0=i,this._y0=n,this._x1=o,this._y1=r,this._root=void 0}function Xi(t){for(var e={data:t.data},i=e;t=t.next;)i=i.next={data:t.data};return e}var Ji=Gi.prototype;Ji.copy=function(){var t,e,i=new Gi(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return i;if(!n.length)return i._root=Xi(n),i;for(t=[{source:n,target:i._root=new Array(4)}];n=t.pop();)for(var o=0;o<4;++o)(e=n.source[o])&&(e.length?t.push({source:e,target:n.target[o]=new Array(4)}):n.target[o]=Xi(e));return i},Ji.add=function(t){var e=+this._x.call(null,t),i=+this._y.call(null,t);return Wi(this.cover(e,i),e,i,t)},Ji.addAll=function(t){var e,i,n,o,r=t.length,s=new Array(r),a=new Array(r),l=1/0,d=1/0,h=-1/0,u=-1/0;for(i=0;i<r;++i)isNaN(n=+this._x.call(null,e=t[i]))||isNaN(o=+this._y.call(null,e))||((s[i]=n)<l&&(l=n),h<n&&(h=n),(a[i]=o)<d&&(d=o),u<o&&(u=o));if(h<l||u<d)return this;for(this.cover(l,d).cover(h,u),i=0;i<r;++i)Wi(this,s[i],a[i],t[i]);return this},Ji.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var i=this._x0,n=this._y0,o=this._x1,r=this._y1;if(isNaN(i))o=(i=Math.floor(t))+1,r=(n=Math.floor(e))+1;else{for(var s,a,l=o-i,d=this._root;t<i||o<=t||e<n||r<=e;)switch(a=(e<n)<<1|t<i,(s=new Array(4))[a]=d,d=s,l*=2,a){case 0:o=i+l,r=n+l;break;case 1:i=o-l,r=n+l;break;case 2:o=i+l,n=r-l;break;case 3:i=o-l,n=r-l}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=n,this._x1=o,this._y1=r,this},Ji.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},Ji.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ji.find=function(t,e,i){var n,o,r,s,a,l,d,h=this._x0,u=this._y0,c=this._x1,f=this._y1,p=[],m=this._root;for(m&&p.push(new Vi(m,h,u,c,f)),null==i?i=1/0:(h=t-i,u=e-i,c=t+i,f=e+i,i*=i);l=p.pop();)if(!(!(m=l.node)||(o=l.x0)>c||(r=l.y0)>f||(s=l.x1)<h||(a=l.y1)<u))if(m.length){var v=(o+s)/2,g=(r+a)/2;p.push(new Vi(m[3],v,g,s,a),new Vi(m[2],o,g,v,a),new Vi(m[1],v,r,s,g),new Vi(m[0],o,r,v,g)),(d=(g<=e)<<1|v<=t)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-d],p[p.length-1-d]=l)}else{var y=t-this._x.call(null,m.data),b=e-this._y.call(null,m.data),w=y*y+b*b;if(w<i){var _=Math.sqrt(i=w);h=t-_,u=e-_,c=t+_,f=e+_,n=m.data}}return n},Ji.remove=function(t){if(isNaN(r=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,i,n,o,r,s,a,l,d,h,u,c,f=this._root,p=this._x0,m=this._y0,v=this._x1,g=this._y1;if(!f)return this;if(f.length)for(;;){if((d=r>=(a=(p+v)/2))?p=a:v=a,(h=s>=(l=(m+g)/2))?m=l:g=l,!(f=(e=f)[u=h<<1|d]))return this;if(!f.length)break;(e[u+1&3]||e[u+2&3]||e[u+3&3])&&(i=e,c=u)}for(;f.data!==t;)if(!(f=(n=f).next))return this;return(o=f.next)&&delete f.next,n?o?n.next=o:delete n.next:e?(o?e[u]=o:delete e[u],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(i?i[c]=f:this._root=f)):this._root=o,this},Ji.removeAll=function(t){for(var e=0,i=t.length;e<i;++e)this.remove(t[e]);return this},Ji.root=function(){return this._root},Ji.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},Ji.visit=function(t){var e,i,n,o,r,s,a=[],l=this._root;for(l&&a.push(new Vi(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,n=e.x0,o=e.y0,r=e.x1,s=e.y1)&&l.length){var d=(n+r)/2,h=(o+s)/2;(i=l[3])&&a.push(new Vi(i,d,h,r,s)),(i=l[2])&&a.push(new Vi(i,n,h,d,s)),(i=l[1])&&a.push(new Vi(i,d,o,r,h)),(i=l[0])&&a.push(new Vi(i,n,o,d,h))}return this},Ji.visitAfter=function(t){var e,i=[],n=[];for(this._root&&i.push(new Vi(this._root,this._x0,this._y0,this._x1,this._y1));e=i.pop();){var o=e.node;if(o.length){var r,s=e.x0,a=e.y0,l=e.x1,d=e.y1,h=(s+l)/2,u=(a+d)/2;(r=o[0])&&i.push(new Vi(r,s,a,h,u)),(r=o[1])&&i.push(new Vi(r,h,a,l,u)),(r=o[2])&&i.push(new Vi(r,s,u,h,d)),(r=o[3])&&i.push(new Vi(r,h,u,l,d))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Ji.x=function(t){return arguments.length?(this._x=t,this):this._x},Ji.y=function(t){return arguments.length?(this._y=t,this):this._y};function Zi(){return Math.random()}Math.PI,Math.sqrt(5),function t(i){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return i()*e+t}}return e.source=t,e}(Zi);var Ki=function t(r){function e(e,i){var n,o;return e=null==e?0:+e,i=null==i?1:+i,function(){var t;if(null!=n)t=n,n=null;else for(;n=2*r()-1,t=2*r()-1,!(o=n*n+t*t)||1<o;);return e+i*t*Math.sqrt(-2*Math.log(o)/o)}}return e.source=t,e}(Zi),Qi=(function t(e){function i(){var t=Ki.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return i.source=t,i}(Zi),function t(n){function e(i){return function(){for(var t=0,e=0;e<i;++e)t+=n();return t}}return e.source=t,e}(Zi));(function t(i){function e(t){var e=Qi.source(i)(t);return function(){return e()/t}}return e.source=t,e})(Zi),function t(e){function i(t){return function(){return-Math.log(1-e())/t}}return i.source=t,i}(Zi);function $i(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var tn=Array.prototype,en=tn.map,nn=tn.slice;var on=function(e,i){return e=+e,i=+i,function(t){return Math.round(e*(1-t)+i*t)}},rn=function(t){return function(){return t}},sn=function(t){return+t},an=[0,1];function ln(t){return t}function dn(e,i){return(i-=e=+e)?function(t){return(t-e)/i}:rn(isNaN(i)?NaN:.5)}function hn(t){var e,i=t[0],n=t[t.length-1];return n<i&&(e=i,i=n,n=e),function(t){return Math.max(i,Math.min(n,t))}}function un(t,e,i){var n=t[0],o=t[1],r=e[0],s=e[1];return r=o<n?(n=dn(o,n),i(s,r)):(n=dn(n,o),i(r,s)),function(t){return r(n(t))}}function cn(i,t,e){var n=Math.min(i.length,t.length)-1,o=new Array(n),r=new Array(n),s=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),t=t.slice().reverse());++s<n;)o[s]=dn(i[s],i[s+1]),r[s]=e(t[s],t[s+1]);return function(t){var e=u(i,t,1,n)-1;return r[e](o[e](t))}}function fn(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function pn(){var i,n,e,o,r,s,a=an,l=an,d=ye,h=ln;function u(){return o=2<Math.min(a.length,l.length)?cn:un,r=s=null,c}function c(t){return isNaN(t=+t)?e:(r=r||o(a.map(i),l,d))(i(h(t)))}return c.invert=function(t){return h(n((s=s||o(l,a.map(i),ce))(t)))},c.domain=function(t){return arguments.length?(a=en.call(t,sn),h===ln||(h=hn(a)),u()):a.slice()},c.range=function(t){return arguments.length?(l=nn.call(t),u()):l.slice()},c.rangeRound=function(t){return l=nn.call(t),d=on,u()},c.clamp=function(t){return arguments.length?(h=t?hn(a):ln,c):h!==ln},c.interpolate=function(t){return arguments.length?(d=t,u()):d},c.unknown=function(t){return arguments.length?(e=t,c):e},function(t,e){return i=t,n=e,u()}}function mn(t,e){return pn()(t,e)}var vn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gn(t){if(!(e=vn.exec(t)))throw new Error("invalid format: "+t);var e;return new yn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function yn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}gn.prototype=yn.prototype,yn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function bn(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,n=t.slice(0,i);return[1<n.length?n[0]+n.slice(2):n,+t.slice(i+1)]}function wn(t){return(t=bn(Math.abs(t)))?t[1]:NaN}function _n(t,e){var i=bn(t,e);if(!i)return t+"";var n=i[0],o=i[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}function xn(t){return t}var kn,Sn,En,Tn,Dn={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return _n(100*t,e)},r:_n,s:function(t,e){var i=bn(t,e);if(!i)return t+"";var n=i[0],o=i[1],r=o-(kn=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=n.length;return r===s?n:s<r?n+new Array(r-s+1).join("0"):0<r?n.slice(0,r)+"."+n.slice(r):"0."+new Array(1-r).join("0")+bn(t,Math.max(0,e+r-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Cn=Array.prototype.map,Mn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];Sn=function(t){var x=void 0===t.grouping||void 0===t.thousands?xn:function(a,l){return function(t,e){for(var i=t.length,n=[],o=0,r=a[0],s=0;0<i&&0<r&&(e<s+r+1&&(r=Math.max(1,e-s)),n.push(t.substring(i-=r,i+r)),!((s+=r+1)>e));)r=a[o=(o+1)%a.length];return n.reverse().join(l)}}(Cn.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",k=void 0===t.decimal?".":t.decimal+"",S=void 0===t.numerals?xn:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(Cn.call(t.numerals,String)),r=void 0===t.percent?"%":t.percent+"",E=void 0===t.minus?"-":t.minus+"",T=void 0===t.nan?"NaN":t.nan+"";function s(t){var d=(t=gn(t)).fill,h=t.align,u=t.sign,e=t.symbol,c=t.zero,f=t.width,p=t.comma,m=t.precision,v=t.trim,g=t.type;"n"===g?(p=!0,g="g"):Dn[g]||(void 0===m&&(m=12),v=!0,g="g"),(c||"0"===d&&"="===h)&&(c=!0,d="0",h="=");var y="$"===e?n:"#"===e&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===e?o:/[%p]/.test(g)?r:"",w=Dn[g],_=/[defgprs%]/.test(g);function i(t){var e,i,n,o=y,r=b;if("c"===g)r=w(t)+r,t="";else{var s=(t=+t)<0;if(t=isNaN(t)?T:w(Math.abs(t),m),v&&(t=function(t){t:for(var e,i=t.length,n=1,o=-1;n<i;++n)switch(t[n]){case".":o=e=n;break;case"0":0===o&&(o=n),e=n;break;default:if(0<o){if(!+t[n])break t;o=0}}return 0<o?t.slice(0,o)+t.slice(e+1):t}(t)),s&&0==+t&&(s=!1),o=(s?"("===u?u:E:"-"===u||"("===u?"":u)+o,r=("s"===g?Mn[8+kn/3]:"")+r+(s&&"("===u?")":""),_)for(e=-1,i=t.length;++e<i;)if((n=t.charCodeAt(e))<48||57<n){r=(46===n?k+t.slice(e+1):t.slice(e))+r,t=t.slice(0,e);break}}p&&!c&&(t=x(t,1/0));var a=o.length+t.length+r.length,l=a<f?new Array(f-a+1).join(d):"";switch(p&&c&&(t=x(l+t,l.length?f-r.length:1/0),l=""),h){case"<":t=o+t+r+l;break;case"=":t=o+l+t+r;break;case"^":t=l.slice(0,a=l.length>>1)+o+t+r+l.slice(a);break;default:t=l+o+t+r}return S(t)}return m=void 0===m?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),i.toString=function(){return t+""},i}return{format:s,formatPrefix:function(t,e){var i=s(((t=gn(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(wn(e)/3))),o=Math.pow(10,-n),r=Mn[8+n/3];return function(t){return i(o*t)+r}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),En=Sn.format,Tn=Sn.formatPrefix;var On=function(t,e,i,n){var o,r=y(t,e,i);switch((n=gn(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null!=n.precision||isNaN(o=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(wn(e)/3)))-wn(Math.abs(t)))}(r,s))||(n.precision=o),Tn(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(o=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,wn(e)-wn(t))+1}(r,Math.max(Math.abs(t),Math.abs(e))))||(n.precision=o-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(o=function(t){return Math.max(0,-wn(Math.abs(t)))}(r))||(n.precision=o-2*("%"===n.type))}return En(n)};function Ln(a){var l=a.domain;return a.ticks=function(t){var e=l();return v(e[0],e[e.length-1],null==t?10:t)},a.tickFormat=function(t,e){var i=l();return On(i[0],i[i.length-1],null==t?10:t,e)},a.nice=function(t){null==t&&(t=10);var e,i=l(),n=0,o=i.length-1,r=i[n],s=i[o];return s<r&&(e=r,r=s,s=e,e=n,n=o,o=e),0<(e=g(r,s,t))?e=g(r=Math.floor(r/e)*e,s=Math.ceil(s/e)*e,t):e<0&&(e=g(r=Math.ceil(r*e)/e,s=Math.floor(s*e)/e,t)),0<e?(i[n]=Math.floor(r/e)*e,i[o]=Math.ceil(s/e)*e,l(i)):e<0&&(i[n]=Math.ceil(r*e)/e,i[o]=Math.floor(s*e)/e,l(i)),a},a}function In(){var t=mn(ln,ln);return t.copy=function(){return fn(t,In())},$i.apply(t,arguments),Ln(t)}var An=new Date,Pn=new Date;function Nn(r,s,i,n){function a(t){return r(t=0===arguments.length?new Date:new Date(+t)),t}return a.floor=function(t){return r(t=new Date(+t)),t},a.ceil=function(t){return r(t=new Date(t-1)),s(t,1),r(t),t},a.round=function(t){var e=a(t),i=a.ceil(t);return t-e<i-t?e:i},a.offset=function(t,e){return s(t=new Date(+t),null==e?1:Math.floor(e)),t},a.range=function(t,e,i){var n,o=[];if(t=a.ceil(t),i=null==i?1:Math.floor(i),!(t<e&&0<i))return o;for(;o.push(n=new Date(+t)),s(t,i),r(t),n<t&&t<e;);return o},a.filter=function(i){return Nn(function(t){if(t<=t)for(;r(t),!i(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;s(t,-1),!i(t););else for(;0<=--e;)for(;s(t,1),!i(t););})},i&&(a.count=function(t,e){return An.setTime(+t),Pn.setTime(+e),r(An),r(Pn),Math.floor(i(An,Pn))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?a.filter(n?function(t){return n(t)%e==0}:function(t){return a.count(0,t)%e==0}):a:null}),a}var jn=Nn(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});jn.every=function(i){return isFinite(i=Math.floor(i))&&0<i?Nn(function(t){t.setFullYear(Math.floor(t.getFullYear()/i)*i),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*i)}):null};var Bn=jn,Rn=(jn.range,Nn(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}));Rn.range;function Fn(e){return Nn(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}var zn=Fn(0),Hn=Fn(1),qn=Fn(2),Yn=Fn(3),Un=Fn(4),Wn=Fn(5),Vn=Fn(6),Gn=(zn.range,Hn.range,qn.range,Yn.range,Un.range,Wn.range,Vn.range,Nn(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5},function(t){return t.getDate()-1})),Xn=Gn,Jn=(Gn.range,Nn(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()})),Zn=(Jn.range,Nn(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getMinutes()})),Kn=(Zn.range,Nn(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()})),Qn=(Kn.range,Nn(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t}));Qn.every=function(i){return i=Math.floor(i),isFinite(i)&&0<i?1<i?Nn(function(t){t.setTime(Math.floor(t/i)*i)},function(t,e){t.setTime(+t+e*i)},function(t,e){return(e-t)/i}):Qn:null};Qn.range;function $n(e){return Nn(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var to=$n(0),eo=$n(1),io=$n(2),no=$n(3),oo=$n(4),ro=$n(5),so=$n(6),ao=(to.range,eo.range,io.range,no.range,oo.range,ro.range,so.range,Nn(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1})),lo=ao,ho=(ao.range,Nn(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));ho.every=function(i){return isFinite(i=Math.floor(i))&&0<i?Nn(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/i)*i),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*i)}):null};var uo=ho;ho.range;function co(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function fo(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function po(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}function mo(t){var n=t.dateTime,o=t.date,r=t.time,e=t.periods,i=t.days,s=t.shortDays,a=t.months,l=t.shortMonths,d=ko(e),h=So(e),u=ko(i),c=So(i),f=ko(s),p=So(s),m=ko(a),v=So(a),g=ko(l),y=So(l),b={a:function(t){return s[t.getDay()]},A:function(t){return i[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Wo,e:Wo,f:Zo,H:Vo,I:Go,j:Xo,L:Jo,m:Ko,M:Qo,p:function(t){return e[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Tr,s:Dr,S:$o,u:tr,U:er,V:ir,w:nr,W:or,x:null,X:null,y:rr,Y:sr,Z:ar,"%":Er},w={a:function(t){return s[t.getUTCDay()]},A:function(t){return i[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:lr,e:lr,f:fr,H:dr,I:hr,j:ur,L:cr,m:pr,M:mr,p:function(t){return e[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Tr,s:Dr,S:vr,u:gr,U:yr,V:br,w:wr,W:_r,x:null,X:null,y:xr,Y:kr,Z:Sr,"%":Er},_={a:function(t,e,i){var n=f.exec(e.slice(i));return n?(t.w=p[n[0].toLowerCase()],i+n[0].length):-1},A:function(t,e,i){var n=u.exec(e.slice(i));return n?(t.w=c[n[0].toLowerCase()],i+n[0].length):-1},b:function(t,e,i){var n=g.exec(e.slice(i));return n?(t.m=y[n[0].toLowerCase()],i+n[0].length):-1},B:function(t,e,i){var n=m.exec(e.slice(i));return n?(t.m=v[n[0].toLowerCase()],i+n[0].length):-1},c:function(t,e,i){return S(t,n,e,i)},d:No,e:No,f:Ho,H:Bo,I:Bo,j:jo,L:zo,m:Po,M:Ro,p:function(t,e,i){var n=d.exec(e.slice(i));return n?(t.p=h[n[0].toLowerCase()],i+n[0].length):-1},q:Ao,Q:Yo,s:Uo,S:Fo,u:To,U:Do,V:Co,w:Eo,W:Mo,x:function(t,e,i){return S(t,o,e,i)},X:function(t,e,i){return S(t,r,e,i)},y:Lo,Y:Oo,Z:Io,"%":qo};function x(l,d){return function(t){var e,i,n,o=[],r=-1,s=0,a=l.length;for(t instanceof Date||(t=new Date(+t));++r<a;)37===l.charCodeAt(r)&&(o.push(l.slice(s,r)),null!=(i=go[e=l.charAt(++r)])?e=l.charAt(++r):i="e"===e?" ":"0",(n=d[e])&&(e=n(t,i)),o.push(e),s=r+1);return o.push(l.slice(s,r)),o.join("")}}function k(o,r){return function(t){var e,i,n=po(1900,void 0,1);if(S(n,o,t+="",0)!=t.length)return null;if("Q"in n)return new Date(n.Q);if("s"in n)return new Date(1e3*n.s+("L"in n?n.L:0));if(!r||"Z"in n||(n.Z=0),"p"in n&&(n.H=n.H%12+12*n.p),void 0===n.m&&(n.m="q"in n?n.q:0),"V"in n){if(n.V<1||53<n.V)return null;"w"in n||(n.w=1),"Z"in n?(e=4<(i=(e=fo(po(n.y,0,1))).getUTCDay())||0===i?eo.ceil(e):eo(e),e=lo.offset(e,7*(n.V-1)),n.y=e.getUTCFullYear(),n.m=e.getUTCMonth(),n.d=e.getUTCDate()+(n.w+6)%7):(e=4<(i=(e=co(po(n.y,0,1))).getDay())||0===i?Hn.ceil(e):Hn(e),e=Xn.offset(e,7*(n.V-1)),n.y=e.getFullYear(),n.m=e.getMonth(),n.d=e.getDate()+(n.w+6)%7)}else("W"in n||"U"in n)&&("w"in n||(n.w="u"in n?n.u%7:"W"in n?1:0),i="Z"in n?fo(po(n.y,0,1)).getUTCDay():co(po(n.y,0,1)).getDay(),n.m=0,n.d="W"in n?(n.w+6)%7+7*n.W-(i+5)%7:n.w+7*n.U-(i+6)%7);return"Z"in n?(n.H+=n.Z/100|0,n.M+=n.Z%100,fo(n)):co(n)}}function S(t,e,i,n){for(var o,r,s=0,a=e.length,l=i.length;s<a;){if(l<=n)return-1;if(37===(o=e.charCodeAt(s++))){if(o=e.charAt(s++),!(r=_[o in go?e.charAt(s++):o])||(n=r(t,i,n))<0)return-1}else if(o!=i.charCodeAt(n++))return-1}return n}return b.x=x(o,b),b.X=x(r,b),b.c=x(n,b),w.x=x(o,w),w.X=x(r,w),w.c=x(n,w),{format:function(t){var e=x(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}var vo,go={"-":"",_:" ",0:"0"},yo=/^\s*\d+/,bo=/^%/,wo=/[\\^$*+?|[\]().{}]/g;function _o(t,e,i){var n=t<0?"-":"",o=(n?-t:t)+"",r=o.length;return n+(r<i?new Array(i-r+1).join(e)+o:o)}function xo(t){return t.replace(wo,"\\$&")}function ko(t){return new RegExp("^(?:"+t.map(xo).join("|")+")","i")}function So(t){for(var e={},i=-1,n=t.length;++i<n;)e[t[i].toLowerCase()]=i;return e}function Eo(t,e,i){var n=yo.exec(e.slice(i,i+1));return n?(t.w=+n[0],i+n[0].length):-1}function To(t,e,i){var n=yo.exec(e.slice(i,i+1));return n?(t.u=+n[0],i+n[0].length):-1}function Do(t,e,i){var n=yo.exec(e.slice(i,i+2));return n?(t.U=+n[0],i+n[0].length):-1}function Co(t,e,i){var n=yo.exec(e.slice(i,i+2));return n?(t.V=+n[0],i+n[0].length):-1}function Mo(t,e,i){var n=yo.exec(e.slice(i,i+2));return n?(t.W=+n[0],i+n[0].length):-1}function Oo(t,e,i){var n=yo.exec(e.slice(i,i+4));return n?(t.y=+n[0],i+n[0].length):-1}function Lo(t,e,i){var n=yo.exec(e.slice(i,i+2));return n?(t.y=+n[0]+(68<+n[0]?1900:2e3),i+n[0].length):-1}function Io(t,e,i){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),i+n[0].length):-1}function Ao(t,e,i){var n=yo.exec(e.slice(i,i+1));return n?(t.q=3*n[0]-3,i+n[0].length):-1}function Po(t,e,i){var n=yo.exec(e.slice(i,i+2));return n?(t.m=n[0]-1,i+n[0].length):-1}function No(t,e,i){var n=yo.exec(e.slice(i,i+2));return n?(t.d=+n[0],i+n[0].length):-1}function jo(t,e,i){var n=yo.exec(e.slice(i,i+3));return n?(t.m=0,t.d=+n[0],i+n[0].length):-1}function Bo(t,e,i){var n=yo.exec(e.slice(i,i+2));return n?(t.H=+n[0],i+n[0].length):-1}function Ro(t,e,i){var n=yo.exec(e.slice(i,i+2));return n?(t.M=+n[0],i+n[0].length):-1}function Fo(t,e,i){var n=yo.exec(e.slice(i,i+2));return n?(t.S=+n[0],i+n[0].length):-1}function zo(t,e,i){var n=yo.exec(e.slice(i,i+3));return n?(t.L=+n[0],i+n[0].length):-1}function Ho(t,e,i){var n=yo.exec(e.slice(i,i+6));return n?(t.L=Math.floor(n[0]/1e3),i+n[0].length):-1}function qo(t,e,i){var n=bo.exec(e.slice(i,i+1));return n?i+n[0].length:-1}function Yo(t,e,i){var n=yo.exec(e.slice(i));return n?(t.Q=+n[0],i+n[0].length):-1}function Uo(t,e,i){var n=yo.exec(e.slice(i));return n?(t.s=+n[0],i+n[0].length):-1}function Wo(t,e){return _o(t.getDate(),e,2)}function Vo(t,e){return _o(t.getHours(),e,2)}function Go(t,e){return _o(t.getHours()%12||12,e,2)}function Xo(t,e){return _o(1+Xn.count(Bn(t),t),e,3)}function Jo(t,e){return _o(t.getMilliseconds(),e,3)}function Zo(t,e){return Jo(t,e)+"000"}function Ko(t,e){return _o(t.getMonth()+1,e,2)}function Qo(t,e){return _o(t.getMinutes(),e,2)}function $o(t,e){return _o(t.getSeconds(),e,2)}function tr(t){var e=t.getDay();return 0===e?7:e}function er(t,e){return _o(zn.count(Bn(t)-1,t),e,2)}function ir(t,e){var i=t.getDay();return t=4<=i||0===i?Un(t):Un.ceil(t),_o(Un.count(Bn(t),t)+(4===Bn(t).getDay()),e,2)}function nr(t){return t.getDay()}function or(t,e){return _o(Hn.count(Bn(t)-1,t),e,2)}function rr(t,e){return _o(t.getFullYear()%100,e,2)}function sr(t,e){return _o(t.getFullYear()%1e4,e,4)}function ar(t){var e=t.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+_o(e/60|0,"0",2)+_o(e%60,"0",2)}function lr(t,e){return _o(t.getUTCDate(),e,2)}function dr(t,e){return _o(t.getUTCHours(),e,2)}function hr(t,e){return _o(t.getUTCHours()%12||12,e,2)}function ur(t,e){return _o(1+lo.count(uo(t),t),e,3)}function cr(t,e){return _o(t.getUTCMilliseconds(),e,3)}function fr(t,e){return cr(t,e)+"000"}function pr(t,e){return _o(t.getUTCMonth()+1,e,2)}function mr(t,e){return _o(t.getUTCMinutes(),e,2)}function vr(t,e){return _o(t.getUTCSeconds(),e,2)}function gr(t){var e=t.getUTCDay();return 0===e?7:e}function yr(t,e){return _o(to.count(uo(t)-1,t),e,2)}function br(t,e){var i=t.getUTCDay();return t=4<=i||0===i?oo(t):oo.ceil(t),_o(oo.count(uo(t),t)+(4===uo(t).getUTCDay()),e,2)}function wr(t){return t.getUTCDay()}function _r(t,e){return _o(eo.count(uo(t)-1,t),e,2)}function xr(t,e){return _o(t.getUTCFullYear()%100,e,2)}function kr(t,e){return _o(t.getUTCFullYear()%1e4,e,4)}function Sr(){return"+0000"}function Er(){return"%"}function Tr(t){return+t}function Dr(t){return Math.floor(t/1e3)}vo=mo({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),vo.format,vo.parse,vo.utcFormat,vo.utcParse;var Cr=Nn(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Mr=(Cr.range,Nn(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()})),Or=(Mr.range,Nn(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getUTCMinutes()}));Or.range;function Lr(){this._=null}function Ir(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ar(t,e){var i=e,n=e.R,o=i.U;o?o.L===i?o.L=n:o.R=n:t._=n,n.U=o,i.U=n,i.R=n.L,i.R&&(i.R.U=i),n.L=i}function Pr(t,e){var i=e,n=e.L,o=i.U;o?o.L===i?o.L=n:o.R=n:t._=n,n.U=o,i.U=n,i.L=n.R,i.L&&(i.L.U=i),n.R=i}function Nr(t){for(;t.L;)t=t.L;return t}Lr.prototype={constructor:Lr,insert:function(t,e){var i,n,o;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;i=t}else i=this._?(t=Nr(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=i,e.C=!0,t=e;i&&i.C;)i===(n=i.U).L?(o=n.R)&&o.C?(i.C=o.C=!1,n.C=!0,t=n):(t===i.R&&(Ar(this,i),i=(t=i).U),i.C=!1,n.C=!0,Pr(this,n)):(o=n.L)&&o.C?(i.C=o.C=!1,n.C=!0,t=n):(t===i.L&&(Pr(this,i),i=(t=i).U),i.C=!1,n.C=!0,Ar(this,n)),i=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,i,n,o=t.U,r=t.L,s=t.R;if(i=r?s?Nr(s):r:s,o?o.L===t?o.L=i:o.R=i:this._=i,r&&s?(n=i.C,i.C=t.C,((i.L=r).U=i)!==s?(o=i.U,i.U=t.U,t=i.R,o.L=t,(i.R=s).U=i):(i.U=o,t=(o=i).R)):(n=t.C,t=i),t&&(t.U=o),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===o.L){if((e=o.R).C&&(e.C=!1,o.C=!0,Ar(this,o),e=o.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Pr(this,e),e=o.R),e.C=o.C,o.C=e.R.C=!1,Ar(this,o),t=this._;break}}else if((e=o.L).C&&(e.C=!1,o.C=!0,Pr(this,o),e=o.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ar(this,e),e=o.L),e.C=o.C,o.C=e.L.C=!1,Pr(this,o),t=this._;break}e.C=!0,o=(t=o).U}while(!t.C);t&&(t.C=!1)}}};var jr=Lr;function Br(t,e,i,n){var o=[null,null],r=rs.push(o)-1;return o.left=t,o.right=e,i&&Fr(o,t,e,i),n&&Fr(o,e,t,n),ns[t.index].halfedges.push(r),ns[e.index].halfedges.push(r),o}function Rr(t,e,i){var n=[e,i];return n.left=t,n}function Fr(t,e,i,n){t[0]||t[1]?t.left===i?t[1]=n:t[0]=n:(t[0]=n,t.left=e,t.right=i)}function zr(t,e,i,n,o){var r,s=t[0],a=t[1],l=s[0],d=s[1],h=0,u=1,c=a[0]-l,f=a[1]-d;if(r=e-l,c||!(0<r)){if(r/=c,c<0){if(r<h)return;r<u&&(u=r)}else if(0<c){if(u<r)return;h<r&&(h=r)}if(r=n-l,c||!(r<0)){if(r/=c,c<0){if(u<r)return;h<r&&(h=r)}else if(0<c){if(r<h)return;r<u&&(u=r)}if(r=i-d,f||!(0<r)){if(r/=f,f<0){if(r<h)return;r<u&&(u=r)}else if(0<f){if(u<r)return;h<r&&(h=r)}if(r=o-d,f||!(r<0)){if(r/=f,f<0){if(u<r)return;h<r&&(h=r)}else if(0<f){if(r<h)return;r<u&&(u=r)}return(0<h||u<1)&&(0<h&&(t[0]=[l+h*c,d+h*f]),u<1&&(t[1]=[l+u*c,d+u*f])),!0}}}}}function Hr(t,e,i,n,o){var r=t[1];if(r)return!0;var s,a,l=t[0],d=t.left,h=t.right,u=d[0],c=d[1],f=h[0],p=h[1],m=(u+f)/2,v=(c+p)/2;if(p===c){if(m<e||n<=m)return;if(f<u){if(l){if(l[1]>=o)return}else l=[m,i];r=[m,o]}else{if(l){if(l[1]<i)return}else l=[m,o];r=[m,i]}}else if(a=v-(s=(u-f)/(p-c))*m,s<-1||1<s)if(f<u){if(l){if(l[1]>=o)return}else l=[(i-a)/s,i];r=[(o-a)/s,o]}else{if(l){if(l[1]<i)return}else l=[(o-a)/s,o];r=[(i-a)/s,i]}else if(c<p){if(l){if(l[0]>=n)return}else l=[e,s*e+a];r=[n,s*n+a]}else{if(l){if(l[0]<e)return}else l=[n,s*n+a];r=[e,s*e+a]}return t[0]=l,t[1]=r,!0}function qr(t,e){return e[+(e.left!==t.site)]}var Yr,Ur=[];function Wr(){Ir(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vr(t){var e=t.P,i=t.N;if(e&&i){var n=e.site,o=t.site,r=i.site;if(n!==r){var s=o[0],a=o[1],l=n[0]-s,d=n[1]-a,h=r[0]-s,u=r[1]-a,c=2*(l*u-d*h);if(!(-as<=c)){var f=l*l+d*d,p=h*h+u*u,m=(u*f-d*p)/c,v=(l*p-h*f)/c,g=Ur.pop()||new Wr;g.arc=t,g.site=o,g.x=m+s,g.y=(g.cy=v+a)+Math.sqrt(m*m+v*v),t.circle=g;for(var y=null,b=os._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}os.insert(y,g),y||(Yr=g)}}}}function Gr(t){var e=t.circle;e&&(e.P||(Yr=e.N),os.remove(e),Ur.push(e),Ir(e),t.circle=null)}var Xr=[];function Jr(){Ir(this),this.edge=this.site=this.circle=null}function Zr(t){var e=Xr.pop()||new Jr;return e.site=t,e}function Kr(t){Gr(t),is.remove(t),Xr.push(t),Ir(t)}function Qr(t){var e=t.circle,i=e.x,n=e.cy,o=[i,n],r=t.P,s=t.N,a=[t];Kr(t);for(var l=r;l.circle&&Math.abs(i-l.circle.x)<ss&&Math.abs(n-l.circle.cy)<ss;)r=l.P,a.unshift(l),Kr(l),l=r;a.unshift(l),Gr(l);for(var d=s;d.circle&&Math.abs(i-d.circle.x)<ss&&Math.abs(n-d.circle.cy)<ss;)s=d.N,a.push(d),Kr(d),d=s;a.push(d),Gr(d);var h,u=a.length;for(h=1;h<u;++h)d=a[h],l=a[h-1],Fr(d.edge,l.site,d.site,o);l=a[0],(d=a[u-1]).edge=Br(l.site,d.site,null,o),Vr(l),Vr(d)}function $r(t){for(var e,i,n,o,r=t[0],s=t[1],a=is._;a;)if(n=ts(a,s)-r,ss<n)a=a.L;else{if(o=r-es(a,s),!(ss<o)){-ss<n?(e=a.P,i=a):-ss<o?i=(e=a).N:e=i=a;break}if(!a.R){e=a;break}a=a.R}!function(t){ns[t.index]={site:t,halfedges:[]}}(t);var l=Zr(t);if(is.insert(e,l),e||i){if(e===i)return Gr(e),i=Zr(e.site),is.insert(l,i),l.edge=i.edge=Br(e.site,l.site),Vr(e),void Vr(i);if(i){Gr(e),Gr(i);var d=e.site,h=d[0],u=d[1],c=t[0]-h,f=t[1]-u,p=i.site,m=p[0]-h,v=p[1]-u,g=2*(c*v-f*m),y=c*c+f*f,b=m*m+v*v,w=[(v*y-f*b)/g+h,(c*b-m*y)/g+u];Fr(i.edge,d,p,w),l.edge=Br(d,t,null,w),i.edge=Br(t,p,null,w),Vr(e),Vr(i)}else l.edge=Br(e.site,l.site)}}function ts(t,e){var i=t.site,n=i[0],o=i[1],r=o-e;if(!r)return n;var s=t.P;if(!s)return-1/0;var a=(i=s.site)[0],l=i[1],d=l-e;if(!d)return a;var h=a-n,u=1/r-1/d,c=h/d;return u?(-c+Math.sqrt(c*c-2*u*(h*h/(-2*d)-l+d/2+o-r/2)))/u+n:(n+a)/2}function es(t,e){var i=t.N;if(i)return ts(i,e);var n=t.site;return n[1]===e?n[0]:1/0}var is,ns,os,rs,ss=1e-6,as=1e-12;function ls(t,e){return e[1]-t[1]||e[0]-t[0]}function ds(t,e){var i,n,o,r=t.sort(ls).pop();for(rs=[],ns=new Array(t.length),is=new jr,os=new jr;;)if(o=Yr,r&&(!o||r[1]<o.y||r[1]===o.y&&r[0]<o.x))r[0]===i&&r[1]===n||($r(r),i=r[0],n=r[1]),r=t.pop();else{if(!o)break;Qr(o.arc)}if(!function(){for(var t,e,i,n,o=0,r=ns.length;o<r;++o)if((t=ns[o])&&(n=(e=t.halfedges).length)){var s=new Array(n),a=new Array(n);for(i=0;i<n;++i)s[i]=i,a[i]=(l=t,d=rs[e[i]],c=u=void 0,h=l.site,u=d.left,c=d.right,h===c&&(c=u,u=h),c?Math.atan2(c[1]-u[1],c[0]-u[0]):(c=h===u?(u=d[1],d[0]):(u=d[0],d[1]),Math.atan2(u[0]-c[0],c[1]-u[1])));for(s.sort(function(t,e){return a[e]-a[t]}),i=0;i<n;++i)a[i]=e[s[i]];for(i=0;i<n;++i)e[i]=a[i]}var l,d,h,u,c}(),e){var s=+e[0][0],a=+e[0][1],l=+e[1][0],d=+e[1][1];!function(t,e,i,n){for(var o,r=rs.length;r--;)Hr(o=rs[r],t,e,i,n)&&zr(o,t,e,i,n)&&(Math.abs(o[0][0]-o[1][0])>ss||Math.abs(o[0][1]-o[1][1])>ss)||delete rs[r]}(s,a,l,d),function(t,e,i,n){var o,r,s,a,l,d,h,u,c,f,p,m,v,g,y=ns.length,b=!0;for(o=0;o<y;++o)if(r=ns[o]){for(s=r.site,a=(l=r.halfedges).length;a--;)rs[l[a]]||l.splice(a,1);for(a=0,d=l.length;a<d;)v=r,p=(f=(g=rs[l[a]])[+(g.left===v.site)])[0],m=f[1],u=(h=qr(r,rs[l[++a%d]]))[0],c=h[1],(Math.abs(p-u)>ss||Math.abs(m-c)>ss)&&(l.splice(a,0,rs.push(Rr(s,f,Math.abs(p-t)<ss&&ss<n-m?[t,Math.abs(u-t)<ss?c:n]:Math.abs(m-n)<ss&&ss<i-p?[Math.abs(c-n)<ss?u:i,n]:Math.abs(p-i)<ss&&ss<m-e?[i,Math.abs(u-i)<ss?c:e]:Math.abs(m-e)<ss&&ss<p-t?[Math.abs(c-e)<ss?u:t,e]:null))-1),++d);d&&(b=!1)}if(b){var w,_,x,k=1/0;for(o=0,b=null;o<y;++o)(r=ns[o])&&(x=(w=(s=r.site)[0]-t)*w+(_=s[1]-e)*_)<k&&(k=x,b=r);if(b){var S=[t,e],E=[t,n],T=[i,n],D=[i,e];b.halfedges.push(rs.push(Rr(s=b.site,S,E))-1,rs.push(Rr(s,E,T))-1,rs.push(Rr(s,T,D))-1,rs.push(Rr(s,D,S))-1)}}for(o=0;o<y;++o)(r=ns[o])&&(r.halfedges.length||delete ns[o])}(s,a,l,d)}this.edges=rs,this.cells=ns,is=os=rs=ns=null}ds.prototype={constructor:ds,polygons:function(){var i=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(t){return qr(e,i[t])});return t.data=e.site.data,t})},triangles:function(){var c=[],f=this.edges;return this.cells.forEach(function(t,e){if(n=(i=t.halfedges).length)for(var i,n,o,r,s,a,l=t.site,d=-1,h=f[i[n-1]],u=h.left===l?h.right:h.left;++d<n;)o=u,u=(h=f[i[d]]).left===l?h.right:h.left,o&&u&&e<o.index&&e<u.index&&(s=o,a=u,((r=l)[0]-a[0])*(s[1]-r[1])-(r[0]-s[0])*(a[1]-r[1])<0)&&c.push([l.data,o.data,u.data])}),c},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(s,a,t){for(var e,l,d=this,h=d._found||0,i=d.cells.length;!(l=d.cells[h]);)if(++h>=i)return null;for(var n=s-l.site[0],o=a-l.site[1],u=n*n+o*o;l=d.cells[e=h],h=null,l.halfedges.forEach(function(t){var e=d.edges[t],i=e.left;if(i!==l.site&&i||(i=e.right)){var n=s-i[0],o=a-i[1],r=n*n+o*o;r<u&&(u=r,h=i.index)}}),null!==h;);return d._found=e,null==t||u<=t*t?l.site:null}};Math.SQRT2;function hs(t,e,i){this.k=t,this.x=e,this.y=i}hs.prototype={constructor:hs,scale:function(t){return 1===t?this:new hs(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new hs(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new hs(1,0,0);function us(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}i.d(e,"a",function(){return fs});function cs(t){return new Intl.NumberFormat("ru-RU").format(t)}var fs=function(){function w(t,n,e,o,i,r,s,a){k()(this,w),a=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?us(Object(i),!0).forEach(function(t){_()(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):us(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({accColor:"green",statHeight:250,quota:0,spaces:!0,numShow:!1},a);function l(t){return(t+="").length<2?t.length<1?"00":"0"+t:t}s=new Date(s);var d="Y"===r?"Y":7*Number(r);null==n&&(n=[]);var h=[];if("Y"!=d&&d<=28)for(var u=function(t){var e=new Date(new Date(s).setDate(s.getDate()+t));e="".concat(l(e.getDate()),".").concat(l(e.getMonth()+1),".").concat(e.getFullYear());var i=n.indexOf(n.find(function(t){return t.date==e}));h.push(n[i]||{date:e,value:null,quota:null})},c=0;c<d;c++)u(c);else{var f=new Date(i,0,1),p={date:null,value:null,quota:null};if(28<d){f=new Date(s);for(var m=function(t){var e=new Date(new Date(s).setDate(s.getDate()+t));e="".concat(l(e.getDate()),".").concat(l(e.getMonth()+1),".").concat(e.getFullYear());var i=n.find(function(t){return t.date==e});f.getDay()==o?(i&&null!=i.value&&(p.value+=Number(i.value)),i&&null!=i.quota&&(p.quota+=Number(i.quota)),p.date=e,h.push(p),p={date:null,value:null,quota:null}):(i&&null!=i.value&&(p.value+=Number(i.value)),i&&null!=i.quota&&(p.quota+=Number(i.quota))),f=new Date(f.setDate(f.getDate()+1))},v=0;v<d;v++)m(v)}else for(var g=function(){var e="".concat(l(f.getDate()),".").concat(l(f.getMonth()+1),".").concat(f.getFullYear()),t=n.find(function(t){return t.date==e});f.getDay()==o?(t&&null!=t.value&&(p.value+=Number(t.value)),t&&null!=t.quota&&(p.quota+=Number(t.quota)),p.date=e,h.push(p),p={date:null,value:null,quota:null}):(t&&null!=t.value&&(p.value+=Number(t.value)),t&&null!=t.quota&&(p.quota+=Number(t.quota))),f=new Date(f.setDate(f.getDate()+1))};f.getFullYear()==i;)g()}this.data=h;var y=0;this.dataAcc=h.map(function(t){return{date:t.date,value:null!=t.value?y+=t.value:null}});var b=0;this.dataQuota=h.map(function(t){return{date:t.date,quota:null!=t.quota?b+=t.quota:null}}),this.params=a,this.quota=a.quota,this.reverted=e,this.stat=document.getElementById(t),this.graphHeight,this.margin={top:40,right:25,bottom:50,left:30},this.graphHeight=a.statHeight-this.margin.top-this.margin.bottom,1<Math.ceil(String(Math.round(S(this.data,function(t){return Number(t.value)}))).length/3)?this.margin.left=20*Math.ceil(String(Math.round(S(this.data,function(t){return Number(t.value)}))).length/3)+10:1<String(Math.round(S(this.data,function(t){return Number(t.value)}))).length&&(this.margin.left=10*String(Math.round(S(this.data,function(t){return Number(t.value)}))).length+10),this.stat.innerHTML="",this.svg=Dt(this.stat).append("svg").attr("width",this.stat.offsetWidth-10).attr("height",this.graphHeight+this.margin.top+this.margin.bottom),this.graph=this.svg.append("g").attr("width",this.stat.offsetWidth-30).attr("height",this.graphHeight).attr("transform","translate(".concat(this.margin.left,", ").concat(this.margin.top,")")),this.x=In().range([0,this.stat.offsetWidth-this.margin.left-this.margin.right]),this.y=In().range([this.graphHeight,0]),this.xAxisGroup=this.graph.append("g").attr("class","x-axis").attr("transform","translate(0, "+this.graphHeight+")"),this.yAxisGroup=this.graph.append("g").attr("class","y-axis"),this.dottedLines=this.graph.append("g").attr("class","linesDot").style("opacity",0),this.xDottedLine=this.dottedLines.append("line").attr("stroke","#aaa").attr("stroke-width",1).attr("stroke-dasharray",4),this.yDottedLine=this.dottedLines.append("line").attr("stroke","#aaa").attr("stroke-width",1).attr("stroke-dasharray",4),this.lines=this.graph.append("g").attr("class","lines"),this.lines2=this.graph.append("g").attr("class","linesAcc"),this.lines3=this.graph.append("g").attr("class","linesQuota").attr("class","valueQuota"),this.dots=this.graph.append("g").attr("class","dots"),this.dotsAcc=this.graph.append("g").attr("class","dotsAcc"),this.dotsQuota=this.graph.append("g").attr("class","dotsQuota"),this.dottedValue=this.graph.append("g").attr("class","value"),this.dottedValue2=this.graph.append("g").attr("class","valueAcc"),this.dottedValue3=this.graph.append("g").attr("class","valueQuota")}return s()(w,[{key:"drawStat",value:function(){var n=this;if(this.data.find(function(t){return null!=t.value})){var o=this.data.map(function(t){return{date:t.date,value:null==t.value?n.params.spaces?null:0:Number(t.value)}});this.x.domain([1,o.length]),this.quota?(S(o,function(t){return Number(t.value)})>=S(this.dataQuota,function(t){return Number(t.quota)})&&S(o,function(t){return Number(t.value)})>=S(this.dataAcc,function(t){return Number(t.value)})&&this.y.domain(0==this.reverted?[b(o,function(t){return Number(t.value)}),S(o,function(t){return Number(t.value)})/100*20+S(o,function(t){return Number(t.value)})]:[S(o,function(t){return Number(t.value)})/100*20+S(o,function(t){return Number(t.value)}),b(o,function(t){return Number(t.value)})]),S(this.dataAcc,function(t){return Number(t.value)})>=S(o,function(t){return Number(t.value)})&&S(this.dataAcc,function(t){return Number(t.value)})>=S(this.dataQuota,function(t){return Number(t.quota)})&&this.y.domain([b(o,function(t){return Number(t.value)}),S(this.dataAcc,function(t){return Number(t.value)})/100*20+S(this.dataAcc,function(t){return Number(t.value)})]),S(this.dataQuota,function(t){return Number(t.quota)})>=S(o,function(t){return Number(t.value)})&&S(this.dataQuota,function(t){return Number(t.quota)})>=S(this.dataAcc,function(t){return Number(t.value)})&&this.y.domain([b(o,function(t){return Number(t.value)}),S(this.dataQuota,function(t){return Number(t.quota)})/100*20+S(this.dataQuota,function(t){return Number(t.quota)})])):this.y.domain(0==this.reverted?[b(o,function(t){return Number(t.value)}),S(o,function(t){return Number(t.value)})/100*20+S(o,function(t){return Number(t.value)})]:[S(o,function(t){return Number(t.value)})/100*20+S(o,function(t){return Number(t.value)}),b(o,function(t){return Number(t.value)})]);var t=this.lines.selectAll("line").data(o);if(t.exit().remove(),t.attr("x1",function(t,i){return o[i+1]&&o.find(function(t,e){return!(e<=i)&&null!=t.value})?null==o[i].value?n.x(0):n.x(i+1):n.x(0)}).attr("y1",function(t,i){return o[i+1]&&o.find(function(t,e){return!(e<=i)&&null!=t.value})?null==o[i].value?n.y(0):n.y(t.value):n.y(0)}).attr("x2",function(t,i){return o[i+1]&&o.find(function(t,e){return!(e<=i)&&null!=t.value})?null==o[i].value?n.x(0):null==o[i+1].value?n.x(i+1):n.x(i+2):n.x(0)}).attr("y2",function(t,i,e){return o[i+1]&&o.find(function(t,e){return!(e<=i)&&null!=t.value})?null==o[i].value?n.y(0):null==o[i+1].value?n.y(t.value):n.y(o[i+1].value):n.y(0)}),t.enter().append("line").attr("x1",function(t,i){return o[i+1]&&o.find(function(t,e){return!(e<=i)&&null!=t.value})?null==o[i].value?n.x(0):n.x(i+1):n.x(0)}).attr("y1",function(t,e){return n.y(0)}).attr("x2",function(t,i){return o[i+1]&&o.find(function(t,e){return!(e<=i)&&null!=t.value})?null==o[i].value?n.x(0):null==o[i+1].value?n.x(i+1):n.x(i+2):n.x(0)}).attr("y2",function(t,e,i){return n.y(0)}).attr("stroke",function(t,i){return 0==n.reverted?o.find(function(t,e){return!(e<=i)&&null!=t.value})&&o.find(function(t,e){return!(e<=i)&&null!=t.value}).value<t.value?"red":"#000":o.find(function(t,e){return!(e<=i)&&null!=t.value})?o.find(function(t,e){return!(e<=i)&&null!=t.value}).value<t.value?"#000":"red":"#000"}).attr("stroke-linecap","round").attr("stroke-width",function(t,i){return o[i+1]&&o.find(function(t,e){return!(e<=i)&&null!=t.value})?null==o[i].value?0:3:0}).transition().duration(500).attr("y1",function(t,i){return o[i+1]&&o.find(function(t,e){return!(e<=i)&&null!=t.value})?null==o[i].value?n.y(0):n.y(t.value):n.y(0)}).attr("y2",function(t,i,e){return o[i+1]&&o.find(function(t,e){return!(e<=i)&&null!=t.value})?null==o[i].value?n.y(0):null==o[i+1].value?n.y(t.value):n.y(o[i+1].value):n.y(0)}),this.quota){var e=this.lines2.selectAll("line").data(this.dataAcc);e.exit().remove(),e.attr("x1",function(t,i){return n.dataAcc[i+1]&&n.dataAcc.find(function(t,e){return!(e<=i)&&null!=t.value})?null==n.dataAcc[i].value?n.x(0):n.x(i+1):n.x(0)}).attr("y1",function(t,i){return n.dataAcc[i+1]&&n.dataAcc.find(function(t,e){return!(e<=i)&&null!=t.value})?null==n.dataAcc[i].value?n.y(0):n.y(t.value):n.y(0)}).attr("x2",function(t,i){return n.dataAcc[i+1]&&n.dataAcc.find(function(t,e){return!(e<=i)&&null!=t.value})?null==n.dataAcc[i].value?n.x(0):null==n.dataAcc[i+1].value?n.x(i+1):n.x(i+2):n.x(0)}).attr("y2",function(t,i,e){return n.dataAcc[i+1]&&n.dataAcc.find(function(t,e){return!(e<=i)&&null!=t.value})?null==n.dataAcc[i].value?n.y(0):null==n.dataAcc[i+1].value?n.y(t.value):n.y(n.dataAcc[i+1].value):n.y(0)}),e.enter().append("line").attr("x1",function(t,i){return n.dataAcc[i+1]&&n.dataAcc.find(function(t,e){return!(e<=i)&&null!=t.value})?null==n.dataAcc[i].value?n.x(0):n.x(i+1):n.x(0)}).attr("y1",function(t,i){return n.dataAcc[i+1]&&n.dataAcc.find(function(t,e){return!(e<=i)&&null!=t.value})?null==n.dataAcc[i].value?n.y(0):n.y(t.value):n.y(0)}).attr("x2",function(t,i){return n.dataAcc[i+1]&&n.dataAcc.find(function(t,e){return!(e<=i)&&null!=t.value})?null==n.dataAcc[i].value?n.x(0):null==n.dataAcc[i+1].value?n.x(i+1):n.x(i+2):n.x(0)}).attr("y2",function(t,i,e){return n.dataAcc[i+1]&&n.dataAcc.find(function(t,e){return!(e<=i)&&null!=t.value})?null==n.dataAcc[i].value?n.y(0):null==n.dataAcc[i+1].value?n.y(t.value):n.y(n.dataAcc[i+1].value):n.y(0)}).attr("stroke",function(t,i){return 0==n.reverted?n.dataAcc.find(function(t,e){return!(e<=i)&&null!=t.value})?n.dataAcc.find(function(t,e){return!(e<=i)&&null!=t.value}).value<t.value?"red":n.params.accColor||"green":void 0:n.dataAcc.find(function(t,e){return!(e<=i)&&null!=t.value})?n.dataAcc.find(function(t,e){return!(e<=i)&&null!=t.value}).value<t.value?n.params.accColor||"green":"red":n.params.accColor||"green"}).attr("stroke-linecap","round").attr("stroke-width",function(t,i){return n.dataAcc[i+1]&&n.dataAcc.find(function(t,e){return!(e<=i)&&null!=t.value})?null==n.dataAcc[i].value?0:3:0});var i=this.lines3.selectAll("line").data(this.dataQuota);i.exit().remove(),i.attr("x1",function(t,i){return n.dataQuota[i+1]&&n.dataQuota.find(function(t,e){return!(e<=i)&&null!=t.quota})?null==n.dataQuota[i].quota?n.x(0):x(i+1):n.x(0)}).attr("y1",function(t,i){return n.dataQuota[i+1]&&n.dataQuota.find(function(t,e){return!(e<=i)&&null!=t.quota})?null==n.dataQuota[i].quota?n.y(0):n.y(t.quota):n.y(0)}).attr("x2",function(t,i){return n.dataQuota[i+1]&&n.dataQuota.find(function(t,e){return!(e<=i)&&null!=t.quota})?null==n.dataQuota[i].quota?n.x(0):n.x(i+2+(n.dataQuota.indexOf(n.dataQuota.find(function(t,e){return!(e<=i)&&null!=t.quota}))-(i+1))):n.x(0)}).attr("y2",function(t,i,e){return n.dataQuota[i+1]&&n.dataQuota.find(function(t,e){return!(e<=i)&&null!=t.quota})?null==n.dataQuota[i].quota?n.y(0):n.y(n.dataQuota.find(function(t,e){return!(e<=i)&&null!=t.quota}).quota):n.y(0)}),i.enter().append("line").attr("x1",function(t,i){return n.dataQuota[i+1]&&n.dataQuota.find(function(t,e){return!(e<=i)&&null!=t.quota})?null==n.dataQuota[i].quota?n.x(0):n.x(i+1):n.x(0)}).attr("y1",function(t,i){return n.dataQuota[i+1]&&n.dataQuota.find(function(t,e){return!(e<=i)&&null!=t.quota})?null==n.dataQuota[i].quota?n.y(0):n.y(t.quota):n.y(0)}).attr("x2",function(t,i){return n.dataQuota[i+1]&&n.dataQuota.find(function(t,e){return!(e<=i)&&null!=t.quota})?null==n.dataQuota[i].quota?n.x(0):n.x(i+2+(n.dataQuota.indexOf(n.dataQuota.find(function(t,e){return!(e<=i)&&null!=t.quota}))-(i+1))):n.x(0)}).attr("y2",function(t,i,e){return n.dataQuota[i+1]&&n.dataQuota.find(function(t,e){return!(e<=i)&&null!=t.quota})?null==n.dataQuota[i].quota?n.y(0):n.y(n.dataQuota.find(function(t,e){return!(e<=i)&&null!=t.quota}).quota):n.y(0)}).attr("stroke",function(t,i){if(0==n.reverted)return n.dataQuota.find(function(t,e){return!(e<=i)&&null!=t.quota}),"gray"}).attr("stroke-linecap","round").attr("stroke-dasharray",11).attr("stroke-width",function(t,i){return n.dataQuota[i+1]&&n.dataQuota.find(function(t,e){return!(e<=i)&&null!=t.quota})?null==n.dataQuota[i].quota?0:2:0});var r=this.dottedValue2.selectAll("text").data(this.dataAcc);r.exit().remove(),r.attr("x",function(t,e){return n.x(e+1)}).attr("y",function(t){return n.y(t.value)}).text(function(t){return null==t.value?"":cs(Math.round(t.value))}).style("font-family","arial condensed","important");var s=r.enter().append("text");s.attr("x",function(t,e){return n.x(e+1)}).attr("y",function(t){return n.y(0)}).attr("fill","currentColor").text(function(t){return null==t.value?"":cs(Math.round(t.value))}).style("font-family","arial condensed","important").style("font-size","10px","important").transition().duration(500).attr("y",function(t){return n.y(t.value)}),this.params.numShow||s.attr("hidden","true"),this.dottedValue2.selectAll("text").attr("transform",function(t,e){return o[e+1]?"rotate(0) translate(0, -13)":"translate(-20, -15)"});var a=this.dottedValue3.selectAll("text").data(this.dataQuota);a.exit().remove(),a.attr("x",function(t,e){return n.x(e+1)}).attr("y",function(t){return n.y(t.quota)}).text(function(t){return null==t.quota?"":cs(Math.round(t.quota))}).style("font-family","arial condensed","important");var l=a.enter().append("text");l.attr("x",function(t,e){return n.x(e+1)}).attr("y",function(t){return n.y(0)}).attr("fill","currentColor").text(function(t){return null==t.quota?"":cs(Math.round(t.quota))}).style("font-family","arial condensed","important").style("font-size","10px","important").transition().duration(500).attr("y",function(t){return n.y(t.quota)}),this.params.numShow||l.attr("hidden","true"),this.dottedValue3.selectAll("text").attr("transform",function(t,e){return o[e+1]?"rotate(0) translate(0, -13)":"translate(-20, -15)"});var d=this.dotsAcc.selectAll("circle").data(this.dataAcc);d.exit().remove(),d.attr("cx",function(t,e){return n.x(e+1)}).attr("cy",function(t){return n.y(t.value)}),d.enter().append("circle").attr("r",function(t){return null==t.value?0:3}).attr("cx",function(t,e){return n.x(e+1)}).attr("cy",function(t){return n.y(t.value)}).attr("fill","#000"),this.dotsAcc.selectAll("circle").on("mouseover",function(t,e,i){n.params.numShow||n.dottedValue2.selectAll("text")._groups[0][e].removeAttribute("hidden"),n.dottedValue2.selectAll("text")._groups[0][e].style.stroke="orange",Dt(i[e]).transition().duration(100).attr("r",8).attr("fill","#000"),n.xDottedLine.attr("x1",n.x(e+1)).attr("x2",n.x(e+1)).attr("y1",n.graphHeight).attr("y2",n.y(t.value)),n.yDottedLine.attr("x1",0).attr("x2",n.x(e+1)).attr("y1",n.y(t.value)).attr("y2",n.y(t.value)),n.dottedLines.style("opacity",1)}).on("mouseleave",function(t,e,i){n.params.numShow||n.dottedValue2.selectAll("text")._groups[0][e].setAttribute("hidden","true"),n.dottedValue2.selectAll("text")._groups[0][e].style.stroke="unset",Dt(i[e]).transition().duration(100).attr("r",4).attr("fill","#000"),n.dottedLines.style("opacity",0)});var h=this.dotsQuota.selectAll("circle").data(this.dataQuota);h.exit().remove(),h.attr("cx",function(t,e){return n.x(e+1)}).attr("cy",function(t){return n.y(t.quota)}),h.enter().append("circle").attr("r",function(t){return null==t.quota?0:3}).attr("cx",function(t,e){return n.x(e+1)}).attr("cy",function(t){return n.y(t.quota)}).attr("fill","#000"),this.dotsQuota.selectAll("circle").on("mouseover",function(t,e,i){n.params.numShow||n.dottedValue3.selectAll("text")._groups[0][e].removeAttribute("hidden"),n.dottedValue2.selectAll("text")._groups[0][e].style.stroke="orange",Dt(i[e]).transition().duration(100).attr("r",8).attr("fill","#000"),n.xDottedLine.attr("x1",n.x(e+1)).attr("x2",n.x(e+1)).attr("y1",n.graphHeight).attr("y2",n.y(t.quota)),n.yDottedLine.attr("x1",0).attr("x2",n.x(e+1)).attr("y1",n.y(t.quota)).attr("y2",n.y(t.quota)),n.dottedLines.style("opacity",1)}).on("mouseleave",function(t,e,i){n.params.numShow||n.dottedValue3.selectAll("text")._groups[0][e].setAttribute("hidden","true"),n.dottedValue2.selectAll("text")._groups[0][e].style.stroke="unset",Dt(i[e]).transition().duration(100).attr("r",4).attr("fill","#000"),n.dottedLines.style("opacity",0)})}var u=this.dottedValue.selectAll("text").data(o);u.exit().remove(),u.attr("x",function(t,e){return n.x(e+1)}).attr("y",function(t){return n.y(t.value)}).text(function(t){return null==t.value?"":cs(Math.round(t.value))}).style("font-family","arial condensed","important");var c=u.enter().append("text");c.attr("x",function(t,e){return n.x(e+1)}).attr("y",function(t){return n.y(0)}).attr("fill","currentColor").text(function(t){return null==t.value?"":cs(Math.round(t.value))}).style("font-family","arial condensed","important").style("font-size","10px","important").transition().duration(500).attr("y",function(t){return n.y(t.value)}),this.params.numShow||c.attr("hidden","true"),this.dottedValue.selectAll("text").attr("transform",function(t,e){return o[e+1]?"rotate(0) translate(0, -13)":"translate(-20, -15)"});var f=this.dots.selectAll("circle").data(o);f.exit().remove(),f.attr("cx",function(t,e){return n.x(e+1)}).attr("cy",function(t){return n.y(t.value)}),f.enter().append("circle").attr("r",function(t){return null==t.value?0:3}).attr("cx",function(t,e){return n.x(e+1)}).attr("cy",function(t){return n.y(0)}).attr("fill","#000").transition().duration(500).attr("cy",function(t){return n.y(t.value)}),this.svg.on("mouseover",function(){n.svg.selectAll("circle").attr("r",function(t){return null==t.value&&null==t.quota?0:4})}).on("mouseleave",function(){n.svg.selectAll("circle").attr("r",function(t){return null==t.value&&null==t.quota?0:3})}),this.dots.selectAll("circle").on("mouseover",function(t,e,i){n.params.numShow||n.dottedValue.selectAll("text")._groups[0][e].removeAttribute("hidden"),n.dottedValue.selectAll("text")._groups[0][e].style.stroke="orange",Dt(i[e]).transition().duration(100).attr("r",8).attr("fill","#000"),n.xDottedLine.attr("x1",n.x(e+1)).attr("x2",n.x(e+1)).attr("y1",n.graphHeight).attr("y2",n.y(t.value)),n.yDottedLine.attr("x1",0).attr("x2",n.x(e+1)).attr("y1",n.y(t.value)).attr("y2",n.y(t.value)),n.dottedLines.style("opacity",1)}).on("mouseleave",function(t,e,i){n.params.numShow||n.dottedValue.selectAll("text")._groups[0][e].setAttribute("hidden","true"),n.dottedValue.selectAll("text")._groups[0][e].style.stroke="unset",Dt(i[e]).transition().duration(100).attr("r",4).attr("fill","#000"),n.dottedLines.style("opacity",0)});var p=function(t){return E(O,t)}(this.x).ticks(o.length).tickSize(10).tickFormat(function(t,e){return o.length,o[e].date.substr(0,5)}),m=function(t){return E(L,t)}(this.y).tickSize(10).ticks(4);this.xAxisGroup.call(p),this.yAxisGroup.call(m),this.yAxisGroup.call(m).selectAll("text").style("font-family","arial condensed","important"),this.xAxisGroup.selectAll("text").style("font-family","arial condensed","important").attr("transform",7<o.length?"rotate(-90) translate(-25, -17)":500<=this.stat.offsetWidth?"":"rotate(-90) translate(-25, -17)")}}}]),w}()},,function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},,,,function(t,e,G){"use strict";G.r(e),G.d(e,"KanbanScript",function(){return s});var i=G(7),n=G.n(i),o=G(8),r=G.n(o),X=G(4),J=G(5),p=G(22),Z=(G(48),G(27)),K=document.getElementById("access").value,s=function(){function t(){n()(this,t),this.init()}return r()(t,[{key:"init",value:function(i){var f=this;fetch("/office/getPipes",{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(u){var W=document.getElementById("kanbanStepsHolder"),c=document.getElementById("kanbanList");c.querySelectorAll("*").forEach(function(t){return t.remove()}),f.data=u;function V(t){return(t+="").length<2?t.length<1?"00":"0"+t:t}function t(l){var d=document.createElement("button");d.classList.add("btn"),d.classList.add("btn-sm"),i===l&&d.classList.add("btn-primary"),u.pipe.kanban[l].title.trim()?d.innerText=u.pipe.kanban[l].title:d.innerText="Без названия",d.dataset.kanbanId=l;var t=document.createElement("div");t.classList.add("input-group","m-1"),t.insertAdjacentElement("beforeend",d);var h=document.createElement("button");h.innerHTML='<img src="images/edit.svg" alt="Редактировать воронку">',h.classList.add("btn"),h.classList.add("btn-sm"),h.classList.add("d-hide"),h.classList.add("js-editKanban"),t.insertAdjacentElement("beforeend",h),d.onclick=function(t){c.querySelectorAll("button").forEach(function(t){t.disabled=!1}),d.disabled=!0,document.getElementById("kanbanStepsList").classList.remove("d-hide"),document.querySelectorAll("#kanbanList button").forEach(function(t){return t.classList.remove("btn-primary")}),d.classList.add("btn-primary");var e=t.target.dataset.kanbanId;document.getElementById("kanbanTitleHolder").innerText=u.pipe.kanban[l].title,document.querySelectorAll("#kanbanStepsHolder > *").forEach(function(t){return t.remove()}),document.getElementById("stepsHolder").innerHTML="",W.onmousedown=function(){W.classList.contains("dragscroll")?W.classList.add("grabbing"):W.classList.add("c-not-allowed")},W.onmousemove=function(t){0<t.buttons&&W.classList.contains("dragscroll")?W.classList.add("grabbing"):(W.classList.remove("grabbing"),W.classList.remove("c-not-allowed"))};function s(){var e=[];"full"==K&&document.querySelectorAll("#stepsHolder input").forEach(function(t){fetch("/office/steps/edit",{method:"POST",body:JSON.stringify({id:t.name,title:t.value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).catch(function(t){return console.error(t)}),e.push(t.name)}),"full"==K&&fetch("/office/pipes/"+location.pathname.split("/")[3],{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],title:document.getElementById("pipeTitle").value,kanban:{title:document.getElementById("kanbanTitle").innerText,description:"",steps:e},key:l,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){f.init(l)}).catch(function(t){return console.error(t)})}var n=[];u.pipe.kanban[e].steps.forEach(function(t){var i;for(var e in u.steps)+u.steps[e].id==+t&&(i=u.steps[e]);i&&(document.querySelectorAll(".js-editKanban").forEach(function(t){return t.classList.add("d-hide")}),h.classList.remove("d-hide"),"full"==K&&(h.onclick=function(t){u.pipe.kanban[l].title.trim()?a().innerText=document.getElementById("kanbanTitleChangeInput").value=u.pipe.kanban[l].title:a().innerText=document.getElementById("kanbanTitleChangeInput").value="Без названия",document.getElementById("kanbanStepsList").classList.add("active")}),n.push(fetch("/office/lids/getListByStep",{method:"POST",body:JSON.stringify({id:i.id,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){var e={};return e.stepData=i,e.lids=t,e})),document.getElementById("saveStepsBtn").onclick=s)}),Promise.all(n).then(function(t){t.forEach(function(t){var U={};U.step=document.createElement("div"),U.step.classList.add("card","step"),U.step.dataset.id=t.stepData.id,U.step.dataset.title=t.stepData.title,U.stepTitle=document.createElement("div"),U.stepTitle.classList.add("h5","text-center","bg-dark","step-title"),U.stepTitle.innerText=t.stepData.title,U.stepTitle.title=t.stepData.title,U.step.insertAdjacentElement("afterbegin",U.stepTitle),U.content=document.createElement("div"),U.content.dataset.id=t.stepData.id,U.content.classList.add("step-content");function e(c){var i=document.createElement("div");i.classList.add("card","m-2","bg-secondary","lid","animated"),i.dataset.data=JSON.stringify(c);var o=document.createElement("div");fetch("/office/contacts/",{method:"POST",body:JSON.stringify({id:c.holder,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){o.querySelector("small").innerText=t.length&&t[0].title?t[0].title:"Неизвестный"}),o.innerHTML="#"+c.id+' <small>?</small><h6 class="text-bold">'+c.title+"</h6>",o.classList.add("lid-header");var t=document.createElement("i");t.classList.add("float-right","icon","icon-menu","lid-drag"),i.insertAdjacentElement("afterbegin",t),i.insertAdjacentElement("afterbegin",o);var e=document.createElement("div");e.classList.add("lid-body","d-flex");var n=document.createElement("div");n.innerHTML='<div class="loading"></div>',fetch("/office/phones/",{method:"POST",body:JSON.stringify({parent:c.holder,find:"byparent",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){n.innerHTML="<div>".concat(t.length&&t[0].phone?"+7"+t[0].phone:"Номера телефона нет","</div>")}),e.insertAdjacentElement("beforeend",n),i.insertAdjacentElement("beforeend",e),U.content.insertAdjacentElement("beforeend",i);var r=document.createElement("div");r.classList.add("lid-footer"),r.innerHTML='<span class="label label-primary">'+Z.formatMoney(c.gi,"",0," ",",")+' р.</span><div class="float-right">'+V(new Date(c.created).getDate())+"."+V(new Date(c.created).getMonth()+1)+"."+new Date(c.created).getFullYear()+" "+V(new Date(c.created).getHours())+":"+V(new Date(c.created).getMinutes())+"</div>";var s=document.createElement("button");s.classList.add("btn","btn-link","btn-sm","btn-action","s-circle","expand","icon","icon-arrow-down","d-hide"),e.insertAdjacentElement("beforeend",s);var a=document.createElement("div");a.classList.add("lid-menu","d-hide","animated");var l=document.createElement("ul");function d(){Promise.all([fetch("/office/contacts/",{method:"POST",body:JSON.stringify({id:c.holder,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/phones/",{method:"POST",body:JSON.stringify({parent:c.holder,find:"byparent",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(t){var e=t[0][0],i=t[1][0],n=e.title?e.title:"Неизвестный";o.innerHTML="<small>"+n+'</small><h6 class="text-bold">'+c.title+"</h6>",i.innerText="+7"+i.phone,r.innerHTML='<span class="label label-primary">'+Z.formatMoney(c.gi,"",0," ",",")+' р.</span><div class="float-right">'+V(new Date(c.created).getMonth())+"."+V(new Date(c.created).getDate())+"."+new Date(c.created).getFullYear()+" "+V(new Date(c.created).getHours())+":"+V(new Date(c.created).getMinutes())+"</div>"})}function f(t){if(c.lid_data?c.lid_data.tasks=[]:c.lid_data={tasks:[]},y.querySelectorAll("dd").forEach(function(t){c.lid_data.tasks.push({title:t.querySelector('[name="title"]').innerText,done:t.querySelector("input").checked,date:t.querySelector('[name="calendar"]').dataset.date,time:t.querySelector('[name="time"]').dataset.time,author:t.querySelector("figure.avatar").dataset.userId})}),c._csrf=document.getElementById("csrfToken").value,t&&c.lid_data.history.push(t),T(),d(),"full"==K)return fetch("/office/lids/update",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}})}function h(n){var o=n.querySelector('[name="title"]'),r=o.innerText;o.onclick=function(t){var e=n.parentElement.parentElement.querySelector(".card-footer input");e.value=o.innerText,e.focus(),e.classList.remove("is-error");function i(t,e){var i={when:(new Date).toISOString(),author:null,oldTitle:r,newTitle:e.value};0<(e.value.trim()+"").length?(o.innerText=e.value,i.type="editTitleTask"):(n.remove(),i.type="removeTask"),t.target.disabled=!0,f(i).then(function(){_(e),t.target.disabled=!1,t.target.focus()}),e.value=""}e.onkeydown=function(t){"Escape"===t.key||"Enter"===t.key&&r==e.value?(e.value="",e.onblur=null,_(e)):"Enter"===t.key&&(e.onblur=null,i(t,e))},e.onblur=function(){i(t,e),e.classList.remove("is-error"),e.onblur=null}}}function u(t,r){"full"==K&&(t.onclick=function(n){var t=new dhx.Calendar(null,{weekStart:"monday",thisMonthOnly:!0,timePicker:!0}),e=new Date(new Date(20+n.target.dataset.date.split("/")[2],n.target.dataset.date.split("/")[1]-1,n.target.dataset.date.split("/")[0],r.dataset.time.split(":")[0],r.dataset.time.split(":")[1]));t.setValue(e);var o=new dhx.Popup;o.attach(t),o.hide(),document.querySelector(".dhx_widget")||(n.preventDefault(),t.events.on("change",function(t){var e=n.target.innerText;t.setDate(t.getDate()+1);var i=t.toISOString();n.target.innerText="".concat(i.slice(8,10),".").concat(i.slice(5,7)),r.innerText="".concat(i.slice(11,13),":").concat(i.slice(14,16)),n.target.dataset.date=i.slice(8,10)+"/"+i.slice(5,7)+"/"+i.slice(2,4),r.dataset.time=i.slice(11,13)+":"+i.slice(14,16),f({type:"editDateTask",when:(new Date).toISOString(),author:null,title:n.target.parentElement.querySelector('[name="title"]').innerText,oldDate:e,newDate:n.target.innerText}),o.hide()}),o.show(n.target))})}function p(t){"full"==K&&(t.onclick=function(e){var i=new dhx.Timepicker(null,{actions:!0});i.setValue(new Date(null,null,null,(new Date).getHours()+1));var n=new dhx.Popup;n.attach(i),n.hide(),document.querySelector(".dhx_widget")||(i.events.on("save",function(){var t=e.target.innerText;e.target.innerText=e.target.dataset.time=i.getValue(),f({type:"editTimeTask",when:(new Date).toISOString(),author:null,title:e.target.parentElement.querySelector('[name="title"]').innerText,oldTime:t,newTime:e.target.innerText}),n.hide()}),n.show(e.target),n.events.on("aftershow",function(){document.querySelectorAll(".dhx_timepicker__button-close").forEach(function(t){return t.addEventListener("click",function(){return n.hide()})})}))})}function m(){return"".concat(V((new Date).getDate()),"/").concat(V((new Date).getMonth()),"/").concat(((new Date).getFullYear()+"").substring(2))}function v(){return"".concat(V((new Date).getMinutes()),":").concat(V((new Date).getMinutes()))}l.classList.add("tab","tab-block"),["Карточка","Задачи","История"].forEach(function(t,e){return l.insertAdjacentHTML("beforeend",'<li class="tab-item"><a name="'+ ++e+'">'+t+"</a></li>")}),l.querySelectorAll("a").forEach(function(e){return e.onclick=function(){l.querySelectorAll("li").forEach(function(t){return t.classList.remove("active")}),e.parentElement.classList.add("active"),i.querySelectorAll(".menu-tab").forEach(function(t){return t.name!=e.name?t.classList.add("d-hide"):t.classList.remove("d-hide")})}}),l.querySelector("li:nth-child(2)").classList.add("active"),a.insertAdjacentElement("beforeend",l);var g=document.createElement("div");g.classList.add("tasks","menu-tab"),g.name=2;var y=document.createElement("dl");function b(r){"full"==K&&(r.querySelector("figure.avatar").onclick=function(t){document.getElementById("usersListModal").classList.add("active");var n=document.getElementById("usersList"),o=document.getElementById("confirmUserSelect"),e=document.getElementById("rejectUserSelect");o.disabled=!0,n.innerHTML="",n.insertAdjacentHTML("beforeend",'<div class="loading"></div>'),fetch("/office/users",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){n.innerHTML="",t.forEach(function(t){n.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile p-2 c-hand user" data-user-id="'.concat(t.id,'" data-fio="').concat(t.fio,'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar avatar-sm" data-initial="').concat(t.fio.trim()?t.fio.slice(0,1):"?",'"></figure>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-content">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-title">').concat(t.fio?t.fio:t.login,"</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t")),n.querySelectorAll(".user").forEach(function(e){e.onclick=function(t){n.querySelectorAll(".user").forEach(function(t){return t.classList.remove("active")}),e.classList.add("active"),o.disabled=!1}})}),o.onclick=function(t){var e=r.querySelector("figure.avatar"),i=n.querySelector(".user.active");e.dataset.userId=i.dataset.userId,e.dataset.initial=i.dataset.fio.trim()?i.dataset.fio.split(" ")[1]?i.dataset.fio.split(" ")[0].slice(0,1)+i.dataset.fio.split(" ")[1].slice(0,1):i.dataset.fio.slice(0,1):"?",e.title=i.dataset.fio,f(),document.getElementById("usersListModal").classList.remove("active"),n.innerHTML="",o.disabled=!0},e.onclick=function(t){document.getElementById("usersListModal").classList.remove("active"),n.innerHTML="",o.disabled=!0}})})}y.dataset.lid=c.id,"full"==K&&new X.a(y,{animation:150,handle:".taskDragger",onEnd:function(){f()}}),c.lid_data&&c.lid_data.tasks&&c.lid_data.tasks.forEach(function(i){var n=document.createElement("dd");i.date?i.date=i.date:i.date=m(),i.time?i.time=i.time:i.time=v();var t="".concat(V(i.date.slice(0,2)),".").concat(V(i.date.slice(3,5)));n.innerHTML='<div class="taskDraggerHolder"><i class="icon icon-menu taskDragger"></i></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="form-checkbox">\n\t\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox" '.concat(i.done?"checked":"",'>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="form-icon"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t<div name="titleHolder">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div name="calendar" data-date="').concat(i.date,'" data-lid="').concat(c.id,'" title="Изменить дату">').concat(t,'</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div name="time" data-time="').concat(i.time,'" title="Изменить время">').concat(i.time,'</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div name="title" title="Изменить название">').concat(i.title,'</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar avatar-sm" data-initial="?"></figure>\n\t\t\t\t\t\t\t\t\t\t\t</div>'),i.author&&fetch("/office/users",{method:"POST",body:JSON.stringify({id:i.author,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){t[0]&&(n.querySelector("figure.avatar").dataset.initial=t[0].fio.slice(0,1),t[0].fio.split(" ")[1]&&(n.querySelector("figure.avatar").dataset.initial+=t[0].fio.split(" ")[1].slice(0,1)),n.querySelector("figure.avatar").dataset.initial.trim()||(n.querySelector("figure.avatar").dataset.initial="?"),n.querySelector("figure.avatar").title=t[0].fio?t[0].fio:t[0].login)}),h(n),u(n.querySelector('[name="calendar"]'),n.querySelector('[name="time"]'),c.id),p(n.querySelector('[name="time"]'),c.id),b(n),"full"==K&&(n.querySelector("i.form-icon").onclick=function(t){var e=n.querySelector("input");e.checked?(e.checked=!1,f({type:"declineTask",when:(new Date).toISOString(),author:null,title:i.title})):(e.checked=!0,f({type:"compleateTask",when:(new Date).toISOString(),author:null,title:i.title}))}),y.insertAdjacentElement("beforeend",n)}),g.insertAdjacentElement("beforeend",y);var w=document.createElement("input");w.type="text",w.classList.add("form-input","input-sm");var _=function(n){n.onkeydown=function(t){if((n.value.trim()+"").length<=0?n.classList.add("is-error"):n.classList.remove("is-error"),"Enter"===t.code&&0<(n.value.trim()+"").length){t.target.disabled=!0;var e="".concat(m().substring(2,-9),".").concat(m().substring(5,3)),i=document.createElement("dd");i.innerHTML='<div class="taskDraggerHolder"><i class="icon icon-menu taskDragger"></i></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="form-checkbox">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="form-icon"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div name="titleHolder">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div name="calendar" data-date="'.concat(m(),'" data-lid="').concat(c.id,'" title="Изменить дату">').concat(e,'</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div name="time" data-time="').concat(v(),'" title="Изменить время">').concat(v(),'</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div name="title" title="Изменить название">').concat(n.value,'</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar avatar-sm" data-initial="?"></figure>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>'),y.insertAdjacentElement("beforeend",i),c._csrf=document.getElementById("csrfToken").value,h(i),u(i.querySelector('[name="calendar"]'),i.querySelector('[name="time"]'),c.id),p(i.querySelector('[name="time"]'),c.id),b(i),"full"==K&&(i.querySelector("i.form-icon").onclick=function(t){var e=i.querySelector("input");e.checked?(e.checked=!1,f({type:"declineTask",when:new Date,author:null,title:t.target.parentElement.querySelector('[name="titleHolder"] [name="title"]').innerText})):(e.checked=!0,f({type:"compleateTask",when:new Date,author:null,title:t.target.parentElement.querySelector('[name="titleHolder"] [name="title"]').innerText}))}),f({type:"newTask",when:(new Date).toISOString(),author:null,title:n.value}).then(function(){t.target.value="",t.target.disabled=!1,t.target.focus()})}}};_(w),y.querySelectorAll(".taskDragger").forEach(function(t){t.onmousedown=function(t){W.classList.remove("dragscroll"),G(3).reset()}}),y.querySelectorAll(".taskDragger").forEach(function(t){t.onmouseup=function(t){W.classList.contains("dragscroll")||(W.classList.add("dragscroll"),G(3).reset())}});var x=document.createElement("div");x.classList.add("card-footer","input-group"),x.insertAdjacentElement("beforeend",w),g.insertAdjacentElement("beforeend",x);var k=document.createElement("div");k.classList.add("story","menu-tab","d-hide"),k.name=3;var S=document.createElement("div");S.classList.add("form-group","m-0","pl-2"),S.innerHTML='\n\t\t\t\t\t\t\t\t\t<label class="form-switch">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox">\n\t\t\t\t\t\t\t\t\t\t<i class="form-icon"></i> Полная история\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t',S.querySelector("input").oninput=function(e){E.querySelectorAll(".timeline-item").forEach(function(t){return t.classList.contains("unnecessary")&&!e.target.checked?t.classList.add("d-hide"):t.classList.remove("d-hide")})};var E=document.createElement("div");E.classList.add("timeline"),c.lid_data||(c.lid_data={}),c.lid_data.history||(c.lid_data.history=[]);var T=function(){E.innerHTML="",Array.from(c.lid_data.history.reverse()).forEach(function(t){var o=document.createElement("div");o.classList.add("timeline-item");var r=document.createElement("div");r.classList.add("timeline-left"),r.innerHTML='<a class="timeline-icon"></a>',o.insertAdjacentElement("afterbegin",r);function e(t,e){var i=1<arguments.length&&void 0!==e?e:[];o.classList.add("icon-lg");var n=r.querySelector("a");n.classList.add("icon-lg"),i.forEach(function(t){return n.classList.add(t)}),n.insertAdjacentElement("beforeend",t)}var i=document.createElement("div");i.classList.add("timeline-content");function n(t){var e=t.querySelector("a"),i=t.querySelector("audio");i&&(e.onclick=function(){i.classList.contains("d-hide")?(i.pause(),i.currentTime=0):i.focus(),i.classList.toggle("d-hide")},i.onblur=function(){i.pause(),i.currentTime=0,i.classList.add("d-hide")})}var s=t.when?V(new Date(t.when).getDate())+"."+V(new Date(t.when).getMonth())+" "+V(new Date(t.when).getHours())+":"+V(new Date(t.when).getMinutes()):"...",a=Math.floor(t.duration/60/60%60)?Math.floor(t.duration/60/60%60):null,l=Math.floor(t.duration/60%60),d=Math.floor(t.duration%60),h=t.duration?a?V(a)+":"+V(l)+":"+V(d):V(l)+":"+V(d):"<неизвестно>",u=document.createElement("i");switch(t.type){case"create":u.classList.add("icon","icon-plus"),e(u);var c="phonecall"==t.from?"звонок по телефону "+t.diversion:"website"==t.from?"сайт":"неизвестный источник";i.innerHTML='<span name="time">'.concat(s,"</span> Заявка принта через ").concat(c," ").concat(t.author?"пользователем <b>"+t.author+"</b>":""),o.classList.add("unnecessary","d-hide");break;case"progress":u.classList.add("icon","icon-share"),e(u),i.innerHTML='<span name="time">'.concat(s,"</span> Лид был перемещён с шага «").concat(t.oldStep,"» на «").concat(t.newStep,"»"),o.classList.add("unnecessary","d-hide");break;case"callIn":u.classList.add("icon","icon-download"),e(u,["bg-success"]),i.innerHTML='<span name="time">'.concat(s,'</span> <a>Входящий вызов <i class="icon icon-arrow-up"></i></a> ').concat("Success"!=t.status?"был пропущен":"был принят"," пользователем <b>").concat(t.author,"</b> ").concat(h?"продолжительностью <b>"+h+"</b>":""," ").concat(t.link?'<audio src="'.concat(t.link,'" controls class="d-hide"></audio>'):""),n(i);break;case"callOut":u.classList.add("icon","icon-upload"),e(u),i.innerHTML='<span name="time">'.concat(s,'</span> <a>Исходящий вызов <i class="icon icon-arrow-up"></i></a> ').concat("Success"!=t.status?"был пропущен":"был принят"," пользователем <b>").concat(t.author,"</b> ").concat(h?"продолжительностью <b>"+h+"</b>":""," ").concat(t.link?'<audio src="'.concat(t.link,'" controls class="d-hide"></audio>'):""),n(i);break;case"callMissed":u.classList.add("icon","icon-more-horiz"),e(u,["bg-error"]),i.innerHTML='<span name="time">'.concat(s,'</span> <a>Вызов <i class="icon icon-arrow-up"></i></a> ').concat("Success"!=t.status?"был пропущен":"был принят"," пользователем <b>").concat(t.author,"</b> ").concat(h?"продолжительностью <b>"+h+"</b>":""," ").concat(t.link?'<audio src="'.concat(t.link,'" controls class="d-hide"></audio>'):""),n(i);break;case"newTask":i.innerHTML='<span name="time">'.concat(s,"</span> Создана новая задача «").concat(t.title,"»"),o.classList.add("unnecessary","d-hide");break;case"editTitleTask":u.classList.add("icon","icon-edit"),e(u,["bg-warning"]),i.innerHTML='<span name="time">'.concat(s,"</span> Задача «").concat(t.oldTitle,"» теперь называется «").concat(t.newTitle,"»"),o.classList.add("unnecessary","d-hide");break;case"editDateTask":i.innerHTML='<span name="time">'.concat(s,"</span> Дата выполнения задачи «").concat(t.title,"» перенесена с ").concat(t.oldDate," на ").concat(t.newDate),o.classList.add("unnecessary","d-hide");break;case"editTimeTask":i.innerHTML='<span name="time">'.concat(s,"</span> Время выполнения «").concat(t.title,"» задачи перенесено с ").concat(t.oldTime," на ").concat(t.newTime),o.classList.add("unnecessary","d-hide");break;case"compleateTask":u.classList.add("icon","icon-check"),e(u,["bg-success"]),i.innerHTML='<span name="time">'.concat(s,"</span> Задача «").concat(t.title,"» выполнена"),o.classList.add("unnecessary","d-hide");break;case"declineTask":u.classList.add("icon","icon-cross"),e(u,["bg-error"]),i.innerHTML='<span name="time">'.concat(s,"</span> Выполнение задачи «").concat(t.title,"» было отменено"),o.classList.add("unnecessary","d-hide");break;case"removeTask":u.classList.add("icon","icon-delete"),e(u),i.innerHTML='<span name="time">'.concat(s,"</span> Задача «").concat(t.oldTitle,"» удалена"),o.classList.add("unnecessary","d-hide");break;case"newData":u.classList.add("icon","icon-edit"),e(u,["bg-success"]),i.innerHTML='<span name="time">'.concat(s,"</span>Добавлено значение «").concat(t.title,"»: ").concat(t.value),o.classList.add("unnecessary","d-hide");break;case"editData":u.classList.add("icon","icon-edit"),e(u,["bg-warning"]),i.innerHTML='<span name="time">'.concat(s,"</span> Значение «").concat(t.title,"» изменено на ").concat(t.newValue,", было ").concat(t.oldValue),o.classList.add("unnecessary","d-hide");break;case"removeData":u.classList.add("icon","icon-edit"),e(u,["bg-error"]),i.innerHTML='<span name="time">'.concat(s,"</span> Значение «").concat(t.title,"» было отчищено"),o.classList.add("unnecessary","d-hide");break;case"editComment":u.classList.add("icon","icon-edit"),e(u,["bg-warning"]),i.innerHTML='<span name="time">'.concat(s,"</span> Внесенны изменения в коментарий"),o.classList.add("unnecessary","d-hide")}o.insertAdjacentElement("beforeend",i),E.insertAdjacentElement("beforeend",o)}),c.lid_data.history.reverse()};T(),i.ondragend=function(){return T()},k.insertAdjacentElement("beforeend",S),k.insertAdjacentElement("beforeend",E);var D=document.createElement("dl");function C(t){var e=document.createElement("div");e.classList.add("divider","text-center"),e.dataset.content=t+"",D.insertAdjacentElement("beforeend",e)}D.classList.add("about","menu-tab","d-hide"),D.name=1,[{title:"Название",value:c.title,key:"title",type:"text",max:120},{title:"Вал",value:c.gi,key:"gi",type:"money"},{title:"Маржа",value:c.cgi,key:"cgi",type:"money"},{title:"Предоплата",value:c.prepayment,key:"prepayment",type:"money"},{title:"Доплата",value:c.restpayment,key:"restpayment",type:"money"}].forEach(function(t){var e=document.createElement("dd");e.classList.add("d-flex");var i=document.createElement("div");i.innerText=t.title,i.classList.add("title"),e.insertAdjacentElement("beforeend",i);var o=document.createElement("input");o.value=t.value,o.dataset.old=t.value,o.dataset.key=t.key;var r="money"==t.type?new J.a(o,{numeral:!0,delimiter:" "}):null;"money"!=t.type&&(o.value=t.value);function n(){o.disabled=!0;var t=r?r.getRawValue():o.value;c[o.dataset.key]=t+"";var e={type:"newData",when:(new Date).toISOString(),author:null,title:o.parentElement.querySelector(".title").innerText,value:t},i={type:"editData",when:(new Date).toISOString(),author:null,title:o.parentElement.querySelector(".title").innerText,oldValue:o.dataset.old,newValue:t},n={type:"removeData",when:(new Date).toISOString(),author:null,title:o.parentElement.querySelector(".title").innerText};o.dataset.old!=t&&(0==o.dataset.old.length?f(e).then(function(){return o.dataset.old=t}):0!=t.trim().length?f(i).then(function(){return o.dataset.old=t}):f(n).then(function(){return o.dataset.old=t})),o.dataset.old=t,D.querySelectorAll("dd input").forEach(function(t){return t.disabled=!1})}o.onkeyup=function(t){"Enter"==t.code&&n()},o.onblur=n,o.placeholder="...",e.insertAdjacentElement("beforeend",o),D.insertAdjacentElement("beforeend",e)}),C("Коментарий");var M=document.createElement("textarea");M.value=M.dataset.old=c.lid_data.commnet?c.lid_data.commnet:"";var O=document.createElement("button");O.classList.add("btn","btn-sm"),O.disabled=!0,O.innerText="Сохранить","full"==K&&(O.onclick=function(t){M.value!=M.dataset.old&&(O.disabled=!0,c.lid_data.commnet=M.value,f({type:"editComment",when:(new Date).toISOString(),author:null}),M.dataset.old=M.value)}),M.oninput=function(t){t.target.value==t.target.dataset.old?O.disabled=!0:O.disabled=!1},D.insertAdjacentElement("beforeend",M),D.insertAdjacentElement("beforeend",O),C("Ответственный");var L=document.createElement("div");D.insertAdjacentElement("beforeend",L),fetch("/office/users/",{method:"POST",body:JSON.stringify({id:c.responsible,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){var e=t[0];L.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t\t\t<div class="d-flex responsibleUser mt-2 p-relative">\n\t\t\t\t\t\t\t\t\t\t<figure class="avatar contact" data-initial="'.concat(c.responsible?e.fio?e.fio.slice(0,1):e.login.slice(0,1):"?",'"></figure>\n\t\t\t\t\t\t\t\t\t\t<div>\t\n\t\t\t\t\t\t\t\t\t\t\t<div name="rtitle">').concat(c.responsible?e.fio?e.fio:e.login:"Назначить ответственного","</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>")),L.querySelector(".responsibleUser").onclick=function(t){var i=document.getElementById("responsibleListModal");i.classList.add("active");var e=document.getElementById("responsibleList");fetch("/office/users/",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){e.innerHTML="",t.forEach(function(t){e.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile p-2 c-hand user" data-id="'.concat(t.id,'" data-fio="').concat(t.fio,'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar avatar-sm" data-initial="').concat(t.fio.slice(0,1),'"></figure>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-content">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-title">').concat(t.fio,"</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>"))}),e.querySelectorAll(".tile").forEach(function(e){return e.onclick=function(t){i.classList.remove("active"),c.responsible=e.dataset.id,L.querySelector('.responsibleUser [name="rtitle"]').innerText=e.dataset.fio,L.querySelector(".responsibleUser figure").dataset.initial=e.dataset.fio.slice(0,1),f()}})})}}),C("Контакты");var I=document.createElement("div");"full"==K&&new X.a(I,{animation:150,handle:"figure",onEnd:function(){var e=[];I.querySelectorAll("div.contact").forEach(function(t){e.push(t.dataset.id)}),A.querySelectorAll("div.contact").forEach(function(t){e.push(t.dataset.id)}),c.sub_holders=e.join(","),f()}});var A=document.createElement("div");"full"==K&&new X.a(A,{animation:150,handle:"figure",onEnd:function(){var e=[];I.querySelectorAll("div.contact").forEach(function(t){e.push(t.dataset.id)}),A.querySelectorAll("div.contact").forEach(function(t){e.push(t.dataset.id)}),c.sub_holders=e.join(","),f()}});var P=document.createElement("div");P.classList.add("d-flex","contact","main");var N=document.createElement("figure");N.classList.add("avatar","contact"),N.dataset.initial="?",P.insertAdjacentElement("beforeend",N);var j=document.createElement("div");function B(){var s=D.querySelector(".main");fetch("/office/contacts/",{method:"POST",body:JSON.stringify({find:"byid",id:c.holder,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){var r=t[0];Promise.all([fetch("/office/contacts/",{method:"POST",body:JSON.stringify({find:"byid",id:r.parent,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/phones/",{method:"POST",body:JSON.stringify({find:"byparent",parent:r.id,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/email/",{method:"POST",body:JSON.stringify({find:"byparent",parent:r.id,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(t){var e=t[0][0],i=t[1],n=t[2][0];s.querySelector(".title").value=s.querySelector(".title").dataset.old=r.title,s.querySelector("figure").dataset.initial=r.title.slice(0,1),s.querySelectorAll(".form-radio input").forEach(function(t){return t.name="type"+c.holder}),"person"==r.type?s.querySelector(".form-autocomplete").classList.remove("d-hide"):s.querySelector(".form-autocomplete").classList.add("d-hide"),e&&(s.querySelectorAll('[name="searchCompany"]').value=e.title),s.querySelectorAll(".seven-prefix").forEach(function(t){t.querySelector(".new-phone")||t.remove()});var o=s.querySelector(".seven-prefix");i.forEach(function(t){o.insertAdjacentHTML("beforebegin",'<div class="seven-prefix"><input type="text" data-i="'+t.id+'" pattern="/d [0-9]/g" maxlength="10" placeholder="..." value="'+t.phone+'"></div>')}),s.querySelector(".mail").value=s.querySelector(".mail").dataset.old=n?n.email:""})})}function R(e,i){e.onkeyup=function(t){"Enter"==t.code&&0<e.value.trim().length&&(e.disabled=!1,e.dataset.old=e.value.trim(),fetch("/office/contacts/update",{method:"POST",body:JSON.stringify({id:i,title:e.value.trim(),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){return e.disabled=!1}))},e.onblur=function(){return e.value=e.dataset.old}}function F(t,n){t.forEach(function(i){i.onkeyup=function(t){"Enter"!=t.code||10!=i.value.trim().length||new RegExp(/\D/).test(i.value)?"Enter"==t.code&&0==i.value.trim().length&&"new"!=i.dataset.i&&(i.disabled=!0,fetch("/office/phones/update",{method:"POST",body:JSON.stringify({id:i.dataset.i,cmd:"delete",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){i.parentElement.remove()})):(i.disabled=!0,"new"!=i.dataset.i?fetch("/office/phones/update",{method:"POST",body:JSON.stringify({id:i.dataset.i,phone:i.value,parent:n,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(){i.disabled=!1}):fetch("/office/phones/update",{method:"POST",body:JSON.stringify({phone:i.value,parent:n,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){var e=document.createElement("div");e.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" data-i="'.concat(t.insertId,'" pattern="/d [0-9]/g" maxlength="10" placeholder="..." value="').concat(i.value,'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t')),i.parentElement.insertAdjacentHTML("beforebegin",e),F([e.querySelector("input")],n),i.value="",i.disabled=!1}))}})}function z(e,i){e.onkeyup=function(t){"Enter"==t.code&&0<e.value.trim().length&&(e.disabled=!0,fetch("/office/email/update",{method:"POST",body:JSON.stringify({id:"new"==e.dataset.i?null:e.dataset.i,email:e.value,parent:i,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){"new"==e.dataset.i&&(e.dataset.i=t.insertId),e.disabled=!1}))}}function H(){Promise.all([fetch("/office/contacts",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/phones/",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/email/",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(s){I.innerHTML="",A.innerHTML="",c.sub_holders.split(",").forEach(function(e){var i=s[0].find(function(t){return t.id==e}),t=s[1].filter(function(t){return t.parent==e}),n=s[2].find(function(t){return t.parent==e}),o="person"==i.type?I:A,r=[];t.forEach(function(t){r.push('<div class="seven-prefix"><input type="text" data-i="'+t.id+'" pattern="/d [0-9]/g" maxlength="10" placeholder="..." value="'+t.phone+'"></div>')}),o.insertAdjacentHTML("beforeend",'\n                        <div data-id="'.concat(i.id,'" class="d-flex contact mt-2 p-relative subholder">\n                          <figure class="avatar contact" data-initial="').concat(i.title.slice(0,1),'"></figure>\n                          <div>\n                            <div>\n                              <input class="title w100" data-old="').concat(i&&i.title?i.title:"",'" type="text" pattern="/d [0-9]/g" maxlength="50" placeholder="Без названия" value="').concat(i&&i.title?i.title:"",'">\n                            </div>\n                            ').concat(r.join(""),'\n                            <input class="w100 mail" data-id="').concat(n&&n.id?n.id:"new",'" data-old="').concat(n&&n.email?n.email:"",'" type="text" placeholder="pochta@email.ru" value="').concat(n&&n.email?n.email:"",'">\n                            <div class="pos-rt mt-2 pt-2 c-hand promoteBtn">\n                              <i class="icon icon-people"></i>\n                              <i class="icon icon-upward"></i>\n                            </div>\n                          </div>\n                          <div class="btn btn-clear pos-rt"></div>\n                        </div>\n                      ')),R(o.querySelectorAll('.subholder[data-id="'+i.id+'"] input.title'),i.id),F(o.querySelectorAll('.subholder[data-id="'+i.id+'"] .seven-prefix input'),i.id),z(o.querySelector('.subholder[data-id="'+i.id+'"] .mail'),i.id),o.querySelector('.subholder[data-id="'+i.id+'"] .btn-clear').onclick=function(t){if(confirm("Вы точно хотите убрать контакт?")){t.target.onclick=null;var e=(c.sub_holders+"").split(",").filter(function(t){return t!=i.id});c.sub_holders=e.join(",")?e.join(","):"none",f().then(function(){return o.querySelector('[data-id="'+i.id+'"]').remove()})}},o.querySelector('.subholder[data-id="'+i.id+'"] .promoteBtn').onclick=function(t){var e=[];c.sub_holders.split(",").forEach(function(t){t!=i.id&&e.push(t)}),e.push(c.holder),c.holder=i.id,c.sub_holders=e.join(","),f().then(function(){H(),B()})}})})}function q(r){var s=document.createElement("div");s.classList.add("d-flex","contact","mt-2","c-hand"),s.innerHTML='\n\t\t\t\t\t\t\t\t\t\t<div class="d-flex contact mt-2 p-relative c-hand">\n\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar contact" data-initial="+"></figure>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>'.concat("person"==r?"Добавить контакт":"Добавить компанию","</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n                  ");var a="person"==r?I:A;s.onclick=function(){var o=document.getElementById("contactsSearcher");o.classList.add("active");var n=document.getElementById("searchNewSubContact"),e=document.getElementById("newSubContactSuggestion");n.value="";function t(){0<n.value.trim().length?fetch("/office/contacts",{method:"POST",body:JSON.stringify({title:(n.value+"").trim(),find:"liketitle",only:"person"==r?"person":"company",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){c.sub_holders&&c.sub_holders.split(",").forEach(function(e){return t=t.filter(function(t){return t.id!=e})}),e.innerHTML="",t.forEach(function(t){e.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<dd class="menu-item c-hand py-2" data-i="'.concat(t.id,'" data-title="').concat(t.title,'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile tile-centered">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar avatar-sm" data-initial="').concat(t.title.slice(0,1),'"></figure>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-content">').concat(t.title,"</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t\t\t\t\t\t"))}),e.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t\t\t\t\t\t\t<dd class="menu-item c-hand py-2" data-i="new" data-title="'.concat(n.value,'" title="Создать новый контакт">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile tile-centered">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar avatar-sm" data-initial="').concat(n.value.slice(0,1),'"></figure>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-content">').concat(n.value,"</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t\t\t\t\t"));var i=e.querySelector("[data-i=new]");i.onclick=function(t){var e=(c.sub_holders+"").split(",").filter(function(t){return"null"!=t});fetch("/office/contacts/update",{method:"POST",body:JSON.stringify({title:n.value.trim(),type:"person"==r?"person":"company",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){e.push(t.insertId),c.sub_holders=e.join(","),o.classList.remove("active"),f().then(function(){a.insertAdjacentHTML("beforebegin",'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div data-id="'.concat(t.insertId,'" class="d-flex contact mt-2 p-relative">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar contact" data-initial="').concat(i.dataset.title.slice(0,1),'"></figure>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>').concat(i.dataset.title,'</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="seven-prefix"><input type="text" data-i="new" pattern="/d [0-9]/g" maxlength="10" placeholder="..."></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="btn btn-clear pos-rt"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t')),F(s.querySelectorAll("input"),t.insertId),z(s.querySelector(".mail"),t.insertId)})})},e.querySelectorAll("dd:not([data-i=new])").forEach(function(n){n.onclick=function(t){var e=(c.sub_holders+"").split(",").filter(function(t){return"null"!=t});e.push(n.dataset.i),c.sub_holders=e.join(","),o.classList.remove("active"),f().then(function(){Promise.all([fetch("/office/phones/",{method:"POST",body:JSON.stringify({parent:n.dataset.i,find:"byparent",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/email/",{method:"POST",body:JSON.stringify({parent:n.dataset.i,find:"byparent",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(t){var e=[];t[0].forEach(function(t){e.push('<div class="seven-prefix"><input type="text" data-i="'+t.id+'" pattern="/d [0-9]/g" maxlength="10" placeholder="..." value="'+t.phone+'"></div>')});var i=t[1][0];a.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div data-id="'.concat(n.dataset.i,'" class="d-flex contact mt-2 p-relative subholder">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar contact" data-initial="').concat(n.dataset.title.slice(0,1),'"></figure>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>').concat(n.dataset.title,"</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t").concat(e.join(""),'\n                                      <input class="w100 mail" data-id="').concat(i&&i.id?i.id:"new",'" data-old="').concat(i&&i.email?i.email:"",'" type="text" placeholder="pochta@email.ru" value="').concat(i&&i.email?i.email:"",'">\n                                      <div class="pos-rt mt-2 pt-2 c-hand promoteBtn">\n                                        <i class="icon icon-people"></i>\n                                        <i class="icon icon-upward"></i>\n                                      </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="btn btn-clear pos-rt"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n                                ')),F(a.querySelectorAll("input"),n.dataset.i),z(a.querySelector('.subholder[data-id="'+n.dataset.i+'"] .mail'),n.dataset.i),a.querySelector('.subholder[data-id="'+n.dataset.i+'"] .btn-clear').onclick=function(t){if(confirm("Вы точно хотите убрать контакт?")){t.target.onclick=null;var e=(c.sub_holders+"").split(",").filter(function(t){return t!=n.dataset.i});c.sub_holders=e.join(",")?e.join(","):"none",f().then(function(){return a.querySelector('[data-id="'+n.dataset.i+'"]').remove()})}},a.querySelector('.subholder[data-id="'+n.dataset.i+'"] .promoteBtn').onclick=function(t){var e=[];c.sub_holders.split(",").forEach(function(t){t!=n.dataset.i&&e.push(t)}),e.push(c.holder),c.holder=n.dataset.i,c.sub_holders=e.join(","),f().then(function(){B(),H()})}})})}})}):e.innerHTML=""}t(),n.oninput=function(){return t()}},a.insertAdjacentElement("afterend",s)}Promise.all([fetch("/office/phones/",{method:"POST",body:JSON.stringify({parent:c.holder,find:"byparent",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/email/",{method:"POST",body:JSON.stringify({parent:c.holder,find:"byparent",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/contacts/",{method:"POST",body:JSON.stringify({id:c.holder,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(t){var r=t[0],s=t[1][0],a=t[2][0];fetch("/office/contacts/",{method:"POST",body:JSON.stringify({id:a.parent?a.parent:0,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){var e=t[0];a&&a.title&&(N.dataset.initial=a.title.slice(0,1));var i=[];r.forEach(function(t){i.push('<div class="seven-prefix"><input data-id="'+t.id+'" data-old="'+t.phone+'" type="text" pattern="/d [0-9]/g" placeholder="..." value="'+t.phone+'" maxlength="10"></div>')}),i.push('<div class="seven-prefix"><input class="new-phone" type="text" pattern="/d [0-9]/g" placeholder="..." maxlength="10"></div>'),j.innerHTML='\n\t\t\t\t\t\t\t\t\t\t\t<input class="title w100" data-old="'.concat(a&&a.title?a.title:"",'" type="text" pattern="/d [0-9]/g" maxlength="50" placeholder="Без названия" value="').concat(a&&a.title?a.title:"",'">\n\t\t\t\t\t\t\t\t\t\t\t<div class="form-group m-0" name="contactType">\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- <label class="form-radio form-inline m-0">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="radio" name="type').concat(a.id,'" ').concat("person"==a.type?"checked":"",' value="person"><i class="form-icon"></i> Контакт\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<label class="form-radio form-inline m-0">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="radio" name="type').concat(a.id,'" ').concat("company"==a.type?"checked":"",' value="company"><i class="form-icon"></i> Компания\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="form-autocomplete ').concat("person"==a.type?"":"d-hide",'">\n\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" name="searchCompany" placeholder="Поиск..." value="').concat(e?e.title:"",'">\n\t\t\t\t\t\t\t\t\t\t\t\t<ul class="menu d-hide" name="suggestion"></ul>\n\t\t\t\t\t\t\t\t\t\t\t</div> --\x3e\n\t\t\t\t\t\t\t\t\t\t\t').concat(i.join(""),'\n\t\t\t\t\t\t\t\t\t\t\t<input class="w100 mail" data-id="').concat(s&&s.id?s.id:"new",'" data-old="').concat(s&&s.email?s.email:"",'" type="text" placeholder="pochta@email.ru" value="').concat(s&&s.email?s.email:"",'">\n\t\t\t\t\t\t\t\t\t\t'),j.querySelector(".mail").onkeyup=function(e){"Enter"==e.code&&e.target.dataset.old!=e.target.value&&(e.target.disabled=!0,fetch("/office/email/update",{method:"POST",body:JSON.stringify({id:"new"==e.target.dataset.id?null:e.target.dataset.id,email:e.target.value,parent:"new"==e.target.dataset.id?a.id:null,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){"new"==e.target.dataset.id&&(e.target.dataset.id=t.insertId),e.target.disabled=!1}))},j.querySelector(".title").onkeyup=function(t){"Enter"==t.code&&t.target.dataset.old!=t.target.value&&(t.target.dataset.old=t.target.value,j.querySelectorAll("input").forEach(function(t){return t.disabled=!0}),fetch("/office/contacts/update",{method:"POST",body:JSON.stringify({id:a.id,title:t.target.value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){d(),N.dataset.initial=t.target.value.slice(0,1),j.querySelectorAll("input").forEach(function(t){return t.disabled=!1})}))},j.querySelector(".title").onblur=function(t){t.target.value!=t.target.dataset.old&&(t.target.value=t.target.dataset.old)};function n(t){var e=(t.target.value+"").trim().length;10!=e||0!=e?t.target.parentElement.classList.add("error"):t.target.parentElement.classList.remove("error"),"Enter"!=t.code||10!=e||t.target.dataset.old==t.target.value||new RegExp(/\D/).test(t.target.value)?"Enter"==t.code&&0==e&&(j.querySelectorAll("input").forEach(function(t){return t.disabled=!0}),fetch("/office/phones/update",{method:"POST",body:JSON.stringify({id:t.target.dataset.id,phone:t.target.value,cmd:"delete",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){d(),t.target.parentElement.remove(),j.querySelectorAll("input").forEach(function(t){return t.disabled=!1})})):(t.target.dataset.old=t.target.value,j.querySelectorAll("input").forEach(function(t){return t.disabled=!0}),fetch("/office/phones/update",{method:"POST",body:JSON.stringify({id:t.target.dataset.id,phone:t.target.value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){d(),j.querySelectorAll("input").forEach(function(t){return t.disabled=!1})}))}function o(t){t.target.parentElement.classList.remove("error"),t.target.value!=t.target.dataset.old&&(t.target.value=t.target.dataset.old)}j.querySelectorAll(".seven-prefix input:not(.new-phone)").forEach(function(t){t.onkeyup=n,t.onblur=o});j.querySelector(".new-phone").onkeyup=function e(i){"Enter"!=i.code||i.target.value.trim().length+""!=10||new RegExp(/\D/).test(i.target.value)||(j.querySelectorAll("input").forEach(function(t){return t.disabled=!0}),fetch("/office/phones/update",{method:"POST",body:JSON.stringify({phone:i.target.value,parent:a.id,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){d(),i.target.classList.remove("new-phone"),i.target.onkeyup=n,i.target.dataset.id=t.insertId,j.querySelectorAll("input").forEach(function(t){return t.disabled=!1}),j.insertAdjacentHTML("beforeend",'<div class="seven-prefix"><input class="new-phone" type="text" pattern="/d [0-9]/g" placeholder="..." maxlength="10"></div>'),j.querySelector(".new-phone").onkeyup=e}))}})}),P.insertAdjacentElement("beforeend",j),D.insertAdjacentElement("beforeend",P),D.insertAdjacentElement("beforeend",I),C("Компании"),D.insertAdjacentElement("beforeend",A),c.sub_holders?Promise.all([fetch("/office/phones/",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/email/",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(u){var t=[];(c.sub_holders+"").split(",").forEach(function(h){t.push(fetch("/office/contacts/",{method:"POST",body:JSON.stringify({id:h,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){var i=t[0],e=u[0].filter(function(t){return t.parent==i.id}),n=u[1].filter(function(t){return t.parent==i.id})[0],o=document.createElement("div");o.dataset.id=i.id,o.classList.add("d-flex","contact","mt-2","p-relative");var r=document.createElement("figure");r.classList.add("avatar","contact"),r.dataset.initial=i?i.title.slice(0,1):"?",o.insertAdjacentElement("beforeend",r);var s=document.createElement("div"),a=[];e.forEach(function(t){a.push('<div class="seven-prefix"><input type="text" data-i="'+t.id+'" pattern="/d [0-9]/g" maxlength="10" placeholder="..." value="'+t.phone+'"></div>')}),a.push('<div class="seven-prefix"><input type="text" data-i="new" pattern="/d [0-9]/g" maxlength="10" placeholder="..."></div>');var l=document.createElement("div");l.classList.add("pos-rt","mt-2","pt-2","c-hand"),l.innerHTML='<i class="icon icon-people"></i><i class="icon icon-upward"></i>',l.onclick=function(t){var e=[];c.sub_holders.split(",").forEach(function(t){t!=i.id&&e.push(t)}),e.push(c.holder),c.holder=i.id,c.sub_holders=e.join(","),f().then(function(){H(),B()})},s.innerHTML='\n                          <div>\n                            <input class="title w100" data-old="'.concat(i&&i.title?i.title:"",'" type="text" pattern="/d [0-9]/g" maxlength="50" placeholder="Без названия" value="').concat(i&&i.title?i.title:"",'">\n                          </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(a.join(""),'\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input class="w100 mail" data-id="').concat(n&&n.id?n.id:"new",'" data-old="').concat(n&&n.email?n.email:"",'" type="text" placeholder="pochta@email.ru" value="').concat(n&&n.email?n.email:"",'">\n                        '),s.insertAdjacentElement("beforeend",l),R(s.querySelector("input.title"),h),F(s.querySelectorAll(".seven-prefix input"),h),z(s.querySelector(".mail"),h),o.insertAdjacentElement("beforeend",s);var d=document.createElement("div");d.classList.add("btn","btn-clear","pos-rt"),d.onclick=function(t){if(confirm("Вы точно хотите убрать контакт?")){d.onclick=null;var e=(c.sub_holders+"").split(",").filter(function(t){return t!=i.id});c.sub_holders=e.join(",")?e.join(","):"none",f().then(function(){"none"==c.sub_holders&&(c.sub_holders=null),o.remove()})}},o.insertAdjacentElement("beforeend",d),"person"==i.type?I.insertAdjacentElement("beforeend",o):A.insertAdjacentElement("beforeend",o)}))}),Promise.all(t).then(function(){q("person"),q("company")})}):(q("person"),q("company")),C("Взаимодействия");var Y=document.createElement("button");Y.classList.add("btn","btn-sm","btn-error","p-centered"),Y.innerText="Удалить лид",Y.onclick=function(t){confirm("Вы уверены что хотите удалить лид?")&&confirm("И дважды подумали?")&&(c.active=0,W.classList.add("dragscroll"),G(3).reset(),f().then(function(){return i.remove()}))},D.insertAdjacentElement("beforeend",Y),a.insertAdjacentElement("beforeend",g),a.insertAdjacentElement("beforeend",k),a.insertAdjacentElement("beforeend",D),i.insertAdjacentElement("beforeend",a),i.insertAdjacentElement("beforeend",r),s.onclick=function t(){a.classList.add("fadeIn"),a.classList.remove("d-hide"),i.classList.add("active"),s.classList.remove("flip-back"),s.classList.add("flip"),w.focus(),W.classList.remove("dragscroll"),G(3).reset(),s.onclick=function(){a.classList.add("d-hide"),a.classList.remove("fadeIn"),i.classList.remove("active"),s.classList.add("flip-back"),s.classList.remove("flip"),s.onclick=t,i.querySelectorAll("input").forEach(function(t){return t.blur()}),W.classList.add("dragscroll"),G(3).reset()}},t.onmousedown=function(t){W.classList.remove("dragscroll"),G(3).reset()},t.onmouseup=function(t){W.classList.contains("dragscroll")||(W.classList.add("dragscroll"),G(3).reset())}}t.lids.forEach(function(t){e(t)}),"full"==K&&new X.a(U.content,{group:"steps",animation:150,handle:".lid-drag",ghostClass:"grabbingLid",onStart:function(t){t.item.querySelector(".lid-menu").classList.add("d-hide"),t.item.querySelector(".lid-menu").classList.remove("active"),t.item.querySelector(".expand").classList.add("flip-back"),t.item.querySelector(".expand").classList.remove("flip")},onEnd:function(e){var t=JSON.parse(e.item.dataset.data);t.step_id=e.to.dataset.id,e.from.parentElement.dataset.id!=e.to.parentElement.dataset.id&&(t.lid_data.history.push({type:"progress",when:(new Date).toISOString(),author:null,oldStep:e.from.parentElement.dataset.title,newStep:e.to.parentElement.dataset.title}),t._csrf=document.getElementById("csrfToken").value,fetch("/office/lids/update/",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(function(){var t=document.createElement("div");t.classList.add("timeline-item","icon-lg"),t.innerHTML='\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="timeline-left">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a class="timeline-icon icon-lg">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="icon icon-share"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="timeline-content">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span name="time">'.concat(V((new Date).getDate())+"."+V((new Date).getMonth())+" "+V((new Date).getHours())+":"+V((new Date).getMinutes())," </span> Лид был перемещён с шага «").concat(e.from.parentElement.querySelector(".step-title").innerText,"» на «").concat(e.to.parentElement.querySelector(".step-title").innerText,"»\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t"),e.item.querySelector(".timeline").insertAdjacentElement("afterbegin",t)})),W.classList.add("dragscroll"),G(3).reset()},onMove:function(e){Object(p.setTimeout)(function(){var t=e.dragged.offsetLeft-W.scrollLeft>.6*window.innerWidth?"right":e.dragged.offsetLeft-W.scrollLeft<.025*window.innerWidth?"left":"none";"right"==t?W.scroll({left:W.scrollLeft+e.dragged.toRect.width,behavior:"smooth"}):"left"==t&&W.scroll({left:W.scrollLeft-e.dragged.toRect.width,behavior:"smooth"})},150)}}),U.content.style.height="100%",U.step.insertAdjacentElement("beforeend",U.content),W.insertAdjacentElement("beforeend",U.step),U.step=document.createElement("div"),U.step.classList.add("input-group","col-12"),U.span=document.createElement("span"),U.span.classList.add("input-group-addon"),U.icon=document.createElement("span"),U.icon.classList.add("icon","icon-resize-vert"),U.span.insertAdjacentElement("beforeend",U.icon),U.step.insertAdjacentElement("beforeend",U.span),U.input=document.createElement("input"),U.input.classList.add("form-input"),U.input.type="text",U.input.dataset.last=U.input.value=t.stepData.title,U.input.name=t.stepData.id,U.step.insertAdjacentElement("beforeend",U.input),U.button=document.createElement("button"),U.button.classList.add("btn"),U.button.dataset.id=t.stepData.id,U.button.innerText="X",U.step.insertAdjacentElement("beforeend",U.button),document.getElementById("stepsHolder").insertAdjacentElement("beforeend",U.step)}),document.querySelectorAll("#stepsHolder button[data-id]").forEach(function(r){"full"==K&&(r.onclick=function(t){var e=document.getElementById("csrfToken").value,i=(r.dataset.id,document.createElement("div")),n=document.createElement("button");n.classList.add("btn"),n.classList.add("btn-error"),n.innerText="Удалить";var o=document.createElement("button");o.classList.add("btn"),o.innerText="Отмена",i.insertAdjacentElement("beforeend",n),i.insertAdjacentElement("beforeend",o),t.target.classList.add("d-hide"),t.path[1].insertAdjacentElement("beforeend",i),"full"==K&&(n.onclick=function(){r.parentElement.remove(),s()}),o.addEventListener("click",function(){t.target.classList.remove("d-hide"),i.remove()})})})});function i(){return document.getElementById("kanbanTitleChangeInput")}function o(){return document.getElementById("kanbanTitleChangeBtn")}function r(){var e=[];document.querySelectorAll("#stepsHolder input").forEach(function(t){return e.push(t.name)}),fetch("/office/pipes/"+location.pathname.split("/")[3],{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],title:document.getElementById("pipeTitle").value,kanban:{title:i().value,description:"",steps:e},key:l,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){a().innerText=i().value,a().classList.remove("d-hide"),o().classList.remove("d-hide"),i().classList.add("d-hide")}).catch(function(t){return console.error(t)})}var a=function(){return document.getElementById("kanbanTitle")};"full"==K&&(o().onclick=function(t){o().classList.add("d-hide"),a().classList.add("d-hide"),i().classList.remove("d-hide"),i().focus(),i().innerText=u.pipe.kanban[l].title}),i().onblur=function(t){r()},document.getElementById("kanbanTitleChangeInput").onkeydown=function(t){"Enter"===t.code&&r()},"full"==K&&(document.getElementById("deleteKanban").onclick=function(t){confirm("Вы точно хотите удалить kanban?")&&fetch("/office/pipes/"+location.pathname.split("/")[3],{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],title:document.getElementById("pipeTitle").value,key:l,delete:!0,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){document.getElementById("kanbanStepsList").classList.remove("active"),W.childNodes.forEach(function(t){return t.remove()}),f.init(l)}).catch(function(t){return console.error(t)})})},i===l&&d.click(),c.insertAdjacentElement("beforeend",t)}for(var e in u.pipe.kanban)t(e)})}}]),t}()},,,,,function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(t,o,r){(function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function n(t,e){this._id=t,this._clearFn=e}o.setTimeout=function(){return new n(i.call(setTimeout,e,arguments),clearTimeout)},o.setInterval=function(){return new n(i.call(setInterval,e,arguments),clearInterval)},o.clearTimeout=o.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(e,this._id)},o.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},o.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},o._unrefActive=o.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r(47),o.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,o.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(11))},,,,function(t,e){var i,n,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,d=[],h=!1,u=-1;function c(){h&&l&&(h=!1,l.length?d=l.concat(d):u=-1,d.length&&f())}function f(){if(!h){var t=a(c);h=!0;for(var e=d.length;e;){for(l=d,d=[];++u<e;)l&&l[u].run();u=-1,e=d.length}l=null,h=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];d.push(new p(t,e)),1!==d.length||h||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,i){function h(t){return!!(""===t||t&&t.charCodeAt&&t.substr)}function u(t){return n?n(t):"[object Array]"===o.call(t)}function c(t){return"[object Object]"===o.call(t)}function f(t,e){var i;t=t||{},e=e||{};for(i in e)e.hasOwnProperty(i)&&null==t[i]&&(t[i]=e[i]);return t}function p(t,e,i){var n,o,r=[];if(!t)return r;if(s&&t.map===s)return t.map(e,i);for(n=0,o=t.length;n<o;n++)r[n]=e.call(i,t[n],n,t);return r}function m(t,e){return t=Math.round(Math.abs(t)),isNaN(t)?e:t}function v(t){var e=g.settings.currency.format;return"function"==typeof t&&(t=t()),h(t)&&t.match("%v")?{pos:t,neg:t.replace("-","").replace("%v","-%v"),zero:t}:t&&t.pos&&t.pos.match("%v")?t:h(e)?g.settings.currency.format={pos:e,neg:e.replace("%v","-%v"),zero:e}:e}
/*!
 * accounting.js v0.4.2, copyright 2014 Open Exchange Rates, MIT license, http://openexchangerates.github.io/accounting.js
 */
var g,s,n,o,y,d,b,l;g={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},s=Array.prototype.map,n=Array.isArray,o=Object.prototype.toString,y=g.unformat=g.parse=function(t,e){if(u(t))return p(t,function(t){return y(t,e)});if("number"==typeof(t=t||0))return t;e=e||".";var i=RegExp("[^0-9-"+e+"]",["g"]);i=parseFloat((""+t).replace(/\((.*)\)/,"-$1").replace(i,"").replace(e,"."));return isNaN(i)?0:i},d=g.toFixed=function(t,e){e=m(e,g.settings.number.precision);var i=Math.pow(10,e);return(Math.round(g.unformat(t)*i)/i).toFixed(e)},b=g.formatNumber=g.format=function(t,e,i,n){if(u(t))return p(t,function(t){return b(t,e,i,n)});t=y(t);var o=f(c(e)?e:{precision:e,thousand:i,decimal:n},g.settings.number),r=m(o.precision),s=t<0?"-":"",a=parseInt(d(Math.abs(t||0),r),10)+"",l=3<a.length?a.length%3:0;return s+(l?a.substr(0,l)+o.thousand:"")+a.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+o.thousand)+(r?o.decimal+d(Math.abs(t),r).split(".")[1]:"")},l=g.formatMoney=function(t,e,i,n,o,r){if(u(t))return p(t,function(t){return l(t,e,i,n,o,r)});t=y(t);var s=f(c(e)?e:{symbol:e,precision:i,thousand:n,decimal:o,format:r},g.settings.currency),a=v(s.format);return(0<t?a.pos:t<0?a.neg:a.zero).replace("%s",s.symbol).replace("%v",b(Math.abs(t),m(s.precision),s.thousand,s.decimal))},g.formatColumn=function(t,e,i,n,o,r){if(!t)return[];var s=f(c(e)?e:{symbol:e,precision:i,thousand:n,decimal:o,format:r},g.settings.currency),a=v(s.format),l=a.pos.indexOf("%s")<a.pos.indexOf("%v"),d=0;t=p(t,function(t){return u(t)?g.formatColumn(t,s):((t=(0<(t=y(t))?a.pos:t<0?a.neg:a.zero).replace("%s",s.symbol).replace("%v",b(Math.abs(t),m(s.precision),s.thousand,s.decimal))).length>d&&(d=t.length),t)});return p(t,function(t){return h(t)&&t.length<d?l?t.replace(s.symbol,s.symbol+Array(d-t.length+1).join(" ")):Array(d-t.length+1).join(" ")+t:t})},t.exports&&(e=t.exports=g),e.accounting=g},,function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},,,,,,,,,,function(t,e){},function(t,e,i){var n=function(r){"use strict";var l,t=Object.prototype,d=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},o=e.iterator||"@@iterator",i=e.asyncIterator||"@@asyncIterator",n=e.toStringTag||"@@toStringTag";function s(t,e,i,n){var o=e&&e.prototype instanceof a?e:a,r=Object.create(o.prototype),s=new D(n||[]);return r._invoke=function(r,s,a){var l=u;return function(t,e){if(l===f)throw new Error("Generator is already running");if(l===p){if("throw"===t)throw e;return M()}for(a.method=t,a.arg=e;;){var i=a.delegate;if(i){var n=S(i,a);if(n){if(n===m)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(l===u)throw l=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);l=f;var o=h(r,s,a);if("normal"===o.type){if(l=a.done?p:c,o.arg===m)continue;return{value:o.arg,done:a.done}}"throw"===o.type&&(l=p,a.method="throw",a.arg=o.arg)}}}(t,i,s),r}function h(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}r.wrap=s;var u="suspendedStart",c="suspendedYield",f="executing",p="completed",m={};function a(){}function v(){}function g(){}var y={};y[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(C([])));w&&w!==t&&d.call(w,o)&&(y=w);var _=g.prototype=a.prototype=Object.create(y);function x(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function k(l){var e;this._invoke=function(i,n){function t(){return new Promise(function(t,e){!function e(t,i,n,o){var r=h(l[t],l,i);if("throw"!==r.type){var s=r.arg,a=s.value;return a&&"object"==typeof a&&d.call(a,"__await")?Promise.resolve(a.__await).then(function(t){e("next",t,n,o)},function(t){e("throw",t,n,o)}):Promise.resolve(a).then(function(t){s.value=t,n(s)},function(t){return e("throw",t,n,o)})}o(r.arg)}(i,n,t,e)})}return e=e?e.then(t,t):t()}}function S(t,e){var i=t.iterator[e.method];if(i===l){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=l,S(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=h(i,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,m;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=l),e.delegate=null,m):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function t(){for(;++i<e.length;)if(d.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=l,t.done=!0,t};return n.next=n}}return{next:M}}function M(){return{value:l,done:!0}}return v.prototype=_.constructor=g,g.constructor=v,g[n]=v.displayName="GeneratorFunction",r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,n in t||(t[n]="GeneratorFunction")),t.prototype=Object.create(_),t},r.awrap=function(t){return{__await:t}},x(k.prototype),k.prototype[i]=function(){return this},r.AsyncIterator=k,r.async=function(t,e,i,n){var o=new k(s(t,e,i,n));return r.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},x(_),_[n]="Generator",_[o]=function(){return this},_.toString=function(){return"[object Generator]"},r.keys=function(i){var n=[];for(var t in i)n.push(t);return n.reverse(),function t(){for(;n.length;){var e=n.pop();if(e in i)return t.value=e,t.done=!1,t}return t.done=!0,t}},r.values=C,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&d.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var n=this;function t(t,e){return r.type="throw",r.arg=i,n.next=t,e&&(n.method="next",n.arg=l),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var o=this.tryEntries[e],r=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var s=d.call(o,"catchLoc"),a=d.call(o,"finallyLoc");if(s&&a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;0<=i;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&d.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),T(i),m}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var o=n.arg;T(i)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:C(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=l),m}},r}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e,i){"use strict";function n(){var i=document.getElementById("addPipeBtn");"full"==document.getElementById("access").value&&i.addEventListener("click",function(t){i.disabled="disabled";var e={_csrf:document.getElementById("csrfToken").value};fetch("/office/pipes",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){window.location="/office/pipes/"+t.id}).catch(function(t){return console.error(t)})});var n=document.getElementById("select");n.addEventListener("click",function(t){var e={_csrf:document.getElementById("csrfToken").value,id:n.value};fetch("/office/getPipes",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){!function(t){document.getElementById("pipe");var e=document.getElementById("pipeTitle");document.getElementById("pipeStepsHolder"),document.getElementById("editPipeBtn").addEventListener("click",function(){return window.location="/office/pipes/"+t.pipe.id}),t.pipe&&(e.querySelector("h2").innerText=t.pipe.title)}(t)}).catch(function(t){return console.error(t)})}),n.click(),document.getElementById("select").innerHTML||(document.getElementById("editPipeBtn").disabled=!0)}i.r(e),i.d(e,"pipesRouteScript",function(){return n})},function(t,e,i){"use strict";i.r(e),i.d(e,"init",function(){return n});document.getElementById("access").value;function n(){var o=document.getElementById("createLidModal"),r=document.getElementById("addLidBtn");r.onclick=function(t){o.classList.add("active")};function t(e,t){function i(){e.value.toString().trim().length>t?e.classList.remove("is-error"):e.classList.add("is-error")}e.addEventListener("input",i),e.addEventListener("focus",i),e.addEventListener("blur",function(t){e.classList.remove("is-error")})}var s=document.getElementById("lidTitle"),a=document.getElementById("lidStep"),l=document.getElementById("lidGi"),d=document.getElementById("lidCgi"),h=document.getElementById("lidPrepayment"),u=document.getElementById("lidRestpayment"),c=document.getElementById("lidComment"),f=document.getElementById("lidContactTitle"),p=document.getElementById("lidHolderUser"),m=document.getElementById("newPhone"),i=document.getElementById("found"),v=document.getElementById("creatingContactHolder"),g=document.getElementById("lidContactType"),y=document.getElementById("rejectCrateingLid"),b=document.getElementById("confirmCreatingLid");t(s,0),t(f,0);function e(){i.querySelector("a").onclick=function(t){p.value="Новый контакт",p.dataset.id="new",i.classList.add("d-hide"),v.classList.remove("d-hide")}}p.oninput=function(t){delete p.dataset.id,0<(t.target.value+"").trim().length?(i.innerHTML="",i.classList.remove("d-hide"),fetch("/office/contacts",{method:"POST",body:JSON.stringify({title:(t.target.value+"").trim(),find:"liketitle",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){t.forEach(function(t){i.insertAdjacentHTML("beforeend",'\n                        <li class="menu-item"><a class="c-hand" data-id="'.concat(t.id,'" data-title="').concat(t.title,'">\n                            <div class="tile tile-centered">\n                                <div class="tile-icon"><figure class="avatar avatar-sm" data-initial="').concat(t.title.slice(0,1),'"></figure></div>\n                                <div class="tile-content">').concat(t.title,"</div>\n                            </div>\n                        </a></li>\n                    "))}),i.childElementCount||(i.insertAdjacentHTML("beforeend",'\n                        <li class="menu-item"><a class="c-hand new">\n                            <div class="tile tile-centered">\n                                <div class="tile-icon"><figure class="avatar avatar-sm" data-initial="?"></figure></div>\n                                <div class="tile-content">Новый контакт</div>\n                            </div>\n                        </a></li>\n                    '),e()),i.querySelectorAll("a").forEach(function(e){e.onclick=function(t){v.classList.add("d-hide"),p.value=e.dataset.title,i.classList.add("d-hide"),p.dataset.id=e.dataset.id,fetch("/office/contacts",{method:"POST",body:JSON.stringify({id:e.dataset.id,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){f.value=t[0].title})}})})):i.classList.add("d-hide")},p.onfocus=function(t){i.classList.remove("d-hide"),p.value||(i.innerHTML="",i.insertAdjacentHTML("beforeend",'\n                <li class="menu-item"><a class="c-hand new">\n                    <div class="tile tile-centered">\n                        <div class="tile-icon"><figure class="avatar avatar-sm" data-initial="?"></figure></div>\n                        <div class="tile-content">Новый контакт</div>\n                    </div>\n                </a></li>\n            '),e())},p.onblur=function(t){setTimeout(function(){t.target!=document.activeElement&&i.classList.add("d-hide")},1e3)},b.onclick=function(t){if(0<(s.value+"").trim().length&&p.dataset.id||"new"==p.dataset.id&&10==m.value.trim().length&&0<f.value.trim().length){var e=function(){s.value="",a.value=1,l.value=0,d.value=0,h.value=0,u.value=0,c.value="",m.value="",f.value="",v.classList.add("d-hide")};b.classList.add("loading"),s.disabled=!0,a.disabled=!0,l.disabled=!0,d.disabled=!0,h.disabled=!0,u.disabled=!0,c.disabled=!0,y.disabled=!0,p.disabled=!0;var i=function(t){return fetch("/office/lids/create",{method:"POST",body:JSON.stringify({title:s.value,lid_data:{comment:c.value},step_id:a.value,tunnel_id:a.querySelector('[value="'+a.value+'"]').dataset.pipe,gi:l.value,cgi:d.value,prepayment:h.value,restpayment:u.value,holder:t,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){r.insertAdjacentHTML("beforebegin",'\n                        <tr>\n                            <td class="id pl-2">'.concat(t.insertId,'</td>\n                            <td class="title">').concat(s.value,'</td>\n                            <td class="date">').concat((new Date).toISOString().split("T")[0].split("-")[1],".").concat((new Date).toISOString().split("T")[0].split("-")[2]," ").concat((new Date).toISOString().split("T")[1].slice(0,8),'</td>\n                            <td class="gi">').concat(l.value,' р.</td>\n                            <td class="contact"><span class="name">').concat(f.value,"</span></td>\n                        </tr>\n                    "))})};if("new"==p.dataset.id){var n=Array.from(g.querySelectorAll("input")).find(function(t){return!!t.checked}).value;fetch("/office/contacts/update",{method:"POST",body:JSON.stringify({title:f.value,type:n,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){fetch("/office/phones/update",{method:"POST",body:JSON.stringify({phone:m.value,parent:t.insertId,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){i(t.insertId).then(function(){b.classList.remove("loading"),s.disabled=!1,a.disabled=!1,l.disabled=!1,d.disabled=!1,h.disabled=!1,u.disabled=!1,c.disabled=!1,y.disabled=!1,p.disabled=!1,o.classList.remove("active"),e()})})})}else i(p.dataset.id).then(function(){b.classList.remove("loading"),s.disabled=!1,a.disabled=!1,l.disabled=!1,d.disabled=!1,h.disabled=!1,u.disabled=!1,c.disabled=!1,y.disabled=!1,p.disabled=!1,o.classList.remove("active"),e()})}}}},function(t,e,i){"use strict";function n(){var t=document.getElementById("renamePipeBtn"),s=document.getElementById("pipeTitle"),a=document.getElementById("pageTitle"),e=document.getElementById("pipeEditBtn"),i=document.getElementById("access").value;"full"==i&&(e.onclick=function(t){document.getElementById("pipeEditingModal").classList.add("active")}),s.addEventListener("input",function(){""===s.value.trim()?(t.disabled=!0,s.classList.add("is-error")):(t.disabled=!1,s.classList.remove("is-error"))}),"full"==i&&t.addEventListener("click",function(t){var e="/office/pipes/"+location.pathname.split("/")[3],i=document.getElementById("csrfToken").value,n=s.value.trim(),o=+location.pathname.split("/")[3],r={title:n,id:o,_csrf:i};""!==s.value&&fetch(e,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then(function(t){return a.innerText=n,document.getElementById("pipeEditingModal").classList.remove("active"),t.json()}).catch(function(t){return console.error(t)})});var n=document.getElementById("pipeDeleteBtn");"full"==i&&n.addEventListener("click",function(t){if(confirm("Вы точно хотите удалить воронку?")&&confirm("В уверены?")){var e=document.getElementById("csrfToken").value,i={id:+location.pathname.split("/")[3],_csrf:e,active:0};fetch("/office/pipes/delete",{method:"DELETE",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then(function(t){return window.location.pathname="office/pipes",t.json()}).catch(function(t){return console.error(t)})}})}i.r(e),i.d(e,"pipeEditing",function(){return n})},function(t,e,i){"use strict";i.r(e),i.d(e,"stepsScript",function(){return r}),i.d(e,"setEventDeleteBtn",function(){return s});var n=i(4),o=document.getElementById("access").value;function r(){"full"==o&&new n.a(document.getElementById("stepsHolder"),{animation:200,handle:"span"})}function s(){document.querySelectorAll("#stepsHolder button[data-id]").forEach(function(s){"full"!=o||+s.dataset.listener||(s.addEventListener("click",function(t){var e=document.getElementById("csrfToken").value,i={id:s.dataset.id,_csrf:e,active:0},n=document.createElement("div"),o=document.createElement("button");o.classList.add("btn"),o.classList.add("btn-error"),o.innerText="Удалить";var r=document.createElement("button");r.classList.add("btn"),r.innerText="Отмена",n.insertAdjacentElement("beforeend",o),n.insertAdjacentElement("beforeend",r),t.target.classList.add("d-hide"),t.path[1].insertAdjacentElement("beforeend",n),o.addEventListener("click",function(){fetch("/office/steps/delete",{method:"DELETE",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).catch(function(t){return console.error(t)}),t.path[1].remove()}),r.addEventListener("click",function(){t.target.classList.remove("d-hide"),n.remove()})}),s.dataset.listener=1)})}},function(t,e,d){"use strict";d.r(e),d.d(e,"visScript",function(){return i});var r=d(46),s=document.getElementById("access").value;function i(){fetch("/office/getPipes",{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){function e(){(function(){var i=[],n=[];return fetch("/office/getPipes",{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t.steps.forEach(function(e){i.push({id:e.id,label:e.title,color:{border:e.vis_data?e.vis_data.color:"#000"},shape:e.vis_data?e.vis_data.shape:"box"}),e.parents&&e.parents.split(",").forEach(function(t){n.push({to:e.id,from:t})})}),console.log(i),{nodes:i,edges:n}})})().then(function(t){i.innerHTML="",document.getElementById("reloadVisBtn").disabled=!1,document.getElementById("strictBtn").disabled=!1,(h=new r.Network(i,t,{height:document.getElementById("vis").getBoundingClientRect().height+"px",width:"100%",layout:{randomSeed:2,hierarchical:{enabled:document.getElementById("strictBtn").checked,sortMethod:"directed",direction:"LR"}},physics:{enabled:!1},edges:{smooth:{enabled:!1},arrows:{to:!0},chosen:{edge:function(t,e,i){t.width=i?3:1}}},nodes:{shape:"box",borderWidth:1,borderWidthSelected:2,color:{border:"medgray",background:"#fff",highlight:{border:"#lightslategray",background:"gainsboro"}},chosen:{node:function(t,e,i){i?(t.color="#ccffcc",t.borderColor="#004d00"):(t.color="#fff",t.borderColor="medgray")}}},locale:"ru",interaction:{multiselect:!0},manipulation:{enabled:"full"==s,addNode:function(e,i){var n=document.getElementById("nodeCreateModal"),o=document.getElementById("confirmNodeCreate"),r=document.getElementById("rejectNodeCreate"),s=document.getElementById("nodeCreateColor"),a=document.getElementById("nodeCreateShape");n.classList.add("active"),n.querySelector(".modal-close").onclick=function(t){o.onclick=null,r.onclick=null,i(null)};var l=document.getElementById("nodeCrateTitle");l.oninput=function(t){0<l.value.trim().length?(l.classList.remove("is-error"),o.disabled=!1):(l.classList.add("is-error"),o.disabled=!0)},o.onclick=function(t){t.target.onclick=null,n.classList.add("active"),fetch("/office/steps",{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],title:l.value,vis_data:{color:s.value,shape:a.value},_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){e.id=t.id,e.label=l.value,i(e),n.classList.remove("active")}).catch(function(t){return console.error(t)})},r.onclick=function(t){n.classList.remove("active"),i(null)}},editNode:function(e,i){var n=document.getElementById("nodeEditingModal"),o=document.getElementById("confirmNodeEdit"),r=document.getElementById("rejectNodeEdit"),s=document.getElementById("nodeEditColor"),a=document.getElementById("nodeEditShape");n.classList.add("active"),s.value=h.body.data.nodes._data[e.id].color.border,a.value=h.body.data.nodes._data[e.id].shape;var l=[];for(var t in h.body.data.edges._data)h.body.data.edges._data[t].to===e.id&&l.push(h.body.data.edges._data[t].from);l.forEach(function(t,e){return l[e]=+t}),l=l.join(","),n.querySelector(".modal-close").onclick=function(t){o.onclick=null,r.onclick=null,i(null)};var d=document.getElementById("nodeEditTitle");d.value=e.label,d.oninput=function(t){0<d.value.trim().length?(d.classList.remove("is-error"),o.disabled=!1):(d.classList.add("is-error"),o.disabled=!0)},o.onclick=function(t){t.target.onclick=null,n.classList.add("active"),fetch("/office/steps/edit",{method:"POST",body:JSON.stringify({id:e.id,title:d.value,parents:l,vis_data:{color:s.value,shape:a.value},_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){e.label=d.value,n.classList.remove("active"),i(e)}).catch(function(t){return console.error(t)})},r.onclick=function(t){n.classList.remove("active"),i(null)}},addEdge:function(e,i){var t=h.body.data.nodes._data[e.to].label,n=[e.from];for(var o in h.body.data.edges._data)h.body.data.edges._data[o].to===e.to&&n.push(h.body.data.edges._data[o].from);n.forEach(function(t,e){return n[e]=+t}),n=(n=n.filter(function(t,e){return n.indexOf(+t)==e})).join(","),e.from===e.to?alert("Невозможно замкнуть путь на самом себе"):fetch("/office/steps/edit",{method:"POST",body:JSON.stringify({id:e.to,title:t,parents:n,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){i(e)}).catch(function(t){return console.error(t)})},editEdge:function(e,i){var t=h.body.data.edges._data[e.id],n=[];for(var o in h.body.data.edges._data)h.body.data.edges._data[o].to===e.to&&h.body.data.edges._data[o].to!==t.to&&n.push(h.body.data.edges._data[o].from);n=n.join(",");var r=fetch("/office/steps/edit",{method:"POST",body:JSON.stringify({id:t.to,title:h.body.data.nodes._data[t.to].labels,parents:n,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).catch(function(t){return console.error(t)}),s=h.body.data.nodes._data[e.to].label,a=[e.from];for(var l in h.body.data.edges._data)h.body.data.edges._data[l].to===e.to&&a.push(h.body.data.edges._data[l].from);a=a.join(","),e.from==e.from||"number"!=typeof e.from||"number"!=typeof e.to?i(null):Promise.all([r,fetch("/office/steps/edit",{method:"POST",body:JSON.stringify({id:e.to,title:s,parents:a,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return(new(d(15).KanbanScript)).init(),t.json()}).catch(function(t){return console.error(t)})]).then(function(t){i(e)})},deleteNode:function(e,i){confirm("Вы точно хотит удалить шаг?")?e.nodes.forEach(function(t){fetch("/office/steps/delete",{method:"DELETE",body:JSON.stringify({id:t,_csrf:document.getElementById("csrfToken").value,active:0}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).catch(function(t){return console.error(t)}),i(e)}):i(null)},deleteEdge:function(o,r){confirm("Вы точно хотит удалить путь?")?(o.edges.forEach(function(t){var e=h.body.data.edges._data[t],i=[];for(var n in h.body.data.edges._data)h.body.data.edges._data[n].to===e.to&&e.from!==h.body.data.edges._data[n].from&&i.push(h.body.data.edges._data[n].from);i=i.join(","),console.log(e,i),r(null),fetch("/office/steps/edit",{method:"POST",body:JSON.stringify({id:e.to,title:h.body.data.nodes._data[e.to].label,parents:i,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return(new(d(15).KanbanScript)).init(),t.json()}).then(function(t){r(o)}).catch(function(t){return console.error(t)})}),r(o)):r(null)}}})).on("selectNode",function(t){var e=h.getNodeAt({x:t.pointer.DOM.x,y:t.pointer.DOM.y});e&&!n.find(function(t){return t===e})&&n.push(e),n.forEach(function(t,e){h.body.nodes[t].selected||n.splice(e,e+1)}),1<n.length?(o.disabled=!1,o.classList.remove("tooltip")):(o.disabled=!0,o.classList.add("tooltip"))});function e(){n.forEach(function(t,e){h.body.nodes[t].selected||n.splice(e,e+1)}),1<n.length?(o.disabled=!1,o.classList.remove("tooltip")):(o.disabled=!0,o.classList.add("tooltip"))}h.on("dragEnd",function(t){h.unselectAll(),e()}),h.on("deselectNode",function(t){return e()})})}var h,i=document.getElementById("vis"),n=[];e(),document.getElementById("reloadVisBtn").addEventListener("click",function(t){e()}),document.getElementById("strictBtn").addEventListener("click",function(t){h.setOptions({layout:{hierarchical:{enabled:t.target.checked}},physics:{enabled:!1}})});var o=document.getElementById("saveStepsVis");document.getElementById("saveStepsVis").addEventListener("click",function(){return function(){var e={};n.forEach(function(t){e[t]=h.body.data.nodes._data[t]}),fetch("/office/pipes/"+location.pathname.split("/")[3],{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],title:document.getElementById("pipeTitle").value,kanban:{title:"",description:"",steps:n},_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){pageTitle.innerText=document.getElementById("pipeTitle").value,(new(d(15).KanbanScript)).init()}).catch(function(t){return console.error(t)})}()}),showVis.addEventListener("click",function(){h.stabilize(),visHolder.classList.remove("d-hide"),showVis.classList.add("d-hide"),e()}),hideVis.addEventListener("click",function(){showVis.classList.remove("d-hide"),visHolder.classList.add("d-hide")}),"full"==s&&document.getElementById("deleteStepsVis").addEventListener("click",function(){if(confirm("Это действие удалит все шаги и структуру, вы уверены?")){for(var t in h.body.data.nodes._data)fetch("/office/steps/delete",{method:"DELETE",body:JSON.stringify({id:t,_csrf:document.getElementById("csrfToken").value,active:0}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).catch(function(t){return console.error(t)});fetch("/office/pipes/clearKanbans",{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){console.log("clear done"),document.getElementById("kanbanList").innerHTML="",e()})}}),document.getElementById("visFullScreen").onclick=function(t){i.classList.add("full-screen"),e(),document.getElementById("exitFullScreen").classList.remove("d-hide"),document.getElementById("reloadVisBtn").classList.add("full-screen"),document.getElementById("strictBtnHolder").classList.add("full-screen"),document.getElementById("saveStepsVis").classList.add("full-screen")},document.getElementById("exitFullScreen").onclick=function(t){i.classList.remove("full-screen"),e(),t.target.classList.add("d-hide"),document.getElementById("reloadVisBtn").classList.remove("full-screen"),document.getElementById("strictBtnHolder").classList.remove("full-screen"),document.getElementById("saveStepsVis").classList.remove("full-screen")}}).catch(function(t){return console.error(t)})}},function(t,e,o){"use strict";o.r(e),function(t){var e,i,n=o(0),Mr=o.n(n);e=void 0,i=function(){return o={},n.m=i=[function(t,e,i){e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){e.__esModule=!0;var n,o=i(169),r=(n=o)&&n.__esModule?n:{default:n};function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,r.default)(t,n.key,n)}}e.default=function(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}},function(t,l,e){function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e,i,n){var o=!1;!0===n&&(o=null===e[i]&&void 0!==t[i]),o?delete t[i]:t[i]=e[i]}var h=i(e(77)),u=i(e(29)),n=i(e(8)),c=i(e(6)),o=e(9),r=e(157);l.isNumber=function(t){return t instanceof Number||"number"==typeof t},l.recursiveDOMDelete=function(t){if(t)for(;!0===t.hasChildNodes();)l.recursiveDOMDelete(t.firstChild),t.removeChild(t.firstChild)},l.giveRange=function(t,e,i,n){if(e==t)return.5;var o=1/(e-t);return Math.max(0,(n-t)*o)},l.isString=function(t){return t instanceof String||"string"==typeof t},l.isDate=function(t){if(t instanceof Date)return!0;if(l.isString(t)){if(a.exec(t))return!0;if(!isNaN(Date.parse(t)))return!0}return!1},l.randomUUID=function(){return r.v4()},l.assignAllKeys=function(t,e){for(var i in t)t.hasOwnProperty(i)&&"object"!==(0,c.default)(t[i])&&(t[i]=e)},l.fillIfDefined=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];for(var n in t)void 0!==e[n]&&(null===e[n]||"object"!==(0,c.default)(e[n])?s(t,e,n,i):"object"===(0,c.default)(t[n])&&l.fillIfDefined(t[n],e[n],i))},l.extend=function(t,e){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)n.hasOwnProperty(o)&&(t[o]=n[o])}return t},l.selectiveExtend=function(t,e,i){if(!Array.isArray(t))throw new Error("Array with property names expected as first argument");for(var n=2;n<arguments.length;n++)for(var o=arguments[n],r=0;r<t.length;r++){var s=t[r];o&&o.hasOwnProperty(s)&&(e[s]=o[s])}return e},l.selectiveDeepExtend=function(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(Array.isArray(i))throw new TypeError("Arrays are not supported by deepExtend");for(var o=0;o<t.length;o++){var r=t[o];if(i.hasOwnProperty(r))if(i[r]&&i[r].constructor===Object)void 0===e[r]&&(e[r]={}),e[r].constructor===Object?l.deepExtend(e[r],i[r],!1,n):s(e,i,r,n);else{if(Array.isArray(i[r]))throw new TypeError("Arrays are not supported by deepExtend");s(e,i,r,n)}}return e},l.selectiveNotDeepExtend=function(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(Array.isArray(i))throw new TypeError("Arrays are not supported by deepExtend");for(var o in i)if(i.hasOwnProperty(o)&&-1===t.indexOf(o))if(i[o]&&i[o].constructor===Object)void 0===e[o]&&(e[o]={}),e[o].constructor===Object?l.deepExtend(e[o],i[o]):s(e,i,o,n);else if(Array.isArray(i[o])){e[o]=[];for(var r=0;r<i[o].length;r++)e[o].push(i[o][r])}else s(e,i,o,n);return e},l.deepExtend=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];for(var o in e)if(e.hasOwnProperty(o)||!0===i)if(e[o]&&e[o].constructor===Object)void 0===t[o]&&(t[o]={}),t[o].constructor===Object?l.deepExtend(t[o],e[o],i):s(t,e,o,n);else if(Array.isArray(e[o])){t[o]=[];for(var r=0;r<e[o].length;r++)t[o].push(e[o][r])}else s(t,e,o,n);return t},l.equalArray=function(t,e){if(t.length!=e.length)return!1;for(var i=0,n=t.length;i<n;i++)if(t[i]!=e[i])return!1;return!0},l.convert=function(t,e){var i;if(void 0!==t){if(null===t)return null;if(!e)return t;if("string"!=typeof e&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return Boolean(t);case"number":case"Number":return l.isString(t)&&!isNaN(Date.parse(t))?o(t).valueOf():Number(t.valueOf());case"string":case"String":return String(t);case"Date":if(l.isNumber(t))return new Date(t);if(t instanceof Date)return new Date(t.valueOf());if(o.isMoment(t))return new Date(t.valueOf());if(l.isString(t))return(i=a.exec(t))?new Date(Number(i[1])):o(new Date(t)).toDate();throw new Error("Cannot convert object of type "+l.getType(t)+" to type Date");case"Moment":if(l.isNumber(t))return o(t);if(t instanceof Date)return o(t.valueOf());if(o.isMoment(t))return o(t);if(l.isString(t))return i=a.exec(t),o(i?Number(i[1]):t);throw new Error("Cannot convert object of type "+l.getType(t)+" to type Date");case"ISODate":if(l.isNumber(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(o.isMoment(t))return t.toDate().toISOString();if(l.isString(t))return(i=a.exec(t))?new Date(Number(i[1])).toISOString():o(t).format();throw new Error("Cannot convert object of type "+l.getType(t)+" to type ISODate");case"ASPDate":if(l.isNumber(t))return"/Date("+t+")/";if(t instanceof Date)return"/Date("+t.valueOf()+")/";if(l.isString(t))return"/Date("+((i=a.exec(t))?new Date(Number(i[1])).valueOf():new Date(t).valueOf())+")/";throw new Error("Cannot convert object of type "+l.getType(t)+" to type ASPDate");default:throw new Error('Unknown type "'+e+'"')}}};var a=/^\/?Date\((\-?\d+)/i;l.getType=function(t){var e=void 0===t?"undefined":(0,c.default)(t);return"object"==e?null===t?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":Array.isArray(t)?"Array":t instanceof Date?"Date":"Object":"number"==e?"Number":"boolean"==e?"Boolean":"string"==e?"String":void 0===e?"undefined":e},l.copyAndExtendArray=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(t[n]);return i.push(e),i},l.copyArray=function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e},l.getAbsoluteLeft=function(t){return t.getBoundingClientRect().left},l.getAbsoluteRight=function(t){return t.getBoundingClientRect().right},l.getAbsoluteTop=function(t){return t.getBoundingClientRect().top},l.addClassName=function(t,e){var i=t.className.split(" "),n=e.split(" ");i=i.concat(n.filter(function(t){return i.indexOf(t)<0})),t.className=i.join(" ")},l.removeClassName=function(t,e){var i=t.className.split(" "),n=e.split(" ");i=i.filter(function(t){return n.indexOf(t)<0}),t.className=i.join(" ")},l.forEach=function(t,e){var i,n;if(Array.isArray(t))for(i=0,n=t.length;i<n;i++)e(t[i],i,t);else for(i in t)t.hasOwnProperty(i)&&e(t[i],i,t)},l.toArray=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e},l.updateProperty=function(t,e,i){return t[e]!==i&&(t[e]=i,!0)},l.throttle=function(t){var e=!1;return function(){e||(e=!0,requestAnimationFrame(function(){e=!1,t()}))}},l.addEventListener=function(t,e,i,n){t.addEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&0<=navigator.userAgent.indexOf("Firefox")&&(e="DOMMouseScroll"),t.addEventListener(e,i,n)):t.attachEvent("on"+e,i)},l.removeEventListener=function(t,e,i,n){t.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&0<=navigator.userAgent.indexOf("Firefox")&&(e="DOMMouseScroll"),t.removeEventListener(e,i,n)):t.detachEvent("on"+e,i)},l.preventDefault=function(t){(t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1},l.getTarget=function(t){var e;return(t=t||window.event).target?e=t.target:t.target&&(e=t.target),null!=e.nodeType&&3==e.nodeType&&(e=e.parentNode),e},l.hasParent=function(t,e){for(var i=t;i;){if(i===e)return!0;i=i.parentNode}return!1},l.option={},l.option.asBoolean=function(t,e){return"function"==typeof t&&(t=t()),null!=t?0!=t:e||null},l.option.asNumber=function(t,e){return"function"==typeof t&&(t=t()),null!=t?Number(t)||e||null:e||null},l.option.asString=function(t,e){return"function"==typeof t&&(t=t()),null!=t?String(t):e||null},l.option.asSize=function(t,e){return"function"==typeof t&&(t=t()),l.isString(t)?t:l.isNumber(t)?t+"px":e||null},l.option.asElement=function(t,e){return"function"==typeof t&&(t=t()),t||e||null},l.hexToRGB=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,n){return e+e+i+i+n+n});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},l.overrideOpacity=function(t,e){var i;return-1!=t.indexOf("rgba")?t:-1!=t.indexOf("rgb")?"rgba("+(i=t.substr(t.indexOf("(")+1).replace(")","").split(","))[0]+","+i[1]+","+i[2]+","+e+")":null==(i=l.hexToRGB(t))?t:"rgba("+i.r+","+i.g+","+i.b+","+e+")"},l.RGBToHex=function(t,e,i){return"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},l.parseColor=function(t){var e;if(!0===l.isString(t)){if(!0===l.isValidRGB(t)){var i=t.substr(4).substr(0,t.length-5).split(",").map(function(t){return parseInt(t)});t=l.RGBToHex(i[0],i[1],i[2])}if(!0===l.isValidHex(t)){var n=l.hexToHSV(t),o={h:n.h,s:.8*n.s,v:Math.min(1,1.02*n.v)},r={h:n.h,s:Math.min(1,1.25*n.s),v:.8*n.v},s=l.HSVToHex(r.h,r.s,r.v),a=l.HSVToHex(o.h,o.s,o.v);e={background:t,border:s,highlight:{background:a,border:s},hover:{background:a,border:s}}}else e={background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else(e={}).background=t.background||void 0,e.border=t.border||void 0,l.isString(t.highlight)?e.highlight={border:t.highlight,background:t.highlight}:(e.highlight={},e.highlight.background=t.highlight&&t.highlight.background||void 0,e.highlight.border=t.highlight&&t.highlight.border||void 0),l.isString(t.hover)?e.hover={border:t.hover,background:t.hover}:(e.hover={},e.hover.background=t.hover&&t.hover.background||void 0,e.hover.border=t.hover&&t.hover.border||void 0);return e},l.RGBToHSV=function(t,e,i){t/=255,e/=255,i/=255;var n=Math.min(t,Math.min(e,i)),o=Math.max(t,Math.max(e,i));return n==o?{h:0,s:0,v:n}:{h:60*((t==n?3:i==n?1:5)-(t==n?e-i:i==n?t-e:i-t)/(o-n))/360,s:(o-n)/o,v:o}};var d=function(t){var o={};return t.split(";").forEach(function(t){if(""!=t.trim()){var e=t.split(":"),i=e[0].trim(),n=e[1].trim();o[i]=n}}),o},f=function(e){return(0,n.default)(e).map(function(t){return t+": "+e[t]}).join("; ")};l.addCssText=function(t,e){var i=d(t.style.cssText),n=d(e),o=l.extend(i,n);t.style.cssText=f(o)},l.removeCssText=function(t,e){var i=d(t.style.cssText),n=d(e);for(var o in n)n.hasOwnProperty(o)&&delete i[o];t.style.cssText=f(i)},l.HSVToRGB=function(t,e,i){var n,o,r,s=Math.floor(6*t),a=6*t-s,l=i*(1-e),d=i*(1-a*e),h=i*(1-(1-a)*e);switch(s%6){case 0:n=i,o=h,r=l;break;case 1:n=d,o=i,r=l;break;case 2:n=l,o=i,r=h;break;case 3:n=l,o=d,r=i;break;case 4:n=h,o=l,r=i;break;case 5:n=i,o=l,r=d}return{r:Math.floor(255*n),g:Math.floor(255*o),b:Math.floor(255*r)}},l.HSVToHex=function(t,e,i){var n=l.HSVToRGB(t,e,i);return l.RGBToHex(n.r,n.g,n.b)},l.hexToHSV=function(t){var e=l.hexToRGB(t);return l.RGBToHSV(e.r,e.g,e.b)},l.isValidHex=function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},l.isValidRGB=function(t){return t=t.replace(" ",""),/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(t)},l.isValidRGBA=function(t){return t=t.replace(" ",""),/rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(.{1,3})\)/i.test(t)},l.selectiveBridgeObject=function(t,e){if(null===e||"object"!==(void 0===e?"undefined":(0,c.default)(e)))return null;for(var i=(0,u.default)(e),n=0;n<t.length;n++)e.hasOwnProperty(t[n])&&"object"==(0,c.default)(e[t[n]])&&(i[t[n]]=l.bridgeObject(e[t[n]]));return i},l.bridgeObject=function(t){if(null===t||"object"!==(void 0===t?"undefined":(0,c.default)(t)))return null;var e=(0,u.default)(t);if(t instanceof Element)e=t;else for(var i in e=(0,u.default)(t),t)t.hasOwnProperty(i)&&"object"==(0,c.default)(t[i])&&(e[i]=l.bridgeObject(t[i]));return e},l.insertSort=function(t,e){for(var i=0;i<t.length;i++){for(var n=t[i],o=i;0<o&&e(n,t[o-1])<0;o--)t[o]=t[o-1];t[o]=n}return t},l.mergeOptions=function(t,e,i){function n(t){return null!=t}function s(t){return null!==t&&"object"===(void 0===t?"undefined":(0,c.default)(t))}var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!s(t))throw new Error("Parameter mergeTarget must be an object");if(!s(e))throw new Error("Parameter options must be an object");if(!n(i))throw new Error("Parameter option must have a value");if(!s(o))throw new Error("Parameter globalOptions must be an object");var r=e[i],a=s(o)&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return 0;return 1}(o)?o[i]:void 0,l=a?a.enabled:void 0;if(void 0!==r){if("boolean"==typeof r)return s(t[i])||(t[i]={}),void(t[i].enabled=r);if(null===r&&!s(t[i])){if(!n(a))return;t[i]=(0,u.default)(a)}if(s(r)){var d=!0;void 0!==r.enabled?d=r.enabled:void 0!==l&&(d=a.enabled),function(t,e,i){s(t[i])||(t[i]={});var n=e[i],o=t[i];for(var r in n)n.hasOwnProperty(r)&&(o[r]=n[r])}(t,e,i),t[i].enabled=d}}},l.binarySearchCustom=function(t,e,i,n){for(var o=0,r=0,s=t.length-1;r<=s&&o<1e4;){var a=Math.floor((r+s)/2),l=t[a],d=e(void 0===n?l[i]:l[i][n]);if(0==d)return a;-1==d?r=a+1:s=a-1,o++}return-1},l.binarySearchValue=function(t,e,i,n,o){var r,s,a,l,d=0,h=0,u=t.length-1;for(o=null!=o?o:function(t,e){return t==e?0:t<e?-1:1};h<=u&&d<1e4;){if(l=Math.floor(.5*(u+h)),r=t[Math.max(0,l-1)][i],s=t[l][i],a=t[Math.min(t.length-1,l+1)][i],0==o(s,e))return l;if(o(r,e)<0&&0<o(s,e))return"before"==n?Math.max(0,l-1):l;if(o(s,e)<0&&0<o(a,e))return"before"==n?l:Math.min(t.length-1,l+1);o(s,e)<0?h=l+1:u=l-1,d++}return-1},l.easingFunctions={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}},l.getScrollBarWidth=function(){var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var n=t.offsetWidth;return i==n&&(n=e.clientWidth),document.body.removeChild(e),i-n},l.topMost=function(t,e){var i=void 0;Array.isArray(e)||(e=[e]);var n=!0,o=!1,r=void 0;try{for(var s,a=(0,h.default)(t);!(n=(s=a.next()).done);n=!0){var l=s.value;if(l){i=l[e[0]];for(var d=1;d<e.length;d++)i=i&&i[e[d]];if(void 0!==i)break}}}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}},function(t,e,i){t.exports={default:i(194),__esModule:!0}},function(t,e,i){e.__esModule=!0;var n,o=i(6),r=(n=o)&&n.__esModule?n:{default:n};e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(i(196)),r=n(i(29)),s=n(i(6));e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,s.default)(e)));t.prototype=(0,r.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(i(142)),r=n(i(144)),s="function"==typeof r.default&&"symbol"==Mr()(o.default)?function(t){return Mr()(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":Mr()(t)};e.default="function"==typeof r.default&&"symbol"===s(o.default)?function(t){return void 0===t?"undefined":s(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":s(t)}},function(t,e){var i=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=i)},function(t,e,i){t.exports={default:i(140),__esModule:!0}},function(t,e,i){t.exports="undefined"!=typeof window&&window.moment||i(154)},function(t,e,i){if("undefined"!=typeof window){var n=i(175),o=window.Hammer||i(176);t.exports=n(o,{preventDefault:"mouse"})}else t.exports=function(){return function(){function t(){}return{on:t,off:t,destroy:t,emit:t,get:function(){return{set:t}}}}()}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(t&&!Array.isArray(t)&&(e=t,t=null),this._options=e||{},this._data={},this.length=0,this._fieldId=this._options.fieldId||"id",this._type={},this._options.type)for(var i=(0,g.default)(this._options.type),n=0,o=i.length;n<o;n++){var r=i[n],s=this._options.type[r];this._type[r]="Date"==s||"ISODate"==s||"ASPDate"==s?"Date":s}this._subscribers={},t&&this.add(t),this.setOptions(e)}var l=n(i(19)),c=n(i(6)),g=n(i(8)),y=i(2),r=i(43);o.prototype.setOptions=function(t){t&&void 0!==t.queue&&(!1===t.queue?this._queue&&(this._queue.destroy(),delete this._queue):(this._queue||(this._queue=r.extend(this,{replace:["add","update","remove"]})),"object"===(0,c.default)(t.queue)&&this._queue.setOptions(t.queue)))},o.prototype.on=function(t,e){var i=this._subscribers[t];i||(i=[],this._subscribers[t]=i),i.push({callback:e})},o.prototype.off=function(t,e){var i=this._subscribers[t];i&&(this._subscribers[t]=i.filter(function(t){return t.callback!=e}))},o.prototype._trigger=function(t,e,i){if("*"==t)throw new Error("Cannot trigger event *");var n=[];t in this._subscribers&&(n=n.concat(this._subscribers[t])),"*"in this._subscribers&&(n=n.concat(this._subscribers["*"]));for(var o=0,r=n.length;o<r;o++){var s=n[o];s.callback&&s.callback(t,e,i||null)}},o.prototype.add=function(t,e){var i,n=[];if(Array.isArray(t))for(var o=0,r=t.length;o<r;o++)i=this._addItem(t[o]),n.push(i);else{if(!t||"object"!==(void 0===t?"undefined":(0,c.default)(t)))throw new Error("Unknown dataType");i=this._addItem(t),n.push(i)}return n.length&&this._trigger("add",{items:n},e),n},o.prototype.update=function(t,e){function i(t){var e=t[l];if(a._data[e]){var i=y.extend({},a._data[e]);e=a._updateItem(t),o.push(e),s.push(t),r.push(i)}else e=a._addItem(t),n.push(e)}var n=[],o=[],r=[],s=[],a=this,l=a._fieldId;if(Array.isArray(t))for(var d=0,h=t.length;d<h;d++)t[d]&&"object"===(0,c.default)(t[d])?i(t[d]):console.warn("Ignoring input item, which is not an object at index "+d);else{if(!t||"object"!==(void 0===t?"undefined":(0,c.default)(t)))throw new Error("Unknown dataType");i(t)}if(n.length&&this._trigger("add",{items:n},e),o.length){var u={items:o,oldData:r,data:s};this._trigger("update",u,e)}return n.concat(o)},o.prototype.get=function(t){var e,i,n,o,r=y.getType(t);o=(n="String"==r||"Number"==r?(e=t,arguments[1]):"Array"==r?(i=t,arguments[1]):t)&&n.returnType?-1==["Array","Object"].indexOf(n.returnType)?"Array":n.returnType:"Array";var s,a,l,d,h,u=n&&n.type||this._options.type,c=n&&n.filter,f=[];if(null!=e)(s=this._getItem(e,u))&&c&&!c(s)&&(s=null);else if(null!=i)for(d=0,h=i.length;d<h;d++)s=this._getItem(i[d],u),c&&!c(s)||f.push(s);else for(h=(a=(d=0,g.default)(this._data)).length;d<h;d++)l=a[d],s=this._getItem(l,u),c&&!c(s)||f.push(s);if(n&&n.order&&null==e&&this._sort(f,n.order),n&&n.fields){var p=n.fields;if(null!=e)s=this._filterFields(s,p);else for(d=0,h=f.length;d<h;d++)f[d]=this._filterFields(f[d],p)}if("Object"!=o)return null!=e?s:f;var m,v={};for(d=0,h=f.length;d<h;d++)v[(m=f[d]).id]=m;return v},o.prototype.getIds=function(t){var e,i,n,o,r,s=this._data,a=t&&t.filter,l=t&&t.order,d=t&&t.type||this._options.type,h=(0,g.default)(s),u=[];if(a)if(l){for(r=[],e=0,i=h.length;e<i;e++)n=h[e],a(o=this._getItem(n,d))&&r.push(o);for(this._sort(r,l),e=0,i=r.length;e<i;e++)u.push(r[e][this._fieldId])}else for(e=0,i=h.length;e<i;e++)n=h[e],a(o=this._getItem(n,d))&&u.push(o[this._fieldId]);else if(l){for(r=[],e=0,i=h.length;e<i;e++)n=h[e],r.push(s[n]);for(this._sort(r,l),e=0,i=r.length;e<i;e++)u.push(r[e][this._fieldId])}else for(e=0,i=h.length;e<i;e++)o=s[n=h[e]],u.push(o[this._fieldId]);return u},o.prototype.getDataSet=function(){return this},o.prototype.forEach=function(t,e){var i,n,o,r,s=e&&e.filter,a=e&&e.type||this._options.type,l=this._data,d=(0,g.default)(l);if(e&&e.order){var h=this.get(e);for(i=0,n=h.length;i<n;i++)t(o=h[i],r=o[this._fieldId])}else for(i=0,n=d.length;i<n;i++)r=d[i],o=this._getItem(r,a),s&&!s(o)||t(o,r)},o.prototype.map=function(t,e){var i,n,o,r,s=e&&e.filter,a=e&&e.type||this._options.type,l=[],d=this._data,h=(0,g.default)(d);for(i=0,n=h.length;i<n;i++)o=h[i],r=this._getItem(o,a),s&&!s(r)||l.push(t(r,o));return e&&e.order&&this._sort(l,e.order),l},o.prototype._filterFields=function(t,e){if(!t)return t;var i,n,o={},r=(0,g.default)(t),s=r.length;if(Array.isArray(e))for(i=0;i<s;i++)n=r[i],-1!=e.indexOf(n)&&(o[n]=t[n]);else for(i=0;i<s;i++)n=r[i],e.hasOwnProperty(n)&&(o[e[n]]=t[n]);return o},o.prototype._sort=function(t,e){if(y.isString(e)){var o=e;t.sort(function(t,e){var i=t[o],n=e[o];return n<i?1:i<n?-1:0})}else{if("function"!=typeof e)throw new TypeError("Order must be a function or a string");t.sort(e)}},o.prototype.remove=function(t,e){var i,n,o,r,s,a=[],l=[];for(i=0,n=(s=Array.isArray(t)?t:[t]).length;i<n;i++)(r=this._remove(s[i]))&&null!=(o=r[this._fieldId])&&(a.push(o),l.push(r));return a.length&&this._trigger("remove",{items:a,oldData:l},e),a},o.prototype._remove=function(t){var e,i;return y.isNumber(t)||y.isString(t)?i=t:t&&"object"===(void 0===t?"undefined":(0,c.default)(t))&&(i=t[this._fieldId]),void 0!==i&&this._data[i]?(e=this._data[i],delete this._data[i],this.length--,e):null},o.prototype.clear=function(t){var e,i,n=(0,g.default)(this._data),o=[];for(e=0,i=n.length;e<i;e++)o.push(this._data[n[e]]);return this._data={},this.length=0,this._trigger("remove",{items:n,oldData:o},t),n},o.prototype.max=function(t){var e,i,n=this._data,o=(0,g.default)(n),r=null,s=null;for(e=0,i=o.length;e<i;e++){var a=n[o[e]],l=a[t];null!=l&&(!r||s<l)&&(r=a,s=l)}return r},o.prototype.min=function(t){var e,i,n=this._data,o=(0,g.default)(n),r=null,s=null;for(e=0,i=o.length;e<i;e++){var a=n[o[e]],l=a[t];null!=l&&(!r||l<s)&&(r=a,s=l)}return r},o.prototype.distinct=function(t){var e,i,n,o=this._data,r=(0,g.default)(o),s=[],a=this._options.type&&this._options.type[t]||null,l=0;for(e=0,n=r.length;e<n;e++){var d=o[r[e]][t],h=!1;for(i=0;i<l;i++)if(s[i]==d){h=!0;break}h||void 0===d||(s[l]=d,l++)}if(a)for(e=0,n=s.length;e<n;e++)s[e]=y.convert(s[e],a);return s},o.prototype._addItem=function(t){var e=t[this._fieldId];if(null!=e){if(this._data[e])throw new Error("Cannot add item: item with id "+e+" already exists")}else e=y.randomUUID(),t[this._fieldId]=e;var i,n,o={},r=(0,g.default)(t);for(i=0,n=r.length;i<n;i++){var s=r[i],a=this._type[s];o[s]=y.convert(t[s],a)}return this._data[e]=o,this.length++,e},o.prototype._getItem=function(t,e){var i,n,o,r,s=this._data[t];if(!s)return null;var a={},l=(0,g.default)(s);if(e)for(o=0,r=l.length;o<r;o++)n=s[i=l[o]],a[i]=y.convert(n,e[i]);else for(o=0,r=l.length;o<r;o++)n=s[i=l[o]],a[i]=n;return a[this._fieldId]||(a[this._fieldId]=s.id),a},o.prototype._updateItem=function(t){var e=t[this._fieldId];if(null==e)throw new Error("Cannot update item: item has no id (item: "+(0,l.default)(t)+")");var i=this._data[e];if(!i)throw new Error("Cannot update item: no item with id "+e+" found");for(var n=(0,g.default)(t),o=0,r=n.length;o<r;o++){var s=n[o],a=this._type[s];i[s]=y.convert(t[s],a)}return e},t.exports=o},function(t,e,i){function n(t,e){this._data=null,this._ids={},this.length=0,this._options=e||{},this._fieldId="id",this._subscribers={};var i=this;this.listener=function(){i._onEvent.apply(i,arguments)},this.setData(t)}var o,r=i(8),d=(o=r)&&o.__esModule?o:{default:o},l=i(2),s=i(11);n.prototype.setData=function(t){var e,i,n,o,r;if(this._data){for(this._data.off&&this._data.off("*",this.listener),r=[],n=0,o=(e=this._data.getIds({filter:this._options&&this._options.filter})).length;n<o;n++)r.push(this._data._data[e[n]]);this._ids={},this.length=0,this._trigger("remove",{items:e,oldData:r})}if(this._data=t,this._data){for(this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||"id",n=0,o=(e=this._data.getIds({filter:this._options&&this._options.filter})).length;n<o;n++)i=e[n],this._ids[i]=!0;this.length=e.length,this._trigger("add",{items:e}),this._data.on&&this._data.on("*",this.listener)}},n.prototype.refresh=function(){var t,e,i,n=this._data.getIds({filter:this._options&&this._options.filter}),o=(0,d.default)(this._ids),r={},s=[],a=[],l=[];for(e=0,i=n.length;e<i;e++)r[t=n[e]]=!0,this._ids[t]||(s.push(t),this._ids[t]=!0);for(e=0,i=o.length;e<i;e++)r[t=o[e]]||(a.push(t),l.push(this._data._data[t]),delete this._ids[t]);this.length+=s.length-a.length,s.length&&this._trigger("add",{items:s}),a.length&&this._trigger("remove",{items:a,oldData:l})},n.prototype.get=function(t){var e,i,n,o=this,r=l.getType(t);n="String"==r||"Number"==r||"Array"==r?(e=t,i=arguments[1],arguments[2]):(i=t,arguments[1]);var s=l.extend({},this._options,i);this._options.filter&&i&&i.filter&&(s.filter=function(t){return o._options.filter(t)&&i.filter(t)});var a=[];return null!=e&&a.push(e),a.push(s),a.push(n),this._data&&this._data.get.apply(this._data,a)},n.prototype.getIds=function(e){var t;if(this._data){var i,n=this._options.filter;i=e&&e.filter?n?function(t){return n(t)&&e.filter(t)}:e.filter:n,t=this._data.getIds({filter:i,order:e&&e.order})}else t=[];return t},n.prototype.map=function(t,e){var i=[];if(this._data){var n,o=this._options.filter;n=e&&e.filter?o?function(t){return o(t)&&e.filter(t)}:e.filter:o,i=this._data.map(t,{filter:n,order:e&&e.order})}else i=[];return i},n.prototype.getDataSet=function(){for(var t=this;t instanceof n;)t=t._data;return t||null},n.prototype._onEvent=function(t,e,i){var n,o,r,s=e&&e.items,a=[],l=[],d=[],h=[],u=[],c=[];if(s&&this._data){switch(t){case"add":for(n=0,o=s.length;n<o;n++)r=s[n],this.get(r)&&(this._ids[r]=!0,a.push(r));break;case"update":for(n=0,o=s.length;n<o;n++)r=s[n],this.get(r)?this._ids[r]?(l.push(r),u.push(e.data[n]),h.push(e.oldData[n])):(this._ids[r]=!0,a.push(r)):this._ids[r]&&(delete this._ids[r],d.push(r),c.push(e.oldData[n]));break;case"remove":for(n=0,o=s.length;n<o;n++)r=s[n],this._ids[r]&&(delete this._ids[r],d.push(r),c.push(e.oldData[n]))}this.length+=a.length-d.length,a.length&&this._trigger("add",{items:a},i),l.length&&this._trigger("update",{items:l,oldData:h,data:u},i),d.length&&this._trigger("remove",{items:d,oldData:c},i)}},n.prototype.on=s.prototype.on,n.prototype.off=s.prototype.off,n.prototype._trigger=s.prototype._trigger,n.prototype.subscribe=n.prototype.on,n.prototype.unsubscribe=n.prototype.off,t.exports=n},function(t,e,i){var n=i(57)("wks"),o=i(40),r=i(18).Symbol,s="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=s&&r[t]||(s?r:o)("Symbol."+t))}).store=n},function(t,d,e){d.prepareElements=function(t){for(var e in t)t.hasOwnProperty(e)&&(t[e].redundant=t[e].used,t[e].used=[])},d.cleanupElements=function(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e].redundant){for(var i=0;i<t[e].redundant.length;i++)t[e].redundant[i].parentNode.removeChild(t[e].redundant[i]);t[e].redundant=[]}},d.resetElements=function(t){d.prepareElements(t),d.cleanupElements(t),d.prepareElements(t)},d.getSVGElement=function(t,e,i){var n;return e.hasOwnProperty(t)?0<e[t].redundant.length?(n=e[t].redundant[0],e[t].redundant.shift()):(n=document.createElementNS("http://www.w3.org/2000/svg",t),i.appendChild(n)):(n=document.createElementNS("http://www.w3.org/2000/svg",t),e[t]={used:[],redundant:[]},i.appendChild(n)),e[t].used.push(n),n},d.getDOMElement=function(t,e,i,n){var o;return e.hasOwnProperty(t)?0<e[t].redundant.length?(o=e[t].redundant[0],e[t].redundant.shift()):(o=document.createElement(t),void 0!==n?i.insertBefore(o,n):i.appendChild(o)):(o=document.createElement(t),e[t]={used:[],redundant:[]},void 0!==n?i.insertBefore(o,n):i.appendChild(o)),e[t].used.push(o),o},d.drawPoint=function(t,e,i,n,o,r){var s;if("circle"==i.style?((s=d.getSVGElement("circle",n,o)).setAttributeNS(null,"cx",t),s.setAttributeNS(null,"cy",e),s.setAttributeNS(null,"r",.5*i.size)):((s=d.getSVGElement("rect",n,o)).setAttributeNS(null,"x",t-.5*i.size),s.setAttributeNS(null,"y",e-.5*i.size),s.setAttributeNS(null,"width",i.size),s.setAttributeNS(null,"height",i.size)),void 0!==i.styles&&s.setAttributeNS(null,"style",i.styles),s.setAttributeNS(null,"class",i.className+" vis-point"),r){var a=d.getSVGElement("text",n,o);r.xOffset&&(t+=r.xOffset),r.yOffset&&(e+=r.yOffset),r.content&&(a.textContent=r.content),r.className&&a.setAttributeNS(null,"class",r.className+" vis-label"),a.setAttributeNS(null,"x",t),a.setAttributeNS(null,"y",e)}return s},d.drawBar=function(t,e,i,n,o,r,s,a){if(0!=n){n<0&&(e-=n*=-1);var l=d.getSVGElement("rect",r,s);l.setAttributeNS(null,"x",t-.5*i),l.setAttributeNS(null,"y",e),l.setAttributeNS(null,"width",i),l.setAttributeNS(null,"height",n),l.setAttributeNS(null,"class",o),a&&l.setAttributeNS(null,"style",a)}}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.printStyle=void 0;var o=n(i(19)),r=n(i(6)),d=n(i(8)),s=n(i(0)),a=n(i(1)),f=i(2),h=!1,l=void 0,u="background: #FFeeee; color: #dd0000",c=((0,a.default)(p,null,[{key:"validate",value:function(t,e,i){h=!1;var n=l=e;return void 0!==i&&(n=e[i]),p.parse(t,n,[]),h}},{key:"parse",value:function(t,e,i){for(var n in t)t.hasOwnProperty(n)&&p.check(n,t,e,i)}},{key:"check",value:function(t,e,i,n){if(void 0!==i[t]||void 0!==i.__any__){var o=t,r=!0;void 0===i[t]&&void 0!==i.__any__&&(o="__any__",r="object"===p.getType(e[t]));var s=i[o];r&&void 0!==s.__type__&&(s=s.__type__),p.checkFields(t,e,i,o,s,n)}else p.getSuggestion(t,i,n)}},{key:"checkFields",value:function(e,t,i,n,o,r){function s(t){console.log("%c"+t+p.printLocation(r,e),u)}var a=p.getType(t[e]),l=o[a];void 0!==l?"array"===p.getType(l)&&-1===l.indexOf(t[e])?(s('Invalid option detected in "'+e+'". Allowed values are:'+p.print(l)+' not "'+t[e]+'". '),h=!0):"object"===a&&"__any__"!==n&&(r=f.copyAndExtendArray(r,e),p.parse(t[e],i[n],r)):void 0===o.any&&(s('Invalid type received for "'+e+'". Expected: '+p.print((0,d.default)(o))+". Received ["+a+'] "'+t[e]+'"'),h=!0)}},{key:"getType",value:function(t){var e=void 0===t?"undefined":(0,r.default)(t);return"object"===e?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Array.isArray(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":!0===t._isAMomentObject?"moment":"object":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}},{key:"getSuggestion",value:function(t,e,i){var n,o=p.findInOptions(t,e,i,!1),r=p.findInOptions(t,l,[],!0);n=void 0!==o.indexMatch?" in "+p.printLocation(o.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+o.indexMatch+'"?\n\n':r.distance<=4&&o.distance>r.distance?" in "+p.printLocation(o.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+p.printLocation(r.path,r.closestMatch,""):o.distance<=8?'. Did you mean "'+o.closestMatch+'"?'+p.printLocation(o.path,t):". Did you mean one of these: "+p.print((0,d.default)(e))+p.printLocation(i,t),console.log('%cUnknown option detected: "'+t+'"'+n,u),h=!0}},{key:"findInOptions",value:function(t,e,i,n){var o=3<arguments.length&&void 0!==n&&n,r=1e9,s="",a=[],l=t.toLowerCase(),d=void 0;for(var h in e){var u=void 0;if(void 0!==e[h].__type__&&!0===o){var c=p.findInOptions(t,e[h],f.copyAndExtendArray(i,h));r>c.distance&&(s=c.closestMatch,a=c.path,r=c.distance,d=c.indexMatch)}else-1!==h.toLowerCase().indexOf(l)&&(d=h),(u=p.levenshteinDistance(t,h))<r&&(s=h,a=f.copyArray(i),r=u)}return{closestMatch:s,path:a,distance:r,indexMatch:d}}},{key:"printLocation",value:function(t,e,i){for(var n="\n\n"+(2<arguments.length&&void 0!==i?i:"Problem value found at: \n")+"options = {\n",o=0;o<t.length;o++){for(var r=0;r<o+1;r++)n+="  ";n+=t[o]+": {\n"}for(var s=0;s<t.length+1;s++)n+="  ";n+=e+"\n";for(var a=0;a<t.length+1;a++){for(var l=0;l<t.length-a;l++)n+="  ";n+="}\n"}return n+"\n\n"}},{key:"print",value:function(t){return(0,o.default)(t).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;var i,n,o=[];for(i=0;i<=e.length;i++)o[i]=[i];for(n=0;n<=t.length;n++)o[0][n]=n;for(i=1;i<=e.length;i++)for(n=1;n<=t.length;n++)e.charAt(i-1)==t.charAt(n-1)?o[i][n]=o[i-1][n-1]:o[i][n]=Math.min(o[i-1][n-1]+1,Math.min(o[i][n-1]+1,o[i-1][n]+1));return o[e.length][t.length]}}]),p);function p(){(0,s.default)(this,p)}e.default=c,e.printStyle=u},function(t,e,i){function n(t,e){this.options=null,this.props=null}var o=i(2);n.prototype.setOptions=function(t){t&&o.extend(this.options,t)},n.prototype.redraw=function(){return!1},n.prototype.destroy=function(){},n.prototype._isResized=function(){var t=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,t},t.exports=n},function(t,e,i){function m(t,e,i){var n,o,r,s=t&m.F,a=t&m.G,l=t&m.S,d=t&m.P,h=t&m.B,u=t&m.W,c=a?g:g[e]||(g[e]={}),f=c.prototype,p=a?v:l?v[e]:(v[e]||{}).prototype;for(n in a&&(i=e),i)(o=!s&&p&&void 0!==p[n])&&n in c||(r=o?p[n]:i[n],c[n]=a&&"function"!=typeof p[n]?i[n]:h&&o?y(r,v):u&&p[n]==r?function(n){function t(t,e,i){if(this instanceof n){switch(arguments.length){case 0:return new n;case 1:return new n(t);case 2:return new n(t,e)}return new n(t,e,i)}return n.apply(this,arguments)}return t.prototype=n.prototype,t}(r):d&&"function"==typeof r?y(Function.call,r):r,d&&((c.virtual||(c.virtual={}))[n]=r,t&m.R&&f&&!f[n]&&b(f,n,r)))}var v=i(18),g=i(7),y=i(80),b=i(26);m.F=1,m.G=2,m.S=4,m.P=8,m.B=16,m.W=32,m.U=64,m.R=128,t.exports=m},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){t.exports={default:i(160),__esModule:!0}},function(t,e,i){var n=i(27),o=i(81),r=i(53),s=Object.defineProperty;e.f=i(21)?Object.defineProperty:function(t,e,i){if(n(t),e=r(e,!0),n(i),o)try{return s(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){t.exports=!i(28)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(6)),r=n(i(0)),s=((0,n(i(1)).default)(a,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&("object"==(0,o.default)(this.options.margin)?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,e){var i=this.options.borderWidth;return this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i}},{key:"enableShadow",value:function(t,e){e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,e){if(!1!==e.borderDashes)if(void 0!==t.setLineDash){var i=e.borderDashes;!0===i&&(i=[5,15]),t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,e){!1!==e.borderDashes&&(void 0!==t.setLineDash?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1))}},{key:"needsRefresh",value:function(t,e){return!0===this.refreshNeeded?!(this.refreshNeeded=!1):void 0===this.width||this.labelModule.differentState(t,e)}},{key:"initContextForDraw",value:function(t,e){var i=e.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,i),t.strokeStyle=e.borderColor,t.fillStyle=e.color}},{key:"performStroke",value:function(t,e){var i=e.borderWidth/this.body.view.scale;t.save(),0<i&&(this.enableBorderDashes(t,e),t.stroke(),this.disableBorderDashes(t,e)),t.restore()}},{key:"performFill",value:function(t,e){this.enableShadow(t,e),t.fill(),this.disableShadow(t,e),this.performStroke(t,e)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,e,i,n,o){void 0!==i&&this.resize(i,n,o),this.left=t-this.width/2,this.top=e-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,e,i,n,o){this._updateBoundingBox(t,e,i,n,o)}},{key:"getDimensionsFromLabel",value:function(t,e,i){this.textSize=this.labelModule.getTextSize(t,e,i);var n=this.textSize.width,o=this.textSize.height;return 0===n&&(o=n=14),{width:n,height:o}}}]),a);function a(t,e,i){(0,r.default)(this,a),this.body=e,this.labelModule=i,this.setOptions(t),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}e.default=s},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(23)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"resize",value:function(t,e,i,n){var o=1<arguments.length&&void 0!==e?e:this.selected,r=2<arguments.length&&void 0!==i?i:this.hover,s=3<arguments.length&&void 0!==n?n:{size:this.options.size};if(this.needsRefresh(o,r)){this.labelModule.getTextSize(t,o,r);var a=2*s.size;this.width=a,this.height=a,this.radius=.5*this.width}}},{key:"_drawShape",value:function(t,e,i,n,o,r,s,a){if(this.resize(t,r,s,a),this.left=n-this.width/2,this.top=o-this.height/2,this.initContextForDraw(t,a),t[e](n,o,a.size),this.performFill(t,a),void 0!==this.options.label){this.labelModule.calculateLabelSize(t,r,s,n,o,"hanging");var l=o+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(t,n,l,r,s,"hanging")}this.updateBoundingBox(n,o)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,void 0!==this.options.label&&0<this.labelModule.size.width&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),c);function c(t,e,i){return(0,s.default)(this,c),(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i))}e.default=u},function(t,e,i){var n=i(78),o=i(51);t.exports=function(t){return n(o(t))}},function(t,e,i){var n=i(20),o=i(39);t.exports=i(21)?function(t,e,i){return n.f(t,e,o(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(32);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){t.exports={default:i(138),__esModule:!0}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(i(188)),l=n(i(77));e.default=function(t,e){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=(0,l.default)(t);!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){t.exports={}},function(t,e){t.exports=function(t){return"object"==Mr()(t)?null!==t:"function"==typeof t}},function(t,e,i){var n=i(84),o=i(58);t.exports=Object.keys||function(t){return n(t,o)}},function(t,e,i){function n(t,e,i){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0,this.z=void 0!==i?i:0}n.subtract=function(t,e){var i=new n;return i.x=t.x-e.x,i.y=t.y-e.y,i.z=t.z-e.z,i},n.add=function(t,e){var i=new n;return i.x=t.x+e.x,i.y=t.y+e.y,i.z=t.z+e.z,i},n.avg=function(t,e){return new n((t.x+e.x)/2,(t.y+e.y)/2,(t.z+e.z)/2)},n.crossProduct=function(t,e){var i=new n;return i.x=t.y*e.z-t.z*e.y,i.y=t.z*e.x-t.x*e.z,i.z=t.x*e.y-t.y*e.x,i},n.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.exports=n},function(t,e,i){var n,o,r;o=[],void 0!==(r="function"==typeof(n=function(){function t(t){var e,r=t&&t.preventDefault||!1,i=t&&t.container||window,n={},s={keydown:{},keyup:{}},a={};for(e=97;e<=122;e++){a[String.fromCharCode(e)]={code:e-97+65,shift:!1}}for(e=65;e<=90;e++){a[String.fromCharCode(e)]={code:e,shift:!0}}for(e=0;e<=9;e++){a[""+e]={code:48+e,shift:!1}}for(e=1;e<=12;e++){a["F"+e]={code:111+e,shift:!1}}for(e=0;e<=9;e++){a["num"+e]={code:96+e,shift:!1}}a["num*"]={code:106,shift:!1},a["num+"]={code:107,shift:!1},a["num-"]={code:109,shift:!1},a["num/"]={code:111,shift:!1},a["num."]={code:110,shift:!1},a.left={code:37,shift:!1},a.up={code:38,shift:!1},a.right={code:39,shift:!1},a.down={code:40,shift:!1},a.space={code:32,shift:!1},a.enter={code:13,shift:!1},a.shift={code:16,shift:void 0},a.esc={code:27,shift:!1},a.backspace={code:8,shift:!1},a.tab={code:9,shift:!1},a.ctrl={code:17,shift:!1},a.alt={code:18,shift:!1},a["delete"]={code:46,shift:!1},a.pageup={code:33,shift:!1},a.pagedown={code:34,shift:!1},a["="]={code:187,shift:!1},a["-"]={code:189,shift:!1},a["]"]={code:221,shift:!1},a["["]={code:219,shift:!1};var o=function t(e){d(e,"keydown")},l=function t(e){d(e,"keyup")},d=function t(e,i){if(void 0!==s[i][e.keyCode]){for(var n=s[i][e.keyCode],o=0;o<n.length;o++){void 0===n[o].shift?n[o].fn(e):1==n[o].shift&&1==e.shiftKey?n[o].fn(e):0==n[o].shift&&0==e.shiftKey&&n[o].fn(e)}1==r&&e.preventDefault()}};return n.bind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===a[t])throw new Error("unsupported key: "+t);void 0===s[i][a[t].code]&&(s[i][a[t].code]=[]),s[i][a[t].code].push({fn:e,shift:a[t].shift})},n.bindAll=function(t,e){void 0===e&&(e="keydown");for(var i in a){a.hasOwnProperty(i)&&n.bind(i,t,e)}},n.getKey=function(t){for(var e in a){if(a.hasOwnProperty(e)){if(1==t.shiftKey&&1==a[e].shift&&t.keyCode==a[e].code)return e;if(0==t.shiftKey&&0==a[e].shift&&t.keyCode==a[e].code)return e;if(t.keyCode==a[e].code&&"shift"==e)return e}}return"unknown key, currently not supported"},n.unbind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===a[t])throw new Error("unsupported key: "+t);if(void 0!==e){var n=[],o=s[i][a[t].code];if(void 0!==o)for(var r=0;r<o.length;r++){o[r].fn==e&&o[r].shift==a[t].shift||n.push(s[i][a[t].code][r])}s[i][a[t].code]=n}else s[i][a[t].code]=[]},n.reset=function(){s={keydown:{},keyup:{}}},n.destroy=function(){s={keydown:{},keyup:{}},i.removeEventListener("keydown",o,!0),i.removeEventListener("keyup",l,!0)},i.addEventListener("keydown",o,!0),i.addEventListener("keyup",l,!0),n}return t})?n.apply(e,o):n)&&(t.exports=r)},function(t,g,e){g.convertHiddenOptions=function(t,e,i){if(i&&!Array.isArray(i))return g.convertHiddenOptions(t,e,[i]);if(e.hiddenDates=[],i&&1==Array.isArray(i)){for(var n=0;n<i.length;n++)if(void 0===i[n].repeat){var o={};o.start=t(i[n].start).toDate().valueOf(),o.end=t(i[n].end).toDate().valueOf(),e.hiddenDates.push(o)}e.hiddenDates.sort(function(t,e){return t.start-e.start})}},g.updateHiddenDates=function(t,e,i){if(i&&!Array.isArray(i))return g.updateHiddenDates(t,e,[i]);if(i&&void 0!==e.domProps.centerContainer.width){g.convertHiddenOptions(t,e,i);for(var n=t(e.range.start),o=t(e.range.end),r=(e.range.end-e.range.start)/e.domProps.centerContainer.width,s=0;s<i.length;s++)if(void 0!==i[s].repeat){var a=t(i[s].start),l=t(i[s].end);if("Invalid Date"==a._d)throw new Error("Supplied start date is not valid: "+i[s].start);if("Invalid Date"==l._d)throw new Error("Supplied end date is not valid: "+i[s].end);if(4*r<=l-a){var d=0,h=o.clone();switch(i[s].repeat){case"daily":a.day()!=l.day()&&(d=1),a.dayOfYear(n.dayOfYear()),a.year(n.year()),a.subtract(7,"days"),l.dayOfYear(n.dayOfYear()),l.year(n.year()),l.subtract(7-d,"days"),h.add(1,"weeks");break;case"weekly":var u=l.diff(a,"days"),c=a.day();a.date(n.date()),a.month(n.month()),a.year(n.year()),l=a.clone(),a.day(c),l.day(c),l.add(u,"days"),a.subtract(1,"weeks"),l.subtract(1,"weeks"),h.add(1,"weeks");break;case"monthly":a.month()!=l.month()&&(d=1),a.month(n.month()),a.year(n.year()),a.subtract(1,"months"),l.month(n.month()),l.year(n.year()),l.subtract(1,"months"),l.add(d,"months"),h.add(1,"months");break;case"yearly":a.year()!=l.year()&&(d=1),a.year(n.year()),a.subtract(1,"years"),l.year(n.year()),l.subtract(1,"years"),l.add(d,"years"),h.add(1,"years");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",i[s].repeat)}for(;a<h;)switch(e.hiddenDates.push({start:a.valueOf(),end:l.valueOf()}),i[s].repeat){case"daily":a.add(1,"days"),l.add(1,"days");break;case"weekly":a.add(1,"weeks"),l.add(1,"weeks");break;case"monthly":a.add(1,"months"),l.add(1,"months");break;case"yearly":a.add(1,"y"),l.add(1,"y");break;default:return void console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",i[s].repeat)}e.hiddenDates.push({start:a.valueOf(),end:l.valueOf()})}}g.removeDuplicates(e);var f=g.isHidden(e.range.start,e.hiddenDates),p=g.isHidden(e.range.end,e.hiddenDates),m=e.range.start,v=e.range.end;1==f.hidden&&(m=1==e.range.startToFront?f.startDate-1:f.endDate+1),1==p.hidden&&(v=1==e.range.endToFront?p.startDate-1:p.endDate+1),1!=f.hidden&&1!=p.hidden||e.range._applyRange(m,v)}},g.removeDuplicates=function(t){for(var e=t.hiddenDates,i=[],n=0;n<e.length;n++)for(var o=0;o<e.length;o++)n!=o&&1!=e[o].remove&&1!=e[n].remove&&(e[o].start>=e[n].start&&e[o].end<=e[n].end?e[o].remove=!0:e[o].start>=e[n].start&&e[o].start<=e[n].end?(e[n].end=e[o].end,e[o].remove=!0):e[o].end>=e[n].start&&e[o].end<=e[n].end&&(e[n].start=e[o].start,e[o].remove=!0));for(n=0;n<e.length;n++)!0!==e[n].remove&&i.push(e[n]);t.hiddenDates=i,t.hiddenDates.sort(function(t,e){return t.start-e.start})},g.printDates=function(t){for(var e=0;e<t.length;e++)console.log(e,new Date(t[e].start),new Date(t[e].end),t[e].start,t[e].end,t[e].remove)},g.stepOverHiddenDates=function(t,e,i){for(var n=!1,o=e.current.valueOf(),r=0;r<e.hiddenDates.length;r++){var s=e.hiddenDates[r].start,a=e.hiddenDates[r].end;if(s<=o&&o<a){n=!0;break}}if(1==n&&o<e._end.valueOf()&&o!=i){var l=t(i),d=t(a);l.year()!=d.year()?e.switchedYear=!0:l.month()!=d.month()?e.switchedMonth=!0:l.dayOfYear()!=d.dayOfYear()&&(e.switchedDay=!0),e.current=d}},g.toScreen=function(t,e,i){var n;if(0==t.body.hiddenDates.length)return n=t.range.conversion(i),(e.valueOf()-n.offset)*n.scale;var o=g.isHidden(e,t.body.hiddenDates);1==o.hidden&&(e=o.startDate);var r=g.getHiddenDurationBetween(t.body.hiddenDates,t.range.start,t.range.end);if(e<t.range.start){n=t.range.conversion(i,r);var s=g.getHiddenDurationBeforeStart(t.body.hiddenDates,e,n.offset);return e=t.options.moment(e).toDate().valueOf(),e+=s,-(n.offset-e.valueOf())*n.scale}if(e>t.range.end){var a={start:t.range.start,end:e};return e=g.correctTimeForHidden(t.options.moment,t.body.hiddenDates,a,e),n=t.range.conversion(i,r),(e.valueOf()-n.offset)*n.scale}return e=g.correctTimeForHidden(t.options.moment,t.body.hiddenDates,t.range,e),n=t.range.conversion(i,r),(e.valueOf()-n.offset)*n.scale},g.toTime=function(t,e,i){if(0==t.body.hiddenDates.length){var n=t.range.conversion(i);return new Date(e/n.scale+n.offset)}var o=g.getHiddenDurationBetween(t.body.hiddenDates,t.range.start,t.range.end),r=(t.range.end-t.range.start-o)*e/i,s=g.getAccumulatedHiddenDuration(t.body.hiddenDates,t.range,r);return new Date(s+r+t.range.start)},g.getHiddenDurationBetween=function(t,e,i){for(var n=0,o=0;o<t.length;o++){var r=t[o].start,s=t[o].end;e<=r&&s<i&&(n+=s-r)}return n},g.getHiddenDurationBeforeStart=function(t,e,i){for(var n=0,o=0;o<t.length;o++){var r=t[o].start,s=t[o].end;e<=r&&s<=i&&(n+=s-r)}return n},g.correctTimeForHidden=function(t,e,i,n){return(n=t(n).toDate().valueOf())-g.getHiddenDurationBefore(t,e,i,n)},g.getHiddenDurationBefore=function(t,e,i,n){var o=0;n=t(n).toDate().valueOf();for(var r=0;r<e.length;r++){var s=e[r].start,a=e[r].end;s>=i.start&&a<i.end&&a<=n&&(o+=a-s)}return o},g.getAccumulatedHiddenDuration=function(t,e,i){for(var n=0,o=0,r=e.start,s=0;s<t.length;s++){var a=t[s].start,l=t[s].end;if(a>=e.start&&l<e.end){if(o+=a-r,r=l,i<=o)break;n+=l-a}}return n},g.snapAwayFromHidden=function(t,e,i,n){var o=g.isHidden(e,t);return 1==o.hidden?i<0?1==n?o.startDate-(o.endDate-e)-1:o.startDate-1:1==n?o.endDate+(e-o.startDate)+1:o.endDate+1:e},g.isHidden=function(t,e){for(var i=0;i<e.length;i++){var n=e[i].start,o=e[i].end;if(n<=t&&t<o)return{hidden:!0,startDate:n,endDate:o}}return{hidden:!1,startDate:n,endDate:o}}},function(t,e,i){e.onTouch=function(t,e){e.inputHandler=function(t){t.isFirst&&e(t)},t.on("hammer.input",e.inputHandler)},e.onRelease=function(t,e){return e.inputHandler=function(t){t.isFinal&&e(t)},t.on("hammer.input",e.inputHandler)},e.offTouch=function(t,e){t.off("hammer.input",e.inputHandler)},e.offRelease=e.offTouch,e.disablePreventDefaultVertically=function(t){return t.getTouchAction=function(){return["pan-y"]},t}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e,i){this.id=null,this.parent=null,this.data=t,this.dom=null,this.conversion=e||{},this.options=i||{},this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.editable=null,this._updateEditStatus()}var r=n(i(6)),s=n(i(8)),a=i(10),l=i(2),d=i(9);o.prototype.stack=!0,o.prototype.select=function(){this.selected=!0,this.dirty=!0,this.displayed&&this.redraw()},o.prototype.unselect=function(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()},o.prototype.setData=function(t){null!=t.group&&this.data.group!=t.group&&null!=this.parent&&this.parent.itemSet._moveToGroup(this,t.group),this.parent&&(this.parent.stackDirty=!0),null!=t.subgroup&&this.data.subgroup!=t.subgroup&&null!=this.parent&&this.parent.changeSubgroup(this,this.data.subgroup,t.subgroup),this.data=t,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()},o.prototype.setParent=function(t){this.displayed?(this.hide(),this.parent=t,this.parent&&this.show()):this.parent=t},o.prototype.isVisible=function(t){return!1},o.prototype.show=function(){return!1},o.prototype.hide=function(){return!1},o.prototype.redraw=function(){},o.prototype.repositionX=function(){},o.prototype.repositionY=function(){},o.prototype._repaintDragCenter=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragCenter){var e=this,t=document.createElement("div");t.className="vis-drag-center",t.dragCenterItem=this;var i=new a(t);i.on("tap",function(t){e.parent.itemSet.body.emitter.emit("click",{event:t,item:e.id})}),i.on("doubletap",function(t){t.stopPropagation(),e.parent.itemSet._onUpdateItem(e),e.parent.itemSet.body.emitter.emit("doubleClick",{event:t,item:e.id})}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(t,this.dom.dragLeft):this.dom.box.appendChild(t):this.dom.point&&this.dom.point.appendChild(t),this.dom.dragCenter=t}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null)},o.prototype._repaintDeleteButton=function(t){var e=(this.options.editable.overrideItems||null==this.editable)&&this.options.editable.remove||!this.options.editable.overrideItems&&null!=this.editable&&this.editable.remove;if(this.selected&&e&&!this.dom.deleteButton){var i=this,n=document.createElement("div");this.options.rtl?n.className="vis-delete-rtl":n.className="vis-delete",n.title="Delete this item",new a(n).on("tap",function(t){t.stopPropagation(),i.parent.removeFromDataSet(i)}),t.appendChild(n),this.dom.deleteButton=n}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null)},o.prototype._repaintOnItemUpdateTimeTooltip=function(t){if(this.options.tooltipOnItemUpdateTime){var e=(this.options.editable.updateTime||!0===this.data.editable)&&!1!==this.data.editable;if(this.selected&&e&&!this.dom.onItemUpdateTimeTooltip){var i=document.createElement("div");i.className="vis-onUpdateTime-tooltip",t.appendChild(i),this.dom.onItemUpdateTimeTooltip=i}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.options.rtl?this.dom.onItemUpdateTimeTooltip.style.right=this.dom.content.style.right:this.dom.onItemUpdateTimeTooltip.style.left=this.dom.content.style.left;var n,o=this.parent.itemSet.body.domProps.scrollTop;("top"==this.options.orientation.item?this.top:this.parent.height-this.top-this.height)+this.parent.top-50<-o?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top=this.height+2+"px"):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom=this.height+2+"px"),this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template?n=this.options.tooltipOnItemUpdateTime.template.bind(this)(this.data):(n="start: "+d(this.data.start).format("MM/DD/YYYY hh:mm"),this.data.end&&(n+="<br> end: "+d(this.data.end).format("MM/DD/YYYY hh:mm"))),this.dom.onItemUpdateTimeTooltip.innerHTML=n}}},o.prototype._updateContents=function(t){var e,i,n,o,r=this.parent.itemSet.itemsData.get(this.id),s=this.dom.box||this.dom.point,a=s.getElementsByClassName("vis-item-visible-frame")[0];if(n=this.options.visibleFrameTemplate?(o=this.options.visibleFrameTemplate.bind(this))(r,s):"",a)if(n instanceof Object&&!(n instanceof Element))o(r,a);else if(this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(n)){if(n instanceof Element)a.innerHTML="",a.appendChild(n);else if(null!=n)a.innerHTML=n;else if("background"!=this.data.type||void 0!==this.data.content)throw new Error('Property "content" missing in item '+this.id);this.itemVisibleFrameContent=n}if((e=this.options.template?(i=this.options.template.bind(this))(r,t,this.data):this.data.content)instanceof Object&&!(e instanceof Element))i(r,t);else if(this._contentToString(this.content)!==this._contentToString(e)){if(e instanceof Element)t.innerHTML="",t.appendChild(e);else if(null!=e)t.innerHTML=e;else if("background"!=this.data.type||void 0!==this.data.content)throw new Error('Property "content" missing in item '+this.id);this.content=e}},o.prototype._updateDataAttributes=function(t){if(this.options.dataAttributes&&0<this.options.dataAttributes.length){var e=[];if(Array.isArray(this.options.dataAttributes))e=this.options.dataAttributes;else{if("all"!=this.options.dataAttributes)return;e=(0,s.default)(this.data)}for(var i=0;i<e.length;i++){var n=e[i],o=this.data[n];null!=o?t.setAttribute("data-"+n,o):t.removeAttribute("data-"+n)}}},o.prototype._updateStyle=function(t){this.style&&(l.removeCssText(t,this.style),this.style=null),this.data.style&&(l.addCssText(t,this.data.style),this.style=this.data.style)},o.prototype._contentToString=function(t){return"string"==typeof t?t:t&&"outerHTML"in t?t.outerHTML:t},o.prototype._updateEditStatus=function(){this.options&&("boolean"==typeof this.options.editable?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:"object"===(0,r.default)(this.options.editable)&&(this.editable={},l.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),this.options&&this.options.editable&&!0===this.options.editable.overrideItems||this.data&&("boolean"==typeof this.data.editable?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:"object"===(0,r.default)(this.data.editable)&&(this.editable={},l.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))},o.prototype.getWidthLeft=function(){return 0},o.prototype.getWidthRight=function(){return 0},o.prototype.getTitle=function(){return this.data.title},t.exports=o},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e,i){var n=i(51);t.exports=function(t){return Object(n(t))}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){function s(t){this.delay=null,this.max=1/0,this._queue=[],this._timeout=null,this._extended=null,this.setOptions(t)}s.prototype.setOptions=function(t){t&&void 0!==t.delay&&(this.delay=t.delay),t&&void 0!==t.max&&(this.max=t.max),this._flushIfNeeded()},s.extend=function(t,e){var i=new s(e);if(void 0!==t.flush)throw new Error("Target object already has a property flush");t.flush=function(){i.flush()};var n=[{name:"flush",original:void 0}];if(e&&e.replace)for(var o=0;o<e.replace.length;o++){var r=e.replace[o];n.push({name:r,original:t[r]}),i.replace(t,r)}return i._extended={object:t,methods:n},i},s.prototype.destroy=function(){if(this.flush(),this._extended){for(var t=this._extended.object,e=this._extended.methods,i=0;i<e.length;i++){var n=e[i];n.original?t[n.name]=n.original:delete t[n.name]}this._extended=null}},s.prototype.replace=function(t,e){var i=this,n=t[e];if(!n)throw new Error("Method "+e+" undefined");t[e]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.queue({args:t,fn:n,context:this})}},s.prototype.queue=function(t){"function"==typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()},s.prototype._flushIfNeeded=function(){if(this._queue.length>this.max&&this.flush(),clearTimeout(this._timeout),0<this.queue.length&&"number"==typeof this.delay){var t=this;this._timeout=setTimeout(function(){t.flush()},this.delay)}},s.prototype.flush=function(){for(;0<this._queue.length;){var t=this._queue.shift();t.fn.apply(t.context||t.fn,t.args||[])}},t.exports=s},function(t,e){function i(t){if(t)return function(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}(t)}(t.exports=i).prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},i.prototype.once=function(t,e){function i(){n.off(t,i),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,o=0;o<i.length;o++)if((n=i[o])===e||n.fn===e){i.splice(o,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i)for(var n=0,o=(i=i.slice(0)).length;n<o;++n)i[n].apply(this,e);return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,i){function n(t,e){this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,maxMinorChars:7,format:S.FORMAT,moment:l,timeAxis:null},this.options=k.extend({},this.defaultOptions),this.body=t,this._create(),this.setOptions(e)}var o,r=i(6),s=(o=r)&&o.__esModule?o:{default:o},k=i(2),a=i(16),S=i(66),E=i(36),l=i(9);(n.prototype=new a).setOptions=function(t){t&&(k.selectiveExtend(["showMinorLabels","showMajorLabels","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,t),k.selectiveDeepExtend(["format"],this.options,t),"orientation"in t&&("string"==typeof t.orientation?this.options.orientation.axis=t.orientation:"object"===(0,s.default)(t.orientation)&&"axis"in t.orientation&&(this.options.orientation.axis=t.orientation.axis)),"locale"in t&&("function"==typeof l.locale?l.locale(t.locale):l.lang(t.locale)))},n.prototype._create=function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"},n.prototype.destroy=function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null},n.prototype.redraw=function(){var t=this.props,e=this.dom.foreground,i=this.dom.background,n="top"==this.options.orientation.axis?this.body.dom.top:this.body.dom.bottom,o=e.parentNode!==n;this._calculateCharSize();var r=this.options.showMinorLabels&&"none"!==this.options.orientation.axis,s=this.options.showMajorLabels&&"none"!==this.options.orientation.axis;t.minorLabelHeight=r?t.minorCharHeight:0,t.majorLabelHeight=s?t.majorCharHeight:0,t.height=t.minorLabelHeight+t.majorLabelHeight,t.width=e.offsetWidth,t.minorLineHeight=this.body.domProps.root.height-t.majorLabelHeight-("top"==this.options.orientation.axis?this.body.domProps.bottom.height:this.body.domProps.top.height),t.minorLineWidth=1,t.majorLineHeight=t.minorLineHeight+t.majorLabelHeight,t.majorLineWidth=1;var a=e.nextSibling,l=i.nextSibling;return e.parentNode&&e.parentNode.removeChild(e),i.parentNode&&i.parentNode.removeChild(i),e.style.height=this.props.height+"px",this._repaintLabels(),a?n.insertBefore(e,a):n.appendChild(e),l?this.body.dom.backgroundVertical.insertBefore(i,l):this.body.dom.backgroundVertical.appendChild(i),this._isResized()||o},n.prototype._repaintLabels=function(){var t=this.options.orientation.axis,e=k.convert(this.body.range.start,"Number"),i=k.convert(this.body.range.end,"Number"),n=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf(),o=n-E.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this.body.range,n);o-=this.body.util.toTime(0).valueOf();var r=new S(new Date(e),new Date(i),o,this.body.hiddenDates,this.options);r.setMoment(this.options.moment),this.options.format&&r.setFormat(this.options.format),this.options.timeAxis&&r.setScale(this.options.timeAxis),this.step=r;var s=this.dom;s.redundant.lines=s.lines,s.redundant.majorTexts=s.majorTexts,s.redundant.minorTexts=s.minorTexts,s.lines=[],s.majorTexts=[],s.minorTexts=[];var a,l,d,h,u,c,f,p,m,v=0,g=void 0,y=0;for(r.start(),a=r.getCurrent(),d=this.body.util.toScreen(a);r.hasNext()&&y<1e3;){switch(y++,h=r.isMajor(),m=r.getClassName(),p=r.getLabelMinor(),l=d,r.next(),a=r.getCurrent(),r.isMajor(),c=v,v=(d=this.body.util.toScreen(a))-l,r.scale){case"week":u=!0;break;default:u=.4*c<=v}if(this.options.showMinorLabels&&u){var b=this._repaintMinorText(l,p,t,m);b.style.width=v+"px"}h&&this.options.showMajorLabels?(0<l&&(null==g&&(g=l),b=this._repaintMajorText(l,r.getLabelMajor(),t,m)),f=this._repaintMajorLine(l,v,t,m)):u?f=this._repaintMinorLine(l,v,t,m):f&&(f.style.width=parseInt(f.style.width)+v+"px")}if(1e3!==y||T||(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to 1000 lines."),T=!0),this.options.showMajorLabels){var w=this.body.util.toTime(0),_=r.getLabelMajor(w),x=_.length*(this.props.majorCharWidth||10)+10;(null==g||x<g)&&this._repaintMajorText(0,_,t,m)}k.forEach(this.dom.redundant,function(t){for(;t.length;){var e=t.pop();e&&e.parentNode&&e.parentNode.removeChild(e)}})},n.prototype._repaintMinorText=function(t,e,i,n){var o=this.dom.redundant.minorTexts.shift();if(!o){var r=document.createTextNode("");(o=document.createElement("div")).appendChild(r),this.dom.foreground.appendChild(o)}return this.dom.minorTexts.push(o),o.innerHTML=e,o.style.top="top"==i?this.props.majorLabelHeight+"px":"0",this.options.rtl?(o.style.left="",o.style.right=t+"px"):o.style.left=t+"px",o.className="vis-text vis-minor "+n,o},n.prototype._repaintMajorText=function(t,e,i,n){var o=this.dom.redundant.majorTexts.shift();if(!o){var r=document.createElement("div");(o=document.createElement("div")).appendChild(r),this.dom.foreground.appendChild(o)}return o.childNodes[0].innerHTML=e,o.className="vis-text vis-major "+n,o.style.top="top"==i?"0":this.props.minorLabelHeight+"px",this.options.rtl?(o.style.left="",o.style.right=t+"px"):o.style.left=t+"px",this.dom.majorTexts.push(o),o},n.prototype._repaintMinorLine=function(t,e,i,n){var o=this.dom.redundant.lines.shift();o||(o=document.createElement("div"),this.dom.background.appendChild(o)),this.dom.lines.push(o);var r=this.props;return o.style.top="top"==i?r.majorLabelHeight+"px":this.body.domProps.top.height+"px",o.style.height=r.minorLineHeight+"px",this.options.rtl?(o.style.left="",o.style.right=t-r.minorLineWidth/2+"px",o.className="vis-grid vis-vertical-rtl vis-minor "+n):(o.style.left=t-r.minorLineWidth/2+"px",o.className="vis-grid vis-vertical vis-minor "+n),o.style.width=e+"px",o},n.prototype._repaintMajorLine=function(t,e,i,n){var o=this.dom.redundant.lines.shift();o||(o=document.createElement("div"),this.dom.background.appendChild(o)),this.dom.lines.push(o);var r=this.props;return o.style.top="top"==i?"0":this.body.domProps.top.height+"px",this.options.rtl?(o.style.left="",o.style.right=t-r.majorLineWidth/2+"px",o.className="vis-grid vis-vertical-rtl vis-major "+n):(o.style.left=t-r.majorLineWidth/2+"px",o.className="vis-grid vis-vertical vis-major "+n),o.style.height=r.majorLineHeight+"px",o.style.width=e+"px",o};var T=!(n.prototype._calculateCharSize=function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth});t.exports=n},function(t,e,i){function n(t,e){this.body=t,this.defaultOptions={moment:a,locales:l,locale:"en",id:void 0,title:void 0},this.options=r.extend({},this.defaultOptions),e&&e.time?this.customTime=e.time:this.customTime=new Date,this.eventParams={},this.setOptions(e),this._create()}var o=i(10),r=i(2),s=i(16),a=i(9),l=i(98);(n.prototype=new s).setOptions=function(t){t&&r.selectiveExtend(["moment","locale","locales","id"],this.options,t)},n.prototype._create=function(){function t(t){this.body.range._onMouseWheel(t)}var e=document.createElement("div");e["custom-time"]=this,e.className="vis-custom-time "+(this.options.id||""),e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e;var i=document.createElement("div");i.style.position="relative",i.style.top="0px",i.style.left="-10px",i.style.height="100%",i.style.width="20px",i.addEventListener?(i.addEventListener("mousewheel",t.bind(this),!1),i.addEventListener("DOMMouseScroll",t.bind(this),!1)):i.attachEvent("onmousewheel",t.bind(this)),e.appendChild(i),this.hammer=new o(i),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:o.DIRECTION_HORIZONTAL})},n.prototype.destroy=function(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null},n.prototype.redraw=function(){var t=this.body.dom.backgroundVertical;this.bar.parentNode!=t&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),t.appendChild(this.bar));var e=this.body.util.toScreen(this.customTime),i=this.options.locales[this.options.locale];i||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline/#Localization"),this.warned=!0),i=this.options.locales.en);var n=this.options.title;return void 0===n?n=(n=i.time+": "+this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")).charAt(0).toUpperCase()+n.substring(1):"function"==typeof n&&(n=n.call(this.customTime)),this.bar.style.left=e+"px",this.bar.title=n,!1},n.prototype.hide=function(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)},n.prototype.setCustomTime=function(t){this.customTime=r.convert(t,"Date"),this.redraw()},n.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},n.prototype.setCustomTitle=function(t){this.options.title=t},n.prototype._onDragStart=function(t){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,t.stopPropagation()},n.prototype._onDrag=function(t){if(this.eventParams.dragging){var e=this.body.util.toScreen(this.eventParams.customTime)+t.deltaX,i=this.body.util.toTime(e);this.setCustomTime(i),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:t}),t.stopPropagation()}},n.prototype._onDragEnd=function(t){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:t}),t.stopPropagation())},n.customTimeFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("custom-time"))return e["custom-time"];e=e.parentNode}return null},t.exports=n},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(i(0)),o=n(i(1)),d=i(2),a=i(117).default,r=i(48).default,l=i(193).default,h=i(200).default,u=i(201).default,c=i(202).default,f=i(203).default,p=i(204).default,m=i(205).default,v=i(206).default,g=i(207).default,y=i(208).default,b=i(209).default,w=i(210).default,_=i(211).default,x=i(212).default,k=i(213).default,S=i(15).printStyle,E=((0,o.default)(T,[{key:"attachEdge",value:function(t){-1===this.edges.indexOf(t)&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var e=this.edges.indexOf(t);-1!=e&&this.edges.splice(e,1)}},{key:"setOptions",value:function(t){var e=this.options.shape;if(t){if(void 0!==t.id&&(this.id=t.id),void 0===this.id)throw new Error("Node must have an id");T.checkMass(t,this.id),void 0!==t.x&&(null===t.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=parseInt(t.x),this.predefinedPosition=!0)),void 0!==t.y&&(null===t.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=parseInt(t.y),this.predefinedPosition=!0)),void 0!==t.size&&(this.baseSize=t.size),void 0!==t.value&&(t.value=parseFloat(t.value)),T.parseOptions(this.options,t,!0,this.globalOptions,this.grouplist);var i=[t,this.options,this.defaultOptions];return this.chooser=r.choosify("node",i),this._load_images(),this.updateLabelModule(t),this.updateShape(e),void 0!==t.hidden||void 0!==t.physics}}},{key:"_load_images",value:function(){if("circularImage"===this.options.shape||"image"===this.options.shape){if(void 0===this.options.image)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(void 0===this.imagelist)throw new Error("Internal Error: No images provided");if("string"==typeof this.options.image)this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(void 0===this.options.image.unselected)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),void 0!==this.options.image.selected?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};return this.selected||this.hover?!0===this.chooser?this.selected?(t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):"function"==typeof this.chooser&&(this.chooser(t,this.options.id,this.selected,this.hover),!1===t.shadow&&(t.shadowColor===this.options.shadow.color&&t.shadowSize===this.options.shadow.size&&t.shadowX===this.options.shadow.x&&t.shadowY===this.options.shadow.y||(t.shadow=!0))):t.shadow=this.options.shadow.enabled,t}},{key:"updateLabelModule",value:function(t){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),T.updateGroupOptions(this.options,t,this.grouplist);var e=this.grouplist.get(this.options.group,!1),i=[t,this.options,e,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,i),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new l(this.options,this.body,this.labelModule);break;case"circle":this.shape=new h(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new u(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"database":this.shape=new c(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new f(this.options,this.body,this.labelModule);break;case"dot":this.shape=new p(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new m(this.options,this.body,this.labelModule);break;case"icon":this.shape=new v(this.options,this.body,this.labelModule);break;case"image":this.shape=new g(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new y(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new b(this.options,this.body,this.labelModule);break;case"star":this.shape=new w(this.options,this.body,this.labelModule);break;case"text":this.shape=new _(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new x(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new k(this.options,this.body,this.labelModule);break;default:this.shape=new m(this.options,this.body,this.labelModule)}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,e){return this.shape.distanceToBorder(t,e)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(t,e,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var r=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*r}this.options.size=this.options.scaling.min+n*o}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var e=this.getFormattingValues();this.shape.draw(t,this.x,this.y,this.selected,this.hover,e)}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var e=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,e)}},{key:"getItemsOnPoint",value:function(t){var e=[];return this.labelModule.visible()&&r.pointInRect(this.labelModule.getSize(),t)&&e.push({nodeId:this.id,labelId:0}),r.pointInRect(this.shape.boundingBox,t)&&e.push({nodeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"updateGroupOptions",value:function(t,e,i){if(void 0!==i){var n=t.group;if(void 0!==e&&void 0!==e.group&&n!==e.group)throw new Error("updateGroupOptions: group values in options don't match.");if("number"==typeof n||"string"==typeof n&&""!=n){var o=i.get(n);d.selectiveNotDeepExtend(["font"],t,o),t.color=d.parseColor(t.color)}}}},{key:"parseOptions",value:function(t,e,i,n,o){var r=2<arguments.length&&void 0!==i&&i,s=3<arguments.length&&void 0!==n?n:{},a=o;if(d.selectiveNotDeepExtend(["color","fixed","shadow"],t,e,r),T.checkMass(e),d.mergeOptions(t,e,"shadow",s),void 0!==e.color&&null!==e.color){var l=d.parseColor(e.color);d.fillIfDefined(t.color,l)}else!0===r&&null===e.color&&(t.color=d.bridgeObject(s.color));void 0!==e.fixed&&null!==e.fixed&&("boolean"==typeof e.fixed?(t.fixed.x=e.fixed,t.fixed.y=e.fixed):(void 0!==e.fixed.x&&"boolean"==typeof e.fixed.x&&(t.fixed.x=e.fixed.x),void 0!==e.fixed.y&&"boolean"==typeof e.fixed.y&&(t.fixed.y=e.fixed.y))),!0===r&&null===e.font&&(t.font=d.bridgeObject(s.font)),T.updateGroupOptions(t,e,a),void 0!==e.scaling&&d.mergeOptions(t.scaling,e.scaling,"label",s.scaling)}},{key:"checkMass",value:function(t,e){if(void 0!==t.mass&&t.mass<=0){var i="";void 0!==e&&(i=" in node id: "+e),console.log("%cNegative or zero mass disallowed"+i+", setting mass to 1.",S),t.mass=1}}}]),T);function T(t,e,i,n,o,r){(0,s.default)(this,T),this.options=d.bridgeObject(o),this.globalOptions=o,this.defaultOptions=r,this.body=e,this.edges=[],this.id=void 0,this.imagelist=i,this.grouplist=n,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new a(this.body,this.options,!1),this.setOptions(t)}e.default=E},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(i(6)),o=n(i(0)),r=n(i(1)),a=i(2),l=((0,r.default)(d,null,[{key:"choosify",value:function(t,e){var i=["node","edge","label"],n=!0,o=a.topMost(e,"chosen");if("boolean"==typeof o)n=o;else if("object"===(void 0===o?"undefined":(0,s.default)(o))){if(-1===i.indexOf(t))throw new Error("choosify: subOption '"+t+"' should be one of '"+i.join("', '")+"'");var r=a.topMost(e,["chosen",t]);"boolean"!=typeof r&&"function"!=typeof r||(n=r)}return n}},{key:"pointInRect",value:function(t,e,i){if(t.width<=0||t.height<=0)return!1;if(void 0!==i){var n={x:e.x-i.x,y:e.y-i.y};if(0!==i.angle){var o=-i.angle;e={x:Math.cos(o)*n.x-Math.sin(o)*n.y,y:Math.sin(o)*n.x+Math.cos(o)*n.y}}else e=n}var r=t.x+t.width,s=t.y+t.width;return t.left<e.x&&r>e.x&&t.top<e.y&&s>e.y}},{key:"isValidLabel",value:function(t){return"string"==typeof t&&""!==t}}]),d);function d(){(0,o.default)(this,d)}e.default=l},function(t,e,i){i(125);for(var n=i(18),o=i(26),r=i(31),s=i(13)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<a.length;l++){var d=a[l],h=n[d],u=h&&h.prototype;u&&!u[s]&&o(u,s,d),r[d]=r.Array}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=!0},function(t,e,i){var o=i(32);t.exports=function(t,e){if(!o(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!o(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!o(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!o(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){function o(){}var r=n(27),s=n(130),a=n(58),l=n(56)("IE_PROTO"),d=function(){var t,e=n(82)("iframe"),i=a.length;for(e.style.display="none",n(134).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),d=t.F;i--;)delete d.prototype[a[i]];return d()};t.exports=Object.create||function(t,e){var i;return null!==t?(o.prototype=r(t),i=new o,o.prototype=null,i[l]=t):i=d(),void 0===e?i:s(i,e)}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(0<t?n:i)(t)}},function(t,e,i){var n=i(57)("keys"),o=i(40);t.exports=function(t){return n[t]||(n[t]=o(t))}},function(t,e,i){var n=i(18),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(20).f,o=i(22),r=i(13)("toStringTag");t.exports=function(t,e,i){t&&!o(t=i?t:t.prototype,r)&&n(t,r,{configurable:!0,value:e})}},function(t,e,i){var n=i(135)(!0);i(79)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){e.f=i(13)},function(t,e,i){var n=i(18),o=i(7),r=i(52),s=i(61),a=i(20).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=r?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var i=a().hours(0).minutes(0).seconds(0).milliseconds(0),n=i.clone().add(-3,"days").valueOf(),o=i.clone().add(3,"days").valueOf();(this.millisecondsPerPixelCache=void 0)===e?(this.start=n,this.end=o):(this.start=e.start||n,this.end=e.end||o),this.rolling=!1,this.body=t,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:a,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10,rollingMode:{follow:!1,offset:.5}},this.options=_.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",this._onDragStart.bind(this)),this.body.emitter.on("panmove",this._onDrag.bind(this)),this.body.emitter.on("panend",this._onDragEnd.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.body.dom.rollingModeBtn.addEventListener("click",this.startRolling.bind(this)),this.setOptions(e)}function c(t){if("horizontal"!=t&&"vertical"!=t)throw new TypeError('Unknown direction "'+t+'". Choose "horizontal" or "vertical".')}var r=n(i(8)),s=n(i(19)),w=n(i(6)),_=i(2),a=i(9),l=i(16),x=i(36);(o.prototype=new l).setOptions=function(t){if(t){_.selectiveExtend(["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","rtl","showCurrentTime","rollingMode","horizontalScroll"],this.options,t),t.rollingMode&&t.rollingMode.follow&&this.startRolling(),("start"in t||"end"in t)&&this.setRange(t.start,t.end)}},o.prototype.startRolling=function(){var r=this;!function t(){r.stopRolling(),r.rolling=!0;var e=r.end-r.start,i=_.convert(new Date,"Date").valueOf(),n=i-e*r.options.rollingMode.offset,o=i+e*(1-r.options.rollingMode.offset);r.setRange(n,o,{animation:!1}),(e=1/r.conversion(r.body.domProps.center.width).scale/10)<30&&(e=30),1e3<e&&(e=1e3),r.body.dom.rollingModeBtn.style.visibility="hidden",r.currentTimeTimer=setTimeout(t,e)}()},o.prototype.stopRolling=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")},o.prototype.setRange=function(t,e,a,l,d){!0!==(a=a||{}).byUser&&(a.byUser=!1);var h=this,u=null!=t?_.convert(t,"Date").valueOf():null,c=null!=e?_.convert(e,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,a.animation){var f=this.start,p=this.end,m="object"===(0,w.default)(a.animation)&&"duration"in a.animation?a.animation.duration:500,i="object"===(0,w.default)(a.animation)&&"easingFunction"in a.animation?a.animation.easingFunction:"easeInOutQuad",v=_.easingFunctions[i];if(!v)throw new Error("Unknown easing function "+(0,s.default)(i)+". Choose from: "+(0,r.default)(_.easingFunctions).join(", "));var g=(new Date).valueOf(),y=!1;return function t(){if(!h.props.touch.dragging){var e=(new Date).valueOf()-g,i=v(e/m),n=m<e,o=n||null===u?u:f+(u-f)*i,r=n||null===c?c:p+(c-p)*i;b=h._applyRange(o,r),x.updateHiddenDates(h.options.moment,h.body,h.options.hiddenDates),y=y||b;var s={start:new Date(h.start),end:new Date(h.end),byUser:a.byUser,event:a.event};if(d&&d(i,b,n),b&&h.body.emitter.emit("rangechange",s),n){if(y&&(h.body.emitter.emit("rangechanged",s),l))return l()}else h.animationTimer=setTimeout(t,20)}}()}var b=this._applyRange(u,c);if(x.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),b){var n={start:new Date(this.start),end:new Date(this.end),byUser:a.byUser,event:a.event};if(this.body.emitter.emit("rangechange",n),clearTimeout(h.timeoutID),h.timeoutID=setTimeout(function(){h.body.emitter.emit("rangechanged",n)},200),l)return l()}},o.prototype.getMillisecondsPerPixel=function(){return void 0===this.millisecondsPerPixelCache&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache},o.prototype._cancelAnimation=function(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)},o.prototype._applyRange=function(t,e){var i,n=null!=t?_.convert(t,"Date").valueOf():this.start,o=null!=e?_.convert(e,"Date").valueOf():this.end,r=null!=this.options.max?_.convert(this.options.max,"Date").valueOf():null,s=null!=this.options.min?_.convert(this.options.min,"Date").valueOf():null;if(isNaN(n)||null===n)throw new Error('Invalid start "'+t+'"');if(isNaN(o)||null===o)throw new Error('Invalid end "'+e+'"');if(o<n&&(o=n),null!==s&&n<s&&(n+=i=s-n,o+=i,null!=r&&r<o&&(o=r)),null!==r&&r<o&&(n-=i=o-r,o-=i,null!=s&&n<s&&(n=s)),null!==this.options.zoomMin){var a=parseFloat(this.options.zoomMin);a<0&&(a=0),o-n<a&&(this.end-this.start===a&&n>=this.start-.5&&o<=this.end?(n=this.start,o=this.end):(n-=(i=a-(o-n))/2,o+=i/2))}if(null!==this.options.zoomMax){var l=parseFloat(this.options.zoomMax);l<0&&(l=0),l<o-n&&(this.end-this.start===l&&n<this.start&&o>this.end?(n=this.start,o=this.end):(n+=(i=o-n-l)/2,o-=i/2))}var d=this.start!=n||this.end!=o;return n>=this.start&&n<=this.end||o>=this.start&&o<=this.end||this.start>=n&&this.start<=o||this.end>=n&&this.end<=o||this.body.emitter.emit("checkRangedItems"),this.start=n,this.end=o,d},o.prototype.getRange=function(){return{start:this.start,end:this.end}},o.prototype.conversion=function(t,e){return o.conversion(this.start,this.end,t,e)},o.conversion=function(t,e,i,n){return void 0===n&&(n=0),0!=i&&e-t!=0?{offset:t,scale:i/(e-t-n)}:{offset:0,scale:1}},o.prototype._onDragStart=function(t){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(t)&&this.props.touch.allowDragging&&(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))},o.prototype._onDrag=function(t){if(t&&this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging){var e=this.options.direction;c(e);var i="horizontal"==e?t.deltaX:t.deltaY;i-=this.deltaDifference;var n=this.props.touch.end-this.props.touch.start;n-=x.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end);var o,r="horizontal"==e?this.body.domProps.center.width:this.body.domProps.center.height;o=this.options.rtl?i/r*n:-i/r*n;var s=this.props.touch.start+o,a=this.props.touch.end+o,l=x.snapAwayFromHidden(this.body.hiddenDates,s,this.previousDelta-i,!0),d=x.snapAwayFromHidden(this.body.hiddenDates,a,this.previousDelta-i,!0);if(l!=s||d!=a)return this.deltaDifference+=i,this.props.touch.start=l,this.props.touch.end=d,void this._onDrag(t);this.previousDelta=i,this._applyRange(s,a);var h=new Date(this.start),u=new Date(this.end);this.body.emitter.emit("rangechange",{start:h,end:u,byUser:!0,event:t}),this.body.emitter.emit("panmove")}},o.prototype._onDragEnd=function(t){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:t}))},o.prototype._onMouseWheel=function(t){var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),!(this.options.zoomKey&&!t[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&this.options.zoomable&&this.options.moveable&&this._isInsideRange(t)&&e){var i,n;if(i=e<0?1-e/5:1/(1+e/5),this.rolling)n=this.start+(this.end-this.start)*this.options.rollingMode.offset;else{var o=this.getPointer({x:t.clientX,y:t.clientY},this.body.dom.center);n=this._pointerToDate(o)}this.zoom(i,n,e,t),t.preventDefault()}},o.prototype._onTouch=function(t){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.scaleOffset=0,this.deltaDifference=0,_.preventDefault(t)},o.prototype._onPinch=function(t){if(this.options.zoomable&&this.options.moveable){_.preventDefault(t),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(t.center,this.body.dom.center)),this.stopRolling();var e=1/(t.scale+this.scaleOffset),i=this._pointerToDate(this.props.touch.center),n=x.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),o=x.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,i),r=n-o,s=i-o+(this.props.touch.start-(i-o))*e,a=i+r+(this.props.touch.end-(i+r))*e;this.startToFront=1-e<=0,this.endToFront=e-1<=0;var l=x.snapAwayFromHidden(this.body.hiddenDates,s,1-e,!0),d=x.snapAwayFromHidden(this.body.hiddenDates,a,e-1,!0);l==s&&d==a||(this.props.touch.start=l,this.props.touch.end=d,this.scaleOffset=1-t.scale,s=l,a=d);var h={animation:!1,byUser:!0,event:t};this.setRange(s,a,h),this.startToFront=!1,this.endToFront=!0}},o.prototype._isInsideRange=function(t){var e,i=t.center?t.center.x:t.clientX;e=this.options.rtl?i-_.getAbsoluteLeft(this.body.dom.centerContainer):_.getAbsoluteRight(this.body.dom.centerContainer)-i;var n=this.body.util.toTime(e);return n>=this.start&&n<=this.end},o.prototype._pointerToDate=function(t){var e,i=this.options.direction;if(c(i),"horizontal"==i)return this.body.util.toTime(t.x).valueOf();var n=this.body.domProps.center.height;return e=this.conversion(n),t.y/e.scale+e.offset},o.prototype.getPointer=function(t,e){return this.options.rtl?{x:_.getAbsoluteRight(e)-t.x,y:t.y-_.getAbsoluteTop(e)}:{x:t.x-_.getAbsoluteLeft(e),y:t.y-_.getAbsoluteTop(e)}},o.prototype.zoom=function(t,e,i,n){null==e&&(e=(this.start+this.end)/2);var o=x.getHiddenDurationBetween(this.body.hiddenDates,this.start,this.end),r=x.getHiddenDurationBefore(this.options.moment,this.body.hiddenDates,this,e),s=o-r,a=e-r+(this.start-(e-r))*t,l=e+s+(this.end-(e+s))*t;this.startToFront=!(0<i),this.endToFront=!(0<-i);var d=x.snapAwayFromHidden(this.body.hiddenDates,a,i,!0),h=x.snapAwayFromHidden(this.body.hiddenDates,l,-i,!0);d==a&&h==l||(a=d,l=h);var u={animation:!1,byUser:!0,event:n};this.setRange(a,l,u),this.startToFront=!1,this.endToFront=!0},o.prototype.move=function(t){var e=this.end-this.start,i=this.start+e*t,n=this.end+e*t;this.start=i,this.end=n},o.prototype.moveTo=function(t){var e=(this.start+this.end)/2-t,i=this.start-e,n=this.end-e;this.setRange(i,n,{animation:!1,byUser:!0,event:null})},t.exports=o},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function o(){}var r=n(i(19)),s=n(i(6)),a=i(44),u=i(10),l=i(37),c=i(2),d=i(45),h=i(97),f=i(36),p=i(46);a(o.prototype),o.prototype._create=function(t){function e(t){this.isActive()&&this.emit("mousewheel",t);var e=0,i=0;if("detail"in t&&(i=-1*t.detail),"wheelDelta"in t&&(i=t.wheelDelta),"wheelDeltaY"in t&&(i=t.wheelDeltaY),"wheelDeltaX"in t&&(e=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=-1*i,i=0),"deltaY"in t&&(i=-1*t.deltaY),"deltaX"in t&&(e=t.deltaX),this.options.zoomKey&&!t[this.options.zoomKey])if(t.preventDefault(),this.options.verticalScroll&&Math.abs(i)>=Math.abs(e)){var n=this.props.scrollTop+i;this.isActive()&&(this._setScrollTop(n),this._redraw(),this.emit("scroll",t))}else if(this.options.horizontalScroll){var o=(Math.abs(e)>=Math.abs(i)?e:i)/120*(this.range.end-this.range.start)/20,r=this.range.start+o,s=this.range.end+o,a={animation:!1,byUser:!0,event:t};this.range.setRange(r,s,a)}}function i(t){if(n.options.verticalScroll&&(t.preventDefault(),n.isActive())){var e=-t.target.scrollTop;n._setScrollTop(e),n._redraw(),n.emit("scrollSide",t)}}this.dom={},this.dom.container=t,this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",function(){!0===this.initialDrawDone&&this._redraw()}.bind(this)),this.on("rangechanged",function(){this.initialRangeChangeDone||(this.initialRangeChangeDone=!0)}.bind(this)),this.on("touch",this._onTouch.bind(this)),this.on("panmove",this._onDrag.bind(this));var n=this;this._origRedraw=this._redraw.bind(this),this._redraw=c.throttle(this._origRedraw),this.on("_change",function(t){n.itemSet&&n.itemSet.initialItemSetDrawn&&t&&1==t.queue?n._redraw():n._origRedraw()}),this.hammer=new u(this.dom.root);var o=this.hammer.get("pinch").set({enable:!0});l.disablePreventDefaultVertically(o),this.hammer.get("pan").set({threshold:5,direction:u.DIRECTION_HORIZONTAL}),this.listeners={},["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(function(e){function t(t){n.isActive()&&n.emit(e,t)}n.hammer.on(e,t),n.listeners[e]=t}),l.onTouch(this.hammer,function(t){n.emit("touch",t)}.bind(this)),l.onRelease(this.hammer,function(t){n.emit("release",t)}.bind(this)),this.dom.centerContainer.addEventListener?(this.dom.centerContainer.addEventListener("mousewheel",e.bind(this),!1),this.dom.centerContainer.addEventListener("DOMMouseScroll",e.bind(this),!1)):this.dom.centerContainer.attachEvent("onmousewheel",e.bind(this)),this.dom.left.parentNode.addEventListener("scroll",i.bind(this)),this.dom.right.parentNode.addEventListener("scroll",i.bind(this));var r=!1;if(this.dom.center.addEventListener("dragover",function(t){if(t.preventDefault&&t.preventDefault(),!(-1<!t.target.className.indexOf("vis")||r))return t.dataTransfer.dropEffect="move",!(r=!0)}.bind(this),!1),this.dom.center.addEventListener("drop",function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation();try{var e=JSON.parse(t.dataTransfer.getData("text"));if(!e||!e.content)return}catch(t){return!1}return r=!1,t.center={x:t.clientX,y:t.clientY},"item"!==e.target?n.itemSet._onAddItem(t):n.itemSet._onDropObjectOnItem(t),n.emit("drop",n.getEventProperties(t)),!1}.bind(this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!t)throw new Error("No container provided");t.appendChild(this.dom.root)},o.prototype.setOptions=function(e){if(e){if(c.selectiveExtend(["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","rtl","zoomKey","horizontalScroll","verticalScroll"],this.options,e),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),"object"!==(0,s.default)(this.options.orientation)&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in e&&("string"==typeof e.orientation?this.options.orientation={item:e.orientation,axis:e.orientation}:"object"===(0,s.default)(e.orientation)&&("item"in e.orientation&&(this.options.orientation.item=e.orientation.item),"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis))),"both"===this.options.orientation.axis){if(!this.timeAxis2){var i=this.timeAxis2=new d(this.body);i.setOptions=function(t){var e=t?c.extend({},t):{};e.orientation="top",d.prototype.setOptions.call(i,e)},this.components.push(i)}}else if(this.timeAxis2){var t=this.components.indexOf(this.timeAxis2);-1!==t&&this.components.splice(t,1),this.timeAxis2.destroy(),this.timeAxis2=null}if("function"==typeof e.drawPoints&&(e.drawPoints={onRender:e.drawPoints}),"hiddenDates"in this.options&&f.convertHiddenOptions(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in e&&(e.clickToUse?this.activator||(this.activator=new h(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),"showCustomTime"in e)throw new Error("Option `showCustomTime` is deprecated. Create a custom time bar via timeline.addCustomTime(time [, id])");this._initAutoResize()}if(this.components.forEach(function(t){return t.setOptions(e)}),"configure"in e){this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(e.configure);var n=c.deepExtend({},this.options);this.components.forEach(function(t){c.deepExtend(n,t.options)}),this.configurator.setModuleOptions({global:n})}this._redraw()},o.prototype.isActive=function(){return!this.activator||this.activator.active},o.prototype.destroy=function(){for(var t in this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator),this.listeners)this.listeners.hasOwnProperty(t)&&delete this.listeners[t];this.listeners=null,this.hammer=null,this.components.forEach(function(t){return t.destroy()}),this.body=null},o.prototype.setCustomTime=function(t,e){var i=this.customTimes.filter(function(t){return e===t.options.id});if(0===i.length)throw new Error("No custom time bar found with id "+(0,r.default)(e));0<i.length&&i[0].setCustomTime(t)},o.prototype.getCustomTime=function(e){var t=this.customTimes.filter(function(t){return t.options.id===e});if(0===t.length)throw new Error("No custom time bar found with id "+(0,r.default)(e));return t[0].getCustomTime()},o.prototype.setCustomTimeTitle=function(t,e){var i=this.customTimes.filter(function(t){return t.options.id===e});if(0===i.length)throw new Error("No custom time bar found with id "+(0,r.default)(e));if(0<i.length)return i[0].setCustomTitle(t)},o.prototype.getEventProperties=function(t){return{event:t}},o.prototype.addCustomTime=function(t,e){var i=void 0!==t?c.convert(t,"Date").valueOf():new Date;if(this.customTimes.some(function(t){return t.options.id===e}))throw new Error("A custom time with id "+(0,r.default)(e)+" already exists");var n=new p(this.body,c.extend({},this.options,{time:i,id:e}));return this.customTimes.push(n),this.components.push(n),this._redraw(),e},o.prototype.removeCustomTime=function(e){var t=this.customTimes.filter(function(t){return t.options.id===e});if(0===t.length)throw new Error("No custom time bar found with id "+(0,r.default)(e));t.forEach(function(t){this.customTimes.splice(this.customTimes.indexOf(t),1),this.components.splice(this.components.indexOf(t),1),t.destroy()}.bind(this))},o.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]},o.prototype.fit=function(t,e){var i=this.getDataRange();if(null!==i.min||null!==i.max){var n=i.max-i.min,o=new Date(i.min.valueOf()-.01*n),r=new Date(i.max.valueOf()+.01*n),s=!t||void 0===t.animation||t.animation;this.range.setRange(o,r,{animation:s},e)}},o.prototype.getDataRange=function(){throw new Error("Cannot invoke abstract method getDataRange")},o.prototype.setWindow=function(t,e,i,n){var o,r;"function"==typeof arguments[2]&&(n=arguments[2],i={}),1==arguments.length?(o=void 0===(r=t).animation||r.animation,this.range.setRange(r.start,r.end,{animation:o})):2==arguments.length&&"function"==typeof e?(n=e,o=void 0===(r=t).animation||r.animation,this.range.setRange(r.start,r.end,{animation:o},n)):(o=!i||void 0===i.animation||i.animation,this.range.setRange(t,e,{animation:o},n))},o.prototype.moveTo=function(t,e,i){"function"==typeof arguments[1]&&(i=arguments[1],e={});var n=this.range.end-this.range.start,o=c.convert(t,"Date").valueOf(),r=o-n/2,s=o+n/2,a=!e||void 0===e.animation||e.animation;this.range.setRange(r,s,{animation:a},i)},o.prototype.getWindow=function(){var t=this.range.getRange();return{start:new Date(t.start),end:new Date(t.end)}},o.prototype.zoomIn=function(t,e,i){if(!(!t||t<0||1<t)){"function"==typeof arguments[1]&&(i=arguments[1],e={});var n=this.getWindow(),o=n.start.valueOf(),r=n.end.valueOf(),s=r-o,a=(s-s/(1+t))/2,l=o+a,d=r-a;this.setWindow(l,d,e,i)}},o.prototype.zoomOut=function(t,e,i){if(!(!t||t<0||1<t)){"function"==typeof arguments[1]&&(i=arguments[1],e={});var n=this.getWindow(),o=n.start.valueOf(),r=n.end.valueOf(),s=r-o,a=o-s*t/2,l=r+s*t/2;this.setWindow(a,l,e,i)}},o.prototype.redraw=function(){this._redraw()},o.prototype._redraw=function(){this.redrawCount++;var e=!1,t=this.options,i=this.props,n=this.dom;if(n&&n.container&&0!=n.root.offsetWidth){f.updateHiddenDates(this.options.moment,this.body,this.options.hiddenDates),"top"==t.orientation?(c.addClassName(n.root,"vis-top"),c.removeClassName(n.root,"vis-bottom")):(c.removeClassName(n.root,"vis-top"),c.addClassName(n.root,"vis-bottom")),n.root.style.maxHeight=c.option.asSize(t.maxHeight,""),n.root.style.minHeight=c.option.asSize(t.minHeight,""),n.root.style.width=c.option.asSize(t.width,""),i.border.left=(n.centerContainer.offsetWidth-n.centerContainer.clientWidth)/2,i.border.right=i.border.left,i.border.top=(n.centerContainer.offsetHeight-n.centerContainer.clientHeight)/2,i.border.bottom=i.border.top,i.borderRootHeight=n.root.offsetHeight-n.root.clientHeight,i.borderRootWidth=n.root.offsetWidth-n.root.clientWidth,0===n.centerContainer.clientHeight&&(i.border.left=i.border.top,i.border.right=i.border.left),0===n.root.clientHeight&&(i.borderRootWidth=i.borderRootHeight),i.center.height=n.center.offsetHeight,i.left.height=n.left.offsetHeight,i.right.height=n.right.offsetHeight,i.top.height=n.top.clientHeight||-i.border.top,i.bottom.height=n.bottom.clientHeight||-i.border.bottom;var o=Math.max(i.left.height,i.center.height,i.right.height),r=i.top.height+o+i.bottom.height+i.borderRootHeight+i.border.top+i.border.bottom;n.root.style.height=c.option.asSize(t.height,r+"px"),i.root.height=n.root.offsetHeight,i.background.height=i.root.height-i.borderRootHeight;var s=i.root.height-i.top.height-i.bottom.height-i.borderRootHeight;i.centerContainer.height=s,i.leftContainer.height=s,i.rightContainer.height=i.leftContainer.height,i.root.width=n.root.offsetWidth,i.background.width=i.root.width-i.borderRootWidth,this.initialDrawDone||(i.scrollbarWidth=c.getScrollBarWidth()),t.verticalScroll?t.rtl?(i.left.width=n.leftContainer.clientWidth||-i.border.left,i.right.width=n.rightContainer.clientWidth+i.scrollbarWidth||-i.border.right):(i.left.width=n.leftContainer.clientWidth+i.scrollbarWidth||-i.border.left,i.right.width=n.rightContainer.clientWidth||-i.border.right):(i.left.width=n.leftContainer.clientWidth||-i.border.left,i.right.width=n.rightContainer.clientWidth||-i.border.right),this._setDOM();var a=this._updateScrollTop();"top"!=t.orientation.item&&(a+=Math.max(i.centerContainer.height-i.center.height-i.border.top-i.border.bottom,0)),n.center.style.top=a+"px";var l=0==i.scrollTop?"hidden":"",d=i.scrollTop==i.scrollTopMin?"hidden":"";n.shadowTop.style.visibility=l,n.shadowBottom.style.visibility=d,n.shadowTopLeft.style.visibility=l,n.shadowBottomLeft.style.visibility=d,n.shadowTopRight.style.visibility=l,n.shadowBottomRight.style.visibility=d,t.verticalScroll&&(n.rightContainer.className="vis-panel vis-right vis-vertical-scroll",n.leftContainer.className="vis-panel vis-left vis-vertical-scroll",n.shadowTopRight.style.visibility="hidden",n.shadowBottomRight.style.visibility="hidden",n.shadowTopLeft.style.visibility="hidden",n.shadowBottomLeft.style.visibility="hidden",n.left.style.top="0px",n.right.style.top="0px"),(!t.verticalScroll||i.center.height<i.centerContainer.height)&&(n.left.style.top=a+"px",n.right.style.top=a+"px",n.rightContainer.className=n.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),n.leftContainer.className=n.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),i.left.width=n.leftContainer.clientWidth||-i.border.left,i.right.width=n.rightContainer.clientWidth||-i.border.right,this._setDOM());var h=i.center.height>i.centerContainer.height;if(this.hammer.get("pan").set({direction:h?u.DIRECTION_ALL:u.DIRECTION_HORIZONTAL}),this.components.forEach(function(t){e=t.redraw()||e}),e){if(this.redrawCount<5)return void this.body.emitter.emit("_change");console.log("WARNING: infinite loop in redraw?")}else this.redrawCount=0;this.body.emitter.emit("changed")}},o.prototype._setDOM=function(){var t=this.props,e=this.dom;t.leftContainer.width=t.left.width,t.rightContainer.width=t.right.width;var i=t.root.width-t.left.width-t.right.width-t.borderRootWidth;t.center.width=i,t.centerContainer.width=i,t.top.width=i,t.bottom.width=i,e.background.style.height=t.background.height+"px",e.backgroundVertical.style.height=t.background.height+"px",e.backgroundHorizontal.style.height=t.centerContainer.height+"px",e.centerContainer.style.height=t.centerContainer.height+"px",e.leftContainer.style.height=t.leftContainer.height+"px",e.rightContainer.style.height=t.rightContainer.height+"px",e.background.style.width=t.background.width+"px",e.backgroundVertical.style.width=t.centerContainer.width+"px",e.backgroundHorizontal.style.width=t.background.width+"px",e.centerContainer.style.width=t.center.width+"px",e.top.style.width=t.top.width+"px",e.bottom.style.width=t.bottom.width+"px",e.background.style.left="0",e.background.style.top="0",e.backgroundVertical.style.left=t.left.width+t.border.left+"px",e.backgroundVertical.style.top="0",e.backgroundHorizontal.style.left="0",e.backgroundHorizontal.style.top=t.top.height+"px",e.centerContainer.style.left=t.left.width+"px",e.centerContainer.style.top=t.top.height+"px",e.leftContainer.style.left="0",e.leftContainer.style.top=t.top.height+"px",e.rightContainer.style.left=t.left.width+t.center.width+"px",e.rightContainer.style.top=t.top.height+"px",e.top.style.left=t.left.width+"px",e.top.style.top="0",e.bottom.style.left=t.left.width+"px",e.bottom.style.top=t.top.height+t.centerContainer.height+"px",e.center.style.left="0",e.left.style.left="0",e.right.style.left="0"},o.prototype.repaint=function(){throw new Error("Function repaint is deprecated. Use redraw instead.")},o.prototype.setCurrentTime=function(t){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(t)},o.prototype.getCurrentTime=function(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()},o.prototype._toTime=function(t){return f.toTime(this,t,this.props.center.width)},o.prototype._toGlobalTime=function(t){return f.toTime(this,t,this.props.root.width)},o.prototype._toScreen=function(t){return f.toScreen(this,t,this.props.center.width)},o.prototype._toGlobalScreen=function(t){return f.toScreen(this,t,this.props.root.width)},o.prototype._initAutoResize=function(){1==this.options.autoResize?this._startAutoResize():this._stopAutoResize()},o.prototype._startAutoResize=function(){var t=this;this._stopAutoResize(),this._onResize=function(){1==t.options.autoResize?t.dom.root&&(t.dom.root.offsetWidth==t.props.lastWidth&&t.dom.root.offsetHeight==t.props.lastHeight||(t.props.lastWidth=t.dom.root.offsetWidth,t.props.lastHeight=t.dom.root.offsetHeight,t.props.scrollbarWidth=c.getScrollBarWidth(),t.body.emitter.emit("_change"))):t._stopAutoResize()},c.addEventListener(window,"resize",this._onResize),t.dom.root&&(t.props.lastWidth=t.dom.root.offsetWidth,t.props.lastHeight=t.dom.root.offsetHeight),this.watchTimer=setInterval(this._onResize,1e3)},o.prototype._stopAutoResize=function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(c.removeEventListener(window,"resize",this._onResize),this._onResize=null)},o.prototype._onTouch=function(t){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop},o.prototype._onPinch=function(t){this.touch.allowDragging=!1},o.prototype._onDrag=function(t){if(t&&this.touch.allowDragging){var e=t.deltaY,i=this._getScrollTop(),n=this._setScrollTop(this.touch.initialScrollTop+e);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),n!=i&&this.emit("verticalDrag")}},o.prototype._setScrollTop=function(t){return this.props.scrollTop=t,this._updateScrollTop(),this.props.scrollTop},o.prototype._updateScrollTop=function(){var t=Math.min(this.props.centerContainer.height-this.props.center.height,0);return t!=this.props.scrollTopMin&&("top"!=this.options.orientation.item&&(this.props.scrollTop+=t-this.props.scrollTopMin),this.props.scrollTopMin=t),0<this.props.scrollTop&&(this.props.scrollTop=0),this.props.scrollTop<t&&(this.props.scrollTop=t),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop},o.prototype._getScrollTop=function(){return this.props.scrollTop},o.prototype._createConfigurator=function(){throw new Error("Cannot invoke abstract method _createConfigurator")},t.exports=o},function(t,e,i){function r(t,e,i,n,o){this.moment=s,this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(t,e,i),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Array.isArray(n)?this.hiddenDates=n:this.hiddenDates=null!=n?[n]:[],this.format=r.FORMAT,this.options=o||{}}var s=i(9),n=i(36),o=i(2);r.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},r.prototype.setMoment=function(t){this.moment=t,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())},r.prototype.setFormat=function(t){var e=o.deepExtend({},r.FORMAT);this.format=o.deepExtend(e,t)},r.prototype.setRange=function(t,e,i){if(!(t instanceof Date&&e instanceof Date))throw"No legal start or end date in method setRange";this._start=null!=t?this.moment(t.valueOf()):new Date,this._end=null!=e?this.moment(e.valueOf()):new Date,this.autoScale&&this.setMinimumStep(i)},r.prototype.start=function(){this.current=this._start.clone(),this.roundToMinor()},r.prototype.roundToMinor=function(){switch("week"==this.scale&&this.current.weekday(0),this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"week":case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(1!=this.step)switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year")}},r.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()},r.prototype.next=function(){var t=this.current.valueOf();switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.month()<6?this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!=0&&this.current.add(this.step-this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"week":if(0!==this.current.weekday())this.current.weekday(0),this.current.add(this.step,"week");else if(!1===this.options.showMajorLabels)this.current.add(this.step,"week");else{var e=this.current.clone();e.add(1,"week"),e.isSame(this.current,"month")?this.current.add(this.step,"week"):(this.current.add(this.step,"week"),this.current.date(1))}break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year")}if(1!=this.step)switch(this.scale){case"millisecond":0<this.current.milliseconds()&&this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":0<this.current.seconds()&&this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":0<this.current.minutes()&&this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":0<this.current.hours()&&this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"week":this.current.week()<this.step&&this.current.week(1);break;case"month":this.current.month()<this.step&&this.current.month(0)}this.current.valueOf()==t&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,n.stepOverHiddenDates(this.moment,this,t)},r.prototype.getCurrent=function(){return this.current},r.prototype.setScale=function(t){t&&"string"==typeof t.scale&&(this.scale=t.scale,this.step=0<t.step?t.step:1,this.autoScale=!1)},r.prototype.setAutoScale=function(t){this.autoScale=t},r.prototype.setMinimumStep=function(t){null!=t&&(t<31104e9&&(this.scale="year",this.step=1e3),t<15552e9&&(this.scale="year",this.step=500),t<31104e8&&(this.scale="year",this.step=100),t<15552e8&&(this.scale="year",this.step=50),t<31104e7&&(this.scale="year",this.step=10),t<15552e7&&(this.scale="year",this.step=5),t<31104e6&&(this.scale="year",this.step=1),t<7776e6&&(this.scale="month",this.step=3),t<2592e6&&(this.scale="month",this.step=1),t<432e6&&(this.scale="day",this.step=5),t<1728e5&&(this.scale="day",this.step=2),t<864e5&&(this.scale="day",this.step=1),t<432e5&&(this.scale="weekday",this.step=1),t<144e5&&(this.scale="hour",this.step=4),t<36e5&&(this.scale="hour",this.step=1),t<9e5&&(this.scale="minute",this.step=15),t<6e5&&(this.scale="minute",this.step=10),t<3e5&&(this.scale="minute",this.step=5),t<6e4&&(this.scale="minute",this.step=1),t<15e3&&(this.scale="second",this.step=15),t<1e4&&(this.scale="second",this.step=10),t<5e3&&(this.scale="second",this.step=5),t<1e3&&(this.scale="second",this.step=1),t<200&&(this.scale="millisecond",this.step=200),t<100&&(this.scale="millisecond",this.step=100),t<50&&(this.scale="millisecond",this.step=50),t<10&&(this.scale="millisecond",this.step=10),t<5&&(this.scale="millisecond",this.step=5),t<1&&(this.scale="millisecond",this.step=1))},r.snap=function(t,e,i){var n=s(t);if("year"==e){var o=n.year()+Math.round(n.month()/12);n.year(Math.round(o/i)*i),n.month(0),n.date(0),n.hours(0),n.minutes(0),n.seconds(0),n.milliseconds(0)}else if("month"==e)15<n.date()?(n.date(1),n.add(1,"month")):n.date(1),n.hours(0),n.minutes(0),n.seconds(0),n.milliseconds(0);else if("week"==e)2<n.weekday()?(n.weekday(0),n.add(1,"week")):n.weekday(0),n.hours(0),n.minutes(0),n.seconds(0),n.milliseconds(0);else if("day"==e){switch(i){case 5:case 2:n.hours(24*Math.round(n.hours()/24));break;default:n.hours(12*Math.round(n.hours()/12))}n.minutes(0),n.seconds(0),n.milliseconds(0)}else if("weekday"==e){switch(i){case 5:case 2:n.hours(12*Math.round(n.hours()/12));break;default:n.hours(6*Math.round(n.hours()/6))}n.minutes(0),n.seconds(0),n.milliseconds(0)}else if("hour"==e){switch(i){case 4:n.minutes(60*Math.round(n.minutes()/60));break;default:n.minutes(30*Math.round(n.minutes()/30))}n.seconds(0),n.milliseconds(0)}else if("minute"==e){switch(i){case 15:case 10:n.minutes(5*Math.round(n.minutes()/5)),n.seconds(0);break;case 5:n.seconds(60*Math.round(n.seconds()/60));break;default:n.seconds(30*Math.round(n.seconds()/30))}n.milliseconds(0)}else if("second"==e)switch(i){case 15:case 10:n.seconds(5*Math.round(n.seconds()/5)),n.milliseconds(0);break;case 5:n.milliseconds(1e3*Math.round(n.milliseconds()/1e3));break;default:n.milliseconds(500*Math.round(n.milliseconds()/500))}else if("millisecond"==e){var r=5<i?i/2:1;n.milliseconds(Math.round(n.milliseconds()/r)*r)}return n},r.prototype.isMajor=function(){if(1==this.switchedYear)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedMonth)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(1==this.switchedDay)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}var t=this.moment(this.current);switch(this.scale){case"millisecond":return 0==t.milliseconds();case"second":return 0==t.seconds();case"minute":return 0==t.hours()&&0==t.minutes();case"hour":return 0==t.hours();case"weekday":case"day":case"week":return 1==t.date();case"month":return 0==t.month();case"year":default:return!1}},r.prototype.getLabelMinor=function(t){if(null==t&&(t=this.current),t instanceof Date&&(t=this.moment(t)),"function"==typeof this.format.minorLabels)return this.format.minorLabels(t,this.scale,this.step);var e=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(this.isMajor()&&0!==t.weekday())return"";default:return e&&0<e.length?this.moment(t).format(e):""}},r.prototype.getLabelMajor=function(t){if(null==t&&(t=this.current),t instanceof Date&&(t=this.moment(t)),"function"==typeof this.format.majorLabels)return this.format.majorLabels(t,this.scale,this.step);var e=this.format.majorLabels[this.scale];return e&&0<e.length?this.moment(t).format(e):""},r.prototype.getClassName=function(){function t(t){return t/a%2==0?" vis-even":" vis-odd"}function e(t){return t.isSame(new Date,"day")?" vis-today":t.isSame(o().add(1,"day"),"day")?" vis-tomorrow":t.isSame(o().add(-1,"day"),"day")?" vis-yesterday":""}function i(t){return t.isSame(new Date,"week")?" vis-current-week":""}function n(t){return t.isSame(new Date,"month")?" vis-current-month":""}var o=this.moment,r=this.moment(this.current),s=r.locale?r.locale("en"):r.lang("en"),a=this.step,l=[];switch(this.scale){case"millisecond":l.push(e(s)),l.push(t(s.milliseconds()));break;case"second":l.push(e(s)),l.push(t(s.seconds()));break;case"minute":l.push(e(s)),l.push(t(s.minutes()));break;case"hour":l.push("vis-h"+s.hours()+(4==this.step?"-h"+(s.hours()+4):"")),l.push(e(s)),l.push(t(s.hours()));break;case"weekday":l.push("vis-"+s.format("dddd").toLowerCase()),l.push(e(s)),l.push(i(s)),l.push(t(s.date()));break;case"day":l.push("vis-day"+s.date()),l.push("vis-"+s.format("MMMM").toLowerCase()),l.push(e(s)),l.push(n(s)),l.push(this.step<=2?e(s):""),l.push(this.step<=2?"vis-"+s.format("dddd").toLowerCase():""),l.push(t(s.date()-1));break;case"week":l.push("vis-week"+s.format("w")),l.push(i(s)),l.push(t(s.week()));break;case"month":l.push("vis-"+s.format("MMMM").toLowerCase()),l.push(n(s)),l.push(t(s.month()));break;case"year":l.push("vis-year"+s.year()),l.push(s.isSame(new Date,"year")?" vis-current-year":""),l.push(t(s.year()))}return l.filter(String).join(" ")},t.exports=r},function(t,e,i){function n(t,e){this.body=t,this.defaultOptions={rtl:!1,showCurrentTime:!0,moment:s,locales:a,locale:"en"},this.options=o.extend({},this.defaultOptions),this.offset=0,this._create(),this.setOptions(e)}var o=i(2),r=i(16),s=i(9),a=i(98);(n.prototype=new r)._create=function(){var t=document.createElement("div");t.className="vis-current-time",t.style.position="absolute",t.style.top="0px",t.style.height="100%",this.bar=t},n.prototype.destroy=function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null},n.prototype.setOptions=function(t){t&&o.selectiveExtend(["rtl","showCurrentTime","moment","locale","locales"],this.options,t)},n.prototype.redraw=function(){if(this.options.showCurrentTime){var t=this.body.dom.backgroundVertical;this.bar.parentNode!=t&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),t.appendChild(this.bar),this.start());var e=this.options.moment((new Date).valueOf()+this.offset),i=this.body.util.toScreen(e),n=this.options.locales[this.options.locale];n||(this.warned||(console.log("WARNING: options.locales['"+this.options.locale+"'] not found. See http://visjs.org/docs/timeline/#Localization"),this.warned=!0),n=this.options.locales.en);var o=n.current+" "+n.time+": "+e.format("dddd, MMMM Do YYYY, H:mm:ss");o=o.charAt(0).toUpperCase()+o.substring(1),this.options.rtl?this.bar.style.right=i+"px":this.bar.style.left=i+"px",this.bar.title=o}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1},n.prototype.start=function(){var i=this;!function t(){i.stop();var e=1/i.body.range.conversion(i.body.domProps.center.width).scale/10;e<30&&(e=30),1e3<e&&(e=1e3),i.redraw(),i.body.emitter.emit("currentTimeTick"),i.currentTimeTimer=setTimeout(t,e)}()},n.prototype.stop=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)},n.prototype.setCurrentTime=function(t){var e=o.convert(t,"Date").valueOf(),i=(new Date).valueOf();this.offset=e-i,this.redraw()},n.prototype.getCurrentTime=function(){return new Date((new Date).valueOf()+this.offset)},t.exports=n},function(t,e,i){function n(t,e,i){if(this.groupId=t,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.doInnerStack=!1,this.subgroupIndex=0,this.subgroupOrderer=e&&e.subgroupOrder,this.itemSet=i,this.isVisible=null,this.stackDirty=!0,e&&e.nestedGroups&&(this.nestedGroups=e.nestedGroups,0==e.showNested?this.showNested=!1:this.showNested=!0),e&&e.subgroupStack)if("boolean"==typeof e.subgroupStack)this.doInnerStack=e.subgroupStack,this.subgroupStackAll=e.subgroupStack;else for(var n in e.subgroupStack)this.subgroupStack[n]=e.subgroupStack[n],this.doInnerStack=this.doInnerStack||e.subgroupStack[n];this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;var o=this;this.itemSet.body.emitter.on("checkRangedItems",function(){o.checkRangedItems=!0}),this._create(),this.setData(e)}var o,r=i(8),s=(o=r)&&o.__esModule?o:{default:o},v=i(2),u=i(100);n.prototype._create=function(){var t=document.createElement("div");this.itemSet.options.groupEditable.order?t.className="vis-label draggable":t.className="vis-label",this.dom.label=t;var e=document.createElement("div");e.className="vis-inner",t.appendChild(e),this.dom.inner=e;var i=document.createElement("div");i.className="vis-group",(i["timeline-group"]=this).dom.foreground=i,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)},n.prototype.setData=function(t){var e,i;if((e=this.itemSet.options&&this.itemSet.options.groupTemplate?(i=this.itemSet.options.groupTemplate.bind(this))(t,this.dom.inner):t&&t.content)instanceof Element){for(this.dom.inner.appendChild(e);this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(e)}else e instanceof Object?i(t,this.dom.inner):this.dom.inner.innerHTML=null!=e?e:this.groupId||"";if(this.dom.label.title=t&&t.title||"",this.dom.inner.firstChild?v.removeClassName(this.dom.inner,"vis-hidden"):v.addClassName(this.dom.inner,"vis-hidden"),t&&t.nestedGroups){this.nestedGroups&&this.nestedGroups==t.nestedGroups||(this.nestedGroups=t.nestedGroups),void 0===t.showNested&&void 0!==this.showNested||(0==t.showNested?this.showNested=!1:this.showNested=!0),v.addClassName(this.dom.label,"vis-nesting-group");var n=this.itemSet.options.rtl?"collapsed-rtl":"collapsed";this.showNested?(v.removeClassName(this.dom.label,n),v.addClassName(this.dom.label,"expanded")):(v.removeClassName(this.dom.label,"expanded"),v.addClassName(this.dom.label,n))}else this.nestedGroups&&(this.nestedGroups=null,n=this.itemSet.options.rtl?"collapsed-rtl":"collapsed",v.removeClassName(this.dom.label,n),v.removeClassName(this.dom.label,"expanded"),v.removeClassName(this.dom.label,"vis-nesting-group"));t&&t.nestedInGroup&&(v.addClassName(this.dom.label,"vis-nested-group"),this.itemSet.options&&this.itemSet.options.rtl?this.dom.inner.style.paddingRight="30px":this.dom.inner.style.paddingLeft="30px");var o=t&&t.className||null;o!=this.className&&(this.className&&(v.removeClassName(this.dom.label,this.className),v.removeClassName(this.dom.foreground,this.className),v.removeClassName(this.dom.background,this.className),v.removeClassName(this.dom.axis,this.className)),v.addClassName(this.dom.label,o),v.addClassName(this.dom.foreground,o),v.addClassName(this.dom.background,o),v.addClassName(this.dom.axis,o),this.className=o),this.style&&(v.removeCssText(this.dom.label,this.style),this.style=null),t&&t.style&&(v.addCssText(this.dom.label,t.style),this.style=t.style)},n.prototype.getLabelWidth=function(){return this.props.label.width},n.prototype._didMarkerHeightChange=function(){var t=this.dom.marker.clientHeight;if(t!=this.lastMarkerHeight){this.lastMarkerHeight=t;var i={},n=0;if(v.forEach(this.items,function(t,e){t.dirty=!0,t.displayed&&(i[e]=t.redraw(!0),n=i[e].length)}),0<n)for(var e=0;e<n;e++)v.forEach(i,function(t){t[e]()});return!0}},n.prototype._calculateGroupSizeAndPosition=function(){var t=this.dom.foreground.offsetTop,e=this.dom.foreground.offsetLeft,i=this.dom.foreground.offsetWidth;this.top=t,this.right=e,this.width=i},n.prototype._redrawItems=function(t,e,i,n){if(t||this.stackDirty||this.isVisible&&!e){var o={},r=null;if("function"==typeof this.itemSet.options.order){var s=this,a={},l=0;if(v.forEach(this.items,function(t,e){t.displayed||(a[e]=t.redraw(!0),l=a[e].length,s.visibleItems.push(t))}),0<l)for(var d=0;d<l;d++)v.forEach(a,function(t){t[d]()});if(v.forEach(this.items,function(t){t.repositionX(!1)}),this.doInnerStack&&this.itemSet.options.stackSubgroups){for(r in this.subgroups)o[r]=this.subgroups[r].items.slice().sort(function(t,e){return s.itemSet.options.order(t.data,e.data)});u.stackSubgroupsWithInnerStack(o,i,this.subgroups)}else{var h=this.orderedItems.byStart.slice().sort(function(t,e){return s.itemSet.options.order(t.data,e.data)});u.stack(h,i,!0)}this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,n)}else if(this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,n),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){for(r in this.subgroups)o[r]=this.subgroups[r].items;u.stackSubgroupsWithInnerStack(o,i,this.subgroups)}else u.stack(this.visibleItems,i,!0);else u.nostack(this.visibleItems,i,this.subgroups,this.itemSet.options.stackSubgroups);this.stackDirty=!1}},n.prototype._didResize=function(t,e){t=v.updateProperty(this,"height",e)||t;var i=this.dom.inner.clientWidth,n=this.dom.inner.clientHeight;return t=v.updateProperty(this.props.label,"width",i)||t,v.updateProperty(this.props.label,"height",n)||t},n.prototype._applyGroupHeight=function(t){this.dom.background.style.height=t+"px",this.dom.foreground.style.height=t+"px",this.dom.label.style.height=t+"px"},n.prototype._updateItemsVerticalPosition=function(t){for(var e=0,i=this.visibleItems.length;e<i;e++){var n=this.visibleItems[e];n.repositionY(t),this.isVisible||"__background__"==this.groupId||n.displayed&&n.hide()}},n.prototype.redraw=function(t,e,i,n){var o,r,s=!1,a=this.isVisible,l=[function(){i=this._didMarkerHeightChange.bind(this)}.bind(this),this._updateSubGroupHeights.bind(this,e),this._calculateGroupSizeAndPosition.bind(this),function(){this.isVisible=this._isGroupVisible.bind(this)(t,e)}.bind(this),function(){this._redrawItems.bind(this)(i,a,e,t)}.bind(this),this._updateSubgroupsSizes.bind(this),function(){o=this._calculateHeight.bind(this)(e)}.bind(this),this._calculateGroupSizeAndPosition.bind(this),function(){s=this._didResize.bind(this)(s,o)}.bind(this),function(){this._applyGroupHeight.bind(this)(o)}.bind(this),function(){this._updateItemsVerticalPosition.bind(this)(e)}.bind(this),function(){return!this.isVisible&&this.height&&(s=!1),s}];return n?l:(l.forEach(function(t){r=t()}),r)},n.prototype._updateSubGroupHeights=function(e){if(0<(0,s.default)(this.subgroups).length){var i=this;this.resetSubgroups(),v.forEach(this.visibleItems,function(t){void 0!==t.data.subgroup&&(i.subgroups[t.data.subgroup].height=Math.max(i.subgroups[t.data.subgroup].height,t.height+e.item.vertical),i.subgroups[t.data.subgroup].visible=!0)})}},n.prototype._isGroupVisible=function(t,e){return this.top<=t.body.domProps.centerContainer.height-t.body.domProps.scrollTop+e.axis&&this.top+this.height+e.axis>=-t.body.domProps.scrollTop},n.prototype._calculateHeight=function(t){var e,i=this.visibleItems;if(0<i.length){var n=i[0].top,o=i[0].top+i[0].height;if(v.forEach(i,function(t){n=Math.min(n,t.top),o=Math.max(o,t.top+t.height)}),n>t.axis){var r=n-t.axis;o-=r,v.forEach(i,function(t){t.top-=r})}e=o+t.item.vertical/2}else e=0;return Math.max(e,this.props.label.height)},n.prototype.show=function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)},n.prototype.hide=function(){var t=this.dom.label;t.parentNode&&t.parentNode.removeChild(t);var e=this.dom.foreground;e.parentNode&&e.parentNode.removeChild(e);var i=this.dom.background;i.parentNode&&i.parentNode.removeChild(i);var n=this.dom.axis;n.parentNode&&n.parentNode.removeChild(n)},n.prototype.add=function(t){if((this.items[t.id]=t).setParent(this),this.stackDirty=!0,void 0!==t.data.subgroup&&(this._addToSubgroup(t),this.orderSubgroups()),-1==this.visibleItems.indexOf(t)){var e=this.itemSet.body.range;this._checkIfVisible(t,this.visibleItems,e)}},n.prototype._addToSubgroup=function(t,e){null!=(e=e||t.data.subgroup)&&void 0===this.subgroups[e]&&(this.subgroups[e]={height:0,top:0,start:t.data.start,end:t.data.end||t.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[e]||!1},this.subgroupIndex++),new Date(t.data.start)<new Date(this.subgroups[e].start)&&(this.subgroups[e].start=t.data.start);var i=t.data.end||t.data.start;new Date(i)>new Date(this.subgroups[e].end)&&(this.subgroups[e].end=i),this.subgroups[e].items.push(t)},n.prototype._updateSubgroupsSizes=function(){if(this.subgroups)for(var t in this.subgroups){var e=this.subgroups[t].items[0].data.end||this.subgroups[t].items[0].data.start,i=this.subgroups[t].items[0].data.start,n=e-1;this.subgroups[t].items.forEach(function(t){new Date(t.data.start)<new Date(i)&&(i=t.data.start);var e=t.data.end||t.data.start;new Date(e)>new Date(n)&&(n=e)}),this.subgroups[t].start=i,this.subgroups[t].end=new Date(n-1)}},n.prototype.orderSubgroups=function(){if(void 0!==this.subgroupOrderer){var t,e=[];if("string"==typeof this.subgroupOrderer){for(t in this.subgroups)e.push({subgroup:t,sortField:this.subgroups[t].items[0].data[this.subgroupOrderer]});e.sort(function(t,e){return t.sortField-e.sortField})}else if("function"==typeof this.subgroupOrderer){for(t in this.subgroups)e.push(this.subgroups[t].items[0].data);e.sort(this.subgroupOrderer)}if(0<e.length)for(var i=0;i<e.length;i++)this.subgroups[e[i].subgroup].index=i}},n.prototype.resetSubgroups=function(){for(var t in this.subgroups)this.subgroups.hasOwnProperty(t)&&(this.subgroups[t].visible=!1,this.subgroups[t].height=0)},n.prototype.remove=function(t){delete this.items[t.id],t.setParent(null),this.stackDirty=!0;var e=this.visibleItems.indexOf(t);-1!=e&&this.visibleItems.splice(e,1),void 0!==t.data.subgroup&&(this._removeFromSubgroup(t),this.orderSubgroups())},n.prototype._removeFromSubgroup=function(t,e){if(null!=(e=e||t.data.subgroup)){var i=this.subgroups[e];if(i){var n=i.items.indexOf(t);0<=n&&(i.items.splice(n,1),i.items.length?this._updateSubgroupsSizes():delete this.subgroups[e])}}},n.prototype.removeFromDataSet=function(t){this.itemSet.removeItem(t.id)},n.prototype.order=function(){for(var t=v.toArray(this.items),e=[],i=[],n=0;n<t.length;n++)void 0!==t[n].data.end&&i.push(t[n]),e.push(t[n]);this.orderedItems={byStart:e,byEnd:i},u.orderByStart(this.orderedItems.byStart),u.orderByEnd(this.orderedItems.byEnd)},n.prototype._updateItemsInRange=function(t,e,i){function n(t){return t<a?-1:t<=l?0:1}var o=[],r={},s=(i.end-i.start)/4,a=i.start-s,l=i.end+s;if(0<e.length)for(var d=0;d<e.length;d++)this._checkIfVisibleWithReference(e[d],o,r,i);var h=v.binarySearchCustom(t.byStart,n,"data","start");if(this._traceVisible(h,t.byStart,o,r,function(t){return t.data.start<a||t.data.start>l}),1==this.checkRangedItems)for(this.checkRangedItems=!1,d=0;d<t.byEnd.length;d++)this._checkIfVisibleWithReference(t.byEnd[d],o,r,i);else{var u=v.binarySearchCustom(t.byEnd,n,"data","end");this._traceVisible(u,t.byEnd,o,r,function(t){return t.data.end<a||t.data.end>l})}var c={},f=0;for(d=0;d<o.length;d++){var p=o[d];p.displayed||(c[d]=p.redraw(!0),f=c[d].length)}if(0<f)for(var m=0;m<f;m++)v.forEach(c,function(t){t[m]()});for(d=0;d<o.length;d++)o[d].repositionX();return o},n.prototype._traceVisible=function(t,e,i,n,o){if(-1!=t){var r,s;for(r=t;0<=r&&!o(s=e[r]);r--)void 0===n[s.id]&&(n[s.id]=!0,i.push(s));for(r=t+1;r<e.length&&!o(s=e[r]);r++)void 0===n[s.id]&&(n[s.id]=!0,i.push(s))}},n.prototype._checkIfVisible=function(t,e,i){t.isVisible(i)?(t.displayed||t.show(),t.repositionX(),e.push(t)):t.displayed&&t.hide()},n.prototype._checkIfVisibleWithReference=function(t,e,i,n){t.isVisible(n)?void 0===i[t.id]&&(i[t.id]=!0,e.push(t)):t.displayed&&t.hide()},n.prototype.changeSubgroup=function(t,e,i){this._removeFromSubgroup(t,e),this._addToSubgroup(t,i),this.orderSubgroups()},t.exports=n},function(t,e,i){function n(t,e,i){a.call(this,t,e,i),this.width=0,this.height=0,this.top=0,this.left=0}var o,r=i(29),s=(o=r)&&o.__esModule?o:{default:o},a=i(68);(n.prototype=(0,s.default)(a.prototype)).redraw=function(t,e,i){this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,t),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(var n=0,o=this.visibleItems.length;n<o;n++)this.visibleItems[n].repositionY(e);return!1},n.prototype.show=function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)},t.exports=n},function(t,e,i){function n(t,e,i){if(this.props={content:{width:0}},this.overflow=!1,this.options=i,t){if(null==t.start)throw new Error('Property "start" missing in item '+t.id);if(null==t.end)throw new Error('Property "end" missing in item '+t.id)}o.call(this,t,e,i)}var o=i(38);(n.prototype=new o(null,null,null)).baseClassName="vis-item vis-range",n.prototype.isVisible=function(t){return this.data.start<t.end&&this.data.end>t.start},n.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),(this.dom.box["timeline-item"]=this).dirty=!0)},n.prototype._appendDomElement=function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}this.displayed=!0},n.prototype._updateDirtyDomComponents=function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var t=this.editable.updateTime||this.editable.updateGroup,e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(t?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+e,this.dom.content.style.maxWidth="none"}},n.prototype._getDomComponentsSizes=function(){return this.overflow="hidden"!==window.getComputedStyle(this.dom.frame).overflow,{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}},n.prototype._updateDomComponentsSizes=function(t){this.props.content.width=t.content.width,this.height=t.box.height,this.dom.content.style.maxWidth="",this.dirty=!1},n.prototype._repaintDomAdditionals=function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()},n.prototype.redraw=function(t){var e,i,n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){this.dirty&&(e=this._getDomComponentsSizes.bind(this)())}.bind(this),function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(e)}.bind(this),this._repaintDomAdditionals.bind(this)];return t?n:(n.forEach(function(t){i=t()}),i)},n.prototype.show=function(){this.displayed||this.redraw()},n.prototype.hide=function(){if(this.displayed){var t=this.dom.box;t.parentNode&&t.parentNode.removeChild(t),this.displayed=!1}},n.prototype.repositionX=function(t){var e,i,n=this.parent.width,o=this.conversion.toScreen(this.data.start),r=this.conversion.toScreen(this.data.end),s=void 0===this.data.align?this.options.align:this.data.align;!1===this.data.limitSize||void 0!==t&&!0!==t||(o<-n&&(o=-n),2*n<r&&(r=2*n));var a=Math.max(r-o+.5,1);switch(i=this.overflow?(this.options.rtl?this.right=o:this.left=o,this.width=a+this.props.content.width,this.props.content.width):(this.options.rtl?this.right=o:this.left=o,this.width=a,Math.min(r-o,this.props.content.width)),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=a+"px",s){case"left":this.options.rtl?this.dom.content.style.right="0":this.dom.content.style.left="0";break;case"right":this.options.rtl?this.dom.content.style.right=Math.max(a-i,0)+"px":this.dom.content.style.left=Math.max(a-i,0)+"px";break;case"center":this.options.rtl?this.dom.content.style.right=Math.max((a-i)/2,0)+"px":this.dom.content.style.left=Math.max((a-i)/2,0)+"px";break;default:e=this.overflow?0<r?Math.max(-o,0):-i:o<0?-o:0,this.options.rtl?this.dom.content.style.right=e+"px":(this.dom.content.style.left=e+"px",this.dom.content.style.width="calc(100% - "+e+"px)")}},n.prototype.repositionY=function(){var t=this.options.orientation.item;this.dom.box.style.top="top"==t?this.top+"px":this.parent.height-this.top-this.height+"px"},n.prototype._repaintDragLeft=function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.options.editable.updateTime&&!this.dom.dragLeft){var t=document.createElement("div");t.className="vis-drag-left",(t.dragLeftItem=this).dom.box.appendChild(t),this.dom.dragLeft=t}else this.selected||this.options.itemsAlwaysDraggable.range||!this.dom.dragLeft||(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)},n.prototype._repaintDragRight=function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.options.editable.updateTime&&!this.dom.dragRight){var t=document.createElement("div");t.className="vis-drag-right",(t.dragRightItem=this).dom.box.appendChild(t),this.dom.dragRight=t}else this.selected||this.options.itemsAlwaysDraggable.range||!this.dom.dragRight||(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)},t.exports=n},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(19)),s=n(i(6)),r=n(i(0)),a=n(i(1)),g=i(2),l=i(179).default,d=((0,a.default)(h,[{key:"setOptions",value:function(t){if(void 0!==t){this.popupHistory={},this._removePopup();var e=!0;"string"==typeof t?this.options.filter=t:t instanceof Array?this.options.filter=t.join():"object"===(void 0===t?"undefined":(0,s.default)(t))?(void 0!==t.container&&(this.options.container=t.container),void 0!==t.filter&&(this.options.filter=t.filter),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(e=t.enabled)):"boolean"==typeof t?(this.options.filter=!0,e=t):"function"==typeof t&&(this.options.filter=t,e=!0),!1===this.options.filter&&(e=!1),this.options.enabled=e}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){var t=this;this._clean(),this.changedOptions=[];var e=this.options.filter,i=0,n=!1;for(var o in this.configureOptions)this.configureOptions.hasOwnProperty(o)&&(n=this.allowCreation=!1,"function"==typeof e?n=(n=e(o,[]))||this._handleObject(this.configureOptions[o],[o],!0):!0!==e&&-1===e.indexOf(o)||(n=!0),!1!==n&&(this.allowCreation=!0,0<i&&this._makeItem([]),this._makeHeader(o),this._handleObject(this.configureOptions[o],[o])),i++);if(!0===this.options.showButton){var r=document.createElement("div");r.className="vis-configuration vis-config-button",r.innerHTML="generate options",r.onclick=function(){t._printOptions()},r.onmouseover=function(){r.className="vis-configuration vis-config-button hover"},r.onmouseout=function(){r.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(r)}this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var e=this.moduleOptions,i=0;i<t.length;i++){if(void 0===e[t[i]]){e=void 0;break}e=e[t[i]]}return e}},{key:"_makeItem",value:function(t){if(!0!==this.allowCreation)return 0;var e=document.createElement("div");e.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var i=arguments.length,n=Array(1<i?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return n.forEach(function(t){e.appendChild(t)}),this.domElements.push(e),this.domElements.length}},{key:"_makeHeader",value:function(t){var e=document.createElement("div");e.className="vis-configuration vis-config-header",e.innerHTML=t,this._makeItem([],e)}},{key:"_makeLabel",value:function(t,e,i){var n=2<arguments.length&&void 0!==i&&i,o=document.createElement("div");return o.className="vis-configuration vis-config-label vis-config-s"+e.length,o.innerHTML=!0===n?"<i><b>"+t+":</b></i>":t+":",o}},{key:"_makeDropdown",value:function(t,e,i){var n=document.createElement("select");n.className="vis-configuration vis-config-select";var o=0;void 0!==e&&-1!==t.indexOf(e)&&(o=t.indexOf(e));for(var r=0;r<t.length;r++){var s=document.createElement("option");s.value=t[r],r===o&&(s.selected="selected"),s.innerHTML=t[r],n.appendChild(s)}var a=this;n.onchange=function(){a._update(this.value,i)};var l=this._makeLabel(i[i.length-1],i);this._makeItem(i,l,n)}},{key:"_makeRange",value:function(t,e,i){var n=t[0],o=t[1],r=t[2],s=t[3],a=document.createElement("input");a.className="vis-configuration vis-config-range";try{a.type="range",a.min=o,a.max=r}catch(t){}a.step=s;var l="",d=0;void 0!==e?(e<0&&1.2*e<o?(a.min=Math.ceil(1.2*e),d=a.min,l="range increased"):e/1.2<o&&(a.min=Math.ceil(e/1.2),d=a.min,l="range increased"),r<1.2*e&&1!==r&&(a.max=Math.ceil(1.2*e),d=a.max,l="range increased"),a.value=e):a.value=n;var h=document.createElement("input");h.className="vis-configuration vis-config-rangeinput",h.value=a.value;var u=this;a.onchange=function(){h.value=this.value,u._update(Number(this.value),i)},a.oninput=function(){h.value=this.value};var c=this._makeLabel(i[i.length-1],i),f=this._makeItem(i,c,a,h);""!==l&&this.popupHistory[f]!==d&&(this.popupHistory[f]=d,this._setupPopup(l,f))}},{key:"_setupPopup",value:function(t,e){var i=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerHTML=t,n.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:e}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(void 0!==this.popupDiv.html){var e=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=e.left+"px",this.popupDiv.html.style.top=e.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,e,i){var n=document.createElement("input");n.type="checkbox",n.className="vis-configuration vis-config-checkbox",n.checked=t,void 0===e||(n.checked=e)!==t&&("object"===(void 0===t?"undefined":(0,s.default)(t))?e!==t.enabled&&this.changedOptions.push({path:i,value:e}):this.changedOptions.push({path:i,value:e}));var o=this;n.onchange=function(){o._update(this.checked,i)};var r=this._makeLabel(i[i.length-1],i);this._makeItem(i,r,n)}},{key:"_makeTextInput",value:function(t,e,i){var n=document.createElement("input");n.type="text",n.className="vis-configuration vis-config-text",(n.value=e)!==t&&this.changedOptions.push({path:i,value:e});var o=this;n.onchange=function(){o._update(this.value,i)};var r=this._makeLabel(i[i.length-1],i);this._makeItem(i,r,n)}},{key:"_makeColorField",value:function(t,e,i){var n=this,o=t[1],r=document.createElement("div");"none"!==(e=void 0===e?o:e)?(r.className="vis-configuration vis-config-colorBlock",r.style.backgroundColor=e):r.className="vis-configuration vis-config-colorBlock none",e=void 0===e?o:e,r.onclick=function(){n._showColorPicker(e,r,i)};var s=this._makeLabel(i[i.length-1],i);this._makeItem(i,s,r)}},{key:"_showColorPicker",value:function(t,i,n){var o=this;i.onclick=function(){},this.colorPicker.insertTo(i),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(t){var e="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";i.style.backgroundColor=e,o._update(e,n)}),this.colorPicker.setCloseCallback(function(){i.onclick=function(){o._showColorPicker(t,i,n)}})}},{key:"_handleObject",value:function(t,e,i){var n=1<arguments.length&&void 0!==e?e:[],o=2<arguments.length&&void 0!==i&&i,r=!1,s=this.options.filter,a=!1;for(var l in t)if(t.hasOwnProperty(l)){r=!0;var d=t[l],h=g.copyAndExtendArray(n,l);if("function"==typeof s&&!1===(r=s(l,n))&&!(d instanceof Array)&&"string"!=typeof d&&"boolean"!=typeof d&&d instanceof Object&&(this.allowCreation=!1,r=this._handleObject(d,h,!0),this.allowCreation=!1===o),!1!==r){a=!0;var u=this._getValue(h);if(d instanceof Array)this._handleArray(d,u,h);else if("string"==typeof d)this._makeTextInput(d,u,h);else if("boolean"==typeof d)this._makeCheckbox(d,u,h);else if(d instanceof Object){var c=!0;if(-1!==n.indexOf("physics")&&this.moduleOptions.physics.solver!==l&&(c=!1),!0===c)if(void 0!==d.enabled){var f=g.copyAndExtendArray(h,"enabled"),p=this._getValue(f);if(!0===p){var m=this._makeLabel(l,h,!0);this._makeItem(h,m),a=this._handleObject(d,h)||a}else this._makeCheckbox(d,p,h)}else{var v=this._makeLabel(l,h,!0);this._makeItem(h,v),a=this._handleObject(d,h)||a}}else console.error("dont know how to handle",d,l,h)}}return a}},{key:"_handleArray",value:function(t,e,i){"string"==typeof t[0]&&"color"===t[0]?(this._makeColorField(t,e,i),t[1]!==e&&this.changedOptions.push({path:i,value:e})):"string"==typeof t[0]?(this._makeDropdown(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:e})):"number"==typeof t[0]&&(this._makeRange(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:Number(e)}))}},{key:"_update",value:function(t,e){var i=this._constructOptions(t,e);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(t,e,i){var n=2<arguments.length&&void 0!==i?i:{},o=n;t="false"!==(t="true"===t||t)&&t;for(var r=0;r<e.length;r++)"global"!==e[r]&&(void 0===o[e[r]]&&(o[e[r]]={}),r!==e.length-1?o=o[e[r]]:o[e[r]]=t);return n}},{key:"_printOptions",value:function(){var t=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+(0,o.default)(t,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var t={},e=0;e<this.changedOptions.length;e++)this._constructOptions(this.changedOptions[e].value,this.changedOptions[e].path,t);return t}}]),h);function h(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;(0,r.default)(this,h),this.parent=t,this.changedOptions=[],this.container=e,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},g.extend(this.options,this.defaultOptions),this.configureOptions=i,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new l(n),this.wrapper=void 0}e.default=d},function(t,e,i){function n(t,e){}function l(t,e){return{style:(e=void 0===e?{}:e).style||t.options.drawPoints.style,styles:e.styles||t.options.drawPoints.styles,size:e.size||t.options.drawPoints.size,className:e.className||t.className}}var o,r=i(6),a=(o=r)&&o.__esModule?o:{default:o},d=i(14);n.draw=function(t,e,i,n){n=n||0;for(var o=function(t,e){var i=void 0;return t.options&&t.options.drawPoints&&t.options.drawPoints.onRender&&"function"==typeof t.options.drawPoints.onRender&&(i=t.options.drawPoints.onRender),e.group.options&&e.group.options.drawPoints&&e.group.options.drawPoints.onRender&&"function"==typeof e.group.options.drawPoints.onRender&&(i=e.group.options.drawPoints.onRender),i}(i,e),r=0;r<t.length;r++)if(o){var s=o(t[r],e);!0!==s&&"object"!==(void 0===s?"undefined":(0,a.default)(s))||d.drawPoint(t[r].screen_x+n,t[r].screen_y,l(e,s),i.svgElements,i.svg,t[r].label)}else d.drawPoint(t[r].screen_x+n,t[r].screen_y,l(e),i.svgElements,i.svg,t[r].label)},n.drawIcon=function(t,e,i,n,o,r){var s=.5*o,a=d.getSVGElement("rect",r.svgElements,r.svg);a.setAttributeNS(null,"x",e),a.setAttributeNS(null,"y",i-s),a.setAttributeNS(null,"width",n),a.setAttributeNS(null,"height",2*s),a.setAttributeNS(null,"class","vis-outline"),d.drawPoint(e+.5*n,i,l(t),r.svgElements,r.svg)},t.exports=n},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(23)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"setOptions",value:function(t,e,i){this.options=t,void 0===e&&void 0===i||this.setImages(e,i)}},{key:"setImages",value:function(t,e){e&&this.selected?(this.imageObj=e,this.imageObjAlt=t):(this.imageObj=t,this.imageObjAlt=e)}},{key:"switchImages",value:function(t){var e=t&&!this.selected||!t&&this.selected;if(this.selected=t,void 0!==this.imageObjAlt&&e){var i=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=i}}},{key:"_resizeImage",value:function(){var t,e;if(!1===this.options.shapeProperties.useImageSize){var i=1,n=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?i=this.imageObj.width/this.imageObj.height:n=this.imageObj.height/this.imageObj.width),t=2*this.options.size*i,e=2*this.options.size*n}else t=this.imageObj.width,e=this.imageObj.height;this.width=t,this.height=e,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(t,e,i,n){this.initContextForDraw(t,n),t.circle(e,i,n.size),this.performFill(t,n)}},{key:"_drawImageAtPosition",value:function(t,e){if(0!=this.imageObj.width){t.globalAlpha=1,this.enableShadow(t,e);var i=1;!0===this.options.shapeProperties.interpolation&&(i=this.imageObj.width/this.width/this.body.view.scale),this.imageObj.drawImageAtPosition(t,i,this.left,this.top,this.width,this.height),this.disableShadow(t,e)}}},{key:"_drawImageLabel",value:function(t,e,i,n,o){var r,s=0;if(void 0!==this.height){s=.5*this.height;var a=this.labelModule.getTextSize(t,n,o);1<=a.lineCount&&(s+=a.height/2)}r=i+s,this.options.label&&(this.labelOffset=s),this.labelModule.draw(t,e,r,n,o,"hanging")}}]),c);function c(t,e,i){(0,s.default)(this,c);var n=(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i));return n.labelOffset=0,n.selected=!1,n}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var f=n(i(19)),p=n(i(6)),m=n(i(29)),o=n(i(0)),r=n(i(1)),v=i(2),s=i(117).default,g=i(48).default,a=i(215).default,l=i(217).default,d=i(218).default,h=i(219).default,u=((0,r.default)(c,[{key:"setOptions",value:function(t){if(t){c.parseOptions(this.options,t,!0,this.globalOptions),void 0!==t.id&&(this.id=t.id),void 0!==t.from&&(this.fromId=t.from),void 0!==t.to&&(this.toId=t.to),void 0!==t.title&&(this.title=t.title),void 0!==t.value&&(t.value=parseFloat(t.value));var e=[t,this.options,this.defaultOptions];this.chooser=g.choosify("edge",e),this.updateLabelModule(t);var i=this.updateEdgeType();return this._setInteractionWidths(),this.connect(),void 0===t.hidden&&void 0===t.physics||(i=!0),i}}},{key:"getFormattingValues",value:function(){var t=!0===this.options.arrows.to||!0===this.options.arrows.to.enabled,e=!0===this.options.arrows.from||!0===this.options.arrows.from.enabled,i=!0===this.options.arrows.middle||!0===this.options.arrows.middle.enabled,n=this.options.color.inherit,o={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,middleArrow:i,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,fromArrow:e,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,arrowStrikethrough:this.options.arrowStrikethrough,color:n?void 0:this.options.color.color,inheritsColor:n,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width};if(this.selected||this.hover)if(!0===this.chooser){if(this.selected){var r=this.options.selectionWidth;"function"==typeof r?o.width=r(o.width):"number"==typeof r&&(o.width+=r),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.highlight,o.shadow=this.options.shadow.enabled}else if(this.hover){var s=this.options.hoverWidth;"function"==typeof s?o.width=s(o.width):"number"==typeof s&&(o.width+=s),o.width=Math.max(o.width,.3/this.body.view.scale),o.color=this.options.color.hover,o.shadow=this.options.shadow.enabled}}else"function"==typeof this.chooser&&(this.chooser(o,this.options.id,this.selected,this.hover),void 0!==o.color&&(o.inheritsColor=!1),!1===o.shadow&&(o.shadowColor===this.options.shadow.color&&o.shadowSize===this.options.shadow.size&&o.shadowX===this.options.shadow.x&&o.shadowY===this.options.shadow.y||(o.shadow=!0)));else o.shadow=this.options.shadow.enabled,o.width=Math.max(o.width,.3/this.body.view.scale);return o}},{key:"updateLabelModule",value:function(t){var e=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,e),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,e=!1,i=!0;return void 0!==this.edgeType&&((this.edgeType instanceof l&&!0===t.enabled&&"dynamic"===t.type||this.edgeType instanceof a&&!0===t.enabled&&"cubicBezier"===t.type||this.edgeType instanceof d&&!0===t.enabled&&"dynamic"!==t.type&&"cubicBezier"!==t.type||this.edgeType instanceof h&&!1===t.type.enabled)&&(i=!1),!0===i&&(e=this.cleanup())),!0===i?!0===t.enabled?"dynamic"===t.type?(e=!0,this.edgeType=new l(this.options,this.body,this.labelModule)):"cubicBezier"===t.type?this.edgeType=new a(this.options,this.body,this.labelModule):this.edgeType=new d(this.options,this.body,this.labelModule):this.edgeType=new h(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),e}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,!0===this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(t,e,i,this.options.value),o=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var r=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*r}this.options.width=this.options.scaling.min+n*o}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"==typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"==typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var e=this.getFormattingValues();if(!e.hidden){var i=this.edgeType.getViaNode(),n={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,e.fromArrow&&(n.from=this.edgeType.getArrowData(t,"from",i,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.fromPoint=n.from.core)),e.toArrow&&(n.to=this.edgeType.getArrowData(t,"to",i,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.toPoint=n.to.core)),e.middleArrow&&(n.middle=this.edgeType.getArrowData(t,"middle",i,this.selected,this.hover,e)),this.edgeType.drawLine(t,e,this.selected,this.hover,i),this.drawArrows(t,n,e),this.drawLabel(t,i)}}},{key:"drawArrows",value:function(t,e,i){i.fromArrow&&this.edgeType.drawArrowHead(t,i,this.selected,this.hover,e.from),i.middleArrow&&this.edgeType.drawArrowHead(t,i,this.selected,this.hover,e.middle),i.toArrow&&this.edgeType.drawArrowHead(t,i,this.selected,this.hover,e.to)}},{key:"drawLabel",value:function(t,e){if(void 0!==this.options.label){var i=this.from,n=this.to;if(this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover),i.id!=n.id){this.labelModule.pointToSelf=!1;var o=this.edgeType.getPoint(.5,e);t.save();var r=this._getRotation(t);0!=r.angle&&(t.translate(r.x,r.y),t.rotate(r.angle)),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;var s,a,l=this.options.selfReferenceSize;a=i.shape.width>i.shape.height?(s=i.x+.5*i.shape.width,i.y-l):(s=i.x+l,i.y-.5*i.shape.height),o=this._pointOnCircle(s,a,l,.125),this.labelModule.draw(t,o.x,o.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var e=[];if(this.labelModule.visible()){var i=this._getRotation();g.pointInRect(this.labelModule.getSize(),t,i)&&e.push({edgeId:this.id,labelId:0})}var n={left:t.x,top:t.y};return this.isOverlappingWith(n)&&e.push({edgeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){if(this.connected){var e=this.from.x,i=this.from.y,n=this.to.x,o=this.to.y,r=t.left,s=t.top;return this.edgeType.getDistanceToEdge(e,i,n,o,r,s)<10}return!1}},{key:"_getRotation",value:function(t){var e=this.edgeType.getViaNode(),i=this.edgeType.getPoint(.5,e);void 0!==t&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,i.x,i.y);var n={x:i.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible())return n;if("horizontal"===this.options.font.align)return n;var o=this.from.y-this.to.y,r=this.from.x-this.to.x,s=Math.atan2(o,r);return(s<-1&&r<0||0<s&&r<0)&&(s+=Math.PI),n.angle=s,n}},{key:"_pointOnCircle",value:function(t,e,i,n){var o=2*n*Math.PI;return{x:t+i*Math.cos(o),y:e-i*Math.sin(o)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return void 0!==this.body.nodes[this.fromId]&&void 0!==this.body.nodes[this.toId]}}],[{key:"parseOptions",value:function(t,e,i,n,o){var r=2<arguments.length&&void 0!==i&&i,s=3<arguments.length&&void 0!==n?n:{},a=4<arguments.length&&void 0!==o&&o;if(v.selectiveDeepExtend(["arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","to","title","value","width","font","chosen","widthConstraint"],t,e,r),g.isValidLabel(e.label)?t.label=e.label:t.label=void 0,v.mergeOptions(t,e,"smooth",s),v.mergeOptions(t,e,"shadow",s),void 0!==e.dashes&&null!==e.dashes?t.dashes=e.dashes:!0===r&&null===e.dashes&&(t.dashes=(0,m.default)(s.dashes)),void 0!==e.scaling&&null!==e.scaling?(void 0!==e.scaling.min&&(t.scaling.min=e.scaling.min),void 0!==e.scaling.max&&(t.scaling.max=e.scaling.max),v.mergeOptions(t.scaling,e.scaling,"label",s.scaling)):!0===r&&null===e.scaling&&(t.scaling=(0,m.default)(s.scaling)),void 0!==e.arrows&&null!==e.arrows)if("string"==typeof e.arrows){var l=e.arrows.toLowerCase();t.arrows.to.enabled=-1!=l.indexOf("to"),t.arrows.middle.enabled=-1!=l.indexOf("middle"),t.arrows.from.enabled=-1!=l.indexOf("from")}else{if("object"!==(0,p.default)(e.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+(0,f.default)(e.arrows));v.mergeOptions(t.arrows,e.arrows,"to",s.arrows),v.mergeOptions(t.arrows,e.arrows,"middle",s.arrows),v.mergeOptions(t.arrows,e.arrows,"from",s.arrows)}else!0===r&&null===e.arrows&&(t.arrows=(0,m.default)(s.arrows));if(void 0!==e.color&&null!==e.color){var d=e.color,h=t.color;if(a)v.deepExtend(h,s.color,!1,r);else for(var u in h)h.hasOwnProperty(u)&&delete h[u];if(v.isString(h))(((h.color=h).highlight=h).hover=h).inherit=!1,void 0===d.opacity&&(h.opacity=1);else{var c=!1;void 0!==d.color&&(h.color=d.color,c=!0),void 0!==d.highlight&&(h.highlight=d.highlight,c=!0),void 0!==d.hover&&(h.hover=d.hover,c=!0),void 0!==d.inherit&&(h.inherit=d.inherit),void 0!==d.opacity&&(h.opacity=Math.min(1,Math.max(0,d.opacity))),!0===c?h.inherit=!1:void 0===h.inherit&&(h.inherit="from")}}else!0===r&&null===e.color&&(t.color=v.bridgeObject(s.color));!0===r&&null===e.font&&(t.font=v.bridgeObject(s.font))}}]),c);function c(t,e,i,n){if((0,o.default)(this,c),void 0===e)throw new Error("No body provided");this.options=v.bridgeObject(i),this.globalOptions=i,this.defaultOptions=n,this.body=e,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new s(this.body,this.options,!0),this.setOptions(t)}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(118)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"_findBorderPositionBezier",value:function(t,e,i){var n,o,r,s=2<arguments.length&&void 0!==i?i:this._getViaCoordinates(),a=0,l=0,d=1,h=this.to,u=!1;for(t.id===this.from.id&&(h=this.from,u=!0);l<=d&&a<10;){var c=.5*(l+d);if(n=this.getPoint(c,s),o=Math.atan2(h.y-n.y,h.x-n.x),r=h.distanceToBorder(e,o)-Math.sqrt(Math.pow(n.x-h.x,2)+Math.pow(n.y-h.y,2)),Math.abs(r)<.2)break;r<0?!1===u?l=c:d=c:!1===u?d=c:l=c,a++}return n.t=c,n}},{key:"_getDistanceToBezierEdge",value:function(t,e,i,n,o,r,s){var a=1e9,l=void 0,d=void 0,h=void 0,u=void 0,c=void 0,f=t,p=e;for(d=1;d<10;d++)h=.1*d,u=Math.pow(1-h,2)*t+2*h*(1-h)*s.x+Math.pow(h,2)*i,c=Math.pow(1-h,2)*e+2*h*(1-h)*s.y+Math.pow(h,2)*n,0<d&&(a=(l=this._getDistanceToLine(f,p,u,c,o,r))<a?l:a),f=u,p=c;return a}},{key:"_bezierCurve",value:function(t,e,i,n){var o=void 0!==i&&void 0!==i.x,r=void 0!==n&&void 0!==n.x;t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),o&&r?t.bezierCurveTo(i.x,i.y,n.x,n.y,this.toPoint.x,this.toPoint.y):o?t.quadraticCurveTo(i.x,i.y,this.toPoint.x,this.toPoint.y):t.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),c);function c(t,e,i){return(0,s.default)(this,c),(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i))}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(1)),s=i(2),a=((0,r.default)(l,null,[{key:"getRange",value:function(t,e){var i,n=1<arguments.length&&void 0!==e?e:[],o=1e9,r=-1e9,s=1e9,a=-1e9;if(0<n.length)for(var l=0;l<n.length;l++)s>(i=t[n[l]]).shape.boundingBox.left&&(s=i.shape.boundingBox.left),a<i.shape.boundingBox.right&&(a=i.shape.boundingBox.right),o>i.shape.boundingBox.top&&(o=i.shape.boundingBox.top),r<i.shape.boundingBox.bottom&&(r=i.shape.boundingBox.bottom);return 1e9===s&&-1e9===a&&1e9===o&&-1e9===r&&(a=s=r=o=0),{minX:s,maxX:a,minY:o,maxY:r}}},{key:"getRangeCore",value:function(t,e){var i,n=1<arguments.length&&void 0!==e?e:[],o=1e9,r=-1e9,s=1e9,a=-1e9;if(0<n.length)for(var l=0;l<n.length;l++)s>(i=t[n[l]]).x&&(s=i.x),a<i.x&&(a=i.x),o>i.y&&(o=i.y),r<i.y&&(r=i.y);return 1e9===s&&-1e9===a&&1e9===o&&-1e9===r&&(a=s=r=o=0),{minX:s,maxX:a,minY:o,maxY:r}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,e){var i={};return void 0===e||"node"===e?(s.deepExtend(i,t.options,!0),i.x=t.x,i.y=t.y,i.amountOfConnections=t.edges.length):s.deepExtend(i,t.options,!0),i}}]),l);function l(){(0,o.default)(this,l)}e.default=a},function(t,e,i){t.exports={default:i(124),__esModule:!0}},function(t,e,i){var n=i(50);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,i){function b(){return this}var w=i(52),_=i(17),x=i(83),k=i(26),S=i(22),E=i(31),T=i(129),D=i(59),C=i(85),M=i(13)("iterator"),O=!([].keys&&"next"in[].keys());t.exports=function(t,e,i,n,o,r,s){T(i,e,n);function a(t){if(!O&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}}var l,d,h,u=e+" Iterator",c="values"==o,f=!1,p=t.prototype,m=p[M]||p["@@iterator"]||o&&p[o],v=m||a(o),g=o?c?a("entries"):v:void 0,y="Array"==e&&p.entries||m;if(y&&(h=C(y.call(new t)))!==Object.prototype&&h.next&&(D(h,u,!0),w||S(h,M)||k(h,M,b)),c&&m&&"values"!==m.name&&(f=!0,v=function(){return m.call(this)}),w&&!s||!O&&!f&&p[M]||k(p,M,v),E[e]=v,E[u]=b,o)if(l={values:c?v:a("values"),keys:r?v:a("keys"),entries:g},s)for(d in l)d in p||x(p,d,l[d]);else _(_.P+_.F*(O||f),e,l);return l}},function(t,e,i){var r=i(128);t.exports=function(n,o,t){if(r(n),void 0===o)return n;switch(t){case 1:return function(t){return n.call(o,t)};case 2:return function(t,e){return n.call(o,t,e)};case 3:return function(t,e,i){return n.call(o,t,e,i)}}return function(){return n.apply(o,arguments)}}},function(t,e,i){t.exports=!i(21)&&!i(28)(function(){return 7!=Object.defineProperty(i(82)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(32),o=i(18).document,r=n(o)&&n(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},function(t,e,i){t.exports=i(26)},function(t,e,i){var s=i(22),a=i(25),l=i(131)(!1),d=i(56)("IE_PROTO");t.exports=function(t,e){var i,n=a(t),o=0,r=[];for(i in n)i!=d&&s(n,i)&&r.push(i);for(;e.length>o;)s(n,i=e[o++])&&(~l(r,i)||r.push(i));return r}},function(t,e,i){var n=i(22),o=i(41),r=i(56)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),n(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,i){var o=i(50),r=i(13)("toStringTag"),s="Arguments"==o(function(){return arguments}());t.exports=function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?i:s?o(e):"Object"==(n=o(e))&&"function"==typeof e.callee?"Arguments":n}},function(t,e,i){var o=i(17),r=i(7),s=i(28);t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],n={};n[t]=e(i),o(o.S+o.F*s(function(){i(1)}),"Object",n)}},function(t,e,i){var n=i(84),o=i(58).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},function(t,e,i){var n=i(42),o=i(39),r=i(25),s=i(53),a=i(22),l=i(81),d=Object.getOwnPropertyDescriptor;e.f=i(21)?d:function(t,e){if(t=r(t),e=s(e,!0),l)try{return d(t,e)}catch(t){}if(a(t,e))return o(!n.f.call(t,e),t[e])}},function(t,e,i){t.exports={default:i(162),__esModule:!0}},function(t,e,i){t.exports=function(t,e){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0}},function(t,e,i){function n(t,e){if(void 0===t)throw new Error("No container element defined");if(this.container=t,this.visible=!e||null==e.visible||e.visible,this.visible){this.frame=document.createElement("DIV"),this.frame.style.width="100%",this.frame.style.position="relative",this.container.appendChild(this.frame),this.frame.prev=document.createElement("INPUT"),this.frame.prev.type="BUTTON",this.frame.prev.value="Prev",this.frame.appendChild(this.frame.prev),this.frame.play=document.createElement("INPUT"),this.frame.play.type="BUTTON",this.frame.play.value="Play",this.frame.appendChild(this.frame.play),this.frame.next=document.createElement("INPUT"),this.frame.next.type="BUTTON",this.frame.next.value="Next",this.frame.appendChild(this.frame.next),this.frame.bar=document.createElement("INPUT"),this.frame.bar.type="BUTTON",this.frame.bar.style.position="absolute",this.frame.bar.style.border="1px solid red",this.frame.bar.style.width="100px",this.frame.bar.style.height="6px",this.frame.bar.style.borderRadius="2px",this.frame.bar.style.MozBorderRadius="2px",this.frame.bar.style.border="1px solid #7F7F7F",this.frame.bar.style.backgroundColor="#E5E5E5",this.frame.appendChild(this.frame.bar),this.frame.slide=document.createElement("INPUT"),this.frame.slide.type="BUTTON",this.frame.slide.style.margin="0px",this.frame.slide.value=" ",this.frame.slide.style.position="relative",this.frame.slide.style.left="-100px",this.frame.appendChild(this.frame.slide);var i=this;this.frame.slide.onmousedown=function(t){i._onMouseDown(t)},this.frame.prev.onclick=function(t){i.prev(t)},this.frame.play.onclick=function(t){i.togglePlay(t)},this.frame.next.onclick=function(t){i.next(t)}}this.onChangeCallback=void 0,this.values=[],this.index=void 0,this.playTimeout=void 0,this.playInterval=1e3,this.playLoop=!0}var o=i(2);n.prototype.prev=function(){var t=this.getIndex();0<t&&(t--,this.setIndex(t))},n.prototype.next=function(){var t=this.getIndex();t<this.values.length-1&&(t++,this.setIndex(t))},n.prototype.playNext=function(){var t=new Date,e=this.getIndex();e<this.values.length-1?(e++,this.setIndex(e)):this.playLoop&&(e=0,this.setIndex(e));var i=new Date-t,n=Math.max(this.playInterval-i,0),o=this;this.playTimeout=setTimeout(function(){o.playNext()},n)},n.prototype.togglePlay=function(){void 0===this.playTimeout?this.play():this.stop()},n.prototype.play=function(){this.playTimeout||(this.playNext(),this.frame&&(this.frame.play.value="Stop"))},n.prototype.stop=function(){clearInterval(this.playTimeout),this.playTimeout=void 0,this.frame&&(this.frame.play.value="Play")},n.prototype.setOnChangeCallback=function(t){this.onChangeCallback=t},n.prototype.setPlayInterval=function(t){this.playInterval=t},n.prototype.getPlayInterval=function(){return this.playInterval},n.prototype.setPlayLoop=function(t){this.playLoop=t},n.prototype.onChange=function(){void 0!==this.onChangeCallback&&this.onChangeCallback()},n.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+"px",this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+"px";var t=this.indexToLeft(this.index);this.frame.slide.style.left=t+"px"}},n.prototype.setValues=function(t){this.values=t,0<this.values.length?this.setIndex(0):this.index=void 0},n.prototype.setIndex=function(t){if(!(t<this.values.length))throw new Error("Index out of range");this.index=t,this.redraw(),this.onChange()},n.prototype.getIndex=function(){return this.index},n.prototype.get=function(){return this.values[this.index]},n.prototype._onMouseDown=function(t){if(t.which?1===t.which:1===t.button){this.startClientX=t.clientX,this.startSlideX=parseFloat(this.frame.slide.style.left),this.frame.style.cursor="move";var e=this;this.onmousemove=function(t){e._onMouseMove(t)},this.onmouseup=function(t){e._onMouseUp(t)},o.addEventListener(document,"mousemove",this.onmousemove),o.addEventListener(document,"mouseup",this.onmouseup),o.preventDefault(t)}},n.prototype.leftToIndex=function(t){var e=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,i=t-3,n=Math.round(i/e*(this.values.length-1));return n<0&&(n=0),n>this.values.length-1&&(n=this.values.length-1),n},n.prototype.indexToLeft=function(t){var e=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10;return t/(this.values.length-1)*e+3},n.prototype._onMouseMove=function(t){var e=t.clientX-this.startClientX,i=this.startSlideX+e,n=this.leftToIndex(i);this.setIndex(n),o.preventDefault()},n.prototype._onMouseUp=function(t){this.frame.style.cursor="auto",o.removeEventListener(document,"mousemove",this.onmousemove),o.removeEventListener(document,"mouseup",this.onmouseup),o.preventDefault()},t.exports=n},function(t,e,i){function n(t,e,i,n){this._start=0,this._end=0,this._step=1,this.prettyStep=!0,this.precision=5,this._current=0,this.setRange(t,e,i,n)}n.prototype.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},n.prototype.setRange=function(t,e,i,n){if(!this.isNumeric(t))throw new Error("Parameter 'start' is not numeric; value: "+t);if(!this.isNumeric(e))throw new Error("Parameter 'end' is not numeric; value: "+t);if(!this.isNumeric(i))throw new Error("Parameter 'step' is not numeric; value: "+t);this._start=t||0,this._end=e||0,this.setStep(i,n)},n.prototype.setStep=function(t,e){void 0===t||t<=0||(void 0!==e&&(this.prettyStep=e),!0===this.prettyStep?this._step=n.calculatePrettyStep(t):this._step=t)},n.calculatePrettyStep=function(t){function e(t){return Math.log(t)/Math.LN10}var i=Math.pow(10,Math.round(e(t))),n=2*Math.pow(10,Math.round(e(t/2))),o=5*Math.pow(10,Math.round(e(t/5))),r=i;return Math.abs(n-t)<=Math.abs(r-t)&&(r=n),Math.abs(o-t)<=Math.abs(r-t)&&(r=o),r<=0&&(r=1),r},n.prototype.getCurrent=function(){return parseFloat(this._current.toPrecision(this.precision))},n.prototype.getStep=function(){return this._step},n.prototype.start=function(t){void 0===t&&(t=!1),this._current=this._start-this._start%this._step,t&&this.getCurrent()<this._start&&this.next()},n.prototype.next=function(){this._current+=this._step},n.prototype.end=function(){return this._current>this._end},t.exports=n},function(t,e,i){function n(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function s(t,e){return void 0===t||""===t?e:t+function(t){return void 0===t||""===t||"string"!=typeof t?t:t.charAt(0).toUpperCase()+t.slice(1)}(e)}function o(t,e,i,n){for(var o,r=0;r<i.length;++r)e[s(n,o=i[r])]=t[o]}function r(t,e,i,n){for(var o,r=0;r<i.length;++r)void 0!==t[o=i[r]]&&(e[s(n,o)]=t[o])}function a(t,e){void 0!==t.backgroundColor&&function(t,e){var i="white",n="gray",o=1;if("string"==typeof t)i=t,n="none",o=0;else{if("object"!==(void 0===t?"undefined":(0,u.default)(t)))throw new Error("Unsupported type of backgroundColor");void 0!==t.fill&&(i=t.fill),void 0!==t.stroke&&(n=t.stroke),void 0!==t.strokeWidth&&(o=t.strokeWidth)}e.frame.style.backgroundColor=i,e.frame.style.borderColor=n,e.frame.style.borderWidth=o+"px",e.frame.style.borderStyle="solid"}(t.backgroundColor,e),function(t,e){void 0!==t&&(void 0===e.dataColor&&(e.dataColor={}),"string"==typeof t?(e.dataColor.fill=t,e.dataColor.stroke=t):(t.fill&&(e.dataColor.fill=t.fill),t.stroke&&(e.dataColor.stroke=t.stroke),void 0!==t.strokeWidth&&(e.dataColor.strokeWidth=t.strokeWidth)))}(t.dataColor,e),function(t,e){if(void 0!==t){var i;if("string"==typeof t){if(-1===(i=function(t){var e=v[t];return void 0===e?-1:e}(t)))throw new Error("Style '"+t+"' is invalid")}else{if(!function(t){var e=!1;for(var i in m)if(m[i]===t){e=!0;break}return e}(t))throw new Error("Style '"+t+"' is invalid");i=t}e.style=i}}(t.style,e),function(t,e){if(void 0===t){if(void 0===b.showLegend){var i=e.style===m.DOTCOLOR||e.style===m.DOTSIZE;e.showLegend=i}}else e.showLegend=t}(t.showLegend,e),l(t.cameraPosition,e),void 0!==t.tooltip&&(e.showTooltip=t.tooltip),null!=t.onclick&&(e.onclick_callback=t.onclick),void 0!==t.tooltipStyle&&c.selectiveDeepExtend(["tooltipStyle"],e,t)}function l(t,e){var i=t;void 0!==i&&(void 0===e.camera&&(e.camera=new f),e.camera.setArmRotation(i.horizontal,i.vertical),e.camera.setArmLength(i.distance))}var d,h=i(6),u=(d=h)&&d.__esModule?d:{default:d},c=i(2),f=i(95),p=i(34),m={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9},v={dot:m.DOT,"dot-line":m.DOTLINE,"dot-color":m.DOTCOLOR,"dot-size":m.DOTSIZE,line:m.LINE,grid:m.GRID,surface:m.SURFACE,bar:m.BAR,"bar-color":m.BARCOLOR,"bar-size":m.BARSIZE},g=["width","height","filterLabel","legendLabel","xLabel","yLabel","zLabel","xValueLabel","yValueLabel","zValueLabel","showXAxis","showYAxis","showZAxis","showGrid","showPerspective","showShadow","keepAspectRatio","verticalRatio","dotSizeRatio","dotSizeMinFraction","dotSizeMaxFraction","showAnimationControls","animationInterval","animationPreload","animationAutoStart","axisColor","gridColor","xCenter","yCenter"],y=["xBarWidth","yBarWidth","valueMin","valueMax","xMin","xMax","xStep","yMin","yMax","yStep","zMin","zMax","zStep"],b=void 0;t.exports.STYLE=m,t.exports.setDefaults=function(t,e){if(void 0===t||n(t))throw new Error("No DEFAULTS passed");if(void 0===e)throw new Error("No dst passed");o(b=t,e,g),o(t,e,y,"default"),a(t,e),e.margin=10,e.showGrayBottom=!1,e.showTooltip=!1,e.onclick_callback=null,e.eye=new p(0,0,-1)},t.exports.setOptions=function(t,e){if(void 0!==t){if(void 0===e)throw new Error("No dst passed");if(void 0===b||n(b))throw new Error("DEFAULTS not set for module Settings");r(t,e,g),r(t,e,y,"default"),a(t,e)}},t.exports.setCameraPosition=l},function(t,e,i){function n(){this.armLocation=new a,this.armRotation={},this.armRotation.horizontal=0,this.armRotation.vertical=0,this.armLength=1.7,this.cameraOffset=new a,this.offsetMultiplier=.6,this.cameraLocation=new a,this.cameraRotation=new a(.5*Math.PI,0,0),this.calculateCameraOrientation()}var o,r=i(165),s=(o=r)&&o.__esModule?o:{default:o},a=i(34);n.prototype.setOffset=function(t,e){var i=Math.abs,n=s.default,o=this.offsetMultiplier,r=this.armLength*o;i(t)>r&&(t=n(t)*r),i(e)>r&&(e=n(e)*r),this.cameraOffset.x=t,this.cameraOffset.y=e,this.calculateCameraOrientation()},n.prototype.getOffset=function(){return this.cameraOffset},n.prototype.setArmLocation=function(t,e,i){this.armLocation.x=t,this.armLocation.y=e,this.armLocation.z=i,this.calculateCameraOrientation()},n.prototype.setArmRotation=function(t,e){void 0!==t&&(this.armRotation.horizontal=t),void 0!==e&&(this.armRotation.vertical=e,this.armRotation.vertical<0&&(this.armRotation.vertical=0),this.armRotation.vertical>.5*Math.PI&&(this.armRotation.vertical=.5*Math.PI)),void 0===t&&void 0===e||this.calculateCameraOrientation()},n.prototype.getArmRotation=function(){var t={};return t.horizontal=this.armRotation.horizontal,t.vertical=this.armRotation.vertical,t},n.prototype.setArmLength=function(t){void 0!==t&&(this.armLength=t,this.armLength<.71&&(this.armLength=.71),5<this.armLength&&(this.armLength=5),this.setOffset(this.cameraOffset.x,this.cameraOffset.y),this.calculateCameraOrientation())},n.prototype.getArmLength=function(){return this.armLength},n.prototype.getCameraLocation=function(){return this.cameraLocation},n.prototype.getCameraRotation=function(){return this.cameraRotation},n.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical),this.cameraRotation.x=Math.PI/2-this.armRotation.vertical,this.cameraRotation.y=0,this.cameraRotation.z=-this.armRotation.horizontal;var t=this.cameraRotation.x,e=this.cameraRotation.z,i=this.cameraOffset.x,n=this.cameraOffset.y,o=Math.sin,r=Math.cos;this.cameraLocation.x=this.cameraLocation.x+i*r(e)+n*-o(e)*r(t),this.cameraLocation.y=this.cameraLocation.y+i*o(e)+n*r(e)*r(t),this.cameraLocation.z=this.cameraLocation.z+n*o(t)},t.exports=n},function(t,e,i){function n(t,e,i){this.dataGroup=t,this.column=e,this.graph=i,this.index=void 0,this.value=void 0,this.values=t.getDistinctValues(this.column),0<this.values.length&&this.selectValue(0),this.dataPoints=[],this.loaded=!1,this.onLoadCallback=void 0,i.animationPreload?(this.loaded=!1,this.loadInBackground()):this.loaded=!0}var o=i(12);n.prototype.isLoaded=function(){return this.loaded},n.prototype.getLoadedProgress=function(){for(var t=this.values.length,e=0;this.dataPoints[e];)e++;return Math.round(e/t*100)},n.prototype.getLabel=function(){return this.graph.filterLabel},n.prototype.getColumn=function(){return this.column},n.prototype.getSelectedValue=function(){if(void 0!==this.index)return this.values[this.index]},n.prototype.getValues=function(){return this.values},n.prototype.getValue=function(t){if(t>=this.values.length)throw new Error("Index out of range");return this.values[t]},n.prototype._getDataPoints=function(t){if(void 0===t&&(t=this.index),void 0===t)return[];var e;if(this.dataPoints[t])e=this.dataPoints[t];else{var i={};i.column=this.column,i.value=this.values[t];var n=new o(this.dataGroup.getDataSet(),{filter:function(t){return t[i.column]==i.value}}).get();e=this.dataGroup._getDataPoints(n),this.dataPoints[t]=e}return e},n.prototype.setOnLoadCallback=function(t){this.onLoadCallback=t},n.prototype.selectValue=function(t){if(t>=this.values.length)throw new Error("Index out of range");this.index=t,this.value=this.values[t]},n.prototype.loadInBackground=function(t){void 0===t&&(t=0);var e=this.graph.frame;if(t<this.values.length){void 0===e.progress&&(e.progress=document.createElement("DIV"),e.progress.style.position="absolute",e.progress.style.color="gray",e.appendChild(e.progress));var i=this.getLoadedProgress();e.progress.innerHTML="Loading animation... "+i+"%",e.progress.style.bottom="60px",e.progress.style.left="10px";var n=this;setTimeout(function(){n.loadInBackground(t+1)},10),this.loaded=!1}else this.loaded=!0,void 0!==e.progress&&(e.removeChild(e.progress),e.progress=void 0),this.onLoadCallback&&this.onLoadCallback()},t.exports=n},function(t,e,i){function n(e){this.active=!1,this.dom={container:e},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=s(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var i=this;["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(function(t){i.hammer.on(t,function(t){t.stopPropagation()})}),document&&document.body&&(this.onClick=function(t){!function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}(t.target,e)&&i.deactivate()},document.body.addEventListener("click",this.onClick)),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=o(),this.escListener=this.deactivate.bind(this)}var o=i(35),r=i(44),s=i(10),a=i(2);r(n.prototype),n.current=null,n.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.hammer.destroy(),this.hammer=null},n.prototype.activate=function(){n.current&&n.current.deactivate(),(n.current=this).active=!0,this.dom.overlay.style.display="none",a.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)},n.prototype.deactivate=function(){this.active=!1,this.dom.overlay.style.display="",a.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},n.prototype._onTapOverlay=function(t){this.activate(),t.stopPropagation()},t.exports=n},function(t,e,i){e.en={current:"current",time:"time"},e.en_EN=e.en,e.en_US=e.en,e.it={current:"attuale",time:"tempo"},e.it_IT=e.it,e.it_CH=e.it,e.nl={current:"huidige",time:"tijd"},e.nl_NL=e.nl,e.nl_BE=e.nl,e.de={current:"Aktuelle",time:"Zeit"},e.de_DE=e.de,e.fr={current:"actuel",time:"heure"},e.fr_FR=e.fr,e.fr_CA=e.fr,e.fr_BE=e.fr,e.es={current:"corriente",time:"hora"},e.es_ES=e.es},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}function u(t,e){this.body=t,this.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap:function(t,e){var i=e.order;e.order=t.order,t.order=i},groupOrder:"order",selectable:!0,multiselect:!1,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:l.snap,onDropObjectOnItem:function(t,e,i){i(e)},onAdd:function(t,e){e(t)},onUpdate:function(t,e){e(t)},onMove:function(t,e){e(t)},onRemove:function(t,e){e(t)},onMoving:function(t,e){e(t)},onAddGroup:function(t,e){e(t)},onMoveGroup:function(t,e){e(t)},onRemoveGroup:function(t,e){e(t)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip"},tooltipOnItemUpdateTime:!1},this.options=x.extend({},this.defaultOptions),this.options.rtl=e.rtl,this.itemOptions={type:{start:"Date",end:"Date"}},this.conversion={toScreen:t.util.toScreen,toTime:t.util.toTime},this.dom={},this.props={},this.hammer=null;var i=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(t,e){i._onAdd(e.items)},update:function(t,e){i._onUpdate(e.items)},remove:function(t,e){i._onRemove(e.items)}},this.groupListeners={add:function(t,e,o){if(i._onAddGroups(e.items),i.groupsData&&0<i.groupsData.length){var r=i.groupsData.getDataSet();r.get().forEach(function(i){if(i.nestedGroups){0!=i.showNested&&(i.showNested=!0);var n=[];i.nestedGroups.forEach(function(t){var e=r.get(t);e&&(e.nestedInGroup=i.id,0==i.showNested&&(e.visible=!1),n=n.concat(e))}),r.update(n,o)}})}},update:function(t,e){i._onUpdateGroups(e.items)},remove:function(t,e){i._onRemoveGroups(e.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.popup=null,this.touchParams={},this.groupTouchParams={},this._create(),this.setOptions(e)}var a=n(i(29)),o=n(i(6)),s=i(10),x=i(2),r=i(11),w=i(12),l=i(66),d=i(16),h=i(68),c=i(69),f=i(101),p=i(102),m=i(70),v=i(103),g=i(104).default,y="__ungrouped__",k="__background__";u.prototype=new d,u.types={background:v,box:f,range:m,point:p},u.prototype._create=function(){var t=document.createElement("div");t.className="vis-itemset",(t["timeline-itemset"]=this).dom.frame=t;var e=document.createElement("div");e.className="vis-background",t.appendChild(e),this.dom.background=e;var i=document.createElement("div");i.className="vis-foreground",t.appendChild(i),this.dom.foreground=i;var n=document.createElement("div");n.className="vis-axis",this.dom.axis=n;var o=document.createElement("div");o.className="vis-labelset",this.dom.labelSet=o,this._updateUngrouped();var r=new c(k,null,this);r.show(),this.groups[k]=r,this.hammer=new s(this.body.dom.centerContainer),this.hammer.on("hammer.input",function(t){t.isFirst&&this._onTouch(t)}.bind(this)),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:s.DIRECTION_HORIZONTAL}),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("press",this._onMultiSelectItem.bind(this)),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.options.rtl?this.groupHammer=new s(this.body.dom.rightContainer):this.groupHammer=new s(this.body.dom.leftContainer),this.groupHammer.on("tap",this._onGroupClick.bind(this)),this.groupHammer.on("panstart",this._onGroupDragStart.bind(this)),this.groupHammer.on("panmove",this._onGroupDrag.bind(this)),this.groupHammer.on("panend",this._onGroupDragEnd.bind(this)),this.groupHammer.get("pan").set({threshold:5,direction:s.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",this._onMouseOver.bind(this)),this.body.dom.centerContainer.addEventListener("mouseout",this._onMouseOut.bind(this)),this.body.dom.centerContainer.addEventListener("mousemove",this._onMouseMove.bind(this)),this.body.dom.centerContainer.addEventListener("contextmenu",this._onDragEnd.bind(this)),this.body.dom.centerContainer.addEventListener("mousewheel",this._onMouseWheel.bind(this)),this.show()},u.prototype.setOptions=function(i){if(i){x.selectiveExtend(["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","multiselectPerGroup","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime"],this.options,i),"itemsAlwaysDraggable"in i&&("boolean"==typeof i.itemsAlwaysDraggable?(this.options.itemsAlwaysDraggable.item=i.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):"object"===(0,o.default)(i.itemsAlwaysDraggable)&&(x.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,i.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"orientation"in i&&("string"==typeof i.orientation?this.options.orientation.item="top"===i.orientation?"top":"bottom":"object"===(0,o.default)(i.orientation)&&"item"in i.orientation&&(this.options.orientation.item=i.orientation.item)),"margin"in i&&("number"==typeof i.margin?(this.options.margin.axis=i.margin,this.options.margin.item.horizontal=i.margin,this.options.margin.item.vertical=i.margin):"object"===(0,o.default)(i.margin)&&(x.selectiveExtend(["axis"],this.options.margin,i.margin),"item"in i.margin&&("number"==typeof i.margin.item?(this.options.margin.item.horizontal=i.margin.item,this.options.margin.item.vertical=i.margin.item):"object"===(0,o.default)(i.margin.item)&&x.selectiveExtend(["horizontal","vertical"],this.options.margin.item,i.margin.item)))),"editable"in i&&("boolean"==typeof i.editable?(this.options.editable.updateTime=i.editable,this.options.editable.updateGroup=i.editable,this.options.editable.add=i.editable,this.options.editable.remove=i.editable,this.options.editable.overrideItems=!1):"object"===(0,o.default)(i.editable)&&x.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,i.editable)),"groupEditable"in i&&("boolean"==typeof i.groupEditable?(this.options.groupEditable.order=i.groupEditable,this.options.groupEditable.add=i.groupEditable,this.options.groupEditable.remove=i.groupEditable):"object"===(0,o.default)(i.groupEditable)&&x.selectiveExtend(["order","add","remove"],this.options.groupEditable,i.groupEditable)),["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"].forEach(function(t){var e=i[t];if(e){if(!(e instanceof Function))throw new Error("option "+t+" must be a function "+t+"(item, callback)");this.options[t]=e}}.bind(this)),this.markDirty()}},u.prototype.markDirty=function(t){this.groupIds=[],t&&t.refreshItems&&x.forEach(this.items,function(t){t.dirty=!0,t.displayed&&t.redraw()})},u.prototype.destroy=function(){this.hide(),this.setItems(null),this.setGroups(null),this.hammer=null,this.body=null,this.conversion=null},u.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)},u.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))},u.prototype.setSelection=function(t){var e,i,n,o;for(null==t&&(t=[]),Array.isArray(t)||(t=[t]),e=0,i=this.selection.length;e<i;e++)n=this.selection[e],(o=this.items[n])&&o.unselect();for(this.selection=[],e=0,i=t.length;e<i;e++)n=t[e],(o=this.items[n])&&(this.selection.push(n),o.select())},u.prototype.getSelection=function(){return this.selection.concat([])},u.prototype.getVisibleItems=function(){var t,e,i=this.body.range.getRange();this.options.rtl?(t=this.body.util.toScreen(i.start),e=this.body.util.toScreen(i.end)):(e=this.body.util.toScreen(i.start),t=this.body.util.toScreen(i.end));var n=[];for(var o in this.groups)if(this.groups.hasOwnProperty(o))for(var r=this.groups[o],s=r.isVisible?r.visibleItems:[],a=0;a<s.length;a++){var l=s[a];this.options.rtl?l.right<e&&l.right+l.width>t&&n.push(l.id):l.left<t&&l.left+l.width>e&&n.push(l.id)}return n},u.prototype._deselect=function(t){for(var e=this.selection,i=0,n=e.length;i<n;i++)if(e[i]==t){e.splice(i,1);break}},u.prototype.redraw=function(){var t=this.options.margin,n=this.body.range,e=x.option.asSize,i=this.options,o=i.orientation.item,r=!1,s=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,s.className="vis-itemset",r=this._orderGroups()||r;var a=n.end-n.start,l=a!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,d=n.start!=this.lastRangeStart,h=i.stack!=this.lastStack,u=i.stackSubgroups!=this.lastStackSubgroups,c=l||d||h||u;this.lastVisibleInterval=a,this.lastRangeStart=n.start,this.lastStack=i.stack,this.lastStackSubgroups=i.stackSubgroups,this.props.lastWidth=this.props.width;var f=this._firstGroup(),p={item:t.item,axis:t.axis},m={item:t.item,axis:t.item.vertical/2},v=0,g=t.axis+t.item.vertical;this.groups[k].redraw(n,m,c);var y={},b=0;if(x.forEach(this.groups,function(t,e){if(e!==k){var i=t==f?p:m;y[e]=t.redraw(n,i,c,!0),b=y[e].length}}),0<b){for(var w={},_=0;_<b;_++)x.forEach(y,function(t,e){w[e]=t[_]()});x.forEach(this.groups,function(t,e){if(e!==k){var i=w[e];r=i||r,v+=t.height}}),v=Math.max(v,g)}return v=Math.max(v,g),s.style.height=e(v),this.props.width=s.offsetWidth,this.props.height=v,this.dom.axis.style.top=e("top"==o?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.initialItemSetDrawn=!0,r=this._isResized()||r},u.prototype._firstGroup=function(){var t="top"==this.options.orientation.item?0:this.groupIds.length-1,e=this.groupIds[t];return this.groups[e]||this.groups[y]||null},u.prototype._updateUngrouped=function(){var t,e,i=this.groups[y];if(this.groupsData){if(i)for(e in i.hide(),delete this.groups[y],this.items)if(this.items.hasOwnProperty(e)){(t=this.items[e]).parent&&t.parent.remove(t);var n=this._getGroupId(t.data),o=this.groups[n];o&&o.add(t)||t.hide()}}else if(!i){for(e in i=new h(null,null,this),this.groups[y]=i,this.items)this.items.hasOwnProperty(e)&&(t=this.items[e],i.add(t));i.show()}},u.prototype.getLabelSet=function(){return this.dom.labelSet},u.prototype.setItems=function(t){var e,i=this,n=this.itemsData;if(t){if(!(t instanceof r||t instanceof w))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=t}else this.itemsData=null;if(n&&(x.forEach(this.itemListeners,function(t,e){n.off(e,t)}),e=n.getIds(),this._onRemove(e)),this.itemsData){var o=this.id;x.forEach(this.itemListeners,function(t,e){i.itemsData.on(e,t,o)}),e=this.itemsData.getIds(),this._onAdd(e),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})},u.prototype.getItems=function(){return this.itemsData},u.prototype.setGroups=function(t){var e,i=this;if(this.groupsData&&(x.forEach(this.groupListeners,function(t,e){i.groupsData.off(e,t)}),e=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(e)),t){if(!(t instanceof r||t instanceof w))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){var n=this.groupsData;this.groupsData instanceof w&&(n=this.groupsData.getDataSet()),n.get().forEach(function(i){i.nestedGroups&&i.nestedGroups.forEach(function(t){var e=n.get(t);e.nestedInGroup=i.id,0==i.showNested&&(e.visible=!1),n.update(e)})});var o=this.id;x.forEach(this.groupListeners,function(t,e){i.groupsData.on(e,t,o)}),e=this.groupsData.getIds(),this._onAddGroups(e)}this._updateUngrouped(),this._order(),this.body.emitter.emit("_change",{queue:!0})},u.prototype.getGroups=function(){return this.groupsData},u.prototype.removeItem=function(e){var t=this.itemsData.get(e),i=this.itemsData.getDataSet();t&&this.options.onRemove(t,function(t){t&&i.remove(e)})},u.prototype._getType=function(t){return t.type||this.options.type||(t.end?"range":"box")},u.prototype._getGroupId=function(t){return"background"==this._getType(t)&&null==t.group?k:this.groupsData?t.group:y},u.prototype._onAdd=u.prototype._onUpdate=function(t){var s=this;t.forEach(function(t){var e,i=s.itemsData.get(t,s.itemOptions),n=s.items[t],o=i?s._getType(i):null,r=u.types[o];if(n&&(r&&n instanceof r?s._updateItem(n,i):(e=n.selected,s._removeItem(n),n=null)),!n&&i){if(!r)throw"rangeoverflow"==o?new TypeError('Item type "rangeoverflow" is deprecated. Use css styling instead: .vis-item.vis-range .vis-item-content {overflow: visible;}'):new TypeError('Unknown item type "'+o+'"');(n=new r(i,s.conversion,s.options)).id=t,s._addItem(n),e&&(this.selection.push(t),n.select())}}.bind(this)),this._order(),this.body.emitter.emit("_change",{queue:!0})},u.prototype._onRemove=function(t){var i=0,n=this;t.forEach(function(t){var e=n.items[t];e&&(i++,n._removeItem(e))}),i&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))},u.prototype._order=function(){x.forEach(this.groups,function(t){t.order()})},u.prototype._onUpdateGroups=function(t){this._onAddGroups(t)},u.prototype._onAddGroups=function(t){var s=this;t.forEach(function(t){var e=s.groupsData.get(t),i=s.groups[t];if(i)i.setData(e);else{if(t==y||t==k)throw new Error("Illegal group id. "+t+" is a reserved id.");var n=(0,a.default)(s.options);for(var o in x.extend(n,{height:null}),i=new h(t,e,s),s.groups[t]=i,s.items)if(s.items.hasOwnProperty(o)){var r=s.items[o];r.data.group==t&&i.add(r)}i.order(),i.show()}}),this.body.emitter.emit("_change",{queue:!0})},u.prototype._onRemoveGroups=function(t){var i=this.groups;t.forEach(function(t){var e=i[t];e&&(e.hide(),delete i[t])}),this.markDirty(),this.body.emitter.emit("_change",{queue:!0})},u.prototype._orderGroups=function(){if(this.groupsData){var t=this.groupsData.getIds({order:this.options.groupOrder});t=this._orderNestedGroups(t);var e=!x.equalArray(t,this.groupIds);if(e){var i=this.groups;t.forEach(function(t){i[t].hide()}),t.forEach(function(t){i[t].show()}),this.groupIds=t}return e}return!1},u.prototype._orderNestedGroups=function(t){var n=[];return t.forEach(function(e){var t=this.groupsData.get(e);if(t.nestedInGroup||n.push(e),t.nestedGroups){var i=this.groupsData.get({filter:function(t){return t.nestedInGroup==e},order:this.options.groupOrder}).map(function(t){return t.id});n=n.concat(i)}},this),n},u.prototype._addItem=function(t){this.items[t.id]=t;var e=this._getGroupId(t.data),i=this.groups[e];i?i&&i.data&&i.data.showNested&&(t.groupShowing=!0):t.groupShowing=!1,i&&i.add(t)},u.prototype._updateItem=function(t,e){t.setData(e);var i=this._getGroupId(t.data),n=this.groups[i];n?n&&n.data&&n.data.showNested&&(t.groupShowing=!0):t.groupShowing=!1},u.prototype._removeItem=function(t){t.hide(),delete this.items[t.id];var e=this.selection.indexOf(t.id);-1!=e&&this.selection.splice(e,1),t.parent&&t.parent.remove(t)},u.prototype._constructByEndArray=function(t){for(var e=[],i=0;i<t.length;i++)t[i]instanceof m&&e.push(t[i]);return e},u.prototype._onTouch=function(t){this.touchParams.item=this.itemFromTarget(t),this.touchParams.dragLeftItem=t.target.dragLeftItem||!1,this.touchParams.dragRightItem=t.target.dragRightItem||!1,this.touchParams.itemProps=null},u.prototype._getGroupIndex=function(t){for(var e=0;e<this.groupIds.length;e++)if(t==this.groupIds[e])return e},u.prototype._onDragStart=function(n){if(!this.touchParams.itemIsDragging){var t,e=this.touchParams.item||null,o=this;if(e&&(e.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup)return;if(null!=e.editable&&!e.editable.updateTime&&!e.editable.updateGroup&&!this.options.editable.overrideItems)return;var i=this.touchParams.dragLeftItem,r=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=e,i)t={item:i,initialX:n.center.x,dragLeft:!0,data:this._cloneItemData(e.data)},this.touchParams.itemProps=[t];else if(r)t={item:r,initialX:n.center.x,dragRight:!0,data:this._cloneItemData(e.data)},this.touchParams.itemProps=[t];else if(this.options.editable.add&&(n.srcEvent.ctrlKey||n.srcEvent.metaKey))this._onDragStartAddItem(n);else{this.groupIds.length<1&&this.redraw();var s=this._getGroupIndex(e.data.group),a=this.options.itemsAlwaysDraggable.item&&!e.selected?[e.id]:this.getSelection();this.touchParams.itemProps=a.map(function(t){var e=o.items[t],i=o._getGroupIndex(e.data.group);return{item:e,initialX:n.center.x,groupOffset:s-i,data:this._cloneItemData(e.data)}}.bind(this))}n.stopPropagation()}else this.options.editable.add&&(n.srcEvent.ctrlKey||n.srcEvent.metaKey)&&this._onDragStartAddItem(n)}},u.prototype._onDragStartAddItem=function(t){var e,i,n=this.options.snap||null;i=this.options.rtl?(e=x.getAbsoluteRight(this.dom.frame))-t.center.x+10:(e=x.getAbsoluteLeft(this.dom.frame),t.center.x-e-10);var o=this.body.util.toTime(i),r=this.body.util.getScale(),s=this.body.util.getStep(),a=n?n(o,r,s):o,l={type:"range",start:a,end:a,content:"new item"},d=x.randomUUID();l[this.itemsData._fieldId]=d;var h=this.groupFromTarget(t);h&&(l.group=h.groupId);var u=new m(l,this.conversion,this.options);u.id=d,u.data=this._cloneItemData(l),this._addItem(u);var c={item:this.touchParams.selectedItem=u,initialX:t.center.x,data:u.data};this.options.rtl?c.dragLeft=!0:c.dragRight=!0,this.touchParams.itemProps=[c],t.stopPropagation()},u.prototype._onDrag=function(u){if(this.touchParams.itemProps){u.stopPropagation();var c,f=this,p=this.options.snap||null;c=this.options.rtl?this.body.dom.root.offsetLeft+this.body.domProps.right.width:this.body.dom.root.offsetLeft+this.body.domProps.left.width;var m=this.body.util.getScale(),v=this.body.util.getStep(),g=this.touchParams.selectedItem,y=(this.options.editable.overrideItems||null==g.editable)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&null!=g.editable&&g.editable.updateGroup,b=null;if(y&&g&&null!=g.data.group){var t=f.groupFromTarget(u);t&&(b=this._getGroupIndex(t.groupId))}this.touchParams.itemProps.forEach(function(e){var t,i,n,o,r,s=f.body.util.toTime(u.center.x-c),a=f.body.util.toTime(e.initialX-c);t=this.options.rtl?-(s-a):s-a;var l=this._cloneItemData(e.item.data);if(null==e.item.editable||e.item.editable.updateTime||e.item.editable.updateGroup||f.options.editable.overrideItems){if((this.options.editable.overrideItems||null==g.editable)&&this.options.editable.updateTime||!this.options.editable.overrideItems&&null!=g.editable&&g.editable.updateTime)if(e.dragLeft)this.options.rtl?null!=l.end&&(n=x.convert(e.data.end,"Date"),r=new Date(n.valueOf()+t),l.end=p?p(r,m,v):r):null!=l.start&&(i=x.convert(e.data.start,"Date"),o=new Date(i.valueOf()+t),l.start=p?p(o,m,v):o);else if(e.dragRight)this.options.rtl?null!=l.start&&(i=x.convert(e.data.start,"Date"),o=new Date(i.valueOf()+t),l.start=p?p(o,m,v):o):null!=l.end&&(n=x.convert(e.data.end,"Date"),r=new Date(n.valueOf()+t),l.end=p?p(r,m,v):r);else if(null!=l.start)if(i=x.convert(e.data.start,"Date").valueOf(),o=new Date(i+t),null!=l.end){var d=(n=x.convert(e.data.end,"Date")).valueOf()-i.valueOf();l.start=p?p(o,m,v):o,l.end=new Date(l.start.valueOf()+d)}else l.start=p?p(o,m,v):o;if(y&&!e.dragLeft&&!e.dragRight&&null!=b&&null!=l.group){var h=b-e.groupOffset;h=Math.max(0,h),h=Math.min(f.groupIds.length-1,h),l.group=f.groupIds[h]}l=this._cloneItemData(l),f.options.onMoving(l,function(t){t&&e.item.setData(this._cloneItemData(t,"Date"))}.bind(this))}}.bind(this)),this.body.emitter.emit("_change")}},u.prototype._moveToGroup=function(t,e){var i=this.groups[e];if(i&&i.groupId!=t.data.group){var n=t.parent;n.remove(t),n.order(),t.data.group=i.groupId,i.add(t),i.order()}},u.prototype._onDragEnd=function(t){if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){t.stopPropagation();var n=this,o=this.itemsData.getDataSet(),e=this.touchParams.itemProps;this.touchParams.itemProps=null,e.forEach(function(e){var i=e.item.id;if(null!=n.itemsData.get(i,n.itemOptions)){var t=this._cloneItemData(e.item.data);n.options.onMove(t,function(t){t?(t[o._fieldId]=i,o.update(t)):(e.item.setData(e.data),n.body.emitter.emit("_change"))})}else n.options.onAdd(e.item.data,function(t){n._removeItem(e.item),t&&n.itemsData.getDataSet().add(t),n.body.emitter.emit("_change")})}.bind(this))}},u.prototype._onGroupClick=function(t){var e=this.groupFromTarget(t);if(e&&e.nestedGroups){var i=this.groupsData.getDataSet(),n=i.get(e.groupId);null==n.showNested&&(n.showNested=!0),n.showNested=!n.showNested;var o=i.get(e.nestedGroups).map(function(t){return t.visible=n.showNested,t});if(i.update(o.concat(n)),n.showNested)x.removeClassName(e.dom.label,"collapsed"),x.addClassName(e.dom.label,"expanded");else{x.removeClassName(e.dom.label,"expanded");var r=this.options.rtl?"collapsed-rtl":"collapsed";x.addClassName(e.dom.label,r)}}},u.prototype._onGroupDragStart=function(t){this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(t),this.groupTouchParams.group&&(t.stopPropagation(),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))},u.prototype._onGroupDrag=function(t){if(this.options.groupEditable.order&&this.groupTouchParams.group){t.stopPropagation();var e=this.groupsData;this.groupsData instanceof w&&(e=this.groupsData.getDataSet());var i=this.groupFromTarget(t);if(i&&i.height!=this.groupTouchParams.group.height){var n=i.top<this.groupTouchParams.group.top,o=t.center?t.center.y:t.clientY,r=x.getAbsoluteTop(i.dom.foreground),s=this.groupTouchParams.group.height;if(n){if(r+s<o)return}else if(r+i.height-s>o)return}if(i&&i!=this.groupTouchParams.group){var a=e.get(i.groupId),l=e.get(this.groupTouchParams.group.groupId);l&&a&&(this.options.groupOrderSwap(l,a,e),e.update(l),e.update(a));var d=e.getIds({order:this.options.groupOrder});if(!x.equalArray(d,this.groupTouchParams.originalOrder))for(var h=this.groupTouchParams.originalOrder,u=this.groupTouchParams.group.groupId,c=Math.min(h.length,d.length),f=0,p=0,m=0;f<c;){for(;f+p<c&&f+m<c&&d[f+p]==h[f+m];)f++;if(c<=f+p)break;if(d[f+p]==u)p=1;else if(h[f+m]==u)m=1;else{var v=d.indexOf(h[f+m]),g=e.get(d[f+p]),y=e.get(h[f+m]);this.options.groupOrderSwap(g,y,e),e.update(g),e.update(y);var b=d[f+p];d[f+p]=h[f+m],d[v]=b,f++}}}}},u.prototype._onGroupDragEnd=function(t){if(this.options.groupEditable.order&&this.groupTouchParams.group){t.stopPropagation();var d=this,h=d.groupTouchParams.group.groupId,u=d.groupsData.getDataSet(),e=x.extend({},u.get(h));d.options.onMoveGroup(e,function(t){if(t)t[u._fieldId]=h,u.update(t);else{var e=u.getIds({order:d.options.groupOrder});if(!x.equalArray(e,d.groupTouchParams.originalOrder))for(var i=d.groupTouchParams.originalOrder,n=Math.min(i.length,e.length),o=0;o<n;){for(;o<n&&e[o]==i[o];)o++;if(n<=o)break;var r=e.indexOf(i[o]),s=u.get(e[o]),a=u.get(i[o]);d.options.groupOrderSwap(s,a,u),u.update(s),u.update(a);var l=e[o];e[o]=i[o],e[r]=l,o++}}}),d.body.emitter.emit("groupDragged",{groupId:h})}},u.prototype._onSelectItem=function(t){if(this.options.selectable){var e=t.srcEvent&&(t.srcEvent.ctrlKey||t.srcEvent.metaKey),i=t.srcEvent&&t.srcEvent.shiftKey;if(e||i)return void this._onMultiSelectItem(t);var n=this.getSelection(),o=this.itemFromTarget(t),r=o?[o.id]:[];this.setSelection(r);var s=this.getSelection();(0<s.length||0<n.length)&&this.body.emitter.emit("select",{items:s,event:t})}},u.prototype._onMouseOver=function(t){var e=this.itemFromTarget(t);if(e&&e!==this.itemFromRelatedTarget(t)){var i=e.getTitle();if(this.options.showTooltips&&i){null==this.popup&&(this.popup=new g(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(i);var n=this.body.dom.centerContainer;this.popup.setPosition(t.clientX-x.getAbsoluteLeft(n)+n.offsetLeft,t.clientY-x.getAbsoluteTop(n)+n.offsetTop),this.popup.show()}else null!=this.popup&&this.popup.hide();this.body.emitter.emit("itemover",{item:e.id,event:t})}},u.prototype._onMouseOut=function(t){var e=this.itemFromTarget(t);e&&e!==this.itemFromRelatedTarget(t)&&(null!=this.popup&&this.popup.hide(),this.body.emitter.emit("itemout",{item:e.id,event:t}))},u.prototype._onMouseMove=function(t){if(this.itemFromTarget(t)&&this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden){var e=this.body.dom.centerContainer;this.popup.setPosition(t.clientX-x.getAbsoluteLeft(e)+e.offsetLeft,t.clientY-x.getAbsoluteTop(e)+e.offsetTop),this.popup.show()}},u.prototype._onMouseWheel=function(t){this.touchParams.itemIsDragging&&this._onDragEnd(t)},u.prototype._onUpdateItem=function(t){if(this.options.selectable&&this.options.editable.add){var e=this;if(t){var i=e.itemsData.get(t.id);this.options.onUpdate(i,function(t){t&&e.itemsData.getDataSet().update(t)})}}},u.prototype._onDropObjectOnItem=function(t){var e=this.itemFromTarget(t),i=JSON.parse(t.dataTransfer.getData("text"));this.options.onDropObjectOnItem(i,e)},u.prototype._onAddItem=function(e){if(this.options.selectable&&this.options.editable.add){var t,i,n=this,o=this.options.snap||null;i=this.options.rtl?(t=x.getAbsoluteRight(this.dom.frame))-e.center.x:(t=x.getAbsoluteLeft(this.dom.frame),e.center.x-t);var r,s,a=this.body.util.toTime(i),l=this.body.util.getScale(),d=this.body.util.getStep();"drop"==e.type?((s=JSON.parse(e.dataTransfer.getData("text"))).content=s.content?s.content:"new item",s.start=s.start?s.start:o?o(a,l,d):a,s.type=s.type||"box",s[this.itemsData._fieldId]=s.id||x.randomUUID(),"range"!=s.type||s.end||(r=this.body.util.toTime(i+this.props.width/5),s.end=o?o(r,l,d):r)):((s={start:o?o(a,l,d):a,content:"new item"})[this.itemsData._fieldId]=x.randomUUID(),"range"===this.options.type&&(r=this.body.util.toTime(i+this.props.width/5),s.end=o?o(r,l,d):r));var h=this.groupFromTarget(e);h&&(s.group=h.groupId),s=this._cloneItemData(s),this.options.onAdd(s,function(t){t&&(n.itemsData.getDataSet().add(t),"drop"==e.type&&n.setSelection([t.id]))})}},u.prototype._onMultiSelectItem=function(t){if(this.options.selectable){var e=this.itemFromTarget(t);if(e){var i=this.options.multiselect?this.getSelection():[];if(t.srcEvent&&t.srcEvent.shiftKey&&this.options.multiselect){var n=this.itemsData.get(e.id).group,o=void 0;this.options.multiselectPerGroup&&0<i.length&&(o=this.itemsData.get(i[0]).group),this.options.multiselectPerGroup&&null!=o&&o!=n||i.push(e.id);var r=u._getItemRange(this.itemsData.get(i,this.itemOptions));if(!this.options.multiselectPerGroup||o==n)for(var s in i=[],this.items)if(this.items.hasOwnProperty(s)){var a=this.items[s],l=a.data.start,d=void 0!==a.data.end?a.data.end:l;!(l>=r.min&&d<=r.max)||this.options.multiselectPerGroup&&o!=this.itemsData.get(a.id).group||a instanceof v||i.push(a.id)}}else{var h=i.indexOf(e.id);-1==h?i.push(e.id):i.splice(h,1)}this.setSelection(i),this.body.emitter.emit("select",{items:this.getSelection(),event:t})}}},u._getItemRange=function(t){var e=null,i=null;return t.forEach(function(t){(null==i||t.start<i)&&(i=t.start),null!=t.end?(null==e||t.end>e)&&(e=t.end):(null==e||t.start>e)&&(e=t.start)}),{min:i,max:e}},u.prototype.itemFromElement=function(t){for(var e=t;e;){if(e.hasOwnProperty("timeline-item"))return e["timeline-item"];e=e.parentNode}return null},u.prototype.itemFromTarget=function(t){return this.itemFromElement(t.target)},u.prototype.itemFromRelatedTarget=function(t){return this.itemFromElement(t.relatedTarget)},u.prototype.groupFromTarget=function(t){var e=t.center?t.center.y:t.clientY,i=this.groupIds;i.length<=0&&this.groupsData&&(i=this.groupsData.getIds({order:this.options.groupOrder}));for(var n=0;n<i.length;n++){var o=i[n],r=this.groups[o],s=r.dom.foreground,a=x.getAbsoluteTop(s);if(a<e&&e<a+s.offsetHeight)return r;if("top"===this.options.orientation.item){if(n===this.groupIds.length-1&&a<e)return r}else if(0===n&&e<a+s.offset)return r}return null},u.itemSetFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("timeline-itemset"))return e["timeline-itemset"];e=e.parentNode}return null},u.prototype._cloneItemData=function(t,e){var i=x.extend({},t);return e=e||this.itemsData.getDataSet()._options.type,null!=i.start&&(i.start=x.convert(i.start,e&&e.start||"Date")),null!=i.end&&(i.end=x.convert(i.end,e&&e.end||"Date")),i},t.exports=u},function(t,h,e){h.orderByStart=function(t){t.sort(function(t,e){return t.data.start-e.data.start})},h.orderByEnd=function(t){t.sort(function(t,e){return("end"in t.data?t.data.end:t.data.start)-("end"in e.data?e.data.end:e.data.start)})},h.stack=function(t,e,i){if(i)for(var n=0;n<t.length;n++)t[n].top=null;for(n=0;n<t.length;n++){var o=t[n];if(o.stack&&null===o.top){o.top=e.axis;do{for(var r=null,s=0,a=t.length;s<a;s++){var l=t[s];if(null!==l.top&&l!==o&&l.stack&&h.collision(o,l,e.item,l.options.rtl)){r=l;break}}null!=r&&(o.top=r.top+r.height+e.item.vertical)}while(r)}}},h.substack=function(t,e,i){for(var n=0;n<t.length;n++)t[n].top=null;var o=i.height;for(n=0;n<t.length;n++){var r=t[n];if(r.stack&&null===r.top){r.top=r.baseTop;do{for(var s=null,a=0,l=t.length;a<l;a++){var d=t[a];if(null!==d.top&&d!==r&&h.collision(r,d,e.item,d.options.rtl)){s=d;break}}null!=s&&(r.top=s.top+s.height+e.item.vertical),r.top+r.height>o&&(o=r.top+r.height)}while(s)}}i.height=o-i.top+.5*e.item.vertical},h.nostack=function(t,e,i,n){for(var o=0;o<t.length;o++)if(null==t[o].data.subgroup)t[o].top=e.item.vertical;else if(void 0!==t[o].data.subgroup&&n){var r=0;for(var s in i)i.hasOwnProperty(s)&&1==i[s].visible&&i[s].index<i[t[o].data.subgroup].index&&(r+=i[s].height,i[t[o].data.subgroup].top=r);t[o].top=r+.5*e.item.vertical}n||h.stackSubgroups(t,e,i)},h.stackSubgroups=function(t,e,i){for(var n in i)if(i.hasOwnProperty(n)){i[n].top=0;do{var o=null;for(var r in i)if(null!==i[r].top&&r!==n&&i[n].index>i[r].index&&h.collisionByTimes(i[n],i[r])){o=i[r];break}null!=o&&(i[n].top=o.top+o.height)}while(o)}for(var s=0;s<t.length;s++)void 0!==t[s].data.subgroup&&(t[s].top=i[t[s].data.subgroup].top+.5*e.item.vertical)},h.stackSubgroupsWithInnerStack=function(t,e,i){var n=!1,o=[];for(var r in i)i[r].hasOwnProperty("index")?o[i[r].index]=r:o.push(r);for(var s=0;s<o.length;s++)if(r=o[s],i.hasOwnProperty(r)){for(var a in n=n||i[r].stack,i[r].top=0,i)i[a].visible&&i[r].index>i[a].index&&(i[r].top+=i[a].height);for(var l=t[r],d=0;d<l.length;d++)void 0!==l[d].data.subgroup&&(l[d].top=i[l[d].data.subgroup].top+.5*e.item.vertical,i[r].stack&&(l[d].baseTop=l[d].top));n&&i[r].stack&&h.substack(t[r],e,i[r])}},h.collision=function(t,e,i,n){return n?t.right-i.horizontal+.001<e.right+e.width&&t.right+t.width+i.horizontal-.001>e.right&&t.top-i.vertical+.001<e.top+e.height&&t.top+t.height+i.vertical-.001>e.top:t.left-i.horizontal+.001<e.left+e.width&&t.left+t.width+i.horizontal-.001>e.left&&t.top-i.vertical+.001<e.top+e.height&&t.top+t.height+i.vertical-.001>e.top},h.collisionByTimes=function(t,e){return t.start<=e.start&&t.end>=e.start&&t.top<e.top+e.height&&t.top+t.height>e.top||e.start<=t.start&&e.end>=t.start&&e.top<t.top+t.height&&e.top+e.height>t.top}},function(t,e,i){function n(t,e,i){if(this.props={dot:{width:0,height:0},line:{width:0,height:0}},this.options=i,t&&null==t.start)throw new Error('Property "start" missing in item '+t);o.call(this,t,e,i)}var o=i(38);(n.prototype=new o(null,null,null)).isVisible=function(t){var e=this.options.align,i=this.width*t.getMillisecondsPerPixel();return"right"==e?this.data.start.getTime()>t.start&&this.data.start.getTime()-i<t.end:"left"==e?this.data.start.getTime()+i>t.start&&this.data.start.getTime()<t.end:this.data.start.getTime()+i/2>t.start&&this.data.start.getTime()-i/2<t.end},n.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",(this.dom.box["timeline-item"]=this).dirty=!0)},n.prototype._appendDomElement=function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var i=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");i.appendChild(this.dom.dot)}this.displayed=!0},n.prototype._updateDirtyDomComponents=function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);var t=this.editable.updateTime||this.editable.updateGroup,e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(t?" vis-editable":" vis-readonly");this.dom.box.className="vis-item vis-box"+e,this.dom.line.className="vis-item vis-line"+e,this.dom.dot.className="vis-item vis-dot"+e}},n.prototype._getDomComponentsSizes=function(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}},n.prototype._updateDomComponentsSizes=function(t){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=t.dot.height,this.props.dot.width=t.dot.width,this.props.line.width=t.line.width,this.width=t.box.width,this.height=t.box.height,this.options.rtl?this.dom.box.style.right=t.previous.right:this.dom.box.style.left=t.previous.left,this.dirty=!1},n.prototype._repaintDomAdditionals=function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)},n.prototype.redraw=function(t){var e,i,n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){this.dirty&&(e=this._getDomComponentsSizes())}.bind(this),function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(e)}.bind(this),this._repaintDomAdditionals.bind(this)];return t?n:(n.forEach(function(t){i=t()}),i)},n.prototype.show=function(){this.displayed||this.redraw()},n.prototype.hide=function(){if(this.displayed){var t=this.dom;t.box.parentNode&&t.box.parentNode.removeChild(t.box),t.line.parentNode&&t.line.parentNode.removeChild(t.line),t.dot.parentNode&&t.dot.parentNode.removeChild(t.dot),this.displayed=!1}},n.prototype.repositionX=function(){var t=this.conversion.toScreen(this.data.start),e=this.options.align;"right"==e?this.options.rtl?(this.right=t-this.width,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=t-this.props.line.width+"px",this.dom.dot.style.right=t-this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=t-this.width,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=t-this.props.line.width+"px",this.dom.dot.style.left=t-this.props.line.width/2-this.props.dot.width/2+"px"):"left"==e?this.options.rtl?(this.right=t,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=t+"px",this.dom.dot.style.right=t+this.props.line.width/2-this.props.dot.width/2+"px"):(this.left=t,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=t+"px",this.dom.dot.style.left=t+this.props.line.width/2-this.props.dot.width/2+"px"):this.options.rtl?(this.right=t-this.width/2,this.dom.box.style.right=this.right+"px",this.dom.line.style.right=t-this.props.line.width+"px",this.dom.dot.style.right=t-this.props.dot.width/2+"px"):(this.left=t-this.width/2,this.dom.box.style.left=this.left+"px",this.dom.line.style.left=t-this.props.line.width/2+"px",this.dom.dot.style.left=t-this.props.dot.width/2+"px")},n.prototype.repositionY=function(){var t=this.options.orientation.item,e=this.dom.box,i=this.dom.line,n=this.dom.dot;if("top"==t)e.style.top=(this.top||0)+"px",i.style.top="0",i.style.height=this.parent.top+this.top+1+"px",i.style.bottom="";else{var o=this.parent.itemSet.props.height,r=o-this.parent.top-this.parent.height+this.top;e.style.top=(this.parent.height-this.top-this.height||0)+"px",i.style.top=o-r+"px",i.style.bottom="0"}n.style.top=-this.props.dot.height/2+"px"},n.prototype.getWidthLeft=function(){return this.width/2},n.prototype.getWidthRight=function(){return this.width/2},t.exports=n},function(t,e,i){function n(t,e,i){if(this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},this.options=i,t&&null==t.start)throw new Error('Property "start" missing in item '+t);o.call(this,t,e,i)}var o=i(38);(n.prototype=new o(null,null,null)).isVisible=function(t){var e=this.width*t.getMillisecondsPerPixel();return this.data.start.getTime()+e>t.start&&this.data.start<t.end},n.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),(this.dom.point["timeline-item"]=this).dirty=!0)},n.prototype._appendDomElement=function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){var t=this.parent.dom.foreground;if(!t)throw new Error("Cannot redraw item: parent has no foreground container element");t.appendChild(this.dom.point)}this.displayed=!0},n.prototype._updateDirtyDomComponents=function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);var t=this.editable.updateTime||this.editable.updateGroup,e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(t?" vis-editable":" vis-readonly");this.dom.point.className="vis-item vis-point"+e,this.dom.dot.className="vis-item vis-dot"+e}},n.prototype._getDomComponentsSizes=function(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}},n.prototype._updateDomComponentsSizes=function(t){this.props.dot.width=t.dot.width,this.props.dot.height=t.dot.height,this.props.content.height=t.content.height,this.options.rtl?this.dom.content.style.marginRight=2*this.props.dot.width+"px":this.dom.content.style.marginLeft=2*this.props.dot.width+"px",this.width=t.point.width,this.height=t.point.height,this.dom.dot.style.top=(this.height-this.props.dot.height)/2+"px",this.options.rtl?this.dom.dot.style.right=this.props.dot.width/2+"px":this.dom.dot.style.left=this.props.dot.width/2+"px",this.dirty=!1},n.prototype._repaintDomAdditionals=function(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)},n.prototype.redraw=function(t){var e,i,n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){this.dirty&&(e=this._getDomComponentsSizes())}.bind(this),function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(e)}.bind(this),this._repaintDomAdditionals.bind(this)];return t?n:(n.forEach(function(t){i=t()}),i)},n.prototype.show=function(){this.displayed||this.redraw()},n.prototype.hide=function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)},n.prototype.repositionX=function(){var t=this.conversion.toScreen(this.data.start);this.options.rtl?(this.right=t-this.props.dot.width,this.dom.point.style.right=this.right+"px"):(this.left=t-this.props.dot.width,this.dom.point.style.left=this.left+"px")},n.prototype.repositionY=function(){var t=this.options.orientation.item;this.dom.point.style.top="top"==t?this.top+"px":this.parent.height-this.top-this.height+"px"},n.prototype.getWidthLeft=function(){return this.props.dot.width},n.prototype.getWidthRight=function(){return this.props.dot.width},t.exports=n},function(t,e,i){function n(t,e,i){if(this.props={content:{width:0}},this.overflow=!1,t){if(null==t.start)throw new Error('Property "start" missing in item '+t.id);if(null==t.end)throw new Error('Property "end" missing in item '+t.id)}o.call(this,t,e,i)}var o=i(38),r=i(69),s=i(70);(n.prototype=new o(null,null,null)).baseClassName="vis-item vis-background",n.prototype.stack=!1,n.prototype.isVisible=function(t){return this.data.start<t.end&&this.data.end>t.start},n.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)},n.prototype._appendDomElement=function(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var t=this.parent.dom.background;if(!t)throw new Error("Cannot redraw item: parent has no background container element");t.appendChild(this.dom.box)}this.displayed=!0},n.prototype._updateDirtyDomComponents=function(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);var t=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+t}},n.prototype._getDomComponentsSizes=function(){return this.overflow="hidden"!==window.getComputedStyle(this.dom.content).overflow,{content:{width:this.dom.content.offsetWidth}}},n.prototype._updateDomComponentsSizes=function(t){this.props.content.width=t.content.width,this.height=0,this.dirty=!1},n.prototype._repaintDomAdditionals=function(){},n.prototype.redraw=function(t){var e,i,n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){this.dirty&&(e=this._getDomComponentsSizes.bind(this)())}.bind(this),function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(e)}.bind(this),this._repaintDomAdditionals.bind(this)];return t?n:(n.forEach(function(t){i=t()}),i)},n.prototype.show=s.prototype.show,n.prototype.hide=s.prototype.hide,n.prototype.repositionX=s.prototype.repositionX,n.prototype.repositionY=function(t){var e,i=this.options.orientation.item;if(void 0!==this.data.subgroup){var n=this.data.subgroup;this.dom.box.style.height=this.parent.subgroups[n].height+"px",this.dom.box.style.top="top"==i?this.parent.top+this.parent.subgroups[n].top+"px":this.parent.top+this.parent.height-this.parent.subgroups[n].top-this.parent.subgroups[n].height+"px",this.dom.box.style.bottom=""}else this.parent instanceof r?(e=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom="bottom"==i?"0":"",this.dom.box.style.top="top"==i?"0":""):(e=this.parent.height,this.dom.box.style.top=this.parent.top+"px",this.dom.box.style.bottom="");this.dom.box.style.height=e+"px"},t.exports=n},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=((0,n(i(1)).default)(s,[{key:"setPosition",value:function(t,e){this.x=parseInt(t),this.y=parseInt(e)}},{key:"setText",value:function(t){t instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(t)):this.frame.innerHTML=t}},{key:"show",value:function(t){if(void 0===t&&(t=!0),!0===t){var e=this.frame.clientHeight,i=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,r=0,s=0;if("flip"==this.overflowMethod){var a=!1,l=!0;this.y-e<this.padding&&(l=!1),this.x+i>o-this.padding&&(a=!0),r=a?this.x-i:this.x,s=l?this.y-e:this.y}else(s=this.y-e)+e+this.padding>n&&(s=n-e-this.padding),s<this.padding&&(s=this.padding),(r=this.x)+i+this.padding>o&&(r=o-i-this.padding),r<this.padding&&(r=this.padding);this.frame.style.left=r+"px",this.frame.style.top=s+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),s);function s(t,e){(0,o.default)(this,s),this.container=t,this.overflowMethod=e||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n="string",o="boolean",r="number",s="object",a={configure:{enabled:{boolean:o},filter:{boolean:o,function:"function"},container:{dom:"dom"},__type__:{object:s,boolean:o,function:"function"}},align:{string:n},rtl:{boolean:o,undefined:"undefined"},rollingMode:{follow:{boolean:o},offset:{number:r,undefined:"undefined"},__type__:{object:s}},verticalScroll:{boolean:o,undefined:"undefined"},horizontalScroll:{boolean:o,undefined:"undefined"},autoResize:{boolean:o},throttleRedraw:{number:r},clickToUse:{boolean:o},dataAttributes:{string:n,array:"array"},editable:{add:{boolean:o,undefined:"undefined"},remove:{boolean:o,undefined:"undefined"},updateGroup:{boolean:o,undefined:"undefined"},updateTime:{boolean:o,undefined:"undefined"},overrideItems:{boolean:o,undefined:"undefined"},__type__:{boolean:o,object:s}},end:{number:r,date:"date",string:n,moment:"moment"},format:{minorLabels:{millisecond:{string:n,undefined:"undefined"},second:{string:n,undefined:"undefined"},minute:{string:n,undefined:"undefined"},hour:{string:n,undefined:"undefined"},weekday:{string:n,undefined:"undefined"},day:{string:n,undefined:"undefined"},week:{string:n,undefined:"undefined"},month:{string:n,undefined:"undefined"},year:{string:n,undefined:"undefined"},__type__:{object:s,function:"function"}},majorLabels:{millisecond:{string:n,undefined:"undefined"},second:{string:n,undefined:"undefined"},minute:{string:n,undefined:"undefined"},hour:{string:n,undefined:"undefined"},weekday:{string:n,undefined:"undefined"},day:{string:n,undefined:"undefined"},week:{string:n,undefined:"undefined"},month:{string:n,undefined:"undefined"},year:{string:n,undefined:"undefined"},__type__:{object:s,function:"function"}},__type__:{object:s}},moment:{function:"function"},groupOrder:{string:n,function:"function"},groupEditable:{add:{boolean:o,undefined:"undefined"},remove:{boolean:o,undefined:"undefined"},order:{boolean:o,undefined:"undefined"},__type__:{boolean:o,object:s}},groupOrderSwap:{function:"function"},height:{string:n,number:r},hiddenDates:{start:{date:"date",number:r,string:n,moment:"moment"},end:{date:"date",number:r,string:n,moment:"moment"},repeat:{string:n},__type__:{object:s,array:"array"}},itemsAlwaysDraggable:{item:{boolean:o,undefined:"undefined"},range:{boolean:o,undefined:"undefined"},__type__:{boolean:o,object:s}},limitSize:{boolean:o},locale:{string:n},locales:{__any__:{any:"any"},__type__:{object:s}},margin:{axis:{number:r},item:{horizontal:{number:r,undefined:"undefined"},vertical:{number:r,undefined:"undefined"},__type__:{object:s,number:r}},__type__:{object:s,number:r}},max:{date:"date",number:r,string:n,moment:"moment"},maxHeight:{number:r,string:n},maxMinorChars:{number:r},min:{date:"date",number:r,string:n,moment:"moment"},minHeight:{number:r,string:n},moveable:{boolean:o},multiselect:{boolean:o},multiselectPerGroup:{boolean:o},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:n,undefined:"undefined"},item:{string:n,undefined:"undefined"},__type__:{string:n,object:s}},selectable:{boolean:o},showCurrentTime:{boolean:o},showMajorLabels:{boolean:o},showMinorLabels:{boolean:o},stack:{boolean:o},stackSubgroups:{boolean:o},snap:{function:"function",null:"null"},start:{date:"date",number:r,string:n,moment:"moment"},template:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:n,function:"function"},showTooltips:{boolean:o},tooltip:{followMouse:{boolean:o},overflowMethod:{string:["cap","flip"]},__type__:{object:s}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:o,object:s}},timeAxis:{scale:{string:n,undefined:"undefined"},step:{number:r,undefined:"undefined"},__type__:{object:s}},type:{string:n},width:{string:n,number:r},zoomable:{boolean:o},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:r},zoomMin:{number:r},__type__:{object:s}};e.allOptions=a,e.configureOptions={global:{align:["center","left","right"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupsDraggable:!1,height:"",locale:"",margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip"},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1]}}},function(t,e,i){function n(t,e){this.id=v.randomUUID(),this.body=t,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=v.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var i=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(t,e){i._onAdd(e.items)},update:function(t,e){i._onUpdate(e.items)},remove:function(t,e){i._onRemove(e.items)}},this.groupListeners={add:function(t,e){i._onAddGroups(e.items)},update:function(t,e){i._onUpdateGroups(e.items)},remove:function(t,e){i._onRemoveGroups(e.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(e),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){i.lastStart=i.body.range.start,i.svg.style.left=v.option.asSize(-i.props.width),i.forceGraphUpdate=!0,i.redraw.call(i)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}var o,r=i(6),s=(o=r)&&o.__esModule?o:{default:o},v=i(2),u=i(14),a=i(11),l=i(12),d=i(16),h=i(107),c=i(109),f=i(112),p=i(110),m=i(111),g=i(72);(n.prototype=new d)._create=function(){var t=document.createElement("div");t.className="vis-line-graph",this.dom.frame=t,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",t.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new h(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new h(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new f(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new f(this.body,this.options.legend,"right",this.options.groups),this.show()},n.prototype.setOptions=function(t){if(t){void 0===t.graphHeight&&void 0!==t.height?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):void 0!==this.body.domProps.centerContainer.height&&void 0!==t.graphHeight&&parseInt((t.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),v.selectiveDeepExtend(["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"],this.options,t),v.mergeOptions(this.options,t,"interpolation"),v.mergeOptions(this.options,t,"drawPoints"),v.mergeOptions(this.options,t,"shaded"),v.mergeOptions(this.options,t,"legend"),t.interpolation&&"object"==(0,s.default)(t.interpolation)&&t.interpolation.parametrization&&("uniform"==t.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==t.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&void 0!==t.dataAxis&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&void 0!==t.legend&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty("__ungrouped__")&&this.groups.__ungrouped__.setOptions(t)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))},n.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},n.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},n.prototype.setItems=function(t){var e,i=this,n=this.itemsData;if(t){if(!(t instanceof a||t instanceof l))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=t}else this.itemsData=null;if(n&&(v.forEach(this.itemListeners,function(t,e){n.off(e,t)}),e=n.getIds(),this._onRemove(e)),this.itemsData){var o=this.id;v.forEach(this.itemListeners,function(t,e){i.itemsData.on(e,t,o)}),e=this.itemsData.getIds(),this._onAdd(e)}},n.prototype.setGroups=function(t){var e,i=this;if(this.groupsData){v.forEach(this.groupListeners,function(t,e){i.groupsData.off(e,t)}),e=this.groupsData.getIds(),this.groupsData=null;for(var n=0;n<e.length;n++)this._removeGroup(e[n])}if(t){if(!(t instanceof a||t instanceof l))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){var o=this.id;v.forEach(this.groupListeners,function(t,e){i.groupsData.on(e,t,o)}),e=this.groupsData.getIds(),this._onAddGroups(e)}},n.prototype._onUpdate=function(t){this._updateAllGroupData(t)},n.prototype._onAdd=function(t){this._onUpdate(t)},n.prototype._onRemove=function(t){this._onUpdate(t)},n.prototype._onUpdateGroups=function(t){this._updateAllGroupData(null,t)},n.prototype._onAddGroups=function(t){this._onUpdateGroups(t)},n.prototype._onRemoveGroups=function(t){for(var e=0;e<t.length;e++)this._removeGroup(t[e]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})},n.prototype._removeGroup=function(t){this.groups.hasOwnProperty(t)&&("right"==this.groups[t].options.yAxisOrientation?(this.yAxisRight.removeGroup(t),this.legendRight.removeGroup(t),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(t),this.legendLeft.removeGroup(t),this.legendLeft.redraw()),delete this.groups[t])},n.prototype._updateGroup=function(t,e){this.groups.hasOwnProperty(e)?(this.groups[e].update(t),"right"==this.groups[e].options.yAxisOrientation?(this.yAxisRight.updateGroup(e,this.groups[e]),this.legendRight.updateGroup(e,this.groups[e]),this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e)):(this.yAxisLeft.updateGroup(e,this.groups[e]),this.legendLeft.updateGroup(e,this.groups[e]),this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e))):(this.groups[e]=new c(t,e,this.options,this.groupsUsingDefaultStyles),"right"==this.groups[e].options.yAxisOrientation?(this.yAxisRight.addGroup(e,this.groups[e]),this.legendRight.addGroup(e,this.groups[e])):(this.yAxisLeft.addGroup(e,this.groups[e]),this.legendLeft.addGroup(e,this.groups[e]))),this.legendLeft.redraw(),this.legendRight.redraw()},n.prototype._updateAllGroupData=function(t,e){if(null!=this.itemsData){var i={},n=this.itemsData.get(),o=this.itemsData._fieldId,r={};t&&t.map(function(t){r[t]=t});for(var s={},a=0;a<n.length;a++){var l=n[a],d=l.group;null!=d||(d="__ungrouped__"),s.hasOwnProperty(d)?s[d]++:s[d]=1}var h={};if(!e&&t)for(d in this.groups)if(this.groups.hasOwnProperty(d)){var u=(m=this.groups[d]).getItems();i[d]=u.filter(function(t){return h[t[o]]=t[o],t[o]!==r[t[o]]});var c=s[d];s[d]-=i[d].length,i[d].length<c&&(i[d][c-1]={})}for(a=0;a<n.length;a++)if(null!=(d=(l=n[a]).group)||(d="__ungrouped__"),e||!t||l[o]===r[l[o]]||!h.hasOwnProperty(l[o])){i.hasOwnProperty(d)||(i[d]=new Array(s[d]));var f=v.bridgeObject(l);f.x=v.convert(l.x,"Date"),f.end=v.convert(l.end,"Date"),f.orginalY=l.y,f.y=Number(l.y),f[o]=l[o];var p=i[d].length-s[d]--;i[d][p]=f}for(d in this.groups)this.groups.hasOwnProperty(d)&&(i.hasOwnProperty(d)||(i[d]=new Array(0)));for(d in i)if(i.hasOwnProperty(d))if(0==i[d].length)this.groups.hasOwnProperty(d)&&this._removeGroup(d);else{var m=void 0;null!=this.groupsData&&(m=this.groupsData.get(d)),null==m&&(m={id:d,content:this.options.defaultGroup+d}),this._updateGroup(m,d),this.groups[d].setItems(i[d])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}},n.prototype.redraw=function(){var t=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,t=this._isResized()||t;var e=this.body.range.end-this.body.range.start,i=e!=this.lastVisibleInterval;if(this.lastVisibleInterval=e,1==t&&(this.svg.style.width=v.option.asSize(3*this.props.width),this.svg.style.left=v.option.asSize(-this.props.width),-1==(this.options.height+"").indexOf("%")&&1!=this.updateSVGheightOnResize||(this.updateSVGheight=!0)),1==this.updateSVGheight?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",1==t||1==i||1==this.abortedGraphUpdate||1==this.forceGraphUpdate)t=this._updateGraph()||t,this.forceGraphUpdate=!1;else if(0!=this.lastStart){var n=this.body.range.start-this.lastStart,o=this.body.range.end-this.body.range.start;if(0!=this.props.width){var r=n*(this.props.width/o);this.svg.style.left=-this.props.width-r+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),t},n.prototype._getSortedGroupIds=function(){var t=[];for(var e in this.groups)if(this.groups.hasOwnProperty(e)){var i=this.groups[e];1!=i.visible||void 0!==this.options.groups.visibility[e]&&1!=this.options.groups.visibility[e]||t.push({id:e,zIndex:i.options.zIndex})}v.insertSort(t,function(t,e){var i=t.zIndex,n=e.zIndex;return void 0===i&&(i=0),void 0===n&&(n=0),i==n?0:i<n?-1:1});for(var n=new Array(t.length),o=0;o<t.length;o++)n[o]=t[o].id;return n},n.prototype._updateGraph=function(){if(u.prepareElements(this.svgElements),0!=this.props.width&&null!=this.itemsData){var t,e,i={},n=this.body.util.toGlobalTime(-this.body.domProps.root.width),o=this.body.util.toGlobalTime(2*this.body.domProps.root.width),r=this._getSortedGroupIds();if(0<r.length){var s={};for(this._getRelevantData(r,s,n,o),this._applySampling(r,s),e=0;e<r.length;e++)this._convertXcoordinates(s[r[e]]);if(this._getYRanges(r,s,i),1==this._updateYAxis(r,i))return u.cleanupElements(this.svgElements),this.abortedGraphUpdate=!0;this.abortedGraphUpdate=!1;var a=void 0;for(e=0;e<r.length;e++)t=this.groups[r[e]],!0===this.options.stack&&"line"===this.options.style&&(null!=t.options.excludeFromStacking&&t.options.excludeFromStacking||(null!=a&&(this._stack(s[t.id],s[a.id]),1==t.options.shaded.enabled&&"group"!==t.options.shaded.orientation&&("top"==t.options.shaded.orientation&&"group"!==a.options.shaded.orientation?(a.options.shaded.orientation="group",a.options.shaded.groupId=t.id):(t.options.shaded.orientation="group",t.options.shaded.groupId=a.id))),a=t)),this._convertYcoordinates(s[r[e]],t);var l={};for(e=0;e<r.length;e++)if("line"===(t=this.groups[r[e]]).options.style&&1==t.options.shaded.enabled){var d=s[r[e]];if(null==d||0==d.length)continue;if(l.hasOwnProperty(r[e])||(l[r[e]]=m.calcPath(d,t)),"group"===t.options.shaded.orientation){var h=t.options.shaded.groupId;if(-1===r.indexOf(h)){console.log(t.id+": Unknown shading group target given:"+h);continue}l.hasOwnProperty(h)||(l[h]=m.calcPath(s[h],this.groups[h])),m.drawShading(l[r[e]],t,l[h],this.framework)}else m.drawShading(l[r[e]],t,void 0,this.framework)}for(p.draw(r,s,this.framework),e=0;e<r.length;e++)if(t=this.groups[r[e]],0<s[r[e]].length)switch(t.options.style){case"line":l.hasOwnProperty(r[e])||(l[r[e]]=m.calcPath(s[r[e]],t)),m.draw(l[r[e]],t,this.framework);case"point":case"points":"point"!=t.options.style&&"points"!=t.options.style&&1!=t.options.drawPoints.enabled||g.draw(s[r[e]],t,this.framework)}}}return u.cleanupElements(this.svgElements),!1},n.prototype._stack=function(t,e){for(var i,n,o,r,s,a=i=0;a<t.length;a++){s=r=void 0;for(var l=i;l<e.length;l++){if(e[l].x===t[a].x){r=e[l],s=e[l],i=l;break}if(e[l].x>t[a].x){s=e[l],r=0==l?s:e[l-1],i=l;break}}void 0===s&&(r=e[e.length-1],s=e[e.length-1]),n=s.x-r.x,o=s.y-r.y,t[a].y=0==n?t[a].orginalY+s.y:t[a].orginalY+o/n*(t[a].x-r.x)+r.y}},n.prototype._getRelevantData=function(t,e,i,n){var o,r,s,a;if(0<t.length)for(r=0;r<t.length;r++){var l=(o=this.groups[t[r]]).getItems();if(1==o.options.sort){var d=function(t,e){return t.getTime()==e.getTime()?0:t<e?-1:1},h=Math.max(0,v.binarySearchValue(l,i,"x","before",d)),u=Math.min(l.length,v.binarySearchValue(l,n,"x","after",d)+1);u<=0&&(u=l.length);var c=new Array(u-h);for(s=h;s<u;s++)a=o.itemsData[s],c[s-h]=a;e[t[r]]=c}else e[t[r]]=o.itemsData}},n.prototype._applySampling=function(t,e){if(0<t.length)for(var i=0;i<t.length;i++)if(1==this.groups[t[i]].options.sampling){var n=e[t[i]];if(0<n.length){var o,r=n.length,s=r/(this.body.util.toGlobalScreen(n[n.length-1].x)-this.body.util.toGlobalScreen(n[0].x));o=Math.min(Math.ceil(.2*r),Math.max(1,Math.round(s)));for(var a=new Array(r),l=0;l<r;l+=o){a[Math.round(l/o)]=n[l]}e[t[i]]=a.splice(0,Math.round(r/o))}}},n.prototype._getYRanges=function(t,e,i){var n,o,r,s,a=[],l=[];if(0<t.length){for(r=0;r<t.length;r++)n=e[t[r]],s=this.groups[t[r]].options,0<n.length&&(o=this.groups[t[r]],!0===s.stack&&"bar"===s.style?"left"===s.yAxisOrientation?a=a.concat(n):l=l.concat(n):i[t[r]]=o.getYRange(n,t[r]));p.getStackedYRange(a,i,t,"__barStackLeft","left"),p.getStackedYRange(l,i,t,"__barStackRight","right")}},n.prototype._updateYAxis=function(t,e){var i,n,o=!1,r=!1,s=!1,a=1e9,l=1e9,d=-1e9,h=-1e9;if(0<t.length){for(var u=0;u<t.length;u++){var c=this.groups[t[u]];c&&"right"!=c.options.yAxisOrientation?(r=!0,d=-(a=1e9)):c&&c.options.yAxisOrientation&&(s=!0,h=-(l=1e9))}for(u=0;u<t.length;u++)e.hasOwnProperty(t[u])&&!0!==e[t[u]].ignore&&(i=e[t[u]].min,n=e[t[u]].max,"right"!=e[t[u]].yAxisOrientation?(r=!0,a=i<a?i:a,d=d<n?n:d):(s=!0,l=i<l?i:l,h=h<n?n:h));1==r&&this.yAxisLeft.setRange(a,d),1==s&&this.yAxisRight.setRange(l,h)}o=this._toggleAxisVisiblity(r,this.yAxisLeft)||o,o=this._toggleAxisVisiblity(s,this.yAxisRight)||o,1==s&&1==r?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!r,this.yAxisRight.masterAxis=this.yAxisLeft,o=(0==this.yAxisRight.master&&(this.yAxisLeft.lineOffset=1==s?this.yAxisRight.width:0,o=this.yAxisLeft.redraw()||o),this.yAxisRight.redraw()||o);var f=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(u=0;u<f.length;u++)-1!=t.indexOf(f[u])&&t.splice(t.indexOf(f[u]),1);return o},n.prototype._toggleAxisVisiblity=function(t,e){var i=!1;return 0==t?e.dom.frame.parentNode&&0==e.hidden&&(e.hide(),i=!0):e.dom.frame.parentNode||1!=e.hidden||(e.show(),i=!0),i},n.prototype._convertXcoordinates=function(t){for(var e=this.body.util.toScreen,i=0;i<t.length;i++)t[i].screen_x=e(t[i].x)+this.props.width,t[i].screen_y=t[i].y,null!=t[i].end?t[i].screen_end=e(t[i].end)+this.props.width:t[i].screen_end=void 0},n.prototype._convertYcoordinates=function(t,e){var i=this.yAxisLeft,n=Number(this.svg.style.height.replace("px",""));"right"==e.options.yAxisOrientation&&(i=this.yAxisRight);for(var o=0;o<t.length;o++)t[o].screen_y=Math.round(i.convertValue(t[o].y));e.setZeroPosition(Math.min(n,i.convertValue(0)))},t.exports=n},function(t,e,i){function n(t,e,i,n){this.id=a.randomUUID(),this.body=t,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format:function(t){return""+parseFloat(t.toPrecision(3))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format:function(t){return""+parseFloat(t.toPrecision(3))},title:{text:void 0,style:void 0}}},this.linegraphOptions=n,this.linegraphSVG=i,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=a.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(e),this.width=Number((""+this.options.width).replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};var o=this;this.body.emitter.on("verticalDrag",function(){o.dom.lineContainer.style.top=o.body.domProps.scrollTop+"px"})}var o,r=i(8),s=(o=r)&&o.__esModule?o:{default:o},a=i(2),l=i(14),d=i(16),h=i(108);(n.prototype=new d).addGroup=function(t,e){this.groups.hasOwnProperty(t)||(this.groups[t]=e),this.amountOfGroups+=1},n.prototype.updateGroup=function(t,e){this.groups.hasOwnProperty(t)||(this.amountOfGroups+=1),this.groups[t]=e},n.prototype.removeGroup=function(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)},n.prototype.setOptions=function(t){if(t){var e=!1;this.options.orientation!=t.orientation&&void 0!==t.orientation&&(e=!0);a.selectiveDeepExtend(["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"],this.options,t),this.minWidth=Number((""+this.options.width).replace("px","")),!0===e&&this.dom.frame&&(this.hide(),this.show())}},n.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)},n.prototype._redrawGroupIcons=function(){l.prepareElements(this.svgElements);var t,e=this.options.iconWidth,i=11.5;t="left"===this.options.orientation?4:this.width-e-4;var n=(0,s.default)(this.groups);n.sort(function(t,e){return t<e?-1:1});for(var o=0;o<n.length;o++){var r=n[o];!0!==this.groups[r].visible||void 0!==this.linegraphOptions.visibility[r]&&!0!==this.linegraphOptions.visibility[r]||(this.groups[r].getLegend(e,15,this.framework,t,i),i+=19)}l.cleanupElements(this.svgElements),this.iconsRemoved=!1},n.prototype._cleanupIcons=function(){!1===this.iconsRemoved&&(l.prepareElements(this.svgElements),l.cleanupElements(this.svgElements),this.iconsRemoved=!0)},n.prototype.show=function(){this.hidden=!1,this.dom.frame.parentNode||("left"===this.options.orientation?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer)},n.prototype.hide=function(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.parentNode&&this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer)},n.prototype.setRange=function(t,e){this.range.start=t,this.range.end=e},n.prototype.redraw=function(){var t=!1,e=0;for(var i in this.dom.lineContainer.style.top=this.body.domProps.scrollTop+"px",this.groups)this.groups.hasOwnProperty(i)&&(!0!==this.groups[i].visible||void 0!==this.linegraphOptions.visibility[i]&&!0!==this.linegraphOptions.visibility[i]||e++);if(0===this.amountOfGroups||0===e)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=this.height+"px",this.width=!0===this.options.visible?Number((""+this.options.width).replace("px","")):0;var n=this.props,o=this.dom.frame;o.className="vis-data-axis",this._calculateCharSize();var r=this.options.orientation,s=this.options.showMinorLabels,a=this.options.showMajorLabels;n.minorLabelHeight=s?n.minorCharHeight:0,n.majorLabelHeight=a?n.majorCharHeight:0,n.minorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.minorLinesOffset,n.minorLineHeight=1,n.majorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.majorLinesOffset,n.majorLineHeight=1,"left"===r?(o.style.top="0",o.style.left="0",o.style.bottom="",o.style.width=this.width+"px",o.style.height=this.height+"px",this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(o.style.top="",o.style.bottom="0",o.style.left="0",o.style.width=this.width+"px",o.style.height=this.height+"px",this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),t=this._redrawLabels(),t=this._isResized()||t,!0===this.options.icons?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(r)}return t},n.prototype._redrawLabels=function(){var n=this;l.prepareElements(this.DOMelements.lines),l.prepareElements(this.DOMelements.labels);var o=this.options.orientation,t=null!=this.options[o].range?this.options[o].range:{},e=!0;null!=t.max&&(this.range.end=t.max,e=!1);var i=!0;null!=t.min&&(this.range.start=t.min,i=!1),this.scale=new h(this.range.start,this.range.end,i,e,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[o].format),!1===this.master&&null!=this.masterAxis&&this.scale.followScale(this.masterAxis.scale),this.maxLabelSize=0,this.scale.getLines().forEach(function(t){var e=t.y,i=t.major;n.options.showMinorLabels&&!1===i&&n._redrawLabel(e-2,t.val,o,"vis-y-axis vis-minor",n.props.minorCharHeight),i&&0<=e&&n._redrawLabel(e-2,t.val,o,"vis-y-axis vis-major",n.props.majorCharHeight),!0===n.master&&(i?n._redrawLine(e,o,"vis-grid vis-horizontal vis-major",n.options.majorLinesOffset,n.props.majorLineWidth):n._redrawLine(e,o,"vis-grid vis-horizontal vis-minor",n.options.minorLinesOffset,n.props.minorLineWidth))});var r=0;void 0!==this.options[o].title&&void 0!==this.options[o].title.text&&(r=this.props.titleCharHeight);var s=!0===this.options.icons?Math.max(this.options.iconWidth,r)+this.options.labelOffsetX+15:r+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-s&&!0===this.options.visible?(this.width=this.maxLabelSize+s,this.options.width=this.width+"px",l.cleanupElements(this.DOMelements.lines),l.cleanupElements(this.DOMelements.labels),this.redraw(),!0):this.maxLabelSize<this.width-s&&!0===this.options.visible&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+s),this.options.width=this.width+"px",l.cleanupElements(this.DOMelements.lines),l.cleanupElements(this.DOMelements.labels),this.redraw(),!0):(l.cleanupElements(this.DOMelements.lines),l.cleanupElements(this.DOMelements.labels),!1)},n.prototype.convertValue=function(t){return this.scale.convertValue(t)},n.prototype.screenToValue=function(t){return this.scale.screenToValue(t)},n.prototype._redrawLabel=function(t,e,i,n,o){var r=l.getDOMElement("div",this.DOMelements.labels,this.dom.frame);r.className=n,r.innerHTML=e,"left"===i?(r.style.left="-"+this.options.labelOffsetX+"px",r.style.textAlign="right"):(r.style.right="-"+this.options.labelOffsetX+"px",r.style.textAlign="left"),r.style.top=t-.5*o+this.options.labelOffsetY+"px",e+="";var s=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<e.length*s&&(this.maxLabelSize=e.length*s)},n.prototype._redrawLine=function(t,e,i,n,o){if(!0===this.master){var r=l.getDOMElement("div",this.DOMelements.lines,this.dom.lineContainer);r.className=i,r.innerHTML="","left"===e?r.style.left=this.width-n+"px":r.style.right=this.width-n+"px",r.style.width=o+"px",r.style.top=t+"px"}},n.prototype._redrawTitle=function(t){if(l.prepareElements(this.DOMelements.title),void 0!==this.options[t].title&&void 0!==this.options[t].title.text){var e=l.getDOMElement("div",this.DOMelements.title,this.dom.frame);e.className="vis-y-axis vis-title vis-"+t,e.innerHTML=this.options[t].title.text,void 0!==this.options[t].title.style&&a.addCssText(e,this.options[t].title.style),"left"===t?e.style.left=this.props.titleCharHeight+"px":e.style.right=this.props.titleCharHeight+"px",e.style.width=this.height+"px"}l.cleanupElements(this.DOMelements.title)},n.prototype._calculateCharSize=function(){if(!("minorCharHeight"in this.props)){var t=document.createTextNode("0"),e=document.createElement("div");e.className="vis-y-axis vis-minor vis-measure",e.appendChild(t),this.dom.frame.appendChild(e),this.props.minorCharHeight=e.clientHeight,this.props.minorCharWidth=e.clientWidth,this.dom.frame.removeChild(e)}if(!("majorCharHeight"in this.props)){var i=document.createTextNode("0"),n=document.createElement("div");n.className="vis-y-axis vis-major vis-measure",n.appendChild(i),this.dom.frame.appendChild(n),this.props.majorCharHeight=n.clientHeight,this.props.majorCharWidth=n.clientWidth,this.dom.frame.removeChild(n)}if(!("titleCharHeight"in this.props)){var o=document.createTextNode("0"),r=document.createElement("div");r.className="vis-y-axis vis-title vis-measure",r.appendChild(o),this.dom.frame.appendChild(r),this.props.titleCharHeight=r.clientHeight,this.props.titleCharWidth=r.clientWidth,this.dom.frame.removeChild(r)}},t.exports=n},function(t,e,i){function n(t,e,i,n,o,r){var s=6<arguments.length&&void 0!==arguments[6]&&arguments[6],a=7<arguments.length&&void 0!==arguments[7]&&arguments[7];if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=o,this.majorCharHeight=r,this._start=t,this._end=e,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=s,this.autoScaleStart=i,this.autoScaleEnd=n,this.formattingFunction=a,i||n){var l=this,d=function(t){var e=t-t%(l.magnitudefactor*l.minorSteps[l.minorStepIdx]);return t%(l.magnitudefactor*l.minorSteps[l.minorStepIdx])>l.magnitudefactor*l.minorSteps[l.minorStepIdx]*.5?e+l.magnitudefactor*l.minorSteps[l.minorStepIdx]:e};i&&(this._start-=2*this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._start=d(this._start)),n&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=d(this._end)),this.determineScale()}}n.prototype.setCharHeight=function(t){this.majorCharHeight=t},n.prototype.setHeight=function(t){this.containerHeight=t},n.prototype.determineScale=function(){var t=this._end-this._start;this.scale=this.containerHeight/t;var e=this.majorCharHeight/this.scale,i=0<t?Math.round(Math.log(t)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,i);var n=0;i<0&&(n=i);for(var o=!1,r=n;Math.abs(r)<=Math.abs(i);r++){this.magnitudefactor=Math.pow(10,r);for(var s=0;s<this.minorSteps.length;s++)if(this.magnitudefactor*this.minorSteps[s]>=e){o=!0,this.minorStepIdx=s;break}if(!0===o)break}},n.prototype.is_major=function(t){return t%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])==0},n.prototype.getStep=function(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]},n.prototype.getFirstMajor=function(){var t=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(t-this._start%t)%t)},n.prototype.formatValue=function(t){var e=t.toPrecision(5);return"function"==typeof this.formattingFunction&&(e=this.formattingFunction(t)),"number"==typeof e?""+e:"string"==typeof e?e:t.toPrecision(5)},n.prototype.getLines=function(){for(var t=[],e=this.getStep(),i=(e-this._start%e)%e,n=this._start+i;1e-5<this._end-n;n+=e)n!=this._start&&t.push({major:this.is_major(n),y:this.convertValue(n),val:this.formatValue(n)});return t},n.prototype.followScale=function(t){function e(){s.magnitudefactor*=2}function i(){s.magnitudefactor/=2}var n=this.minorStepIdx,o=this._start,r=this._end,s=this;t.minorStepIdx<=1&&this.minorStepIdx<=1||1<t.minorStepIdx&&1<this.minorStepIdx||(t.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,2==n||e(),e()):(this.minorStepIdx=2,1==n||i(),i()));for(var a=t.convertValue(0),l=t.getStep()*t.scale,d=!1,h=0;!d&&h++<5;){this.scale=l/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);var u=this.containerHeight/this.scale;this._start=o,this._end=this._start+u;var c=this._end*this.scale,f=this.magnitudefactor*this.majorSteps[this.minorStepIdx],p=this.getFirstMajor()-t.getFirstMajor();if(this.zeroAlign){var m=a-c;this._end+=m/this.scale,this._start=this._end-u}else this.autoScaleStart?this._start-=p/this.scale:this._start+=f-p/this.scale,this._end=this._start+u;if(!this.autoScaleEnd&&this._end>r+1e-5)i(),d=!1;else{if(!this.autoScaleStart&&this._start<o-1e-5){if(!(this.zeroAlign&&0<=o)){i(),d=!1;continue}console.warn("Can't adhere to given 'min' range, due to zeroalign")}d=!(this.autoScaleStart&&this.autoScaleEnd&&u<r-o)||(e(),!1)}}},n.prototype.convertValue=function(t){return this.containerHeight-(t-this._start)*this.scale},n.prototype.screenToValue=function(t){return(this.containerHeight-t)/this.scale+this._start},t.exports=n},function(t,e,i){function n(t,e,i,n){this.id=e;this.options=a.selectiveBridgeObject(["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"],i),this.usingDefaultStyle=void 0===t.className,this.groupsUsingDefaultStyles=n,this.zeroPosition=0,this.update(t),1==this.usingDefaultStyle&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=void 0===t.visible||t.visible}var o,r=i(6),s=(o=r)&&o.__esModule?o:{default:o},a=i(2),l=i(110),d=i(111),h=i(72);n.prototype.setItems=function(t){null!=t?(this.itemsData=t,1==this.options.sort&&a.insertSort(this.itemsData,function(t,e){return t.x>e.x?1:-1})):this.itemsData=[]},n.prototype.getItems=function(){return this.itemsData},n.prototype.setZeroPosition=function(t){this.zeroPosition=t},n.prototype.setOptions=function(t){if(void 0!==t){a.selectiveDeepExtend(["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"],this.options,t),"function"==typeof t.drawPoints&&(t.drawPoints={onRender:t.drawPoints}),a.mergeOptions(this.options,t,"interpolation"),a.mergeOptions(this.options,t,"drawPoints"),a.mergeOptions(this.options,t,"shaded"),t.interpolation&&"object"==(0,s.default)(t.interpolation)&&t.interpolation.parametrization&&("uniform"==t.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==t.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}},n.prototype.update=function(t){this.group=t,this.content=t.content||"graph",this.className=t.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=void 0===t.visible||t.visible,this.style=t.style,this.setOptions(t.options)},n.prototype.getLegend=function(t,e,i,n,o){switch(null!=i&&null!=i||(i={svg:document.createElementNS("http://www.w3.org/2000/svg","svg"),svgElements:{},options:this.options,groups:[this]}),null!=n&&null!=n||(n=0),null!=o&&null!=o||(o=.5*e),this.options.style){case"line":d.drawIcon(this,n,o,t,e,i);break;case"points":case"point":h.drawIcon(this,n,o,t,e,i);break;case"bar":l.drawIcon(this,n,o,t,e,i)}return{icon:i.svg,label:this.content,orientation:this.options.yAxisOrientation}},n.prototype.getYRange=function(t){for(var e=t[0].y,i=t[0].y,n=0;n<t.length;n++)e=e>t[n].y?t[n].y:e,i=i<t[n].y?t[n].y:i;return{min:e,max:i,yAxisOrientation:this.options.yAxisOrientation}},t.exports=n},function(t,e,i){function y(t,e){}var b=i(14),w=i(72);y.drawIcon=function(t,e,i,n,o,r){var s=.5*o,a=b.getSVGElement("rect",r.svgElements,r.svg);a.setAttributeNS(null,"x",e),a.setAttributeNS(null,"y",i-s),a.setAttributeNS(null,"width",n),a.setAttributeNS(null,"height",2*s),a.setAttributeNS(null,"class","vis-outline");var l=Math.round(.3*n),d=t.options.barChart.width/l,h=Math.round(.4*o),u=Math.round(.75*o),c=Math.round((n-2*l)/3);if(b.drawBar(e+.5*l+c,i+s-h-1,l,h,t.className+" vis-bar",r.svgElements,r.svg,t.style),b.drawBar(e+1.5*l+c+2,i+s-u-1,l,u,t.className+" vis-bar",r.svgElements,r.svg,t.style),1==t.options.drawPoints.enabled){var f={style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size/d,className:t.className};b.drawPoint(e+.5*l+c,i+s-h-1,f,r.svgElements,r.svg),b.drawPoint(e+1.5*l+c+2,i+s-u-1,f,r.svgElements,r.svg)}},y.draw=function(t,e,i){var n,o,r,s,a,l,d=[],h={},u=0;for(a=0;a<t.length;a++)if("bar"===(s=i.groups[t[a]]).options.style&&!0===s.visible&&(void 0===i.options.groups.visibility[t[a]]||!0===i.options.groups.visibility[t[a]]))for(l=0;l<e[t[a]].length;l++)d.push({screen_x:e[t[a]][l].screen_x,screen_end:e[t[a]][l].screen_end,screen_y:e[t[a]][l].screen_y,x:e[t[a]][l].x,end:e[t[a]][l].end,y:e[t[a]][l].y,groupId:t[a],label:e[t[a]][l].label}),u+=1;if(0!==u)for(d.sort(function(t,e){return t.screen_x===e.screen_x?t.groupId<e.groupId?-1:1:t.screen_x-e.screen_x}),y._getDataIntersections(h,d),a=0;a<d.length;a++){var c=null!=(s=i.groups[d[a].groupId]).options.barChart.minWidth?s.options.barChart.minWidth:.1*s.options.barChart.width,f=0;if(void 0===h[o=d[a].screen_x])a+1<d.length&&(n=Math.abs(d[a+1].screen_x-o)),r=y._getSafeDrawData(n,s,c);else{var p=a+(h[o].amount-h[o].resolved);p<d.length&&(n=Math.abs(d[p].screen_x-o)),r=y._getSafeDrawData(n,s,c),h[o].resolved+=1,!0===s.options.stack&&!0!==s.options.excludeFromStacking?d[a].screen_y<s.zeroPosition?(f=h[o].accumulatedNegative,h[o].accumulatedNegative+=s.zeroPosition-d[a].screen_y):(f=h[o].accumulatedPositive,h[o].accumulatedPositive+=s.zeroPosition-d[a].screen_y):!0===s.options.barChart.sideBySide&&(r.width=r.width/h[o].amount,r.offset+=h[o].resolved*r.width-.5*r.width*(h[o].amount+1))}var m=r.width,v=d[a].screen_x;if(null!=d[a].screen_end?v+=.5*(m=d[a].screen_end-d[a].screen_x):v+=r.offset,b.drawBar(v,d[a].screen_y-f,m,s.zeroPosition-d[a].screen_y,s.className+" vis-bar",i.svgElements,i.svg,s.style),!0===s.options.drawPoints.enabled){var g={screen_x:d[a].screen_x,screen_y:d[a].screen_y-f,x:d[a].x,y:d[a].y,groupId:d[a].groupId,label:d[a].label};w.draw([g],s,i,r.offset)}}},y._getDataIntersections=function(t,e){for(var i,n=0;n<e.length;n++)n+1<e.length&&(i=Math.abs(e[n+1].screen_x-e[n].screen_x)),0<n&&(i=Math.min(i,Math.abs(e[n-1].screen_x-e[n].screen_x))),0===i&&(void 0===t[e[n].screen_x]&&(t[e[n].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),t[e[n].screen_x].amount+=1)},y._getSafeDrawData=function(t,e,i){var n,o;return t<e.options.barChart.width&&0<t?(n=t<i?i:t,o=0,"left"===e.options.barChart.align?o-=.5*t:"right"===e.options.barChart.align&&(o+=.5*t)):(n=e.options.barChart.width,o=0,"left"===e.options.barChart.align?o-=.5*e.options.barChart.width:"right"===e.options.barChart.align&&(o+=.5*e.options.barChart.width)),{width:n,offset:o}},y.getStackedYRange=function(t,e,i,n,o){if(0<t.length){t.sort(function(t,e){return t.screen_x===e.screen_x?t.groupId<e.groupId?-1:1:t.screen_x-e.screen_x});var r={};y._getDataIntersections(r,t),e[n]=y._getStackedYRange(r,t),e[n].yAxisOrientation=o,i.push(n)}},y._getStackedYRange=function(t,e){for(var i,n=e[0].screen_y,o=e[0].screen_y,r=0;r<e.length;r++)void 0===t[i=e[r].screen_x]?(n=n>e[r].screen_y?e[r].screen_y:n,o=o<e[r].screen_y?e[r].screen_y:o):e[r].screen_y<0?t[i].accumulatedNegative+=e[r].screen_y:t[i].accumulatedPositive+=e[r].screen_y;for(var s in t)t.hasOwnProperty(s)&&(n=(n=n>t[s].accumulatedNegative?t[s].accumulatedNegative:n)>t[s].accumulatedPositive?t[s].accumulatedPositive:n,o=(o=o<t[s].accumulatedNegative?t[s].accumulatedNegative:o)<t[s].accumulatedPositive?t[s].accumulatedPositive:o);return{min:n,max:o}},t.exports=y},function(t,e,i){function n(t,e){}var u=i(14);n.calcPath=function(t,e){if(null!=t&&0<t.length)return 1==e.options.interpolation.enabled?n._catmullRom(t,e):n._linear(t)},n.drawIcon=function(t,e,i,n,o,r){var s,a,l=.5*o,d=u.getSVGElement("rect",r.svgElements,r.svg);if(d.setAttributeNS(null,"x",e),d.setAttributeNS(null,"y",i-l),d.setAttributeNS(null,"width",n),d.setAttributeNS(null,"height",2*l),d.setAttributeNS(null,"class","vis-outline"),(s=u.getSVGElement("path",r.svgElements,r.svg)).setAttributeNS(null,"class",t.className),void 0!==t.style&&s.setAttributeNS(null,"style",t.style),s.setAttributeNS(null,"d","M"+e+","+i+" L"+(e+n)+","+i),1==t.options.shaded.enabled&&(a=u.getSVGElement("path",r.svgElements,r.svg),"top"==t.options.shaded.orientation?a.setAttributeNS(null,"d","M"+e+", "+(i-l)+"L"+e+","+i+" L"+(e+n)+","+i+" L"+(e+n)+","+(i-l)):a.setAttributeNS(null,"d","M"+e+","+i+" L"+e+","+(i+l)+" L"+(e+n)+","+(i+l)+"L"+(e+n)+","+i),a.setAttributeNS(null,"class",t.className+" vis-icon-fill"),void 0!==t.options.shaded.style&&""!==t.options.shaded.style&&a.setAttributeNS(null,"style",t.options.shaded.style)),1==t.options.drawPoints.enabled){var h={style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size,className:t.className};u.drawPoint(e+.5*n,i,h,r.svgElements,r.svg)}},n.drawShading=function(t,e,i,n){if(1==e.options.shaded.enabled){var o=Number(n.svg.style.height.replace("px","")),r=u.getSVGElement("path",n.svgElements,n.svg),s="L";1==e.options.interpolation.enabled&&(s="C");var a,l;l="top"==e.options.shaded.orientation?0:"bottom"==e.options.shaded.orientation?o:Math.min(Math.max(0,e.zeroPosition),o),a="group"==e.options.shaded.orientation&&null!=i&&null!=i?"M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,s,!1)+" L"+i[i.length-1][0]+","+i[i.length-1][1]+" "+this.serializePath(i,s,!0)+i[0][0]+","+i[0][1]+" Z":"M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,s,!1)+" V"+l+" H"+t[0][0]+" Z",r.setAttributeNS(null,"class",e.className+" vis-fill"),void 0!==e.options.shaded.style&&r.setAttributeNS(null,"style",e.options.shaded.style),r.setAttributeNS(null,"d",a)}},n.draw=function(t,e,i){if(null!=t&&null!=t){var n=u.getSVGElement("path",i.svgElements,i.svg);n.setAttributeNS(null,"class",e.className),void 0!==e.style&&n.setAttributeNS(null,"style",e.style);var o="L";1==e.options.interpolation.enabled&&(o="C"),n.setAttributeNS(null,"d","M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,o,!1))}},n.serializePath=function(t,e,i){if(t.length<2)return"";var n,o=e;if(i)for(n=t.length-2;0<n;n--)o+=t[n][0]+","+t[n][1]+" ";else for(n=1;n<t.length;n++)o+=t[n][0]+","+t[n][1]+" ";return o},n._catmullRomUniform=function(t){var e,i,n,o,r,s,a=[];a.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var l=t.length,d=0;d<l-1;d++)e=0==d?t[0]:t[d-1],i=t[d],n=t[d+1],o=d+2<l?t[d+2]:n,r={screen_x:(-e.screen_x+6*i.screen_x+n.screen_x)*(1/6),screen_y:(-e.screen_y+6*i.screen_y+n.screen_y)*(1/6)},s={screen_x:(i.screen_x+6*n.screen_x-o.screen_x)*(1/6),screen_y:(i.screen_y+6*n.screen_y-o.screen_y)*(1/6)},a.push([r.screen_x,r.screen_y]),a.push([s.screen_x,s.screen_y]),a.push([n.screen_x,n.screen_y]);return a},n._catmullRom=function(t,e){var i=e.options.interpolation.alpha;if(0==i||void 0===i)return this._catmullRomUniform(t);var n,o,r,s,a,l,d,h,u,c,f,p,m,v,g,y,b,w,_,x=[];x.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var k=t.length,S=0;S<k-1;S++)n=0==S?t[0]:t[S-1],o=t[S],r=t[S+1],s=S+2<k?t[S+2]:r,d=Math.sqrt(Math.pow(n.screen_x-o.screen_x,2)+Math.pow(n.screen_y-o.screen_y,2)),h=Math.sqrt(Math.pow(o.screen_x-r.screen_x,2)+Math.pow(o.screen_y-r.screen_y,2)),u=Math.sqrt(Math.pow(r.screen_x-s.screen_x,2)+Math.pow(r.screen_y-s.screen_y,2)),v=Math.pow(u,i),y=Math.pow(u,2*i),g=Math.pow(h,i),b=Math.pow(h,2*i),_=Math.pow(d,i),c=2*(w=Math.pow(d,2*i))+3*_*g+b,f=2*y+3*v*g+b,0<(p=3*_*(_+g))&&(p=1/p),0<(m=3*v*(v+g))&&(m=1/m),a={screen_x:(-b*n.screen_x+c*o.screen_x+w*r.screen_x)*p,screen_y:(-b*n.screen_y+c*o.screen_y+w*r.screen_y)*p},l={screen_x:(y*o.screen_x+f*r.screen_x-b*s.screen_x)*m,screen_y:(y*o.screen_y+f*r.screen_y-b*s.screen_y)*m},0==a.screen_x&&0==a.screen_y&&(a=o),0==l.screen_x&&0==l.screen_y&&(l=r),x.push([a.screen_x,a.screen_y]),x.push([l.screen_x,l.screen_y]),x.push([r.screen_x,r.screen_y]);return x},n._linear=function(t){for(var e=[],i=0;i<t.length;i++)e.push([t[i].screen_x,t[i].screen_y]);return e},t.exports=n},function(t,e,i){function n(t,e,i,n){this.body=t,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=i,this.options=s.extend({},this.defaultOptions),this.linegraphOptions=n,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(e)}var o,r=i(8),d=(o=r)&&o.__esModule?o:{default:o},s=i(2),h=i(14),a=i(16);(n.prototype=new a).clear=function(){this.groups={},this.amountOfGroups=0},n.prototype.addGroup=function(t,e){1!=e.options.excludeFromLegend&&(this.groups.hasOwnProperty(t)||(this.groups[t]=e),this.amountOfGroups+=1)},n.prototype.updateGroup=function(t,e){this.groups[t]=e},n.prototype.removeGroup=function(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)},n.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)},n.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},n.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},n.prototype.setOptions=function(t){s.selectiveDeepExtend(["enabled","orientation","icons","left","right"],this.options,t)},n.prototype.redraw=function(){var t=0,e=(0,d.default)(this.groups);e.sort(function(t,e){return t<e?-1:1});for(var i=0;i<e.length;i++){var n=e[i];1!=this.groups[n].visible||void 0!==this.linegraphOptions.visibility[n]&&1!=this.linegraphOptions.visibility[n]||t++}if(0==this.options[this.side].visible||0==this.amountOfGroups||0==this.options.enabled||0==t)this.hide();else{if(this.show(),"top-left"==this.options[this.side].position||"bottom-left"==this.options[this.side].position?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),"top-left"==this.options[this.side].position||"top-right"==this.options[this.side].position)this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var o=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+o+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}0==this.options.icons?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var r="";for(i=0;i<e.length;i++)n=e[i],1!=this.groups[n].visible||void 0!==this.linegraphOptions.visibility[n]&&1!=this.linegraphOptions.visibility[n]||(r+=this.groups[n].content+"<br />");this.dom.textArea.innerHTML=r,this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}},n.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var t=(0,d.default)(this.groups);t.sort(function(t,e){return t<e?-1:1}),h.resetElements(this.svgElements);var e=window.getComputedStyle(this.dom.frame).paddingTop,i=Number(e.replace("px","")),n=i,o=this.options.iconSize,r=.75*this.options.iconSize,s=i+.5*r+3;this.svg.style.width=o+5+i+"px";for(var a=0;a<t.length;a++){var l=t[a];1!=this.groups[l].visible||void 0!==this.linegraphOptions.visibility[l]&&1!=this.linegraphOptions.visibility[l]||(this.groups[l].getLegend(o,r,this.framework,n,s),s+=r+this.options.iconSpacing)}}},t.exports=n},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n="string",o="boolean",r="number",s="object",a={configure:{enabled:{boolean:o},filter:{boolean:o,function:"function"},container:{dom:"dom"},__type__:{object:s,boolean:o,function:"function"}},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:n},sort:{boolean:o},sampling:{boolean:o},stack:{boolean:o},graphHeight:{string:n,number:r},shaded:{enabled:{boolean:o},orientation:{string:["bottom","top","zero","group"]},groupId:{object:s},__type__:{boolean:o,object:s}},style:{string:["line","bar","points"]},barChart:{width:{number:r},minWidth:{number:r},sideBySide:{boolean:o},align:{string:["left","center","right"]},__type__:{object:s}},interpolation:{enabled:{boolean:o},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:r},__type__:{object:s,boolean:o}},drawPoints:{enabled:{boolean:o},onRender:{function:"function"},size:{number:r},style:{string:["square","circle"]},__type__:{object:s,boolean:o,function:"function"}},dataAxis:{showMinorLabels:{boolean:o},showMajorLabels:{boolean:o},icons:{boolean:o},width:{string:n,number:r},visible:{boolean:o},alignZeros:{boolean:o},left:{range:{min:{number:r,undefined:"undefined"},max:{number:r,undefined:"undefined"},__type__:{object:s}},format:{function:"function"},title:{text:{string:n,number:r,undefined:"undefined"},style:{string:n,undefined:"undefined"},__type__:{object:s}},__type__:{object:s}},right:{range:{min:{number:r,undefined:"undefined"},max:{number:r,undefined:"undefined"},__type__:{object:s}},format:{function:"function"},title:{text:{string:n,number:r,undefined:"undefined"},style:{string:n,undefined:"undefined"},__type__:{object:s}},__type__:{object:s}},__type__:{object:s}},legend:{enabled:{boolean:o},icons:{boolean:o},left:{visible:{boolean:o},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:s}},right:{visible:{boolean:o},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:s}},__type__:{object:s,boolean:o}},groups:{visibility:{any:"any"},__type__:{object:s}},autoResize:{boolean:o},throttleRedraw:{number:r},clickToUse:{boolean:o},end:{number:r,date:"date",string:n,moment:"moment"},format:{minorLabels:{millisecond:{string:n,undefined:"undefined"},second:{string:n,undefined:"undefined"},minute:{string:n,undefined:"undefined"},hour:{string:n,undefined:"undefined"},weekday:{string:n,undefined:"undefined"},day:{string:n,undefined:"undefined"},month:{string:n,undefined:"undefined"},year:{string:n,undefined:"undefined"},__type__:{object:s}},majorLabels:{millisecond:{string:n,undefined:"undefined"},second:{string:n,undefined:"undefined"},minute:{string:n,undefined:"undefined"},hour:{string:n,undefined:"undefined"},weekday:{string:n,undefined:"undefined"},day:{string:n,undefined:"undefined"},month:{string:n,undefined:"undefined"},year:{string:n,undefined:"undefined"},__type__:{object:s}},__type__:{object:s}},moment:{function:"function"},height:{string:n,number:r},hiddenDates:{start:{date:"date",number:r,string:n,moment:"moment"},end:{date:"date",number:r,string:n,moment:"moment"},repeat:{string:n},__type__:{object:s,array:"array"}},locale:{string:n},locales:{__any__:{any:"any"},__type__:{object:s}},max:{date:"date",number:r,string:n,moment:"moment"},maxHeight:{number:r,string:n},maxMinorChars:{number:r},min:{date:"date",number:r,string:n,moment:"moment"},minHeight:{number:r,string:n},moveable:{boolean:o},multiselect:{boolean:o},orientation:{string:n},showCurrentTime:{boolean:o},showMajorLabels:{boolean:o},showMinorLabels:{boolean:o},start:{date:"date",number:r,string:n,moment:"moment"},timeAxis:{scale:{string:n,undefined:"undefined"},step:{number:r,undefined:"undefined"},__type__:{object:s}},width:{string:n,number:r},zoomable:{boolean:o},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:r},zoomMin:{number:r},zIndex:{number:r},__type__:{object:s}};e.allOptions=a,e.configureOptions={global:{sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",month:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}}},function(t,e,i){function n(t){return M=t,function(){var t={};if(O=0,L=M.charAt(0),c(),"strict"===I&&(t.strict=!0,c()),"graph"!==I&&"digraph"!==I||(t.type=I,c()),A===D.IDENTIFIER&&(t.id=I,c()),"{"!=I)throw y("Angle bracket { expected");if(c(),f(t),"}"!=I)throw y("Angle bracket } expected");if(c(),""!==I)throw y("End of file expected");return c(),delete t.node,delete t.edge,delete t.graph,t}()}function o(){O++,L=M.charAt(O)}function r(){return M.charAt(O+1)}function s(t){return P.test(t)}function l(t,e){if(t=t||{},e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function a(t,e,i){for(var n=e.split("."),o=t;n.length;){var r=n.shift();n.length?(o[r]||(o[r]={}),o=o[r]):o[r]=i}}function d(t,e){for(var i,n,o=null,r=[t],s=t;s.parent;)r.push(s.parent),s=s.parent;if(s.nodes)for(i=0,n=s.nodes.length;i<n;i++)if(e.id===s.nodes[i].id){o=s.nodes[i];break}for(o||(o={id:e.id},t.node&&(o.attr=l(o.attr,t.node))),i=r.length-1;0<=i;i--){var a=r[i];a.nodes||(a.nodes=[]),-1===a.nodes.indexOf(o)&&a.nodes.push(o)}e.attr&&(o.attr=l(o.attr,e.attr))}function h(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var i=l({},t.edge);e.attr=l(i,e.attr)}}function u(t,e,i,n,o){var r={from:e,to:i,type:n};return t.edge&&(r.attr=l({},t.edge)),r.attr=l(r.attr||{},o),r}function c(){for(A=D.NULL,I="";" "===L||"\t"===L||"\n"===L||"\r"===L;)o();do{var t=!1;if("#"===L){for(var e=O-1;" "===M.charAt(e)||"\t"===M.charAt(e);)e--;if("\n"===M.charAt(e)||""===M.charAt(e)){for(;""!=L&&"\n"!=L;)o();t=!0}}if("/"===L&&"/"===r()){for(;""!=L&&"\n"!=L;)o();t=!0}if("/"===L&&"*"===r()){for(;""!=L;){if("*"===L&&"/"===r()){o(),o();break}o()}t=!0}for(;" "===L||"\t"===L||"\n"===L||"\r"===L;)o()}while(t);if(""!==L){var i=L+r();if(C[i])return A=D.DELIMITER,I=i,o(),void o();if(C[L])return A=D.DELIMITER,I=L,void o();if(s(L)||"-"===L){for(I+=L,o();s(L);)I+=L,o();return"false"===I?I=!1:"true"===I?I=!0:isNaN(Number(I))||(I=Number(I)),void(A=D.IDENTIFIER)}if('"'===L){for(o();""!=L&&('"'!=L||'"'===L&&'"'===r());)'"'===L?(I+=L,o()):"\\"===L&&"n"===r()?(I+="\n",o()):I+=L,o();if('"'!=L)throw y('End of string " expected');return o(),void(A=D.IDENTIFIER)}for(A=D.UNKNOWN;""!=L;)I+=L,o();throw new SyntaxError('Syntax error in part "'+b(I,30)+'"')}A=D.DELIMITER}function f(t){for(;""!==I&&"}"!=I;)p(t),";"===I&&c()}function p(t){var e=m(t);if(e)v(t,e);else if(!function(t){return"node"===I?(c(),t.node=g(),"node"):"edge"===I?(c(),t.edge=g(),"edge"):"graph"===I?(c(),t.graph=g(),"graph"):null}(t)){if(A!=D.IDENTIFIER)throw y("Identifier expected");var i=I;if(c(),"="===I){if(c(),A!=D.IDENTIFIER)throw y("Identifier expected");t[i]=I,c()}else!function(t,e){var i={id:e},n=g();n&&(i.attr=n),d(t,i),v(t,e)}(t,i)}}function m(t){var e=null;if("subgraph"===I&&((e={}).type="subgraph",c(),A===D.IDENTIFIER&&(e.id=I,c())),"{"===I){if(c(),(e=e||{}).parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,f(e),"}"!=I)throw y("Angle bracket } expected");c(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function v(t,e){for(;"->"===I||"--"===I;){var i,n=I;c();var o=m(t);if(o)i=o;else{if(A!=D.IDENTIFIER)throw y("Identifier or subgraph expected");d(t,{id:i=I}),c()}h(t,u(t,e,i,n,g())),e=i}}function g(){for(var t=null,e={dashed:!0,solid:!1,dotted:[1,5]};"["===I;){for(c(),t={};""!==I&&"]"!=I;){if(A!=D.IDENTIFIER)throw y("Attribute name expected");var i=I;if(c(),"="!=I)throw y("Equal sign = expected");if(c(),A!=D.IDENTIFIER)throw y("Attribute value expected");var n=I;"style"===i&&(n=e[n]),a(t,i,n),c(),","==I&&c()}if("]"!=I)throw y("Bracket ] expected");c()}return t}function y(t){return new SyntaxError(t+', got "'+b(I,30)+'" (char '+O+")")}function b(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function w(t,e,i){for(var n=e.split("."),o=n.pop(),r=t,s=0;s<n.length;s++){var a=n[s];a in r||(r[a]={}),r=r[a]}return r[o]=i,t}function _(e,t){var i={};for(var n in e)if(e.hasOwnProperty(n)){var o=t[n];Array.isArray(o)?o.forEach(function(t){w(i,t,e[n])}):w(i,"string"==typeof o?o:n,e[n])}return i}var x,k=i(29),S=(x=k)&&x.__esModule?x:{default:x},E={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},T=(0,S.default)(E);T.color="color.color",T.style="dashes";var D={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},C={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},M="",O=0,L="",I="",A=D.NULL,P=/[a-zA-Z_0-9.:#]/;e.parseDOT=n,e.DOTToGraph=function(t){var e=n(t),r={nodes:[],edges:[],options:{}};if(e.nodes&&e.nodes.forEach(function(t){var e={id:t.id,label:String(t.label||t.id)};l(e,_(t.attr,E)),e.image&&(e.shape="image"),r.nodes.push(e)}),e.edges){var s=function(t){var e={from:t.from,to:t.to};return l(e,_(t.attr,T)),e.arrows="->"===t.type?"to":void 0,e};e.edges.forEach(function(o){var t,e;t=o.from instanceof Object?o.from.nodes:{id:o.from},e=o.to instanceof Object?o.to.nodes:{id:o.to},o.from instanceof Object&&o.from.edges&&o.from.edges.forEach(function(t){var e=s(t);r.edges.push(e)}),function(e,t,i){Array.isArray(e)?e.forEach(function(e){Array.isArray(t)?t.forEach(function(t){i(e,t)}):i(e,t)}):Array.isArray(t)?t.forEach(function(t){i(e,t)}):i(e,t)}(t,e,function(t,e){var i=u(r,t.id,e.id,o.type,o.attr),n=s(i);r.edges.push(n)}),o.to instanceof Object&&o.to.edges&&o.to.edges.forEach(function(t){var e=s(t);r.edges.push(e)})})}return e.attr&&(r.options=e.attr),r}},function(t,e,i){e.parseGephi=function(t,e){var i=[],n=[],o={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};void 0!==e&&(void 0!==e.fixed&&(o.nodes.fixed=e.fixed),void 0!==e.parseColor&&(o.nodes.parseColor=e.parseColor),void 0!==e.inheritColor&&(o.edges.inheritColor=e.inheritColor));for(var r=t.edges,s=t.nodes,a=0;a<r.length;a++){var l={},d=r[a];l.id=d.id,l.from=d.source,l.to=d.target,l.attributes=d.attributes,l.label=d.label,l.title=void 0!==d.attributes?d.attributes.title:void 0,"Directed"===d.type&&(l.arrows="to"),d.color&&!1===o.inheritColor&&(l.color=d.color),i.push(l)}for(var h=0;h<s.length;h++){var u={},c=s[h];u.id=c.id,u.attributes=c.attributes,u.x=c.x,u.y=c.y,u.label=c.label,u.title=void 0!==c.attributes?c.attributes.title:c.title,!0===o.nodes.parseColor?u.color=c.color:u.color=void 0!==c.color?{background:c.color,border:c.color,highlight:{background:c.color,border:c.color},hover:{background:c.color,border:c.color}}:void 0,u.size=c.size,u.fixed=o.nodes.fixed&&void 0!==c.x&&void 0!==c.y,n.push(u)}return{nodes:n,edges:i}}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(1)),s=n(i(185)),a=((0,r.default)(l,[{key:"_tryloadBrokenUrl",value:function(t,e,i){if(void 0!==t&&void 0!==i){if(void 0===e)return void console.warn("No broken url image defined");i.onerror=function(){console.error("Could not load brokenImage:",e)},i.image.src=e}}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,e){var i=this,n=this.images[t];if(n)return n;var o=new s.default;return(this.images[t]=o).image.onload=function(){i._fixImageCoordinates(o.image),o.init(),i._redrawWithImage(o)},o.image.onerror=function(){console.error("Could not load image:",t),i._tryloadBrokenUrl(t,e,o)},o.image.src=t,o}},{key:"_fixImageCoordinates",value:function(t){0===t.width&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),l);function l(t){(0,o.default)(this,l),this.images={},this.imageBroken={},this.callback=t}e.default=a},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var y=n(i(30)),l=n(i(6)),o=n(i(0)),r=n(i(1)),d=i(2),s=i(48).default,a=i(191).default,h=["bold","ital","boldital","mono"],u=((0,r.default)(c,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),s.isValidLabel(t.label)?this.labelDirty=!0:t.label="",void 0!==t.font&&null!==t.font)if("string"==typeof t.font)this.baseSize=this.fontOptions.size;else if("object"===(0,l.default)(t.font)){var e=t.font.size;void 0!==e&&(this.baseSize=e)}}},{key:"initFontOptions",value:function(t){var i=this;d.forEach(h,function(t){i.fontOptions[t]={}}),c.parseFontString(this.fontOptions,t)?this.fontOptions.vadjust=0:d.forEach(t,function(t,e){null!=t&&"object"!==(void 0===t?"undefined":(0,l.default)(t))&&(i.fontOptions[e]=t)})}},{key:"constrain",value:function(t){var e={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},i=d.topMost(t,"widthConstraint");if("number"==typeof i)e.maxWdt=Number(i),e.minWdt=Number(i);else if("object"===(void 0===i?"undefined":(0,l.default)(i))){var n=d.topMost(t,["widthConstraint","maximum"]);"number"==typeof n&&(e.maxWdt=Number(n));var o=d.topMost(t,["widthConstraint","minimum"]);"number"==typeof o&&(e.minWdt=Number(o))}var r=d.topMost(t,"heightConstraint");if("number"==typeof r)e.minHgt=Number(r);else if("object"===(void 0===r?"undefined":(0,l.default)(r))){var s=d.topMost(t,["heightConstraint","minimum"]);"number"==typeof s&&(e.minHgt=Number(s));var a=d.topMost(t,["heightConstraint","valign"]);"string"==typeof a&&("top"!==a&&"bottom"!==a||(e.valign=a))}return e}},{key:"update",value:function(t,e){this.setOptions(t,!0),this.propagateFonts(e),d.deepExtend(this.fontOptions,this.constrain(e)),this.fontOptions.chooser=s.choosify("label",e)}},{key:"adjustSizes",value:function(t){var e=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=e,this.fontOptions.minWdt-=e);var i=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=i)}},{key:"addFontOptionsToPile",value:function(t,e){for(var i=0;i<e.length;++i)this.addFontToPile(t,e[i])}},{key:"addFontToPile",value:function(t,e){if(void 0!==e&&void 0!==e.font&&null!==e.font){var i=e.font;t.push(i)}}},{key:"getBasicOptions",value:function(t){for(var i={},e=0;e<t.length;++e){var n=t[e],o={};c.parseFontString(o,n)&&(n=o),d.forEach(n,function(t,e){void 0!==t&&(i.hasOwnProperty(e)||(-1!==h.indexOf(e)?i[e]={}:i[e]=t))})}return i}},{key:"getFontOption",value:function(t,e,i){for(var n=void 0,o=0;o<t.length;++o){var r=t[o];if(r.hasOwnProperty(e)){if(void 0===(n=r[e])||null===n)continue;var s={};if(c.parseFontString(s,n)&&(n=s),n.hasOwnProperty(i))return n[i]}}if(this.fontOptions.hasOwnProperty(i))return this.fontOptions[i];throw new Error("Did not find value for multi-font for property: '"+i+"'")}},{key:"getFontOptions",value:function(t,e){for(var i={},n=["color","size","face","mod","vadjust"],o=0;o<n.length;++o){var r=n[o];i[r]=this.getFontOption(t,e,r)}return i}},{key:"propagateFonts",value:function(t){var n=this,o=[];this.addFontOptionsToPile(o,t),this.fontOptions=this.getBasicOptions(o);for(var r=0;r<h.length;++r)!function(){var t=h[r],i=n.fontOptions[t],e=n.getFontOptions(o,t);d.forEach(e,function(t,e){i[e]=t}),i.size=Number(i.size),i.vadjust=Number(i.vadjust)}()}},{key:"draw",value:function(t,e,i,n,o,r){var s=5<arguments.length&&void 0!==r?r:"middle";if(void 0!==this.elementOptions.label){var a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,n,o,e,i,s),this._drawBackground(t),this._drawText(t,e,this.size.yLine,s,a))}}},{key:"_drawBackground",value:function(t){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){t.fillStyle=this.fontOptions.background;var e=this.getSize();t.fillRect(e.left,e.top,e.width,e.height)}}},{key:"_drawText",value:function(t,e,i,n,o){var r=3<arguments.length&&void 0!==n?n:"middle",s=o,a=this._setAlignment(t,e,i,r),l=(0,y.default)(a,2);e=l[0],i=l[1],t.textAlign="left",e-=this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&("top"===this.fontOptions.valign&&(i-=(this.size.height-this.size.labelHeight)/2),"bottom"===this.fontOptions.valign&&(i+=(this.size.height-this.size.labelHeight)/2));for(var d=0;d<this.lineCount;d++){var h=this.lines[d];if(h&&h.blocks){var u=0;this.isEdgeLabel||"center"===this.fontOptions.align?u+=(this.size.width-h.width)/2:"right"===this.fontOptions.align&&(u+=this.size.width-h.width);for(var c=0;c<h.blocks.length;c++){var f=h.blocks[c];t.font=f.font;var p=this._getColor(f.color,s,f.strokeColor),m=(0,y.default)(p,2),v=m[0],g=m[1];0<f.strokeWidth&&(t.lineWidth=f.strokeWidth,t.strokeStyle=g,t.lineJoin="round"),t.fillStyle=v,0<f.strokeWidth&&t.strokeText(f.text,e+u,i+f.vadjust),t.fillText(f.text,e+u,i+f.vadjust),u+=f.width}i+=h.height}}}},{key:"_setAlignment",value:function(t,e,i,n){return this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&!1===this.pointToSelf?(i=e=0,"top"===this.fontOptions.align?(t.textBaseline="alphabetic",i-=4):"bottom"===this.fontOptions.align?(t.textBaseline="hanging",i+=4):t.textBaseline="middle"):t.textBaseline=n,[e,i]}},{key:"_getColor",value:function(t,e,i){var n=t||"#000000",o=i||"#ffffff";if(e<=this.elementOptions.scaling.label.drawThreshold){var r=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-e)));n=d.overrideOpacity(n,r),o=d.overrideOpacity(o,r)}return[n,o]}},{key:"getTextSize",value:function(t,e,i){var n=1<arguments.length&&void 0!==e&&e,o=2<arguments.length&&void 0!==i&&i;return this._processLabel(t,n,o),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=this.size.left,e=this.size.top-1;if(this.isEdgeLabel){var i=.5*-this.size.width;switch(this.fontOptions.align){case"middle":t=i,e=.5*-this.size.height;break;case"top":t=i,e=-(this.size.height+2);break;case"bottom":t=i,e=2}}return{left:t,top:e,width:this.size.width,height:this.size.height}}},{key:"calculateLabelSize",value:function(t,e,i,n,o,r){var s=3<arguments.length&&void 0!==n?n:0,a=4<arguments.length&&void 0!==o?o:0,l=5<arguments.length&&void 0!==r?r:"middle";this._processLabel(t,e,i),this.size.left=s-.5*this.size.width,this.size.top=a-.5*this.size.height,this.size.yLine=a+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===l&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,e,i,n){function o(t,e,i){return"normal"===e?"mod"===i?"":t[i]:void 0!==t[e][i]?t[e][i]:t[i]}var r={color:o(this.fontOptions,n,"color"),size:o(this.fontOptions,n,"size"),face:o(this.fontOptions,n,"face"),mod:o(this.fontOptions,n,"mod"),vadjust:o(this.fontOptions,n,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(e||i)&&("normal"===n&&!0===this.fontOptions.chooser&&this.elementOptions.labelHighlightBold?r.mod="bold":"function"==typeof this.fontOptions.chooser&&this.fontOptions.chooser(r,this.elementOptions.id,e,i));var s="";return void 0!==r.mod&&""!==r.mod&&(s+=r.mod+" "),s+=r.size+"px "+r.face,t.font=s.replace(/"/g,""),r.font=t.font,r.height=r.size,r}},{key:"differentState",value:function(t,e){return t!==this.selectedState||e!==this.hoverState}},{key:"_processLabelText",value:function(t,e,i,n){return new a(t,this,e,i).process(n)}},{key:"_processLabel",value:function(t,e,i){if(!1!==this.labelDirty||this.differentState(e,i)){var n=this._processLabelText(t,e,i,this.elementOptions.label);0<this.fontOptions.minWdt&&n.width<this.fontOptions.minWdt&&(n.width=this.fontOptions.minWdt),this.size.labelHeight=n.height,0<this.fontOptions.minHgt&&n.height<this.fontOptions.minHgt&&(n.height=this.fontOptions.minHgt),this.lines=n.lines,this.lineCount=n.lines.length,this.size.width=n.width,this.size.height=n.height,this.selectedState=e,this.hoverState=i,this.labelDirty=!1}}},{key:"visible",value:function(){return 0!==this.size.width&&0!==this.size.height&&void 0!==this.elementOptions.label&&!(this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,e){if(!e||"string"!=typeof e)return!1;var i=e.split(" ");return t.size=i[0].replace("px",""),t.face=i[1],t.color=i[2],!0}}]),c);function c(t,e){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];(0,o.default)(this,c),this.body=t,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(e),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=i}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var _=n(i(30)),o=n(i(0)),r=n(i(1)),s=i(2),a=i(119).default,l=((0,r.default)(d,[{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,e,i,n,o){t.strokeStyle=this.getColor(t,e,i,n),t.lineWidth=e.width,!1!==e.dashes?this._drawDashedLine(t,e,o):this._drawLine(t,e,o)}},{key:"_drawLine",value:function(t,e,i,n,o){if(this.from!=this.to)this._line(t,e,i,n,o);else{var r=this._getCircleData(t),s=(0,_.default)(r,3),a=s[0],l=s[1],d=s[2];this._circle(t,e,a,l,d)}}},{key:"_drawDashedLine",value:function(t,e,i){t.lineCap="round";var n=[5,5];if(!0===Array.isArray(e.dashes)&&(n=e.dashes),void 0!==t.setLineDash){if(t.save(),t.setLineDash(n),t.lineDashOffset=0,this.from!=this.to)this._line(t,e,i);else{var o=this._getCircleData(t),r=(0,_.default)(o,3),s=r[0],a=r[1],l=r[2];this._circle(t,e,s,a,l)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)t.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,n);else{var d=this._getCircleData(t),h=(0,_.default)(d,3),u=h[0],c=h[1],f=h[2];this._circle(t,e,u,c,f)}this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}}},{key:"findBorderPosition",value:function(t,e,i){return this.from!=this.to?this._findBorderPosition(t,e,i):this._findBorderPositionCircle(t,e,i)}},{key:"findBorderPositions",value:function(t){var e={},i={};if(this.from!=this.to)e=this._findBorderPosition(this.from,t),i=this._findBorderPosition(this.to,t);else{var n=this._getCircleData(t).slice(0,2),o=(0,_.default)(n,2),r=o[0],s=o[1];e=this._findBorderPositionCircle(this.from,t,{x:r,y:s,low:.25,high:.6,direction:-1}),i=this._findBorderPositionCircle(this.from,t,{x:r,y:s,low:.6,high:.8,direction:1})}return{from:e,to:i}}},{key:"_getCircleData",value:function(t){var e=void 0,i=void 0,n=this.from,o=this.options.selfReferenceSize;return void 0!==t&&void 0===n.shape.width&&n.shape.resize(t),i=n.shape.width>n.shape.height?(e=n.x+.5*n.shape.width,n.y-o):(e=n.x+o,n.y-.5*n.shape.height),[e,i,o]}},{key:"_pointOnCircle",value:function(t,e,i,n){var o=2*n*Math.PI;return{x:t+i*Math.cos(o),y:e-i*Math.sin(o)}}},{key:"_findBorderPositionCircle",value:function(t,e,i){for(var n=i.x,o=i.y,r=i.low,s=i.high,a=i.direction,l=0,d=this.options.selfReferenceSize,h=void 0,u=void 0,c=void 0,f=.5*(r+s);r<=s&&l<10&&(f=.5*(r+s),h=this._pointOnCircle(n,o,d,f),u=Math.atan2(t.y-h.y,t.x-h.x),c=t.distanceToBorder(e,u)-Math.sqrt(Math.pow(h.x-t.x,2)+Math.pow(h.y-t.y,2)),!(Math.abs(c)<.05));)0<c?0<a?r=f:s=f:0<a?s=f:r=f,l++;return h.t=f,h}},{key:"getLineWidth",value:function(t,e){return!0===t?Math.max(this.selectionWidth,.3/this.body.view.scale):!0===e?Math.max(this.hoverWidth,.3/this.body.view.scale):Math.max(this.options.width,.3/this.body.view.scale)}},{key:"getColor",value:function(t,e){if(!1===e.inheritsColor)return s.overrideOpacity(e.color,e.opacity);if("both"!==e.inheritsColor||this.from.id===this.to.id)return"to"===e.inheritsColor?s.overrideOpacity(this.to.options.color.border,e.opacity):s.overrideOpacity(this.from.options.color.border,e.opacity);var i=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),n=void 0,o=void 0;return n=this.from.options.color.highlight.border,o=this.to.options.color.highlight.border,!1===this.from.selected&&!1===this.to.selected?(n=s.overrideOpacity(this.from.options.color.border,e.opacity),o=s.overrideOpacity(this.to.options.color.border,e.opacity)):!0===this.from.selected&&!1===this.to.selected?o=this.to.options.color.border:!1===this.from.selected&&!0===this.to.selected&&(n=this.from.options.color.border),i.addColorStop(0,n),i.addColorStop(1,o),i}},{key:"_circle",value:function(t,e,i,n,o){this.enableShadow(t,e),t.beginPath(),t.arc(i,n,o,0,2*Math.PI,!1),t.stroke(),this.disableShadow(t,e)}},{key:"getDistanceToEdge",value:function(t,e,i,n,o,r,s){var a=0;if(this.from!=this.to)a=this._getDistanceToEdge(t,e,i,n,o,r,s);else{var l=this._getCircleData(void 0),d=(0,_.default)(l,3),h=d[0],u=d[1],c=d[2],f=h-o,p=u-r;a=Math.abs(Math.sqrt(f*f+p*p)-c)}return a}},{key:"_getDistanceToLine",value:function(t,e,i,n,o,r){var s=i-t,a=n-e,l=((o-t)*s+(r-e)*a)/(s*s+a*a);1<l?l=1:l<0&&(l=0);var d=t+l*s-o,h=e+l*a-r;return Math.sqrt(d*d+h*h)}},{key:"getArrowData",value:function(t,e,i,n,o,r){var s=void 0,a=void 0,l=void 0,d=void 0,h=void 0,u=void 0,c=void 0,f=r.width;if(c="from"===e?(l=this.from,d=this.to,h=.1,u=r.fromArrowScale,r.fromArrowType):"to"===e?(l=this.to,d=this.from,h=-.1,u=r.toArrowScale,r.toArrowType):(l=this.to,d=this.from,u=r.middleArrowScale,r.middleArrowType),l!=d)if("middle"!==e)if(!0===this.options.smooth.enabled){a=this.findBorderPosition(l,t,{via:i});var p=this.getPoint(Math.max(0,Math.min(1,a.t+h)),i);s=Math.atan2(a.y-p.y,a.x-p.x)}else s=Math.atan2(l.y-d.y,l.x-d.x),a=this.findBorderPosition(l,t);else s=Math.atan2(l.y-d.y,l.x-d.x),a=this.getPoint(.5,i);else{var m=this._getCircleData(t),v=(0,_.default)(m,3),g=v[0],y=v[1],b=v[2];s="from"===e?-2*(a=this.findBorderPosition(this.from,t,{x:g,y:y,low:.25,high:.6,direction:-1})).t*Math.PI+1.5*Math.PI+.1*Math.PI:"to"===e?-2*(a=this.findBorderPosition(this.from,t,{x:g,y:y,low:.6,high:1,direction:1})).t*Math.PI+1.5*Math.PI-1.1*Math.PI:(a=this._pointOnCircle(g,y,b,.175),3.9269908169872414)}"middle"===e&&u<0&&(f*=-1);var w=15*u+3*f;return{point:a,core:{x:a.x-.9*w*Math.cos(s),y:a.y-.9*w*Math.sin(s)},angle:s,length:w,type:c}}},{key:"drawArrowHead",value:function(t,e,i,n,o){t.strokeStyle=this.getColor(t,e,i,n),t.fillStyle=t.strokeStyle,t.lineWidth=e.width,a.draw(t,o),this.enableShadow(t,e),t.fill(),this.disableShadow(t,e)}},{key:"enableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}}]),d);function d(t,e,i){(0,o.default)(this,d),this.body=e,this.labelModule=i,this.options={},this.setOptions(t),this.colorDirty=!0,this.color={},this.selectionWidth=2,this.hoverWidth=1.5,this.fromPoint=this.from,this.toPoint=this.to}e.default=l},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(4)),a=n(i(5)),l=n(i(0)),d=n(i(1)),h=((0,d.default)(b,null,[{key:"transform",value:function(t,e){t instanceof Array||(t=[t]);for(var i=e.point.x,n=e.point.y,o=e.angle,r=e.length,s=0;s<t.length;++s){var a=t[s],l=a.x*Math.cos(o)-a.y*Math.sin(o),d=a.x*Math.sin(o)+a.y*Math.cos(o);a.x=i+r*l,a.y=n+r*d}}},{key:"drawPath",value:function(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;++i)t.lineTo(e[i].x,e[i].y);t.closePath()}}]),b),u=(o=h,(0,a.default)(y,o),(0,d.default)(y,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];h.transform(i,e),h.drawPath(t,i)}}]),y),c=((0,d.default)(g,null,[{key:"draw",value:function(t,e){var i={x:-.4,y:0};h.transform(i,e),t.circle(i.x,i.y,.4*e.length)}}]),g),f=((0,d.default)(v,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];h.transform(i,e),h.drawPath(t,i)}}]),v),p=((0,d.default)(m,null,[{key:"draw",value:function(t,e){var i;switch(e.type&&(i=e.type.toLowerCase()),i){case"circle":c.draw(t,e);break;case"bar":f.draw(t,e);break;case"arrow":default:u.draw(t,e)}}}]),m);function m(){(0,l.default)(this,m)}function v(){(0,l.default)(this,v)}function g(){(0,l.default)(this,g)}function y(){return(0,l.default)(this,y),(0,s.default)(this,(y.__proto__||(0,r.default)(y)).apply(this,arguments))}function b(){(0,l.default)(this,b)}e.default=p},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=((0,n(i(1)).default)(s,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"seededRandom",value:function(){var t=1e4*Math.sin(this.randomSeed++);return t-Math.floor(t)}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&0<this.physicsBody.physicsNodeIndices.length){var t=void 0,e=this.body.nodes,i=this.physicsBody.physicsNodeIndices,n=i.length,o=this._formBarnesHutTree(e,i);this.barnesHutTree=o;for(var r=0;r<n;r++)0<(t=e[i[r]]).options.mass&&this._getForceContributions(o.root,t)}}},{key:"_getForceContributions",value:function(t,e){this._getForceContribution(t.children.NW,e),this._getForceContribution(t.children.NE,e),this._getForceContribution(t.children.SW,e),this._getForceContribution(t.children.SE,e)}},{key:"_getForceContribution",value:function(t,e){var i,n,o;0<t.childrenCount&&(i=t.centerOfMass.x-e.x,n=t.centerOfMass.y-e.y,(o=Math.sqrt(i*i+n*n))*t.calcSize>this.thetaInversed?this._calculateForces(o,i,n,e,t):4===t.childrenCount?this._getForceContributions(t,e):t.children.data.id!=e.id&&this._calculateForces(o,i,n,e,t))}},{key:"_calculateForces",value:function(t,e,i,n,o){0===t&&(e=t=.1),this.overlapAvoidanceFactor<1&&n.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*n.shape.radius,t-n.shape.radius));var r=this.options.gravitationalConstant*o.mass*n.options.mass/Math.pow(t,3),s=e*r,a=i*r;this.physicsBody.forces[n.id].x+=s,this.physicsBody.forces[n.id].y+=a}},{key:"_formBarnesHutTree",value:function(t,e){for(var i=void 0,n=e.length,o=t[e[0]].x,r=t[e[0]].y,s=t[e[0]].x,a=t[e[0]].y,l=1;l<n;l++){var d=t[e[l]],h=d.x,u=d.y;0<d.options.mass&&(h<o&&(o=h),s<h&&(s=h),u<r&&(r=u),a<u&&(a=u))}var c=Math.abs(s-o)-Math.abs(a-r);0<c?(r-=.5*c,a+=.5*c):(o+=.5*c,s-=.5*c);var f=Math.max(1e-5,Math.abs(s-o)),p=.5*f,m=.5*(o+s),v=.5*(r+a),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:m-p,maxX:m+p,minY:v-p,maxY:v+p},size:f,calcSize:1/f,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(var y=0;y<n;y++)0<(i=t[e[y]]).options.mass&&this._placeInTree(g.root,i);return g}},{key:"_updateBranchMass",value:function(t,e){var i=t.centerOfMass,n=t.mass+e.options.mass,o=1/n;i.x=i.x*t.mass+e.x*e.options.mass,i.x*=o,i.y=i.y*t.mass+e.y*e.options.mass,i.y*=o,t.mass=n;var r=Math.max(Math.max(e.height,e.radius),e.width);t.maxWidth=t.maxWidth<r?r:t.maxWidth}},{key:"_placeInTree",value:function(t,e,i){1==i&&void 0!==i||this._updateBranchMass(t,e);var n,o=t.children.NW.range;n=o.maxX>e.x?o.maxY>e.y?"NW":"SW":o.maxY>e.y?"NE":"SE",this._placeInRegion(t,e,n)}},{key:"_placeInRegion",value:function(t,e,i){var n=t.children[i];switch(n.childrenCount){case 0:n.children.data=e,n.childrenCount=1,this._updateBranchMass(n,e);break;case 1:n.children.data.x===e.x&&n.children.data.y===e.y?(e.x+=this.seededRandom(),e.y+=this.seededRandom()):(this._splitBranch(n),this._placeInTree(n,e));break;case 4:this._placeInTree(n,e)}}},{key:"_splitBranch",value:function(t){var e=null;1===t.childrenCount&&(e=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),null!=e&&this._placeInTree(t,e)}},{key:"_insertRegion",value:function(t,e){var i=void 0,n=void 0,o=void 0,r=void 0,s=.5*t.size;switch(e){case"NW":i=t.range.minX,n=t.range.minX+s,o=t.range.minY,r=t.range.minY+s;break;case"NE":i=t.range.minX+s,n=t.range.maxX,o=t.range.minY,r=t.range.minY+s;break;case"SW":i=t.range.minX,n=t.range.minX+s,o=t.range.minY+s,r=t.range.maxY;break;case"SE":i=t.range.minX+s,n=t.range.maxX,o=t.range.minY+s,r=t.range.maxY}t.children[e]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:n,minY:o,maxY:r},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,e){void 0!==this.barnesHutTree&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,e))}},{key:"_drawBranch",value:function(t,e,i){void 0===i&&(i="#FF0000"),4===t.childrenCount&&(this._drawBranch(t.children.NW,e),this._drawBranch(t.children.NE,e),this._drawBranch(t.children.SE,e),this._drawBranch(t.children.SW,e)),e.strokeStyle=i,e.beginPath(),e.moveTo(t.range.minX,t.range.minY),e.lineTo(t.range.maxX,t.range.minY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.minY),e.lineTo(t.range.maxX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.maxY),e.lineTo(t.range.minX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.minX,t.range.maxY),e.lineTo(t.range.minX,t.range.minY),e.stroke()}}]),s);function s(t,e,i){(0,o.default)(this,s),this.body=t,this.physicsBody=e,this.barnesHutTree,this.setOptions(i),this.randomSeed=5}e.default=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=((0,n(i(1)).default)(s,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t=void 0,e=void 0,i=void 0,n=void 0,o=this.body.nodes,r=this.physicsBody.physicsNodeIndices,s=this.physicsBody.forces,a=0;a<r.length;a++)t=-(n=o[r[a]]).x,e=-n.y,i=Math.sqrt(t*t+e*e),this._calculateForces(i,t,e,s,n)}},{key:"_calculateForces",value:function(t,e,i,n,o){var r=0===t?0:this.options.centralGravity/t;n[o.id].x=e*r,n[o.id].y=i*r}}]),s);function s(t,e,i){(0,o.default)(this,s),this.body=t,this.physicsBody=e,this.setOptions(i)}e.default=r},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n="string",o="boolean",r="number",s="object",a=["arrow","circle","bar"],l={configure:{enabled:{boolean:o},filter:{boolean:o,string:n,array:"array",function:"function"},container:{dom:"dom"},showButton:{boolean:o},__type__:{object:s,boolean:o,string:n,array:"array",function:"function"}},edges:{arrows:{to:{enabled:{boolean:o},scaleFactor:{number:r},type:{string:a},__type__:{object:s,boolean:o}},middle:{enabled:{boolean:o},scaleFactor:{number:r},type:{string:a},__type__:{object:s,boolean:o}},from:{enabled:{boolean:o},scaleFactor:{number:r},type:{string:a},__type__:{object:s,boolean:o}},__type__:{string:["from","to","middle"],object:s}},arrowStrikethrough:{boolean:o},chosen:{label:{boolean:o,function:"function"},edge:{boolean:o,function:"function"},__type__:{object:s,boolean:o}},color:{color:{string:n},highlight:{string:n},hover:{string:n},inherit:{string:["from","to","both"],boolean:o},opacity:{number:r},__type__:{object:s,string:n}},dashes:{boolean:o,array:"array"},font:{color:{string:n},size:{number:r},face:{string:n},background:{string:n},strokeWidth:{number:r},strokeColor:{string:n},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:r},multi:{boolean:o,string:n},bold:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:s,string:n}},boldital:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:s,string:n}},ital:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:s,string:n}},mono:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:s,string:n}},__type__:{object:s,string:n}},hidden:{boolean:o},hoverWidth:{function:"function",number:r},label:{string:n,undefined:"undefined"},labelHighlightBold:{boolean:o},length:{number:r,undefined:"undefined"},physics:{boolean:o},scaling:{min:{number:r},max:{number:r},label:{enabled:{boolean:o},min:{number:r},max:{number:r},maxVisible:{number:r},drawThreshold:{number:r},__type__:{object:s,boolean:o}},customScalingFunction:{function:"function"},__type__:{object:s}},selectionWidth:{function:"function",number:r},selfReferenceSize:{number:r},shadow:{enabled:{boolean:o},color:{string:n},size:{number:r},x:{number:r},y:{number:r},__type__:{object:s,boolean:o}},smooth:{enabled:{boolean:o},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:r},forceDirection:{string:["horizontal","vertical","none"],boolean:o},__type__:{object:s,boolean:o}},title:{string:n,undefined:"undefined"},width:{number:r},widthConstraint:{maximum:{number:r},__type__:{object:s,boolean:o,number:r}},value:{number:r,undefined:"undefined"},__type__:{object:s}},groups:{useDefaultGroups:{boolean:o},__any__:"get from nodes, will be overwritten below",__type__:{object:s}},interaction:{dragNodes:{boolean:o},dragView:{boolean:o},hideEdgesOnDrag:{boolean:o},hideNodesOnDrag:{boolean:o},hover:{boolean:o},keyboard:{enabled:{boolean:o},speed:{x:{number:r},y:{number:r},zoom:{number:r},__type__:{object:s}},bindToWindow:{boolean:o},__type__:{object:s,boolean:o}},multiselect:{boolean:o},navigationButtons:{boolean:o},selectable:{boolean:o},selectConnectedEdges:{boolean:o},hoverConnectedEdges:{boolean:o},tooltipDelay:{number:r},zoomView:{boolean:o},__type__:{object:s}},layout:{randomSeed:{undefined:"undefined",number:r},improvedLayout:{boolean:o},hierarchical:{enabled:{boolean:o},levelSeparation:{number:r},nodeSpacing:{number:r},treeSpacing:{number:r},blockShifting:{boolean:o},edgeMinimization:{boolean:o},parentCentralization:{boolean:o},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},__type__:{object:s,boolean:o}},__type__:{object:s}},manipulation:{enabled:{boolean:o},initiallyActive:{boolean:o},addNode:{boolean:o,function:"function"},addEdge:{boolean:o,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:s,boolean:o,function:"function"}},deleteNode:{boolean:o,function:"function"},deleteEdge:{boolean:o,function:"function"},controlNodeStyle:"get from nodes, will be overwritten below",__type__:{object:s,boolean:o}},nodes:{borderWidth:{number:r},borderWidthSelected:{number:r,undefined:"undefined"},brokenImage:{string:n,undefined:"undefined"},chosen:{label:{boolean:o,function:"function"},node:{boolean:o,function:"function"},__type__:{object:s,boolean:o}},color:{border:{string:n},background:{string:n},highlight:{border:{string:n},background:{string:n},__type__:{object:s,string:n}},hover:{border:{string:n},background:{string:n},__type__:{object:s,string:n}},__type__:{object:s,string:n}},fixed:{x:{boolean:o},y:{boolean:o},__type__:{object:s,boolean:o}},font:{align:{string:n},color:{string:n},size:{number:r},face:{string:n},background:{string:n},strokeWidth:{number:r},strokeColor:{string:n},vadjust:{number:r},multi:{boolean:o,string:n},bold:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:s,string:n}},boldital:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:s,string:n}},ital:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:s,string:n}},mono:{color:{string:n},size:{number:r},face:{string:n},mod:{string:n},vadjust:{number:r},__type__:{object:s,string:n}},__type__:{object:s,string:n}},group:{string:n,number:r,undefined:"undefined"},heightConstraint:{minimum:{number:r},valign:{string:n},__type__:{object:s,boolean:o,number:r}},hidden:{boolean:o},icon:{face:{string:n},code:{string:n},size:{number:r},color:{string:n},__type__:{object:s}},id:{string:n,number:r},image:{selected:{string:n,undefined:"undefined"},unselected:{string:n,undefined:"undefined"},__type__:{object:s,string:n}},label:{string:n,undefined:"undefined"},labelHighlightBold:{boolean:o},level:{number:r,undefined:"undefined"},margin:{top:{number:r},right:{number:r},bottom:{number:r},left:{number:r},__type__:{object:s,number:r}},mass:{number:r},physics:{boolean:o},scaling:{min:{number:r},max:{number:r},label:{enabled:{boolean:o},min:{number:r},max:{number:r},maxVisible:{number:r},drawThreshold:{number:r},__type__:{object:s,boolean:o}},customScalingFunction:{function:"function"},__type__:{object:s}},shadow:{enabled:{boolean:o},color:{string:n},size:{number:r},x:{number:r},y:{number:r},__type__:{object:s,boolean:o}},shape:{string:["ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},shapeProperties:{borderDashes:{boolean:o,array:"array"},borderRadius:{number:r},interpolation:{boolean:o},useImageSize:{boolean:o},useBorderWithImage:{boolean:o},__type__:{object:s}},size:{number:r},title:{string:n,dom:"dom",undefined:"undefined"},value:{number:r,undefined:"undefined"},widthConstraint:{minimum:{number:r},maximum:{number:r},__type__:{object:s,boolean:o,number:r}},x:{number:r},y:{number:r},__type__:{object:s}},physics:{enabled:{boolean:o},barnesHut:{gravitationalConstant:{number:r},centralGravity:{number:r},springLength:{number:r},springConstant:{number:r},damping:{number:r},avoidOverlap:{number:r},__type__:{object:s}},forceAtlas2Based:{gravitationalConstant:{number:r},centralGravity:{number:r},springLength:{number:r},springConstant:{number:r},damping:{number:r},avoidOverlap:{number:r},__type__:{object:s}},repulsion:{centralGravity:{number:r},springLength:{number:r},springConstant:{number:r},nodeDistance:{number:r},damping:{number:r},__type__:{object:s}},hierarchicalRepulsion:{centralGravity:{number:r},springLength:{number:r},springConstant:{number:r},nodeDistance:{number:r},damping:{number:r},__type__:{object:s}},maxVelocity:{number:r},minVelocity:{number:r},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:o},iterations:{number:r},updateInterval:{number:r},onlyDynamicEdges:{boolean:o},fit:{boolean:o},__type__:{object:s,boolean:o}},timestep:{number:r},adaptiveTimestep:{boolean:o},__type__:{object:s,boolean:o}},autoResize:{boolean:o},clickToUse:{boolean:o},locale:{string:n},locales:{__any__:{any:"any"},__type__:{object:s}},height:{string:n},width:{string:n},__type__:{object:s}};l.groups.__any__=l.nodes,l.manipulation.controlNodeStyle=l.nodes;e.allOptions=l,e.configureOptions={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01]}}},function(t,e,i){var n=i(2);n.extend(e,i(159)),n.extend(e,i(177)),n.extend(e,i(181))},function(t,e,i){i(49),i(60),t.exports=i(136)},function(t,e,i){var n=i(126),o=i(127),r=i(31),s=i(25);t.exports=i(79)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),r.Arguments=r.Array,n("keys"),n("values"),n("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n=i(54),o=i(39),r=i(59),s={};i(26)(s,i(13)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(s,{next:o(1,i)}),r(t,e+" Iterator")}},function(t,e,i){var s=i(20),a=i(27),l=i(33);t.exports=i(21)?Object.defineProperties:function(t,e){a(t);for(var i,n=l(e),o=n.length,r=0;r<o;)s.f(t,i=n[r++],e[i]);return t}},function(t,e,i){var l=i(25),d=i(132),h=i(133);t.exports=function(a){return function(t,e,i){var n,o=l(t),r=d(o.length),s=h(i,r);if(a&&e!=e){for(;s<r;)if((n=o[s++])!=n)return!0}else for(;s<r;s++)if((a||s in o)&&o[s]===e)return a||s||0;return!a&&-1}}},function(t,e,i){var n=i(55),o=Math.min;t.exports=function(t){return 0<t?o(n(t),9007199254740991):0}},function(t,e,i){var n=i(55),o=Math.max,r=Math.min;t.exports=function(t,e){return(t=n(t))<0?o(t+e,0):r(t,e)}},function(t,e,i){var n=i(18).document;t.exports=n&&n.documentElement},function(t,e,i){var l=i(55),d=i(51);t.exports=function(a){return function(t,e){var i,n,o=String(d(t)),r=l(e),s=o.length;return r<0||s<=r?a?"":void 0:(i=o.charCodeAt(r))<55296||56319<i||r+1===s||(n=o.charCodeAt(r+1))<56320||57343<n?a?o.charAt(r):i:a?o.slice(r,r+2):n-56320+(i-55296<<10)+65536}}},function(t,e,i){var n=i(27),o=i(137);t.exports=i(7).getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},function(t,e,i){var n=i(86),o=i(13)("iterator"),r=i(31);t.exports=i(7).getIteratorMethod=function(t){if(null!=t)return t[o]||t["@@iterator"]||r[n(t)]}},function(t,e,i){i(139);var n=i(7).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,i){var n=i(17);n(n.S,"Object",{create:i(54)})},function(t,e,i){i(141),t.exports=i(7).Object.keys},function(t,e,i){var n=i(41),o=i(33);i(87)("keys",function(){return function(t){return o(n(t))}})},function(t,e,i){t.exports={default:i(143),__esModule:!0}},function(t,e,i){i(60),i(49),t.exports=i(61).f("iterator")},function(t,e,i){t.exports={default:i(145),__esModule:!0}},function(t,e,i){i(146),i(151),i(152),i(153),t.exports=i(7).Symbol},function(t,e,i){function n(t){var e=U[t]=M(B.prototype);return e._k=t,e}function s(t,e,i){return t===V&&s(W,e,i),E(t),e=D(e,!0),E(i),u(U,e)?(i.enumerable?(u(t,z)&&t[z][e]&&(t[z][e]=!1),i=M(i,{enumerable:C(0,!1)})):(u(t,z)||N(t,z,C(1,{})),t[z][e]=!0),Z(t,e,i)):N(t,e,i)}function o(t,e){E(t);for(var i,n=k(e=T(e)),o=0,r=n.length;o<r;)s(t,i=n[o++],e[i]);return t}function r(t){var e=q.call(this,t=D(t,!0));return!(this===V&&u(U,t)&&!u(W,t))&&(!(e||!u(this,t)||!u(U,t)||u(this,z)&&this[z][t])||e)}function a(t,e){if(t=T(t),e=D(e,!0),t!==V||!u(U,e)||u(W,e)){var i=P(t,e);return!i||!u(U,e)||u(t,z)&&t[z][e]||(i.enumerable=!0),i}}function l(t){for(var e,i=j(T(t)),n=[],o=0;i.length>o;)u(U,e=i[o++])||e==z||e==m||n.push(e);return n}function d(t){for(var e,i=t===V,n=j(i?W:T(t)),o=[],r=0;n.length>r;)!u(U,e=n[r++])||i&&!u(V,e)||o.push(U[e]);return o}var h=i(18),u=i(22),c=i(21),f=i(17),p=i(83),m=i(147).KEY,v=i(28),g=i(57),y=i(59),b=i(40),w=i(13),_=i(61),x=i(62),k=i(148),S=i(149),E=i(27),T=i(25),D=i(53),C=i(39),M=i(54),O=i(150),L=i(89),I=i(20),A=i(33),P=L.f,N=I.f,j=O.f,B=h.Symbol,R=h.JSON,F=R&&R.stringify,z=w("_hidden"),H=w("toPrimitive"),q={}.propertyIsEnumerable,Y=g("symbol-registry"),U=g("symbols"),W=g("op-symbols"),V=Object.prototype,G="function"==typeof B,X=h.QObject,J=!X||!X.prototype||!X.prototype.findChild,Z=c&&v(function(){return 7!=M(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=P(V,e);n&&delete V[e],N(t,e,i),n&&t!==V&&N(V,e,n)}:N,K=G&&"symbol"==Mr()(B.iterator)?function(t){return"symbol"==Mr()(t)}:function(t){return t instanceof B};G||(p((B=function(t){if(this instanceof B)throw TypeError("Symbol is not a constructor!");var i=b(0<arguments.length?t:void 0);return c&&J&&Z(V,i,{configurable:!0,set:function t(e){this===V&&t.call(W,e),u(this,z)&&u(this[z],i)&&(this[z][i]=!1),Z(this,i,C(1,e))}}),n(i)}).prototype,"toString",function(){return this._k}),L.f=a,I.f=s,i(88).f=O.f=l,i(42).f=r,i(63).f=d,c&&!i(52)&&p(V,"propertyIsEnumerable",r,!0),_.f=function(t){return n(w(t))}),f(f.G+f.W+f.F*!G,{Symbol:B});for(var Q="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),$=0;Q.length>$;)w(Q[$++]);for(var tt=A(w.store),et=0;tt.length>et;)x(tt[et++]);f(f.S+f.F*!G,"Symbol",{for:function(t){return u(Y,t+="")?Y[t]:Y[t]=B(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in Y)if(Y[e]===t)return e},useSetter:function(){J=!0},useSimple:function(){J=!1}}),f(f.S+f.F*!G,"Object",{create:function(t,e){return void 0===e?M(t):o(M(t),e)},defineProperty:s,defineProperties:o,getOwnPropertyDescriptor:a,getOwnPropertyNames:l,getOwnPropertySymbols:d}),R&&f(f.S+f.F*(!G||v(function(){var t=B();return"[null]"!=F([t])||"{}"!=F({a:t})||"{}"!=F(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!K(t)){for(var e,i,n=[t],o=1;o<arguments.length;)n.push(arguments[o++]);return"function"==typeof(e=n[1])&&(i=e),!i&&S(e)||(e=function(t,e){if(i&&(e=i.call(this,t,e)),!K(e))return e}),n[1]=e,F.apply(R,n)}}}),B.prototype[H]||i(26)(B.prototype,H,B.prototype.valueOf),y(B,"Symbol"),y(Math,"Math",!0),y(h.JSON,"JSON",!0)},function(t,e,i){function n(t){a(t,o,{value:{i:"O"+ ++l,w:{}}})}var o=i(40)("meta"),r=i(32),s=i(22),a=i(20).f,l=0,d=Object.isExtensible||function(){return!0},h=!i(28)(function(){return d(Object.preventExtensions({}))}),u=t.exports={KEY:o,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==Mr()(t)?t:("string"==typeof t?"S":"P")+t;if(!s(t,o)){if(!d(t))return"F";if(!e)return"E";n(t)}return t[o].i},getWeak:function(t,e){if(!s(t,o)){if(!d(t))return!0;if(!e)return!1;n(t)}return t[o].w},onFreeze:function(t){return h&&u.NEED&&d(t)&&!s(t,o)&&n(t),t}}},function(t,e,i){var a=i(33),l=i(63),d=i(42);t.exports=function(t){var e=a(t),i=l.f;if(i)for(var n,o=i(t),r=d.f,s=0;o.length>s;)r.call(t,n=o[s++])&&e.push(n);return e}},function(t,e,i){var n=i(50);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(25),o=i(88).f,r={}.toString,s="object"==("undefined"==typeof window?"undefined":Mr()(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==r.call(t)?function(t){try{return o(t)}catch(t){return s.slice()}}(t):o(n(t))}},function(t,e){},function(t,e,i){i(62)("asyncIterator")},function(t,e,i){i(62)("observable")},function(t,e,i){(function(Cr){Cr.exports=function(){function d(){return Tn.apply(null,arguments)}function s(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function a(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function l(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t){if(t.hasOwnProperty(e))return!1}return!0}function r(t){return void 0===t}function h(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function o(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function i(t,e){var i,n=[];for(i=0;i<t.length;++i){n.push(e(t[i],i))}return n}function u(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function c(t,e){for(var i in e){u(e,i)&&(t[i]=e[i])}return u(e,"toString")&&(t.toString=e.toString),u(e,"valueOf")&&(t.valueOf=e.valueOf),t}function f(t,e,i,n){return ke(t,e,i,n,!0).utc()}function e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function p(t){return null==t._pf&&(t._pf=e()),t._pf}function m(t){if(null==t._isValid){var e=p(t),i=Dn.call(e.parsedDateParts,function(t){return null!=t}),n=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function n(t){var e=f(NaN);return null!=t?c(p(e),t):p(e).userInvalidated=!0,e}function v(t,e){var i,n,o;if(r(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),r(e._i)||(t._i=e._i),r(e._f)||(t._f=e._f),r(e._l)||(t._l=e._l),r(e._strict)||(t._strict=e._strict),r(e._tzm)||(t._tzm=e._tzm),r(e._isUTC)||(t._isUTC=e._isUTC),r(e._offset)||(t._offset=e._offset),r(e._pf)||(t._pf=p(e)),r(e._locale)||(t._locale=e._locale),Cn.length>0)for(i=0;i<Cn.length;i++){n=Cn[i],o=e[n],r(o)||(t[n]=o)}return t}function g(t){v(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Mn&&(Mn=!0,d.updateOffset(this),Mn=!1)}function y(t){return t instanceof g||null!=t&&null!=t._isAMomentObject}function b(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function w(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=b(e)),i}function _(t,e,i){var n,o=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),s=0;for(n=0;n<o;n++){(i&&t[n]!==e[n]||!i&&w(t[n])!==w(e[n]))&&s++}return s+r}function x(t){!1===d.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function t(o,r){var s=!0;return c(function(){if(null!=d.deprecationHandler&&d.deprecationHandler(null,o),s){for(var t,e=[],i=0;i<arguments.length;i++){if(t="","object"==Mr()(arguments[i])){t+="\n["+i+"] ";for(var n in arguments[0]){t+=n+": "+arguments[0][n]+", "}t=t.slice(0,-2)}else t=arguments[i];e.push(t)}x(o+"\nArguments: "+Array.prototype.slice.call(e).join("")+"\n"+(new Error).stack),s=!1}return r.apply(this,arguments)},r)}function k(t,e){null!=d.deprecationHandler&&d.deprecationHandler(t,e),On[t]||(x(e),On[t]=!0)}function S(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function E(t){var e,i;for(i in t){e=t[i],S(e)?this[i]=e:this["_"+i]=e}this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function T(t,e){var i,n=c({},t);for(i in e){u(e,i)&&(a(t[i])&&a(e[i])?(n[i]={},c(n[i],t[i]),c(n[i],e[i])):null!=e[i]?n[i]=e[i]:delete n[i])}for(i in t){u(t,i)&&!u(e,i)&&a(t[i])&&(n[i]=c({},n[i]))}return n}function D(t){null!=t&&this.set(t)}function C(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return S(n)?n.call(e,i):n}function M(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function O(){return this._invalidDate}function L(t){return this._ordinal.replace("%d",t)}function I(t,e,i,n){var o=this._relativeTime[i];return S(o)?o(t,e,i,n):o.replace(/%d/i,t)}function A(t,e){var i=this._relativeTime[t>0?"future":"past"];return S(i)?i(e):i.replace(/%s/i,e)}function P(t,e){var i=t.toLowerCase();jn[i]=jn[i+"s"]=jn[e]=t}function N(t){return"string"==typeof t?jn[t]||jn[t.toLowerCase()]:void 0}function j(t){var e,i,n={};for(i in t){u(t,i)&&(e=N(i))&&(n[e]=t[i])}return n}function B(t,e){Bn[t]=e}function R(t){var e=[];for(var i in t){e.push({unit:i,priority:Bn[i]})}return e.sort(function(t,e){return t.priority-e.priority}),e}function F(t,e,i){var n=""+Math.abs(t),o=e-n.length;return(t>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+n}function z(t,e,i,n){var o=n;"string"==typeof n&&(o=function t(){return this[n]()}),t&&(Hn[t]=o),e&&(Hn[e[0]]=function(){return F(o.apply(this,arguments),e[1],e[2])}),i&&(Hn[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),t)})}function H(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function q(n){var t,o,r=n.match(Rn);for(t=0,o=r.length;t<o;t++){Hn[r[t]]?r[t]=Hn[r[t]]:r[t]=H(r[t])}return function(t){var e,i="";for(e=0;e<o;e++){i+=S(r[e])?r[e].call(t,n):r[e]}return i}}function Y(t,e){return t.isValid()?(e=U(e,t.localeData()),zn[e]=zn[e]||q(e),zn[e](t)):t.localeData().invalidDate()}function U(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Fn.lastIndex=0;n>=0&&Fn.test(t);){t=t.replace(Fn,i),Fn.lastIndex=0,n-=1}return t}function W(t,i,n){ro[t]=S(i)?i:function(t,e){return t&&n?n:i}}function V(t,e){return u(ro,t)?ro[t](e._strict,e._locale):new RegExp(G(t))}function G(t){return X(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,o){return e||i||n||o}))}function X(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(t,n){var e,i=n;for("string"==typeof t&&(t=[t]),h(n)&&(i=function t(e,i){i[n]=w(e)}),e=0;e<t.length;e++){so[t[e]]=i}}function Z(t,o){J(t,function(t,e,i,n){i._w=i._w||{},o(t,i._w,i,n)})}function K(t,e,i){null!=e&&u(so,t)&&so[t](e,i._a,i,t)}function Q(t){return $(t)?366:365}function $(t){return t%4==0&&t%100!=0||t%400==0}function tt(){return $(this.year())}function et(e,i){return function(t){return null!=t?(nt(this,e,t),d.updateOffset(this,i),this):it(this,e)}}function it(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function nt(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&$(t.year())?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),at(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function ot(t){return t=N(t),S(this[t])?this[t]():this}function rt(t,e){if("object"==Mr()(t)){t=j(t);for(var i=R(t),n=0;n<i.length;n++){this[i[n].unit](t[i[n].unit])}}else if(t=N(t),S(this[t]))return this[t](e);return this}function st(t,e){return(t%e+e)%e}function at(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=st(e,12);return t+=(e-i)/12,1===i?$(t)?29:28:31-i%7%2}function lt(t,e){return t?s(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||bo).test(e)?"format":"standalone"][t.month()]:s(this._months)?this._months:this._months.standalone}function dt(t,e){return t?s(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[bo.test(e)?"format":"standalone"][t.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ht(t,e,i){var n,o,r,s=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n){r=f([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase()}return i?"MMM"===e?(o=go.call(this._shortMonthsParse,s),-1!==o?o:null):(o=go.call(this._longMonthsParse,s),-1!==o?o:null):"MMM"===e?-1!==(o=go.call(this._shortMonthsParse,s))?o:(o=go.call(this._longMonthsParse,s),-1!==o?o:null):-1!==(o=go.call(this._longMonthsParse,s))?o:(o=go.call(this._shortMonthsParse,s),-1!==o?o:null)}function ut(t,e,i){var n,o,r;if(this._monthsParseExact)return ht.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(o=f([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(r="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function ct(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=w(e);else if(e=t.localeData().monthsParse(e),!h(e))return t;return i=Math.min(t.date(),at(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function ft(t){return null!=t?(ct(this,t),d.updateOffset(this,!0),this):it(this,"Month")}function pt(){return at(this.year(),this.month())}function mt(t){return this._monthsParseExact?(u(this,"_monthsRegex")||gt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(u(this,"_monthsShortRegex")||(this._monthsShortRegex=xo),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function vt(t){return this._monthsParseExact?(u(this,"_monthsRegex")||gt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(u(this,"_monthsRegex")||(this._monthsRegex=ko),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function gt(){function t(t,e){return e.length-t.length}var e,i,n=[],o=[],r=[];for(e=0;e<12;e++){i=f([2e3,e]),n.push(this.monthsShort(i,"")),o.push(this.months(i,"")),r.push(this.months(i,"")),r.push(this.monthsShort(i,""))}for(n.sort(t),o.sort(t),r.sort(t),e=0;e<12;e++){n[e]=X(n[e]),o[e]=X(o[e])}for(e=0;e<24;e++){r[e]=X(r[e])}this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function yt(t,e,i,n,o,r,s){var a=new Date(t,e,i,n,o,r,s);return t<100&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}function bt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function wt(t,e,i){var n=7+e-i;return-(7+bt(t,0,n).getUTCDay()-e)%7+n-1}function _t(t,e,i,n,o){var r,s,a=(7+i-n)%7,l=wt(t,n,o),d=1+7*(e-1)+a+l;return d<=0?(r=t-1,s=Q(r)+d):d>Q(t)?(r=t+1,s=d-Q(t)):(r=t,s=d),{year:r,dayOfYear:s}}function xt(t,e,i){var n,o,r=wt(t.year(),e,i),s=Math.floor((t.dayOfYear()-r-1)/7)+1;return s<1?(o=t.year()-1,n=s+kt(o,e,i)):s>kt(t.year(),e,i)?(n=s-kt(t.year(),e,i),o=t.year()+1):(o=t.year(),n=s),{week:n,year:o}}function kt(t,e,i){var n=wt(t,e,i),o=wt(t+1,e,i);return(Q(t)-n+o)/7}function St(t){return xt(t,this._week.dow,this._week.doy).week}function Et(){return this._week.dow}function Tt(){return this._week.doy}function Dt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Ct(t){var e=xt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function Mt(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Ot(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Lt(t,e){return t?s(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:s(this._weekdays)?this._weekdays:this._weekdays.standalone}function It(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function At(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Pt(t,e,i){var n,o,r,s=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n){r=f([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase()}return i?"dddd"===e?(o=go.call(this._weekdaysParse,s),-1!==o?o:null):"ddd"===e?(o=go.call(this._shortWeekdaysParse,s),-1!==o?o:null):(o=go.call(this._minWeekdaysParse,s),-1!==o?o:null):"dddd"===e?-1!==(o=go.call(this._weekdaysParse,s))?o:-1!==(o=go.call(this._shortWeekdaysParse,s))?o:(o=go.call(this._minWeekdaysParse,s),-1!==o?o:null):"ddd"===e?-1!==(o=go.call(this._shortWeekdaysParse,s))?o:-1!==(o=go.call(this._weekdaysParse,s))?o:(o=go.call(this._minWeekdaysParse,s),-1!==o?o:null):-1!==(o=go.call(this._minWeekdaysParse,s))?o:-1!==(o=go.call(this._weekdaysParse,s))?o:(o=go.call(this._shortWeekdaysParse,s),-1!==o?o:null)}function Nt(t,e,i){var n,o,r;if(this._weekdaysParseExact)return Pt.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(o=f([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(r="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function jt(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Mt(t,this.localeData()),this.add(t-e,"d")):e}function Bt(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Rt(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Ot(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Ft(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||qt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(u(this,"_weekdaysRegex")||(this._weekdaysRegex=Co),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function zt(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||qt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Mo),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Ht(t){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||qt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Oo),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function qt(){function t(t,e){return e.length-t.length}var e,i,n,o,r,s=[],a=[],l=[],d=[];for(e=0;e<7;e++){i=f([2e3,1]).day(e),n=this.weekdaysMin(i,""),o=this.weekdaysShort(i,""),r=this.weekdays(i,""),s.push(n),a.push(o),l.push(r),d.push(n),d.push(o),d.push(r)}for(s.sort(t),a.sort(t),l.sort(t),d.sort(t),e=0;e<7;e++){a[e]=X(a[e]),l[e]=X(l[e]),d[e]=X(d[e])}this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Yt(){return this.hours()%12||12}function Ut(){return this.hours()||24}function Wt(t,e){z(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Vt(t,e){return e._meridiemParse}function Gt(t){return"p"===(t+"").toLowerCase().charAt(0)}function Xt(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function Jt(t){return t?t.toLowerCase().replace("_","-"):t}function Zt(t){for(var e,i,n,o,r=0;r<t.length;){for(o=Jt(t[r]).split("-"),e=o.length,i=Jt(t[r+1]),i=i?i.split("-"):null;e>0;){if(n=Kt(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&_(o,i,!0)>=e-1)break;e--}r++}return null}function Kt(t){var e=null;if(!No[t]&&void 0!==Cr&&Cr&&Cr.exports)try{e=Lo._abbr;!function(){var t=new Error('Cannot find module "./locale"');throw t.code="MODULE_NOT_FOUND",t}(),Qt(e)}catch(t){}return No[t]}function Qt(t,e){var i;return t&&(i=r(e)?ee(t):$t(t,e))&&(Lo=i),Lo._abbr}function $t(t,e){if(null!==e){var i=Po;if(e.abbr=t,null!=No[t])k("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=No[t]._config;else if(null!=e.parentLocale){if(null==No[e.parentLocale])return jo[e.parentLocale]||(jo[e.parentLocale]=[]),jo[e.parentLocale].push({name:t,config:e}),null;i=No[e.parentLocale]._config}return No[t]=new D(T(i,e)),jo[t]&&jo[t].forEach(function(t){$t(t.name,t.config)}),Qt(t),No[t]}return delete No[t],null}function te(t,e){if(null!=e){var i,n=Po;null!=No[t]&&(n=No[t]._config),e=T(n,e),i=new D(e),i.parentLocale=No[t],No[t]=i,Qt(t)}else null!=No[t]&&(null!=No[t].parentLocale?No[t]=No[t].parentLocale:null!=No[t]&&delete No[t]);return No[t]}function ee(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Lo;if(!s(t)){if(e=Kt(t))return e;t=[t]}return Zt(t)}function ie(){return Ln(No)}function ne(t){var e,i=t._a;return i&&-2===p(t).overflow&&(e=i[lo]<0||i[lo]>11?lo:i[ho]<1||i[ho]>at(i[ao],i[lo])?ho:i[uo]<0||i[uo]>24||24===i[uo]&&(0!==i[co]||0!==i[fo]||0!==i[po])?uo:i[co]<0||i[co]>59?co:i[fo]<0||i[fo]>59?fo:i[po]<0||i[po]>999?po:-1,p(t)._overflowDayOfYear&&(e<ao||e>ho)&&(e=ho),p(t)._overflowWeeks&&-1===e&&(e=mo),p(t)._overflowWeekday&&-1===e&&(e=vo),p(t).overflow=e),t}function oe(t,e,i){return null!=t?t:null!=e?e:i}function re(t){var e=new Date(d.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function se(t){var e,i,n,o,r=[];if(!t._d){for(n=re(t),t._w&&null==t._a[ho]&&null==t._a[lo]&&ae(t),null!=t._dayOfYear&&(o=oe(t._a[ao],n[ao]),(t._dayOfYear>Q(o)||0===t._dayOfYear)&&(p(t)._overflowDayOfYear=!0),i=bt(o,0,t._dayOfYear),t._a[lo]=i.getUTCMonth(),t._a[ho]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e){t._a[e]=r[e]=n[e]}for(;e<7;e++){t._a[e]=r[e]=null==t._a[e]?2===e?1:0:t._a[e]}24===t._a[uo]&&0===t._a[co]&&0===t._a[fo]&&0===t._a[po]&&(t._nextDay=!0,t._a[uo]=0),t._d=(t._useUTC?bt:yt).apply(null,r),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[uo]=24),t._w&&void 0!==t._w.d&&t._w.d!==t._d.getDay()&&(p(t).weekdayMismatch=!0)}}function ae(t){var e,i,n,o,r,s,a,l;if(e=t._w,null!=e.GG||null!=e.W||null!=e.E)r=1,s=4,i=oe(e.GG,t._a[ao],xt(Se(),1,4).year),n=oe(e.W,1),((o=oe(e.E,1))<1||o>7)&&(l=!0);else{r=t._locale._week.dow,s=t._locale._week.doy;var d=xt(Se(),r,s);i=oe(e.gg,t._a[ao],d.year),n=oe(e.w,d.week),null!=e.d?((o=e.d)<0||o>6)&&(l=!0):null!=e.e?(o=e.e+r,(e.e<0||e.e>6)&&(l=!0)):o=r}n<1||n>kt(i,r,s)?p(t)._overflowWeeks=!0:null!=l?p(t)._overflowWeekday=!0:(a=_t(i,n,o,r,s),t._a[ao]=a.year,t._dayOfYear=a.dayOfYear)}function le(t){var e,i,n,o,r,s,a=t._i,l=Bo.exec(a)||Ro.exec(a);if(l){for(p(t).iso=!0,e=0,i=zo.length;e<i;e++){if(zo[e][1].exec(l[1])){o=zo[e][0],n=!1!==zo[e][2];break}}if(null==o)return void(t._isValid=!1);if(l[3]){for(e=0,i=Ho.length;e<i;e++){if(Ho[e][1].exec(l[3])){r=(l[2]||" ")+Ho[e][0];break}}if(null==r)return void(t._isValid=!1)}if(!n&&null!=r)return void(t._isValid=!1);if(l[4]){if(!Fo.exec(l[4]))return void(t._isValid=!1);s="Z"}t._f=o+(r||"")+(s||""),ve(t)}else t._isValid=!1}function de(t,e,i,n,o,r){var s=[he(t),_o.indexOf(e),parseInt(i,10),parseInt(n,10),parseInt(o,10)];return r&&s.push(parseInt(r,10)),s}function he(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function ue(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function ce(t,e,i){if(t){if(To.indexOf(t)!==new Date(e[0],e[1],e[2]).getDay())return p(i).weekdayMismatch=!0,i._isValid=!1,!1}return!0}function fe(t,e,i){if(t)return Uo[t];if(e)return 0;var n=parseInt(i,10),o=n%100;return(n-o)/100*60+o}function pe(t){var e=Yo.exec(ue(t._i));if(e){var i=de(e[4],e[3],e[2],e[5],e[6],e[7]);if(!ce(e[1],i,t))return;t._a=i,t._tzm=fe(e[8],e[9],e[10]),t._d=bt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),p(t).rfc2822=!0}else t._isValid=!1}function me(t){var e=qo.exec(t._i);if(null!==e)return void(t._d=new Date(+e[1]));le(t),!1===t._isValid&&(delete t._isValid,pe(t),!1===t._isValid&&(delete t._isValid,d.createFromInputFallback(t)))}function ve(t){if(t._f===d.ISO_8601)return void le(t);if(t._f===d.RFC_2822)return void pe(t);t._a=[],p(t).empty=!0;var e,i,n,o,r,s=""+t._i,a=s.length,l=0;for(n=U(t._f,t._locale).match(Rn)||[],e=0;e<n.length;e++){o=n[e],i=(s.match(V(o,t))||[])[0],i&&(r=s.substr(0,s.indexOf(i)),r.length>0&&p(t).unusedInput.push(r),s=s.slice(s.indexOf(i)+i.length),l+=i.length),Hn[o]?(i?p(t).empty=!1:p(t).unusedTokens.push(o),K(o,i,t)):t._strict&&!i&&p(t).unusedTokens.push(o)}p(t).charsLeftOver=a-l,s.length>0&&p(t).unusedInput.push(s),t._a[uo]<=12&&!0===p(t).bigHour&&t._a[uo]>0&&(p(t).bigHour=void 0),p(t).parsedDateParts=t._a.slice(0),p(t).meridiem=t._meridiem,t._a[uo]=ge(t._locale,t._a[uo],t._meridiem),se(t),ne(t)}function ge(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&e<12&&(e+=12),n||12!==e||(e=0),e):e}function ye(t){var e,i,n,o,r;if(0===t._f.length)return p(t).invalidFormat=!0,void(t._d=new Date(NaN));for(o=0;o<t._f.length;o++){r=0,e=v({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[o],ve(e),m(e)&&(r+=p(e).charsLeftOver,r+=10*p(e).unusedTokens.length,p(e).score=r,(null==n||r<n)&&(n=r,i=e))}c(t,i||e)}function be(t){if(!t._d){var e=j(t._i);t._a=i([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),se(t)}}function we(t){var e=new g(ne(_e(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function _e(t){var e=t._i,i=t._f;return t._locale=t._locale||ee(t._l),null===e||void 0===i&&""===e?n({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),y(e)?new g(ne(e)):(o(e)?t._d=e:s(i)?ye(t):i?ve(t):xe(t),m(t)||(t._d=null),t))}function xe(t){var e=t._i;r(e)?t._d=new Date(d.now()):o(e)?t._d=new Date(e.valueOf()):"string"==typeof e?me(t):s(e)?(t._a=i(e.slice(0),function(t){return parseInt(t,10)}),se(t)):a(e)?be(t):h(e)?t._d=new Date(e):d.createFromInputFallback(t)}function ke(t,e,i,n,o){var r={};return!0!==i&&!1!==i||(n=i,i=void 0),(a(t)&&l(t)||s(t)&&0===t.length)&&(t=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=o,r._l=i,r._i=t,r._f=e,r._strict=n,we(r)}function Se(t,e,i,n){return ke(t,e,i,n,!1)}function Ee(t,e){var i,n;if(1===e.length&&s(e[0])&&(e=e[0]),!e.length)return Se();for(i=e[0],n=1;n<e.length;++n){e[n].isValid()&&!e[n][t](i)||(i=e[n])}return i}function Te(){return Ee("isBefore",[].slice.call(arguments,0))}function De(){return Ee("isAfter",[].slice.call(arguments,0))}function Ce(t){for(var e in t){if(-1===go.call(Xo,e)||null!=t[e]&&isNaN(t[e]))return!1}for(var i=!1,n=0;n<Xo.length;++n){if(t[Xo[n]]){if(i)return!1;parseFloat(t[Xo[n]])!==w(t[Xo[n]])&&(i=!0)}}return!0}function Me(){return this._isValid}function Oe(){return Je(NaN)}function Le(t){var e=j(t),i=e.year||0,n=e.quarter||0,o=e.month||0,r=e.week||0,s=e.day||0,a=e.hour||0,l=e.minute||0,d=e.second||0,h=e.millisecond||0;this._isValid=Ce(e),this._milliseconds=+h+1e3*d+6e4*l+1e3*a*60*60,this._days=+s+7*r,this._months=+o+3*n+12*i,this._data={},this._locale=ee(),this._bubble()}function Ie(t){return t instanceof Le}function Ae(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Pe(t,i){z(t,0,0,function(){var t=this.utcOffset(),e="+";return t<0&&(t=-t,e="-"),e+F(~~(t/60),2)+i+F(~~t%60,2)})}function Ne(t,e){var i=(e||"").match(t);if(null===i)return null;var n=i[i.length-1]||[],o=(n+"").match(Jo)||["-",0,0],r=60*o[1]+w(o[2]);return 0===r?0:"+"===o[0]?r:-r}function je(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(y(t)||o(t)?t.valueOf():Se(t).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),d.updateOffset(i,!1),i):Se(t).local()}function Be(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Re(t,e,i){var n,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Ne(io,t)))return this}else Math.abs(t)<16&&!i&&(t*=60);return!this._isUTC&&e&&(n=Be(this)),this._offset=t,this._isUTC=!0,null!=n&&this.add(n,"m"),o!==t&&(!e||this._changeInProgress?ti(this,Je(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,d.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Be(this)}function Fe(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function ze(t){return this.utcOffset(0,t)}function He(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Be(this),"m")),this}function qe(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Ne(eo,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Ye(t){return!!this.isValid()&&(t=t?Se(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function Ue(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function We(){if(!r(this._isDSTShifted))return this._isDSTShifted;var t={};if(v(t,this),t=_e(t),t._a){var e=t._isUTC?f(t._a):Se(t._a);this._isDSTShifted=this.isValid()&&_(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ve(){return!!this.isValid()&&!this._isUTC}function Ge(){return!!this.isValid()&&this._isUTC}function Xe(){return!!this.isValid()&&this._isUTC&&0===this._offset}function Je(t,e){var i,n,o,r=t,s=null;return Ie(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:h(t)?(r={},e?r[e]=t:r.milliseconds=t):(s=Zo.exec(t))?(i="-"===s[1]?-1:1,r={y:0,d:w(s[ho])*i,h:w(s[uo])*i,m:w(s[co])*i,s:w(s[fo])*i,ms:w(Ae(1e3*s[po]))*i}):(s=Ko.exec(t))?(i="-"===s[1]?-1:(s[1],1),r={y:Ze(s[2],i),M:Ze(s[3],i),w:Ze(s[4],i),d:Ze(s[5],i),h:Ze(s[6],i),m:Ze(s[7],i),s:Ze(s[8],i)}):null==r?r={}:"object"==Mr()(r)&&("from"in r||"to"in r)&&(o=Qe(Se(r.from),Se(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),n=new Le(r),Ie(t)&&u(t,"_locale")&&(n._locale=t._locale),n}function Ze(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Ke(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Qe(t,e){var i;return t.isValid()&&e.isValid()?(e=je(e,t),t.isBefore(e)?i=Ke(t,e):(i=Ke(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function $e(o,r){return function(t,e){var i,n;return null===e||isNaN(+e)||(k(r,"moment()."+r+"(period, number) is deprecated. Please use moment()."+r+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=t,t=e,e=n),t="string"==typeof t?+t:t,i=Je(t,e),ti(this,i,o),this}}function ti(t,e,i,n){var o=e._milliseconds,r=Ae(e._days),s=Ae(e._months);t.isValid()&&(n=null==n||n,s&&ct(t,it(t,"Month")+s*i),r&&nt(t,"Date",it(t,"Date")+r*i),o&&t._d.setTime(t._d.valueOf()+o*i),n&&d.updateOffset(t,r||s))}function ei(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function ii(t,e){var i=t||Se(),n=je(i,this).startOf("day"),o=d.calendarFormat(this,n)||"sameElse",r=e&&(S(e[o])?e[o].call(this,i):e[o]);return this.format(r||this.localeData().calendar(o,this,Se(i)))}function ni(){return new g(this)}function oi(t,e){var i=y(t)?t:Se(t);return!(!this.isValid()||!i.isValid())&&(e=N(r(e)?"millisecond":e),"millisecond"===e?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())}function ri(t,e){var i=y(t)?t:Se(t);return!(!this.isValid()||!i.isValid())&&(e=N(r(e)?"millisecond":e),"millisecond"===e?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())}function si(t,e,i,n){return n=n||"()",("("===n[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===n[1]?this.isBefore(e,i):!this.isAfter(e,i))}function ai(t,e){var i,n=y(t)?t:Se(t);return!(!this.isValid()||!n.isValid())&&(e=N(e||"millisecond"),"millisecond"===e?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))}function li(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function di(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function hi(t,e,i){var n,o,r;if(!this.isValid())return NaN;if(n=je(t,this),!n.isValid())return NaN;switch(o=6e4*(n.utcOffset()-this.utcOffset()),e=N(e)){case"year":r=ui(this,n)/12;break;case"month":r=ui(this,n);break;case"quarter":r=ui(this,n)/3;break;case"second":r=(this-n)/1e3;break;case"minute":r=(this-n)/6e4;break;case"hour":r=(this-n)/36e5;break;case"day":r=(this-n-o)/864e5;break;case"week":r=(this-n-o)/6048e5;break;default:r=this-n}return i?r:b(r)}function ui(t,e){var i,n,o=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(o,"months");return e-r<0?(i=t.clone().add(o-1,"months"),n=(e-r)/(r-i)):(i=t.clone().add(o+1,"months"),n=(e-r)/(i-r)),-(o+n)||0}function ci(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fi(){if(!this.isValid())return null;var t=this.clone().utc();return t.year()<0||t.year()>9999?Y(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):S(Date.prototype.toISOString)?this.toDate().toISOString():Y(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function pi(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o=e+'[")]';return this.format(i+n+"-MM-DD[T]HH:mm:ss.SSS"+o)}function mi(t){t||(t=this.isUtc()?d.defaultFormatUtc:d.defaultFormat);var e=Y(this,t);return this.localeData().postformat(e)}function vi(t,e){return this.isValid()&&(y(t)&&t.isValid()||Se(t).isValid())?Je({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function gi(t){return this.from(Se(),t)}function yi(t,e){return this.isValid()&&(y(t)&&t.isValid()||Se(t).isValid())?Je({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function bi(t){return this.to(Se(),t)}function wi(t){var e;return void 0===t?this._locale._abbr:(e=ee(t),null!=e&&(this._locale=e),this)}function _i(){return this._locale}function xi(t){switch(t=N(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function ki(t){return void 0===(t=N(t))||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function Si(){return this._d.valueOf()-6e4*(this._offset||0)}function Ei(){return Math.floor(this.valueOf()/1e3)}function Ti(){return new Date(this.valueOf())}function Di(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Ci(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Mi(){return this.isValid()?this.toISOString():null}function Oi(){return m(this)}function Li(){return c({},p(this))}function Ii(){return p(this).overflow}function Ai(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Pi(t,e){z(0,[t,t.length],0,e)}function Ni(t){return Fi.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function ji(t){return Fi.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Bi(){return kt(this.year(),1,4)}function Ri(){var t=this.localeData()._week;return kt(this.year(),t.dow,t.doy)}function Fi(t,e,i,n,o){var r;return null==t?xt(this,n,o).year:(r=kt(t,n,o),e>r&&(e=r),zi.call(this,t,e,i,n,o))}function zi(t,e,i,n,o){var r=_t(t,e,i,n,o),s=bt(r.year,0,r.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Hi(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function qi(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function Yi(t,e){e[po]=w(1e3*("0."+t))}function Ui(){return this._isUTC?"UTC":""}function Wi(){return this._isUTC?"Coordinated Universal Time":""}function Vi(t){return Se(1e3*t)}function Gi(){return Se.apply(null,arguments).parseZone()}function Xi(t){return t}function Ji(t,e,i,n){var o=ee(),r=f().set(n,e);return o[i](r,t)}function Zi(t,e,i){if(h(t)&&(e=t,t=void 0),t=t||"",null!=e)return Ji(t,e,i,"month");var n,o=[];for(n=0;n<12;n++){o[n]=Ji(t,n,i,"month")}return o}function Ki(t,e,i,n){"boolean"==typeof t?(h(e)&&(i=e,e=void 0),e=e||""):(e=t,i=e,t=!1,h(e)&&(i=e,e=void 0),e=e||"");var o=ee(),r=t?o._week.dow:0;if(null!=i)return Ji(e,(i+r)%7,n,"day");var s,a=[];for(s=0;s<7;s++){a[s]=Ji(e,(s+r)%7,n,"day")}return a}function Qi(t,e){return Zi(t,e,"months")}function $i(t,e){return Zi(t,e,"monthsShort")}function tn(t,e,i){return Ki(t,e,i,"weekdays")}function en(t,e,i){return Ki(t,e,i,"weekdaysShort")}function nn(t,e,i){return Ki(t,e,i,"weekdaysMin")}function on(){var t=this._data;return this._milliseconds=lr(this._milliseconds),this._days=lr(this._days),this._months=lr(this._months),t.milliseconds=lr(t.milliseconds),t.seconds=lr(t.seconds),t.minutes=lr(t.minutes),t.hours=lr(t.hours),t.months=lr(t.months),t.years=lr(t.years),this}function rn(t,e,i,n){var o=Je(e,i);return t._milliseconds+=n*o._milliseconds,t._days+=n*o._days,t._months+=n*o._months,t._bubble()}function sn(t,e){return rn(this,t,e,1)}function an(t,e){return rn(this,t,e,-1)}function ln(t){return t<0?Math.floor(t):Math.ceil(t)}function dn(){var t,e,i,n,o,r=this._milliseconds,s=this._days,a=this._months,l=this._data;return r>=0&&s>=0&&a>=0||r<=0&&s<=0&&a<=0||(r+=864e5*ln(un(a)+s),s=0,a=0),l.milliseconds=r%1e3,t=b(r/1e3),l.seconds=t%60,e=b(t/60),l.minutes=e%60,i=b(e/60),l.hours=i%24,s+=b(i/24),o=b(hn(s)),a+=o,s-=ln(un(o)),n=b(a/12),a%=12,l.days=s,l.months=a,l.years=n,this}function hn(t){return 4800*t/146097}function un(t){return 146097*t/4800}function cn(t){if(!this.isValid())return NaN;var e,i,n=this._milliseconds;if("month"===(t=N(t))||"year"===t)return e=this._days+n/864e5,i=this._months+hn(e),"month"===t?i:i/12;switch(e=this._days+Math.round(un(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function fn(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12):NaN}function pn(t){return function(){return this.as(t)}}function mn(){return Je(this)}function vn(t){return t=N(t),this.isValid()?this[t+"s"]():NaN}function gn(t){return function(){return this.isValid()?this._data[t]:NaN}}function yn(){return b(this.days()/7)}function bn(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}function wn(t,e,i){var n=Je(t).abs(),o=Sr(n.as("s")),r=Sr(n.as("m")),s=Sr(n.as("h")),a=Sr(n.as("d")),l=Sr(n.as("M")),d=Sr(n.as("y")),h=o<=Er.ss&&["s",o]||o<Er.s&&["ss",o]||r<=1&&["m"]||r<Er.m&&["mm",r]||s<=1&&["h"]||s<Er.h&&["hh",s]||a<=1&&["d"]||a<Er.d&&["dd",a]||l<=1&&["M"]||l<Er.M&&["MM",l]||d<=1&&["y"]||["yy",d];return h[2]=e,h[3]=+t>0,h[4]=i,bn.apply(null,h)}function _n(t){return void 0===t?Sr:"function"==typeof t&&(Sr=t,!0)}function xn(t,e){return void 0!==Er[t]&&(void 0===e?Er[t]:(Er[t]=e,"s"===t&&(Er.ss=e-1),!0))}function kn(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=wn(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function Sn(t){return(t>0)-(t<0)||+t}function En(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i,n=Tr(this._milliseconds)/1e3,o=Tr(this._days),r=Tr(this._months);t=b(n/60),e=b(t/60),n%=60,t%=60,i=b(r/12),r%=12;var s=i,a=r,l=o,d=e,h=t,u=n?n.toFixed(3).replace(/\.?0+$/,""):"",c=this.asSeconds();if(!c)return"P0D";var f=c<0?"-":"",p=Sn(this._months)!==Sn(c)?"-":"",m=Sn(this._days)!==Sn(c)?"-":"",v=Sn(this._milliseconds)!==Sn(c)?"-":"";return f+"P"+(s?p+s+"Y":"")+(a?p+a+"M":"")+(l?m+l+"D":"")+(d||h||u?"T":"")+(d?v+d+"H":"")+(h?v+h+"M":"")+(u?v+u+"S":"")}var Tn,Dn;Dn=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;n<i;n++){if(n in e&&t.call(this,e[n],n,e))return!0}return!1};var Cn=d.momentProperties=[],Mn=!1,On={},Ln;d.suppressDeprecationWarnings=!1,d.deprecationHandler=null,Ln=Object.keys?Object.keys:function(t){var e,i=[];for(e in t){u(t,e)&&i.push(e)}return i};var In={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},An={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Pn=/\d{1,2}/,Nn={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},jn={},Bn={},Rn=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Fn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,zn={},Hn={},qn=/\d/,Yn=/\d\d/,Un=/\d{3}/,Wn=/\d{4}/,Vn=/[+-]?\d{6}/,Gn=/\d\d?/,Xn=/\d\d\d\d?/,Jn=/\d\d\d\d\d\d?/,Zn=/\d{1,3}/,Kn=/\d{1,4}/,Qn=/[+-]?\d{1,6}/,$n=/\d+/,to=/[+-]?\d+/,eo=/Z|[+-]\d\d:?\d\d/gi,io=/Z|[+-]\d\d(?::?\d\d)?/gi,no=/[+-]?\d+(\.\d{1,3})?/,oo=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ro={},so={},ao=0,lo=1,ho=2,uo=3,co=4,fo=5,po=6,mo=7,vo=8;z("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),z(0,["YY",2],0,function(){return this.year()%100}),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,!0],0,"year"),P("year","y"),B("year",1),W("Y",to),W("YY",Gn,Yn),W("YYYY",Kn,Wn),W("YYYYY",Qn,Vn),W("YYYYYY",Qn,Vn),J(["YYYYY","YYYYYY"],ao),J("YYYY",function(t,e){e[ao]=2===t.length?d.parseTwoDigitYear(t):w(t)}),J("YY",function(t,e){e[ao]=d.parseTwoDigitYear(t)}),J("Y",function(t,e){e[ao]=parseInt(t,10)}),d.parseTwoDigitYear=function(t){return w(t)+(w(t)>68?1900:2e3)};var go,yo=et("FullYear",!0);go=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e){if(this[e]===t)return e}return-1},z("M",["MM",2],"Mo",function(){return this.month()+1}),z("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),z("MMMM",0,0,function(t){return this.localeData().months(this,t)}),P("month","M"),B("month",8),W("M",Gn),W("MM",Gn,Yn),W("MMM",function(t,e){return e.monthsShortRegex(t)}),W("MMMM",function(t,e){return e.monthsRegex(t)}),J(["M","MM"],function(t,e){e[lo]=w(t)-1}),J(["MMM","MMMM"],function(t,e,i,n){var o=i._locale.monthsParse(t,n,i._strict);null!=o?e[lo]=o:p(i).invalidMonth=t});var bo=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,wo="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),_o="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),xo=oo,ko=oo;z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),P("week","w"),P("isoWeek","W"),B("week",5),B("isoWeek",5),W("w",Gn),W("ww",Gn,Yn),W("W",Gn),W("WW",Gn,Yn),Z(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=w(t)});var So={dow:0,doy:6};z("d",0,"do","day"),z("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),z("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),z("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),P("day","d"),P("weekday","e"),P("isoWeekday","E"),B("day",11),B("weekday",11),B("isoWeekday",11),W("d",Gn),W("e",Gn),W("E",Gn),W("dd",function(t,e){return e.weekdaysMinRegex(t)}),W("ddd",function(t,e){return e.weekdaysShortRegex(t)}),W("dddd",function(t,e){return e.weekdaysRegex(t)}),Z(["dd","ddd","dddd"],function(t,e,i,n){var o=i._locale.weekdaysParse(t,n,i._strict);null!=o?e.d=o:p(i).invalidWeekday=t}),Z(["d","e","E"],function(t,e,i,n){e[n]=w(t)});var Eo="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),To="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Do="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Co=oo,Mo=oo,Oo=oo;z("H",["HH",2],0,"hour"),z("h",["hh",2],0,Yt),z("k",["kk",2],0,Ut),z("hmm",0,0,function(){return""+Yt.apply(this)+F(this.minutes(),2)}),z("hmmss",0,0,function(){return""+Yt.apply(this)+F(this.minutes(),2)+F(this.seconds(),2)}),z("Hmm",0,0,function(){return""+this.hours()+F(this.minutes(),2)}),z("Hmmss",0,0,function(){return""+this.hours()+F(this.minutes(),2)+F(this.seconds(),2)}),Wt("a",!0),Wt("A",!1),P("hour","h"),B("hour",13),W("a",Vt),W("A",Vt),W("H",Gn),W("h",Gn),W("k",Gn),W("HH",Gn,Yn),W("hh",Gn,Yn),W("kk",Gn,Yn),W("hmm",Xn),W("hmmss",Jn),W("Hmm",Xn),W("Hmmss",Jn),J(["H","HH"],uo),J(["k","kk"],function(t,e,i){var n=w(t);e[uo]=24===n?0:n}),J(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),J(["h","hh"],function(t,e,i){e[uo]=w(t),p(i).bigHour=!0}),J("hmm",function(t,e,i){var n=t.length-2;e[uo]=w(t.substr(0,n)),e[co]=w(t.substr(n)),p(i).bigHour=!0}),J("hmmss",function(t,e,i){var n=t.length-4,o=t.length-2;e[uo]=w(t.substr(0,n)),e[co]=w(t.substr(n,2)),e[fo]=w(t.substr(o)),p(i).bigHour=!0}),J("Hmm",function(t,e,i){var n=t.length-2;e[uo]=w(t.substr(0,n)),e[co]=w(t.substr(n))}),J("Hmmss",function(t,e,i){var n=t.length-4,o=t.length-2;e[uo]=w(t.substr(0,n)),e[co]=w(t.substr(n,2)),e[fo]=w(t.substr(o))});var Lo,Io=/[ap]\.?m?\.?/i,Ao=et("Hours",!0),Po={calendar:In,longDateFormat:An,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:Pn,relativeTime:Nn,months:wo,monthsShort:_o,week:So,weekdays:Eo,weekdaysMin:Do,weekdaysShort:To,meridiemParse:Io},No={},jo={},Bo=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ro=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Fo=/Z|[+-]\d\d(?::?\d\d)?/,zo=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ho=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],qo=/^\/?Date\((\-?\d+)/i,Yo=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Uo={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};d.createFromInputFallback=t("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),d.ISO_8601=function(){},d.RFC_2822=function(){};var Wo=t("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:n()}),Vo=t("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:n()}),Go=function t(){return Date.now?Date.now():+new Date},Xo=["year","quarter","month","week","day","hour","minute","second","millisecond"];Pe("Z",":"),Pe("ZZ",""),W("Z",io),W("ZZ",io),J(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Ne(io,t)});var Jo=/([\+\-]|\d\d)/gi;d.updateOffset=function(){};var Zo=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ko=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Je.fn=Le.prototype,Je.invalid=Oe;var Qo=$e(1,"add"),$o=$e(-1,"subtract");d.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",d.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var tr=t("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});z(0,["gg",2],0,function(){return this.weekYear()%100}),z(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Pi("gggg","weekYear"),Pi("ggggg","weekYear"),Pi("GGGG","isoWeekYear"),Pi("GGGGG","isoWeekYear"),P("weekYear","gg"),P("isoWeekYear","GG"),B("weekYear",1),B("isoWeekYear",1),W("G",to),W("g",to),W("GG",Gn,Yn),W("gg",Gn,Yn),W("GGGG",Kn,Wn),W("gggg",Kn,Wn),W("GGGGG",Qn,Vn),W("ggggg",Qn,Vn),Z(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=w(t)}),Z(["gg","GG"],function(t,e,i,n){e[n]=d.parseTwoDigitYear(t)}),z("Q",0,"Qo","quarter"),P("quarter","Q"),B("quarter",7),W("Q",qn),J("Q",function(t,e){e[lo]=3*(w(t)-1)}),z("D",["DD",2],"Do","date"),P("date","D"),B("date",9),W("D",Gn),W("DD",Gn,Yn),W("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),J(["D","DD"],ho),J("Do",function(t,e){e[ho]=w(t.match(Gn)[0],10)});var er=et("Date",!0);z("DDD",["DDDD",3],"DDDo","dayOfYear"),P("dayOfYear","DDD"),B("dayOfYear",4),W("DDD",Zn),W("DDDD",Un),J(["DDD","DDDD"],function(t,e,i){i._dayOfYear=w(t)}),z("m",["mm",2],0,"minute"),P("minute","m"),B("minute",14),W("m",Gn),W("mm",Gn,Yn),J(["m","mm"],co);var ir=et("Minutes",!1);z("s",["ss",2],0,"second"),P("second","s"),B("second",15),W("s",Gn),W("ss",Gn,Yn),J(["s","ss"],fo);var nr=et("Seconds",!1),or;for(z("S",0,0,function(){return~~(this.millisecond()/100)}),z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,function(){return 10*this.millisecond()}),z(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),z(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),z(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),z(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),z(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),P("millisecond","ms"),B("millisecond",16),W("S",Zn,qn),W("SS",Zn,Yn),W("SSS",Zn,Un),or="SSSS";or.length<=9;or+="S"){W(or,$n)}for(or="S";or.length<=9;or+="S"){J(or,Yi)}var rr=et("Milliseconds",!1);z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var sr=g.prototype;sr.add=Qo,sr.calendar=ii,sr.clone=ni,sr.diff=hi,sr.endOf=ki,sr.format=mi,sr.from=vi,sr.fromNow=gi,sr.to=yi,sr.toNow=bi,sr.get=ot,sr.invalidAt=Ii,sr.isAfter=oi,sr.isBefore=ri,sr.isBetween=si,sr.isSame=ai,sr.isSameOrAfter=li,sr.isSameOrBefore=di,sr.isValid=Oi,sr.lang=tr,sr.locale=wi,sr.localeData=_i,sr.max=Vo,sr.min=Wo,sr.parsingFlags=Li,sr.set=rt,sr.startOf=xi,sr.subtract=$o,sr.toArray=Di,sr.toObject=Ci,sr.toDate=Ti,sr.toISOString=fi,sr.inspect=pi,sr.toJSON=Mi,sr.toString=ci,sr.unix=Ei,sr.valueOf=Si,sr.creationData=Ai,sr.year=yo,sr.isLeapYear=tt,sr.weekYear=Ni,sr.isoWeekYear=ji,sr.quarter=sr.quarters=Hi,sr.month=ft,sr.daysInMonth=pt,sr.week=sr.weeks=Dt,sr.isoWeek=sr.isoWeeks=Ct,sr.weeksInYear=Ri,sr.isoWeeksInYear=Bi,sr.date=er,sr.day=sr.days=jt,sr.weekday=Bt,sr.isoWeekday=Rt,sr.dayOfYear=qi,sr.hour=sr.hours=Ao,sr.minute=sr.minutes=ir,sr.second=sr.seconds=nr,sr.millisecond=sr.milliseconds=rr,sr.utcOffset=Re,sr.utc=ze,sr.local=He,sr.parseZone=qe,sr.hasAlignedHourOffset=Ye,sr.isDST=Ue,sr.isLocal=Ve,sr.isUtcOffset=Ge,sr.isUtc=Xe,sr.isUTC=Xe,sr.zoneAbbr=Ui,sr.zoneName=Wi,sr.dates=t("dates accessor is deprecated. Use date instead.",er),sr.months=t("months accessor is deprecated. Use month instead",ft),sr.years=t("years accessor is deprecated. Use year instead",yo),sr.zone=t("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Fe),sr.isDSTShifted=t("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",We);var ar=D.prototype;ar.calendar=C,ar.longDateFormat=M,ar.invalidDate=O,ar.ordinal=L,ar.preparse=Xi,ar.postformat=Xi,ar.relativeTime=I,ar.pastFuture=A,ar.set=E,ar.months=lt,ar.monthsShort=dt,ar.monthsParse=ut,ar.monthsRegex=vt,ar.monthsShortRegex=mt,ar.week=St,ar.firstDayOfYear=Tt,ar.firstDayOfWeek=Et,ar.weekdays=Lt,ar.weekdaysMin=At,ar.weekdaysShort=It,ar.weekdaysParse=Nt,ar.weekdaysRegex=Ft,ar.weekdaysShortRegex=zt,ar.weekdaysMinRegex=Ht,ar.isPM=Gt,ar.meridiem=Xt,Qt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function t(e){var i=e%10;return e+(1===w(e%100/10)?"th":1===i?"st":2===i?"nd":3===i?"rd":"th")}}),d.lang=t("moment.lang is deprecated. Use moment.locale instead.",Qt),d.langData=t("moment.langData is deprecated. Use moment.localeData instead.",ee);var lr=Math.abs,dr=pn("ms"),hr=pn("s"),ur=pn("m"),cr=pn("h"),fr=pn("d"),pr=pn("w"),mr=pn("M"),vr=pn("y"),gr=gn("milliseconds"),yr=gn("seconds"),br=gn("minutes"),wr=gn("hours"),_r=gn("days"),xr=gn("months"),kr=gn("years"),Sr=Math.round,Er={ss:44,s:45,m:45,h:22,d:26,M:11},Tr=Math.abs,Dr=Le.prototype;return Dr.isValid=Me,Dr.abs=on,Dr.add=sn,Dr.subtract=an,Dr.as=cn,Dr.asMilliseconds=dr,Dr.asSeconds=hr,Dr.asMinutes=ur,Dr.asHours=cr,Dr.asDays=fr,Dr.asWeeks=pr,Dr.asMonths=mr,Dr.asYears=vr,Dr.valueOf=fn,Dr._bubble=dn,Dr.clone=mn,Dr.get=vn,Dr.milliseconds=gr,Dr.seconds=yr,Dr.minutes=br,Dr.hours=wr,Dr.days=_r,Dr.weeks=yn,Dr.months=xr,Dr.years=kr,Dr.humanize=kn,Dr.toISOString=En,Dr.toString=En,Dr.toJSON=En,Dr.locale=wi,Dr.localeData=_i,Dr.toIsoString=t("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",En),Dr.lang=tr,z("X",0,0,"unix"),z("x",0,0,"valueOf"),W("x",to),W("X",no),J("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),J("x",function(t,e,i){i._d=new Date(w(t))}),d.version="2.19.1",function(t){Tn=t}(Se),d.fn=sr,d.min=Te,d.max=De,d.now=Go,d.utc=f,d.unix=Vi,d.months=Qi,d.isDate=o,d.locale=Qt,d.invalid=n,d.duration=Je,d.isMoment=y,d.weekdays=tn,d.parseZone=Gi,d.localeData=ee,d.isDuration=Ie,d.monthsShort=$i,d.weekdaysMin=nn,d.defineLocale=$t,d.updateLocale=te,d.locales=ie,d.weekdaysShort=en,d.normalizeUnits=N,d.relativeTimeRounding=_n,d.relativeTimeThreshold=xn,d.calendarFormat=ei,d.prototype=sr,d}()}).call(e,i(155)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){function i(t){throw new Error("Cannot find module '"+t+"'.")}i.keys=function(){return[]},i.resolve=i,(t.exports=i).id=156},function(u,t,e){(function(t){function f(t,e){var i=e||0,n=r;return n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+"-"+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]+n[t[i++]]}function e(t,e,i){var n=e&&i||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||s)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var r=0;r<16;r++)e[n+r]=o[r];return e||f(o)}var s,i="undefined"!=typeof window?window:void 0!==t?t:null;if(i&&i.crypto&&crypto.getRandomValues){var n=new Uint8Array(16);s=function(){return crypto.getRandomValues(n),n}}if(!s){var o=new Array(16);s=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}for(var r=[],a={},l=0;l<256;l++)r[l]=(l+256).toString(16).substr(1),a[r[l]]=l;var d=s(),p=[1|d[0],d[1],d[2],d[3],d[4],d[5]],m=16383&(d[6]<<8|d[7]),v=0,g=0,h=e;h.v1=function(t,e,i){var n=e&&i||0,o=e||[],r=void 0!==(t=t||{}).clockseq?t.clockseq:m,s=void 0!==t.msecs?t.msecs:(new Date).getTime(),a=void 0!==t.nsecs?t.nsecs:g+1,l=s-v+(a-g)/1e4;if(l<0&&void 0===t.clockseq&&(r=r+1&16383),(l<0||v<s)&&void 0===t.nsecs&&(a=0),1e4<=a)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=s,m=r;var d=(1e4*(268435455&(s+=122192928e5))+(g=a))%4294967296;o[n++]=d>>>24&255,o[n++]=d>>>16&255,o[n++]=d>>>8&255,o[n++]=255&d;var h=s/4294967296*1e4&268435455;o[n++]=h>>>8&255,o[n++]=255&h,o[n++]=h>>>24&15|16,o[n++]=h>>>16&255,o[n++]=r>>>8|128,o[n++]=255&r;for(var u=t.node||p,c=0;c<6;c++)o[n+c]=u[c];return e||f(o)},h.v4=e,h.parse=function(t,e,i){var n=e&&i||0,o=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){o<16&&(e[n+o++]=a[t])});o<16;)e[n+o++]=0;return e},h.unparse=f,u.exports=h}).call(t,e(158))},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==("undefined"==typeof window?"undefined":Mr()(window))&&(i=window)}t.exports=i},function(t,e,i){e.util=i(2),e.DOMutil=i(14),e.DataSet=i(11),e.DataView=i(12),e.Queue=i(43),e.Graph3d=i(161),e.graph3d={Camera:i(95),Filter:i(96),Point2d:i(91),Point3d:i(34),Slider:i(92),StepNumber:i(93)},e.moment=i(9),e.Hammer=i(10),e.keycharm=i(35)},function(t,e,i){var n=i(7),o=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},function(t,e,i){function w(t,e,i){if(!(this instanceof w))throw new SyntaxError("Constructor must be called with the new operator");this.containerElement=t,this.dataGroup=new m,this.dataPoints=null,this.create(),a.setDefaults(w.DEFAULTS,this),this.colX=void 0,this.colY=void 0,this.colZ=void 0,this.colValue=void 0,this.setOptions(i),this.setData(e)}function u(t){return"clientX"in t?t.clientX:t.targetTouches[0]&&t.targetTouches[0].clientX||0}function c(t){return"clientY"in t?t.clientY:t.targetTouches[0]&&t.targetTouches[0].clientY||0}var n,o=i(90),h=(n=o)&&n.__esModule?n:{default:n},r=i(44),f=i(2),A=i(34),P=i(91),s=i(92),N=i(93),a=i(94),l=i(15).default,d=i(15).printStyle,p=i(172).allOptions,m=i(173);w.STYLE=a.STYLE,w.DEFAULTS={width:"400px",height:"400px",filterLabel:"time",legendLabel:"value",xLabel:"x",yLabel:"y",zLabel:"z",xValueLabel:function(t){return t},yValueLabel:function(t){return t},zValueLabel:function(t){return t},showXAxis:!0,showYAxis:!0,showZAxis:!0,showGrid:!0,showPerspective:!0,showShadow:!1,keepAspectRatio:!0,verticalRatio:.5,dotSizeRatio:.02,dotSizeMinFraction:.5,dotSizeMaxFraction:2.5,showAnimationControls:void 0,animationInterval:1e3,animationPreload:!1,animationAutoStart:void 0,axisColor:"#4D4D4D",gridColor:"#D3D3D3",xCenter:"55%",yCenter:"50%",style:w.STYLE.DOT,tooltip:!1,tooltipStyle:{content:{padding:"10px",border:"1px solid #4d4d4d",color:"#1a1a1a",background:"rgba(255,255,255,0.7)",borderRadius:"2px",boxShadow:"5px 5px 10px rgba(128,128,128,0.5)"},line:{height:"40px",width:"0",borderLeft:"1px solid #4d4d4d"},dot:{height:"0",width:"0",border:"5px solid #4d4d4d",borderRadius:"5px"}},dataColor:{fill:"#7DC1FF",stroke:"#3267D2",strokeWidth:1},cameraPosition:{horizontal:1,vertical:.5,distance:1.7},showLegend:void 0,backgroundColor:void 0,xBarWidth:void 0,yBarWidth:void 0,valueMin:void 0,valueMax:void 0,xMin:void 0,xMax:void 0,xStep:void 0,yMin:void 0,yMax:void 0,yStep:void 0,zMin:void 0,zMax:void 0,zStep:void 0},r(w.prototype),w.prototype._setScale=function(){this.scale=new A(1/this.xRange.range(),1/this.yRange.range(),1/this.zRange.range()),this.keepAspectRatio&&(this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y),this.scale.z*=this.verticalRatio,void 0!==this.valueRange&&(this.scale.value=1/this.valueRange.range());var t=this.xRange.center()*this.scale.x,e=this.yRange.center()*this.scale.y,i=this.zRange.center()*this.scale.z;this.camera.setArmLocation(t,e,i)},w.prototype._convert3Dto2D=function(t){var e=this._convertPointToTranslation(t);return this._convertTranslationToScreen(e)},w.prototype._convertPointToTranslation=function(t){var e=this.camera.getCameraLocation(),i=this.camera.getCameraRotation(),n=t.x*this.scale.x,o=t.y*this.scale.y,r=t.z*this.scale.z,s=e.x,a=e.y,l=e.z,d=Math.sin(i.x),h=Math.cos(i.x),u=Math.sin(i.y),c=Math.cos(i.y),f=Math.sin(i.z),p=Math.cos(i.z);return new A(c*(f*(o-a)+p*(n-s))-u*(r-l),d*(c*(r-l)+u*(f*(o-a)+p*(n-s)))+h*(p*(o-a)-f*(n-s)),h*(c*(r-l)+u*(f*(o-a)+p*(n-s)))-d*(p*(o-a)-f*(n-s)))},w.prototype._convertTranslationToScreen=function(t){var e,i,n=this.eye.x,o=this.eye.y,r=this.eye.z,s=t.x,a=t.y,l=t.z;return i=this.showPerspective?(e=r/l*(s-n),r/l*(a-o)):(e=s*(-r/this.camera.getArmLength()),a*(-r/this.camera.getArmLength())),new P(this.currentXCenter+e*this.frame.canvas.clientWidth,this.currentYCenter-i*this.frame.canvas.clientWidth)},w.prototype._calcTranslations=function(t){for(var e=0;e<t.length;e++){var i=t[e];i.trans=this._convertPointToTranslation(i.point),i.screen=this._convertTranslationToScreen(i.trans);var n=this._convertPointToTranslation(i.bottom);i.dist=this.showPerspective?n.length():-n.z}t.sort(function(t,e){return e.dist-t.dist})},w.prototype._initializeRanges=function(){var t=this.dataGroup;this.xRange=t.xRange,this.yRange=t.yRange,this.zRange=t.zRange,this.valueRange=t.valueRange,this.xStep=t.xStep,this.yStep=t.yStep,this.zStep=t.zStep,this.xBarWidth=t.xBarWidth,this.yBarWidth=t.yBarWidth,this.colX=t.colX,this.colY=t.colY,this.colZ=t.colZ,this.colValue=t.colValue,this._setScale()},w.prototype.getDataPoints=function(t){for(var e=[],i=0;i<t.length;i++){var n=new A;n.x=t[i][this.colX]||0,n.y=t[i][this.colY]||0,n.z=t[i][this.colZ]||0,n.data=t[i],void 0!==this.colValue&&(n.value=t[i][this.colValue]||0);var o={};o.point=n,o.bottom=new A(n.x,n.y,this.zRange.min),o.trans=void 0,o.screen=void 0,e.push(o)}return e},w.prototype._getDataPoints=function(t){var e,i,n,o,r=[];if(this.style===w.STYLE.GRID||this.style===w.STYLE.SURFACE){var s=this.dataGroup.getDistinctValues(this.colX,t),a=this.dataGroup.getDistinctValues(this.colY,t);r=this.getDataPoints(t);var l=[];for(n=0;n<r.length;n++){o=r[n];var d=s.indexOf(o.point.x),h=a.indexOf(o.point.y);void 0===l[d]&&(l[d]=[]),l[d][h]=o}for(e=0;e<l.length;e++)for(i=0;i<l[e].length;i++)l[e][i]&&(l[e][i].pointRight=e<l.length-1?l[e+1][i]:void 0,l[e][i].pointTop=i<l[e].length-1?l[e][i+1]:void 0,l[e][i].pointCross=e<l.length-1&&i<l[e].length-1?l[e+1][i+1]:void 0)}else if(this._checkValueField(t),r=this.getDataPoints(t),this.style===w.STYLE.LINE)for(n=0;n<r.length;n++)0<n&&(r[n-1].pointNext=r[n]);return r},w.prototype.create=function(){for(;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div"),this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas);var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t),this.frame.filter=document.createElement("div"),this.frame.filter.style.position="absolute",this.frame.filter.style.bottom="0px",this.frame.filter.style.left="0px",this.frame.filter.style.width="100%",this.frame.appendChild(this.frame.filter);var e=this;f.addEventListener(this.frame.canvas,"mousedown",function(t){e._onMouseDown(t)}),f.addEventListener(this.frame.canvas,"touchstart",function(t){e._onTouchStart(t)}),f.addEventListener(this.frame.canvas,"mousewheel",function(t){e._onWheel(t)}),f.addEventListener(this.frame.canvas,"mousemove",function(t){e._onTooltip(t)}),f.addEventListener(this.frame.canvas,"click",function(t){e._onClick(t)}),this.containerElement.appendChild(this.frame)},w.prototype._setSize=function(t,e){this.frame.style.width=t,this.frame.style.height=e,this._resizeCanvas()},w.prototype._resizeCanvas=function(){this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth,this.frame.canvas.height=this.frame.canvas.clientHeight,this.frame.filter.style.width=this.frame.canvas.clientWidth-20+"px"},w.prototype.animationStart=function(){if(this.animationAutoStart&&this.dataGroup.dataFilter){if(!this.frame.filter||!this.frame.filter.slider)throw new Error("No animation available");this.frame.filter.slider.play()}},w.prototype.animationStop=function(){this.frame.filter&&this.frame.filter.slider&&this.frame.filter.slider.stop()},w.prototype._resizeCenter=function(){"%"===this.xCenter.charAt(this.xCenter.length-1)?this.currentXCenter=parseFloat(this.xCenter)/100*this.frame.canvas.clientWidth:this.currentXCenter=parseFloat(this.xCenter),"%"===this.yCenter.charAt(this.yCenter.length-1)?this.currentYCenter=parseFloat(this.yCenter)/100*(this.frame.canvas.clientHeight-this.frame.filter.clientHeight):this.currentYCenter=parseFloat(this.yCenter)},w.prototype.getCameraPosition=function(){var t=this.camera.getArmRotation();return t.distance=this.camera.getArmLength(),t},w.prototype._readData=function(t){this.dataPoints=this.dataGroup.initializeData(this,t,this.style),this._initializeRanges(),this._redrawFilter()},w.prototype.setData=function(t){null!=t&&(this._readData(t),this.redraw(),this.animationStart())},w.prototype.setOptions=function(t){void 0!==t&&(!0===l.validate(t,p)&&console.log("%cErrors have been found in the supplied options object.",d),this.animationStop(),a.setOptions(t,this),this.setPointDrawingMethod(),this._setSize(this.width,this.height),this.setData(this.dataGroup.getDataTable()),this.animationStart())},w.prototype.setPointDrawingMethod=function(){var t=void 0;switch(this.style){case w.STYLE.BAR:t=w.prototype._redrawBarGraphPoint;break;case w.STYLE.BARCOLOR:t=w.prototype._redrawBarColorGraphPoint;break;case w.STYLE.BARSIZE:t=w.prototype._redrawBarSizeGraphPoint;break;case w.STYLE.DOT:t=w.prototype._redrawDotGraphPoint;break;case w.STYLE.DOTLINE:t=w.prototype._redrawDotLineGraphPoint;break;case w.STYLE.DOTCOLOR:t=w.prototype._redrawDotColorGraphPoint;break;case w.STYLE.DOTSIZE:t=w.prototype._redrawDotSizeGraphPoint;break;case w.STYLE.SURFACE:t=w.prototype._redrawSurfaceGraphPoint;break;case w.STYLE.GRID:t=w.prototype._redrawGridGraphPoint;break;case w.STYLE.LINE:t=w.prototype._redrawLineGraphPoint;break;default:throw new Error("Can not determine point drawing method for graph style '"+this.style+"'")}this._pointDrawingMethod=t},w.prototype.redraw=function(){if(void 0===this.dataPoints)throw new Error("Graph data not initialized");this._resizeCanvas(),this._resizeCenter(),this._redrawSlider(),this._redrawClear(),this._redrawAxis(),this._redrawDataGraph(),this._redrawInfo(),this._redrawLegend()},w.prototype._getContext=function(){var t=this.frame.canvas.getContext("2d");return t.lineJoin="round",t.lineCap="round",t},w.prototype._redrawClear=function(){var t=this.frame.canvas;t.getContext("2d").clearRect(0,0,t.width,t.height)},w.prototype._dotSize=function(){return this.frame.clientWidth*this.dotSizeRatio},w.prototype._getLegendWidth=function(){return this.style===w.STYLE.DOTSIZE?this._dotSize()*this.dotSizeMaxFraction:this.style===w.STYLE.BARSIZE?this.xBarWidth:20},w.prototype._redrawLegend=function(){if(!0===this.showLegend&&this.style!==w.STYLE.LINE&&this.style!==w.STYLE.BARSIZE){var t=this.style===w.STYLE.BARSIZE||this.style===w.STYLE.DOTSIZE,e=this.style===w.STYLE.DOTSIZE||this.style===w.STYLE.DOTCOLOR||this.style===w.STYLE.BARCOLOR,i=Math.max(.25*this.frame.clientHeight,100),n=this.margin,o=this._getLegendWidth(),r=this.frame.clientWidth-this.margin,s=r-o,a=n+i,l=this._getContext();if(l.lineWidth=1,!(l.font="14px arial")==t){var d,h=i;for(d=0;d<h;d++){var u=240*((d-0)/(h-0)),c=this._hsv2rgb(u,1,1);l.strokeStyle=c,l.beginPath(),l.moveTo(s,n+d),l.lineTo(r,n+d),l.stroke()}l.strokeStyle=this.axisColor,l.strokeRect(s,n,o,i)}else{var f;this.style===w.STYLE.DOTSIZE?f=o*(this.dotSizeMinFraction/this.dotSizeMaxFraction):(this.style,w.STYLE.BARSIZE),l.strokeStyle=this.axisColor,l.fillStyle=this.dataColor.fill,l.beginPath(),l.moveTo(s,n),l.lineTo(r,n),l.lineTo(s+f,a),l.lineTo(s,a),l.closePath(),l.fill(),l.stroke()}var p,m,v=e?this.valueRange.min:this.zRange.min,g=e?this.valueRange.max:this.zRange.max,y=new N(v,g,(g-v)/5,!0);for(y.start(!0);!y.end();)d=a-(y.getCurrent()-v)/(g-v)*i,p=new P(s-5,d),m=new P(s,d),this._line(l,p,m),l.textAlign="right",l.textBaseline="middle",l.fillStyle=this.axisColor,l.fillText(y.getCurrent(),s-10,d),y.next();l.textAlign="right",l.textBaseline="top";var b=this.legendLabel;l.fillText(b,r,a+this.margin)}},w.prototype._redrawFilter=function(){var t=this.dataGroup.dataFilter,e=this.frame.filter;if(e.innerHTML="",t){var i={visible:this.showAnimationControls},n=new s(e,i);e.slider=n,e.style.padding="10px",n.setValues(t.values),n.setPlayInterval(this.animationInterval);var o=this;n.setOnChangeCallback(function(){var t=o.dataGroup.dataFilter,e=n.getIndex();t.selectValue(e),o.dataPoints=t._getDataPoints(),o.redraw()})}else e.slider=void 0},w.prototype._redrawSlider=function(){void 0!==this.frame.filter.slider&&this.frame.filter.slider.redraw()},w.prototype._redrawInfo=function(){var t=this.dataGroup.getInfo();if(void 0!==t){var e=this._getContext();e.font="14px arial",e.lineStyle="gray",e.fillStyle="gray",e.textAlign="left",e.textBaseline="top";var i=this.margin,n=this.margin;e.fillText(t,i,n)}},w.prototype._line=function(t,e,i,n){void 0!==n&&(t.strokeStyle=n),t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(i.x,i.y),t.stroke()},w.prototype.drawAxisLabelX=function(t,e,i,n,o){void 0===o&&(o=0);var r=this._convert3Dto2D(e);0<Math.cos(2*n)?(t.textAlign="center",t.textBaseline="top",r.y+=o):(Math.sin(2*n)<0?t.textAlign="right":t.textAlign="left",t.textBaseline="middle"),t.fillStyle=this.axisColor,t.fillText(i,r.x,r.y)},w.prototype.drawAxisLabelY=function(t,e,i,n,o){void 0===o&&(o=0);var r=this._convert3Dto2D(e);Math.cos(2*n)<0?(t.textAlign="center",t.textBaseline="top",r.y+=o):(0<Math.sin(2*n)?t.textAlign="right":t.textAlign="left",t.textBaseline="middle"),t.fillStyle=this.axisColor,t.fillText(i,r.x,r.y)},w.prototype.drawAxisLabelZ=function(t,e,i,n){void 0===n&&(n=0);var o=this._convert3Dto2D(e);t.textAlign="right",t.textBaseline="middle",t.fillStyle=this.axisColor,t.fillText(i,o.x-n,o.y)},w.prototype._line3d=function(t,e,i,n){var o=this._convert3Dto2D(e),r=this._convert3Dto2D(i);this._line(t,o,r,n)},w.prototype._redrawAxis=function(){var t,e,i,n,o,r,s,a,l,d,h=this._getContext();h.font=24/this.camera.getArmLength()+"px arial";var u,c,f,p=.025/this.scale.x,m=.025/this.scale.y,v=5/this.camera.getArmLength(),g=this.camera.getArmRotation().horizontal,y=new P(Math.cos(g),Math.sin(g)),b=this.xRange,w=this.yRange,_=this.zRange;for(h.lineWidth=1,n=void 0===this.defaultXStep,(i=new N(b.min,b.max,this.xStep,n)).start(!0);!i.end();){var x=i.getCurrent();if(this.showGrid?(t=new A(x,w.min,_.min),e=new A(x,w.max,_.min),this._line3d(h,t,e,this.gridColor)):this.showXAxis&&(t=new A(x,w.min,_.min),e=new A(x,w.min+p,_.min),this._line3d(h,t,e,this.axisColor),t=new A(x,w.max,_.min),e=new A(x,w.max-p,_.min),this._line3d(h,t,e,this.axisColor)),this.showXAxis){s=0<y.x?w.min:w.max,u=new A(x,s,_.min);var k="  "+this.xValueLabel(x)+"  ";this.drawAxisLabelX(h,u,k,g,v)}i.next()}for(h.lineWidth=1,n=void 0===this.defaultYStep,(i=new N(w.min,w.max,this.yStep,n)).start(!0);!i.end();){var S=i.getCurrent();if(this.showGrid?(t=new A(b.min,S,_.min),e=new A(b.max,S,_.min),this._line3d(h,t,e,this.gridColor)):this.showYAxis&&(t=new A(b.min,S,_.min),e=new A(b.min+m,S,_.min),this._line3d(h,t,e,this.axisColor),t=new A(b.max,S,_.min),e=new A(b.max-m,S,_.min),this._line3d(h,t,e,this.axisColor)),this.showYAxis){r=0<y.y?b.min:b.max,u=new A(r,S,_.min);var E="  "+this.yValueLabel(S)+"  ";this.drawAxisLabelY(h,u,E,g,v)}i.next()}if(this.showZAxis){for(h.lineWidth=1,n=void 0===this.defaultZStep,(i=new N(_.min,_.max,this.zStep,n)).start(!0),r=0<y.x?b.min:b.max,s=y.y<0?w.min:w.max;!i.end();){var T=i.getCurrent(),D=new A(r,s,T),C=this._convert3Dto2D(D);e=new P(C.x-v,C.y),this._line(h,C,e,this.axisColor);var M=this.zValueLabel(T)+" ";this.drawAxisLabelZ(h,D,M,5),i.next()}h.lineWidth=1,t=new A(r,s,_.min),e=new A(r,s,_.max),this._line3d(h,t,e,this.axisColor)}this.showXAxis&&(h.lineWidth=1,c=new A(b.min,w.min,_.min),f=new A(b.max,w.min,_.min),this._line3d(h,c,f,this.axisColor),c=new A(b.min,w.max,_.min),f=new A(b.max,w.max,_.min),this._line3d(h,c,f,this.axisColor));this.showYAxis&&(h.lineWidth=1,t=new A(b.min,w.min,_.min),e=new A(b.min,w.max,_.min),this._line3d(h,t,e,this.axisColor),t=new A(b.max,w.min,_.min),e=new A(b.max,w.max,_.min),this._line3d(h,t,e,this.axisColor));var O=this.xLabel;0<O.length&&this.showXAxis&&(d=.1/this.scale.y,r=(b.max+3*b.min)/4,s=0<y.x?w.min-d:w.max+d,o=new A(r,s,_.min),this.drawAxisLabelX(h,o,O,g));var L=this.yLabel;0<L.length&&this.showYAxis&&(l=.1/this.scale.x,r=0<y.y?b.min-l:b.max+l,s=(w.max+3*w.min)/4,o=new A(r,s,_.min),this.drawAxisLabelY(h,o,L,g));var I=this.zLabel;0<I.length&&this.showZAxis&&(r=0<y.x?b.min:b.max,s=y.y<0?w.min:w.max,a=(_.max+3*_.min)/4,o=new A(r,s,a),this.drawAxisLabelZ(h,o,I,30))},w.prototype._hsv2rgb=function(t,e,i){var n,o,r,s,a,l;switch(s=i*e,a=Math.floor(t/60),l=s*(1-Math.abs(t/60%2-1)),a){case 0:n=s,o=l,r=0;break;case 1:n=l,o=s,r=0;break;case 2:n=0,o=s,r=l;break;case 3:n=0,o=l,r=s;break;case 4:n=l,o=0,r=s;break;case 5:n=s,o=0,r=l;break;default:r=o=n=0}return"RGB("+parseInt(255*n)+","+parseInt(255*o)+","+parseInt(255*r)+")"},w.prototype._getStrokeWidth=function(t){return void 0!==t?this.showPerspective?1/-t.trans.z*this.dataColor.strokeWidth:-this.eye.z/this.camera.getArmLength()*this.dataColor.strokeWidth:this.dataColor.strokeWidth},w.prototype._redrawBar=function(t,e,i,n,o,r){var s,a=this,l=e.point,d=this.zRange.min,h=[{point:new A(l.x-i,l.y-n,l.z)},{point:new A(l.x+i,l.y-n,l.z)},{point:new A(l.x+i,l.y+n,l.z)},{point:new A(l.x-i,l.y+n,l.z)}],u=[{point:new A(l.x-i,l.y-n,d)},{point:new A(l.x+i,l.y-n,d)},{point:new A(l.x+i,l.y+n,d)},{point:new A(l.x-i,l.y+n,d)}];h.forEach(function(t){t.screen=a._convert3Dto2D(t.point)}),u.forEach(function(t){t.screen=a._convert3Dto2D(t.point)});var c=[{corners:h,center:A.avg(u[0].point,u[2].point)},{corners:[h[0],h[1],u[1],u[0]],center:A.avg(u[1].point,u[0].point)},{corners:[h[1],h[2],u[2],u[1]],center:A.avg(u[2].point,u[1].point)},{corners:[h[2],h[3],u[3],u[2]],center:A.avg(u[3].point,u[2].point)},{corners:[h[3],h[0],u[0],u[3]],center:A.avg(u[0].point,u[3].point)}];e.surfaces=c;for(var f=0;f<c.length;f++){s=c[f];var p=this._convertPointToTranslation(s.center);s.dist=this.showPerspective?p.length():-p.z}c.sort(function(t,e){return e.dist-t.dist||(t.corners===h?1:e.corners===h?-1:0)}),t.lineWidth=this._getStrokeWidth(e),t.strokeStyle=r,t.fillStyle=o;for(var m=2;m<c.length;m++)s=c[m],this._polygon(t,s.corners)},w.prototype._polygon=function(t,e,i,n){if(!(e.length<2)){void 0!==i&&(t.fillStyle=i),void 0!==n&&(t.strokeStyle=n),t.beginPath(),t.moveTo(e[0].screen.x,e[0].screen.y);for(var o=1;o<e.length;++o){var r=e[o];t.lineTo(r.screen.x,r.screen.y)}t.closePath(),t.fill(),t.stroke()}},w.prototype._drawCircle=function(t,e,i,n,o){var r=this._calcRadius(e,o);t.lineWidth=this._getStrokeWidth(e),t.strokeStyle=n,t.fillStyle=i,t.beginPath(),t.arc(e.screen.x,e.screen.y,r,0,2*Math.PI,!0),t.fill(),t.stroke()},w.prototype._getColorsRegular=function(t){var e=240*(1-(t.point.z-this.zRange.min)*this.scale.z/this.verticalRatio);return{fill:this._hsv2rgb(e,1,1),border:this._hsv2rgb(e,1,.8)}},w.prototype._getColorsColor=function(t){var e,i;if("string"==typeof t.point.value)e=t.point.value,i=t.point.value;else{var n=240*(1-(t.point.value-this.valueRange.min)*this.scale.value);e=this._hsv2rgb(n,1,1),i=this._hsv2rgb(n,1,.8)}return{fill:e,border:i}},w.prototype._getColorsSize=function(){return{fill:this.dataColor.fill,border:this.dataColor.stroke}},w.prototype._calcRadius=function(t,e){var i;return void 0===e&&(e=this._dotSize()),(i=this.showPerspective?e/-t.trans.z:e*(-this.eye.z/this.camera.getArmLength()))<0&&(i=0),i},w.prototype._redrawBarGraphPoint=function(t,e){var i=this.xBarWidth/2,n=this.yBarWidth/2,o=this._getColorsRegular(e);this._redrawBar(t,e,i,n,o.fill,o.border)},w.prototype._redrawBarColorGraphPoint=function(t,e){var i=this.xBarWidth/2,n=this.yBarWidth/2,o=this._getColorsColor(e);this._redrawBar(t,e,i,n,o.fill,o.border)},w.prototype._redrawBarSizeGraphPoint=function(t,e){var i=(e.point.value-this.valueRange.min)/this.valueRange.range(),n=this.xBarWidth/2*(.8*i+.2),o=this.yBarWidth/2*(.8*i+.2),r=this._getColorsSize();this._redrawBar(t,e,n,o,r.fill,r.border)},w.prototype._redrawDotGraphPoint=function(t,e){var i=this._getColorsRegular(e);this._drawCircle(t,e,i.fill,i.border)},w.prototype._redrawDotLineGraphPoint=function(t,e){var i=this._convert3Dto2D(e.bottom);t.lineWidth=1,this._line(t,i,e.screen,this.gridColor),this._redrawDotGraphPoint(t,e)},w.prototype._redrawDotColorGraphPoint=function(t,e){var i=this._getColorsColor(e);this._drawCircle(t,e,i.fill,i.border)},w.prototype._redrawDotSizeGraphPoint=function(t,e){var i=this._dotSize(),n=(e.point.value-this.valueRange.min)/this.valueRange.range(),o=i*this.dotSizeMinFraction,r=o+(i*this.dotSizeMaxFraction-o)*n,s=this._getColorsSize();this._drawCircle(t,e,s.fill,s.border,r)},w.prototype._redrawSurfaceGraphPoint=function(t,e){var i=e.pointRight,n=e.pointTop,o=e.pointCross;if(void 0!==e&&void 0!==i&&void 0!==n&&void 0!==o){var r,s,a=!0;if(this.showGrayBottom||this.showShadow){var l=A.subtract(o.trans,e.trans),d=A.subtract(n.trans,i.trans),h=A.crossProduct(l,d),u=h.length();a=0<h.z}if(a){var c,f=240*(1-((e.point.z+i.point.z+n.point.z+o.point.z)/4-this.zRange.min)*this.scale.z/this.verticalRatio);s=this.showShadow?(c=Math.min(1+h.x/u/2,1),r=this._hsv2rgb(f,1,c)):(c=1,r=this._hsv2rgb(f,1,c),this.axisColor)}else r="gray",s=this.axisColor;t.lineWidth=this._getStrokeWidth(e);var p=[e,i,o,n];this._polygon(t,p,r,s)}},w.prototype._drawGridLine=function(t,e,i){if(void 0!==e&&void 0!==i){var n=240*(1-((e.point.z+i.point.z)/2-this.zRange.min)*this.scale.z/this.verticalRatio);t.lineWidth=2*this._getStrokeWidth(e),t.strokeStyle=this._hsv2rgb(n,1,1),this._line(t,e.screen,i.screen)}},w.prototype._redrawGridGraphPoint=function(t,e){this._drawGridLine(t,e,e.pointRight),this._drawGridLine(t,e,e.pointTop)},w.prototype._redrawLineGraphPoint=function(t,e){void 0!==e.pointNext&&(t.lineWidth=this._getStrokeWidth(e),t.strokeStyle=this.dataColor.stroke,this._line(t,e.screen,e.pointNext.screen))},w.prototype._redrawDataGraph=function(){var t,e=this._getContext();if(!(void 0===this.dataPoints||this.dataPoints.length<=0))for(this._calcTranslations(this.dataPoints),t=0;t<this.dataPoints.length;t++){var i=this.dataPoints[t];this._pointDrawingMethod.call(this,e,i)}},w.prototype._storeMousePosition=function(t){this.startMouseX=u(t),this.startMouseY=c(t),this._startCameraOffset=this.camera.getOffset()},w.prototype._onMouseDown=function(t){if(t=t||window.event,this.leftButtonDown&&this._onMouseUp(t),this.leftButtonDown=t.which?1===t.which:1===t.button,this.leftButtonDown||this.touchDown){this._storeMousePosition(t),this.startStart=new Date(this.start),this.startEnd=new Date(this.end),this.startArmRotation=this.camera.getArmRotation(),this.frame.style.cursor="move";var e=this;this.onmousemove=function(t){e._onMouseMove(t)},this.onmouseup=function(t){e._onMouseUp(t)},f.addEventListener(document,"mousemove",e.onmousemove),f.addEventListener(document,"mouseup",e.onmouseup),f.preventDefault(t)}},w.prototype._onMouseMove=function(t){this.moving=!0,t=t||window.event;var e=parseFloat(u(t))-this.startMouseX,i=parseFloat(c(t))-this.startMouseY;if(t&&!0===t.ctrlKey){var n=.5*this.frame.clientWidth,o=.5*this.frame.clientHeight,r=(this._startCameraOffset.x||0)-e/n*this.camera.armLength*.8,s=(this._startCameraOffset.y||0)+i/o*this.camera.armLength*.8;this.camera.setOffset(r,s),this._storeMousePosition(t)}else{var a=this.startArmRotation.horizontal+e/200,l=this.startArmRotation.vertical+i/200,d=Math.sin(4/360*2*Math.PI);Math.abs(Math.sin(a))<d&&(a=Math.round(a/Math.PI)*Math.PI-.001),Math.abs(Math.cos(a))<d&&(a=(Math.round(a/Math.PI-.5)+.5)*Math.PI-.001),Math.abs(Math.sin(l))<d&&(l=Math.round(l/Math.PI)*Math.PI),Math.abs(Math.cos(l))<d&&(l=(Math.round(l/Math.PI-.5)+.5)*Math.PI),this.camera.setArmRotation(a,l)}this.redraw();var h=this.getCameraPosition();this.emit("cameraPositionChange",h),f.preventDefault(t)},w.prototype._onMouseUp=function(t){this.frame.style.cursor="auto",this.leftButtonDown=!1,f.removeEventListener(document,"mousemove",this.onmousemove),f.removeEventListener(document,"mouseup",this.onmouseup),f.preventDefault(t)},w.prototype._onClick=function(t){if(this.onclick_callback){if(this.moving)this.moving=!1;else{var e=this.frame.getBoundingClientRect(),i=u(t)-e.left,n=c(t)-e.top,o=this._dataPointFromXY(i,n);o&&this.onclick_callback(o.point.data)}f.preventDefault(t)}},w.prototype._onTooltip=function(t){var e=this.frame.getBoundingClientRect(),i=u(t)-e.left,n=c(t)-e.top;if(this.showTooltip){if(this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.leftButtonDown)return void this._hideTooltip();if(this.tooltip&&this.tooltip.dataPoint){var o=this._dataPointFromXY(i,n);o!==this.tooltip.dataPoint&&(o?this._showTooltip(o):this._hideTooltip())}else{var r=this;this.tooltipTimeout=setTimeout(function(){r.tooltipTimeout=null;var t=r._dataPointFromXY(i,n);t&&r._showTooltip(t)},300)}}},w.prototype._onTouchStart=function(t){this.touchDown=!0;var e=this;this.ontouchmove=function(t){e._onTouchMove(t)},this.ontouchend=function(t){e._onTouchEnd(t)},f.addEventListener(document,"touchmove",e.ontouchmove),f.addEventListener(document,"touchend",e.ontouchend),this._onMouseDown(t)},w.prototype._onTouchMove=function(t){this._onMouseMove(t)},w.prototype._onTouchEnd=function(t){this.touchDown=!1,f.removeEventListener(document,"touchmove",this.ontouchmove),f.removeEventListener(document,"touchend",this.ontouchend),this._onMouseUp(t)},w.prototype._onWheel=function(t){var e=0;if((t=t||window.event).wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e){var i=this.camera.getArmLength()*(1-e/10);this.camera.setArmLength(i),this.redraw(),this._hideTooltip()}var n=this.getCameraPosition();this.emit("cameraPositionChange",n),f.preventDefault(t)},w.prototype._insideTriangle=function(t,e){function i(t){return 0<t?1:t<0?-1:0}var n=e[0],o=e[1],r=e[2],s=i((o.x-n.x)*(t.y-n.y)-(o.y-n.y)*(t.x-n.x)),a=i((r.x-o.x)*(t.y-o.y)-(r.y-o.y)*(t.x-o.x)),l=i((n.x-r.x)*(t.y-r.y)-(n.y-r.y)*(t.x-r.x));return!(0!=s&&0!=a&&s!=a||0!=a&&0!=l&&a!=l||0!=s&&0!=l&&s!=l)},w.prototype._dataPointFromXY=function(t,e){var i,n=null,o=null,r=null,s=new P(t,e);if(this.style===w.STYLE.BAR||this.style===w.STYLE.BARCOLOR||this.style===w.STYLE.BARSIZE)for(i=this.dataPoints.length-1;0<=i;i--){var a=(n=this.dataPoints[i]).surfaces;if(a)for(var l=a.length-1;0<=l;l--){var d=a[l].corners,h=[d[0].screen,d[1].screen,d[2].screen],u=[d[2].screen,d[3].screen,d[0].screen];if(this._insideTriangle(s,h)||this._insideTriangle(s,u))return n}}else for(i=0;i<this.dataPoints.length;i++){var c=(n=this.dataPoints[i]).screen;if(c){var f=Math.abs(t-c.x),p=Math.abs(e-c.y),m=Math.sqrt(f*f+p*p);(null===r||m<r)&&m<100&&(r=m,o=n)}}return o},w.prototype.hasBars=function(t){return t==w.STYLE.BAR||t==w.STYLE.BARCOLOR||t==w.STYLE.BARSIZE},w.prototype._showTooltip=function(t){var e,i,n;this.tooltip?(e=this.tooltip.dom.content,i=this.tooltip.dom.line,n=this.tooltip.dom.dot):(e=document.createElement("div"),(0,h.default)(e.style,{},this.tooltipStyle.content),e.style.position="absolute",i=document.createElement("div"),(0,h.default)(i.style,{},this.tooltipStyle.line),i.style.position="absolute",n=document.createElement("div"),(0,h.default)(n.style,{},this.tooltipStyle.dot),n.style.position="absolute",this.tooltip={dataPoint:null,dom:{content:e,line:i,dot:n}}),this._hideTooltip(),this.tooltip.dataPoint=t,"function"==typeof this.showTooltip?e.innerHTML=this.showTooltip(t.point):e.innerHTML="<table><tr><td>"+this.xLabel+":</td><td>"+t.point.x+"</td></tr><tr><td>"+this.yLabel+":</td><td>"+t.point.y+"</td></tr><tr><td>"+this.zLabel+":</td><td>"+t.point.z+"</td></tr></table>",e.style.left="0",e.style.top="0",this.frame.appendChild(e),this.frame.appendChild(i),this.frame.appendChild(n);var o=e.offsetWidth,r=e.offsetHeight,s=i.offsetHeight,a=n.offsetWidth,l=n.offsetHeight,d=t.screen.x-o/2;d=Math.min(Math.max(d,10),this.frame.clientWidth-10-o),i.style.left=t.screen.x+"px",i.style.top=t.screen.y-s+"px",e.style.left=d+"px",e.style.top=t.screen.y-s-r+"px",n.style.left=t.screen.x-a/2+"px",n.style.top=t.screen.y-l/2+"px"},w.prototype._hideTooltip=function(){if(this.tooltip)for(var t in this.tooltip.dataPoint=null,this.tooltip.dom)if(this.tooltip.dom.hasOwnProperty(t)){var e=this.tooltip.dom[t];e&&e.parentNode&&e.parentNode.removeChild(e)}},w.prototype.setCameraPosition=function(t){a.setCameraPosition(t,this),this.redraw()},w.prototype.setSize=function(t,e){this._setSize(t,e),this.redraw()},t.exports=w},function(t,e,i){i(163),t.exports=i(7).Object.assign},function(t,e,i){var n=i(17);n(n.S+n.F,"Object",{assign:i(164)})},function(t,e,i){var c=i(33),f=i(63),p=i(42),m=i(41),v=i(78),o=Object.assign;t.exports=!o||i(28)(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=o({},t)[i]||Object.keys(o({},e)).join("")!=n})?function(t,e){for(var i=m(t),n=arguments.length,o=1,r=f.f,s=p.f;o<n;)for(var a,l=v(arguments[o++]),d=r?c(l).concat(r(l)):c(l),h=d.length,u=0;u<h;)s.call(l,a=d[u++])&&(i[a]=l[a]);return i}:o},function(t,e,i){t.exports={default:i(166),__esModule:!0}},function(t,e,i){i(167),t.exports=i(7).Math.sign},function(t,e,i){var n=i(17);n(n.S,"Math",{sign:i(168)})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,i){t.exports={default:i(170),__esModule:!0}},function(t,e,i){i(171);var n=i(7).Object;t.exports=function(t,e,i){return n.defineProperty(t,e,i)}},function(t,e,i){var n=i(17);n(n.S+n.F*!i(21),"Object",{defineProperty:i(20).f})},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n="string",o="boolean",r="number",s={fill:{string:n},stroke:{string:n},strokeWidth:{number:r},__type__:{string:n,object:"object",undefined:"undefined"}},a={animationAutoStart:{boolean:o,undefined:"undefined"},animationInterval:{number:r},animationPreload:{boolean:o},axisColor:{string:n},backgroundColor:s,xBarWidth:{number:r,undefined:"undefined"},yBarWidth:{number:r,undefined:"undefined"},cameraPosition:{distance:{number:r},horizontal:{number:r},vertical:{number:r},__type__:{object:"object"}},xCenter:{string:n},yCenter:{string:n},dataColor:s,dotSizeMinFraction:{number:r},dotSizeMaxFraction:{number:r},dotSizeRatio:{number:r},filterLabel:{string:n},gridColor:{string:n},onclick:{function:"function"},keepAspectRatio:{boolean:o},xLabel:{string:n},yLabel:{string:n},zLabel:{string:n},legendLabel:{string:n},xMin:{number:r,undefined:"undefined"},yMin:{number:r,undefined:"undefined"},zMin:{number:r,undefined:"undefined"},xMax:{number:r,undefined:"undefined"},yMax:{number:r,undefined:"undefined"},zMax:{number:r,undefined:"undefined"},showAnimationControls:{boolean:o,undefined:"undefined"},showGrid:{boolean:o},showLegend:{boolean:o,undefined:"undefined"},showPerspective:{boolean:o},showShadow:{boolean:o},showXAxis:{boolean:o},showYAxis:{boolean:o},showZAxis:{boolean:o},xStep:{number:r,undefined:"undefined"},yStep:{number:r,undefined:"undefined"},zStep:{number:r,undefined:"undefined"},style:{number:r,string:["bar","bar-color","bar-size","dot","dot-line","dot-color","dot-size","line","grid","surface"]},tooltip:{boolean:o,function:"function"},tooltipStyle:{content:{color:{string:n},background:{string:n},border:{string:n},borderRadius:{string:n},boxShadow:{string:n},padding:{string:n},__type__:{object:"object"}},line:{borderLeft:{string:n},height:{string:n},width:{string:n},__type__:{object:"object"}},dot:{border:{string:n},borderRadius:{string:n},height:{string:n},width:{string:n},__type__:{object:"object"}},__type__:{object:"object"}},xValueLabel:{function:"function"},yValueLabel:{function:"function"},zValueLabel:{function:"function"},valueMax:{number:r,undefined:"undefined"},valueMin:{number:r,undefined:"undefined"},verticalRatio:{number:r},height:{string:n},width:{string:n},__type__:{object:"object"}};e.allOptions=a},function(t,e,i){function n(){this.dataTable=null}var a=i(11),l=i(12),r=i(174),d=i(96),o=i(94),s=i(34);n.prototype.initializeData=function(t,e,i){if(void 0!==e){var n;if(Array.isArray(e)&&(e=new a(e)),!(e instanceof a||e instanceof l))throw new Error("Array, DataSet, or DataView expected");if(0!=(n=e.get()).length){this.style=i,this.dataSet&&this.dataSet.off("*",this._onChange),this.dataSet=e,this.dataTable=n;var o=this;this._onChange=function(){t.setData(o.dataSet)},this.dataSet.on("*",this._onChange),this.colX="x",this.colY="y",this.colZ="z";var r=t.hasBars(i);if(r&&(void 0!==t.defaultXBarWidth?this.xBarWidth=t.defaultXBarWidth:this.xBarWidth=this.getSmallestDifference(n,this.colX)||1,void 0!==t.defaultYBarWidth?this.yBarWidth=t.defaultYBarWidth:this.yBarWidth=this.getSmallestDifference(n,this.colY)||1),this._initializeRange(n,this.colX,t,r),this._initializeRange(n,this.colY,t,r),this._initializeRange(n,this.colZ,t,!1),n[0].hasOwnProperty("style")){this.colValue="style";var s=this.getColumnRange(n,this.colValue);this._setRangeDefaults(s,t.defaultValueMin,t.defaultValueMax),this.valueRange=s}return this.getDataTable()[0].hasOwnProperty("filter")&&void 0===this.dataFilter&&(this.dataFilter=new d(this,"filter",t),this.dataFilter.setOnLoadCallback(function(){t.redraw()})),this.dataFilter?this.dataFilter._getDataPoints():this._getDataPoints(this.getDataTable())}}},n.prototype._collectRangeSettings=function(t,e){if(-1==["x","y","z"].indexOf(t))throw new Error("Column '"+t+"' invalid");var i=t.toUpperCase();return{barWidth:this[t+"BarWidth"],min:e["default"+i+"Min"],max:e["default"+i+"Max"],step:e["default"+i+"Step"],range_label:t+"Range",step_label:t+"Step"}},n.prototype._initializeRange=function(t,e,i,n){var o=this._collectRangeSettings(e,i),r=this.getColumnRange(t,e);n&&"z"!=e&&r.expand(o.barWidth/2),this._setRangeDefaults(r,o.min,o.max),this[o.range_label]=r,this[o.step_label]=void 0!==o.step?o.step:r.range()/5},n.prototype.getDistinctValues=function(t,e){void 0===e&&(e=this.dataTable);for(var i=[],n=0;n<e.length;n++){var o=e[n][t]||0;-1===i.indexOf(o)&&i.push(o)}return i.sort(function(t,e){return t-e})},n.prototype.getSmallestDifference=function(t,e){for(var i=this.getDistinctValues(t,e),n=null,o=1;o<i.length;o++){var r=i[o]-i[o-1];(null==n||r<n)&&(n=r)}return n},n.prototype.getColumnRange=function(t,e){for(var i=new r,n=0;n<t.length;n++){var o=t[n][e];i.adjust(o)}return i},n.prototype.getNumberOfRows=function(){return this.dataTable.length},n.prototype._setRangeDefaults=function(t,e,i){void 0!==e&&(t.min=e),void 0!==i&&(t.max=i),t.max<=t.min&&(t.max=t.min+1)},n.prototype.getDataTable=function(){return this.dataTable},n.prototype.getDataSet=function(){return this.dataSet},n.prototype.getDataPoints=function(t){for(var e=[],i=0;i<t.length;i++){var n=new s;n.x=t[i][this.colX]||0,n.y=t[i][this.colY]||0,n.z=t[i][this.colZ]||0,n.data=t[i],void 0!==this.colValue&&(n.value=t[i][this.colValue]||0);var o={};o.point=n,o.bottom=new s(n.x,n.y,this.zRange.min),o.trans=void 0,o.screen=void 0,e.push(o)}return e},n.prototype.initDataAsMatrix=function(t){var e,i,n,o,r=this.getDistinctValues(this.colX,t),s=this.getDistinctValues(this.colY,t),a=this.getDataPoints(t),l=[];for(n=0;n<a.length;n++){o=a[n];var d=r.indexOf(o.point.x),h=s.indexOf(o.point.y);void 0===l[d]&&(l[d]=[]),l[d][h]=o}for(e=0;e<l.length;e++)for(i=0;i<l[e].length;i++)l[e][i]&&(l[e][i].pointRight=e<l.length-1?l[e+1][i]:void 0,l[e][i].pointTop=i<l[e].length-1?l[e][i+1]:void 0,l[e][i].pointCross=e<l.length-1&&i<l[e].length-1?l[e+1][i+1]:void 0);return a},n.prototype.getInfo=function(){var t=this.dataFilter;if(t)return t.getLabel()+": "+t.getSelectedValue()},n.prototype.reload=function(){this.dataTable&&this.setData(this.dataTable)},n.prototype._getDataPoints=function(t){var e=[];if(this.style===o.STYLE.GRID||this.style===o.STYLE.SURFACE)e=this.initDataAsMatrix(t);else if(this._checkValueField(t),e=this.getDataPoints(t),this.style===o.STYLE.LINE)for(var i=0;i<e.length;i++)0<i&&(e[i-1].pointNext=e[i]);return e},n.prototype._checkValueField=function(t){if(this.style===o.STYLE.BARCOLOR||this.style===o.STYLE.BARSIZE||this.style===o.STYLE.DOTCOLOR||this.style===o.STYLE.DOTSIZE){if(void 0===this.colValue)throw new Error("Expected data to have  field 'style'  for graph style '"+this.style+"'");if(void 0===t[0][this.colValue])throw new Error("Expected data to have  field '"+this.colValue+"'  for graph style '"+this.style+"'")}},t.exports=n},function(t,e,i){function n(){this.min=void 0,this.max=void 0}n.prototype.adjust=function(t){void 0!==t&&((void 0===this.min||this.min>t)&&(this.min=t),(void 0===this.max||this.max<t)&&(this.max=t))},n.prototype.combine=function(t){this.add(t.min),this.add(t.max)},n.prototype.expand=function(t){if(void 0!==t){var e=this.min-t,i=this.max+t;if(i<e)throw new Error("Passed expansion value makes range invalid");this.min=e,this.max=i}},n.prototype.range=function(){return this.max-this.min},n.prototype.center=function(){return(this.min+this.max)/2},t.exports=n},function(t,e,i){var n,o,r;o=[],void 0!==(r="function"==typeof(n=function(){var h=null;return function o(n,t){function e(t){return t.match(/[^ ]+/g)}function r(t){if("hammer.input"!==t.type){if(t.srcEvent._handled||(t.srcEvent._handled={}),t.srcEvent._handled[t.type])return;t.srcEvent._handled[t.type]=!0}var e=!1;t.stopPropagation=function(){e=!0};var i=t.srcEvent.stopPropagation.bind(t.srcEvent);"function"==typeof i&&(t.srcEvent.stopPropagation=function(){i(),t.stopPropagation()}),t.firstTarget=h;for(var n=h;n&&!e;){var o=n.hammer;if(o)for(var r,s=0;s<o.length;s++){if(r=o[s]._handlers[t.type])for(var a=0;a<r.length&&!e;a++){r[a](t)}}n=n.parentNode}}var s=t||{preventDefault:!1};if(n.Manager){var a=n,i=function t(e,i){var n=Object.create(s);return i&&a.assign(n,i),o(new a(e,n),n)};return a.assign(i,a),i.Manager=function(t,e){var i=Object.create(s);return e&&a.assign(i,e),o(new a.Manager(t,i),i)},i}var l=Object.create(n),d=n.element;return d.hammer||(d.hammer=[]),d.hammer.push(l),n.on("hammer.input",function(t){!0!==s.preventDefault&&s.preventDefault!==t.pointerType||t.preventDefault(),t.isFirst&&(h=t.target)}),l._handlers={},l.on=function(t,i){return e(t).forEach(function(t){var e=l._handlers[t];e||(l._handlers[t]=e=[],n.on(t,r)),e.push(i)}),l},l.off=function(t,i){return e(t).forEach(function(t){var e=l._handlers[t];e&&(e=i?e.filter(function(t){return t!==i}):[],e.length>0?l._handlers[t]=e:(n.off(t,r),delete l._handlers[t]))}),l},l.emit=function(t,e){h=e.target,n.emit(t,e)},l.destroy=function(){var t=n.element.hammer,e=t.indexOf(l);-1!==e&&t.splice(e,1),t.length||delete n.element.hammer,l._handlers={},n.destroy()},l}})?n.apply(e,o):n)&&(t.exports=r)},function(Yt,Ut,Wt){var Vt;!function(r,o,t,u){function a(t,e,i){return setTimeout(l(t,i),e)}function n(t,e,i){return!!Array.isArray(t)&&(s(t,i[e],i),!0)}function s(t,e,i){var n;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==u)for(n=0;n<t.length;)e.call(i,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(i,t[n],n,t)}function e(n,t,e){var o="DEPRECATED METHOD: "+t+"\n"+e+" AT \n";return function(){var t=new Error("get-stack-trace"),e=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=r.console&&(r.console.warn||r.console.log);return i&&i.call(r.console,o,e),n.apply(this,arguments)}}function i(t,e,i){var n,o=e.prototype;(n=t.prototype=Object.create(o)).constructor=t,n._super=o,i&&K(n,i)}function l(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return Mr()(t)==tt?t.apply(e&&e[0]||u,e):t}function h(t,e){return t===u?e:t}function c(e,t,i){s(v(t),function(t){e.addEventListener(t,i,!1)})}function f(e,t,i){s(v(t),function(t){e.removeEventListener(t,i,!1)})}function p(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function m(t,e){return-1<t.indexOf(e)}function v(t){return t.trim().split(/\s+/g)}function g(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function y(t){return Array.prototype.slice.call(t,0)}function b(t,i,e){for(var n=[],o=[],r=0;r<t.length;){var s=i?t[r][i]:t[r];g(o,s)<0&&n.push(t[r]),o[r]=s,r++}return e&&(n=i?n.sort(function(t,e){return t[i]>e[i]}):n.sort()),n}function w(t,e){for(var i,n,o=e[0].toUpperCase()+e.slice(1),r=0;r<Q.length;){if((n=(i=Q[r])?i+o:e)in t)return n;r++}return u}function _(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}function x(e,t){var i=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){d(e.options.enable,[e])&&i.handler(t)},this.init()}function k(t,e,i){var n=i.pointers.length,o=i.changedPointers.length,r=e&ut&&n-o==0,s=e&(ct|ft)&&n-o==0;i.isFirst=!!r,i.isFinal=!!s,r&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,n=e.pointers,o=n.length;i.firstInput||(i.firstInput=S(e)),1<o&&!i.firstMultiple?i.firstMultiple=S(e):1===o&&(i.firstMultiple=!1);var r=i.firstInput,s=i.firstMultiple,a=s?s.center:r.center,l=e.center=E(n);e.timeStamp=nt(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=M(a,l),e.distance=C(a,l),function(t,e){var i=e.center,n=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};e.eventType!==ut&&r.eventType!==ct||(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=o.x+(i.x-n.x),e.deltaY=o.y+(i.y-n.y)}(i,e),e.offsetDirection=D(e.deltaX,e.deltaY);var d=T(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=d.x,e.overallVelocityY=d.y,e.overallVelocity=it(d.x)>it(d.y)?d.x:d.y,e.scale=s?function(t,e){return C(e[0],e[1],kt)/C(t[0],t[1],kt)}(s.pointers,n):1,e.rotation=s?function(t,e){return M(e[1],e[0],kt)+M(t[1],t[0],kt)}(s.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,n,o,r,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(e.eventType!=ft&&(ht<a||s.velocity===u)){var l=e.deltaX-s.deltaX,d=e.deltaY-s.deltaY,h=T(a,l,d);n=h.x,o=h.y,i=it(h.x)>it(h.y)?h.x:h.y,r=D(l,d),t.lastInterval=e}else i=s.velocity,n=s.velocityX,o=s.velocityY,r=s.direction;e.velocity=i,e.velocityX=n,e.velocityY=o,e.direction=r}(i,e);var h=t.element;p(e.srcEvent.target,h)&&(h=e.srcEvent.target),e.target=h}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function S(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:et(t.pointers[i].clientX),clientY:et(t.pointers[i].clientY)},i++;return{timeStamp:nt(),pointers:e,center:E(e),deltaX:t.deltaX,deltaY:t.deltaY}}function E(t){var e=t.length;if(1===e)return{x:et(t[0].clientX),y:et(t[0].clientY)};for(var i=0,n=0,o=0;o<e;)i+=t[o].clientX,n+=t[o].clientY,o++;return{x:et(i/e),y:et(n/e)}}function T(t,e,i){return{x:e/t||0,y:i/t||0}}function D(t,e){return t===e?pt:it(t)>=it(e)?t<0?mt:vt:e<0?gt:yt}function C(t,e,i){var n=e[(i=i||xt)[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return Math.sqrt(n*n+o*o)}function M(t,e,i){var n=e[(i=i||xt)[0]]-t[i[0]],o=e[i[1]]-t[i[1]];return 180*Math.atan2(o,n)/Math.PI}function O(){this.evEl=Et,this.evWin=Tt,this.pressed=!1,x.apply(this,arguments)}function L(){this.evEl=Mt,this.evWin=Ot,x.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function I(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,x.apply(this,arguments)}function A(){this.evTarget=At,this.targetIds={},x.apply(this,arguments)}function P(){x.apply(this,arguments);var t=l(this.handler,this);this.touch=new A(this.manager,t),this.mouse=new O(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function N(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var n=this.lastTouches;setTimeout(function(){var t=n.indexOf(i);-1<t&&n.splice(t,1)},Pt)}}function j(t,e){this.manager=t,this.set(e)}function B(t){this.options=K({},this.defaults,t||{}),this.id=st++,this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=qt,this.simultaneous={},this.requireFail=[]}function R(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function F(t){return t==yt?"down":t==gt?"up":t==mt?"left":t==vt?"right":""}function z(t,e){var i=e.manager;return i?i.get(t):t}function H(){B.apply(this,arguments)}function q(){H.apply(this,arguments),this.pX=null,this.pY=null}function Y(){H.apply(this,arguments)}function U(){B.apply(this,arguments),this._timer=null,this._input=null}function W(){H.apply(this,arguments)}function V(){H.apply(this,arguments)}function G(){B.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function X(t,e){return(e=e||{}).recognizers=h(e.recognizers,X.defaults.preset),new J(t,e)}function J(t,e){this.options=K({},X.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=function(t){return new(t.options.inputClass||(lt?L:dt?A:at?P:O))(t,k)}(this),this.touchAction=new j(this,this.options.touchAction),Z(this,!0),s(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Z(i,n){var o,r=i.element;r.style&&(s(i.options.cssProps,function(t,e){o=w(r.style,e),n?(i.oldCssProps[o]=r.style[o],r.style[o]=t):r.style[o]=i.oldCssProps[o]||""}),n||(i.oldCssProps={}))}var K,Q=["","webkit","Moz","MS","ms","o"],$=o.createElement("div"),tt="function",et=Math.round,it=Math.abs,nt=Date.now;K="function"!=typeof Object.assign?function(t){if(t===u||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(n!==u&&null!==n)for(var o in n)n.hasOwnProperty(o)&&(e[o]=n[o])}return e}:Object.assign;var ot=e(function(t,e,i){for(var n=Object.keys(e),o=0;o<n.length;)(!i||i&&t[n[o]]===u)&&(t[n[o]]=e[n[o]]),o++;return t},"extend","Use `assign`."),rt=e(function(t,e){return ot(t,e,!0)},"merge","Use `assign`."),st=1,at="ontouchstart"in r,lt=w(r,"PointerEvent")!==u,dt=at&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ht=25,ut=1,ct=4,ft=8,pt=1,mt=2,vt=4,gt=8,yt=16,bt=mt|vt,wt=gt|yt,_t=bt|wt,xt=["x","y"],kt=["clientX","clientY"];x.prototype={handler:function(){},init:function(){this.evEl&&c(this.element,this.evEl,this.domHandler),this.evTarget&&c(this.target,this.evTarget,this.domHandler),this.evWin&&c(_(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(_(this.element),this.evWin,this.domHandler)}};var St={mousedown:ut,mousemove:2,mouseup:ct},Et="mousedown",Tt="mousemove mouseup";i(O,x,{handler:function(t){var e=St[t.type];e&ut&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=ct),this.pressed&&(e&ct&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Dt={pointerdown:ut,pointermove:2,pointerup:ct,pointercancel:ft,pointerout:ft},Ct={2:"touch",3:"pen",4:"mouse",5:"kinect"},Mt="pointerdown",Ot="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&(Mt="MSPointerDown",Ot="MSPointerMove MSPointerUp MSPointerCancel"),i(L,x,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),o=Dt[n],r=Ct[t.pointerType]||t.pointerType,s="touch"==r,a=g(e,t.pointerId,"pointerId");o&ut&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):o&(ct|ft)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),i&&e.splice(a,1))}});var Lt={touchstart:ut,touchmove:2,touchend:ct,touchcancel:ft};i(I,x,{handler:function(t){var e=Lt[t.type];if(e===ut&&(this.started=!0),this.started){var i=function(t,e){var i=y(t.touches),n=y(t.changedTouches);return e&(ct|ft)&&(i=b(i.concat(n),"identifier",!0)),[i,n]}.call(this,t,e);e&(ct|ft)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var It={touchstart:ut,touchmove:2,touchend:ct,touchcancel:ft},At="touchstart touchmove touchend touchcancel";i(A,x,{handler:function(t){var e=It[t.type],i=function(t,e){var i=y(t.touches),n=this.targetIds;if(e&(2|ut)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var o,r,s=y(t.changedTouches),a=[],l=this.target;if(r=i.filter(function(t){return p(t.target,l)}),e===ut)for(o=0;o<r.length;)n[r[o].identifier]=!0,o++;for(o=0;o<s.length;)n[s[o].identifier]&&a.push(s[o]),e&(ct|ft)&&delete n[s[o].identifier],o++;return a.length?[b(r.concat(a),"identifier",!0),a]:void 0}.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});var Pt=2500;i(P,x,{handler:function(t,e,i){var n="touch"==i.pointerType,o="mouse"==i.pointerType;if(!(o&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)(function(t,e){t&ut?(this.primaryTouch=e.changedPointers[0].identifier,N.call(this,e)):t&(ct|ft)&&N.call(this,e)}).call(this,e,i);else if(o&&function(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var o=this.lastTouches[n],r=Math.abs(e-o.x),s=Math.abs(i-o.y);if(r<=25&&s<=25)return!0}return!1}.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Nt=w($.style,"touchAction"),jt=Nt!==u,Bt="manipulation",Rt="none",Ft="pan-x",zt="pan-y",Ht=function(){if(!jt)return!1;var e={},i=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){e[t]=!i||r.CSS.supports("touch-action",t)}),e}();j.prototype={set:function(t){"compute"==t&&(t=this.compute()),jt&&this.manager.element.style&&Ht[t]&&(this.manager.element.style[Nt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return s(this.manager.recognizers,function(t){d(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(t){if(m(t,Rt))return Rt;var e=m(t,Ft),i=m(t,zt);return e&&i?Rt:e||i?e?Ft:zt:m(t,Bt)?Bt:"auto"}(e.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(!this.manager.session.prevented){var n=this.actions,o=m(n,Rt)&&!Ht.none,r=m(n,zt)&&!Ht[zt],s=m(n,Ft)&&!Ht[Ft];if(o){var a=1===t.pointers.length,l=t.distance<2,d=t.deltaTime<250;if(a&&l&&d)return}return s&&r?void 0:o||r&&i&bt||s&&i&wt?this.preventSrc(e):void 0}e.preventDefault()},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var qt=1;B.prototype={defaults:{},set:function(t){return K(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(n(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=z(t,this)).id]||(e[t.id]=t).recognizeWith(this),this},dropRecognizeWith:function(t){return n(t,"dropRecognizeWith",this)||(t=z(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(n(t,"requireFailure",this))return this;var e=this.requireFail;return-1===g(e,t=z(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(n(t,"dropRequireFailure",this))return this;t=z(t,this);var e=g(this.requireFail,t);return-1<e&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(e){function t(t){i.manager.emit(t,e)}var i=this,n=this.state;n<8&&t(i.options.event+R(n)),t(i.options.event),e.additionalEvent&&t(e.additionalEvent),8<=n&&t(i.options.event+R(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|qt)))return!1;t++}return!0},recognize:function(t){var e=K({},t);if(!d(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=qt),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(){},getTouchAction:function(){},reset:function(){}},i(H,B,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=6&e,o=this.attrTest(t);return n&&(i&ft||!o)?16|e:n||o?i&ct?8|e:2&e?4|e:2:32}}),i(q,H,{defaults:{event:"pan",threshold:10,pointers:1,direction:_t},getTouchAction:function(){var t=this.options.direction,e=[];return t&bt&&e.push(zt),t&wt&&e.push(Ft),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,o=t.direction,r=t.deltaX,s=t.deltaY;return o&e.direction||(n=e.direction&bt?(o=0===r?pt:r<0?mt:vt,i=r!=this.pX,Math.abs(t.deltaX)):(o=0===s?pt:s<0?gt:yt,i=s!=this.pY,Math.abs(t.deltaY))),t.direction=o,i&&n>e.threshold&&o&e.direction},attrTest:function(t){return H.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=F(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),i(Y,H,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Rt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),i(U,B,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(ct|ft)&&!o)this.reset();else if(t.eventType&ut)this.reset(),this._timer=a(function(){this.state=8,this.tryEmit()},e.time,this);else if(t.eventType&ct)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&t.eventType&ct?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=nt(),this.manager.emit(this.options.event,this._input)))}}),i(W,H,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Rt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),i(V,H,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:bt|wt,pointers:1},getTouchAction:function(){return q.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(bt|wt)?e=t.overallVelocity:i&bt?e=t.overallVelocityX:i&wt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&it(e)>this.options.velocity&&t.eventType&ct},emit:function(t){var e=F(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),i(G,B,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Bt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&ut&&0===this.count)return this.failTimeout();if(n&&o&&i){if(t.eventType!=ct)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||C(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&r?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=a(function(){this.state=8,this.tryEmit()},e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=a(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),X.VERSION="2.0.7",X.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[W,{enable:!1}],[Y,{enable:!1},["rotate"]],[V,{direction:bt}],[q,{direction:bt},["swipe"]],[G],[G,{event:"doubletap",taps:2},["tap"]],[U]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},J.prototype={set:function(t){return K(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,o=e.curRecognizer;(!o||o&&8&o.state)&&(o=e.curRecognizer=null);for(var r=0;r<n.length;)i=n[r],2===e.stopped||o&&i!=o&&!i.canRecognizeWith(o)?i.reset():i.recognize(t),!o&&14&i.state&&(o=e.curRecognizer=i),r++}},get:function(t){if(t instanceof B)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(n(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),(t.manager=this).touchAction.update(),t},remove:function(t){if(n(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=g(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==u&&e!==u){var i=this.handlers;return s(v(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this}},off:function(t,e){if(t!==u){var i=this.handlers;return s(v(t),function(t){e?i[t]&&i[t].splice(g(i[t],e),1):delete i[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=o.createEvent("Event");i.initEvent(t,!0,!0),(i.gesture=e).target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&Z(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},K(X,{INPUT_START:ut,INPUT_MOVE:2,INPUT_END:ct,INPUT_CANCEL:ft,STATE_POSSIBLE:qt,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:pt,DIRECTION_LEFT:mt,DIRECTION_RIGHT:vt,DIRECTION_UP:gt,DIRECTION_DOWN:yt,DIRECTION_HORIZONTAL:bt,DIRECTION_VERTICAL:wt,DIRECTION_ALL:_t,Manager:J,Input:x,TouchAction:j,TouchInput:A,MouseInput:O,PointerEventInput:L,TouchMouseInput:P,SingleTouchInput:I,Recognizer:B,AttrRecognizer:H,Tap:G,Pan:q,Swipe:V,Pinch:Y,Rotate:W,Press:U,on:c,off:f,each:s,merge:rt,extend:ot,assign:K,inherit:i,bindFn:l,prefixed:w}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=X,(Vt=function(){return X}.call(Ut,Wt,Ut,Yt))!==u&&(Yt.exports=Vt)}(window,document)},function(t,e,i){e.util=i(2),e.DOMutil=i(14),e.DataSet=i(11),e.DataView=i(12),e.Queue=i(43),e.Timeline=i(178),e.Graph2d=i(180),e.timeline={Core:i(65),DateUtil:i(36),Range:i(64),stack:i(100),TimeStep:i(66),components:{items:{Item:i(38),BackgroundItem:i(103),BoxItem:i(101),PointItem:i(102),RangeItem:i(70)},BackgroundGroup:i(69),Component:i(16),CurrentTime:i(67),CustomTime:i(46),DataAxis:i(107),DataScale:i(108),GraphGroup:i(109),Group:i(68),ItemSet:i(99),Legend:i(112),LineGraph:i(106),TimeAxis:i(45)}},e.moment=i(9),e.Hammer=i(10),e.keycharm=i(35)},function(t,e,i){function l(t,e,i,n){if(!(this instanceof l))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(i)||i instanceof h||i instanceof u)&&i instanceof Object){var o=n;n=i,i=o}n&&n.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var r=this;if(this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:d,width:null,height:null,maxHeight:null,minHeight:null},this.options=v.deepExtend({},this.defaultOptions),this._create(t),!n||n&&void 0===n.rtl){this.dom.root.style.visibility="hidden";for(var s,a=this.dom.root;!s&&a;)s=window.getComputedStyle(a,null).direction,a=a.parentElement;this.options.rtl=s&&"rtl"==s.toLowerCase()}else this.options.rtl=n.rtl;this.options.rollingMode=n&&n.rollingMode,this.options.onInitialDrawComplete=n&&n.onInitialDrawComplete,this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale:function(){return r.timeAxis.step.scale},getStep:function(){return r.timeAxis.step.step},toScreen:r._toScreen.bind(r),toGlobalScreen:r._toGlobalScreen.bind(r),toTime:r._toTime.bind(r),toGlobalTime:r._toGlobalTime.bind(r)}},this.range=new c(this.body,this.options),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new g(this.body,this.options),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new y(this.body,this.options),this.components.push(this.currentTime),this.itemSet=new w(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null,this.dom.root.onclick=function(t){r.emit("click",r.getEventProperties(t))},this.dom.root.ondblclick=function(t){r.emit("doubleClick",r.getEventProperties(t))},this.dom.root.oncontextmenu=function(t){r.emit("contextmenu",r.getEventProperties(t))},this.dom.root.onmouseover=function(t){r.emit("mouseOver",r.getEventProperties(t))},window.PointerEvent?(this.dom.root.onpointerdown=function(t){r.emit("mouseDown",r.getEventProperties(t))},this.dom.root.onpointermove=function(t){r.emit("mouseMove",r.getEventProperties(t))},this.dom.root.onpointerup=function(t){r.emit("mouseUp",r.getEventProperties(t))}):(this.dom.root.onmousemove=function(t){r.emit("mouseMove",r.getEventProperties(t))},this.dom.root.onmousedown=function(t){r.emit("mouseDown",r.getEventProperties(t))},this.dom.root.onmouseup=function(t){r.emit("mouseUp",r.getEventProperties(t))}),this.initialFitDone=!1,this.on("changed",function(){if(null!=this.itemsData&&!this.options.rollingMode){if(!r.initialFitDone)if(r.initialFitDone=!0,null!=r.options.start||null!=r.options.end){if(null==r.options.start||null==r.options.end)var t=r.getItemRange();var e=null!=r.options.start?r.options.start:t.min,i=null!=r.options.end?r.options.end:t.max;r.setWindow(e,i,{animation:!1})}else r.fit({animation:!1});!r.initialDrawDone&&r.initialRangeChangeDone&&(r.initialDrawDone=!0,r.dom.root.style.visibility="visible",r.options.onInitialDrawComplete&&setTimeout(function(){return r.options.onInitialDrawComplete()},0))}}),n&&this.setOptions(n),i&&this.setGroups(i),e&&this.setItems(e),this._redraw()}function f(t){return v.convert(t.data.start,"Date").valueOf()}function p(t){var e=null!=t.data.end?t.data.end:t.data.start;return v.convert(e,"Date").valueOf()}function m(t,e){function i(){return"bottom"==l?r.height-e.top-e.height:e.top}var n=t.props.leftContainer.height,o=t.props.left.height,r=e.parent,s=r.top,a=!0,l=t.timeAxis.options.orientation.axis,d=-1*t._getScrollTop(),h=s+i(),u=e.height;return h<d?s+n<=s+i()+u&&(s+=i()-t.itemSet.options.margin.item.vertical):d+n<h+u?s+=i()+u-n+t.itemSet.options.margin.item.vertical:a=!1,{shouldScroll:a,scrollOffset:s=Math.min(s,o-n),itemTop:h}}var d=i(9),v=i(2),h=i(11),u=i(12),c=i(64),n=i(65),g=i(45),y=i(67),b=i(46),w=i(99),o=i(15).printStyle,r=i(105).allOptions,s=i(105).configureOptions,a=i(71).default,_=i(15).default;(l.prototype=new n)._createConfigurator=function(){return new a(this,this.dom.container,s)},l.prototype.redraw=function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()},l.prototype.setOptions=function(t){if(!0===_.validate(t,r)&&console.log("%cErrors have been found in the supplied options object.",o),n.prototype.setOptions.call(this,t),"type"in t&&t.type!==this.options.type){this.options.type=t.type;var e=this.itemsData;if(e){var i=this.getSelection();this.setItems(null),this.setItems(e),this.setSelection(i)}}},l.prototype.setItems=function(t){var e;e=t?t instanceof h||t instanceof u?t:new h(t,{type:{start:"Date",end:"Date"}}):null,this.itemsData=e,this.itemSet&&this.itemSet.setItems(e)},l.prototype.setGroups=function(t){var e;if(t){var i=function(t){return!1!==t.visible};e=t instanceof h||t instanceof u?new u(t,{filter:i}):new h(t.filter(i))}else e=null;this.groupsData=e,this.itemSet.setGroups(e)},l.prototype.setData=function(t){t&&t.groups&&this.setGroups(t.groups),t&&t.items&&this.setItems(t.items)},l.prototype.setSelection=function(t,e){this.itemSet&&this.itemSet.setSelection(t),e&&e.focus&&this.focus(t,e)},l.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[]},l.prototype.focus=function(t,e){if(this.itemsData&&null!=t){var i=Array.isArray(t)?t:[t],n=this.itemsData.getDataSet().get(i,{type:{start:"Date",end:"Date"}}),o=null,r=null;if(n.forEach(function(t){var e=t.start.valueOf(),i="end"in t?t.end.valueOf():t.start.valueOf();(null===o||e<o)&&(o=e),(null===r||r<i)&&(r=i)}),null!==o&&null!==r){var a=this,l=this.itemSet.items[i[0]],d=-1*this._getScrollTop(),h=null,s=function(){var t=m(a,l);t.shouldScroll&&t.itemTop!=h.itemTop&&(a._setScrollTop(-t.scrollOffset),a._redraw())},u=(o+r)/2,c=Math.max(this.range.end-this.range.start,1.1*(r-o)),f=!e||void 0===e.animation||e.animation;f||(h={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.setRange(u-c/2,u+c/2,{animation:f},function(){s(),setTimeout(s,100)},function(t,e,i){var n=m(a,l);if((h=h||n).itemTop!=n.itemTop||h.shouldScroll){h.itemTop!=n.itemTop&&n.shouldScroll&&(h=n,d=-1*a._getScrollTop());var o=d,r=h.scrollOffset,s=i?r:o+(r-o)*t;a._setScrollTop(-s),e||a._redraw()}})}}},l.prototype.fit=function(t,e){var i,n=!t||void 0===t.animation||t.animation,o=this.itemsData&&this.itemsData.getDataSet();1===o.length&&void 0===o.get()[0].end?(i=this.getDataRange(),this.moveTo(i.min.valueOf(),{animation:n},e)):(i=this.getItemRange(),this.range.setRange(i.min,i.max,{animation:n},e))},l.prototype.getItemRange=function(){var t=this.getDataRange(),r=null!==t.min?t.min.valueOf():null,s=null!==t.max?t.max.valueOf():null,a=null,l=null;if(null!=r&&null!=s){var e=s-r;e<=0&&(e=10);var d=e/this.props.center.width,i={},n=0;if(v.forEach(this.itemSet.items,function(t,e){t.groupShowing&&(i[e]=t.redraw(!0),n=i[e].length)}),0<n)for(var o=0;o<n;o++)v.forEach(i,function(t){t[o]()});if(v.forEach(this.itemSet.items,function(t){var e,i,n=f(t),o=p(t);i=this.options.rtl?(e=n-(t.getWidthRight()+10)*d,o+(t.getWidthLeft()+10)*d):(e=n-(t.getWidthLeft()+10)*d,o+(t.getWidthRight()+10)*d),e<r&&(r=e,a=t),s<i&&(s=i,l=t)}.bind(this)),a&&l){var h=a.getWidthLeft()+10,u=l.getWidthRight()+10,c=this.props.center.width-h-u;0<c&&(s=this.options.rtl?(r=f(a)-u*e/c,p(l)+h*e/c):(r=f(a)-h*e/c,p(l)+u*e/c))}}return{min:null!=r?new Date(r):null,max:null!=s?new Date(s):null}},l.prototype.getDataRange=function(){var n=null,o=null,t=this.itemsData&&this.itemsData.getDataSet();return t&&t.forEach(function(t){var e=v.convert(t.start,"Date").valueOf(),i=v.convert(null!=t.end?t.end:t.start,"Date").valueOf();(null===n||e<n)&&(n=e),(null===o||o<i)&&(o=i)}),{min:null!=n?new Date(n):null,max:null!=o?new Date(o):null}},l.prototype.getEventProperties=function(t){var e,i=t.center?t.center.x:t.clientX,n=t.center?t.center.y:t.clientY;e=this.options.rtl?v.getAbsoluteRight(this.dom.centerContainer)-i:i-v.getAbsoluteLeft(this.dom.centerContainer);var o=n-v.getAbsoluteTop(this.dom.centerContainer),r=this.itemSet.itemFromTarget(t),s=this.itemSet.groupFromTarget(t),a=b.customTimeFromTarget(t),l=this.itemSet.options.snap||null,d=this.body.util.getScale(),h=this.body.util.getStep(),u=this._toTime(e),c=l?l(u,d,h):u,f=v.getTarget(t),p=null;return null!=r?p="item":null!=a?p="custom-time":v.hasParent(f,this.timeAxis.dom.foreground)?p="axis":this.timeAxis2&&v.hasParent(f,this.timeAxis2.dom.foreground)?p="axis":v.hasParent(f,this.itemSet.dom.labelSet)?p="group-label":v.hasParent(f,this.currentTime.bar)?p="current-time":v.hasParent(f,this.dom.center)&&(p="background"),{event:t,item:r?r.id:null,group:s?s.groupId:null,what:p,pageX:t.srcEvent?t.srcEvent.pageX:t.pageX,pageY:t.srcEvent?t.srcEvent.pageY:t.pageY,x:e,y:o,time:u,snappedTime:c}},l.prototype.toggleRollingMode=function(){this.range.rolling?this.range.stopRolling():(null==this.options.rollingMode&&this.setOptions(this.options),this.range.startRolling())},t.exports=l},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var d=n(i(19)),o=n(i(0)),r=n(i(1)),s=i(10),a=i(37),v=i(2),l=((0,r.default)(h,[{key:"insertTo",value:function(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=t}},{key:"setCloseCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=t}},{key:"_isColorString",value:function(t){if("string"==typeof t)return{black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"}[t]}},{key:"setColor",value:function(t,e){var i=!(1<arguments.length&&void 0!==e)||e;if("none"!==t){var n=void 0,o=this._isColorString(t);if(void 0!==o&&(t=o),!0===v.isString(t)){if(!0===v.isValidRGB(t)){var r=t.substr(4).substr(0,t.length-5).split(",");n={r:r[0],g:r[1],b:r[2],a:1}}else if(!0===v.isValidRGBA(t)){var s=t.substr(5).substr(0,t.length-6).split(",");n={r:s[0],g:s[1],b:s[2],a:s[3]}}else if(!0===v.isValidHex(t)){var a=v.hexToRGB(t);n={r:a.r,g:a.g,b:a.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){var l=void 0!==t.a?t.a:"1.0";n={r:t.r,g:t.g,b:t.b,a:l}}if(void 0===n)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+(0,d.default)(t));this._setColor(n,i)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(t){var e=this;!0===(!(0<arguments.length&&void 0!==t)||t)&&(this.previousColor=v.extend({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(function(){void 0!==e.closeCallback&&(e.closeCallback(),e.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t,e){!0===(!(1<arguments.length&&void 0!==e)||e)&&(this.initialColor=v.extend({},t)),this.color=t;var i=v.RGBToHSV(t.r,t.g,t.b),n=2*Math.PI,o=this.r*i.s,r=this.centerCoordinates.x+o*Math.sin(n*i.h),s=this.centerCoordinates.y+o*Math.cos(n*i.h);this.colorPickerSelector.style.left=r-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=s-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var e=v.RGBToHSV(this.color.r,this.color.g,this.color.b);e.v=t/100;var i=v.HSVToRGB(e.h,e.s,e.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(t){var e=0<arguments.length&&void 0!==t?t:this.color,i=v.RGBToHSV(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var o=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,o,r),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-i.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),n.fill(),this.brightnessRange.value=100*i.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var t=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var e=document.createElement("DIV");e.style.color="red",e.style.fontWeight="bold",e.style.padding="10px",e.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(e)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(t){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(t){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var i=this;this.opacityRange.onchange=function(){i._setOpacity(this.value)},this.opacityRange.oninput=function(){i._setOpacity(this.value)},this.brightnessRange.onchange=function(){i._setBrightness(this.value)},this.brightnessRange.oninput=function(){i._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var e=this;this.drag={},this.pinch={},this.hammer=new s(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),a.onTouch(this.hammer,function(t){e._moveSelector(t)}),this.hammer.on("tap",function(t){e._moveSelector(t)}),this.hammer.on("panstart",function(t){e._moveSelector(t)}),this.hammer.on("panmove",function(t){e._moveSelector(t)}),this.hammer.on("panend",function(t){e._moveSelector(t)})}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var e=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,e,i);var n=void 0,o=void 0,r=void 0,s=void 0;this.centerCoordinates={x:.5*e,y:.5*i},this.r=.49*e;var a=2*Math.PI/360,l=1/this.r,d=void 0;for(r=0;r<360;r++)for(s=0;s<this.r;s++)n=this.centerCoordinates.x+s*Math.sin(a*r),o=this.centerCoordinates.y+s*Math.cos(a*r),d=v.HSVToRGB(r*(1/360),s*l,1),t.fillStyle="rgb("+d.r+","+d.g+","+d.b+")",t.fillRect(n-.5,o-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,e,i)}this.generated=!0}},{key:"_moveSelector",value:function(t){var e=this.colorPickerDiv.getBoundingClientRect(),i=t.center.x-e.left,n=t.center.y-e.top,o=.5*this.colorPickerDiv.clientHeight,r=.5*this.colorPickerDiv.clientWidth,s=i-r,a=n-o,l=Math.atan2(s,a),d=.98*Math.min(Math.sqrt(s*s+a*a),r),h=Math.cos(l)*d+o,u=Math.sin(l)*d+r;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=u-.5*this.colorPickerSelector.clientWidth+"px";var c=l/(2*Math.PI);c=c<0?c+1:c;var f=d/this.r,p=v.RGBToHSV(this.color.r,this.color.g,this.color.b);p.h=c,p.s=f;var m=v.HSVToRGB(p.h,p.s,p.v);m.a=this.color.a,this.color=m,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),h);function h(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;(0,o.default)(this,h),this.pixelRatio=t,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}e.default=l},function(t,e,i){function n(t,e,i,n){if(!(Array.isArray(i)||i instanceof a||i instanceof l)&&i instanceof Object){var o=n;n=i,i=o}n&&n.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var r=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:s,width:null,height:null,maxHeight:null,minHeight:null},this.options=c.deepExtend({},this.defaultOptions),this._create(t),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{toScreen:r._toScreen.bind(r),toGlobalScreen:r._toGlobalScreen.bind(r),toTime:r._toTime.bind(r),toGlobalTime:r._toGlobalTime.bind(r)}},this.range=new d(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new h(this.body),this.components.push(this.timeAxis),this.currentTime=new u(this.body),this.components.push(this.currentTime),this.linegraph=new p(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(t){r.emit("click",r.getEventProperties(t))}),this.on("doubletap",function(t){r.emit("doubleClick",r.getEventProperties(t))}),this.dom.root.oncontextmenu=function(t){r.emit("contextmenu",r.getEventProperties(t))},n&&this.setOptions(n),i&&this.setGroups(i),e&&this.setItems(e),this._redraw()}var s=i(9),c=i(2),a=i(11),l=i(12),d=i(64),o=i(65),h=i(45),u=i(67),f=i(46),p=i(106),r=i(15).printStyle,m=i(113).allOptions,v=i(113).configureOptions,g=i(71).default,y=i(15).default;(n.prototype=new o).setOptions=function(t){!0===y.validate(t,m)&&console.log("%cErrors have been found in the supplied options object.",r),o.prototype.setOptions.call(this,t)},n.prototype.setItems=function(t){var e,i=null==this.itemsData;if(e=t?t instanceof a||t instanceof l?t:new a(t,{type:{start:"Date",end:"Date"}}):null,this.itemsData=e,this.linegraph&&this.linegraph.setItems(e),i)if(null!=this.options.start||null!=this.options.end){var n=null!=this.options.start?this.options.start:null,o=null!=this.options.end?this.options.end:null;this.setWindow(n,o,{animation:!1})}else this.fit({animation:!1})},n.prototype.setGroups=function(t){var e;e=t?t instanceof a||t instanceof l?t:new a(t):null,this.groupsData=e,this.linegraph.setGroups(e)},n.prototype.getLegend=function(t,e,i){return void 0===e&&(e=15),void 0===i&&(i=15),void 0!==this.linegraph.groups[t]?this.linegraph.groups[t].getLegend(e,i):"cannot find group:'"+t+"'"},n.prototype.isGroupVisible=function(t){return void 0!==this.linegraph.groups[t]&&this.linegraph.groups[t].visible&&(void 0===this.linegraph.options.groups.visibility[t]||1==this.linegraph.options.groups.visibility[t])},n.prototype.getDataRange=function(){var t=null,e=null;for(var i in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(i)&&1==this.linegraph.groups[i].visible)for(var n=0;n<this.linegraph.groups[i].itemsData.length;n++){var o=this.linegraph.groups[i].itemsData[n],r=c.convert(o.x,"Date").valueOf();t=null==t?r:r<t?r:t,e=null==e?r:e<r?r:e}return{min:null!=t?new Date(t):null,max:null!=e?new Date(e):null}},n.prototype.getEventProperties=function(t){var e=t.center?t.center.x:t.clientX,i=t.center?t.center.y:t.clientY,n=e-c.getAbsoluteLeft(this.dom.centerContainer),o=i-c.getAbsoluteTop(this.dom.centerContainer),r=this._toTime(n),s=f.customTimeFromTarget(t),a=c.getTarget(t),l=null;c.hasParent(a,this.timeAxis.dom.foreground)?l="axis":this.timeAxis2&&c.hasParent(a,this.timeAxis2.dom.foreground)?l="axis":c.hasParent(a,this.linegraph.yAxisLeft.dom.frame)?l="data-axis":c.hasParent(a,this.linegraph.yAxisRight.dom.frame)?l="data-axis":c.hasParent(a,this.linegraph.legendLeft.dom.frame)?l="legend":c.hasParent(a,this.linegraph.legendRight.dom.frame)?l="legend":null!=s?l="custom-time":c.hasParent(a,this.currentTime.bar)?l="current-time":c.hasParent(a,this.dom.center)&&(l="background");var d=[],h=this.linegraph.yAxisLeft,u=this.linegraph.yAxisRight;return!h.hidden&&0<this.itemsData.length&&d.push(h.screenToValue(o)),!u.hidden&&0<this.itemsData.length&&d.push(u.screenToValue(o)),{event:t,what:l,pageX:t.srcEvent?t.srcEvent.pageX:t.pageX,pageY:t.srcEvent?t.srcEvent.pageY:t.pageY,x:n,y:o,time:r,value:d}},n.prototype._createConfigurator=function(){return new g(this,this.dom.container,v)},t.exports=n},function(t,i,e){i.util=e(2),i.DOMutil=e(14),i.DataSet=e(11),i.DataView=e(12),i.Queue=e(43),i.Network=e(182),i.network={Images:e(116),dotparser:e(114),gephiParser:e(115),allOptions:e(122)},i.network.convertDot=function(t){return i.network.dotparser.DOTToGraph(t)},i.network.convertGephi=function(t,e){return i.network.gephiParser.parseGephi(t,e)},i.moment=e(9),i.Hammer=e(10),i.keycharm=e(35)},function(t,e,i){function o(t,e,i){var n=this;if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:d,clickToUse:!1},r.extend(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this),once:this.once.bind(this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}}},this.bindEventListeners(),this.images=new h(function(){return n.body.emitter.emit("_requestRedraw")}),this.groups=new u,this.canvas=new g(this.body),this.selectionHandler=new w(this.body,this.canvas),this.interactionHandler=new b(this.body,this.canvas,this.selectionHandler),this.view=new y(this.body,this.canvas),this.renderer=new v(this.body,this.canvas),this.physics=new p(this.body),this.layoutEngine=new _(this.body),this.clustering=new m(this.body),this.manipulation=new x(this.body,this.canvas,this.selectionHandler),this.nodesHandler=new c(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new f(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new M(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(i),this.setData(e)}i(183);var n=i(44),r=i(2),s=i(114),a=i(115),l=i(97),d=i(184),h=i(116).default,u=i(186).default,c=i(187).default,f=i(214).default,p=i(220).default,m=i(227).default,v=i(229).default,g=i(230).default,y=i(231).default,b=i(232).default,w=i(234).default,_=i(235).default,x=i(237).default,k=i(71).default,S=i(15).default,E=i(15).printStyle,T=i(122),D=T.allOptions,C=T.configureOptions,M=i(238).default;n(o.prototype),o.prototype.setOptions=function(t){var e=this;if(void 0!==t){!0===S.validate(t,D)&&console.log("%cErrors have been found in the supplied options object.",E);if(r.selectiveDeepExtend(["locale","locales","clickToUse"],this.options,t),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),void 0!==t.groups&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new k(this,this.body.container,C,this.canvas.pixelRatio)),this.configurator.setOptions(t.configure)),this.configurator&&!0===this.configurator.options.enabled){var i={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};r.deepExtend(i.nodes,this.nodesHandler.options),r.deepExtend(i.edges,this.edgesHandler.options),r.deepExtend(i.layout,this.layoutEngine.options),r.deepExtend(i.interaction,this.selectionHandler.options),r.deepExtend(i.interaction,this.renderer.options),r.deepExtend(i.interaction,this.interactionHandler.options),r.deepExtend(i.manipulation,this.manipulation.options),r.deepExtend(i.physics,this.physics.options),r.deepExtend(i.global,this.canvas.options),r.deepExtend(i.global,this.options),this.configurator.setModuleOptions(i)}void 0!==t.clickToUse?!0===t.clickToUse?void 0===this.activator&&(this.activator=new l(this.canvas.frame),this.activator.on("change",function(){e.body.emitter.emit("activate")})):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},o.prototype._updateVisibleIndices=function(){var t=this.body.nodes,e=this.body.edges;for(var i in this.body.nodeIndices=[],this.body.edgeIndices=[],t)t.hasOwnProperty(i)&&(this.clustering._isClusteredNode(i)||!1!==t[i].options.hidden||this.body.nodeIndices.push(t[i].id));for(var n in e)if(e.hasOwnProperty(n)){var o=e[n],r=t[o.fromId],s=t[o.toId],a=void 0!==r&&void 0!==s;!this.clustering._isClusteredEdge(n)&&!1===o.options.hidden&&a&&!1===r.options.hidden&&!1===s.options.hidden&&this.body.edgeIndices.push(o.id)}},o.prototype.bindEventListeners=function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.edgesHandler._updateState(),t.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){t.clustering._updateState(),t._updateVisibleIndices(),t._updateValueRange(t.body.nodes),t._updateValueRange(t.body.edges),t.body.emitter.emit("startSimulation"),t.body.emitter.emit("_requestRedraw")})},o.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.log("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var e=s.DOTToGraph(t.dot);this.setData(e)}else if(t&&t.gephi){console.log("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var i=a.parseGephi(t.gephi);this.setData(i)}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},o.prototype.destroy=function(){for(var t in this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images,this.body.nodes)this.body.nodes.hasOwnProperty(t)&&delete this.body.nodes[t];for(var e in this.body.edges)this.body.edges.hasOwnProperty(e)&&delete this.body.edges[e];r.recursiveDOMDelete(this.body.container)},o.prototype._updateValueRange=function(t){var e,i=void 0,n=void 0,o=0;for(e in t)if(t.hasOwnProperty(e)){var r=t[e].getValue();void 0!==r&&(i=void 0===i?r:Math.min(r,i),n=void 0===n?r:Math.max(r,n),o+=r)}if(void 0!==i&&void 0!==n)for(e in t)t.hasOwnProperty(e)&&t[e].setValueRange(i,n,o)},o.prototype.isActive=function(){return!this.activator||this.activator.active},o.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},o.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},o.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},o.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},o.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},o.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},o.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},o.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},o.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},o.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},o.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},o.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},o.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},o.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},o.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},o.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},o.prototype.editNodeMode=function(){return console.log("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},o.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},o.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},o.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},o.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},o.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},o.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},o.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},o.prototype.getConnectedNodes=function(t){return void 0!==this.body.nodes[t]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},o.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},o.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},o.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},o.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},o.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},o.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},o.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler,arguments)},o.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler,arguments)},o.prototype.getNodeAt=function(){var t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},o.prototype.getEdgeAt=function(){var t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},o.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},o.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},o.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.redraw()},o.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},o.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},o.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},o.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},o.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},o.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},o.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},o.prototype.getOptionsFromConfigurator=function(){var t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t},t.exports=o},function(t,e,i){"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.circle=function(t,e,i){this.beginPath(),this.arc(t,e,i,0,2*Math.PI,!1),this.closePath()},CanvasRenderingContext2D.prototype.square=function(t,e,i){this.beginPath(),this.rect(t-i,e-i,2*i,2*i),this.closePath()},CanvasRenderingContext2D.prototype.triangle=function(t,e,i){this.beginPath(),e+=.275*(i*=1.15);var n=2*i,o=n/2,r=Math.sqrt(3)/6*n,s=Math.sqrt(n*n-o*o);this.moveTo(t,e-(s-r)),this.lineTo(t+o,e+r),this.lineTo(t-o,e+r),this.lineTo(t,e-(s-r)),this.closePath()},CanvasRenderingContext2D.prototype.triangleDown=function(t,e,i){this.beginPath(),e-=.275*(i*=1.15);var n=2*i,o=n/2,r=Math.sqrt(3)/6*n,s=Math.sqrt(n*n-o*o);this.moveTo(t,e+(s-r)),this.lineTo(t+o,e-r),this.lineTo(t-o,e-r),this.lineTo(t,e+(s-r)),this.closePath()},CanvasRenderingContext2D.prototype.star=function(t,e,i){this.beginPath(),e+=.1*(i*=.82);for(var n=0;n<10;n++){var o=n%2==0?1.3*i:.5*i;this.lineTo(t+o*Math.sin(2*n*Math.PI/10),e-o*Math.cos(2*n*Math.PI/10))}this.closePath()},CanvasRenderingContext2D.prototype.diamond=function(t,e,i){this.beginPath(),this.lineTo(t,e+i),this.lineTo(t+i,e),this.lineTo(t,e-i),this.lineTo(t-i,e),this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,n,o){var r=Math.PI/180;i-2*o<0&&(o=i/2),n-2*o<0&&(o=n/2),this.beginPath(),this.moveTo(t+o,e),this.lineTo(t+i-o,e),this.arc(t+i-o,e+o,o,270*r,360*r,!1),this.lineTo(t+i,e+n-o),this.arc(t+i-o,e+n-o,o,0,90*r,!1),this.lineTo(t+o,e+n),this.arc(t+o,e+n-o,o,90*r,180*r,!1),this.lineTo(t,e+o),this.arc(t+o,e+o,o,180*r,270*r,!1),this.closePath()},CanvasRenderingContext2D.prototype.ellipse_vis=function(t,e,i,n){var o=i/2*.5522848,r=n/2*.5522848,s=t+i,a=e+n,l=t+i/2,d=e+n/2;this.beginPath(),this.moveTo(t,d),this.bezierCurveTo(t,d-r,l-o,e,l,e),this.bezierCurveTo(l+o,e,s,d-r,s,d),this.bezierCurveTo(s,d+r,l+o,a,l,a),this.bezierCurveTo(l-o,a,t,d+r,t,d),this.closePath()},CanvasRenderingContext2D.prototype.database=function(t,e,i,n){var o=n*(1/3),r=i/2*.5522848,s=o/2*.5522848,a=t+i,l=e+o,d=t+i/2,h=e+o/2,u=e+(n-o/2),c=e+n;this.beginPath(),this.moveTo(a,h),this.bezierCurveTo(a,h+s,d+r,l,d,l),this.bezierCurveTo(d-r,l,t,h+s,t,h),this.bezierCurveTo(t,h-s,d-r,e,d,e),this.bezierCurveTo(d+r,e,a,h-s,a,h),this.lineTo(a,u),this.bezierCurveTo(a,u+s,d+r,c,d,c),this.bezierCurveTo(d-r,c,t,u+s,t,u),this.lineTo(t,h)},CanvasRenderingContext2D.prototype.dashedLine=function(t,e,i,n,o){this.beginPath(),this.moveTo(t,e);for(var r=o.length,s=i-t,a=n-e,l=a/s,d=Math.sqrt(s*s+a*a),h=0,u=!0,c=0,f=o[0];.1<=d;)d<(f=o[h++%r])&&(f=d),c=Math.sqrt(f*f/(1+l*l)),t+=c=s<0?-c:c,e+=l*c,!0===u?this.lineTo(t,e):this.moveTo(t,e),d-=f,u=!u},CanvasRenderingContext2D.prototype.hexagon=function(t,e,i){this.beginPath();var n=2*Math.PI/6;this.moveTo(t+i,e);for(var o=1;o<6;o++)this.lineTo(t+i*Math.cos(n*o),e+i*Math.sin(n*o));this.closePath()})},function(t,e,i){e.en={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."},e.en_EN=e.en,e.en_US=e.en,e.de={edit:"Editieren",del:"Lösche Auswahl",back:"Zurück",addNode:"Knoten hinzufügen",addEdge:"Kante hinzufügen",editNode:"Knoten editieren",editEdge:"Kante editieren",addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",deleteClusterError:"Cluster können nicht gelöscht werden.",editClusterError:"Cluster können nicht editiert werden."},e.de_DE=e.de,e.es={edit:"Editar",del:"Eliminar selección",back:"Átras",addNode:"Añadir nodo",addEdge:"Añadir arista",editNode:"Editar nodo",editEdge:"Editar arista",addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",createEdgeError:"No se puede conectar una arista a un grupo.",deleteClusterError:"No es posible eliminar grupos.",editClusterError:"No es posible editar grupos."},e.es_ES=e.es,e.it={edit:"Modifica",del:"Cancella la selezione",back:"Indietro",addNode:"Aggiungi un nodo",addEdge:"Aggiungi un vertice",editNode:"Modifica il nodo",editEdge:"Modifica il vertice",addDescription:"Clicca per aggiungere un nuovo nodo",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",createEdgeError:"Non si possono collegare vertici ad un cluster",deleteClusterError:"I cluster non possono essere cancellati",editClusterError:"I clusters non possono essere modificati."},e.it_IT=e.it,e.nl={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd.",editClusterError:"Clusters kunnen niet worden aangepast."},e.nl_NL=e.nl,e.nl_BE=e.nl,e["pt-br"]={edit:"Editar",del:"Remover selecionado",back:"Voltar",addNode:"Adicionar nó",addEdge:"Adicionar aresta",editNode:"Editar nó",editEdge:"Editar aresta",addDescription:"Clique em um espaço em branco para adicionar um novo nó",edgeDescription:"Clique em um nó e arraste a aresta até outro nó para conectá-los",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nó para conectá-los",createEdgeError:"Não foi possível linkar arestas a um cluster.",deleteClusterError:"Clusters não puderam ser removidos.",editClusterError:"Clusters não puderam ser editados."},e["pt-BR"]=e["pt-br"],e.pt_BR=e["pt-br"],e.pt_br=e["pt-br"],e.ru={edit:"Редактировать",del:"Удалить выбранное",back:"Назад",addNode:"Добавить узел",addEdge:"Добавить ребро",editNode:"Редактировать узел",editEdge:"Редактировать ребро",addDescription:"Кликните в свободное место, чтобы добавить новый узел.",edgeDescription:"Кликните на узел и протяните ребро к другому узлу, чтобы соединить их.",editEdgeDescription:"Кликните на контрольные точки и перетащите их в узел, чтобы подключиться к нему.",createEdgeError:"Невозможно соединить ребра в кластер.",deleteClusterError:"Кластеры не могут быть удалены",editClusterError:"Кластеры недоступны для редактирования."},e.ru_RU=e.ru,e.cn={edit:"编辑",del:"删除选定",back:"返回",addNode:"添加节点",addEdge:"添加连接线",editNode:"编辑节点",editEdge:"编辑连接线",addDescription:"单击空白处放置新节点。",edgeDescription:"单击某个节点并将该连接线拖动到另一个节点以连接它们。",editEdgeDescription:"单击控制节点并将它们拖到节点上连接。",createEdgeError:"无法将连接线连接到群集。",deleteClusterError:"无法删除群集。",editClusterError:"无法编辑群集。"},e.zh_CN=e.cn},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=((0,n(i(1)).default)(s,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,e=this.image.height;this.width=t,this.height=e;var i=Math.floor(e/2),n=Math.floor(e/4),o=Math.floor(e/8),r=Math.floor(e/16),s=Math.floor(t/2),a=Math.floor(t/4),l=Math.floor(t/8),d=Math.floor(t/16);this.canvas.width=3*a,this.canvas.height=i,this.coordinates=[[0,0,s,i],[s,0,a,n],[s,n,l,o],[5*l,n,d,r]],this._fillMipMap()}}},{key:"initialized",value:function(){return void 0!==this.coordinates}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),e=this.coordinates[0];t.drawImage(this.image,e[0],e[1],e[2],e[3]);for(var i=1;i<this.NUM_ITERATIONS;i++){var n=this.coordinates[i-1],o=this.coordinates[i];t.drawImage(this.canvas,n[0],n[1],n[2],n[3],o[0],o[1],o[2],o[3])}}},{key:"drawImageAtPosition",value:function(t,e,i,n,o,r){if(this.initialized())if(2<e){e*=.5;for(var s=0;2<e&&s<this.NUM_ITERATIONS;)e*=.5,s+=1;s>=this.NUM_ITERATIONS&&(s=this.NUM_ITERATIONS-1);var a=this.coordinates[s];t.drawImage(this.canvas,a[0],a[1],a[2],a[3],i,n,o,r)}else t.drawImage(this.image,i,n,o,r)}}]),s);function s(){(0,o.default)(this,s),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}e.default=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(1)),s=i(2),a=((0,r.default)(l,[{key:"setOptions",value:function(t){var e=["useDefaultGroups"];if(void 0!==t)for(var i in t)if(t.hasOwnProperty(i)&&-1===e.indexOf(i)){var n=t[i];this.add(i,n)}}},{key:"clear",value:function(){this.groups={},this.groupsArray=[]}},{key:"get",value:function(t,e){var i=!(1<arguments.length&&void 0!==e)||e,n=this.groups[t];if(void 0===n&&i)if(!1===this.options.useDefaultGroups&&0<this.groupsArray.length){var o=this.groupIndex%this.groupsArray.length;this.groupIndex++,(n={}).color=this.groups[this.groupsArray[o]],this.groups[t]=n}else{var r=this.defaultIndex%this.defaultGroups.length;this.defaultIndex++,(n={}).color=this.defaultGroups[r],this.groups[t]=n}return n}},{key:"add",value:function(t,e){return this.groups[t]=e,this.groupsArray.push(t),e}}]),l);function l(){(0,o.default)(this,l),this.clear(),this.defaultIndex=0,this.groupsArray=[],this.groupIndex=0,this.defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},s.extend(this.options,this.defaultOptions)}e.default=a},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),o=n(i(1)),s=i(2),a=i(11),l=i(12),d=i(47).default,h=((0,o.default)(u,[{key:"bindEventListeners",value:function(){var i=this;this.body.emitter.on("refreshNodes",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){s.forEach(i.nodesListeners,function(t,e){i.body.data.nodes&&i.body.data.nodes.off(e,t)}),delete i.body.functions.createNode,delete i.nodesListeners.add,delete i.nodesListeners.update,delete i.nodesListeners.remove,delete i.nodesListeners})}},{key:"setOptions",value:function(t){if(void 0!==t){if(d.parseOptions(this.options,t),void 0!==t.shape)for(var e in this.body.nodes)this.body.nodes.hasOwnProperty(e)&&this.body.nodes[e].updateShape();if(void 0!==t.font)for(var i in this.body.nodes)this.body.nodes.hasOwnProperty(i)&&(this.body.nodes[i].updateLabelModule(),this.body.nodes[i].needsRefresh());if(void 0!==t.size)for(var n in this.body.nodes)this.body.nodes.hasOwnProperty(n)&&this.body.nodes[n].needsRefresh();void 0===t.hidden&&void 0===t.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t,e){var i=1<arguments.length&&void 0!==e&&e,n=this.body.data.nodes;if(t instanceof a||t instanceof l)this.body.data.nodes=t;else if(Array.isArray(t))this.body.data.nodes=new a,this.body.data.nodes.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new a}if(n&&s.forEach(this.nodesListeners,function(t,e){n.off(e,t)}),this.body.nodes={},this.body.data.nodes){var o=this;s.forEach(this.nodesListeners,function(t,e){o.body.data.nodes.on(e,t)});var r=this.body.data.nodes.getIds();this.add(r,!0)}!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t,e){for(var i=1<arguments.length&&void 0!==e&&e,n=void 0,o=[],r=0;r<t.length;r++){n=t[r];var s=this.body.data.nodes.get(n),a=this.create(s);o.push(a),this.body.nodes[n]=a}this.layoutEngine.positionInitially(o),!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,e,n){for(var i=this.body.nodes,o=!1,r=0;r<t.length;r++){var s=t[r],a=i[s],l=e[r];void 0!==a?a.setOptions(l)&&(o=!0):(o=!0,a=this.create(l),i[s]=a)}o||void 0===n||(o=e.some(function(t,e){var i=n[e];return i&&i.level!==t.level})),!0===o?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var e=this.body.nodes,i=0;i<t.length;i++)delete e[t[i]];this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t,e){return new(1<arguments.length&&void 0!==e?e:d)(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(t){var n=this,o=0<arguments.length&&void 0!==t&&t;s.forEach(this.body.nodes,function(t,e){var i=n.body.data.nodes.get(e);void 0!==i&&(!0===o&&t.setOptions({x:null,y:null}),t.setOptions({fixed:!1}),t.setOptions(i))})}},{key:"getPositions",value:function(t){var e={};if(void 0!==t){if(!0===Array.isArray(t)){for(var i=0;i<t.length;i++)if(void 0!==this.body.nodes[t[i]]){var n=this.body.nodes[t[i]];e[t[i]]={x:Math.round(n.x),y:Math.round(n.y)}}}else if(void 0!==this.body.nodes[t]){var o=this.body.nodes[t];e[t]={x:Math.round(o.x),y:Math.round(o.y)}}}else for(var r=0;r<this.body.nodeIndices.length;r++){var s=this.body.nodes[this.body.nodeIndices[r]];e[this.body.nodeIndices[r]]={x:Math.round(s.x),y:Math.round(s.y)}}return e}},{key:"storePositions",value:function(){var t=[],e=this.body.data.nodes.getDataSet();for(var i in e._data)if(e._data.hasOwnProperty(i)){var n=this.body.nodes[i];e._data[i].x==Math.round(n.x)&&e._data[i].y==Math.round(n.y)||t.push({id:n.id,x:Math.round(n.x),y:Math.round(n.y)})}e.update(t)}},{key:"getBoundingBox",value:function(t){if(void 0!==this.body.nodes[t])return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,e){var i=[];if(void 0!==this.body.nodes[t])for(var n=this.body.nodes[t],o={},r=0;r<n.edges.length;r++){var s=n.edges[r];"to"!==e&&s.toId==n.id?void 0===o[s.fromId]&&(i.push(s.fromId),o[s.fromId]=!0):"from"!==e&&s.fromId==n.id&&void 0===o[s.toId]&&(i.push(s.toId),o[s.toId]=!0)}return i}},{key:"getConnectedEdges",value:function(t){var e=[];if(void 0!==this.body.nodes[t])for(var i=this.body.nodes[t],n=0;n<i.edges.length;n++)e.push(i.edges[n].id);else console.log("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return e}},{key:"moveNode",value:function(t,e,i){var n=this;void 0!==this.body.nodes[t]?(this.body.nodes[t].x=Number(e),this.body.nodes[t].y=Number(i),setTimeout(function(){n.body.emitter.emit("startSimulation")},0)):console.log("Node id supplied to moveNode does not exist. Provided: ",t)}}]),u);function u(t,e,i,n){var o=this;if((0,r.default)(this,u),this.body=t,this.images=e,this.groups=i,this.layoutEngine=n,this.body.functions.createNode=this.create.bind(this),this.nodesListeners={add:function(t,e){o.add(e.items)},update:function(t,e){o.update(e.items,e.data,e.oldData)},remove:function(t,e){o.remove(e.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:2,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,i,n){if(e===t)return.5;var o=1/(e-t);return Math.max(0,(n-t)*o)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=s.bridgeObject(this.defaultOptions),this.bindEventListeners()}e.default=h},function(t,e,i){t.exports={default:i(189),__esModule:!0}},function(t,e,i){i(49),i(60),t.exports=i(190)},function(t,e,i){var n=i(86),o=i(13)("iterator"),r=i(31);t.exports=i(7).isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||r.hasOwnProperty(n(e))}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var l=n(i(0)),o=n(i(1)),d=i(192).default,p=i(48).default,r=((0,o.default)(h,[{key:"process",value:function(t){if(!p.isValidLabel(t))return this.lines.finalize();var e=this.parent.fontOptions;t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n");var i=String(t).split("\n"),n=i.length;if(e.multi)for(var o=0;o<n;o++){var r=this.splitBlocks(i[o],e.multi);if(void 0!==r)if(0!==r.length){if(0<e.maxWdt)for(var s=0;s<r.length;s++){var a=r[s].mod,l=r[s].text;this.splitStringIntoLines(l,a,!0)}else for(var d=0;d<r.length;d++){var h=r[d].mod,u=r[d].text;this.lines.append(u,h)}this.lines.newLine()}else this.lines.newLine("")}else if(0<e.maxWdt)for(var c=0;c<n;c++)this.splitStringIntoLines(i[c]);else for(var f=0;f<n;f++)this.lines.newLine(i[f]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var e="none";return"markdown"===t||"md"===t?e="markdown":!0!==t&&"html"!==t||(e="html"),e}},{key:"splitHtmlBlocks",value:function(t){for(var e=[],i={bold:!1,ital:!1,mono:!1,spacing:!1,position:0,buffer:"",modStack:[],mod:function(){return 0===this.modStack.length?"normal":this.modStack[0]},modName:function(){return 0===this.modStack.length?"normal":"mono"===this.modStack[0]?"mono":i.bold&&i.ital?"boldital":i.bold?"bold":i.ital?"ital":void 0},emitBlock:function(){this.spacing&&(this.add(" "),this.spacing=!1),0<this.buffer.length&&(e.push({text:this.buffer,mod:this.modName()}),this.buffer="")},add:function(t){" "===t&&(i.spacing=!0),i.spacing&&(this.buffer+=" ",this.spacing=!1)," "!=t&&(this.buffer+=t)}};i.position<t.length;){var n=t.charAt(i.position);/[ \t]/.test(n)?i.mono?i.add(n):i.spacing=!0:/</.test(n)?i.mono||i.bold||!/<b>/.test(t.substr(i.position,3))?i.mono||i.ital||!/<i>/.test(t.substr(i.position,3))?!i.mono&&/<code>/.test(t.substr(i.position,6))?(i.emitBlock(),i.mono=!0,i.modStack.unshift("mono"),i.position+=5):!i.mono&&"bold"===i.mod()&&/<\/b>/.test(t.substr(i.position,4))?(i.emitBlock(),i.bold=!1,i.modStack.shift(),i.position+=3):!i.mono&&"ital"===i.mod()&&/<\/i>/.test(t.substr(i.position,4))?(i.emitBlock(),i.ital=!1,i.modStack.shift(),i.position+=3):"mono"===i.mod()&&/<\/code>/.test(t.substr(i.position,7))?(i.emitBlock(),i.mono=!1,i.modStack.shift(),i.position+=6):i.add(n):(i.emitBlock(),i.ital=!0,i.modStack.unshift("ital"),i.position+=2):(i.emitBlock(),i.bold=!0,i.modStack.unshift("bold"),i.position+=2):/&/.test(n)?/&lt;/.test(t.substr(i.position,4))?(i.add("<"),i.position+=3):/&amp;/.test(t.substr(i.position,5))?(i.add("&"),i.position+=4):i.add("&"):i.add(n),i.position++}return i.emitBlock(),e}},{key:"splitMarkdownBlocks",value:function(t){for(var e=[],i={bold:!1,ital:!1,mono:!1,beginable:!0,spacing:!1,position:0,buffer:"",modStack:[],mod:function(){return 0===this.modStack.length?"normal":this.modStack[0]},modName:function(){return 0===this.modStack.length?"normal":"mono"===this.modStack[0]?"mono":i.bold&&i.ital?"boldital":i.bold?"bold":i.ital?"ital":void 0},emitBlock:function(){this.spacing&&(this.add(" "),this.spacing=!1),0<this.buffer.length&&(e.push({text:this.buffer,mod:this.modName()}),this.buffer="")},add:function(t){" "===t&&(i.spacing=!0),i.spacing&&(this.buffer+=" ",this.spacing=!1)," "!=t&&(this.buffer+=t)}};i.position<t.length;){var n=t.charAt(i.position);/[ \t]/.test(n)?(i.mono?i.add(n):i.spacing=!0,i.beginable=!0):/\\/.test(n)?i.position<t.length+1&&(i.position++,n=t.charAt(i.position),/ \t/.test(n)?i.spacing=!0:(i.add(n),i.beginable=!1)):i.mono||i.bold||!i.beginable&&!i.spacing||!/\*/.test(n)?i.mono||i.ital||!i.beginable&&!i.spacing||!/\_/.test(n)?!i.mono&&(i.beginable||i.spacing)&&/`/.test(n)?(i.emitBlock(),i.mono=!0,i.modStack.unshift("mono")):!i.mono&&"bold"===i.mod()&&/\*/.test(n)?i.position===t.length-1||/[.,_` \t\n]/.test(t.charAt(i.position+1))?(i.emitBlock(),i.bold=!1,i.modStack.shift()):i.add(n):!i.mono&&"ital"===i.mod()&&/\_/.test(n)?i.position===t.length-1||/[.,*` \t\n]/.test(t.charAt(i.position+1))?(i.emitBlock(),i.ital=!1,i.modStack.shift()):i.add(n):i.mono&&"mono"===i.mod()&&/`/.test(n)?i.position===t.length-1||/[.,*_ \t\n]/.test(t.charAt(i.position+1))?(i.emitBlock(),i.mono=!1,i.modStack.shift()):i.add(n):(i.add(n),i.beginable=!1):(i.emitBlock(),i.ital=!0,i.modStack.unshift("ital")):(i.emitBlock(),i.bold=!0,i.modStack.unshift("bold")),i.position++}return i.emitBlock(),e}},{key:"splitBlocks",value:function(t,e){var i=this.decodeMarkupSystem(e);return"none"===i?[{text:t,mod:"normal"}]:"markdown"===i?this.splitMarkdownBlocks(t):"html"===i?this.splitHtmlBlocks(t):void 0}},{key:"overMaxWidth",value:function(t){var e=this.ctx.measureText(t).width;return this.lines.curWidth()+e>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var e="",i=0;i<t.length;){var n=e+(""===e?"":" ")+t[i];if(this.overMaxWidth(n))break;e=n,i++}return i}},{key:"getLongestFitWord",value:function(t){for(var e=0;e<t.length&&!this.overMaxWidth(t.slice(0,e));)e++;return e}},{key:"splitStringIntoLines",value:function(t,e,i){for(var n=1<arguments.length&&void 0!==e?e:"normal",o=2<arguments.length&&void 0!==i&&i,r=(t=(t=t.replace(/^( +)/g,"$1\r")).replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r")).split("\r");0<r.length;){var s=this.getLongestFit(r);if(0===s){var a=r[0],l=this.getLongestFitWord(a);this.lines.newLine(a.slice(0,l),n),r[0]=a.slice(l)}else{var d=s;" "===r[s-1]?s--:" "===r[d]&&d++;var h=r.slice(0,s).join("");s==r.length&&o?this.lines.append(h,n):this.lines.newLine(h,n),r=r.slice(d)}}}}]),h);function h(o,t,r,s){var a=this;(0,l.default)(this,h),this.ctx=o,this.parent=t;this.lines=new d(function(t,e){if(void 0===t)return 0;var i=a.parent.getFormattingValues(o,r,s,e),n=0;return""!==t&&(n=a.ctx.measureText(t).width),{width:n,values:i}})}e.default=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var l=n(i(90)),o=n(i(0)),r=((0,n(i(1)).default)(s,[{key:"_add",value:function(t,e,i){var n=2<arguments.length&&void 0!==i?i:"normal";void 0===this.lines[t]&&(this.lines[t]={width:0,height:0,blocks:[]});var o=e;void 0!==e&&""!==e||(o=" ");var r=this.measureText(o,n),s=(0,l.default)({},r.values);s.text=e,s.width=r.width,s.mod=n,void 0!==e&&""!==e||(s.width=0),this.lines[t].blocks.push(s),this.lines[t].width+=s.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return void 0===t?0:t.width}},{key:"append",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:"normal";this._add(this.current,t,i)}},{key:"newLine",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:"normal";this._add(this.current,t,i),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var e=this.lines[t],i=0;if(void 0!==e.blocks)for(var n=0;n<e.blocks.length;n++){var o=e.blocks[n];i<o.height&&(i=o.height)}e.height=i}}},{key:"determineLabelSize",value:function(){for(var t=0,e=0,i=0;i<this.lines.length;i++){var n=this.lines[i];n.width>t&&(t=n.width),e+=n.height}this.width=t,this.height=e}},{key:"removeEmptyBlocks",value:function(){for(var t=[],e=0;e<this.lines.length;e++){var i=this.lines[e];if(0!==i.blocks.length&&(e!==this.lines.length-1||0!==i.width)){var n={};(0,l.default)(n,i),n.blocks=[];for(var o=void 0,r=[],s=0;s<i.blocks.length;s++){var a=i.blocks[s];0!==a.width?r.push(a):void 0===o&&(o=a)}0===r.length&&void 0!==o&&r.push(o),n.blocks=r,t.push(n)}}return t}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),s);function s(t){(0,o.default)(this,s),this.measureText=t,this.current=0,this.width=0,this.height=0,this.lines=[]}e.default=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(23)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"resize",value:function(t,e,i){var n=1<arguments.length&&void 0!==e?e:this.selected,o=2<arguments.length&&void 0!==i?i:this.hover;if(this.needsRefresh(n,o)){var r=this.getDimensionsFromLabel(t,n,o);this.width=r.width+this.margin.right+this.margin.left,this.height=r.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,n,o,r){this.resize(t,n,o),this.left=e-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,r),t.roundRect(this.left,this.top,this.width,this.height,r.borderRadius),this.performFill(t,r),this.updateBoundingBox(e,i,t,n,o),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,o)}},{key:"updateBoundingBox",value:function(t,e,i,n,o){this._updateBoundingBox(t,e,i,n,o);var r=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(r)}},{key:"distanceToBorder",value:function(t,e){this.resize(t);var i=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i}}]),c);function c(t,e,i){(0,s.default)(this,c);var n=(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i));return n._setMargins(i),n}e.default=u},function(t,e,i){i(195),t.exports=i(7).Object.getPrototypeOf},function(t,e,i){var n=i(41),o=i(85);i(87)("getPrototypeOf",function(){return function(t){return o(n(t))}})},function(t,e,i){t.exports={default:i(197),__esModule:!0}},function(t,e,i){i(198),t.exports=i(7).Object.setPrototypeOf},function(t,e,i){var n=i(17);n(n.S,"Object",{setPrototypeOf:i(199).set})},function(t,e,o){function r(t,e){if(n(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")}var i=o(32),n=o(27);t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,i,n){try{(n=o(80)(Function.call,o(89).f(Object.prototype,"__proto__").set,2))(t,[]),i=!(t instanceof Array)}catch(t){i=!0}return function(t,e){return r(t,e),i?t.__proto__=e:n(t,e),t}}({},!1):void 0),check:r}},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(73)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"resize",value:function(t,e,i){var n=1<arguments.length&&void 0!==e?e:this.selected,o=2<arguments.length&&void 0!==i?i:this.hover;if(this.needsRefresh(n,o)){var r=this.getDimensionsFromLabel(t,n,o),s=Math.max(r.width+this.margin.right+this.margin.left,r.height+this.margin.top+this.margin.bottom);this.options.size=s/2,this.width=s,this.height=s,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,n,o,r){this.resize(t,n,o),this.left=e-this.width/2,this.top=i-this.height/2,this._drawRawCircle(t,e,i,r),this.updateBoundingBox(e,i),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,i,n,o)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size}},{key:"distanceToBorder",value:function(t){return this.resize(t),.5*this.width}}]),c);function c(t,e,i){(0,s.default)(this,c);var n=(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i));return n._setMargins(i),n}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(i(3)),a=n(i(0)),r=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(73)),u=(o=h.default,(0,d.default)(c,o),(0,r.default)(c,[{key:"resize",value:function(t,e,i){var n=1<arguments.length&&void 0!==e?e:this.selected,o=2<arguments.length&&void 0!==i?i:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var r=2*this.options.size;return this.width=r,this.height=r,void(this.radius=.5*this.width)}this.needsRefresh(n,o)&&this._resizeImage()}},{key:"draw",value:function(t,e,i,n,o,r){this.switchImages(n),this.resize(),this.left=e-this.width/2,this.top=i-this.height/2,this._drawRawCircle(t,e,i,r),t.save(),t.clip(),this._drawImageAtPosition(t,r),t.restore(),this._drawImageLabel(t,e,i,n,o),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(t){return this.resize(t),.5*this.width}}]),c);function c(t,e,i,n,o){(0,a.default)(this,c);var r=(0,l.default)(this,(c.__proto__||(0,s.default)(c)).call(this,t,e,i));return r.setImages(n,o),r}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(23)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"resize",value:function(t,e,i){if(this.needsRefresh(e,i)){var n=this.getDimensionsFromLabel(t,e,i).width+this.margin.right+this.margin.left;this.width=n,this.height=n,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,n,o,r){this.resize(t,n,o),this.left=e-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,r),t.database(e-this.width/2,i-this.height/2,this.width,this.height),this.performFill(t,r),this.updateBoundingBox(e,i,t,n,o),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),c);function c(t,e,i){(0,s.default)(this,c);var n=(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i));return n._setMargins(i),n}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(24)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"draw",value:function(t,e,i,n,o,r){this._drawShape(t,"diamond",4,e,i,n,o,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),c);function c(t,e,i){return(0,s.default)(this,c),(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i))}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(24)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"draw",value:function(t,e,i,n,o,r){this._drawShape(t,"circle",2,e,i,n,o,r)}},{key:"distanceToBorder",value:function(t){return this.resize(t),this.options.size}}]),c);function c(t,e,i){return(0,s.default)(this,c),(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i))}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(23)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"resize",value:function(t,e,i){var n=1<arguments.length&&void 0!==e?e:this.selected,o=2<arguments.length&&void 0!==i?i:this.hover;if(this.needsRefresh(n,o)){var r=this.getDimensionsFromLabel(t,n,o);this.height=2*r.height,this.width=r.width+r.height,this.radius=.5*this.width}}},{key:"draw",value:function(t,e,i,n,o,r){this.resize(t,n,o),this.left=e-.5*this.width,this.top=i-.5*this.height,this.initContextForDraw(t,r),t.ellipse_vis(this.left,this.top,this.width,this.height),this.performFill(t,r),this.updateBoundingBox(e,i,t,n,o),this.labelModule.draw(t,e,i,n,o)}},{key:"distanceToBorder",value:function(t,e){this.resize(t);var i=.5*this.width,n=.5*this.height,o=Math.sin(e)*i,r=Math.cos(e)*n;return i*n/Math.sqrt(o*o+r*r)}}]),c);function c(t,e,i){return(0,s.default)(this,c),(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i))}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(23)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"resize",value:function(t,e,i){this.needsRefresh(e,i)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,i,n,o,r){this.resize(t,n,o),this.options.icon.size=this.options.icon.size||50,this.left=e-this.width/2,this.top=i-this.height/2,this._icon(t,e,i,n,o,r),void 0!==this.options.label&&this.labelModule.draw(t,this.left+this.iconSize.width/2+this.margin.left,i+this.height/2+5,n),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-.5*this.options.icon.size,this.boundingBox.left=t-.5*this.options.icon.size,this.boundingBox.right=t+.5*this.options.icon.size,this.boundingBox.bottom=e+.5*this.options.icon.size,void 0!==this.options.label&&0<this.labelModule.size.width&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}},{key:"_icon",value:function(t,e,i,n,o,r){var s=Number(this.options.icon.size);void 0!==this.options.icon.code?(t.font=(n?"bold ":"")+s+"px "+this.options.icon.face,t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",this.enableShadow(t,r),t.fillText(this.options.icon.code,e,i),this.disableShadow(t,r)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),c);function c(t,e,i){(0,s.default)(this,c);var n=(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i));return n._setMargins(i),n}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(i(3)),a=n(i(0)),r=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(73)),u=(o=h.default,(0,d.default)(c,o),(0,r.default)(c,[{key:"resize",value:function(t,e,i){var n=1<arguments.length&&void 0!==e?e:this.selected,o=2<arguments.length&&void 0!==i?i:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var r=2*this.options.size;return this.width=r,void(this.height=r)}this.needsRefresh(n,o)&&this._resizeImage()}},{key:"draw",value:function(t,e,i,n,o,r){if(this.switchImages(n),this.resize(),this.left=e-this.width/2,this.top=i-this.height/2,!0===this.options.shapeProperties.useBorderWithImage){var s=this.options.borderWidth,a=this.options.borderWidthSelected||2*this.options.borderWidth,l=(n?a:s)/this.body.view.scale;t.lineWidth=Math.min(this.width,l),t.beginPath(),t.strokeStyle=n?this.options.color.highlight.border:o?this.options.color.hover.border:this.options.color.border,t.fillStyle=n?this.options.color.highlight.background:o?this.options.color.hover.background:this.options.color.background,t.rect(this.left-.5*t.lineWidth,this.top-.5*t.lineWidth,this.width+t.lineWidth,this.height+t.lineWidth),t.fill(),this.performStroke(t,r),t.closePath()}this._drawImageAtPosition(t,r),this._drawImageLabel(t,e,i,n,o),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){this.resize(),this._updateBoundingBox(t,e),void 0!==this.options.label&&0<this.labelModule.size.width&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),c);function c(t,e,i,n,o){(0,a.default)(this,c);var r=(0,l.default)(this,(c.__proto__||(0,s.default)(c)).call(this,t,e,i));return r.setImages(n,o),r}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(24)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"draw",value:function(t,e,i,n,o,r){this._drawShape(t,"square",2,e,i,n,o,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),c);function c(t,e,i){return(0,s.default)(this,c),(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i))}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(24)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"draw",value:function(t,e,i,n,o,r){this._drawShape(t,"hexagon",4,e,i,n,o,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),c);function c(t,e,i){return(0,s.default)(this,c),(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i))}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(24)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"draw",value:function(t,e,i,n,o,r){this._drawShape(t,"star",4,e,i,n,o,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),c);function c(t,e,i){return(0,s.default)(this,c),(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i))}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(23)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"resize",value:function(t,e,i){this.needsRefresh(e,i)&&(this.textSize=this.labelModule.getTextSize(t,e,i),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,i,n,o,r){this.resize(t,n,o),this.left=e-this.width/2,this.top=i-this.height/2,this.enableShadow(t,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,o),this.disableShadow(t,r),this.updateBoundingBox(e,i,t,n,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),c);function c(t,e,i){(0,s.default)(this,c);var n=(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i));return n._setMargins(i),n}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(24)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"draw",value:function(t,e,i,n,o,r){this._drawShape(t,"triangle",3,e,i,n,o,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),c);function c(t,e,i){return(0,s.default)(this,c),(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i))}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(24)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"draw",value:function(t,e,i,n,o,r){this._drawShape(t,"triangleDown",3,e,i,n,o,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),c);function c(t,e,i){return(0,s.default)(this,c),(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i))}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(1)),s=i(2),a=i(11),l=i(12),d=i(74).default,h=((0,r.default)(u,[{key:"bindEventListeners",value:function(){var a=this;this.body.emitter.on("_forceDisableDynamicCurves",function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];"dynamic"===t&&(t="continuous");var i=!1;for(var n in a.body.edges)if(a.body.edges.hasOwnProperty(n)){var o=a.body.edges[n],r=a.body.data.edges._data[n];if(void 0!==r){var s=r.smooth;void 0!==s&&!0===s.enabled&&"dynamic"===s.type&&(void 0===t?o.setOptions({smooth:!1}):o.setOptions({smooth:{type:t}}),i=!0)}}!0===e&&!0===i&&a.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){a.reconnectEdges()}),this.body.emitter.on("refreshEdges",this.refresh.bind(this)),this.body.emitter.on("refresh",this.refresh.bind(this)),this.body.emitter.on("destroy",function(){s.forEach(a.edgesListeners,function(t,e){a.body.data.edges&&a.body.data.edges.off(e,t)}),delete a.body.functions.createEdge,delete a.edgesListeners.add,delete a.edgesListeners.update,delete a.edgesListeners.remove,delete a.edgesListeners})}},{key:"setOptions",value:function(t){if(void 0!==t){d.parseOptions(this.options,t,!0,this.defaultOptions,!0);var e=!1;if(void 0!==t.smooth)for(var i in this.body.edges)this.body.edges.hasOwnProperty(i)&&(e=this.body.edges[i].updateEdgeType()||e);if(void 0!==t.font)for(var n in this.body.edges)this.body.edges.hasOwnProperty(n)&&this.body.edges[n].updateLabelModule();void 0===t.hidden&&void 0===t.physics&&!0!==e||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t,e){var i=this,n=1<arguments.length&&void 0!==e&&e,o=this.body.data.edges;if(t instanceof a||t instanceof l)this.body.data.edges=t;else if(Array.isArray(t))this.body.data.edges=new a,this.body.data.edges.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.edges=new a}if(o&&s.forEach(this.edgesListeners,function(t,e){o.off(e,t)}),this.body.edges={},this.body.data.edges){s.forEach(this.edgesListeners,function(t,e){i.body.data.edges.on(e,t)});var r=this.body.data.edges.getIds();this.add(r,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===n&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t,e){for(var i=1<arguments.length&&void 0!==e&&e,n=this.body.edges,o=this.body.data.edges,r=0;r<t.length;r++){var s=t[r],a=n[s];a&&a.disconnect();var l=o.get(s,{showInternalIds:!0});n[s]=this.create(l)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var e=this.body.edges,i=this.body.data.edges,n=!1,o=0;o<t.length;o++){var r=t[o],s=i.get(r),a=e[r];void 0!==a?(a.disconnect(),n=a.setOptions(s)||n,a.connect()):(this.body.edges[r]=this.create(s),n=!0)}!0===n?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t,e){var i=!(1<arguments.length&&void 0!==e)||e;if(0!==t.length){var n=this.body.edges;s.forEach(t,function(t){var e=n[t];void 0!==e&&e.remove()}),i&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var n=this;s.forEach(this.body.edges,function(t,e){var i=n.body.data.edges._data[e];void 0!==i&&t.setOptions(i)})}},{key:"create",value:function(t){return new d(t,this.body,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,e=this.body.nodes,i=this.body.edges;for(t in e)e.hasOwnProperty(t)&&(e[t].edges=[]);for(t in i)if(i.hasOwnProperty(t)){var n=i[t];n.from=null,n.to=null,n.connect()}}},{key:"getConnectedNodes",value:function(t){var e=[];if(void 0!==this.body.edges[t]){var i=this.body.edges[t];void 0!==i.fromId&&e.push(i.fromId),void 0!==i.toId&&e.push(i.toId)}return e}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var o=this,r=[];s.forEach(this.body.edges,function(t,e){var i=o.body.nodes[t.toId],n=o.body.nodes[t.fromId];void 0!==i&&!0===i.isCluster||void 0!==n&&!0===n.isCluster||void 0!==i&&void 0!==n||r.push(e)}),this.remove(r,!1)}},{key:"_addMissingEdges",value:function(){var i=this.body.edges,t=this.body.data.edges,n=[];t.forEach(function(t,e){void 0===i[e]&&n.push(e)}),this.add(n,!0)}}]),u);function u(t,e,i){var n=this;(0,o.default)(this,u),this.body=t,this.images=e,this.groups=i,this.body.functions.createEdge=this.create.bind(this),this.edgesListeners={add:function(t,e){n.add(e.items)},update:function(t,e){n.update(e.items)},remove:function(t,e){n.remove(e.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,i,n){if(e===t)return.5;var o=1/(e-t);return Math.max(0,(n-t)*o)}},selectionWidth:1.5,selfReferenceSize:20,shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},s.deepExtend(this.options,this.defaultOptions),this.bindEventListeners()}e.default=h},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,u=n(i(30)),r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(216)),c=(o=h.default,(0,d.default)(f,o),(0,a.default)(f,[{key:"_line",value:function(t,e,i){var n=i[0],o=i[1];this._bezierCurve(t,e,n,o)}},{key:"_getViaCoordinates",value:function(){var t=this.from.x-this.to.x,e=this.from.y-this.to.y,i=void 0,n=void 0,o=void 0,r=void 0,s=this.options.smooth.roundness;return o=(Math.abs(t)>Math.abs(e)||!0===this.options.smooth.forceDirection||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(n=this.from.y,r=this.to.y,i=this.from.x-s*t,this.to.x+s*t):(n=this.from.y-s*e,r=this.to.y+s*e,i=this.from.x,this.to.x),[{x:i,y:n},{x:o,y:r}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,o,r,s){var a=6<arguments.length&&void 0!==s?s:this._getViaCoordinates(),l=(0,u.default)(a,2),d=l[0],h=l[1];return this._getDistanceToBezierEdge(t,e,i,n,o,r,d,h)}},{key:"getPoint",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:this._getViaCoordinates(),n=(0,u.default)(i,2),o=n[0],r=n[1],s=t,a=[];return a[0]=Math.pow(1-s,3),a[1]=3*s*Math.pow(1-s,2),a[2]=3*Math.pow(s,2)*(1-s),a[3]=Math.pow(s,3),{x:a[0]*this.fromPoint.x+a[1]*o.x+a[2]*r.x+a[3]*this.toPoint.x,y:a[0]*this.fromPoint.y+a[1]*o.y+a[2]*r.y+a[3]*this.toPoint.y}}}]),f);function f(t,e,i){return(0,s.default)(this,f),(0,l.default)(this,(f.__proto__||(0,r.default)(f)).call(this,t,e,i))}e.default=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(75)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"_getDistanceToBezierEdge",value:function(t,e,i,n,o,r,s,a){var l=1e9,d=void 0,h=void 0,u=void 0,c=void 0,f=void 0,p=t,m=e,v=[0,0,0,0];for(h=1;h<10;h++)u=.1*h,v[0]=Math.pow(1-u,3),v[1]=3*u*Math.pow(1-u,2),v[2]=3*Math.pow(u,2)*(1-u),v[3]=Math.pow(u,3),c=v[0]*t+v[1]*s.x+v[2]*a.x+v[3]*i,f=v[0]*e+v[1]*s.y+v[2]*a.y+v[3]*n,0<h&&(l=(d=this._getDistanceToLine(p,m,c,f,o,r))<l?d:l),p=c,m=f;return l}}]),c);function c(t,e,i){return(0,s.default)(this,c),(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i))}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,c=n(i(30)),r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(75)),u=(o=h.default,(0,d.default)(f,o),(0,a.default)(f,[{key:"setOptions",value:function(t){var e=!1;this.options.physics!==t.physics&&(e=!0),this.options=t,this.id=this.options.id,this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],this.setupSupportNode(),this.connect(),!0===e&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this.body.nodes[this.options.from],this.to=this.body.nodes[this.options.to],void 0===this.from||void 0===this.to||!1===this.options.physics?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this.body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via&&(delete this.body.nodes[this.via.id],!(this.via=void 0))}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var t="edgeId:"+this.id,e=this.body.functions.createNode({id:t,shape:"circle",physics:!0,hidden:!0});this.body.nodes[t]=e,this.via=e,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(t,e,i){this._bezierCurve(t,e,i)}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:this.via,n=t,o=void 0,r=void 0;if(this.from===this.to){var s=this._getCircleData(this.from),a=(0,c.default)(s,3),l=a[0],d=a[1],h=a[2],u=2*Math.PI*(1-n);o=l+h*Math.sin(u),r=d+h-h*(1-Math.cos(u))}else o=Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*i.x+Math.pow(n,2)*this.toPoint.x,r=Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*i.y+Math.pow(n,2)*this.toPoint.y;return{x:o,y:r}}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e,this.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,o,r){return this._getDistanceToBezierEdge(t,e,i,n,o,r,this.via)}}]),f);function f(t,e,i){(0,s.default)(this,f);var n=(0,l.default)(this,(f.__proto__||(0,r.default)(f)).call(this,t,e,i));return n._boundFunction=function(){n.positionBezierNode()},n.body.emitter.on("_repositionBezierNodes",n._boundFunction),n}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(75)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"_line",value:function(t,e,i){this._bezierCurve(t,e,i)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var t=void 0,e=void 0,i=this.options.smooth.roundness,n=this.options.smooth.type,o=Math.abs(this.from.x-this.to.x),r=Math.abs(this.from.y-this.to.y);if("discrete"===n||"diagonalCross"===n){var s=void 0,a=void 0;s=a=o<=r?i*r:i*o,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(a=-a),t=this.from.x+s,e=this.from.y+a,"discrete"===n&&(o<=r?t=o<i*r?this.from.x:t:e=r<i*o?this.from.y:e)}else if("straightCross"===n){var l=(1-i)*o,d=(1-i)*r;o<=r?(l=0,this.from.y<this.to.y&&(d=-d)):(this.from.x<this.to.x&&(l=-l),d=0),t=this.to.x+l,e=this.to.y+d}else if("horizontal"===n){var h=(1-i)*o;this.from.x<this.to.x&&(h=-h),t=this.to.x+h,e=this.from.y}else if("vertical"===n){var u=(1-i)*r;this.from.y<this.to.y&&(u=-u),t=this.from.x,e=this.to.y+u}else if("curvedCW"===n){o=this.to.x-this.from.x,r=this.from.y-this.to.y;var c=Math.sqrt(o*o+r*r),f=Math.PI,p=(Math.atan2(r,o)+(.5*i+.5)*f)%(2*f);t=this.from.x+(.5*i+.5)*c*Math.sin(p),e=this.from.y+(.5*i+.5)*c*Math.cos(p)}else if("curvedCCW"===n){o=this.to.x-this.from.x,r=this.from.y-this.to.y;var m=Math.sqrt(o*o+r*r),v=Math.PI,g=(Math.atan2(r,o)+(.5*-i+.5)*v)%(2*v);t=this.from.x+(.5*i+.5)*m*Math.sin(g),e=this.from.y+(.5*i+.5)*m*Math.cos(g)}else{var y=void 0,b=void 0;y=b=o<=r?i*r:i*o,this.from.x>this.to.x&&(y=-y),this.from.y>=this.to.y&&(b=-b),t=this.from.x+y,e=this.from.y+b,o<=r?t=this.from.x<=this.to.x?this.to.x<t?this.to.x:t:this.to.x>t?this.to.x:t:e=this.from.y>=this.to.y?this.to.y>e?this.to.y:e:this.to.y<e?this.to.y:e}return{x:t,y:e}}},{key:"_findBorderPosition",value:function(t,e,i){var n=2<arguments.length&&void 0!==i?i:{};return this._findBorderPositionBezier(t,e,n.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,n,o,r,s){var a=6<arguments.length&&void 0!==s?s:this._getViaCoordinates();return this._getDistanceToBezierEdge(t,e,i,n,o,r,a)}},{key:"getPoint",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:this._getViaCoordinates(),n=t;return{x:Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*i.x+Math.pow(n,2)*this.toPoint.x,y:Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*i.y+Math.pow(n,2)*this.toPoint.y}}}]),c);function c(t,e,i){return(0,s.default)(this,c),(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i))}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(118)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"_line",value:function(t,e){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),t.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(t){return{x:(1-t)*this.fromPoint.x+t*this.toPoint.x,y:(1-t)*this.fromPoint.y+t*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){var i=this.to,n=this.from;t.id===this.from.id&&(i=this.from,n=this.to);var o=Math.atan2(i.y-n.y,i.x-n.x),r=i.x-n.x,s=i.y-n.y,a=Math.sqrt(r*r+s*s),l=(a-t.distanceToBorder(e,o))/a,d={};return d.x=(1-l)*n.x+l*i.x,d.y=(1-l)*n.y+l*i.y,d}},{key:"_getDistanceToEdge",value:function(t,e,i,n,o,r){return this._getDistanceToLine(t,e,i,n,o,r)}}]),c);function c(t,e,i){return(0,s.default)(this,c),(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i))}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(8)),o=n(i(0)),s=n(i(1)),a=i(120).default,l=i(221).default,d=i(222).default,h=i(223).default,u=i(224).default,c=i(121).default,f=i(225).default,p=i(226).default,m=i(2),v=i(119).default,g=((0,s.default)(y,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",function(){t.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){t.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){t.stopSimulation(),t.ready=!1}),this.body.emitter.on("disablePhysics",function(){t.physicsEnabled=!1,t.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){t.setOptions(t.options),!0===t.ready&&t.startSimulation()}),this.body.emitter.on("startSimulation",function(){!0===t.ready&&t.startSimulation()}),this.body.emitter.on("stopSimulation",function(){t.stopSimulation()}),this.body.emitter.on("destroy",function(){t.stopSimulation(!1),t.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){t.updatePhysicsData()})}},{key:"setOptions",value:function(t){void 0!==t&&(!1===t?(this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation()):!0===t?(this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation()):(this.physicsEnabled=!0,m.selectiveNotDeepExtend(["stabilization"],this.options,t),m.mergeOptions(this.options,t,"stabilization"),void 0===t.enabled&&(this.options.enabled=!0),!1===this.options.enabled&&(this.physicsEnabled=!1,this.stopSimulation()),this.timestep=this.options.timestep)),this.init()}},{key:"init",value:function(){var t;"forceAtlas2Based"===this.options.solver?(t=this.options.forceAtlas2Based,this.nodesSolver=new f(this.body,this.physicsBody,t),this.edgesSolver=new h(this.body,this.physicsBody,t),this.gravitySolver=new p(this.body,this.physicsBody,t)):("repulsion"===this.options.solver?(t=this.options.repulsion,this.nodesSolver=new l(this.body,this.physicsBody,t),this.edgesSolver=new h(this.body,this.physicsBody,t)):"hierarchicalRepulsion"===this.options.solver?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new d(this.body,this.physicsBody,t),this.edgesSolver=new u(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new a(this.body,this.physicsBody,t),this.edgesSolver=new h(this.body,this.physicsBody,t)),this.gravitySolver=new c(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?!0===this.options.stabilization.enabled?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=this.simulationStep.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(t){var e=!(0<arguments.length&&void 0!==t)||t;(this.stabilized=!0)===e&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),!(this.viewFunction=void 0)===e&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=Date.now();this.physicsTick(),(Date.now()-t<.4*this.simulationInterval||!0===this.runDoubleSpeed)&&!1===this.stabilized&&(this.physicsTick(),this.runDoubleSpeed=!0),!0===this.stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(t){var e=this,i=0<arguments.length&&void 0!==t?t:this.stabilizationIterations;(1<this.stabilizationIterations||!0===this.startedStabilization)&&setTimeout(function(){e.body.emitter.emit("stabilized",{iterations:i}),e.startedStabilization=!1,e.stabilizationIterations=0},0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){!0===this._evaluateStepQuality()?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}},{key:"physicsTick",value:function(){this._startStabilizing(),!0!==this.stabilized&&(!0===this.adaptiveTimestep&&!0===this.adaptiveTimestepEnabled?(this.adaptiveCounter%this.adaptiveInterval==0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),!0===this.stabilized&&this.revert(),this.stabilizationIterations++)}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,e=this.body.edges;for(var i in t)t.hasOwnProperty(i)&&!0===t[i].options.physics&&this.physicsBody.physicsNodeIndices.push(t[i].id);for(var n in e)e.hasOwnProperty(n)&&!0===e[n].options.physics&&this.physicsBody.physicsEdgeIndices.push(e[n].id);for(var o=0;o<this.physicsBody.physicsNodeIndices.length;o++){var r=this.physicsBody.physicsNodeIndices[o];this.physicsBody.forces[r]={x:0,y:0},void 0===this.physicsBody.velocities[r]&&(this.physicsBody.velocities[r]={x:0,y:0})}for(var s in this.physicsBody.velocities)void 0===t[s]&&delete this.physicsBody.velocities[s]}},{key:"revert",value:function(){var t=(0,r.default)(this.previousStates),e=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var n=0;n<t.length;n++){var o=t[n];void 0!==e[o]?!0===e[o].options.physics&&(this.referenceState[o]={positions:{x:e[o].x,y:e[o].y}},i[o].x=this.previousStates[o].vx,i[o].y=this.previousStates[o].vy,e[o].x=this.previousStates[o].x,e[o].y=this.previousStates[o].y):delete this.previousStates[o]}}},{key:"_evaluateStepQuality",value:function(){var t=void 0,e=void 0,i=this.body.nodes,n=this.referenceState;for(var o in this.referenceState)if(this.referenceState.hasOwnProperty(o)&&void 0!==i[o]&&(t=i[o].x-n[o].positions.x,e=i[o].y-n[o].positions.y,.3<Math.sqrt(Math.pow(t,2)+Math.pow(e,2))))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,e=0,i=0,n=0;n<t.length;n++){var o=t[n],r=this._performStep(o);e=Math.max(e,r),i+=r}this.adaptiveTimestepEnabled=i/t.length<5,this.stabilized=e<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,e,i){t+=(e-this.modelOptions.damping*t)/i*this.timestep;var n=this.options.maxVelocity||1e9;return Math.abs(t)>n&&(t=0<t?n:-n),t}},{key:"_performStep",value:function(t){var e=this.body.nodes[t],i=this.physicsBody.forces[t],n=this.physicsBody.velocities[t];return!(this.previousStates[t]={x:e.x,y:e.y,vx:n.x,vy:n.y})===e.options.fixed.x?(n.x=this.calculateComponentVelocity(n.x,i.x,e.options.mass),e.x+=n.x*this.timestep):(i.x=0,n.x=0),!1===e.options.fixed.y?(n.y=this.calculateComponentVelocity(n.y,i.y,e.options.mass),e.y+=n.y*this.timestep):(i.y=0,n.y=0),Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var e in t)if(t.hasOwnProperty(e)&&t[e].x&&t[e].y){var i=t[e].options.fixed;this.freezeCache[e]={x:i.x,y:i.y},i.x=!0,i.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var e in t)t.hasOwnProperty(e)&&void 0!==this.freezeCache[e]&&(t[e].options.fixed.x=this.freezeCache[e].x,t[e].options.fixed.y=this.freezeCache[e].y);this.freezeCache={}}},{key:"stabilize",value:function(t){var e=this,i=0<arguments.length&&void 0!==t?t:this.options.stabilization.iterations;"number"!=typeof i&&(i=this.options.stabilization.iterations,console.log("The stabilize method needs a numeric amount of iterations. Switching to default: ",i)),0!==this.physicsBody.physicsNodeIndices.length?(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=i,!0===this.options.stabilization.onlyDynamicEdges&&this._freezeNodes(),this.stabilizationIterations=0,setTimeout(function(){return e._stabilizationBatch()},0)):this.ready=!0}},{key:"_startStabilizing",value:function(){return!0!==this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0)}},{key:"_stabilizationBatch",value:function(){function t(){return!1===i.stabilized&&i.stabilizationIterations<i.targetIterations}function e(){i.body.emitter.emit("stabilizationProgress",{iterations:i.stabilizationIterations,total:i.targetIterations})}var i=this;this._startStabilizing()&&e();for(var n=0;t()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;e(),t()?setTimeout(this._stabilizationBatch.bind(this),0):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),!0===this.options.stabilization.fit&&this.body.emitter.emit("fit"),!0===this.options.stabilization.onlyDynamicEdges&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),!0===this.stabilized?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var e=0;e<this.physicsBody.physicsNodeIndices.length;e++){var i=this.physicsBody.physicsNodeIndices[e],n=this.body.nodes[i],o=this.physicsBody.forces[i],r=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.x,2)),s=Math.min(Math.max(5,r),15),a=3*s,l=m.HSVToHex((180-180*Math.min(1,Math.max(0,.03*r)))/360,1,1),d={x:n.x+20*o.x,y:n.y+20*o.y};t.lineWidth=s,t.strokeStyle=l,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(d.x,d.y),t.stroke();var h=Math.atan2(o.y,o.x);t.fillStyle=l,v.draw(t,{type:"arrow",point:d,angle:h,length:a}),t.fill()}}}]),y);function y(t){(0,o.default)(this,y),this.body=t,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0},m.extend(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}e.default=g},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=((0,n(i(1)).default)(s,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,n,o,r,s,a,l=this.body.nodes,d=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,u=this.options.nodeDistance,c=-2/3/u,f=0;f<d.length-1;f++){s=l[d[f]];for(var p=f+1;p<d.length;p++)t=(a=l[d[p]]).x-s.x,e=a.y-s.y,0===(i=Math.sqrt(t*t+e*e))&&(t=i=.1*Math.random()),i<2*u&&(r=i<.5*u?1:c*i+4/3,n=t*(r/=i),o=e*r,h[s.id].x-=n,h[s.id].y-=o,h[a.id].x+=n,h[a.id].y+=o)}}}]),s);function s(t,e,i){(0,o.default)(this,s),this.body=t,this.physicsBody=e,this.setOptions(i)}e.default=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=((0,n(i(1)).default)(s,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){var t,e,i,n,o,r,s,a,l,d,h=this.body.nodes,u=this.physicsBody.physicsNodeIndices,c=this.physicsBody.forces,f=this.options.nodeDistance;for(l=0;l<u.length-1;l++)for(s=h[u[l]],d=l+1;d<u.length;d++)a=h[u[d]],s.level===a.level&&(t=a.x-s.x,e=a.y-s.y,r=(i=Math.sqrt(t*t+e*e))<f?-Math.pow(.05*i,2)+Math.pow(.05*f,2):0,0===i?i=.01:r/=i,n=t*r,o=e*r,c[s.id].x-=n,c[s.id].y-=o,c[a.id].x+=n,c[a.id].y+=o)}}]),s);function s(t,e,i){(0,o.default)(this,s),this.body=t,this.physicsBody=e,this.setOptions(i)}e.default=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=((0,n(i(1)).default)(s,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t=void 0,e=void 0,i=this.physicsBody.physicsEdgeIndices,n=this.body.edges,o=void 0,r=void 0,s=void 0,a=0;a<i.length;a++)!0===(e=n[i[a]]).connected&&e.toId!==e.fromId&&void 0!==this.body.nodes[e.toId]&&void 0!==this.body.nodes[e.fromId]&&(void 0!==e.edgeType.via?(t=void 0===e.options.length?this.options.springLength:e.options.length,o=e.to,r=e.edgeType.via,s=e.from,this._calculateSpringForce(o,r,.5*t),this._calculateSpringForce(r,s,.5*t)):(t=void 0===e.options.length?1.5*this.options.springLength:e.options.length,this._calculateSpringForce(e.from,e.to,t)))}},{key:"_calculateSpringForce",value:function(t,e,i){var n=t.x-e.x,o=t.y-e.y,r=Math.max(Math.sqrt(n*n+o*o),.01),s=this.options.springConstant*(i-r)/r,a=n*s,l=o*s;void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x+=a,this.physicsBody.forces[t.id].y+=l),void 0!==this.physicsBody.forces[e.id]&&(this.physicsBody.forces[e.id].x-=a,this.physicsBody.forces[e.id].y-=l)}}]),s);function s(t,e,i){(0,o.default)(this,s),this.body=t,this.physicsBody=e,this.setOptions(i)}e.default=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=((0,n(i(1)).default)(s,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,n,o,r,s,a,l=this.body.edges,d=this.physicsBody.physicsEdgeIndices,h=this.physicsBody.physicsNodeIndices,u=this.physicsBody.forces,c=0;c<h.length;c++){var f=h[c];u[f].springFx=0,u[f].springFy=0}for(var p=0;p<d.length;p++)!0===(e=l[d[p]]).connected&&(t=void 0===e.options.length?this.options.springLength:e.options.length,i=e.from.x-e.to.x,n=e.from.y-e.to.y,a=0===(a=Math.sqrt(i*i+n*n))?.01:a,o=i*(s=this.options.springConstant*(t-a)/a),r=n*s,e.to.level!=e.from.level?(void 0!==u[e.toId]&&(u[e.toId].springFx-=o,u[e.toId].springFy-=r),void 0!==u[e.fromId]&&(u[e.fromId].springFx+=o,u[e.fromId].springFy+=r)):(void 0!==u[e.toId]&&(u[e.toId].x-=.5*o,u[e.toId].y-=.5*r),void 0!==u[e.fromId]&&(u[e.fromId].x+=.5*o,u[e.fromId].y+=.5*r)));s=1;for(var m,v,g=0;g<h.length;g++){var y=h[g];m=Math.min(s,Math.max(-s,u[y].springFx)),v=Math.min(s,Math.max(-s,u[y].springFy)),u[y].x+=m,u[y].y+=v}for(var b=0,w=0,_=0;_<h.length;_++){var x=h[_];b+=u[x].x,w+=u[x].y}for(var k=b/h.length,S=w/h.length,E=0;E<h.length;E++){var T=h[E];u[T].x-=k,u[T].y-=S}}}]),s);function s(t,e,i){(0,o.default)(this,s),this.body=t,this.physicsBody=e,this.setOptions(i)}e.default=r},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(120)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"_calculateForces",value:function(t,e,i,n,o){0===t&&(e=t=.1*Math.random()),this.overlapAvoidanceFactor<1&&n.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*n.shape.radius,t-n.shape.radius));var r=n.edges.length+1,s=this.options.gravitationalConstant*o.mass*n.options.mass*r/Math.pow(t,2),a=e*s,l=i*s;this.physicsBody.forces[n.id].x+=a,this.physicsBody.forces[n.id].y+=l}}]),c);function c(t,e,i){return(0,s.default)(this,c),(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i))}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,r=n(i(3)),s=n(i(0)),a=n(i(1)),l=n(i(4)),d=n(i(5)),h=n(i(121)),u=(o=h.default,(0,d.default)(c,o),(0,a.default)(c,[{key:"_calculateForces",value:function(t,e,i,n,o){if(0<t){var r=o.edges.length+1,s=this.options.centralGravity*r*o.options.mass;n[o.id].x=e*s,n[o.id].y=i*s}}}]),c);function c(t,e,i){return(0,s.default)(this,c),(0,l.default)(this,(c.__proto__||(0,r.default)(c)).call(this,t,e,i))}e.default=u},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var _=n(i(8)),s=n(i(6)),o=n(i(0)),r=n(i(1)),I=i(2),x=i(76).default,v=i(228).default,u=i(74).default,c=i(47).default,a=((0,r.default)(l,[{key:"clusterByHubsize",value:function(t,e){void 0===t?t=this._getHubSize():"object"===(void 0===t?"undefined":(0,s.default)(t))&&(e=this._checkOptions(t),t=this._getHubSize());for(var i=[],n=0;n<this.body.nodeIndices.length;n++){var o=this.body.nodes[this.body.nodeIndices[n]];o.edges.length>=t&&i.push(o.id)}for(var r=0;r<i.length;r++)this.clusterByConnection(i[r],e,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(t,e){var n=this,o=0<arguments.length&&void 0!==t?t:{},i=!(1<arguments.length&&void 0!==e)||e;if(void 0===o.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");o=this._checkOptions(o);var r={},s={};I.forEach(this.body.nodes,function(t,e){var i=x.cloneOptions(t);!0===o.joinCondition(i)&&(r[e]=t,I.forEach(t.edges,function(t){void 0===n.clusteredEdges[t.id]&&(s[t.id]=t)}))}),this._cluster(r,s,o,i)}},{key:"clusterByEdgeCount",value:function(u,c,t){var f=this,e=!(2<arguments.length&&void 0!==t)||t;c=this._checkOptions(c);for(var p=[],m={},v=void 0,g=void 0,y=void 0,i=0;i<this.body.nodeIndices.length;i++){var b,w;!function(t){var i={},e={},n=f.body.nodeIndices[t],o=f.body.nodes[n];if(void 0===m[n]){g=[];for(var r=y=0;r<o.edges.length;r++)v=o.edges[r],void 0===f.clusteredEdges[v.id]&&(v.toId!==v.fromId&&y++,g.push(v));if(y===u){b=function(t){if(void 0===c.joinCondition||null===c.joinCondition)return!0;var e=x.cloneOptions(t);return c.joinCondition(e)};for(var s=!0,a=0;a<g.length;a++){v=g[a];var l=f._getConnectedId(v,n);if(!b(o)){s=!1;break}e[v.id]=v,i[n]=o,i[l]=f.body.nodes[l],m[n]=!0}if(0<(0,_.default)(i).length&&0<(0,_.default)(e).length&&!0===s)if(void 0!==(w=function(){for(var t=0;t<p.length;++t)for(var e in i)if(void 0!==p[t].nodes[e])return p[t]}())){for(var d in i)void 0===w.nodes[d]&&(w.nodes[d]=i[d]);for(var h in e)void 0===w.edges[h]&&(w.edges[h]=e[h])}else p.push({nodes:i,edges:e})}}}(i)}for(i=0;i<p.length;i++)this._cluster(p[i].nodes,p[i].edges,c,!1);!0===e&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t,e){var i=!(1<arguments.length&&void 0!==e)||e;this.clusterByEdgeCount(1,t,i)}},{key:"clusterBridges",value:function(t,e){var i=!(1<arguments.length&&void 0!==e)||e;this.clusterByEdgeCount(2,t,i)}},{key:"clusterByConnection",value:function(t,e,i){var n=!(2<arguments.length&&void 0!==i)||i;if(void 0===t)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[t])throw new Error("The nodeId given to clusterByConnection does not exist!");var o=this.body.nodes[t];void 0===(e=this._checkOptions(e,o)).clusterNodeProperties.x&&(e.clusterNodeProperties.x=o.x),void 0===e.clusterNodeProperties.y&&(e.clusterNodeProperties.y=o.y),void 0===e.clusterNodeProperties.fixed&&(e.clusterNodeProperties.fixed={},e.clusterNodeProperties.fixed.x=o.options.fixed.x,e.clusterNodeProperties.fixed.y=o.options.fixed.y);var r={},s={},a=o.id,l=x.cloneOptions(o);r[a]=o;for(var d=0;d<o.edges.length;d++){var h=o.edges[d];if(void 0===this.clusteredEdges[h.id]){var u=this._getConnectedId(h,a);if(void 0===this.clusteredNodes[u])if(u!==a)if(void 0===e.joinCondition)s[h.id]=h,r[u]=this.body.nodes[u];else{var c=x.cloneOptions(this.body.nodes[u]);!0===e.joinCondition(l,c)&&(s[h.id]=h,r[u]=this.body.nodes[u])}else s[h.id]=h}}var f=(0,_.default)(r).map(function(t){return r[t].id});for(p in r)if(r.hasOwnProperty(p))for(var p=r[p],m=0;m<p.edges.length;m++){var v=p.edges[m];-1<f.indexOf(this._getConnectedId(v,p.id))&&(s[v.id]=v)}this._cluster(r,s,e,n)}},{key:"_createClusterEdges",value:function(t,e,i,n){for(var o=void 0,r=void 0,s=void 0,a=void 0,l=void 0,d=void 0,h=(0,_.default)(t),u=[],c=0;c<h.length;c++){s=t[r=h[c]];for(var f=0;f<s.edges.length;f++)o=s.edges[f],void 0===this.clusteredEdges[o.id]&&(o.toId==o.fromId?e[o.id]=o:d=o.toId==r?(a=i.id,l=o.fromId):(a=o.toId,l=i.id,a),void 0===t[d]&&u.push({edge:o,fromId:l,toId:a}))}for(var p=[],m=0;m<u.length;m++){var v=u[m],g=v.edge,y=function(t){for(var e=0;e<p.length;e++){var i=p[e],n=t.fromId===i.fromId&&t.toId===i.toId,o=t.fromId===i.toId&&t.toId===i.fromId;if(n||o)return i}return null}(v);null===y?(y=this._createClusteredEdge(v.fromId,v.toId,g,n),p.push(y)):y.clusteringEdgeReplacingIds.push(g.id),this.body.edges[g.id].edgeReplacedById=y.id,this._backupEdgeOptions(g),g.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};return void 0===e.clusterEdgeProperties&&(e.clusterEdgeProperties={}),void 0===e.clusterNodeProperties&&(e.clusterNodeProperties={}),e}},{key:"_cluster",value:function(t,e,i,n){var o=!(3<arguments.length&&void 0!==n)||n;if(0!=(0,_.default)(t).length&&(1!=(0,_.default)(t).length||1==i.clusterNodeProperties.allowSingleNodeCluster)){for(var r in t)if(t.hasOwnProperty(r)&&void 0!==this.clusteredNodes[r])return;var s=I.deepExtend({},i.clusterNodeProperties);if(void 0!==i.processProperties){var a=[];for(var l in t)if(t.hasOwnProperty(l)){var d=x.cloneOptions(t[l]);a.push(d)}var h=[];for(var u in e)if(e.hasOwnProperty(u)&&"clusterEdge:"!==u.substr(0,12)){var c=x.cloneOptions(e[u],"edge");h.push(c)}if(!(s=i.processProperties(s,a,h)))throw new Error("The processProperties function does not return properties!")}void 0===s.id&&(s.id="cluster:"+I.randomUUID());var f=s.id;void 0===s.label&&(s.label="cluster");var p=void 0;void 0===s.x&&(p=this._getClusterPosition(t),s.x=p.x),void 0===s.y&&(void 0===p&&(p=this._getClusterPosition(t)),s.y=p.y),s.id=f;var m=this.body.functions.createNode(s,v);m.containedNodes=t,m.containedEdges=e,m.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[s.id]=m,this._clusterEdges(t,e,s,i.clusterEdgeProperties),!(s.id=void 0)===o&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){void 0===this.clusteredEdges[t.id]&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var e=this.clusteredEdges[t.id];void 0!==e&&(t.setOptions({physics:e.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return void 0!==this.body.nodes[t]?!0===this.body.nodes[t].isCluster:(console.log("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var e=(0,_.default)(t),i=t[e[0]].x,n=t[e[0]].x,o=t[e[0]].y,r=t[e[0]].y,s=void 0,a=1;a<e.length;a++)i=(s=t[e[a]]).x<i?s.x:i,n=s.x>n?s.x:n,o=s.y<o?s.y:o,r=s.y>r?s.y:r;return{x:.5*(i+n),y:.5*(o+r)}}},{key:"openCluster",value:function(t,e,i){var n=!(2<arguments.length&&void 0!==i)||i;if(void 0===t)throw new Error("No clusterNodeId supplied to openCluster.");var o=this.body.nodes[t];if(void 0===o)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(!0!==o.isCluster||void 0===o.containedNodes||void 0===o.containedEdges)throw new Error("The node:"+t+" is not a valid cluster.");var r=this.findNode(t),s=r.indexOf(t)-1;if(0<=s){var a=r[s];return this.body.nodes[a]._openChildCluster(t),delete this.body.nodes[t],void(!0===n&&this.body.emitter.emit("_dataChanged"))}var l=o.containedNodes,d=o.containedEdges;if(void 0!==e&&void 0!==e.releaseFunction&&"function"==typeof e.releaseFunction){var h={},u={x:o.x,y:o.y};for(var c in l)if(l.hasOwnProperty(c)){var f=this.body.nodes[c];h[c]={x:f.x,y:f.y}}var p=e.releaseFunction(u,h);for(var m in l)if(l.hasOwnProperty(m)){var v=this.body.nodes[m];void 0!==p[m]&&(v.x=void 0===p[m].x?o.x:p[m].x,v.y=void 0===p[m].y?o.y:p[m].y)}}else I.forEach(l,function(t){!1===t.options.fixed.x&&(t.x=o.x),!1===t.options.fixed.y&&(t.y=o.y)});for(var g in l)if(l.hasOwnProperty(g)){var y=this.body.nodes[g];y.vx=o.vx,y.vy=o.vy,y.setOptions({physics:!0}),delete this.clusteredNodes[g]}for(var b=[],w=0;w<o.edges.length;w++)b.push(o.edges[w]);for(var _=0;_<b.length;_++){for(var x=b[_],k=this._getConnectedId(x,t),S=this.clusteredNodes[k],E=0;E<x.clusteringEdgeReplacingIds.length;E++){var T=x.clusteringEdgeReplacingIds[E],D=this.body.edges[T];if(void 0!==D)if(void 0!==S){var C=this.body.nodes[S.clusterId];delete d[(C.containedEdges[D.id]=D).id];var M=D.fromId,O=D.toId;D.toId==k?O=S.clusterId:M=S.clusterId,this._createClusteredEdge(M,O,D,C.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(D)}x.remove()}for(var L in d)d.hasOwnProperty(L)&&this._restoreEdge(d[L]);delete this.body.nodes[t],!0===n&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var e=[];if(!0===this.isCluster(t)){var i=this.body.nodes[t].containedNodes;for(var n in i)i.hasOwnProperty(n)&&e.push(this.body.nodes[n].id)}return e}},{key:"findNode",value:function(t){for(var e=[],i=0,n=void 0;void 0!==this.clusteredNodes[t]&&i<100;){if(void 0===(n=this.body.nodes[t]))return[];e.push(n.id),t=this.clusteredNodes[t].clusterId,i++}return void 0===(n=this.body.nodes[t])?[]:(e.push(n.id),e.reverse(),e)}},{key:"updateClusteredNode",value:function(t,e){if(void 0===t)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(void 0===e)throw new Error("No newOptions supplied to updateClusteredNode.");if(void 0===this.body.nodes[t])throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(e),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,e){if(void 0===t)throw new Error("No startEdgeId supplied to updateEdge.");if(void 0===e)throw new Error("No newOptions supplied to updateEdge.");if(void 0===this.body.edges[t])throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var i=this.getClusteredEdges(t),n=0;n<i.length;n++)this.body.edges[i[n]].setOptions(e);this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var e=[],i=0;void 0!==t&&void 0!==this.body.edges[t]&&i<100;)e.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,i++;return e.reverse(),e}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var e=[t],i=[],n=[],o=0;0<e.length&&o<100;){var r=e.pop();if(void 0!==r){var s=this.body.edges[r];if(void 0!==s){o++;var a=s.clusteringEdgeReplacingIds;if(void 0===a)n.push(r);else for(var l=0;l<a.length;++l){var d=a[l];-1===e.indexOf(a)&&-1===i.indexOf(a)&&e.push(d)}i.push(r)}}}return n}},{key:"_getConnectedId",value:function(t,e){return t.toId!=e?t.toId:(t.fromId,t.fromId)}},{key:"_getHubSize",value:function(){for(var t=0,e=0,i=0,n=0,o=0;o<this.body.nodeIndices.length;o++){var r=this.body.nodes[this.body.nodeIndices[o]];r.edges.length>n&&(n=r.edges.length),t+=r.edges.length,e+=Math.pow(r.edges.length,2),i+=1}t/=i;var s=(e/=i)-Math.pow(t,2),a=Math.sqrt(s),l=Math.floor(t+2*a);return n<l&&(l=n),l}},{key:"_createClusteredEdge",value:function(t,e,i,n,o){var r=x.cloneOptions(i,"edge");I.deepExtend(r,n),r.from=t,r.to=e,r.id="clusterEdge:"+I.randomUUID(),void 0!==o&&I.deepExtend(r,o);var s=this.body.functions.createEdge(r);return s.clusteringEdgeReplacingIds=[i.id],s.connect(),this.body.edges[s.id]=s}},{key:"_clusterEdges",value:function(t,e,i,n){if(e instanceof u){var o=e,r={};r[o.id]=o,e=r}if(t instanceof c){var s=t,a={};a[s.id]=s,t=a}if(null==i)throw new Error("_clusterEdges: parameter clusterNode required");for(var l in void 0===n&&(n=i.clusterEdgeProperties),this._createClusterEdges(t,e,i,n),e)if(e.hasOwnProperty(l)&&void 0!==this.body.edges[l]){var d=this.body.edges[l];this._backupEdgeOptions(d),d.setOptions({physics:!1})}for(var h in t)t.hasOwnProperty(h)&&(this.clusteredNodes[h]={clusterId:i.id,node:this.body.nodes[h]},this.body.nodes[h].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(void 0!==t){var e=this.clusteredNodes[t];if(void 0!==e){var i=e.clusterId;if(void 0!==i)return this.body.nodes[i]}}}},{key:"_filter",value:function(t,e){var i=[];return I.forEach(t,function(t){e(t)&&i.push(t)}),i}},{key:"_updateState",value:function(){function e(e){I.forEach(r.body.nodes,function(t){!0===t.isCluster&&e(t)})}var r=this,t=void 0,i=[],s=[];for(t in this.clusteredNodes)this.clusteredNodes.hasOwnProperty(t)&&void 0===this.body.nodes[t]&&i.push(t);e(function(t){for(var e=0;e<i.length;e++)delete t.containedNodes[i[e]]});for(var n=0;n<i.length;n++)delete this.clusteredNodes[i[n]];I.forEach(this.clusteredEdges,function(t){var e=r.body.edges[t];void 0!==e&&e.endPointsValid()||s.push(t)}),e(function(t){I.forEach(t.containedEdges,function(t,e){t.endPointsValid()||-1!==s.indexOf(e)||s.push(e)})}),I.forEach(this.body.edges,function(t,e){var i=!0,n=t.clusteringEdgeReplacingIds;if(void 0!==n){var o=0;I.forEach(n,function(t){var e=r.body.edges[t];void 0!==e&&e.endPointsValid()&&(o+=1)}),i=0<o}t.endPointsValid()&&i||s.push(e)}),e(function(n){I.forEach(s,function(i){delete n.containedEdges[i],I.forEach(n.edges,function(t,e){t.id!==i?t.clusteringEdgeReplacingIds=r._filter(t.clusteringEdgeReplacingIds,function(t){return-1===s.indexOf(t)}):n.edges[e]=null}),n.edges=r._filter(n.edges,function(t){return null!==t})})}),I.forEach(s,function(t){delete r.clusteredEdges[t]}),I.forEach(s,function(t){delete r.body.edges[t]});var o=(0,_.default)(this.body.edges);I.forEach(o,function(t){var e=r.body.edges[t],i=r._isClusteredNode(e.fromId)||r._isClusteredNode(e.toId);if(i!==r._isClusteredEdge(e.id)){if(!i)throw new Error("remove edge from clustering not implemented!");var n=r._getClusterNodeForNode(e.fromId);void 0!==n&&r._clusterEdges(r.body.nodes[e.fromId],e,n);var o=r._getClusterNodeForNode(e.toId);void 0!==o&&r._clusterEdges(r.body.nodes[e.toId],e,o)}});for(var a=!1,l=!0;l;)!function(){var n=[];e(function(t){var e=(0,_.default)(t.containedNodes).length,i=!0===t.options.allowSingleNodeCluster;(i&&e<1||!i&&e<2)&&n.push(t.id)});for(var t=0;t<n.length;++t)r.openCluster(n[t],{},!1);l=0<n.length,a=a||l}();a&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return void 0!==this.clusteredNodes[t]}},{key:"_isClusteredEdge",value:function(t){return void 0!==this.clusteredEdges[t]}}]),l);function l(t){var e=this;(0,o.default)(this,l),this.body=t,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},I.extend(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){e.clusteredNodes={},e.clusteredEdges={}})}e.default=a},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(i(3)),l=n(i(0)),r=n(i(1)),d=n(i(4)),s=n(i(5)),h=i(2),u=i(47).default,c=(o=u,(0,s.default)(f,o),(0,r.default)(f,[{key:"_openChildCluster",value:function(t){var n=this,e=this.body.nodes[t];if(void 0===this.containedNodes[t])throw new Error("node with id: "+t+" not in current cluster");if(!e.isCluster)throw new Error("node with id: "+t+" is not a cluster");delete this.containedNodes[t],h.forEach(e.edges,function(t){delete n.containedEdges[t.id]}),h.forEach(e.containedNodes,function(t,e){n.containedNodes[e]=t}),e.containedNodes={},h.forEach(e.containedEdges,function(t,e){n.containedEdges[e]=t}),e.containedEdges={},h.forEach(e.edges,function(i){h.forEach(n.edges,function(e){var t=e.clusteringEdgeReplacingIds.indexOf(i.id);-1!==t&&(h.forEach(i.clusteringEdgeReplacingIds,function(t){e.clusteringEdgeReplacingIds.push(t),n.body.edges[t].edgeReplacedById=e.id}),e.clusteringEdgeReplacingIds.splice(t,1))})}),e.edges=[]}}]),f);function f(t,e,i,n,o,r){(0,l.default)(this,f);var s=(0,d.default)(this,(f.__proto__||(0,a.default)(f)).call(this,t,e,i,n,o,r));return s.isCluster=!0,s.containedNodes={},s.containedEdges={},s}e.default=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(1)),s=i(2),a=((0,r.default)(l,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("dragStart",function(){t.dragging=!0}),this.body.emitter.on("dragEnd",function(){t.dragging=!1}),this.body.emitter.on("_resizeNodes",function(){t._resizeNodes()}),this.body.emitter.on("_redraw",function(){!1===t.renderingActive&&t._redraw()}),this.body.emitter.on("_blockRedraw",function(){t.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){t.allowRedraw=!0,t.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",this._requestRedraw.bind(this)),this.body.emitter.on("_startRendering",function(){t.renderRequests+=1,t.renderingActive=!0,t._startRendering()}),this.body.emitter.on("_stopRendering",function(){t.renderRequests-=1,t.renderingActive=0<t.renderRequests,t.renderTimer=void 0}),this.body.emitter.on("destroy",function(){t.renderRequests=0,t.allowRedraw=!1,!(t.renderingActive=!1)===t.requiresTimeout?clearTimeout(t.renderTimer):window.cancelAnimationFrame(t.renderTimer),t.body.emitter.off()})}},{key:"setOptions",value:function(t){void 0!==t&&s.selectiveDeepExtend(["hideEdgesOnDrag","hideNodesOnDrag"],this.options,t)}},{key:"_requestNextFrame",value:function(t,e){if("undefined"!=typeof window){var i=void 0,n=window;return!0===this.requiresTimeout?i=n.setTimeout(t,e):n.requestAnimationFrame&&(i=n.requestAnimationFrame(t)),i}}},{key:"_startRendering",value:function(){!0===this.renderingActive&&void 0===this.renderTimer&&(this.renderTimer=this._requestNextFrame(this._renderStep.bind(this),this.simulationInterval))}},{key:"_renderStep",value:function(){!0===this.renderingActive&&(!(this.renderTimer=void 0)===this.requiresTimeout&&this._startRendering(),this._redraw(),!1===this.requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;!0!==this.redrawRequested&&!1===this.renderingActive&&!0===this.allowRedraw&&(this.redrawRequested=!0,this._requestNextFrame(function(){t._redraw(!1)},0))}},{key:"_redraw",value:function(t){var e=0<arguments.length&&void 0!==t&&t;if(!0===this.allowRedraw){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1,0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.canvas.setTransform();var i=this.canvas.getContext(),n=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(i.clearRect(0,0,n,o),0===this.canvas.frame.clientWidth)return;i.save(),i.translate(this.body.view.translation.x,this.body.view.translation.y),i.scale(this.body.view.scale,this.body.view.scale),i.beginPath(),this.body.emitter.emit("beforeDrawing",i),i.closePath(),!1===e&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&this._drawEdges(i),(!1===this.dragging||!0===this.dragging&&!1===this.options.hideNodesOnDrag)&&this._drawNodes(i,e),i.beginPath(),this.body.emitter.emit("afterDrawing",i),i.closePath(),i.restore(),!0===e&&i.clearRect(0,0,n,o)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var e=this.body.nodes,i=void 0;for(var n in e)e.hasOwnProperty(n)&&((i=e[n]).resize(t),i.updateBoundingBox(t,i.selected));t.restore()}},{key:"_drawNodes",value:function(t,e){for(var i=1<arguments.length&&void 0!==e&&e,n=this.body.nodes,o=this.body.nodeIndices,r=void 0,s=[],a=this.canvas.DOMtoCanvas({x:-20,y:-20}),l=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+20,y:this.canvas.frame.canvas.clientHeight+20}),d={top:a.y,left:a.x,bottom:l.y,right:l.x},h=0;h<o.length;h++)(r=n[o[h]]).isSelected()?s.push(o[h]):!0===i?r.draw(t):!0===r.isBoundingBoxOverlappingWith(d)?r.draw(t):r.updateBoundingBox(t,r.selected);for(var u=0;u<s.length;u++)(r=n[s[u]]).draw(t)}},{key:"_drawEdges",value:function(t){for(var e=this.body.edges,i=this.body.edgeIndices,n=void 0,o=0;o<i.length;o++)!0===(n=e[i[o]]).connected&&n.draw(t)}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,-1!=t.indexOf("msie 9.0")?this.requiresTimeout=!0:-1!=t.indexOf("safari")&&t.indexOf("chrome")<=-1&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}}]),l);function l(t,e){(0,o.default)(this,l),function(){var t;void 0!==window&&(t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),window.requestAnimationFrame=void 0===t?function(t){t()}:t}(),this.body=t,this.canvas=e,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideNodesOnDrag:!1},s.extend(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}e.default=a},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(1)),s=i(10),a=i(37),l=i(2),d=((0,r.default)(h,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.once("resize",function(t){0!==t.width&&(e.body.view.translation.x=.5*t.width),0!==t.height&&(e.body.view.translation.y=.5*t.height)}),this.body.emitter.on("setSize",this.setSize.bind(this)),this.body.emitter.on("destroy",function(){e.hammerFrame.destroy(),e.hammer.destroy(),e._cleanUp()})}},{key:"setOptions",value:function(t){var e=this;void 0!==t&&l.selectiveDeepExtend(["width","height","autoResize"],this.options,t),!0===this.options.autoResize&&(this._cleanUp(),this.resizeTimer=setInterval(function(){!0===e.setSize()&&e.body.emitter.emit("_requestRedraw")},1e3),this.resizeFunction=this._onResize.bind(this),l.addEventListener(window,"resize",this.resizeFunction))}},{key:"_cleanUp",value:function(){void 0!==this.resizeTimer&&clearInterval(this.resizeTimer),l.removeEventListener(window,"resize",this.resizeFunction),this.resizeFunction=void 0}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(t){var e=0<arguments.length&&void 0!==t?t:this.pixelRatio;!0===this.initialized&&(this.cameraState.previousWidth=this.frame.canvas.width/e,this.cameraState.previousHeight=this.frame.canvas.height/e,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/e,y:.5*this.frame.canvas.height/e}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&0<this.cameraState.previousWidth){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,e=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;1!=t&&1!=e?i=.5*this.cameraState.scale*(t+e):1!=t?i=this.cameraState.scale*t:1!=e&&(i=this.cameraState.scale*e),this.body.view.scale=i;var n=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),o=n.x-this.cameraState.position.x,r=n.y-this.cameraState.position.y;this.body.view.translation.x+=o*this.body.view.scale,this.body.view.translation.y+=r*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if("number"==typeof t)return t+"px";if("string"==typeof t){if(-1!==t.indexOf("%")||-1!==t.indexOf("px"))return t;if(-1===t.indexOf("%"))return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=900,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var e=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new s(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:s.DIRECTION_ALL}),a.onTouch(this.hammer,function(t){e.body.eventListeners.onTouch(t)}),this.hammer.on("tap",function(t){e.body.eventListeners.onTap(t)}),this.hammer.on("doubletap",function(t){e.body.eventListeners.onDoubleTap(t)}),this.hammer.on("press",function(t){e.body.eventListeners.onHold(t)}),this.hammer.on("panstart",function(t){e.body.eventListeners.onDragStart(t)}),this.hammer.on("panmove",function(t){e.body.eventListeners.onDrag(t)}),this.hammer.on("panend",function(t){e.body.eventListeners.onDragEnd(t)}),this.hammer.on("pinch",function(t){e.body.eventListeners.onPinch(t)}),this.frame.canvas.addEventListener("mousewheel",function(t){e.body.eventListeners.onMouseWheel(t)}),this.frame.canvas.addEventListener("DOMMouseScroll",function(t){e.body.eventListeners.onMouseWheel(t)}),this.frame.canvas.addEventListener("mousemove",function(t){e.body.eventListeners.onMouseMove(t)}),this.frame.canvas.addEventListener("contextmenu",function(t){e.body.eventListeners.onContext(t)}),this.hammerFrame=new s(this.frame),a.onRelease(this.hammerFrame,function(t){e.body.eventListeners.onRelease(t)})}},{key:"setSize",value:function(t,e){var i=0<arguments.length&&void 0!==t?t:this.options.width,n=1<arguments.length&&void 0!==e?e:this.options.height;i=this._prepareValue(i),n=this._prepareValue(n);var o=!1,r=this.frame.canvas.width,s=this.frame.canvas.height,a=this.pixelRatio;if(this._setPixelRatio(),i!=this.options.width||n!=this.options.height||this.frame.style.width!=i||this.frame.style.height!=n)this._getCameraState(a),this.frame.style.width=i,this.frame.style.height=n,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=i,this.options.height=n,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},o=!0;else{var l=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),d=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);this.frame.canvas.width===l&&this.frame.canvas.height===d||this._getCameraState(a),this.frame.canvas.width!==l&&(this.frame.canvas.width=l,o=!0),this.frame.canvas.height!==d&&(this.frame.canvas.height=d,o=!0)}return!0===o&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(r/this.pixelRatio),oldHeight:Math.round(s/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,o}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");var e=1;return"undefined"!=typeof window&&(e=window.devicePixelRatio||1),e/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),h);function h(t){(0,o.default)(this,h),this.body=t,this.pixelRatio=1,this.resizeTimer=void 0,this.resizeFunction=this._onResize.bind(this),this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},l.extend(this.options,this.defaultOptions),this.bindEventListeners()}e.default=d},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(1)),s=i(2),f=i(76).default,a=((0,r.default)(l,[{key:"setOptions",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};this.options=e}},{key:"fit",value:function(t,e){var i=0<arguments.length&&void 0!==t?t:{nodes:[]},n=1<arguments.length&&void 0!==e&&e,o=void 0,r=void 0;if(void 0!==i.nodes&&0!==i.nodes.length||(i.nodes=this.body.nodeIndices),!0===n){var s=0;for(var a in this.body.nodes)this.body.nodes.hasOwnProperty(a)&&!0===this.body.nodes[a].predefinedPosition&&(s+=1);if(s>.5*this.body.nodeIndices.length)return void this.fit(i,!1);o=f.getRange(this.body.nodes,i.nodes),r=12.662/(this.body.nodeIndices.length+7.4147)+.0964822,r*=Math.min(this.canvas.frame.canvas.clientWidth/600,this.canvas.frame.canvas.clientHeight/600)}else{this.body.emitter.emit("_resizeNodes"),o=f.getRange(this.body.nodes,i.nodes);var l=1.1*Math.abs(o.maxX-o.minX),d=1.1*Math.abs(o.maxY-o.minY),h=this.canvas.frame.canvas.clientWidth/l,u=this.canvas.frame.canvas.clientHeight/d;r=h<=u?h:u}1<r?r=1:0===r&&(r=1);var c={position:f.findCenter(o),scale:r,animation:i.animation};this.moveTo(c)}},{key:"focus",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:{};if(void 0!==this.body.nodes[t]){var n={x:this.body.nodes[t].x,y:this.body.nodes[t].y};i.position=n,i.lockedOnNode=t,this.moveTo(i)}else console.log("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){void 0!==t&&(void 0===t.offset&&(t.offset={x:0,y:0}),void 0===t.offset.x&&(t.offset.x=0),void 0===t.offset.y&&(t.offset.y=0),void 0===t.scale&&(t.scale=this.body.view.scale),void 0===t.position&&(t.position=this.getViewPosition()),void 0===t.animation&&(t.animation={duration:0}),!1===t.animation&&(t.animation={duration:0}),!0===t.animation&&(t.animation={}),void 0===t.animation.duration&&(t.animation.duration=1e3),void 0===t.animation.easingFunction&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t))}},{key:"animateView",value:function(t){if(void 0!==t){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),!0===t.locked&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var e=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i=e.x-t.position.x,n=e.y-t.position.y;this.targetTranslation={x:this.sourceTranslation.x+i*this.targetScale+t.offset.x,y:this.sourceTranslation.y+n*this.targetScale+t.offset.y},0===t.animation.duration?null!=this.lockedOnNodeId?(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=this._transitionRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var t=this.body.nodes[this.lockedOnNodeId].x,e=this.body.nodes[this.lockedOnNodeId].y,i=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n=i.x-t,o=i.y-e,r=this.body.view.translation,s={x:r.x+n*this.body.view.scale+this.lockedOnNodeOffset.x,y:r.y+o*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(t){var e=0<arguments.length&&void 0!==t&&t;this.easingTime+=this.animationSpeed,this.easingTime=!0===e?1:this.easingTime;var i=s.easingFunctions[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*i,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*i,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*i},1<=this.easingTime&&(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,null!=this.lockedOnNodeId&&(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),l);function l(t,e){var i=this;(0,o.default)(this,l),this.body=t,this.canvas=e,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",this.fit.bind(this)),this.body.emitter.on("animationFinished",function(){i.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",this.releaseNode.bind(this))}e.default=a},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(1)),s=i(2),a=i(233).default,g=i(104).default,l=((0,r.default)(d,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer})}},{key:"setOptions",value:function(t){void 0!==t&&(s.selectiveNotDeepExtend(["hideEdgesOnDrag","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,t),s.mergeOptions(this.options,t,"keyboard"),t.tooltip&&(s.extend(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=s.parseColor(t.tooltip.color)))),this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-s.getAbsoluteLeft(this.canvas.frame.canvas),y:t.y-s.getAbsoluteTop(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(t){50<(new Date).valueOf()-this.touchTime&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(e,t,i),this.selectionHandler._generateClickEvent("click",t,e)}},{key:"onDoubleTap",value:function(t){var e=this.getPointer(t.center);this.selectionHandler._generateClickEvent("doubleClick",t,e)}},{key:"onHold",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(e,t,i),this.selectionHandler._generateClickEvent("click",t,e),this.selectionHandler._generateClickEvent("hold",t,e)}},{key:"onRelease",value:function(t){if(10<(new Date).valueOf()-this.touchTime){var e=this.getPointer(t.center);this.selectionHandler._generateClickEvent("release",t,e),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(t){var e=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler._generateClickEvent("oncontext",t,e)}},{key:"checkSelectionChanges",value:function(t,e,i){var n=2<arguments.length&&void 0!==i&&i,o=this.selectionHandler.getSelection(),r=!1;r=!0===n?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t);var s=this.selectionHandler.getSelection(),a=this._determineDifference(o,s),l=this._determineDifference(s,o);0<a.edges.length&&(this.selectionHandler._generateClickEvent("deselectEdge",e,t,o),r=!0),0<a.nodes.length&&(this.selectionHandler._generateClickEvent("deselectNode",e,t,o),r=!0),0<l.nodes.length&&(this.selectionHandler._generateClickEvent("selectNode",e,t),r=!0),0<l.edges.length&&(this.selectionHandler._generateClickEvent("selectEdge",e,t),r=!0),!0===r&&this.selectionHandler._generateClickEvent("select",e,t)}},{key:"_determineDifference",value:function(t,e){function i(t,e){for(var i=[],n=0;n<t.length;n++){var o=t[n];-1===e.indexOf(o)&&i.push(o)}return i}return{nodes:i(t.nodes,e.nodes),edges:i(t.edges,e.edges)}}},{key:"onDragStart",value:function(t){void 0===this.drag.pointer&&this.onTouch(t);var e=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=s.extend({},this.body.view.translation),(this.drag.nodeId=void 0)!==e&&!0===this.options.dragNodes){this.drag.nodeId=e.id,!1===e.isSelected()&&(this.selectionHandler.unselectAll(),this.selectionHandler.selectObject(e)),this.selectionHandler._generateClickEvent("dragStart",t,this.drag.pointer);var i=this.selectionHandler.selectionObj.nodes;for(var n in i)if(i.hasOwnProperty(n)){var o=i[n],r={id:o.id,node:o,x:o.x,y:o.y,xFixed:o.options.fixed.x,yFixed:o.options.fixed.y};o.options.fixed.x=!0,o.options.fixed.y=!0,this.drag.selection.push(r)}}else this.selectionHandler._generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}},{key:"onDrag",value:function(t){var i=this;if(!0!==this.drag.pinched){this.body.emitter.emit("unlockNode");var e=this.getPointer(t.center),n=this.drag.selection;if(n&&n.length&&!0===this.options.dragNodes){this.selectionHandler._generateClickEvent("dragging",t,e);var o=e.x-this.drag.pointer.x,r=e.y-this.drag.pointer.y;n.forEach(function(t){var e=t.node;!1===t.xFixed&&(e.x=i.canvas._XconvertDOMtoCanvas(i.canvas._XconvertCanvasToDOM(t.x)+o)),!1===t.yFixed&&(e.y=i.canvas._YconvertDOMtoCanvas(i.canvas._YconvertCanvasToDOM(t.y)+r))}),this.body.emitter.emit("startSimulation")}else if(!0===this.options.dragView){if(this.selectionHandler._generateClickEvent("dragging",t,e,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);var s=e.x-this.drag.pointer.x,a=e.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+s,y:this.drag.translation.y+a},this.body.emitter.emit("_requestRedraw")}}}},{key:"onDragEnd",value:function(t){this.drag.dragging=!1;var e=this.drag.selection;e&&e.length?(e.forEach(function(t){t.node.options.fixed.x=t.xFixed,t.node.options.fixed.y=t.yFixed}),this.selectionHandler._generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler._generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}},{key:"onPinch",value:function(t){var e=this.getPointer(t.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var i=this.pinch.scale*t.scale;this.zoom(i,e)}},{key:"zoom",value:function(t,e){if(!0===this.options.zoomView){var i=this.body.view.scale;t<1e-5&&(t=1e-5),10<t&&(t=10);var n=void 0;void 0!==this.drag&&!0===this.drag.dragging&&(n=this.canvas.DOMtoCanvas(this.drag.pointer));var o=this.body.view.translation,r=t/i,s=(1-r)*e.x+o.x*r,a=(1-r)*e.y+o.y*r;if(this.body.view.scale=t,this.body.view.translation={x:s,y:a},null!=n){var l=this.canvas.canvasToDOM(n);this.drag.pointer.x=l.x,this.drag.pointer.y=l.y}this.body.emitter.emit("_requestRedraw"),i<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:e}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:e})}}},{key:"onMouseWheel",value:function(t){if(!0===this.options.zoomView){var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),0!==e){var i=this.body.view.scale,n=e/10;e<0&&(n/=1-n),i*=1+n;var o=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(i,o)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var e=this,i=this.getPointer({x:t.clientX,y:t.clientY}),n=!1;void 0!==this.popup&&(!1===this.popup.hidden&&this._checkHidePopup(i),!1===this.popup.hidden&&(n=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),!1===this.options.keyboard.bindToWindow&&!0===this.options.keyboard.enabled&&this.canvas.frame.focus(),!1===n&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=setTimeout(function(){return e._checkShowPopup(i)},this.options.tooltipDelay))),!0===this.options.hover&&this.selectionHandler.hoverObject(t,i)}},{key:"_checkShowPopup",value:function(t){var e=this.canvas._XconvertDOMtoCanvas(t.x),i=this.canvas._YconvertDOMtoCanvas(t.y),n={left:e,top:i,right:e,bottom:i},o=void 0===this.popupObj?void 0:this.popupObj.id,r=!1,s="node";if(void 0===this.popupObj){for(var a=this.body.nodeIndices,l=this.body.nodes,d=void 0,h=[],u=0;u<a.length;u++)!0===(d=l[a[u]]).isOverlappingWith(n)&&void 0!==d.getTitle()&&h.push(a[u]);0<h.length&&(this.popupObj=l[h[h.length-1]],r=!0)}if(void 0===this.popupObj&&!1===r){for(var c=this.body.edgeIndices,f=this.body.edges,p=void 0,m=[],v=0;v<c.length;v++)!0===(p=f[c[v]]).isOverlappingWith(n)&&!0===p.connected&&void 0!==p.getTitle()&&m.push(c[v]);0<m.length&&(this.popupObj=f[m[m.length-1]],s="edge")}void 0!==this.popupObj?this.popupObj.id!==o&&(void 0===this.popup&&(this.popup=new g(this.canvas.frame)),this.popup.popupTargetType=s,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var e=this.selectionHandler._pointerToPositionObject(t),i=!1;if("node"===this.popup.popupTargetType){if(void 0!==this.body.nodes[this.popup.popupTargetId]&&!0===(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(e))){var n=this.selectionHandler.getNodeAt(t);i=void 0!==n&&n.id===this.popup.popupTargetId}}else void 0===this.selectionHandler.getNodeAt(t)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(e));!1===i&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),d);function d(t,e,i){(0,o.default)(this,d),this.body=t,this.canvas=e,this.selectionHandler=i,this.navigationHandler=new a(t,e),this.body.eventListeners.onTap=this.onTap.bind(this),this.body.eventListeners.onTouch=this.onTouch.bind(this),this.body.eventListeners.onDoubleTap=this.onDoubleTap.bind(this),this.body.eventListeners.onHold=this.onHold.bind(this),this.body.eventListeners.onDragStart=this.onDragStart.bind(this),this.body.eventListeners.onDrag=this.onDrag.bind(this),this.body.eventListeners.onDragEnd=this.onDragEnd.bind(this),this.body.eventListeners.onMouseWheel=this.onMouseWheel.bind(this),this.body.eventListeners.onPinch=this.onPinch.bind(this),this.body.eventListeners.onMouseMove=this.onMouseMove.bind(this),this.body.eventListeners.onRelease=this.onRelease.bind(this),this.body.eventListeners.onContext=this.onContext.bind(this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=this.getPointer.bind(this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0},s.extend(this.options,this.defaultOptions),this.bindEventListeners()}e.default=l},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(1)),s=i(10),a=i(37),l=i(35),d=((0,r.default)(h,[{key:"setOptions",value:function(t){void 0!==t&&(this.options=t,this.create())}},{key:"create",value:function(){!0===this.options.navigationButtons?!1===this.iconsCreated&&this.loadNavigationElements():!0===this.iconsCreated&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var n=0;n<e.length;n++){this.navigationDOM[e[n]]=document.createElement("div"),this.navigationDOM[e[n]].className="vis-button vis-"+e[n],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[n]]);var o=new s(this.navigationDOM[e[n]]);"_fit"===i[n]?a.onTouch(o,this._fit.bind(this)):a.onTouch(o,this.bindToRedraw.bind(this,i[n])),this.navigationHammers.push(o)}var r=new s(this.canvas.frame);a.onRelease(r,function(){t._stopMovement()}),this.navigationHammers.push(r),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){void 0===this.boundFunctions[t]&&(this.boundFunctions[t]=this[t].bind(this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(t){void 0!==this.boundFunctions[t]&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){700<(new Date).valueOf()-this.touchTime&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)this.boundFunctions.hasOwnProperty(t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,e=this.body.view.scale*(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,n=e/t,o=(1-n)*this.canvas.canvasViewCenter.x+i.x*n,r=(1-n)*this.canvas.canvasViewCenter.y+i.y*n;this.body.view.scale=e,this.body.view.translation={x:o,y:r},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,e=this.body.view.scale/(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,n=e/t,o=(1-n)*this.canvas.canvasViewCenter.x+i.x*n,r=(1-n)*this.canvas.canvasViewCenter.y+i.y*n;this.body.view.scale=e,this.body.view.translation={x:o,y:r},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t=this;void 0!==this.keycharm&&this.keycharm.destroy(),!0===this.options.keyboard.enabled&&(!0===this.options.keyboard.bindToWindow?this.keycharm=l({container:window,preventDefault:!0}):this.keycharm=l({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),!0===this.activated&&(this.keycharm.bind("up",function(){t.bindToRedraw("_moveUp")},"keydown"),this.keycharm.bind("down",function(){t.bindToRedraw("_moveDown")},"keydown"),this.keycharm.bind("left",function(){t.bindToRedraw("_moveLeft")},"keydown"),this.keycharm.bind("right",function(){t.bindToRedraw("_moveRight")},"keydown"),this.keycharm.bind("=",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num+",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num-",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("-",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("[",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("]",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pageup",function(){t.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pagedown",function(){t.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("up",function(){t.unbindFromRedraw("_moveUp")},"keyup"),this.keycharm.bind("down",function(){t.unbindFromRedraw("_moveDown")},"keyup"),this.keycharm.bind("left",function(){t.unbindFromRedraw("_moveLeft")},"keyup"),this.keycharm.bind("right",function(){t.unbindFromRedraw("_moveRight")},"keyup"),this.keycharm.bind("=",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num+",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("-",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("[",function(){t.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("]",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pageup",function(){t.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pagedown",function(){t.unbindFromRedraw("_zoomOut")},"keyup")))}}]),h);function h(t,e){var i=this;(0,o.default)(this,h),this.body=t,this.canvas=e,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){i.activated=!0,i.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){i.activated=!1,i.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){void 0!==i.keycharm&&i.keycharm.destroy()}),this.options={}}e.default=d},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=n(i(1)),s=i(47).default,a=i(74).default,l=i(2),d=((0,r.default)(h,[{key:"setOptions",value:function(t){void 0!==t&&l.selectiveDeepExtend(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,t)}},{key:"selectOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var i=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),void 0!==i&&(e=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return e}},{key:"selectAdditionalOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var i=this.getNodeAt(t)||this.getEdgeAt(t);void 0!==i&&((e=!0)===i.isSelected()?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return e}},{key:"_initBaseEvent",value:function(t,e){var i={};return i.pointer={DOM:{x:e.x,y:e.y},canvas:this.canvas.DOMtoCanvas(e)},i.event=t,i}},{key:"_generateClickEvent",value:function(t,e,i,n,o){var r=4<arguments.length&&void 0!==o&&o,s=this._initBaseEvent(e,i);if(!0===r)s.nodes=[],s.edges=[];else{var a=this.getSelection();s.nodes=a.nodes,s.edges=a.edges}void 0!==n&&(s.previousSelection=n),"click"==t&&(s.items=this.getClickedItems(i)),this.body.emitter.emit(t,s)}},{key:"selectObject",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:this.options.selectConnectedEdges;return void 0!==t&&(t instanceof s&&!0===i&&this._selectConnectedEdges(t),t.select(),this._addToSelection(t),!0)}},{key:"deselectObject",value:function(t){!0===t.isSelected()&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var e=[],i=this.body.nodes,n=0;n<this.body.nodeIndices.length;n++){var o=this.body.nodeIndices[n];i[o].isOverlappingWith(t)&&e.push(o)}return e}},{key:"_pointerToPositionObject",value:function(t){var e=this.canvas.DOMtoCanvas(t);return{left:e.x-1,top:e.y+1,right:e.x+1,bottom:e.y-1}}},{key:"getNodeAt",value:function(t,e){var i=!(1<arguments.length&&void 0!==e)||e,n=this._pointerToPositionObject(t),o=this._getAllNodesOverlappingWith(n);return 0<o.length?!0===i?this.body.nodes[o[o.length-1]]:o[o.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(t,e){for(var i=this.body.edges,n=0;n<this.body.edgeIndices.length;n++){var o=this.body.edgeIndices[n];i[o].isOverlappingWith(t)&&e.push(o)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var e=[];return this._getEdgesOverlappingWith(t,e),e}},{key:"getEdgeAt",value:function(t,e){for(var i=!(1<arguments.length&&void 0!==e)||e,n=this.canvas.DOMtoCanvas(t),o=10,r=null,s=this.body.edges,a=0;a<this.body.edgeIndices.length;a++){var l=this.body.edgeIndices[a],d=s[l];if(d.connected){var h=d.from.x,u=d.from.y,c=d.to.x,f=d.to.y,p=d.edgeType.getDistanceToEdge(h,u,c,f,n.x,n.y);p<o&&(r=l,o=p)}}return null!==r?!0===i?this.body.edges[r]:r:void 0}},{key:"_addToSelection",value:function(t){t instanceof s?this.selectionObj.nodes[t.id]=t:this.selectionObj.edges[t.id]=t}},{key:"_addToHover",value:function(t){t instanceof s?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){t instanceof s?(delete this.selectionObj.nodes[t.id],this._unselectConnectedEdges(t)):delete this.selectionObj.edges[t.id]}},{key:"unselectAll",value:function(){for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&this.selectionObj.nodes[t].unselect();for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&this.selectionObj.edges[e].unselect();this.selectionObj={nodes:{},edges:{}}}},{key:"_getSelectedNodeCount",value:function(){var t=0;for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(t+=1);return t}},{key:"_getSelectedNode",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t))return this.selectionObj.nodes[t]}},{key:"_getSelectedEdge",value:function(){for(var t in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(t))return this.selectionObj.edges[t]}},{key:"_getSelectedEdgeCount",value:function(){var t=0;for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&(t+=1);return t}},{key:"_getSelectedObjectCount",value:function(){var t=0;for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(t+=1);for(var i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&(t+=1);return t}},{key:"_selectionIsEmpty",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t))return!1;for(var e in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(e))return!1;return!0}},{key:"_clusterInSelection",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t)&&1<this.selectionObj.nodes[t].clusterSize)return!0;return!1}},{key:"_selectConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var i=t.edges[e];i.select(),this._addToSelection(i)}}},{key:"_hoverConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var i=t.edges[e];i.hover=!0,this._addToHover(i)}}},{key:"_unselectConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var i=t.edges[e];i.unselect(),this._removeFromSelection(i)}}},{key:"emitBlurEvent",value:function(t,e,i){var n=this._initBaseEvent(t,e);!0===i.hover&&(i.hover=!1,i instanceof s?(n.node=i.id,this.body.emitter.emit("blurNode",n)):(n.edge=i.id,this.body.emitter.emit("blurEdge",n)))}},{key:"emitHoverEvent",value:function(t,e,i){var n=this._initBaseEvent(t,e),o=!1;return!1===i.hover&&(i.hover=!0,this._addToHover(i),o=!0,i instanceof s?(n.node=i.id,this.body.emitter.emit("hoverNode",n)):(n.edge=i.id,this.body.emitter.emit("hoverEdge",n))),o}},{key:"hoverObject",value:function(t,e){var i=this.getNodeAt(e);void 0===i&&(i=this.getEdgeAt(e));var n=!1;for(var o in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(o)&&(void 0===i||i instanceof s&&i.id!=o||i instanceof a)&&(this.emitBlurEvent(t,e,this.hoverObj.nodes[o]),delete this.hoverObj.nodes[o],n=!0);for(var r in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(r)&&(!0===n?(this.hoverObj.edges[r].hover=!1,delete this.hoverObj.edges[r]):(void 0===i||i instanceof a&&i.id!=r||i instanceof s&&!i.hover)&&(this.emitBlurEvent(t,e,this.hoverObj.edges[r]),delete this.hoverObj.edges[r],n=!0));void 0!==i&&(n=n||this.emitHoverEvent(t,e,i),i instanceof s&&!0===this.options.hoverConnectedEdges&&this._hoverConnectedEdges(i)),!0===n&&this.body.emitter.emit("_requestRedraw")}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodes(),edges:this.getSelectedEdges()}}},{key:"getSelectedNodes",value:function(){var t=[];if(!0===this.options.selectable)for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&t.push(this.selectionObj.nodes[e].id);return t}},{key:"getSelectedEdges",value:function(){var t=[];if(!0===this.options.selectable)for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&t.push(this.selectionObj.edges[e].id);return t}},{key:"setSelection",value:function(t,e){var i=1<arguments.length&&void 0!==e?e:{},n=void 0,o=void 0;if(!t||!t.nodes&&!t.edges)throw"Selection must be an object with nodes and/or edges properties";if(!i.unselectAll&&void 0!==i.unselectAll||this.unselectAll(),t.nodes)for(n=0;n<t.nodes.length;n++){o=t.nodes[n];var r=this.body.nodes[o];if(!r)throw new RangeError('Node with id "'+o+'" not found');this.selectObject(r,i.highlightEdges)}if(t.edges)for(n=0;n<t.edges.length;n++){o=t.edges[n];var s=this.body.edges[o];if(!s)throw new RangeError('Edge with id "'+o+'" not found');this.selectObject(s)}this.body.emitter.emit("_requestRedraw")}},{key:"selectNodes",value:function(t,e){var i=!(1<arguments.length&&void 0!==e)||e;if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:i})}},{key:"selectEdges",value:function(t){if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(this.body.nodes.hasOwnProperty(t)||delete this.selectionObj.nodes[t]);for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&(this.body.edges.hasOwnProperty(e)||delete this.selectionObj.edges[e])}},{key:"getClickedItems",value:function(t){for(var e=this.canvas.DOMtoCanvas(t),i=[],n=this.body.nodeIndices,o=this.body.nodes,r=n.length-1;0<=r;r--){var s=o[n[r]].getItemsOnPoint(e);i.push.apply(i,s)}for(var a=this.body.edgeIndices,l=this.body.edges,d=a.length-1;0<=d;d--){var h=l[a[d]].getItemsOnPoint(e);i.push.apply(i,h)}return i}}]),h);function h(t,e){var i=this;(0,o.default)(this,h),this.body=t,this.canvas=e,this.selectionObj={nodes:[],edges:[]},this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},l.extend(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){i.updateSelection()})}e.default=d},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var C=n(i(30)),o=n(i(6)),l=n(i(8)),r=n(i(0)),s=n(i(1)),a=i(2),d=i(76).default,h=i(236),u=h.HorizontalStrategy,c=h.VerticalStrategy,f=((0,s.default)(v,[{key:"addRelation",value:function(t,e){void 0===this.childrenReference[t]&&(this.childrenReference[t]=[]),this.childrenReference[t].push(e),void 0===this.parentReference[e]&&(this.parentReference[e]=[]),this.parentReference[e].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(1<this.parentReference[t].length)return void(this.isTree=!1);this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,e){void 0!==e&&void 0===this.trees[t.id]&&(this.trees[t.id]=e,this.treeIndex=Math.max(e,this.treeIndex))}},{key:"ensureLevel",value:function(t){void 0===this.levels[t]&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var r=this,s={};return function t(e){if(void 0!==s[e])return s[e];var i=r.levels[e];if(r.childrenReference[e]){var n=r.childrenReference[e];if(0<n.length)for(var o=0;o<n.length;o++)i=Math.max(i,t(n[o]))}return s[e]=i}(t)}},{key:"levelDownstream",value:function(t,e){void 0===this.levels[e.id]&&(void 0===this.levels[t.id]&&(this.levels[t.id]=0),this.levels[e.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var e=1e9;for(var i in t)t.hasOwnProperty(i)&&void 0!==this.levels[i]&&(e=Math.min(this.levels[i],e));for(var n in t)t.hasOwnProperty(n)&&void 0!==this.levels[n]&&(this.levels[n]-=e)}},{key:"getTreeSize",value:function(t,e){var i=1e9,n=-1e9,o=1e9,r=-1e9;for(var s in this.trees)if(this.trees.hasOwnProperty(s)&&this.trees[s]===e){var a=t[s];i=Math.min(a.x,i),n=Math.max(a.x,n),o=Math.min(a.y,o),r=Math.max(a.y,r)}return{min_x:i,max_x:n,min_y:o,max_y:r}}},{key:"hasSameParent",value:function(t,e){var i=this.parentReference[t.id],n=this.parentReference[e.id];if(void 0===i||void 0===n)return!1;for(var o=0;o<i.length;o++)for(var r=0;r<n.length;r++)if(i[o]==n[r])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,e){return this.trees[t.id]===this.trees[e.id]}},{key:"getLevels",value:function(){return(0,l.default)(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,e){void 0===this.distributionOrdering[e]&&(this.distributionOrdering[e]=[]);var i=!1,n=this.distributionOrdering[e];for(var o in n)if(n[o]===t){i=!0;break}i||(this.distributionOrdering[e].push(t),this.distributionIndex[t.id]=this.distributionOrdering[e].length-1)}}]),v),p=((0,s.default)(m,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("_dataChanged",function(){e.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){e.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){e.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",function(){if(!0===e.options.hierarchical.enabled){var t=e.direction.curveType();e.body.emitter.emit("_forceDisableDynamicCurves",t,!1)}})}},{key:"setOptions",value:function(t,e){if(void 0!==t){var i=this.options.hierarchical,n=i.enabled;if(a.selectiveDeepExtend(["randomSeed","improvedLayout"],this.options,t),a.mergeOptions(this.options,t,"hierarchical"),void 0!==t.randomSeed&&(this.initialRandomSeed=t.randomSeed),!0===i.enabled)return!0===n&&this.body.emitter.emit("refresh",!0),"RL"===i.direction||"DU"===i.direction?0<i.levelSeparation&&(i.levelSeparation*=-1):i.levelSeparation<0&&(i.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(e);if(!0===n)return this.body.emitter.emit("refresh"),a.deepExtend(e,this.optionsBackup)}return e}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(!0===this.options.hierarchical.enabled){var e=this.optionsBackup.physics;void 0===t.physics||!0===t.physics?(t.physics={enabled:void 0===e.enabled||e.enabled,solver:"hierarchicalRepulsion"},e.enabled=void 0===e.enabled||e.enabled,e.solver=e.solver||"barnesHut"):"object"===(0,o.default)(t.physics)?(e.enabled=void 0===t.physics.enabled||t.physics.enabled,e.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):!1!==t.physics&&(e.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var i=this.direction.curveType();if(void 0===t.edges)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(void 0===t.edges.smooth)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if("boolean"==typeof t.edges.smooth)this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:i};else{var n=t.edges.smooth;void 0!==n.type&&"dynamic"!==n.type&&(i=n.type),this.optionsBackup.edges={smooth:void 0===n.enabled||n.enabled,type:void 0===n.type?"dynamic":n.type,roundness:void 0===n.roundness?.5:n.roundness,forceDirection:void 0!==n.forceDirection&&n.forceDirection},t.edges.smooth={enabled:void 0===n.enabled||n.enabled,type:i,roundness:void 0===n.roundness?.5:n.roundness,forceDirection:void 0!==n.forceDirection&&n.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",i)}return t}},{key:"seededRandom",value:function(){var t=1e4*Math.sin(this.randomSeed++);return t-Math.floor(t)}},{key:"positionInitially",value:function(t){if(!0!==this.options.hierarchical.enabled){this.randomSeed=this.initialRandomSeed;for(var e=t.length+50,i=0;i<t.length;i++){var n=t[i],o=2*Math.PI*this.seededRandom();void 0===n.x&&(n.x=e*Math.cos(o)),void 0===n.y&&(n.y=e*Math.sin(o))}}}},{key:"layoutNetwork",value:function(){if(!0!==this.options.hierarchical.enabled&&!0===this.options.improvedLayout){for(var t=this.body.nodeIndices,e=0,i=0;i<t.length;i++)!0===this.body.nodes[t[i]].predefinedPosition&&(e+=1);if(e<.5*t.length){var n=0,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(150<t.length){for(var r=t.length;150<t.length&&n<=10;){n+=1;var s=t.length;if(n%3==0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o),s==t.length&&n%3!=0)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*r)})}10<n&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();for(var a=0;a<t.length;a++){var l=this.body.nodes[t[a]];!1===l.predefinedPosition&&(l.x+=70*(.5-this.seededRandom()),l.y+=70*(.5-this.seededRandom()))}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=d.getRangeCore(this.body.nodes,this.body.nodeIndices),e=d.findCenter(t),i=0;i<this.body.nodeIndices.length;i++){var n=this.body.nodes[this.body.nodeIndices[i]];n.x-=e.x,n.y-=e.y}}},{key:"_declusterAll",value:function(){for(var t=!0;!0===t;){t=!1;for(var e=0;e<this.body.nodeIndices.length;e++)!0===this.body.nodes[this.body.nodeIndices[e]].isCluster&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[e],{},!1));!0===t&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===this.options.hierarchical.enabled&&0<this.body.nodeIndices.length){var t=void 0,e=void 0,i=!1,n=!1;for(e in this.lastNodeOnLevel={},this.hierarchical=new f,this.body.nodes)this.body.nodes.hasOwnProperty(e)&&(void 0!==(t=this.body.nodes[e]).options.level?(i=!0,this.hierarchical.levels[e]=t.options.level):n=!0);if(!0===n&&!0===i)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(!0===n){var o=this.options.hierarchical.sortMethod;"hubsize"===o?this._determineLevelsByHubsize():"directed"===o?this._determineLevelsDirected():"custom"===o&&this._determineLevelsCustomCallback()}for(var r in this.body.nodes)this.body.nodes.hasOwnProperty(r)&&this.hierarchical.ensureLevel(r);var s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){function n(t,e){var i=E.hierarchical.trees;for(var n in i)i.hasOwnProperty(n)&&i[n]===t&&E.direction.shift(n,e)}function k(t,e){if(!e[t.id]&&(e[t.id]=!0,E.hierarchical.childrenReference[t.id])){var i=E.hierarchical.childrenReference[t.id];if(0<i.length)for(var n=0;n<i.length;n++)k(E.body.nodes[i[n]],e)}}function S(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e9,i=1e9,n=1e9,o=1e9,r=-1e9;for(var s in t)if(t.hasOwnProperty(s)){var a=E.body.nodes[s],l=E.hierarchical.levels[a.id],d=E.direction.getPosition(a),h=E._getSpaceAroundNode(a,t),u=(0,C.default)(h,2),c=u[0],f=u[1];i=Math.min(c,i),n=Math.min(f,n),l<=e&&(o=Math.min(d,o),r=Math.max(d,r))}return[o,r,i,n]}function i(t,e,i){for(var n=E.hierarchical,o=0;o<e.length;o++){var r=e[o],s=n.distributionOrdering[r];if(1<s.length)for(var a=0;a<s.length-1;a++){var l=s[a],d=s[a+1];n.hasSameParent(l,d)&&n.inSameSubNetwork(l,d)&&t(l,d,i)}}}function o(t,e){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=E.direction.getPosition(t),o=E.direction.getPosition(e),r=Math.abs(o-n),s=E.options.hierarchical.nodeSpacing;if(s<r){var a={},l={};k(t,a),k(e,l);var d=function(t,e){var i=E.hierarchical.getMaxLevel(t.id),n=E.hierarchical.getMaxLevel(e.id);return Math.min(i,n)}(t,e),h=S(a,d),u=S(l,d),c=h[1],f=u[0],p=u[2];if(Math.abs(c-f)>s){var m=c-f+s;m<-p+s&&(m=-p+s),m<0&&(E._shiftBlock(e.id,m),(T=!0)===i&&E._centerParent(e))}}}function s(t,l){for(var e=l.id,i=l.edges,n=E.hierarchical.levels[l.id],r=E.options.hierarchical.levelSeparation*E.options.hierarchical.levelSeparation,s={},o=[],a=0;a<i.length;a++){var d=i[a];if(d.toId!=d.fromId){var h=d.toId==e?d.from:d.to;s[i[a].id]=h,E.hierarchical.levels[h.id]<n&&o.push(d)}}function u(t,e){for(var i=0,n=0;n<e.length;n++)if(void 0!==s[e[n].id]){var o=E.direction.getPosition(s[e[n].id])-t;i+=o/Math.sqrt(o*o+r)}return i}function c(t,e){for(var i=0,n=0;n<e.length;n++)if(void 0!==s[e[n].id]){var o=E.direction.getPosition(s[e[n].id])-t;i-=r*Math.pow(o*o+r,-1.5)}return i}function f(t,e){for(var i=E.direction.getPosition(l),n={},o=0;o<t;o++){var r=u(i,e),s=c(i,e);if(void 0!==n[i-=Math.max(-40,Math.min(40,Math.round(r/s)))])break;n[i]=o}return i}var p,m,v,g,y,b,w,_,x=f(t,o);!function(t){var e=E.direction.getPosition(l);if(void 0===D[l.id]){var i={};k(l,i),D[l.id]=i}var n=S(D[l.id]),o=n[2],r=n[3],s=t-e,a=0;0<s?a=Math.min(s,r-E.options.hierarchical.nodeSpacing):s<0&&(a=-Math.min(-s,o-E.options.hierarchical.nodeSpacing)),0!=a&&(E._shiftBlock(l.id,a),T=!0)}(x),x=f(t,i),p=x,m=E.direction.getPosition(l),v=E._getSpaceAroundNode(l),g=(0,C.default)(v,2),y=g[0],b=g[1],0<(w=p-(_=m))?_=Math.min(m+(b-E.options.hierarchical.nodeSpacing),p):w<0&&(_=Math.max(m-(y-E.options.hierarchical.nodeSpacing),p)),_!==m&&(E.direction.setPosition(l,_),T=!0)}var E=this,T=!1,D={};!0===this.options.hierarchical.blockShifting&&(function(){var t=E.hierarchical.getLevels();t=t.reverse();for(var e=0;e<5&&(i(o,t,!(T=!1)),!0===T);e++);}(),function(){for(var t in E.body.nodes)E.body.nodes.hasOwnProperty(t)&&E._centerParent(E.body.nodes[t])}()),!0===this.options.hierarchical.edgeMinimization&&function(){var t=E.hierarchical.getLevels();t=t.reverse();for(var e=0;e<20;e++){T=!1;for(var i=0;i<t.length;i++)for(var n=t[i],o=E.hierarchical.distributionOrdering[n],r=0;r<o.length;r++)s(1e3,o[r]);if(!0!==T)break}}(),!0===this.options.hierarchical.parentCentralization&&function(){var t=E.hierarchical.getLevels();t=t.reverse();for(var e=0;e<t.length;e++)for(var i=t[e],n=E.hierarchical.distributionOrdering[i],o=0;o<n.length;o++)E._centerParent(n[o])}(),function(){for(var t=function(){for(var t=[],e=0;e<E.hierarchical.numTrees();e++)t.push(E.direction.getTreeSize(e));return t}(),e=0,i=0;i<t.length-1;i++)e+=t[i].max-t[i+1].min+E.options.hierarchical.treeSpacing,n(i+1,e)}()}},{key:"_getSpaceAroundNode",value:function(t,e){var i=!0;void 0===e&&(i=!1);var n=this.hierarchical.levels[t.id];if(void 0===n)return[0,0];var o=this.hierarchical.distributionIndex[t.id],r=this.direction.getPosition(t),s=this.hierarchical.distributionOrdering[n],a=1e9,l=1e9;if(0!==o){var d=s[o-1];(!0===i&&void 0===e[d.id]||!1===i)&&(a=r-this.direction.getPosition(d))}if(o!=s.length-1){var h=s[o+1];if(!0===i&&void 0===e[h.id]||!1===i){var u=this.direction.getPosition(h);l=Math.min(l,u-r)}}return[a,l]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var e=this.hierarchical.parentReference[t.id],i=0;i<e.length;i++){var n=e[i],o=this.body.nodes[n],r=this.hierarchical.childrenReference[n];if(void 0!==r){var s=this._getCenterPosition(r),a=this.direction.getPosition(o),l=this._getSpaceAroundNode(o),d=(0,C.default)(l,2),h=d[0],u=d[1],c=a-s;(c<0&&Math.abs(c)<u-this.options.hierarchical.nodeSpacing||0<c&&Math.abs(c)<h-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(o,s)}}}},{key:"_placeNodesByHierarchy",value:function(t){for(var e in this.positionedNodes={},t)if(t.hasOwnProperty(e)){var i=(0,l.default)(t[e]);i=this._indexArrayToNodes(i),this.direction.sort(i);for(var n=0,o=0;o<i.length;o++){var r=i[o];if(void 0===this.positionedNodes[r.id]){var s=this.options.hierarchical.nodeSpacing,a=s*n;0<n&&(a=this.direction.getPosition(i[o-1])+s),this.direction.setPosition(r,a,e),this._validatePositionAndContinue(r,e,a),n++}}}}},{key:"_placeBranchNodes",value:function(t,e){var i=this.hierarchical.childrenReference[t];if(void 0!==i){for(var n=[],o=0;o<i.length;o++)n.push(this.body.nodes[i[o]]);this.direction.sort(n);for(var r=0;r<n.length;r++){var s=n[r],a=this.hierarchical.levels[s.id];if(!(e<a&&void 0===this.positionedNodes[s.id]))return;var l,d=this.options.hierarchical.nodeSpacing;l=0===r?this.direction.getPosition(this.body.nodes[t]):this.direction.getPosition(n[r-1])+d,this.direction.setPosition(s,l,a),this._validatePositionAndContinue(s,a,l)}var h=this._getCenterPosition(n);this.direction.setPosition(this.body.nodes[t],h,e)}}},{key:"_validatePositionAndContinue",value:function(t,e,i){if(this.hierarchical.isTree){if(void 0!==this.lastNodeOnLevel[e]){var n=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[e]]);if(i-n<this.options.hierarchical.nodeSpacing){var o=n+this.options.hierarchical.nodeSpacing-i,r=this._findCommonParent(this.lastNodeOnLevel[e],t.id);this._shiftBlock(r.withChild,o)}}this.lastNodeOnLevel[e]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,e)}}},{key:"_indexArrayToNodes",value:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.body.nodes[t[i]]);return e}},{key:"_getDistribution",value:function(){var t={},e=void 0,i=void 0;for(e in this.body.nodes)if(this.body.nodes.hasOwnProperty(e)){i=this.body.nodes[e];var n=void 0===this.hierarchical.levels[e]?0:this.hierarchical.levels[e];this.direction.fix(i,n),void 0===t[n]&&(t[n]={}),t[n][e]=i}return t}},{key:"_getActiveEdges",value:function(t){var e=this,i=[];return a.forEach(t.edges,function(t){-1!==e.body.edgeIndices.indexOf(t.id)&&i.push(t)}),i}},{key:"_getHubSizes",value:function(){var n=this,o={},t=this.body.nodeIndices;a.forEach(t,function(t){var e=n.body.nodes[t],i=n._getActiveEdges(e).length;o[i]=!0});var e=[];return a.forEach(o,function(t){e.push(Number(t))}),e.sort(function(t,e){return e-t}),e}},{key:"_determineLevelsByHubsize",value:function(){for(var n=this,o=function(t,e){n.hierarchical.levelDownstream(t,e)},t=this._getHubSizes(),e=0;e<t.length&&"break"!==function(){var i=t[e];if(0===i)return"break";a.forEach(n.body.nodeIndices,function(t){var e=n.body.nodes[t];i===n._getActiveEdges(e).length&&n._crawlNetwork(o,t)})}();++e);}},{key:"_determineLevelsCustomCallback",value:function(){var r=this;this._crawlNetwork(function(t,e,i){var n=r.hierarchical.levels[t.id];void 0===n&&(n=r.hierarchical.levels[t.id]=1e5);var o=(d.cloneOptions(t,"node"),d.cloneOptions(e,"node"),void d.cloneOptions(i,"edge"));r.hierarchical.levels[e.id]=n+o}),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var r=this;this._crawlNetwork(function(t,e,i){var n=r.hierarchical.levels[t.id],o=r.hierarchical.levels[e.id];(function(e){return a.forEach(r.body.edges,function(t){if(t.toId===e.fromId&&t.fromId===e.toId)return!0}),0})(i)&&void 0!==n&&void 0!==o||(void 0===n&&(n=r.hierarchical.levels[t.id]=1e4),i.toId==e.id?r.hierarchical.levels[e.id]=n+1:r.hierarchical.levels[e.id]=n-1)}),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var i=this;this._crawlNetwork(function(t,e){i.hierarchical.levels[e.id]>i.hierarchical.levels[t.id]&&i.hierarchical.addRelation(t.id,e.id)}),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(t,e){function s(t,e){if(void 0===d[t.id]){a.hierarchical.setTreeIndex(t,e),d[t.id]=!0;for(var i=void 0,n=a._getActiveEdges(t),o=0;o<n.length;o++){var r=n[o];!0===r.connected&&(i=r.toId==t.id?r.from:r.to,t.id!=i.id&&(l(t,i,r),s(i,e)))}}}var a=this,l=0<arguments.length&&void 0!==t?t:function(){},i=e,d={};if(void 0===i)for(var n=0,o=0;o<this.body.nodeIndices.length;o++){var r=this.body.nodeIndices[o];void 0===d[r]&&(s(this.body.nodes[r],n),n+=1)}else{var h=this.body.nodes[i];if(void 0===h)return void console.error("Node not found:",i);s(h)}}},{key:"_shiftBlock",value:function(t,o){var r=this,s={};!function t(e){if(!s[e]){s[e]=!0,r.direction.shift(e,o);var i=r.hierarchical.childrenReference[e];if(void 0!==i)for(var n=0;n<i.length;n++)t(i[n])}}(t)}},{key:"_findCommonParent",value:function(t,e){var a=this,i={};return function t(e,i){var n=a.hierarchical.parentReference[i];if(void 0!==n)for(var o=0;o<n.length;o++){var r=n[o];e[r]=!0,t(e,r)}}(i,t),function t(e,i){var n=a.hierarchical.parentReference[i];if(void 0!==n)for(var o=0;o<n.length;o++){var r=n[o];if(void 0!==e[r])return{foundParent:r,withChild:i};var s=t(e,r);if(null!==s.foundParent)return s}return{foundParent:null,withChild:i}}(i,e)}},{key:"setDirectionStrategy",value:function(){var t="UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction;this.direction=t?new c(this):new u(this)}},{key:"_getCenterPosition",value:function(t){for(var e=1e9,i=-1e9,n=0;n<t.length;n++){var o=void 0;if(void 0!==t[n].id)o=t[n];else{var r=t[n];o=this.body.nodes[r]}var s=this.direction.getPosition(o);e=Math.min(e,s),i=Math.max(i,s)}return.5*(e+i)}}]),m);function m(t){(0,r.default)(this,m),this.body=t,this.initialRandomSeed=Math.round(1e6*Math.random()),this.randomSeed=this.initialRandomSeed,this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},a.extend(this.options,this.defaultOptions),this.bindEventListeners()}function v(){(0,r.default)(this,v),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}e.default=p},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.VerticalStrategy=e.HorizontalStrategy=void 0;var o,r,s=n(i(3)),a=n(i(4)),l=n(i(5)),d=n(i(0)),h=n(i(1)),u=((0,h.default)(v,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,e,i){var n=2<arguments.length&&void 0!==i?i:void 0;this.fake_use(t,e,n),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,e){this.fake_use(t,e),this.abstract()}},{key:"shift",value:function(t,e){this.fake_use(t,e),this.abstract()}}]),v),c=(r=u,(0,l.default)(m,r),(0,h.default)(m,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(t){return t.x}},{key:"setPosition",value:function(t,e,i){var n=2<arguments.length&&void 0!==i?i:void 0;void 0!==n&&this.layout.hierarchical.addToOrdering(t,n),t.x=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_x,max:e.max_x}}},{key:"sort",value:function(t){t.sort(function(t,e){return void 0===t.x||void 0===e.x?0:t.x-e.x})}},{key:"fix",value:function(t,e){t.y=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.y=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].x+=e}}]),m),f=(o=u,(0,l.default)(p,o),(0,h.default)(p,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(t){return t.y}},{key:"setPosition",value:function(t,e,i){var n=2<arguments.length&&void 0!==i?i:void 0;void 0!==n&&this.layout.hierarchical.addToOrdering(t,n),t.y=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_y,max:e.max_y}}},{key:"sort",value:function(t){t.sort(function(t,e){return void 0===t.y||void 0===e.y?0:t.y-e.y})}},{key:"fix",value:function(t,e){t.x=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.x=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].y+=e}}]),p);function p(t){(0,d.default)(this,p);var e=(0,a.default)(this,(p.__proto__||(0,s.default)(p)).call(this));return e.layout=t,e}function m(t){(0,d.default)(this,m);var e=(0,a.default)(this,(m.__proto__||(0,s.default)(m)).call(this));return e.layout=t,e}function v(){(0,d.default)(this,v)}e.HorizontalStrategy=f,e.VerticalStrategy=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(8)),r=n(i(19)),s=n(i(6)),a=n(i(0)),l=n(i(1)),d=i(2),h=i(10),u=i(37),c=((0,l.default)(f,[{key:"_restore",value:function(){!1!==this.inMode&&(!0===this.options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,e,i){void 0!==e&&(void 0!==e.locale?this.options.locale=e.locale:this.options.locale=i.locale,void 0!==e.locales?this.options.locales=e.locales:this.options.locales=i.locales),void 0!==t&&("boolean"==typeof t?this.options.enabled=t:(this.options.enabled=!0,d.deepExtend(this.options,t)),!0===this.options.initiallyActive&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===this.editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},!0===this.guiEnabled){this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var t=this.selectionHandler._getSelectedNodeCount(),e=this.selectionHandler._getSelectedEdgeCount(),i=t+e,n=this.options.locales[this.options.locale],o=!1;!1!==this.options.addNode&&(this._createAddNodeButton(n),o=!0),!1!==this.options.addEdge&&(!0===o?this._createSeperator(1):o=!0,this._createAddEdgeButton(n)),1===t&&"function"==typeof this.options.editNode?(!0===o?this._createSeperator(2):o=!0,this._createEditNodeButton(n)):1===e&&0===t&&!1!==this.options.editEdge&&(!0===o?this._createSeperator(3):o=!0,this._createEditEdgeButton(n)),0!==i&&(0<t&&!1!==this.options.deleteNode?(!0===o&&this._createSeperator(4),this._createDeleteButton(n)):0===t&&!1!==this.options.deleteEdge&&(!0===o&&this._createSeperator(4),this._createDeleteButton(n))),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this)),this._temporaryBindEvent("select",this.showManipulatorToolbar.bind(this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addNode",!0===this.guiEnabled){var t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.addDescription||this.options.locales.en.addDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindEvent("click",this._performAddNode.bind(this))}},{key:"editNode",value:function(){var e=this;!0!==this.editMode&&this.enableEditMode(),this._clean();var t=this.selectionHandler._getSelectedNode();if(void 0!==t){if(this.inMode="editNode","function"!=typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(!0!==t.isCluster){var i=d.deepExtend({},t.options,!1);if(i.x=t.x,i.y=t.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(i,function(t){null!=t&&"editNode"===e.inMode&&e.body.data.nodes.getDataSet().update(t),e.showManipulatorToolbar()})}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addEdge",!0===this.guiEnabled){var t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.edgeDescription||this.options.locales.en.edgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindUI("onTouch",this._handleConnect.bind(this)),this._temporaryBindUI("onDragEnd",this._finishConnect.bind(this)),this._temporaryBindUI("onDrag",this._dragControlNode.bind(this)),this._temporaryBindUI("onRelease",this._finishConnect.bind(this)),this._temporaryBindUI("onDragStart",this._dragStartEdge.bind(this)),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="editEdge","object"!==(0,s.default)(this.options.editEdge)||"function"!=typeof this.options.editEdge.editWithoutDrag||(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0===this.edgeBeingEditedId)){if(!0===this.guiEnabled){var t=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(t),this._createSeperator(),this._createDescription(t.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0!==this.edgeBeingEditedId){var i=this.body.edges[this.edgeBeingEditedId],n=this._getNewTargetNode(i.from.x,i.from.y),o=this._getNewTargetNode(i.to.x,i.to.y);this.temporaryIds.nodes.push(n.id),this.temporaryIds.nodes.push(o.id),this.body.nodes[n.id]=n,this.body.nodeIndices.push(n.id),this.body.nodes[o.id]=o,this.body.nodeIndices.push(o.id),this._temporaryBindUI("onTouch",this._controlNodeTouch.bind(this)),this._temporaryBindUI("onTap",function(){}),this._temporaryBindUI("onHold",function(){}),this._temporaryBindUI("onDragStart",this._controlNodeDragStart.bind(this)),this._temporaryBindUI("onDrag",this._controlNodeDrag.bind(this)),this._temporaryBindUI("onDragEnd",this._controlNodeDragEnd.bind(this)),this._temporaryBindUI("onMouseMove",function(){}),this._temporaryBindEvent("beforeDrawing",function(t){var e=i.edgeType.findBorderPositions(t);!1===n.selected&&(n.x=e.from.x,n.y=e.from.y),!1===o.selected&&(o.x=e.to.x,o.y=e.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}else{var e=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(e.from,e.to)}}},{key:"deleteSelected",value:function(){var e=this;!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="delete";var t=this.selectionHandler.getSelectedNodes(),i=this.selectionHandler.getSelectedEdges(),n=void 0;if(0<t.length){for(var o=0;o<t.length;o++)if(!0===this.body.nodes[t[o]].isCluster)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"==typeof this.options.deleteNode&&(n=this.options.deleteNode)}else 0<i.length&&"function"==typeof this.options.deleteEdge&&(n=this.options.deleteEdge);if("function"==typeof n){var r={nodes:t,edges:i};if(2!==n.length)throw new Error("The function for delete does not support two arguments (data, callback)");n(r,function(t){null!=t&&"delete"===e.inMode&&(e.body.data.edges.getDataSet().remove(t.edges),e.body.data.nodes.getDataSet().remove(t.nodes)),e.body.emitter.emit("startSimulation"),e.showManipulatorToolbar()})}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(t),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===this.options.enabled?(this.guiEnabled=!0,this._createWrappers(),!1===this.editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",!0===this.editMode?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",!0===this.editMode?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="vis-close",this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(t,e){var i=d.deepExtend({},this.options.controlNodeStyle);i.id="targetNode"+d.randomUUID(),i.hidden=!1,i.physics=!1,i.x=t,i.y=e;var n=this.body.functions.createNode(i);return n.shape.boundingBox={left:t,right:t,top:e,bottom:e},n}},{key:"_createEditButton",value:function(){this._clean(),this.manipulationDOM={},d.recursiveDOMDelete(this.editModeDiv);var t=this.options.locales[this.options.locale],e=this._createButton("editMode","vis-button vis-edit vis-edit-mode",t.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(e),this._bindHammerToDiv(e,this.toggleEditMode.bind(this))}},{key:"_clean",value:function(){!(this.inMode=!1)===this.guiEnabled&&(d.recursiveDOMDelete(this.editModeDiv),d.recursiveDOMDelete(this.manipulationDiv),this._cleanManipulatorHammers()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanManipulatorHammers",value:function(){if(0!=this.manipulationHammers.length){for(var t=0;t<this.manipulationHammers.length;t++)this.manipulationHammers[t].destroy();this.manipulationHammers=[]}}},{key:"_removeManipulationDOM",value:function(){this._clean(),d.recursiveDOMDelete(this.manipulationDiv),d.recursiveDOMDelete(this.editModeDiv),d.recursiveDOMDelete(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(t){var e=0<arguments.length&&void 0!==t?t:1;this.manipulationDOM["seperatorLineDiv"+e]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+e].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+e])}},{key:"_createAddNodeButton",value:function(t){var e=this._createButton("addNode","vis-button vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.addNodeMode.bind(this))}},{key:"_createAddEdgeButton",value:function(t){var e=this._createButton("addEdge","vis-button vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.addEdgeMode.bind(this))}},{key:"_createEditNodeButton",value:function(t){var e=this._createButton("editNode","vis-button vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.editNode.bind(this))}},{key:"_createEditEdgeButton",value:function(t){var e=this._createButton("editEdge","vis-button vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.editEdgeMode.bind(this))}},{key:"_createDeleteButton",value:function(t){var e;e=this.options.rtl?"vis-button vis-delete-rtl":"vis-button vis-delete";var i=this._createButton("delete",e,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindHammerToDiv(i,this.deleteSelected.bind(this))}},{key:"_createBackButton",value:function(t){var e=this._createButton("back","vis-button vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(e),this._bindHammerToDiv(e,this.showManipulatorToolbar.bind(this))}},{key:"_createButton",value:function(t,e,i,n){var o=3<arguments.length&&void 0!==n?n:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("div"),this.manipulationDOM[t+"Div"].className=e,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=o,this.manipulationDOM[t+"Label"].innerHTML=i,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDiv.appendChild(this._createButton("description","vis-button vis-none",t))}},{key:"_temporaryBindEvent",value:function(t,e){this.temporaryEventFunctions.push({event:t,boundFunction:e}),this.body.emitter.on(t,e)}},{key:"_temporaryBindUI",value:function(t,e){if(void 0===this.body.eventListeners[t])throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+(0,r.default)((0,o.default)(this.body.eventListeners)));this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=e}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)this.temporaryUIFunctions.hasOwnProperty(t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var e=this.temporaryEventFunctions[t].event,i=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(e,i)}this.temporaryEventFunctions=[]}},{key:"_bindHammerToDiv",value:function(t,e){var i=new h(t,{});u.onTouch(i,e),this.manipulationHammers.push(i)}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var e=this.body.edgeIndices.indexOf(this.temporaryIds.edges[t]);-1!==e&&this.body.edgeIndices.splice(e,1)}for(var i=0;i<this.temporaryIds.nodes.length;i++){delete this.body.nodes[this.temporaryIds.nodes[i]];var n=this.body.nodeIndices.indexOf(this.temporaryIds.nodes[i]);-1!==n&&this.body.nodeIndices.splice(n,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=d.extend({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var t=this.lastTouch,e=this.selectionHandler._pointerToPositionObject(t),i=this.body.nodes[this.temporaryIds.nodes[0]],n=this.body.nodes[this.temporaryIds.nodes[1]],o=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var r=i.isOverlappingWith(e),s=n.isOverlappingWith(e);!0===r?(this.selectedControlNode=i,o.edgeType.from=i):!0===s&&(this.selectedControlNode=n,o.edgeType.to=n),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var e=this.body.functions.getPointer(t.center),i=this.canvas.DOMtoCanvas(e);if(void 0!==this.selectedControlNode)this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y;else{var n=e.x-this.lastTouch.x,o=e.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+n,y:this.lastTouch.translation.y+o}}this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),n=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),r=void 0,s=o.length-1;0<=s;s--)if(o[s]!==this.selectedControlNode.id){r=this.body.nodes[o[s]];break}if(void 0!==r&&void 0!==this.selectedControlNode)if(!0===r.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(r.id,n.to.id):this._performEditEdge(n.from.id,r.id)}else n.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if(100<(new Date).valueOf()-this.touchTime){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=d.extend({},this.body.view.translation);var e=this.lastTouch,i=this.selectionHandler.getNodeAt(e);if(void 0!==i)if(!0===i.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var n=this._getNewTargetNode(i.x,i.y);this.body.nodes[n.id]=n,this.body.nodeIndices.push(n.id);var o=this.body.functions.createEdge({id:"connectionEdge"+d.randomUUID(),from:i.id,to:n.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[o.id]=o,this.body.edgeIndices.push(o.id),this.temporaryIds.nodes.push(n.id),this.temporaryIds.edges.push(o.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(t){var e=this.body.functions.getPointer(t.center);if(void 0!==this.temporaryIds.nodes[0]){var i=this.body.nodes[this.temporaryIds.nodes[0]];i.x=this.canvas._XconvertDOMtoCanvas(e.x),i.y=this.canvas._YconvertDOMtoCanvas(e.y),this.body.emitter.emit("_redraw")}else{var n=e.x-this.lastTouch.x,o=e.y-this.lastTouch.y;this.body.view.translation={x:this.lastTouch.translation.x+n,y:this.lastTouch.translation.y+o}}}},{key:"_finishConnect",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),n=void 0;void 0!==this.temporaryIds.edges[0]&&(n=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var o=this.selectionHandler._getAllNodesOverlappingWith(i),r=void 0,s=o.length-1;0<=s;s--)if(-1===this.temporaryIds.nodes.indexOf(o[s])){r=this.body.nodes[o[s]];break}this._cleanupTemporaryNodesAndEdges(),void 0!==r&&(!0===r.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[n]&&void 0!==this.body.nodes[r.id]&&this._performAddEdge(n,r.id)),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var e=this.lastTouch;this.selectionHandler._generateClickEvent("dragStart",t,e,void 0,!0)}},{key:"_performAddNode",value:function(t){var e=this,i={id:d.randomUUID(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if("function"==typeof this.options.addNode){if(2!==this.options.addNode.length)throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(i,function(t){null!=t&&"addNode"===e.inMode&&(e.body.data.nodes.getDataSet().add(t),e.showManipulatorToolbar())})}else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,e){var i=this,n={from:t,to:e};if("function"==typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(n,function(t){null!=t&&"addEdge"===i.inMode&&(i.body.data.edges.getDataSet().add(t),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,e){var i=this,n={id:this.edgeBeingEditedId,from:t,to:e,label:this.body.data.edges._data[this.edgeBeingEditedId].label},o=this.options.editEdge;if("object"===(void 0===o?"undefined":(0,s.default)(o))&&(o=o.editWithoutDrag),"function"==typeof o){if(2!==o.length)throw new Error("The function for edit does not support two arguments (data, callback)");o(n,function(t){null==t||"editEdge"!==i.inMode?(i.body.edges[n.id].updateEdgeType(),i.body.emitter.emit("_redraw")):(i.body.data.edges.getDataSet().update(t),i.selectionHandler.unselectAll()),i.showManipulatorToolbar()})}else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),f);function f(t,e,i){var n=this;(0,a.default)(this,f),this.body=t,this.canvas=e,this.selectionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this.manipulationHammers=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},d.extend(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){n._clean()}),this.body.emitter.on("_dataChanged",this._restore.bind(this)),this.body.emitter.on("_resetData",this._restore.bind(this))}e.default=c},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var g=n(i(30)),o=n(i(0)),r=n(i(1)),s=n(i(239)),a=((0,r.default)(l,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,e,i){var n=2<arguments.length&&void 0!==i&&i,o=this.distanceSolver.getDistances(this.body,t,e);this._createL_matrix(o),this._createK_matrix(o),this._createE_matrix();for(var r=0,s=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),a=1e9,l=0,d=0,h=0,u=0,c=0;.01<a&&r<s;){r+=1;var f=this._getHighestEnergyNode(n),p=(0,g.default)(f,4);for(l=p[0],a=p[1],d=p[2],h=p[3],u=a,c=0;1<u&&c<5;){c+=1,this._moveNode(l,d,h);var m=this._getEnergy(l),v=(0,g.default)(m,3);u=v[0],d=v[1],h=v[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var e=this.body.nodeIndices,i=this.body.nodes,n=0,o=e[0],r=0,s=0,a=0;a<e.length;a++){var l=e[a];if(!1===i[l].predefinedPosition||!0===i[l].isCluster&&!0===t||!0===i[l].options.fixed.x||!0===i[l].options.fixed.y){var d=this._getEnergy(l),h=(0,g.default)(d,3),u=h[0],c=h[1],f=h[2];n<u&&(n=u,o=l,r=c,s=f)}}return[o,n,r,s]}},{key:"_getEnergy",value:function(t){var e=(0,g.default)(this.E_sums[t],2),i=e[0],n=e[1];return[Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),i,n]}},{key:"_moveNode",value:function(t,e,i){for(var n=this.body.nodeIndices,o=this.body.nodes,r=0,s=0,a=0,l=o[t].x,d=o[t].y,h=this.K_matrix[t],u=this.L_matrix[t],c=0;c<n.length;c++){var f=n[c];if(f!==t){var p=o[f].x,m=o[f].y,v=h[f],g=u[f],y=1/Math.pow(Math.pow(l-p,2)+Math.pow(d-m,2),1.5);r+=v*(1-g*Math.pow(d-m,2)*y),s+=v*(g*(l-p)*(d-m)*y),a+=v*(1-g*Math.pow(l-p,2)*y)}}var b=(e/r+i/s)/(s/r-a/s),w=-(s*b+e)/r;o[t].x+=w,o[t].y+=b,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var e=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var n=0;n<e.length;n++){this.L_matrix[e[n]]={};for(var o=0;o<e.length;o++)this.L_matrix[e[n]][e[o]]=i*t[e[n]][e[o]]}}},{key:"_createK_matrix",value:function(t){var e=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var n=0;n<e.length;n++){this.K_matrix[e[n]]={};for(var o=0;o<e.length;o++)this.K_matrix[e[n]][e[o]]=i*Math.pow(t[e[n]][e[o]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,e=this.body.nodes;this.E_matrix={},this.E_sums={};for(var i=0;i<t.length;i++)this.E_matrix[t[i]]=[];for(var n=0;n<t.length;n++){for(var o=t[n],r=e[o].x,s=e[o].y,a=0,l=0,d=n;d<t.length;d++){var h=t[d];if(h!==o){var u=e[h].x,c=e[h].y,f=1/Math.sqrt(Math.pow(r-u,2)+Math.pow(s-c,2));this.E_matrix[o][d]=[this.K_matrix[o][h]*(r-u-this.L_matrix[o][h]*(r-u)*f),this.K_matrix[o][h]*(s-c-this.L_matrix[o][h]*(s-c)*f)],this.E_matrix[h][n]=this.E_matrix[o][d],a+=this.E_matrix[o][d][0],l+=this.E_matrix[o][d][1]}}this.E_sums[o]=[a,l]}}},{key:"_updateE_matrix",value:function(t){for(var e=this.body.nodeIndices,i=this.body.nodes,n=this.E_matrix[t],o=this.K_matrix[t],r=this.L_matrix[t],s=i[t].x,a=i[t].y,l=0,d=0,h=0;h<e.length;h++){var u=e[h];if(u!==t){var c=n[h],f=c[0],p=c[1],m=i[u].x,v=i[u].y,g=1/Math.sqrt(Math.pow(s-m,2)+Math.pow(a-v,2)),y=o[u]*(s-m-r[u]*(s-m)*g),b=o[u]*(a-v-r[u]*(a-v)*g);n[h]=[y,b],l+=y,d+=b;var w=this.E_sums[u];w[0]+=y-f,w[1]+=b-p}}this.E_sums[t]=[l,d]}}]),l);function l(t,e,i){(0,o.default)(this,l),this.body=t,this.springLength=e,this.springConstant=i,this.distanceSolver=new s.default}e.default=a},function(t,e,i){function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(0)),r=((0,n(i(1)).default)(s,[{key:"getDistances",value:function(t,e,i){for(var n={},o=t.edges,r=0;r<e.length;r++){var s={};n[e[r]]=s;for(var a=0;a<e.length;a++)s[e[a]]=r==a?0:1e9}for(var l=0;l<i.length;l++){var d=o[i[l]];!0===d.connected&&void 0!==n[d.fromId]&&void 0!==n[d.toId]&&(n[d.fromId][d.toId]=1,n[d.toId][d.fromId]=1)}for(var h=e.length,u=0;u<h;u++)for(var c=e[u],f=n[c],p=0;p<h-1;p++)for(var m=e[p],v=n[m],g=p+1;g<h;g++){var y=e[g],b=n[y],w=Math.min(v[y],v[c]+f[y]);v[y]=w,b[m]=w}return n}}]),s);function s(){(0,o.default)(this,s)}e.default=r}],n.c=o,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=123);function n(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var i,o},"object"==("undefined"==typeof exports?"undefined":Mr()(exports))&&"object"==Mr()(t)?t.exports=i():"function"==typeof define&&o(21)?define([],i):"object"==("undefined"==typeof exports?"undefined":Mr()(exports))?exports.vis=i():e.vis=i()}.call(this,o(20)(t))},function(t,e,i){(function(t,p){!function(i,n){"use strict";if(!i.setImmediate){var o,r,e,s,a=1,l={},d=!1,h=i.document,t=Object.getPrototypeOf&&Object.getPrototypeOf(i);t=t&&t.setTimeout?t:i,o="[object process]"==={}.toString.call(i.process)?function(t){p.nextTick(function(){c(t)})}:function(){if(i.postMessage&&!i.importScripts){var t=!0,e=i.onmessage;return i.onmessage=function(){t=!1},i.postMessage("","*"),i.onmessage=e,t}}()?(s="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",f,!1):i.attachEvent("onmessage",f),function(t){i.postMessage(s+t,"*")}):i.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){c(t.data)},function(t){e.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(r=h.documentElement,function(t){var e=h.createElement("script");e.onreadystatechange=function(){c(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):function(t){setTimeout(c,0,t)},t.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var n={callback:t,args:e};return l[a]=n,o(a),a++},t.clearImmediate=u}function u(t){delete l[t]}function c(t){if(d)setTimeout(c,0,t);else{var e=l[t];if(e){d=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}(e)}finally{u(t),d=!1}}}}function f(t){t.source===i&&"string"==typeof t.data&&0===t.data.indexOf(s)&&c(+t.data.slice(s.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(11),i(26))},function(e,t,i){(function(X,J){
/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(t){"use strict";"function"==typeof bootstrap?bootstrap("promise",t):e.exports=t()}(function(){"use strict";var a=!1;try{throw new Error}catch(t){a=!!t.stack}function e(){}var o,r=_(),h=function(){var i={task:void 0,next:null},e=i,n=!1,o=void 0,r=!1,s=[];function a(){for(var t,e;i.next;)t=(i=i.next).task,i.task=void 0,(e=i.domain)&&(i.domain=void 0,e.enter()),l(t,e);for(;s.length;)l(t=s.pop());n=!1}function l(t,e){try{t()}catch(t){if(r)throw e&&e.exit(),setTimeout(a,0),e&&e.enter(),t;setTimeout(function(){throw t},0)}e&&e.exit()}if(h=function(t){e=e.next={task:t,domain:r&&X.domain,next:null},n||(n=!0,o())},"object"==typeof X&&"[object process]"===X.toString()&&X.nextTick)r=!0,o=function(){X.nextTick(a)};else if("function"==typeof J)o="undefined"!=typeof window?J.bind(window,a):function(){J(a)};else if("undefined"!=typeof MessageChannel){var t=new MessageChannel;t.port1.onmessage=function(){o=d,(t.port1.onmessage=a)()};var d=function(){t.port2.postMessage(0)};o=function(){setTimeout(a,0),d()}}else o=function(){setTimeout(a,0)};return h.runAfter=function(t){s.push(t),n||(n=!0,o())},h}(),i=Function.call;function t(t){return function(){return i.apply(t,arguments)}}var s,l=t(Array.prototype.slice),d=t(Array.prototype.reduce||function(t,e){var i=0,n=this.length;if(1===arguments.length)for(;;){if(i in this){e=this[i++];break}if(++i>=n)throw new TypeError}for(;i<n;i++)i in this&&(e=t(e,this[i],i));return e}),n=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),u=t(Array.prototype.map||function(n,o){var r=this,s=[];return d(r,function(t,e,i){s.push(n.call(o,e,i,r))},void 0),s}),c=Object.create||function(t){function e(){}return e.prototype=t,new e},f=Object.defineProperty||function(t,e,i){return t[e]=i.value,t},p=t(Object.prototype.hasOwnProperty),m=Object.keys||function(t){var e=[];for(var i in t)p(t,i)&&e.push(i);return e},v=t(Object.prototype.toString);s="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var g="From previous event:";function y(t,e){if(a&&e.stack&&"object"==typeof t&&null!==t&&t.stack){for(var i=[],n=e;n;n=n.source)n.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>n.stackCounter)&&(f(t,"__minimumStackCounter__",{value:n.stackCounter,configurable:!0}),i.unshift(n.stack));i.unshift(t.stack);var o=function(t){for(var e=t.split("\n"),i=[],n=0;n<e.length;++n){var o=e[n];!w(o)&&(-1===(r=o).indexOf("(module.js:")&&-1===r.indexOf("(node.js:"))&&o&&i.push(o)}var r;return i.join("\n")}(i.join("\n"+g+"\n"));f(t,"stack",{value:o,configurable:!0})}}function b(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var i=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(i)return[i[1],Number(i[2])];var n=/.*@(.+):(\d+)$/.exec(t);return n?[n[1],Number(n[2])]:void 0}function w(t){var e=b(t);if(!e)return!1;var i=e[0],n=e[1];return i===o&&r<=n&&n<=G}function _(){if(a)try{throw new Error}catch(t){var e=t.stack.split("\n"),i=b(0<e[0].indexOf("@")?e[1]:e[2]);if(!i)return;return o=i[0],i[1]}}function x(t){return t instanceof D?t:L(t)?function(t){var e=S();return x.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}(t):H(t)}(x.resolve=x).nextTick=h,x.longStackSupport=!1;var k=1;function S(){var o,r=[],s=[],t=c(S.prototype),e=c(D.prototype);if(e.promiseDispatch=function(t,e,i){var n=l(arguments);r?(r.push(n),"when"===e&&i[1]&&s.push(i[1])):x.nextTick(function(){o.promiseDispatch.apply(o,n)})},e.valueOf=function(){if(r)return e;var t=M(o);return O(t)&&(o=t),t},e.inspect=function(){return o?o.inspect():{state:"pending"}},x.longStackSupport&&a)try{throw new Error}catch(t){e.stack=t.stack.substring(t.stack.indexOf("\n")+1),e.stackCounter=k++}function i(i){o=i,x.longStackSupport&&a&&(e.source=i),d(r,function(t,e){x.nextTick(function(){i.promiseDispatch.apply(i,e)})},void 0),s=r=void 0}return t.promise=e,t.resolve=function(t){o||i(x(t))},t.fulfill=function(t){o||i(H(t))},t.reject=function(t){o||i(z(t))},t.notify=function(i){o||d(s,function(t,e){x.nextTick(function(){e(i)})},void 0)},t}function E(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=S();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function T(o){return E(function(t,e){for(var i=0,n=o.length;i<n;i++)x(o[i]).then(t,e)})}function D(o,r,e){void 0===r&&(r=function(t){return z(new Error("Promise does not support operation: "+t))}),void 0===e&&(e=function(){return{state:"unknown"}});var s=c(D.prototype);if(s.promiseDispatch=function(t,e,i){var n;try{n=o[e]?o[e].apply(s,i):r.call(s,e,i)}catch(t){n=z(t)}t&&t(n)},s.inspect=e){var t=e();"rejected"===t.state&&(s.exception=t.reason),s.valueOf=function(){var t=e();return"pending"===t.state||"rejected"===t.state?s:t.value}}return s}function C(t,e,i,n){return x(t).then(e,i,n)}function M(t){if(O(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function O(t){return t instanceof D}function L(t){return function(t){return t===Object(t)}(t)&&"function"==typeof t.then}"object"==typeof X&&X&&X.env&&X.env.Q_DEBUG&&(x.longStackSupport=!0),(x.defer=S).prototype.makeNodeResolver=function(){var i=this;return function(t,e){t?i.reject(t):2<arguments.length?i.resolve(l(arguments,1)):i.resolve(e)}},x.Promise=E,(x.promise=E).race=T,E.all=U,E.reject=z,(E.resolve=x).passByCopy=function(t){return t},D.prototype.passByCopy=function(){return this},x.join=function(t,e){return x(t).join(e)},D.prototype.join=function(t){return x([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)})},x.race=T,D.prototype.race=function(){return this.then(x.race)},(x.makePromise=D).prototype.toString=function(){return"[object Promise]"},D.prototype.then=function(e,i,n){var o=this,r=S(),s=!1;return x.nextTick(function(){o.promiseDispatch(function(t){s||(s=!0,r.resolve(function(t){try{return"function"==typeof e?e(t):t}catch(t){return z(t)}}(t)))},"when",[function(t){s||(s=!0,r.resolve(function(t){if("function"==typeof i){y(t,o);try{return i(t)}catch(t){return z(t)}}return z(t)}(t)))}])}),o.promiseDispatch(void 0,"when",[void 0,function(t){var e,i=!1;try{e=function(t){return"function"==typeof n?n(t):t}(t)}catch(t){if(i=!0,!x.onerror)throw t;x.onerror(t)}i||r.notify(e)}]),r.promise},x.tap=function(t,e){return x(t).tap(e)},D.prototype.tap=function(e){return e=x(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},x.when=C,D.prototype.thenResolve=function(t){return this.then(function(){return t})},x.thenResolve=function(t,e){return x(t).thenResolve(e)},D.prototype.thenReject=function(t){return this.then(function(){throw t})},x.thenReject=function(t,e){return x(t).thenReject(e)},x.nearer=M,x.isPromise=O,x.isPromiseAlike=L,x.isPending=function(t){return O(t)&&"pending"===t.inspect().state},D.prototype.isPending=function(){return"pending"===this.inspect().state},x.isFulfilled=function(t){return!O(t)||"fulfilled"===t.inspect().state},D.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},x.isRejected=function(t){return O(t)&&"rejected"===t.inspect().state},D.prototype.isRejected=function(){return"rejected"===this.inspect().state};var I,A,P,N=[],j=[],B=[],R=!0;function F(){N.length=0,j.length=0,R=R||!0}function z(e){var t=D({when:function(t){return t&&function(e){if(R){var i=n(j,e);-1!==i&&("object"==typeof X&&"function"==typeof X.emit&&x.nextTick.runAfter(function(){var t=n(B,e);-1!==t&&(X.emit("rejectionHandled",N[i],e),B.splice(t,1))}),j.splice(i,1),N.splice(i,1))}}(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return function(t,e){R&&("object"==typeof X&&"function"==typeof X.emit&&x.nextTick.runAfter(function(){-1!==n(j,t)&&(X.emit("unhandledRejection",e,t),B.push(t))}),j.push(t),e&&void 0!==e.stack?N.push(e.stack):N.push("(no stack) "+e))}(t,e),t}function H(i){return D({when:function(){return i},get:function(t){return i[t]},set:function(t,e){i[t]=e},delete:function(t){delete i[t]},post:function(t,e){return null==t?i.apply(void 0,e):i[t].apply(i,e)},apply:function(t,e){return i.apply(t,e)},keys:function(){return m(i)}},void 0,function(){return{state:"fulfilled",value:i}})}function q(t,e,i){return x(t).spread(e,i)}function Y(t,e,i){return x(t).dispatch(e,i)}function U(t){return C(t,function(o){var r=0,s=S();return d(o,function(t,e,i){var n;O(e)&&"fulfilled"===(n=e.inspect()).state?o[i]=n.value:(++r,C(e,function(t){o[i]=t,0==--r&&s.resolve(o)},s.reject,function(t){s.notify({index:i,value:t})}))},void 0),0===r&&s.resolve(o),s.promise})}function W(o){if(0===o.length)return x.resolve();var r=x.defer(),s=0;return d(o,function(t,e,i){var n=o[i];s++,C(n,function(t){r.resolve(t)},function(t){if(0==--s){var e=t||new Error(""+t);e.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+e.message,r.reject(e)}},function(t){r.notify({index:i,value:t})})},void 0),r.promise}function V(t){return C(t,function(t){return t=u(t,x),C(U(u(t,function(t){return C(t,e,e)})),function(){return t})})}x.resetUnhandledRejections=F,x.getUnhandledReasons=function(){return N.slice()},x.stopUnhandledRejectionTracking=function(){F(),R=!1},F(),x.reject=z,x.fulfill=H,x.master=function(i){return D({isDef:function(){}},function(t,e){return Y(i,t,e)},function(){return x(i).inspect()})},x.spread=q,D.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},x.async=function(e){return function(){function t(t,e){var i;if("undefined"==typeof StopIteration){try{i=n[t](e)}catch(t){return z(t)}return i.done?x(i.value):C(i.value,o,r)}try{i=n[t](e)}catch(t){return function(t){return"[object StopIteration]"===v(t)||t instanceof s}(t)?x(t.value):z(t)}return C(i,o,r)}var n=e.apply(this,arguments),o=t.bind(t,"next"),r=t.bind(t,"throw");return o()}},x.spawn=function(t){x.done(x.async(t)())},x.return=function(t){throw new s(t)},x.promised=function(i){return function(){return q([this,U(arguments)],function(t,e){return i.apply(t,e)})}},x.dispatch=Y,D.prototype.dispatch=function(t,e){var i=this,n=S();return x.nextTick(function(){i.promiseDispatch(n.resolve,t,e)}),n.promise},x.get=function(t,e){return x(t).dispatch("get",[e])},D.prototype.get=function(t){return this.dispatch("get",[t])},x.set=function(t,e,i){return x(t).dispatch("set",[e,i])},D.prototype.set=function(t,e){return this.dispatch("set",[t,e])},x.del=x.delete=function(t,e){return x(t).dispatch("delete",[e])},D.prototype.del=D.prototype.delete=function(t){return this.dispatch("delete",[t])},x.mapply=x.post=function(t,e,i){return x(t).dispatch("post",[e,i])},D.prototype.mapply=D.prototype.post=function(t,e){return this.dispatch("post",[t,e])},x.send=x.mcall=x.invoke=function(t,e){return x(t).dispatch("post",[e,l(arguments,2)])},D.prototype.send=D.prototype.mcall=D.prototype.invoke=function(t){return this.dispatch("post",[t,l(arguments,1)])},x.fapply=function(t,e){return x(t).dispatch("apply",[void 0,e])},D.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},x.try=x.fcall=function(t){return x(t).dispatch("apply",[void 0,l(arguments,1)])},D.prototype.fcall=function(){return this.dispatch("apply",[void 0,l(arguments)])},x.fbind=function(t){var e=x(t),i=l(arguments,1);return function(){return e.dispatch("apply",[this,i.concat(l(arguments))])}},D.prototype.fbind=function(){var t=this,e=l(arguments);return function(){return t.dispatch("apply",[this,e.concat(l(arguments))])}},x.keys=function(t){return x(t).dispatch("keys",[])},D.prototype.keys=function(){return this.dispatch("keys",[])},x.all=U,D.prototype.all=function(){return U(this)},x.any=W,D.prototype.any=function(){return W(this)},x.allResolved=(I=V,A="allResolved",P="allSettled",function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(A+" is deprecated, use "+P+" instead.",new Error("").stack),I.apply(I,arguments)}),D.prototype.allResolved=function(){return V(this)},x.allSettled=function(t){return x(t).allSettled()},D.prototype.allSettled=function(){return this.then(function(t){return U(u(t,function(t){function e(){return t.inspect()}return(t=x(t)).then(e,e)}))})},x.fail=x.catch=function(t,e){return x(t).then(void 0,e)},D.prototype.fail=D.prototype.catch=function(t){return this.then(void 0,t)},x.progress=function(t,e){return x(t).then(void 0,void 0,e)},D.prototype.progress=function(t){return this.then(void 0,void 0,t)},x.fin=x.finally=function(t,e){return x(t).finally(e)},D.prototype.fin=D.prototype.finally=function(e){if(!e||"function"!=typeof e.apply)throw new Error("Q can't apply finally callback");return e=x(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},x.done=function(t,e,i,n){return x(t).done(e,i,n)},D.prototype.done=function(t,e,i){var n=function(t){x.nextTick(function(){if(y(t,o),!x.onerror)throw t;x.onerror(t)})},o=t||e||i?this.then(t,e,i):this;"object"==typeof X&&X&&X.domain&&(n=X.domain.bind(n)),o.then(void 0,n)},x.timeout=function(t,e,i){return x(t).timeout(e,i)},D.prototype.timeout=function(t,e){var i=S(),n=setTimeout(function(){e&&"string"!=typeof e||((e=new Error(e||"Timed out after "+t+" ms")).code="ETIMEDOUT"),i.reject(e)},t);return this.then(function(t){clearTimeout(n),i.resolve(t)},function(t){clearTimeout(n),i.reject(t)},i.notify),i.promise},x.delay=function(t,e){return void 0===e&&(e=t,t=void 0),x(t).delay(e)},D.prototype.delay=function(i){return this.then(function(t){var e=S();return setTimeout(function(){e.resolve(t)},i),e.promise})},x.nfapply=function(t,e){return x(t).nfapply(e)},D.prototype.nfapply=function(t){var e=S(),i=l(t);return i.push(e.makeNodeResolver()),this.fapply(i).fail(e.reject),e.promise},x.nfcall=function(t){var e=l(arguments,1);return x(t).nfapply(e)},D.prototype.nfcall=function(){var t=l(arguments),e=S();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},x.nfbind=x.denodeify=function(i){if(void 0===i)throw new Error("Q can't wrap an undefined function");var n=l(arguments,1);return function(){var t=n.concat(l(arguments)),e=S();return t.push(e.makeNodeResolver()),x(i).fapply(t).fail(e.reject),e.promise}},D.prototype.nfbind=D.prototype.denodeify=function(){var t=l(arguments);return t.unshift(this),x.denodeify.apply(void 0,t)},x.nbind=function(i,n){var o=l(arguments,2);return function(){var t=o.concat(l(arguments)),e=S();return t.push(e.makeNodeResolver()),x(function(){return i.apply(n,arguments)}).fapply(t).fail(e.reject),e.promise}},D.prototype.nbind=function(){var t=l(arguments,0);return t.unshift(this),x.nbind.apply(void 0,t)},x.nmapply=x.npost=function(t,e,i){return x(t).npost(e,i)},D.prototype.nmapply=D.prototype.npost=function(t,e){var i=l(e||[]),n=S();return i.push(n.makeNodeResolver()),this.dispatch("post",[t,i]).fail(n.reject),n.promise},x.nsend=x.nmcall=x.ninvoke=function(t,e){var i=l(arguments,2),n=S();return i.push(n.makeNodeResolver()),x(t).dispatch("post",[e,i]).fail(n.reject),n.promise},D.prototype.nsend=D.prototype.nmcall=D.prototype.ninvoke=function(t){var e=l(arguments,1),i=S();return e.push(i.makeNodeResolver()),this.dispatch("post",[t,e]).fail(i.reject),i.promise},x.nodeify=function(t,e){return x(t).nodeify(e)},D.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){x.nextTick(function(){e(null,t)})},function(t){x.nextTick(function(){e(t)})})},x.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var G=_();return x})}).call(this,i(26),i(22).setImmediate)},function(t,e,i){"use strict";i.r(e),i.d(e,"init",function(){return n});var M=document.getElementById("access").value,r=i(27),O=function(t){return(t=(t=t.replace(/\//g,".")).split("."))[2]="20"+t[2],t.join(".")},h={weekStart:"monday",mark:function(t){return t.getDate()==(new Date).getDate()&&t.getMonth()==(new Date).getMonth()?"markedDay":""}};function n(){document.querySelectorAll('input[name="filter-radio"]');function n(){document.querySelectorAll(".filter-item").forEach(function(t){t.querySelector("input").checked&&!C.checked?t.classList.add("d-hide"):t.classList.remove("d-hide");var e=t.parentElement;Array.from(e.querySelectorAll(".filter-item")).find(function(t){return!t.classList.contains("d-hide")})?e.classList.remove("d-hide"):e.classList.add("d-hide")});var e=!1;o.querySelectorAll(".w100").forEach(function(t){return e=!t.classList.contains("d-hide")}),e?o.classList.remove("emptyTasks"):o.classList.add("emptyTasks")}var o=document.getElementById("tasks"),l=document.getElementById("period"),t=document.querySelectorAll("#filters > *"),C=document.getElementById("showHiddenSwitch");C.oninput=n,t.forEach(function(s,t,a){s.onclick=function(t){var n,o;document.getElementById(s.getAttribute("for")).checked=!0;var r=new dhx.Popup;switch(s.getAttribute("for")){case"today":return d(new Date,"today"),a.forEach(function(t){return t.classList.remove("active")}),s.classList.add("active"),void(l.innerText="Выбрана сегодняшняя дата");case"day":n=new dhx.Calendar(null,h),o="day";break;case"3days":n=new dhx.Calendar(null,h),o="3days";break;case"week":n=new dhx.Calendar(null,h),o="week";break;case"mounth":n=new dhx.Calendar(null,{view:"month",value:new Date}),o="mounth"}r.attach(n),r.show(s),n.events.on("change",function(t){var e;a.forEach(function(t){return t.classList.remove("active")});function i(){return new Date(t)}switch(o){case"day":console.log(t),l.innerText="Выбрана дата: "+O(n.getValue());break;case"3days":e=new Date(i().setDate(i().getDate()+3)).toISOString(),console.log(e),l.innerText="Выбраны дни с "+O(n.getValue())+" по "+e.slice(8,10)+"."+e.slice(5,7)+"/"+e.slice(0,4);break;case"week":e=new Date(i().setDate(i().getDate()+7)).toISOString(),l.innerText="Выбраны дни с "+O(n.getValue())+" по "+e.slice(8,10)+"."+e.slice(5,7)+"."+e.slice(0,4);break;case"mounth":switch(t.getMonth()+1){case 1:l.innerText="Выбран Январь ";break;case 2:l.innerText="Выбран Февраль ";break;case 3:l.innerText="Выбран Март ";break;case 4:l.innerText="Выбран Апрель ";break;case 5:l.innerText="Выбран Май ";break;case 6:l.innerText="Выбран Июнь ";break;case 7:l.innerText="Выбран Июль ";break;case 8:l.innerText="Выбран Август ";break;case 9:l.innerText="Выбран Сентябрь ";break;case 10:l.innerText="Выбран Октябрь ";break;case 11:l.innerText="Выбран Ноябрь ";break;case 12:l.innerText="Выбран Декабрь "}}s.classList.add("active"),d(t,s.getAttribute("for")),r.hide()})}});var d=function E(T,D){o.innerHTML='<div class="loading loading-lg"></div>',fetch("/office/lids/getList",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){o.innerHTML="";var e=[];t.forEach(function(t){e.push({lidData:t,tasks:t.lid_data.tasks?t.lid_data.tasks:null})}),e.forEach(function(k){if(k.tasks&&!(k.tasks.length<=0)){var S=document.createElement("div");S.innerHTML='\n                    <div class="h4 emptyLidTitle">'.concat(k.lidData.title,'</div>\n                    <small class="s-rounded pb-1 float-right" title="Маржа"><b class="label label-primary">').concat(r.formatMoney(k.lidData.cgi,"",2," ",","),' р.</b></small>\n                    <small class="">\n                        Вал: <b class="label label-secondary">').concat(r.formatMoney(k.lidData.gi,"",2," ",","),' р.</b>\n                        Предоплата: <b class="label label-secondary">').concat(r.formatMoney(k.lidData.prepayment,"",2," ",","),' р.</b>\n                        Доплата: <b class="label label-secondary">').concat(r.formatMoney(k.lidData.restpayment,"",2," ",",")," р.</b>\n                    </small>\n                "),S.classList.add("w100"),k.tasks.forEach(function(t,e){var i=T.getDate(),n=new Date(new Date(T).setDate(new Date(T).getDate()+1)).getDate(),o=new Date(new Date(T).setDate(new Date(T).getDate()+2)).getDate(),r=Number(T.toISOString().slice(5,7)),s=Number(T.toISOString().slice(2,4)),a={day:Number(t.date.split("/")[0]),month:Number(t.date.split("/")[1]),year:Number(t.date.split("/")[2]),hours:Number(t.time.split(":")[0]),minutes:Number(t.time.split(":")[1])},l=!1;if(new Date(Number("20"+a.year),a.month-1,a.day,a.hours,a.minutes)>new Date&&!t.done)switch(D){case"day":case"today":if(a.day!=i||a.month!=r||a.year!=s)return;break;case"3days":if(a.day!=i&&a.day!=n&&a.day!=o||a.month!=r||a.year!=s)return;break;case"week":if(a.day!=i&&a.day!=new Date(getDate().setDate(getDate().getDate()+1)).toISOString().slice(8,10)&&a.day!=new Date(getDate().setDate(getDate().getDate()+2)).toISOString().slice(8,10)&&a.day!=new Date(getDate().setDate(getDate().getDate()+3)).toISOString().slice(8,10)&&a.day!=new Date(getDate().setDate(getDate().getDate()+4)).toISOString().slice(8,10)&&a.day!=new Date(getDate().setDate(getDate().getDate()+5)).toISOString().slice(8,10)&&a.day!=new Date(getDate().setDate(getDate().getDate()+6)).toISOString().slice(8,10)||a.month!=r||a.year!=s)return;break;case"mounth":if(a.month!=r||a.year!=s)return}else l=!0;var d=document.createElement("div");d.classList.add("filter-item","pl-2","pt-2","form-group","d-flex","mb-1"),!C.checked&&t.done&&d.classList.add("d-hide"),d.innerHTML='\n                        <label class="form-checkbox wfc d-inline-block pr-1">\n                            <input type="checkbox" '.concat(t.done?"checked":"",' data-i="').concat(e,'">\n                            <i class="form-icon"></i>\n                        </label>\n                        <div class="d-block w100 mya">\n                            <figure class="avatar float-right c-hand" data-initial="?" title="Никто" data-i="').concat(e,'"></figure>\n\n                            <button class="editbt d-hide btn btn-link float-right btn-sm" name="saveTask" disabled>\n                                <span class="icon icon-share"></span>\n                            </button>\n                            <button class="editbt d-hide btn btn-link float-right btn-sm" name="rejectTaskEdit" disabled>\n                                <span class="icon icon-cross"></span>\n                            </button>\n\n                            <span class="c-hand ').concat(l&&!t.done?"text-error":"text-gray",'" name="dhxDate" data-i="').concat(e,'">').concat(O(t.date),' </span>\n                            <span class="c-hand ').concat(l&&!t.done?"text-error":"text-gray",'" name="dhxTime" data-i="').concat(e,'">').concat(t.time,' </span>\n                            <div name="taskTitle" contenteditable="true" data-old="').concat(t.title,'" value="').concat(t.title,'" data-i="').concat(e,'">').concat(t.title,"</div>\n                        </div>\n                    "),t.author&&fetch("/office/users/",{method:"POST",body:JSON.stringify({id:t.author,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){d.querySelector("figure").dataset.initial=t[0].fio.slice(0,1),t[0].fio.split(" ")[1]&&(d.querySelector("figure").dataset.initial+=t[0].fio.split(" ")[1].slice(0,1)),d.querySelector("figure").title=t[0].fio,d.querySelector("figure").dataset.id=t[0].id,d.querySelector("figure").classList.add("loaded")});var h=new dhx.Timepicker(null,{actions:!0}),u=new dhx.Calendar(null,{weekStart:"monday"});h.setValue(t.time),u.setValue(t.date);var c=d.querySelector('[name="dhxTime"]'),f=d.querySelector('[name="dhxDate"]'),p=new dhx.Popup,m=new dhx.Popup;"full"==M&&(p.attach(h),m.attach(u)),"full"==M&&h.events.on("Save",function(){p.hide(),k.lidData.lid_data.tasks[c.dataset.i].time=h.getValue(),fetch("/office/lids/update",{method:"POST",body:JSON.stringify({id:k.lidData.id,lid_data:k.lidData.lid_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){E(T,D)})}),"full"==M&&u.events.on("change",function(){m.hide(),k.lidData.lid_data.tasks[f.dataset.i].date=u.getValue(),fetch("/office/lids/update",{method:"POST",body:JSON.stringify({id:k.lidData.id,lid_data:k.lidData.lid_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){E(T,D)})}),"full"==M&&(c.onclick=function(t){p.show(c),document.querySelector(".dhx_timepicker__button-close").onclick=function(t){return p.hide()}},f.onclick=function(t){m.show(f)});var v=d.querySelector('[name="taskTitle"]'),g=d.querySelector('[name="saveTask"]'),y=d.querySelector('[name="rejectTaskEdit"]');v.onfocus=function(t){v.classList.add("active"),g.classList.remove("d-hide"),y.classList.remove("d-hide"),g.disabled=!1,y.disabled=!1},v.onblur=function(t){return setTimeout(function(){v.classList.remove("active"),g.classList.add("d-hide"),y.classList.add("d-hide"),g.disabled=!0,y.disabled=!0},200)},"full"==M&&(g.onclick=function(t){console.log(v.innerText.trim().length),0!=v.innerText.trim().length&&(v.contenteditable=!1,g.disabled=!0,y.disabled=!0,v.innerText=v.innerText.replace(/\r?\n/g," ").trim(),k.lidData.lid_data.tasks[v.dataset.i].title=v.innerText,fetch("/office/lids/update",{method:"POST",body:JSON.stringify({id:k.lidData.id,lid_data:k.lidData.lid_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(){v.contenteditable=!0,g.disabled=!1,y.disabled=!1,v.dataset.old=v.innerText,v.blur()}))}),"full"==M&&(y.onclick=function(t){v.innerText=v.dataset.old}),"full"==M&&(d.querySelector("input").oninput=function(t){k.lidData.lid_data.tasks[t.target.dataset.i].done=t.target.checked,fetch("/office/lids/update",{method:"POST",body:JSON.stringify({id:k.lidData.id,lid_data:k.lidData.lid_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})});var b=d.querySelector("figure"),w=document.getElementById("userSelectModal"),_=(document.getElementById("rejectSelection"),document.getElementById("confirmUser"));b.onclick=function(t){w.classList.add("active");var i=w.querySelectorAll(".card-body .tile"),e=Array.from(i).find(function(t){return t.dataset.id==b.dataset.id&&t});e?e.classList.add("active"):i.forEach(function(t){return t.classList.remove("active")}),i.forEach(function(e){e.onclick=function(t){i.forEach(function(t){return t.classList.remove("active")}),e.classList.add("active"),_.onclick=function(t){return x(t,b.dataset.i,e.dataset.id)}}})};var x=function(t,e,i){k.lidData.lid_data.tasks[e].author=i,fetch("/office/lids/update",{method:"POST",body:JSON.stringify({id:k.lidData.id,lid_data:k.lidData.lid_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(){E(T,D)})};S.insertAdjacentElement("beforeend",d)}),S.insertAdjacentHTML("beforeend",'<div class="divider"></div>'),S.querySelectorAll(".filter-item").length&&o.insertAdjacentElement("beforeend",S),n()}});var i=!1;o.querySelectorAll(".w100").forEach(function(t){return i=!t.classList.contains("d-hide")}),i?o.classList.remove("emptyTasks"):o.classList.add("emptyTasks")})};d(new Date,"today")}},function(t,e,i){"use strict";i.r(e),i.d(e,"init",function(){return n});document.getElementById("access").value;function n(){function e(t){a.checked||l.checked||(t==a?l.checked=!0:a.checked=!0)}var a=document.getElementById("filterContacts"),l=document.getElementById("filterCompanies");a.oninput=function(t){e(t.target),p()},l.oninput=function(t){e(t.target),p()};function t(){d.querySelectorAll("tr").forEach(function(f){f.onclick=function(t){var n=f.dataset.info?JSON.parse(f.dataset.info):null,e=f.dataset.parent?JSON.parse(f.dataset.parent):null,i=f.dataset.phones?JSON.parse(f.dataset.phones):null,o=f.dataset.email?JSON.parse(f.dataset.email):null;document.querySelectorAll(".t-editContact").forEach(function(t){return t.remove()});var r=[];i&&i.forEach(function(t){r.push('\n                        <div class="seven-prefix">\n                            <input data-id="'.concat(t.id,'" data-old="').concat(t.phone,'" type="text" pattern="d*" placeholder="..." value="').concat(t.phone,'" maxlength="10" name="phoneEdit">\n                        </div>\n                    '))});var s='\n                    <tr class="t-editContact" data-i="'.concat(n.id,'">\n                        <td colspan="4">\n                            <div class="btn btn-clear float-right close-edit"></div>\n                            <div class="d-flex">\n                                <div class="col-4">\n                                    <label>Название</label>\n                                    <input class="form-input" name="contactTitle" type="text" placeholder="Иван" value="').concat(n.title?n.title:"",'">\n                                    <div class="form-group mb-0">\n                                        <label class="form-label pb-0">Тип</label>\n                                        <label class="form-radio d-inline-block">\n                                            <input type="radio" name="type" ').concat("person"==n.type?"checked":"",' value="person">\n                                            <i class="form-icon"></i> Контакт\n                                        </label>\n                                        <label class="form-radio d-inline-block">\n                                            <input type="radio" name="type" ').concat("company"==n.type?"checked":"",' value="company">\n                                            <i class="form-icon"></i> Компания\n                                        </label>\n                                    </div>\n                                    <div class="form-autocomplete ').concat("company"==n.type?"d-hide":"",'">\n                                        <label class="form-label">Компания</label>\n                                        <div class="form-autocomplete-input form-input">\n                                            <input class="form-input" type="text" placeholder="Поиск..." value="').concat(e?e.title:"",'">\n                                        </div>\n                                        <ul class="menu d-hide"></ul>\n                                    </div>\n                                    <label class="form-label">Телефоны</label>\n                                    ').concat(r.join("\n"),'\n                                    <div class="seven-prefix">\n                                        <input type="text" pattern="d*" placeholder="..." maxlength="10" name="newPhone">\n                                    </div>\n                                    <label class="form-label">Email</label>\n                                    <input class="form-input mail" type="text" placeholder="pochta@email.ru" data-i="').concat(o?o.id:"new",'" value="').concat(o?o.email:"",'">\n                                </div>\n                            </div>\n                            <button class="btn btn-primary btn-sm float-right">Сохранить</button>\n                        </td>\n                    </tr>\n                ');f.insertAdjacentHTML("afterend",s),document.querySelectorAll(".t-editContact .close-edit").forEach(function(t){return t.onclick=function(){return document.querySelectorAll(".t-editContact").forEach(function(t){return t.remove()})}});function a(){document.querySelectorAll('.t-editContact [name="phoneEdit"]').forEach(function(e){e.onkeyup=function(t){"Enter"==t.code&&10==e.value.length&&e.value!=e.dataset.old?(e.disabled=!0,fetch("/office/phones/update",{method:"POST",body:JSON.stringify({id:e.dataset.id,phone:e.value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){return e.disabled=!1})):"Enter"==t.code&&0==e.value.length&&fetch("/office/phones/update",{method:"POST",body:JSON.stringify({id:e.dataset.id,cmd:"delete",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){return e.parentElement.remove()})}})}a(),document.querySelector('.t-editContact [name="newPhone"]').onkeyup=function(e){"Enter"==e.code&&10==e.target.value.length&&(e.target.disabled=!0,fetch("/office/phones/update",{method:"POST",body:JSON.stringify({phone:e.target.value,parent:n.id,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){e.target.parentElement.insertAdjacentHTML("beforebegin",'\n                                <div class="seven-prefix">\n                                    <input data-id="'.concat(t.insertId,'" data-old="').concat(e.target.value,'" type="text" pattern="d*" placeholder="..." value="').concat(e.target.value,'" maxlength="10" name="phoneEdit">\n                                </div>\n                            ')),a(),e.target.value="",e.target.disabled=!1}))},document.querySelectorAll('.t-editContact input[type="radio"]').forEach(function(t){t.oninput=function(t){"company"==t.target.value?document.querySelector(".t-editContact .form-autocomplete").classList.add("d-hide"):document.querySelector(".t-editContact .form-autocomplete").classList.remove("d-hide")}});function l(){h.innerHTML='<div class="loading"></div>',fetch("/office/contacts",{method:"POST",body:JSON.stringify({title:d.value.trim(),find:"liketitle",only:"company",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){h.innerHTML="",t.forEach(function(t){h.insertAdjacentHTML("beforeend",'\n                                <div class="tile tile-centered py-1 c-hand" data-i="'.concat(t.id,"\" data-title='").concat(t.title,'\'>\n                                    <div class="tile-icon">\n                                        <figure class="avatar avatar-sm" data-initial="').concat(t.title.slice(0,1),'">\n                                    </div>\n                                    <div class="tile-content">').concat(t.title,"</div>\n                                </div>\n                            "))}),h.insertAdjacentHTML("beforeend",'\n                            <div class="tile tile-centered py-1 c-hand" data-i="0" data-title="">\n                                <div class="tile-icon">\n                                    <figure class="avatar avatar-sm" data-initial="?">\n                                </div>\n                                <div class="tile-content">Нет</div>\n                            </div>\n                        '),h.querySelectorAll(".tile").forEach(function(e){e.onclick=function(t){document.querySelector(".t-editContact .form-autocomplete").dataset.parent=e.dataset.i,d.value=e.dataset.title,h.classList.add("d-hide")}})})}var d=document.querySelector(".t-editContact .form-autocomplete input"),h=document.querySelector(".t-editContact .form-autocomplete .menu");d.oninput=l,d.onfocus=function(t){l(),h.classList.remove("d-hide")},d.onblur=function(t){return setTimeout(function(){return h.classList.add("d-hide")},300)};var u=document.querySelector(".t-editContact button"),c=document.querySelector('.t-editContact [name="contactTitle"]');c.oninput=function(t){0==c.value.trim().length?c.classList.add("is-error"):c.classList.remove("is-error")},c.onblur=function(t){return c.classList.remove("is-error")},u.onclick=function(t){var e=Array.from(document.querySelectorAll('.t-editContact input[type="radio"]')).find(function(t){return!!t.checked}).value;u.disabled=!0;var i=document.querySelector(".t-editContact .form-autocomplete").dataset.parent;0<c.value.trim().length?(fetch("/office/contacts/update",{method:"POST",body:JSON.stringify({id:n.id,title:c.value,type:e,parent:i,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){p()}),fetch("/office/email/update",{method:"POST",body:JSON.stringify({id:"new"!=document.querySelector(".mail").dataset.i?document.querySelector(".mail").dataset.i:void 0,parent:"new"!=document.querySelector(".mail").dataset.i?void 0:n.id,email:document.querySelector(".mail").value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})):c.classList.add("is-error")}}})}var i=document.getElementById("searchInput"),p=function(){return Promise.all([fetch("/office/contacts",{method:"POST",body:JSON.stringify({title:i.value.trim(),find:"liketitle",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/phones",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/email",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(t){n(t)})},d=document.getElementById("contactsList");t();var n=function(s){d.innerHTML="",s[0].length||d.insertAdjacentHTML("beforeend",'\n                <tr>\n                    <td class="empty-search" colspan="4"></td>\n                </tr>\n            '),s[0].forEach(function(e,t,i){var n=s[2].find(function(t){return t.parent==e.id}),o=i.find(function(t){return t.id==e.parent&&t}),r=[];s[1].forEach(function(t){return t.parent==e.id?r.push(t):null}),!a.checked&&"person"==e.type||!l.checked&&"company"==e.type||d.insertAdjacentHTML("beforeend",'\n                <tr class="c-hand" data-info=\''.concat(JSON.stringify(e),"' ").concat(o?"data-parent='"+JSON.stringify(o)+"'":""," data-phones='").concat(JSON.stringify(r),"' ").concat(n?"data-email='"+JSON.stringify(n)+"'":"",">\n                    <td>").concat(e.id,"</td>\n                    <td>").concat(e.title,"</td>\n                    <td>").concat(r[0]?"+7"+r[0].phone:"","</td>\n                    <td>").concat(o?o.title:"","</td>\n                </tr>\n            "))}),t()};i.oninput=function(t){p()}}},function(t,e,i){"use strict";function n(){document.querySelectorAll(".operations input").forEach(function(t){t.onclick=function(){fetch("/office/users/update",{method:"POST",body:JSON.stringify({id:t.dataset.uid,active:t.checked?1:0,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})}});var t=document.querySelector("#showInactive input"),e=document.querySelectorAll("tbody tr");t.onclick=function(){t.checked?e.forEach(function(t){t.classList.contains("d-hide")&&t.classList.remove("d-hide")}):e.forEach(function(t){t.querySelector("input").checked||t.classList.add("d-hide")})}}i.r(e),i.d(e,"init",function(){return n})},function(t,e,i){"use strict";i.r(e),i.d(e,"init",function(){return r});var n=i(1),a=i.n(n),o=i(2),l=i.n(o);function r(){document.querySelectorAll(".operations input").forEach(function(t){t.onclick=function(){fetch("/office/posts/update",{method:"POST",body:JSON.stringify({id:t.dataset.uid,active:t.checked?1:0,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})}});var t=document.querySelector("#showInactive input"),e=document.querySelectorAll("tbody tr");t.onclick=function(){t.checked?e.forEach(function(t){t.classList.contains("d-hide")&&t.classList.remove("d-hide")}):e.forEach(function(t){t.querySelector("td:nth-child(4) input").checked||t.classList.add("d-hide")})},document.querySelectorAll(".users .form-autocomplete").forEach(function(n){if(n.dataset.data){var o=JSON.parse(n.dataset.data),r=function(){n.querySelectorAll(".chip").forEach(function(e){return e.querySelector("a").onclick=function(){e.remove();var t=o.users.split(",").indexOf(e.dataset.id);o.users=o.users.split(","),o.users.splice(t,1),o.users=o.users.join(","),fetch("/office/posts/update",{method:"POST",body:JSON.stringify({id:o.id,users:o.users,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})}})};r();var s=n.querySelector("ul");n.querySelector("input").oninput=function(){var e=l()(a.a.mark(function t(i){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i.target.value.trim().length){t.next=2;break}return t.abrupt("return",s.innerHTML="");case 2:return t.next=4,fetch("/office/users",{method:"POST",body:JSON.stringify({find:"search",fio:i.target.value.trim(),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()});case 4:if((e=t.sent).length){t.next=7;break}return t.abrupt("return",s.innerHTML="");case 7:s.innerHTML="",e.forEach(function(e){if(!o.users.split(",").find(function(t){return t==e.id})){var t=document.createElement("li");t.classList.add("menu-item"),t.innerHTML='\n                <a>\n                    <div class="tile tile-centered">\n                        <div class="tile-content">'.concat(e.fio,"</div>\n                    </div>\n                </a>"),t.querySelector("a").onclick=function(){s.innerHTML="",i.target.value="";var t=document.createElement("span");t.classList.add("chip"),t.dataset.id=e.id,t.innerHTML="".concat(e.fio,'<a class="btn btn-clear"></a>'),n.querySelector(".chips").insertAdjacentElement("beforeend",t),r(),o.users=o.users.length?o.users.split(","):[],o.users.push(e.id),o.users=o.users.join(","),fetch("/office/posts/update",{method:"POST",body:JSON.stringify({id:o.id,users:o.users,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})},s.insertAdjacentElement("beforeend",t)}});case 9:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),n.removeAttribute("data-data")}}),document.querySelectorAll(".stats .form-autocomplete").forEach(function(n){if(n.dataset.data){var o=JSON.parse(n.dataset.data),r=function(){n.querySelectorAll(".chip").forEach(function(e){return e.querySelector("a").onclick=function(){e.remove();var t=o.stat_id.split(",").indexOf(e.dataset.id);o.stat_id=o.stat_id.split(","),o.stat_id.splice(t,1),o.stat_id=o.stat_id.join(","),fetch("/office/posts/update",{method:"POST",body:JSON.stringify({id:o.id,stat_id:o.stat_id,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})}})};r();var s=n.querySelector("ul");n.querySelector("input").oninput=function(){var e=l()(a.a.mark(function t(i){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i.target.value.trim().length){t.next=2;break}return t.abrupt("return",s.innerHTML="");case 2:return t.next=4,fetch("/office/stats",{method:"POST",body:JSON.stringify({find:"search",title:i.target.value.trim(),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()});case 4:if((e=t.sent).length){t.next=7;break}return t.abrupt("return",s.innerHTML="");case 7:s.innerHTML="",e.forEach(function(e){if(!o.stat_id.split(",").find(function(t){return t==e.id})){var t=document.createElement("li");t.classList.add("menu-item"),t.innerHTML='\n                <a>\n                    <div class="tile tile-centered">\n                        <div class="tile-content">'.concat(e.title,"</div>\n                    </div>\n                </a>"),t.querySelector("a").onclick=function(){s.innerHTML="",i.target.value="";var t=document.createElement("span");t.classList.add("chip"),t.dataset.id=e.id,t.innerHTML="".concat(e.title,'<a class="btn btn-clear"></a>'),n.querySelector(".chips").insertAdjacentElement("beforeend",t),r(),o.stat_id=o.stat_id.length?o.stat_id.split(","):[],o.stat_id.push(e.id),o.stat_id=o.stat_id.join(","),fetch("/office/posts/update",{method:"POST",body:JSON.stringify({id:o.id,stat_id:o.stat_id,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})},s.insertAdjacentElement("beforeend",t)}});case 9:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),n.removeAttribute("data-data")}}),document.querySelectorAll("table tbody tr td:first-child").forEach(function(e){if(e.dataset.data){var t=JSON.parse(e.dataset.data);e.onkeydown=function(t){"Enter"==t.code&&(t.preventDefault(),e.blur())},e.onblur=function(){fetch("/office/posts/update",{method:"POST",body:JSON.stringify({id:t.id,title:e.innerText.trim(),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})},e.removeAttribute("data-data")}}),document.getElementById("addPost").onclick=l()(a.a.mark(function t(){var e,i,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/office/posts/update",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t.insertId});case 2:e=t.sent,i=JSON.stringify({id:e,parent:null,active:1,title:"",users:"",stat_id:""}),(n=document.createElement("tr")).innerHTML='\n        <td contenteditable="true"></td><td class="users"><div class="form-autocomplete"><div class="form-autocomplete-input"><div class="chips"></div><input class="form-input" type="text" placeholder="Поиск"></div><ul class="menu"></ul></div></td><td class="stats"><div class="form-autocomplete"><div class="form-autocomplete-input"><div class="chips"></div><input class="form-input" type="text" placeholder="Поиск"></div><ul class="menu"></ul></div></td><td><div class="form-group"><label class="operations form-switch"><input type="checkbox" checked="checked"<i class="form-icon"></i></label></div></td>',n.querySelectorAll("td:first-child,.form-autocomplete").forEach(function(t){return t.setAttribute("data-data",i)}),document.querySelector("table tbody").insertAdjacentElement("beforeend",n),r();case 9:case"end":return t.stop()}},t)}))}},function(t,e,i){"use strict";i.r(e),i.d(e,"init",function(){return p});var n=i(1),s=i.n(n),o=i(2),a=i.n(o),r=i(4),l=i(54),d=i(55),h=i(56),u=i(57),c=i(58),f=i(59);function p(){document.querySelectorAll(".operations input").forEach(function(t){t.onclick=function(){fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:t.dataset.uid,active:t.checked?1:0,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})}});var t=document.querySelector("#showInactive input"),e=document.querySelectorAll("tbody tr");t.onclick=function(){t.checked?e.forEach(function(t){t.classList.contains("d-hide")&&t.classList.remove("d-hide")}):e.forEach(function(t){t.querySelector("input").checked||t.classList.add("d-hide")})},document.querySelectorAll("table tbody tr td:nth-child(2)").forEach(function(e){if(e.dataset.data){var t=JSON.parse(e.dataset.data);e.onkeydown=function(t){"Enter"==t.code&&(t.preventDefault(),e.blur())},e.onblur=function(){fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:t.id,title:e.innerText.trim(),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})},e.removeAttribute("data-data")}}),document.querySelectorAll("table tbody tr td:nth-child(3)").forEach(function(r){r.querySelector("button").onclick=function(){document.getElementById("codex-editor").innerHTML="";var n=JSON.parse(r.dataset.data),t=document.getElementById("modalDescription");t.classList.add("active");var o=new EditorJS({holderId:"codex-editor",tools:{header:{class:l,inlineToolbar:["link"]},list:{class:d,inlineToolbar:!0},Marker:{class:h,shortcut:"CMD+SHIFT+M"},paragraph:{class:u,inlineToolbar:!0},checklist:{class:c,inlineToolbar:!0},delimiter:f},autofocus:!1,onReady:function(){document.querySelectorAll(".ce-inline-toolbar .icon").forEach(function(t){return t.classList.remove("icon")})},onChange:function(){},data:JSON.parse(n.description)});t.querySelector(".modal-footer button").onclick=a()(s.a.mark(function t(){var e,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.save();case 2:e=t.sent,fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:n.id,description:JSON.stringify(e),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}),(i=n).description=JSON.stringify(e),r.dataset.data=JSON.stringify(i);case 7:case"end":return t.stop()}},t)}))}}),document.getElementById("addStat").onclick=a()(s.a.mark(function t(){var e,i,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/office/stats/update",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t.insertId});case 2:e=t.sent,i=JSON.stringify({id:e,title:null,description:null,reverted:0,active:1,stat_data:null,last_day:3}),(n=document.createElement("tr")).innerHTML='<td class="text-center"><i class="icon icon-menu c-hand"></i></td><td contenteditable="true"></td><td><button class="btn btn-link text-gray">Открыть описание</button></td><td><div class="form-group"><label class="operations form-switch"><input type="checkbox" checked="checked"><i class="form-icon"></i></label></div></td>',n.querySelectorAll("td:nth-child(2),td:nth-child(3)").forEach(function(t){return t.setAttribute("data-data",i)}),document.querySelector("table tbody").insertAdjacentElement("beforeend",n),p();case 9:case"end":return t.stop()}},t)}));var i=document.querySelector("tbody"),n=function(){var t=a()(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],document.querySelectorAll("table tbody tr").forEach(function(t){return e.push(Number(t.dataset.sid))}),t.next=4,fetch("/office/stats/sort",{method:"POST",body:JSON.stringify({id:e,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}});case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();new r.a(i,{handle:".c-hand",animation:150,onEnd:n})}},function(t,e,i){window,t.exports=function(i){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=i,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=0)}([function(t,e,i){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}i(1).toString();
/**
 * Header block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 * @version 2.0.0
 */
var o=function(){function o(t){var e=t.data,i=t.config,n=t.api;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.api=n,this._CSS={block:this.api.styles.block,settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive,wrapper:"ce-header"},this._settings=i,this._data=this.normalizeData(e),this.settingsButtons=[],this._element=this.getTag()}var t,e;return e=[{key:"conversionConfig",get:function(){return{export:"text",import:"text"}}},{key:"sanitize",get:function(){return{level:{}}}},{key:"pasteConfig",get:function(){return{tags:["H1","H2","H3","H4","H5","H6"]}}},{key:"toolbox",get:function(){return{icon:i(6).default,title:"Heading"}}}],r((t=o).prototype,[{key:"normalizeData",value:function(t){var e={};return"object"!==n(t)&&(t={}),e.text=t.text||"",e.level=parseInt(t.level)||this.defaultLevel.number,e}},{key:"render",value:function(){return this._element}},{key:"renderSettings",value:function(){var i=this,n=document.createElement("DIV");return this.levels.forEach(function(t){var e=document.createElement("SPAN");e.classList.add(i._CSS.settingsButton),i.currentLevel.number===t.number&&e.classList.add(i._CSS.settingsButtonActive),e.innerHTML=t.svg,e.dataset.level=t.number,e.addEventListener("click",function(){i.setLevel(t.number)}),n.appendChild(e),i.settingsButtons.push(e)}),n}},{key:"setLevel",value:function(e){var i=this;this.data={level:e,text:this.data.text},this.settingsButtons.forEach(function(t){t.classList.toggle(i._CSS.settingsButtonActive,parseInt(t.dataset.level)===e)})}},{key:"merge",value:function(t){var e={text:this.data.text+t.text,level:this.data.level};this.data=e}},{key:"validate",value:function(t){return""!==t.text.trim()}},{key:"save",value:function(t){return{text:t.innerHTML,level:this.currentLevel.number}}},{key:"getTag",value:function(){var t=document.createElement(this.currentLevel.tag);return t.innerHTML=this._data.text||"",t.classList.add(this._CSS.wrapper),t.contentEditable="true",t.dataset.placeholder=this._settings.placeholder||"",t}},{key:"onPaste",value:function(t){var e=t.detail.data,i=2;switch(e.tagName){case"H1":i=1;break;case"H3":i=3;break;case"H4":i=4;break;case"H5":i=5;break;case"H6":i=6}this.data={level:i,text:e.innerHTML}}},{key:"data",get:function(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data},set:function(t){if(this._data=this.normalizeData(t),void 0!==t.level&&this._element.parentNode){var e=this.getTag();e.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(e,this._element),this._element=e}void 0!==t.text&&(this._element.innerHTML=this._data.text||"")}},{key:"currentLevel",get:function(){var e=this,t=this.levels.find(function(t){return t.number===e._data.level});return t=t||this.defaultLevel}},{key:"defaultLevel",get:function(){return this.levels[1]}},{key:"levels",get:function(){return[{number:1,tag:"H1",svg:'<svg width="16" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.14 1.494V4.98h4.62V1.494c0-.498.098-.871.293-1.12A.927.927 0 0 1 7.82 0c.322 0 .583.123.782.37.2.246.3.62.3 1.124v9.588c0 .503-.101.88-.303 1.128a.957.957 0 0 1-.779.374.921.921 0 0 1-.77-.378c-.193-.251-.29-.626-.29-1.124V6.989H2.14v4.093c0 .503-.1.88-.302 1.128a.957.957 0 0 1-.778.374.921.921 0 0 1-.772-.378C.096 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.285.374A.922.922 0 0 1 1.06 0c.321 0 .582.123.782.37.199.246.299.62.299 1.124zm11.653 9.985V5.27c-1.279.887-2.14 1.33-2.583 1.33a.802.802 0 0 1-.563-.228.703.703 0 0 1-.245-.529c0-.232.08-.402.241-.511.161-.11.446-.25.854-.424.61-.259 1.096-.532 1.462-.818a5.84 5.84 0 0 0 .97-.962c.282-.355.466-.573.552-.655.085-.082.246-.123.483-.123.267 0 .481.093.642.28.161.186.242.443.242.77v7.813c0 .914-.345 1.371-1.035 1.371-.307 0-.554-.093-.74-.28-.187-.186-.28-.461-.28-.825z"/></svg>'},{number:2,tag:"H2",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm10.99 9.288h3.527c.351 0 .62.072.804.216.185.144.277.34.277.588 0 .22-.073.408-.22.56-.146.154-.368.23-.665.23h-4.972c-.338 0-.601-.093-.79-.28a.896.896 0 0 1-.284-.659c0-.162.06-.377.182-.645s.255-.478.399-.631a38.617 38.617 0 0 1 1.621-1.598c.482-.444.827-.735 1.034-.875.369-.261.676-.523.922-.787.245-.263.432-.534.56-.81.129-.278.193-.549.193-.815 0-.288-.069-.546-.206-.773a1.428 1.428 0 0 0-.56-.53 1.618 1.618 0 0 0-.774-.19c-.59 0-1.054.26-1.392.777-.045.068-.12.252-.226.554-.106.302-.225.534-.358.696-.133.162-.328.243-.585.243a.76.76 0 0 1-.56-.223c-.149-.148-.223-.351-.223-.608 0-.31.07-.635.21-.972.139-.338.347-.645.624-.92a3.093 3.093 0 0 1 1.054-.665c.426-.169.924-.253 1.496-.253.69 0 1.277.108 1.764.324.315.144.592.343.83.595.24.252.425.544.558.875.133.33.2.674.2 1.03 0 .558-.14 1.066-.416 1.523-.277.457-.56.815-.848 1.074-.288.26-.771.666-1.45 1.22-.677.554-1.142.984-1.394 1.29a3.836 3.836 0 0 0-.331.44z"/></svg>'},{number:3,tag:"H3",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm11.61 4.919c.418 0 .778-.123 1.08-.368.301-.245.452-.597.452-1.055 0-.35-.12-.65-.36-.902-.241-.252-.566-.378-.974-.378-.277 0-.505.038-.684.116a1.1 1.1 0 0 0-.426.306 2.31 2.31 0 0 0-.296.49c-.093.2-.178.388-.255.565a.479.479 0 0 1-.245.225.965.965 0 0 1-.409.081.706.706 0 0 1-.5-.22c-.152-.148-.228-.345-.228-.59 0-.236.071-.484.214-.745a2.72 2.72 0 0 1 .627-.746 3.149 3.149 0 0 1 1.024-.568 4.122 4.122 0 0 1 1.368-.214c.44 0 .842.06 1.205.18.364.12.679.294.947.52.267.228.47.49.606.79.136.3.204.622.204.967 0 .454-.099.843-.296 1.168-.198.324-.48.64-.848.95.354.19.653.408.895.653.243.245.426.516.548.813.123.298.184.619.184.964 0 .413-.083.812-.248 1.198-.166.386-.41.73-.732 1.031a3.49 3.49 0 0 1-1.147.708c-.443.17-.932.256-1.467.256a3.512 3.512 0 0 1-1.464-.293 3.332 3.332 0 0 1-1.699-1.64c-.142-.314-.214-.573-.214-.777 0-.263.085-.475.255-.636a.89.89 0 0 1 .637-.242c.127 0 .25.037.367.112a.53.53 0 0 1 .232.27c.236.63.489 1.099.759 1.405.27.306.65.46 1.14.46a1.714 1.714 0 0 0 1.46-.824c.17-.273.256-.588.256-.947 0-.53-.145-.947-.436-1.249-.29-.302-.694-.453-1.212-.453-.09 0-.231.01-.422.028-.19.018-.313.027-.367.027-.25 0-.443-.062-.579-.187-.136-.125-.204-.299-.204-.521 0-.218.081-.394.245-.528.163-.134.406-.2.728-.2h.28z"/></svg>'},{number:4,tag:"H4",svg:'<svg width="20" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm13.003 10.09v-1.252h-3.38c-.427 0-.746-.097-.96-.29-.213-.193-.32-.456-.32-.788 0-.085.016-.171.048-.259.031-.088.078-.18.141-.276.063-.097.128-.19.195-.28.068-.09.15-.2.25-.33l3.568-4.774a5.44 5.44 0 0 1 .576-.683.763.763 0 0 1 .542-.212c.682 0 1.023.39 1.023 1.171v5.212h.29c.346 0 .623.047.832.142.208.094.313.3.313.62 0 .26-.086.45-.256.568-.17.12-.427.179-.768.179h-.41v1.252c0 .346-.077.603-.23.771-.152.168-.356.253-.612.253a.78.78 0 0 1-.61-.26c-.154-.173-.232-.427-.232-.764zm-2.895-2.76h2.895V4.91L12.26 8.823z"/></svg>'},{number:5,tag:"H5",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm14.16 2.645h-3.234l-.388 2.205c.644-.344 1.239-.517 1.783-.517.436 0 .843.082 1.222.245.38.164.712.39.998.677.286.289.51.63.674 1.025.163.395.245.82.245 1.273 0 .658-.148 1.257-.443 1.797-.295.54-.72.97-1.276 1.287-.556.318-1.197.477-1.923.477-.813 0-1.472-.15-1.978-.45-.506-.3-.865-.643-1.076-1.031-.21-.388-.316-.727-.316-1.018 0-.177.073-.345.22-.504a.725.725 0 0 1 .556-.238c.381 0 .665.22.85.66.182.404.427.719.736.943.309.225.654.337 1.035.337.35 0 .656-.09.919-.272.263-.182.466-.431.61-.749.142-.318.214-.678.214-1.082 0-.436-.078-.808-.232-1.117a1.607 1.607 0 0 0-.62-.69 1.674 1.674 0 0 0-.864-.229c-.39 0-.67.048-.837.143-.168.095-.41.262-.725.5-.316.239-.576.358-.78.358a.843.843 0 0 1-.592-.242c-.173-.16-.259-.344-.259-.548 0-.022.025-.177.075-.463l.572-3.26c.063-.39.181-.675.354-.852.172-.177.454-.265.844-.265h3.595c.708 0 1.062.27 1.062.81a.711.711 0 0 1-.26.572c-.172.145-.426.218-.762.218z"/></svg>'},{number:6,tag:"H6",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zM12.53 7.058a3.093 3.093 0 0 1 1.004-.814 2.734 2.734 0 0 1 1.214-.264c.43 0 .827.08 1.19.24.365.161.684.39.957.686.274.296.485.645.635 1.048a3.6 3.6 0 0 1 .223 1.262c0 .637-.145 1.216-.437 1.736-.292.52-.699.926-1.221 1.218-.522.292-1.114.438-1.774.438-.76 0-1.416-.186-1.967-.557-.552-.37-.974-.919-1.265-1.645-.292-.726-.438-1.613-.438-2.662 0-.855.088-1.62.265-2.293.176-.674.43-1.233.76-1.676.33-.443.73-.778 1.2-1.004.47-.226 1.006-.339 1.608-.339.579 0 1.089.113 1.53.34.44.225.773.506.997.84.224.335.335.656.335.964 0 .185-.07.354-.21.505a.698.698 0 0 1-.536.227.874.874 0 0 1-.529-.18 1.039 1.039 0 0 1-.36-.498 1.42 1.42 0 0 0-.495-.655 1.3 1.3 0 0 0-.786-.247c-.24 0-.479.069-.716.207a1.863 1.863 0 0 0-.6.56c-.33.479-.525 1.333-.584 2.563zm1.832 4.213c.456 0 .834-.186 1.133-.56.298-.373.447-.862.447-1.468 0-.412-.07-.766-.21-1.062a1.584 1.584 0 0 0-.577-.678 1.47 1.47 0 0 0-.807-.234c-.28 0-.548.074-.804.224-.255.149-.461.365-.617.647a2.024 2.024 0 0 0-.234.994c0 .61.158 1.12.475 1.527.316.407.714.61 1.194.61z"/></svg>'}]}}]),r(t,e),o}();t.exports=o},function(t,e,i){var n=i(2);"string"==typeof n&&(n=[[t.i,n,""]]);i(4)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(3)(!1)).push([t.i,"/**\n * Plugin styles\n */\n.ce-header {\n  padding: 1em 0;\n  margin: 0;\n  margin-bottom: -0.9em;\n  line-height: 1.5em;\n  outline: none;\n}\n\n.ce-header p,\n.ce-header div{\n  padding: 0 !important;\n  margin: 0 !important;\n}\n\n/**\n * Styles for Plugin icon in Toolbar\n */\n.ce-header__icon {}\n\n.ce-header[contentEditable=true][data-placeholder]::before{\n  position: absolute;\n  content: attr(data-placeholder);\n  color: #707684;\n  font-weight: normal;\n  display: none;\n}\n\n.ce-header[contentEditable=true][data-placeholder]:empty::before {\n  display: block;\n}\n\n.ce-header[contentEditable=true][data-placeholder]:empty:focus::before {\n  display: none;\n}\n",""])},function(t,e){t.exports=function(i){var s=[];return s.toString=function(){return this.map(function(t){var e=function(t,e){var i,n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var r=(i=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),s=o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"});return[n].concat(s).concat([r]).join("\n")}return[n].join("\n")}(t,i);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},s.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(i[o]=!0)}for(n=0;n<t.length;n++){var r=t[n];"number"==typeof r[0]&&i[r[0]]||(e&&!r[2]?r[2]=e:e&&(r[2]="("+r[2]+") and ("+e+")"),s.push(r))}},s}},function(t,e,i){var n,o,l={},r=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),s=function(){var i={};return function(t){if("function"==typeof t)return t();if(void 0===i[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}i[t]=e}return i[t]}}(),a=null,d=0,h=[],u=i(5);function c(t,e){for(var i=0;i<t.length;i++){var n=t[i],o=l[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(y(n.parts[r],e))}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(y(n.parts[r],e));l[n.id]={id:n.id,refs:1,parts:s}}}}function f(t,e){for(var i=[],n={},o=0;o<t.length;o++){var r=t[o],s=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};n[s]?n[s].parts.push(a):i.push(n[s]={id:s,parts:[a]})}return i}function p(t,e){var i=s(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=h[h.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),h.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(t.insertInto+" "+t.insertAt.before);i.insertBefore(e,o)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);0<=e&&h.splice(e,1)}function v(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),g(e,t.attrs),p(t,e),e}function g(e,i){Object.keys(i).forEach(function(t){e.setAttribute(t,i[t])})}function y(e,t){var i,n,o,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var s=d++;i=a=a||v(t),n=_.bind(null,i,s,!1),o=_.bind(null,i,s,!0)}else o=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(t),n=function(t,e,i){var n=i.css,o=i.sourceMap,r=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||r)&&(n=u(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,i,t),function(){m(i),i.href&&URL.revokeObjectURL(i.href)}):(i=v(t),n=function(t,e){var i=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,i),function(){m(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}t.exports=function(t,s){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(s=s||{}).attrs="object"==typeof s.attrs?s.attrs:{},s.singleton||"boolean"==typeof s.singleton||(s.singleton=r()),s.insertInto||(s.insertInto="head"),s.insertAt||(s.insertAt="bottom");var a=f(t,s);return c(a,s),function(t){for(var e=[],i=0;i<a.length;i++){var n=a[i];(o=l[n.id]).refs--,e.push(o)}for(t&&c(f(t,s),s),i=0;i<e.length;i++){var o;if(0===(o=e[i]).refs){for(var r=0;r<o.parts.length;r++)o.parts[r]();delete l[o.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function _(t,e,i,n){var o=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var o=e.protocol+"//"+e.host,r=o+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,n=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(n)?t:(i=0===n.indexOf("//")?n:0===n.indexOf("/")?o+n:r+n.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,i){"use strict";i.r(e),e.default='<svg width="10" height="14" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 14">\n  <path d="M7.6 8.15H2.25v4.525a1.125 1.125 0 0 1-2.25 0V1.125a1.125 1.125 0 1 1 2.25 0V5.9H7.6V1.125a1.125 1.125 0 0 1 2.25 0v11.55a1.125 1.125 0 0 1-2.25 0V8.15z"/>\n</svg>\n'}])},function(t,e,i){window,t.exports=function(i){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=i,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=0)}([function(t,e,i){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}i(1).toString();var r=function(){function n(t){var e=t.data,i=(t.config,t.api);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._elements={wrapper:null},this.settings=[{name:"unordered",title:"Unordered",icon:'<svg width="17" height="13" viewBox="0 0 17 13" xmlns="http://www.w3.org/2000/svg"> <path d="M5.625 4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0-4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0 9.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm-4.5-5a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0-4.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0 9.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25z"/></svg>',default:!1},{name:"ordered",title:"Ordered",icon:'<svg width="17" height="13" viewBox="0 0 17 13" xmlns="http://www.w3.org/2000/svg"><path d="M5.819 4.607h9.362a1.069 1.069 0 0 1 0 2.138H5.82a1.069 1.069 0 1 1 0-2.138zm0-4.607h9.362a1.069 1.069 0 0 1 0 2.138H5.82a1.069 1.069 0 1 1 0-2.138zm0 9.357h9.362a1.069 1.069 0 0 1 0 2.138H5.82a1.069 1.069 0 0 1 0-2.137zM1.468 4.155V1.33c-.554.404-.926.606-1.118.606a.338.338 0 0 1-.244-.104A.327.327 0 0 1 0 1.59c0-.107.035-.184.105-.234.07-.05.192-.114.369-.192.264-.118.475-.243.633-.373.158-.13.298-.276.42-.438a3.94 3.94 0 0 1 .238-.298C1.802.019 1.872 0 1.975 0c.115 0 .208.042.277.127.07.085.105.202.105.351v3.556c0 .416-.15.624-.448.624a.421.421 0 0 1-.32-.127c-.08-.085-.121-.21-.121-.376zm-.283 6.664h1.572c.156 0 .275.03.358.091a.294.294 0 0 1 .123.25.323.323 0 0 1-.098.238c-.065.065-.164.097-.296.097H.629a.494.494 0 0 1-.353-.119.372.372 0 0 1-.126-.28c0-.068.027-.16.081-.273a.977.977 0 0 1 .178-.268c.267-.264.507-.49.722-.678.215-.188.368-.312.46-.371.165-.11.302-.222.412-.334.109-.112.192-.226.25-.344a.786.786 0 0 0 .085-.345.6.6 0 0 0-.341-.553.75.75 0 0 0-.345-.08c-.263 0-.47.11-.62.329-.02.029-.054.107-.101.235a.966.966 0 0 1-.16.295c-.059.069-.145.103-.26.103a.348.348 0 0 1-.25-.094.34.34 0 0 1-.099-.258c0-.132.031-.27.093-.413.063-.143.155-.273.279-.39.123-.116.28-.21.47-.282.189-.072.411-.107.666-.107.307 0 .569.045.786.137a1.182 1.182 0 0 1 .618.623 1.18 1.18 0 0 1-.096 1.083 2.03 2.03 0 0 1-.378.457c-.128.11-.344.282-.646.517-.302.235-.509.417-.621.547a1.637 1.637 0 0 0-.148.187z"/></svg>',default:!0}],this._data={style:this.settings.find(function(t){return!0===t.default}).name,items:[]},this.api=i,this.data=e}return o(n,null,[{key:"enableLineBreaks",get:function(){return!0}},{key:"toolbox",get:function(){return{icon:'<svg width="17" height="13" viewBox="0 0 17 13" xmlns="http://www.w3.org/2000/svg"> <path d="M5.625 4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0-4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0 9.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm-4.5-5a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0-4.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0 9.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25z"/></svg>',title:"List"}}}]),o(n,[{key:"render",value:function(){var e=this,t="ordered"===this._data.style?this.CSS.wrapperOrdered:this.CSS.wrapperUnordered;return this._elements.wrapper=this._make("ul",[this.CSS.baseBlock,this.CSS.wrapper,t],{contentEditable:!0}),this._data.items.length?this._data.items.forEach(function(t){e._elements.wrapper.appendChild(e._make("li",e.CSS.item,{innerHTML:t}))}):this._elements.wrapper.appendChild(this._make("li",this.CSS.item)),this._elements.wrapper.addEventListener("keydown",function(t){switch(t.keyCode){case 13:e.getOutofList(t);break;case 8:e.backspace(t)}},!1),this._elements.wrapper}},{key:"save",value:function(){return this.data}},{key:"renderSettings",value:function(){var n=this,t=this._make("div",[this.CSS.settingsWrapper],{});return this.settings.forEach(function(e){var i=n._make("div",n.CSS.settingsButton,{innerHTML:e.icon});i.addEventListener("click",function(){n.toggleTune(e.name);var t=i.parentNode.querySelectorAll("."+n.CSS.settingsButton);Array.from(t).forEach(function(t){return t.classList.remove(n.CSS.settingsButtonActive)}),i.classList.toggle(n.CSS.settingsButtonActive)}),n._data.style===e.name&&i.classList.add(n.CSS.settingsButtonActive),t.appendChild(i)}),t}},{key:"onPaste",value:function(t){var e=t.detail.data;this.data=this.pasteHandler(e)}},{key:"toggleTune",value:function(t){this._elements.wrapper.classList.toggle(this.CSS.wrapperOrdered,"ordered"===t),this._elements.wrapper.classList.toggle(this.CSS.wrapperUnordered,"unordered"===t),this._data.style=t}},{key:"_make",value:function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=document.createElement(t);for(var r in Array.isArray(i)?(e=o.classList).add.apply(e,function(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(i)):i&&o.classList.add(i),n)o[r]=n[r];return o}},{key:"getOutofList",value:function(t){var e=this._elements.wrapper.querySelectorAll("."+this.CSS.item);if(!(e.length<2)){var i=e[e.length-1],n=this.currentItem;n!==i||i.textContent.trim().length||(n.parentElement.removeChild(n),this.api.blocks.insertNewBlock(),t.preventDefault(),t.stopPropagation())}}},{key:"backspace",value:function(t){var e=this._elements.wrapper.querySelectorAll("."+this.CSS.item),i=e[0];i&&e.length<2&&!i.innerHTML.replace("<br>"," ").trim()&&t.preventDefault()}},{key:"selectItem",value:function(t){t.preventDefault();var e=window.getSelection(),i=e.anchorNode.parentNode.closest("."+this.CSS.item),n=new Range;n.selectNodeContents(i),e.removeAllRanges(),e.addRange(n)}},{key:"pasteHandler",value:function(t){var e,i=t.tagName;switch(i){case"OL":e="ordered";break;case"UL":case"LI":e="unordered"}var n={type:e,items:[]};if("LI"===i)n.items=[t.innerHTML];else{var o=Array.from(t.querySelectorAll("LI"));n.items=o.map(function(t){return t.innerHTML}).filter(function(t){return!!t.trim()})}return n}},{key:"CSS",get:function(){return{baseBlock:this.api.styles.block,wrapper:"cdx-list",wrapperOrdered:"cdx-list--ordered",wrapperUnordered:"cdx-list--unordered",item:"cdx-list__item",settingsWrapper:"cdx-list-settings",settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive}}},{key:"data",set:function(t){t=t||{},this._data.style=t.style||this.settings.find(function(t){return!0===t.default}).name,this._data.items=t.items||[];var e=this._elements.wrapper;e&&e.parentNode.replaceChild(this.render(),e)},get:function(){this._data.items=[];for(var t=this._elements.wrapper.querySelectorAll(".".concat(this.CSS.item)),e=0;e<t.length;e++)t[e].innerHTML.replace("<br>"," ").trim()&&this._data.items.push(t[e].innerHTML);return this._data}},{key:"currentItem",get:function(){var t=window.getSelection().anchorNode;return t.nodeType!==Node.ELEMENT_NODE&&(t=t.parentNode),t.closest(".".concat(this.CSS.item))}}],[{key:"conversionConfig",get:function(){return{export:function(t){return t.items.join(". ")},import:function(t){return{items:[t],style:"unordered"}}}}},{key:"sanitize",get:function(){return{style:{},items:{br:!0}}}},{key:"pasteConfig",get:function(){return{tags:["OL","UL","LI"]}}}]),n}();t.exports=r},function(t,e,i){var n=i(2);"string"==typeof n&&(n=[[t.i,n,""]]);i(4)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(3)(!1)).push([t.i,".cdx-list {\n    margin: 0;\n    padding-left: 40px;\n    outline: none;\n}\n\n    .cdx-list__item {\n        padding: 5.5px 0 5.5px 3px;\n        line-height: 1.6em;\n    }\n\n    .cdx-list--unordered {\n        list-style: disc;\n    }\n\n    .cdx-list--ordered {\n        list-style: decimal;\n    }\n\n    .cdx-list-settings {\n        display: flex;\n    }\n\n    .cdx-list-settings .cdx-settings-button {\n            width: 50%;\n        }\n",""])},function(t,e){t.exports=function(i){var s=[];return s.toString=function(){return this.map(function(t){var e=function(t,e){var i,n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var r=(i=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),s=o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"});return[n].concat(s).concat([r]).join("\n")}return[n].join("\n")}(t,i);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},s.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(i[o]=!0)}for(n=0;n<t.length;n++){var r=t[n];"number"==typeof r[0]&&i[r[0]]||(e&&!r[2]?r[2]=e:e&&(r[2]="("+r[2]+") and ("+e+")"),s.push(r))}},s}},function(t,e,i){var n,o,l={},r=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),s=function(){var i={};return function(t){if("function"==typeof t)return t();if(void 0===i[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}i[t]=e}return i[t]}}(),a=null,d=0,h=[],u=i(5);function c(t,e){for(var i=0;i<t.length;i++){var n=t[i],o=l[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(y(n.parts[r],e))}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(y(n.parts[r],e));l[n.id]={id:n.id,refs:1,parts:s}}}}function f(t,e){for(var i=[],n={},o=0;o<t.length;o++){var r=t[o],s=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};n[s]?n[s].parts.push(a):i.push(n[s]={id:s,parts:[a]})}return i}function p(t,e){var i=s(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=h[h.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),h.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(t.insertInto+" "+t.insertAt.before);i.insertBefore(e,o)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);0<=e&&h.splice(e,1)}function v(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),g(e,t.attrs),p(t,e),e}function g(e,i){Object.keys(i).forEach(function(t){e.setAttribute(t,i[t])})}function y(e,t){var i,n,o,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var s=d++;i=a=a||v(t),n=_.bind(null,i,s,!1),o=_.bind(null,i,s,!0)}else o=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(t),n=function(t,e,i){var n=i.css,o=i.sourceMap,r=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||r)&&(n=u(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,i,t),function(){m(i),i.href&&URL.revokeObjectURL(i.href)}):(i=v(t),n=function(t,e){var i=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,i),function(){m(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}t.exports=function(t,s){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(s=s||{}).attrs="object"==typeof s.attrs?s.attrs:{},s.singleton||"boolean"==typeof s.singleton||(s.singleton=r()),s.insertInto||(s.insertInto="head"),s.insertAt||(s.insertAt="bottom");var a=f(t,s);return c(a,s),function(t){for(var e=[],i=0;i<a.length;i++){var n=a[i];(o=l[n.id]).refs--,e.push(o)}for(t&&c(f(t,s),s),i=0;i<e.length;i++){var o;if(0===(o=e[i]).refs){for(var r=0;r<o.parts.length;r++)o.parts[r]();delete l[o.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function _(t,e,i,n){var o=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var o=e.protocol+"//"+e.host,r=o+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,n=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(n)?t:(i=0===n.indexOf("//")?n:0===n.indexOf("/")?o+n:r+n.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}}])},function(t,e,i){window,t.exports=function(i){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=i,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=0)}([function(t,e,n){function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),t}n(1).toString();var i=function(){function i(t){var e=t.api;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.api=e,this.button=null,this.tag="MARK",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}return r(i,null,[{key:"CSS",get:function(){return"cdx-marker"}}]),r(i,[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}},{key:"surround",value:function(t){if(t){var e=this.api.selection.findParentTag(this.tag,i.CSS);e?this.unwrap(e):this.wrap(t)}}},{key:"wrap",value:function(t){var e=document.createElement(this.tag);e.classList.add(i.CSS),e.appendChild(t.extractContents()),t.insertNode(e),this.api.selection.expandToTag(e)}},{key:"unwrap",value:function(t){this.api.selection.expandToTag(t);var e=window.getSelection(),i=e.getRangeAt(0),n=i.extractContents();t.parentNode.removeChild(t),i.insertNode(n),e.removeAllRanges(),e.addRange(i)}},{key:"checkState",value:function(){var t=this.api.selection.findParentTag(this.tag,i.CSS);this.button.classList.toggle(this.iconClasses.active,!!t)}},{key:"toolboxIcon",get:function(){return n(6).default}}],[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{mark:{class:i.CSS}}}}]),i}();t.exports=i},function(t,e,i){var n=i(2);"string"==typeof n&&(n=[[t.i,n,""]]);i(4)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(3)(!1)).push([t.i,".cdx-marker {\n  background: rgba(245,235,111,0.29);\n  padding: 3px 0;\n}",""])},function(t,e){t.exports=function(i){var s=[];return s.toString=function(){return this.map(function(t){var e=function(t,e){var i,n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var r=(i=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),s=o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"});return[n].concat(s).concat([r]).join("\n")}return[n].join("\n")}(t,i);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},s.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(i[o]=!0)}for(n=0;n<t.length;n++){var r=t[n];"number"==typeof r[0]&&i[r[0]]||(e&&!r[2]?r[2]=e:e&&(r[2]="("+r[2]+") and ("+e+")"),s.push(r))}},s}},function(t,e,i){var n,o,l={},r=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),s=function(){var i={};return function(t){if("function"==typeof t)return t();if(void 0===i[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}i[t]=e}return i[t]}}(),a=null,d=0,h=[],u=i(5);function c(t,e){for(var i=0;i<t.length;i++){var n=t[i],o=l[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(y(n.parts[r],e))}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(y(n.parts[r],e));l[n.id]={id:n.id,refs:1,parts:s}}}}function f(t,e){for(var i=[],n={},o=0;o<t.length;o++){var r=t[o],s=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};n[s]?n[s].parts.push(a):i.push(n[s]={id:s,parts:[a]})}return i}function p(t,e){var i=s(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=h[h.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),h.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(t.insertInto+" "+t.insertAt.before);i.insertBefore(e,o)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);0<=e&&h.splice(e,1)}function v(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),g(e,t.attrs),p(t,e),e}function g(e,i){Object.keys(i).forEach(function(t){e.setAttribute(t,i[t])})}function y(e,t){var i,n,o,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var s=d++;i=a=a||v(t),n=_.bind(null,i,s,!1),o=_.bind(null,i,s,!0)}else o=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(t),n=function(t,e,i){var n=i.css,o=i.sourceMap,r=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||r)&&(n=u(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,i,t),function(){m(i),i.href&&URL.revokeObjectURL(i.href)}):(i=v(t),n=function(t,e){var i=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,i),function(){m(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}t.exports=function(t,s){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(s=s||{}).attrs="object"==typeof s.attrs?s.attrs:{},s.singleton||"boolean"==typeof s.singleton||(s.singleton=r()),s.insertInto||(s.insertInto="head"),s.insertAt||(s.insertAt="bottom");var a=f(t,s);return c(a,s),function(t){for(var e=[],i=0;i<a.length;i++){var n=a[i];(o=l[n.id]).refs--,e.push(o)}for(t&&c(f(t,s),s),i=0;i<e.length;i++){var o;if(0===(o=e[i]).refs){for(var r=0;r<o.parts.length;r++)o.parts[r]();delete l[o.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function _(t,e,i,n){var o=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var o=e.protocol+"//"+e.host,r=o+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,n=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(n)?t:(i=0===n.indexOf("//")?n:0===n.indexOf("/")?o+n:r+n.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,i){"use strict";i.r(e),e.default='<svg xmlns="http://www.w3.org/2000/svg" viewBox="1 2 13 12" width="13" height="12"><path d="M8.367 9.633L10.7 10.98l-.624 1.135-.787-.025-.78 1.35H6.94l1.193-2.066-.407-.62.642-1.121zm.436-.763l2.899-5.061a1.278 1.278 0 011.746-.472c.617.355.835 1.138.492 1.76l-2.815 5.114-2.322-1.34zM2.62 11.644H5.39a.899.899 0 110 1.798H2.619a.899.899 0 010-1.798z"/></svg>\n'}])},function(t,e,i){window,t.exports=function(i){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=i,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=0)}([function(t,e,i){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}i(1).toString();
/**
 * Base Paragraph Block for the Editor.js.
 * Represents simple paragraph
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */
var o=function(){function o(t){var e=t.data,i=t.config,n=t.api;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.api=n,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.onKeyUp=this.onKeyUp.bind(this),this._placeholder=i.placeholder?i.placeholder:o.DEFAULT_PLACEHOLDER,this._data={},this._element=this.drawView(),this.data=e}return r(o,null,[{key:"DEFAULT_PLACEHOLDER",get:function(){return""}}]),r(o,[{key:"onKeyUp",value:function(t){"Backspace"!==t.code&&"Delete"!==t.code||""===this._element.textContent&&(this._element.innerHTML="")}},{key:"drawView",value:function(){var t=document.createElement("DIV");return t.classList.add(this._CSS.wrapper,this._CSS.block),t.contentEditable=!0,t.dataset.placeholder=this._placeholder,t.addEventListener("keyup",this.onKeyUp),t}},{key:"render",value:function(){return this._element}},{key:"merge",value:function(t){var e={text:this.data.text+t.text};this.data=e}},{key:"validate",value:function(t){return""!==t.text.trim()}},{key:"save",value:function(t){return{text:t.innerHTML}}},{key:"onPaste",value:function(t){var e={text:t.detail.data.innerHTML};this.data=e}},{key:"data",get:function(){var t=this._element.innerHTML;return this._data.text=t,this._data},set:function(t){this._data=t||{},this._element.innerHTML=this._data.text||""}}],[{key:"conversionConfig",get:function(){return{export:"text",import:"text"}}},{key:"sanitize",get:function(){return{text:{br:!0}}}},{key:"pasteConfig",get:function(){return{tags:["P"]}}},{key:"toolbox",get:function(){return{icon:i(6).default,title:"Text"}}}]),o}();t.exports=o},function(t,e,i){var n=i(2);"string"==typeof n&&(n=[[t.i,n,""]]);i(4)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(3)(!1)).push([t.i,".ce-paragraph {\n    line-height: 1.6em;\n    outline: none;\n}\n\n.ce-paragraph[data-placeholder]:empty::before{\n  content: attr(data-placeholder);\n  color: #707684;\n  font-weight: normal;\n  opacity: 0;\n}\n\n/** Show placeholder at the first paragraph if Editor is empty */\n.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {\n  opacity: 1;\n}\n\n.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before,\n.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus::before {\n  opacity: 0;\n}\n\n.ce-paragraph p:first-of-type{\n    margin-top: 0;\n}\n\n.ce-paragraph p:last-of-type{\n    margin-bottom: 0;\n}\n",""])},function(t,e){t.exports=function(i){var s=[];return s.toString=function(){return this.map(function(t){var e=function(t,e){var i,n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var r=(i=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),s=o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"});return[n].concat(s).concat([r]).join("\n")}return[n].join("\n")}(t,i);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},s.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(i[o]=!0)}for(n=0;n<t.length;n++){var r=t[n];"number"==typeof r[0]&&i[r[0]]||(e&&!r[2]?r[2]=e:e&&(r[2]="("+r[2]+") and ("+e+")"),s.push(r))}},s}},function(t,e,i){var n,o,l={},r=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),s=function(){var i={};return function(t){if("function"==typeof t)return t();if(void 0===i[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}i[t]=e}return i[t]}}(),a=null,d=0,h=[],u=i(5);function c(t,e){for(var i=0;i<t.length;i++){var n=t[i],o=l[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(y(n.parts[r],e))}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(y(n.parts[r],e));l[n.id]={id:n.id,refs:1,parts:s}}}}function f(t,e){for(var i=[],n={},o=0;o<t.length;o++){var r=t[o],s=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};n[s]?n[s].parts.push(a):i.push(n[s]={id:s,parts:[a]})}return i}function p(t,e){var i=s(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=h[h.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),h.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(t.insertInto+" "+t.insertAt.before);i.insertBefore(e,o)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);0<=e&&h.splice(e,1)}function v(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),g(e,t.attrs),p(t,e),e}function g(e,i){Object.keys(i).forEach(function(t){e.setAttribute(t,i[t])})}function y(e,t){var i,n,o,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var s=d++;i=a=a||v(t),n=_.bind(null,i,s,!1),o=_.bind(null,i,s,!0)}else o=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(t),n=function(t,e,i){var n=i.css,o=i.sourceMap,r=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||r)&&(n=u(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,i,t),function(){m(i),i.href&&URL.revokeObjectURL(i.href)}):(i=v(t),n=function(t,e){var i=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,i),function(){m(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}t.exports=function(t,s){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(s=s||{}).attrs="object"==typeof s.attrs?s.attrs:{},s.singleton||"boolean"==typeof s.singleton||(s.singleton=r()),s.insertInto||(s.insertInto="head"),s.insertAt||(s.insertAt="bottom");var a=f(t,s);return c(a,s),function(t){for(var e=[],i=0;i<a.length;i++){var n=a[i];(o=l[n.id]).refs--,e.push(o)}for(t&&c(f(t,s),s),i=0;i<e.length;i++){var o;if(0===(o=e[i]).refs){for(var r=0;r<o.parts.length;r++)o.parts[r]();delete l[o.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function _(t,e,i,n){var o=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var o=e.protocol+"//"+e.host,r=o+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,n=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(n)?t:(i=0===n.indexOf("//")?n:0===n.indexOf("/")?o+n:r+n.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,i){"use strict";i.r(e),e.default='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.2 -0.3 9 11.4" width="12" height="14">\n  <path d="M0 2.77V.92A1 1 0 01.2.28C.35.1.56 0 .83 0h7.66c.28.01.48.1.63.28.14.17.21.38.21.64v1.85c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26a1 1 0 01-.21-.66V1.69H5.6v7.58h.5c.25 0 .45.08.6.23.17.16.25.35.25.6s-.08.45-.24.6a.87.87 0 01-.62.22H3.21a.87.87 0 01-.61-.22.78.78 0 01-.24-.6c0-.25.08-.44.24-.6a.85.85 0 01.61-.23h.5V1.7H1.73v1.08c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26A1 1 0 010 2.77z"/>\n</svg>\n'}])},function(t,e,i){window,t.exports=function(i){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=i,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=0)}([function(t,e,i){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}i(1).toString(),i(6);var r=function(){function n(t){var e=t.data,i=(t.config,t.api);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._elements={wrapper:null,items:[]},this._data={items:[]},this.api=i,this.data=e}return o(n,null,[{key:"enableLineBreaks",get:function(){return!0}},{key:"toolbox",get:function(){return{icon:'<svg width="15" height="15" viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 15a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15zm0-2.394a5.106 5.106 0 1 0 0-10.212 5.106 5.106 0 0 0 0 10.212zm-.675-4.665l2.708-2.708 1.392 1.392-2.708 2.708-1.392 1.391-2.971-2.971L5.245 6.36l1.58 1.58z"/></svg>',title:"Checklist"}}}]),o(n,[{key:"render",value:function(){var i=this;if(this._elements.wrapper=this._make("div",[this.CSS.baseBlock,this.CSS.wrapper]),this._data.items.length)this._data.items.forEach(function(t){var e=i.createChecklistItem(t);i._elements.items.push(e),i._elements.wrapper.appendChild(e)});else{var t=this.createChecklistItem();this._elements.items.push(t),this._elements.wrapper.appendChild(t)}return this._elements.wrapper.addEventListener("keydown",function(t){switch(t.keyCode){case 13:i.appendNewElement(t);break;case 8:i.backspace(t)}},!1),this._elements.wrapper.addEventListener("click",function(t){i.toggleCheckbox(t)}),this._elements.wrapper}},{key:"validate",value:function(t){return!!t.items.length}},{key:"toggleCheckbox",value:function(t){var e=t.target.closest(".".concat(this.CSS.item));e.querySelector(".".concat(this.CSS.checkbox)).contains(t.target)&&e.classList.toggle(this.CSS.itemChecked)}},{key:"createChecklistItem",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this._make("div",this.CSS.item),i=this._make("span",this.CSS.checkbox),n=this._make("div",this.CSS.textField,{innerHTML:t.text?t.text:"",contentEditable:!0});return t.checked&&e.classList.add(this.CSS.itemChecked),e.appendChild(i),e.appendChild(n),e}},{key:"appendNewElement",value:function(t){t.preventDefault();var e=window.getSelection().anchorNode,i=this._elements.items[this._elements.items.length-1].querySelector(".".concat(this.CSS.textField)),n=i.innerHTML.replace("<br>"," ").trim();if(e===i&&!n)return this.api.blocks.insertNewBlock(),void t.stopPropagation();var o=this.createChecklistItem(),r=e.parentNode.closest(".".concat(this.CSS.item));this._elements.wrapper.insertBefore(o,r.nextSibling);var s=this._elements.items.indexOf(r)+1;this._elements.items.splice(s,0,o),this.moveCaretToEnd(o.querySelector(".".concat(this.CSS.textField)))}},{key:"backspace",value:function(t){var e=t.target.closest(".".concat(this.CSS.item)),i=this._elements.items.indexOf(e),n=e.querySelector(".".concat(this.CSS.textField)).innerHTML.replace("<br>"," ").trim();this._elements.items[0].querySelector(".".concat(this.CSS.textField)).innerHTML.replace("<br>"," ").trim()&&i&&!n&&(t.preventDefault(),e.remove(),this._elements.items.splice(i,1),"undefined"!==this._elements.items[i-1]&&this.moveCaretToEnd(this._elements.items[i-1].querySelector(".".concat(this.CSS.textField))))}},{key:"save",value:function(){return this.data}},{key:"_make",value:function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=document.createElement(t);for(var r in Array.isArray(i)?(e=o.classList).add.apply(e,function(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(i)):i&&o.classList.add(i),n)o[r]=n[r];return o}},{key:"moveCaretToEnd",value:function(t){var e=document.createRange(),i=window.getSelection();e.selectNodeContents(t),e.collapse(!1),i.removeAllRanges(),i.addRange(e)}},{key:"CSS",get:function(){return{baseBlock:this.api.styles.block,wrapper:"cdx-checklist",item:"cdx-checklist__item",itemChecked:"cdx-checklist__item--checked",checkbox:"cdx-checklist__item-checkbox",textField:"cdx-checklist__item-text"}}},{key:"data",set:function(t){this._data.items=t.items||[];var e=this._elements.wrapper;e&&e.parentNode.replaceChild(this.render(),e)},get:function(){this._data.items=[];for(var t=0;t<this._elements.items.length;t++){var e=this._elements.items[t].querySelector(".".concat(this.CSS.textField)).innerHTML.replace("<br>"," ").trim();e&&this._data.items.push({text:e,checked:this._elements.items[t].classList.contains(this.CSS.itemChecked)})}return this._data}}]),n}();t.exports=r},function(t,e,i){var n=i(2);"string"==typeof n&&(n=[[t.i,n,""]]);i(4)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(3)(!1)).push([t.i,".cdx-checklist__item {\n        display: flex;\n        padding: 0 10px;\n        box-sizing: content-box;\n    }\n\n        .cdx-checklist__item-text {\n            outline: none;\n            flex-grow: 1;\n            padding: 10px 0;\n        }\n\n        .cdx-checklist__item-checkbox {\n            display: inline-block;\n            flex-shrink: 0;\n            position: relative;\n            width: 20px;\n            height: 20px;\n            margin: 10px 10px 10px 0;\n            border-radius: 50%;\n            border: 1px solid #d0d0d0;\n            background: #fff;\n            cursor: pointer;\n            user-select: none;\n        }\n\n        .cdx-checklist__item-checkbox:hover {\n                border-color: #b5b5b5;\n            }\n\n        .cdx-checklist__item-checkbox::after {\n                position: absolute;\n                top: 5px;\n                left: 5px;\n                width: 8px;\n                height: 5px;\n                border: 2px solid #fcfff4;\n                border-top: none;\n                border-right: none;\n                background: transparent;\n                content: '';\n                opacity: 0;\n                transform: rotate(-45deg);\n            }\n\n        .cdx-checklist__item--checked .cdx-checklist__item-checkbox {\n                background: #388ae5;\n                border-color: #388ae5;\n            }\n\n        .cdx-checklist__item--checked .cdx-checklist__item-checkbox:hover {\n                    background: #307cd1;\n                }\n\n        .cdx-checklist__item--checked .cdx-checklist__item-checkbox::after {\n                    opacity: 1;\n                }\n",""])},function(t,e){t.exports=function(i){var s=[];return s.toString=function(){return this.map(function(t){var e=function(t,e){var i,n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var r=(i=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),s=o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"});return[n].concat(s).concat([r]).join("\n")}return[n].join("\n")}(t,i);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},s.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(i[o]=!0)}for(n=0;n<t.length;n++){var r=t[n];"number"==typeof r[0]&&i[r[0]]||(e&&!r[2]?r[2]=e:e&&(r[2]="("+r[2]+") and ("+e+")"),s.push(r))}},s}},function(t,e,i){var n,o,l={},r=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),s=function(){var i={};return function(t){if("function"==typeof t)return t();if(void 0===i[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}i[t]=e}return i[t]}}(),a=null,d=0,h=[],u=i(5);function c(t,e){for(var i=0;i<t.length;i++){var n=t[i],o=l[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(y(n.parts[r],e))}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(y(n.parts[r],e));l[n.id]={id:n.id,refs:1,parts:s}}}}function f(t,e){for(var i=[],n={},o=0;o<t.length;o++){var r=t[o],s=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};n[s]?n[s].parts.push(a):i.push(n[s]={id:s,parts:[a]})}return i}function p(t,e){var i=s(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=h[h.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),h.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(t.insertInto+" "+t.insertAt.before);i.insertBefore(e,o)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);0<=e&&h.splice(e,1)}function v(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),g(e,t.attrs),p(t,e),e}function g(e,i){Object.keys(i).forEach(function(t){e.setAttribute(t,i[t])})}function y(e,t){var i,n,o,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var s=d++;i=a=a||v(t),n=_.bind(null,i,s,!1),o=_.bind(null,i,s,!0)}else o=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(t),n=function(t,e,i){var n=i.css,o=i.sourceMap,r=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||r)&&(n=u(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,i,t),function(){m(i),i.href&&URL.revokeObjectURL(i.href)}):(i=v(t),n=function(t,e){var i=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,i),function(){m(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}t.exports=function(t,s){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(s=s||{}).attrs="object"==typeof s.attrs?s.attrs:{},s.singleton||"boolean"==typeof s.singleton||(s.singleton=r()),s.insertInto||(s.insertInto="head"),s.insertAt||(s.insertAt="bottom");var a=f(t,s);return c(a,s),function(t){for(var e=[],i=0;i<a.length;i++){var n=a[i];(o=l[n.id]).refs--,e.push(o)}for(t&&c(f(t,s),s),i=0;i<e.length;i++){var o;if(0===(o=e[i]).refs){for(var r=0;r<o.parts.length;r++)o.parts[r]();delete l[o.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function _(t,e,i,n){var o=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var o=e.protocol+"//"+e.host,r=o+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,n=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(n)?t:(i=0===n.indexOf("//")?n:0===n.indexOf("/")?o+n:r+n.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(t,e,i){"use strict";Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null})}])},function(t,e,i){window,t.exports=function(i){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=i,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=0)}([function(t,e,i){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}i(1).toString();
/**
 * Delimiter Block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 * @version 2.0.0
 */
var r=function(){function n(t){var e=t.data,i=(t.config,t.api);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.api=i,this._CSS={block:this.api.styles.block,wrapper:"ce-delimiter"},this._data={},this._element=this.drawView(),this.data=e}return o(n,null,[{key:"contentless",get:function(){return!0}}]),o(n,[{key:"drawView",value:function(){var t=document.createElement("DIV");return t.classList.add(this._CSS.wrapper,this._CSS.block),t}},{key:"render",value:function(){return this._element}},{key:"save",value:function(t){return{}}}],[{key:"toolbox",get:function(){return{icon:'<svg width="19" height="4" viewBox="0 0 19 4" xmlns="http://www.w3.org/2000/svg"><path d="M1.25 0H7a1.25 1.25 0 1 1 0 2.5H1.25a1.25 1.25 0 1 1 0-2.5zM11 0h5.75a1.25 1.25 0 0 1 0 2.5H11A1.25 1.25 0 0 1 11 0z"/></svg>',title:"Delimiter"}}}]),n}();t.exports=r},function(t,e,i){var n=i(2);"string"==typeof n&&(n=[[t.i,n,""]]);i(4)(n,{hmr:!0,transform:void 0,insertInto:void 0}),n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(3)(!1)).push([t.i,'.ce-delimiter {\n    line-height: 1.6em;\n    width: 100%;\n    text-align: center;\n}\n\n.ce-delimiter:before {\n    display: inline-block;\n    content: "***";\n    font-size: 30px;\n    line-height: 65px;\n    height: 30px;\n    letter-spacing: 0.2em;\n}',""])},function(t,e){t.exports=function(i){var s=[];return s.toString=function(){return this.map(function(t){var e=function(t,e){var i,n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var r=(i=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),s=o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"});return[n].concat(s).concat([r]).join("\n")}return[n].join("\n")}(t,i);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},s.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(i[o]=!0)}for(n=0;n<t.length;n++){var r=t[n];"number"==typeof r[0]&&i[r[0]]||(e&&!r[2]?r[2]=e:e&&(r[2]="("+r[2]+") and ("+e+")"),s.push(r))}},s}},function(t,e,i){var n,o,l={},r=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=n.apply(this,arguments)),o}),s=function(){var i={};return function(t){if("function"==typeof t)return t();if(void 0===i[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}i[t]=e}return i[t]}}(),a=null,d=0,h=[],u=i(5);function c(t,e){for(var i=0;i<t.length;i++){var n=t[i],o=l[n.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](n.parts[r]);for(;r<n.parts.length;r++)o.parts.push(y(n.parts[r],e))}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(y(n.parts[r],e));l[n.id]={id:n.id,refs:1,parts:s}}}}function f(t,e){for(var i=[],n={},o=0;o<t.length;o++){var r=t[o],s=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};n[s]?n[s].parts.push(a):i.push(n[s]={id:s,parts:[a]})}return i}function p(t,e){var i=s(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=h[h.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),h.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(t.insertInto+" "+t.insertAt.before);i.insertBefore(e,o)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);0<=e&&h.splice(e,1)}function v(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),g(e,t.attrs),p(t,e),e}function g(e,i){Object.keys(i).forEach(function(t){e.setAttribute(t,i[t])})}function y(e,t){var i,n,o,r;if(t.transform&&e.css){if(!(r=t.transform(e.css)))return function(){};e.css=r}if(t.singleton){var s=d++;i=a=a||v(t),n=_.bind(null,i,s,!1),o=_.bind(null,i,s,!0)}else o=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(t),n=function(t,e,i){var n=i.css,o=i.sourceMap,r=void 0===e.convertToAbsoluteUrls&&o;(e.convertToAbsoluteUrls||r)&&(n=u(n)),o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var s=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,i,t),function(){m(i),i.href&&URL.revokeObjectURL(i.href)}):(i=v(t),n=function(t,e){var i=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,i),function(){m(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}t.exports=function(t,s){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(s=s||{}).attrs="object"==typeof s.attrs?s.attrs:{},s.singleton||"boolean"==typeof s.singleton||(s.singleton=r()),s.insertInto||(s.insertInto="head"),s.insertAt||(s.insertAt="bottom");var a=f(t,s);return c(a,s),function(t){for(var e=[],i=0;i<a.length;i++){var n=a[i];(o=l[n.id]).refs--,e.push(o)}for(t&&c(f(t,s),s),i=0;i<e.length;i++){var o;if(0===(o=e[i]).refs){for(var r=0;r<o.parts.length;r++)o.parts[r]();delete l[o.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function _(t,e,i,n){var o=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var r=document.createTextNode(o),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var o=e.protocol+"//"+e.host,r=o+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i,n=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(n)?t:(i=0===n.indexOf("//")?n:0===n.indexOf("/")?o+n:r+n.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}}])},function(t,e,i){"use strict";i.r(e),i.d(e,"init",function(){return s});var n=i(1),l=i.n(n),o=i(2),r=i.n(o),g=i(9);function s(){return a.apply(this,arguments)}function a(){return(a=r()(l.a.mark(function t(){var d,e,r,s,a,h,u,c,f,p,m,i,v,n,o;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d=function(t){return(t+="").length<2?t.length<1?"00":"0"+t:t},(e=document.getElementById("titleSwitch")).onchange=function(){e.checked?(document.querySelectorAll(".stat-title").forEach(function(t){return t.classList.add("d-hide")}),document.querySelectorAll(".x-axis").forEach(function(t){return t.classList.add("d-hide")}),document.querySelectorAll(".y-axis").forEach(function(t){return t.classList.add("d-hide")}),document.querySelectorAll(".linesDot").forEach(function(t){return t.classList.add("d-hide")})):(document.querySelectorAll(".stat-title").forEach(function(t){return t.classList.remove("d-hide")}),document.querySelectorAll(".x-axis").forEach(function(t){return t.classList.remove("d-hide")}),document.querySelectorAll(".y-axis").forEach(function(t){return t.classList.remove("d-hide")}),document.querySelectorAll(".linesDot").forEach(function(t){return t.classList.remove("d-hide")}))},(r=document.getElementById("spacesSwitch")).onchange=function(){return n()},(s=document.getElementById("sevenrSwitch")).onchange=function(){return n()},(a=document.getElementById("numShowSwitch")).onchange=function(){return n()},window.onscroll=function(){70<pageYOffset?(document.getElementById("weeks_calendar").style.position="fixed",document.querySelector("#weeks_calendar > .week-body").classList.add("calendar-fixed")):(document.getElementById("weeks_calendar").style.position="unset",document.querySelector("#weeks_calendar > .week-body").classList.remove("calendar-fixed"))},(h=document.querySelectorAll("#periods > .chip")).forEach(function(t,e,i){return t.onclick=function(){i.forEach(function(t){return t.classList.remove("active")}),t.classList.add("active"),n()}}),u=(new Date).getFullYear(),f=document.querySelectorAll(".my_dataviz"),p=document.getElementById("weeks_calendar"),m={statHeight:100},i=[],f.forEach(function(t){i.push(fetch("/office/stats",{method:"POST",body:JSON.stringify({find:"byid",id:Number(t.dataset.sid),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t[0]}))}),t.next=20,Promise.all(i).then(function(t){return t});case 20:v=t.sent,(n=function o(){var i,l;h.forEach(function(t){t.classList.contains("active")&&(i=t.dataset.name)}),"Y"!==i&&Number(i)<24?2==Number(i)?document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-12")||t.classList.remove("col-2","col-xxl-3")||t.classList.remove("col-6"),t.classList.add("col-4")}):Number(i)<12?document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-12")||t.classList.remove("col-6")||t.classList.remove("col-4"),t.classList.add("col-2","col-xxl-3")}):document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-12")||t.classList.remove("col-2","col-xxl-3")||t.classList.remove("col-4"),t.classList.add("col-6")}):document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-2","col-xxl-3")||t.classList.remove("col-6")||t.classList.remove("col-4"),t.classList.add("col-12")}),m.statHeight=12<=i||"Y"===i?500:250,r.checked?m.spaces=!0:m.spaces=!1,a.checked?m.numShow=!0:m.numShow=!1,m.quota=s.checked?1:0;var n=(new Date).getDay()||7;v.forEach(function(r,t){if(l=n-r.last_day<=0?new Date((new Date).setDate((new Date).getDate()+-(n-r.last_day))):new Date((new Date).setDate((new Date).getDate()+(7-(n-r.last_day)))),p.querySelector(".week-header").innerHTML=u,p.querySelectorAll(".weeks > button").length<=0)for(var s=new Date(u,0,1),a=1,e=function(){var e="".concat(d(s.getDate()),".").concat(d(s.getMonth()+1),".").concat(s.getFullYear()),t=e.split("."),i=new Date(new Date(s).setDate(s.getDate()-6));if(s.getDay()==r.last_day){i="".concat(d(i.getDate()),".").concat(d(i.getMonth()+1),".").concat(i.getFullYear());var n=document.createElement("button");if(n.dataset.date=e,n.dataset.tooltip="с "+i,n.innerText=a,n.classList.add("btn","btn-sm","btn-link","tooltip","tooltip-top"),p.querySelector(".weeks").insertAdjacentElement("beforeend",n),Number(t[2])==(new Date).getFullYear()&&Number(t[1])==Number(d((new Date).getMonth()+1))&&0<=Number(t[0])-Number(d((new Date).getDate()))&&Number(t[0])-Number(d((new Date).getDate()))<7){var o=Array.from(p.querySelectorAll(".weeks > button")).find(function(t){return t.dataset.date==e});o.classList.remove("btn-link"),o.classList.add("btn-error")}a++}s=new Date(s.setDate(s.getDate()+1))};s.getFullYear()==u;)e();p.querySelectorAll(".weeks > button").forEach(function(i,t,n){return i.onclick=function(t){n.forEach(function(t){t.classList.contains("btn-error")&&(t.classList.remove("btn-error"),t.classList.add("btn-link"))}),i.classList.remove("btn-link"),i.classList.add("btn-error");var e=i.dataset.date.split(".");l=new Date(e[2],e[1]-1,e[0],(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds()),c=new Date(new Date(l).setDate(l.getDate()-6)),o()}}),c=c||new Date(new Date(l).setDate(l.getDate()-13)),f[t].parentElement.parentElement.querySelector(".card-header > .card-title").innerText=r.title,new g.a(f[t].id,r.stat_data,r.reverted,r.last_day,u,i,c,m).drawStat()})})(),(o=document.getElementById("calendarSwitch")).onchange=function(){o.checked?document.getElementById("weeks_calendar").classList.remove("d-hide"):document.getElementById("weeks_calendar").classList.add("d-hide")},document.getElementById("year_left").onclick=function(){p.querySelector(".week-body .weeks").innerHTML="",u--,n()},document.getElementById("year_right").onclick=function(){p.querySelector(".week-body .weeks").innerHTML="",u++,n()},window.onresize=n;case 28:case"end":return t.stop()}},t)}))).apply(this,arguments)}},function(t,e,i){"use strict";i.r(e),i.d(e,"init",function(){return s});var n=i(1),l=i.n(n),o=i(2),r=i.n(o),v=i(9);function s(){return a.apply(this,arguments)}function a(){return(a=r()(l.a.mark(function t(){var d,e,r,s,a,h,u,c,f,p,i,m,n,o;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d=function(t){return(t+="").length<2?t.length<1?"00":"0"+t:t},(e=document.getElementById("titleSwitch")).onchange=function(){e.checked?(document.querySelectorAll(".stat-title").forEach(function(t){return t.classList.add("d-hide")}),document.querySelectorAll(".x-axis").forEach(function(t){return t.classList.add("d-hide")}),document.querySelectorAll(".y-axis").forEach(function(t){return t.classList.add("d-hide")}),document.querySelectorAll(".linesDot").forEach(function(t){return t.classList.add("d-hide")})):(document.querySelectorAll(".stat-title").forEach(function(t){return t.classList.remove("d-hide")}),document.querySelectorAll(".x-axis").forEach(function(t){return t.classList.remove("d-hide")}),document.querySelectorAll(".y-axis").forEach(function(t){return t.classList.remove("d-hide")}),document.querySelectorAll(".linesDot").forEach(function(t){return t.classList.remove("d-hide")}))},(r=document.getElementById("spacesSwitch")).onchange=function(){return n()},(s=document.getElementById("numShowSwitch")).onchange=function(){return n()},window.onscroll=function(){70<pageYOffset?(document.getElementById("weeks_calendar").style.position="fixed",document.querySelector("#weeks_calendar > .week-body").classList.add("calendar-fixed")):(document.getElementById("weeks_calendar").style.position="unset",document.querySelector("#weeks_calendar > .week-body").classList.remove("calendar-fixed"))},(a=document.querySelectorAll("#periods > .chip")).forEach(function(t,e,i){return t.onclick=function(){i.forEach(function(t){return t.classList.remove("active")}),t.classList.add("active"),n()}}),h=(new Date).getFullYear(),c=document.querySelectorAll(".my_dataviz"),f=document.getElementById("weeks_calendar"),p={statHeight:100},i=[],c.forEach(function(t){i.push(fetch("/office/stats",{method:"POST",body:JSON.stringify({find:"byid",id:Number(t.dataset.sid),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t[0]}))}),t.next=18,Promise.all(i).then(function(t){return t});case 18:m=t.sent,(n=function o(){var i,l;a.forEach(function(t){t.classList.contains("active")&&(i=t.dataset.name)}),"Y"!==i&&Number(i)<24?2==Number(i)?document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-12")||t.classList.remove("col-2","col-xxl-3")||t.classList.remove("col-6"),t.classList.add("col-4")}):Number(i)<12?document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-12")||t.classList.remove("col-6")||t.classList.remove("col-4"),t.classList.add("col-2","col-xxl-3")}):document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-12")||t.classList.remove("col-2","col-xxl-3")||t.classList.remove("col-4"),t.classList.add("col-6")}):document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-2","col-xxl-3")||t.classList.remove("col-6")||t.classList.remove("col-4"),t.classList.add("col-12")}),p.statHeight=12<=i||"Y"===i?500:250,r.checked?p.spaces=!0:p.spaces=!1,s.checked?p.numShow=!0:p.numShow=!1;var n=(new Date).getDay()||7;m.forEach(function(r,t){if(l=n-r.last_day<=0?new Date((new Date).setDate((new Date).getDate()+-(n-r.last_day))):new Date((new Date).setDate((new Date).getDate()+(7-(n-r.last_day)))),f.querySelector(".week-header").innerHTML=h,f.querySelectorAll(".weeks > button").length<=0)for(var s=new Date(h,0,1),a=1,e=function(){var e="".concat(d(s.getDate()),".").concat(d(s.getMonth()+1),".").concat(s.getFullYear()),t=e.split("."),i=new Date(new Date(s).setDate(s.getDate()-6));if(s.getDay()==r.last_day){i="".concat(d(i.getDate()),".").concat(d(i.getMonth()+1),".").concat(i.getFullYear());var n=document.createElement("button");if(n.dataset.date=e,n.dataset.tooltip="с "+i,n.innerText=a,n.classList.add("btn","btn-sm","btn-link","tooltip","tooltip-top"),f.querySelector(".weeks").insertAdjacentElement("beforeend",n),Number(t[2])==(new Date).getFullYear()&&Number(t[1])==Number(d((new Date).getMonth()+1))&&0<=Number(t[0])-Number(d((new Date).getDate()))&&Number(t[0])-Number(d((new Date).getDate()))<7){var o=Array.from(f.querySelectorAll(".weeks > button")).find(function(t){return t.dataset.date==e});o.classList.remove("btn-link"),o.classList.add("btn-error")}a++}s=new Date(s.setDate(s.getDate()+1))};s.getFullYear()==h;)e();f.querySelectorAll(".weeks > button").forEach(function(i,t,n){return i.onclick=function(t){n.forEach(function(t){t.classList.contains("btn-error")&&(t.classList.remove("btn-error"),t.classList.add("btn-link"))}),i.classList.remove("btn-link"),i.classList.add("btn-error");var e=i.dataset.date.split(".");l=new Date(e[2],e[1]-1,e[0],(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds()),u=new Date(new Date(l).setDate(l.getDate()-6)),o()}}),u=u||new Date(new Date(l).setDate(l.getDate()-13)),c[t].parentElement.parentElement.querySelector(".card-header > .card-title").innerText=r.title,new v.a(c[t].id,r.stat_data,r.reverted,r.last_day,h,i,u,p).drawStat()})})(),(o=document.getElementById("calendarSwitch")).onchange=function(){o.checked?document.getElementById("weeks_calendar").classList.remove("d-hide"):document.getElementById("weeks_calendar").classList.add("d-hide")},document.getElementById("year_left").onclick=function(){f.querySelector(".week-body .weeks").innerHTML="",h--,n()},document.getElementById("year_right").onclick=function(){f.querySelector(".week-body .weeks").innerHTML="",h++,n()},window.onresize=n;case 26:case"end":return t.stop()}},t)}))).apply(this,arguments)}},,,,,function(t,e,n){"use strict";n.r(e);n(39);var i=n(1),k=n.n(i),o=n(2),S=n.n(o),r=n(7),s=n.n(r),a=n(8),l=n.n(a),E=n(9),d=function(){function t(){s()(this,t)}return l()(t,null,[{key:"editStat",value:function(){function h(t){return(t+="").length<2?t.length<1?"00":"0"+t:t}var u=new dhx.Calendar("stats_calendar",{dateFormat:"%d.%m.%Y",value:new Date,weekStart:"monday"}),r=document.getElementById("posts"),t=function(){var t=S()(k.a.mark(function t(){var e,i,n,o;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.querySelector("option")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("/office/posts",{method:"POST",body:JSON.stringify({find:"byid",id:Number(r.value),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t});case 4:if((e=t.sent)[0].stat_id){t.next=7;break}return t.abrupt("return");case 7:return i=e[0].stat_id.split(","),n=[],(o=document.querySelector("#select_stats select")).innerHTML="",o.classList.add("form-select","p-centered"),i.forEach(function(t){var e=fetch("/office/stats",{method:"POST",body:JSON.stringify({find:"byid",id:t,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t});n.push(e)}),t.next=15,Promise.all(n).then(function(t){return t.map(function(t){return t[0]})}).then(function(t){return t.forEach(function(t){if(t){var e=document.createElement("option");e.setAttribute("value",t.id),e.innerText=t.title,o.insertAdjacentElement("beforeend",e)}})});case 15:w();case 16:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();r.onchange=function(){localStorage.setItem("postId",r.value),t()},localStorage.getItem("postId")&&(r.value=localStorage.getItem("postId")),t();document.querySelectorAll(".my_dataviz");var c=document.getElementById("stats"),f=document.querySelectorAll("#periods > .chip");f.forEach(function(t,e,i){return t.onclick=function(){i.forEach(function(t){return t.classList.remove("active")}),t.classList.add("active"),w()}});var p=document.getElementById("stats_value"),m=document.getElementById("stats_quota"),v=document.getElementById("period_quota_input"),g=document.getElementById("days_quota"),y=document.getElementById("quota_btn"),b={statHeight:350,quota:0},w=function(){var e=S()(k.a.mark(function t(e){var a,i,l,r,n,o,s,d;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/office/stats",{method:"POST",body:JSON.stringify({find:"byid",id:Number(c.value),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t[0]});case 2:if(a=t.sent){t.next=5;break}return t.abrupt("return");case 5:null==a.stat_data&&(a.stat_data=[]),u.config.mark=function(e){return a.stat_data.find(function(t){return t.date=="".concat(h(e.getDate()),".").concat(h(e.getMonth()+1),".").concat(e.getFullYear())&&t.date!=r&&null!=t.value})?3==e.getDay()?"a b":"a":3==e.getDay()?"b":""},f.forEach(function(t){t.classList.contains("active")&&(i=t.dataset.name)}),"Y"!==i&&Number(i)<24?2==Number(i)?document.querySelectorAll("#stat").forEach(function(t){t.classList.remove("col-10")||t.classList.remove("col-4","col-xxl-3")||t.classList.remove("col-8"),t.classList.add("col-6")}):Number(i)<12?document.querySelectorAll("#stat").forEach(function(t){t.classList.remove("col-10")||t.classList.remove("col-8")||t.classList.remove("col-6"),t.classList.add("col-4","col-xxl-3")}):document.querySelectorAll("#stat").forEach(function(t){t.classList.remove("col-10")||t.classList.remove("col-4","col-xxl-3")||t.classList.remove("col-6"),t.classList.add("col-8")}):document.querySelectorAll("#stat").forEach(function(t){t.classList.remove("col-4","col-xxl-3")||t.classList.remove("col-8")||t.classList.remove("col-6"),t.classList.add("col-10")}),b.statHeight=12<=i||"Y"===i?500:400,b.quota=_.checked?1:0,0==a.reverted?x.checked=!1:x.checked=!0,l=document.getElementById("stats_rem"),p.value=null,l.value="",m.value=null,r=u.getValue(),e,n=u.getValue(!0).getDay()||7,[],o=n-a.last_day<=0?new Date(new Date(u.getValue(!0)).setDate(u.getValue(!0).getDate()+-(n-a.last_day))):new Date(new Date(u.getValue(!0)).setDate(u.getValue(!0).getDate()+(7-(n-a.last_day)))),s=new Date(new Date(o).setDate(o.getDate()-6)),new E.a("editStat",a.stat_data,a.reverted,a.last_day,(new Date).getFullYear(),i,s,b).drawStat(),(d=a.stat_data.find(function(t){return t.date==r}))&&(p.value=d.value),d&&(l.value=d.rem||""),d&&(m.value=d.quota||""),u.paint(),u.events.on("Change",function(){r=u.getValue()}),p.onkeydown=function(t){"Enter"==t.code&&(t.preventDefault(),p.blur())},m.onkeydown=function(t){"Enter"==t.code&&(t.preventDefault(),m.blur())},p.onblur=function(){var e=S()(k.a.mark(function t(e){var i,n,o;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p.value||(p.value=null),i={date:r,value:""===p.value||null===p.value?null:+p.value,rem:l.value.trim(),quota:""===m.value||null===m.value?null:+m.value},(n=a.stat_data.find(function(t){return t.date==r}))?(o=a.stat_data.indexOf(n),a.stat_data[o]=i):a.stat_data.push(i),t.next=6,fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:Number(c.value),stat_data:a.stat_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()});case 6:w();case 7:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),l.onblur=function(){var e=S()(k.a.mark(function t(e){var i,n,o;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p.value||(p.value=null),i={date:r,value:""===p.value||null===p.value?null:+p.value,rem:l.value.trim(),quota:""===m.value||null===m.value?null:+m.value},(n=a.stat_data.find(function(t){return t.date==r}))?(o=a.stat_data.indexOf(n),a.stat_data[o]=i):a.stat_data.push(i),t.next=6,fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:Number(c.value),stat_data:a.stat_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()});case 6:w();case 7:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),m.onblur=function(){var e=S()(k.a.mark(function t(e){var i,n,o;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p.value||(p.value=null),i={date:r,value:""===p.value||null===p.value?null:+p.value,rem:l.value.trim(),quota:""===m.value||null===m.value?null:+m.value},(n=a.stat_data.find(function(t){return t.date==r}))?(o=a.stat_data.indexOf(n),a.stat_data[o]=i):a.stat_data.push(i),t.next=6,fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:Number(c.value),stat_data:a.stat_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()});case 6:w();case 7:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),y.onclick=function(){Number(v.value)&&Number(g.value)&&function(){for(var t=Number(v.value)/Number(g.value),e=[],i=u.getValue(!0),n=0;n<=Number(g.value);n++){var o=void 0;o=0==n?(p.value||(p.value=null),{date:"".concat(h(i.getDate()),".").concat(h(i.getMonth()+1),".").concat(i.getFullYear()),value:""===p.value||null===p.value?null:+p.value,rem:l.value.trim(),quota:t}):{date:"".concat(h(i.getDate()),".").concat(h(i.getMonth()+1),".").concat(i.getFullYear()),value:null,rem:"",quota:t};var r=a.stat_data.find(function(t){return t.date=="".concat(h(i.getDate()),".").concat(h(i.getMonth()+1),".").concat(i.getFullYear())});if(r){var s=a.stat_data.indexOf(r);0==n?a.stat_data[s]=o:a.stat_data[s].quota=t}else a.stat_data.push(o);e.push(fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:Number(c.value),stat_data:a.stat_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})),i=new Date(i.setDate(i.getDate()+1))}Promise.all(e).then(w())}()};case 35:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),e=document.getElementById("quotaSwitch"),i=document.getElementById("period_quota");e.onchange=function(){e.checked?i.classList.remove("d-hide"):i.classList.add("d-hide")};var _=document.getElementById("sevenrSwitch");_.onchange=function(){_.checked?(_.disabled=!1,x.disabled=!0):x.disabled=!1,w()};var x=document.getElementById("revertedSwitch");x.onchange=S()(k.a.mark(function t(){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return x.checked?(x.disabled=!1,_.disabled=!0):_.disabled=!1,t.next=3,fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:Number(c.value),reverted:x.checked?1:0,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()});case 3:w();case 4:case"end":return t.stop()}},t)})),u.events.on("Change",function(){w(),p.focus()}),c.onchange=function(){w()},n(3).reset(),window.onresize=w}}]),t}();document.querySelectorAll(".go-back").forEach(function(t){return t.onclick=function(){return window.history.back()}}),document.querySelectorAll("header a").forEach(function(t,e,i){t.getAttribute("href")==window.location.pathname&&(0==e?t.setAttribute("style","color:red !important"):(t.classList.remove("btn-link"),t.classList.add("btn-error")))});var h=location.pathname.toLocaleLowerCase(),u=document.getElementById("access").value;document.querySelectorAll(".modal-close").forEach(function(t){t.addEventListener("click",function(t){return document.querySelectorAll(".modal").forEach(function(t){return t.classList.remove("active")})})});try{document.getElementById("closeLowAccessWarn").onclick=function(t){f(t.target.parentElement)};var c=setInterval(function(){document.querySelector(".low-access").classList.remove("slideInRight"),document.querySelector(".low-access").classList.add("flash")},3e3);setTimeout(function(){document.querySelectorAll(".low-access").forEach(function(t){f(t)})},6e3);var f=function(t){clearInterval(c),t.classList.remove("slideInRight"),t.classList.add("fadeOutRight"),setTimeout(function(){t.remove()},1e3)}}catch(t){console.info("Full access on this page")}try{dhx.i18n.setLocale("calendar",{monthShort:["Янв","Фев","Мар","Апр","Май","Июнь","Июль","Авг","Сен","Окт","Ноя","Дек"],month:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekdaysShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"]})}catch(t){console.warn("no dxh installed")}"/office/pipes"!==h&&"/office/pipes/"!==h||n(41).pipesRouteScript(),"/office/lids"!==h&&"/office/lids/"!==h||n(42).init(),"pipes"!==h.split("/")[2]||isNaN(+h.split("/")[3])||0==+h.split("/")[3]||(n(3),n(43).pipeEditing(),n(44).stepsScript(),n(45).visScript(),(new(n(15).KanbanScript)).init(),"full"!=u&&setInterval(function(){document.querySelectorAll(".lid-menu input, .lid-menu button, .lid-menu textarea").forEach(function(t){return t.disabled=!0})},1e3));if("/office/chanels"===h||"/office/chanels/"===h){"full"==u&&document.getElementById("openChanelAddingBtn").addEventListener("click",function(t){document.getElementById("chanelAdding").classList.add("active")}),"full"==u&&document.getElementById("newChanelTitle").addEventListener("input",function(t){3<(t.target.value.trim()+"").length?(t.target.classList.remove("is-error"),document.getElementById("createNewChanel").disabled=!1):(t.target.classList.add("is-error"),document.getElementById("createNewChanel").disabled=!0)}),"full"==u&&document.getElementById("createNewChanel").addEventListener("click",function(t){fetch("/office/chanels/update",{method:"POST",body:JSON.stringify({title:document.getElementById("newChanelTitle").value,step:document.getElementById("stepsSelect").value,abbr:document.getElementById("newAbbrChanel").value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){p()})});var p=function d(){Promise.all([fetch("office/chanels/getData",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/steps/getAll",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(a){var l=document.getElementById("tableBody");l.parentElement.classList.remove("d-hide"),l.innerHTML="",document.getElementById("openChanelAddingBtn").classList.remove("d-hide"),l.parentElement.parentElement.querySelector(".loading")&&l.parentElement.parentElement.querySelector(".loading").remove(),a[0].forEach(function(e){var i=e.step;a[1].forEach(function(t){t.id===e.step&&(i=t.title)});var t=document.createElement("tr"),n=document.createElement("td");n.innerText=e.title,t.insertAdjacentElement("beforeend",n);var o=document.createElement("td");e.step?o.innerText=i:(o.innerText="Шага нет",o.classList.add("text-gray")),t.insertAdjacentElement("beforeend",o);var r=document.createElement("td");e.abbr?r.innerText=e.abbr:(r.innerText="Аббревиатуры нет",r.classList.add("text-gray")),t.insertAdjacentElement("beforeend",r);var s=document.createElement("button");s.classList.add("btn"),s.classList.add("btn-sm"),s.classList.add("btn-link"),s.classList.add("d-hide"),s.classList.add("p-absolute"),s.innerHTML='<img src="images/edit.svg" alt="">',n.insertAdjacentElement("beforeend",s),document.getElementById("chaneEditinglTitleInput").addEventListener("input",function(t){return 3<(t.target.value+"").length?document.getElementById("editChanelBtn").disabled=!1:document.getElementById("editChanelBtn").disabled=!0}),"full"==u&&s.addEventListener("click",function(t){document.getElementById("chanelEditing").classList.add("active"),document.getElementById("chanelEditingTitle").innerText=document.getElementById("chaneEditinglTitleInput").value=e.title,document.getElementById("editAbbrChanel").value=e.abbr?e.abbr:"",document.getElementById("stepsSelectEdit").value=e.step?e.step:0,document.getElementById("editChanelBtn").onclick=function(t){fetch("/office/chanels/update",{method:"POST",body:JSON.stringify({id:e.id,title:document.getElementById("chaneEditinglTitleInput").value,step:document.getElementById("stepsSelectEdit").value,abbr:document.getElementById("editAbbrChanel").value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){d()})},"full"==u&&(document.getElementById("deleteChanel").onclick=function(t){confirm("Вы точно хотите удалить канал?")&&fetch("/office/chanels/delete",{method:"DELETE",body:JSON.stringify({id:e.id,active:0,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){d(),document.getElementById("chanelEditing").classList.remove("active")})})}),t.addEventListener("mouseenter",function(t){return s.classList.remove("d-hide")}),t.addEventListener("mouseleave",function(t){return s.classList.add("d-hide")}),l.insertAdjacentElement("beforeend",t)});var i=document.getElementById("stepsSelect"),n=document.getElementById("stepsSelectEdit");i.innerHTML=n.innerHTML='<option value="0">Без шага</option>',a[1].forEach(function(t){var e=document.createElement("option");t.title?e.innerText=t.title:e.innerText="У шага нет названия; id: "+t.id,e.value=t.id,i.insertAdjacentElement("beforeend",e),n.insertAdjacentHTML("beforeend",e.outerHTML)})})};p()}if("/office/cabinet"===h||"/office/cabinet/"===h){document.getElementById("mail").oninput=function(t){!function(t){return/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/.test(t)}(t.target.value)||t.target.value==t.target.dataset.old?document.getElementById("saveInfo").disabled=!0:document.getElementById("saveInfo").disabled=!1},document.getElementById("fio").oninput=function(t){t.target.value!=t.target.dataset.old?document.getElementById("saveInfo").disabled=!1:document.getElementById("saveInfo").disabled=!0},document.getElementById("saveInfo").onclick=function(t){fetch("/office/users/update",{method:"POST",body:JSON.stringify({id:document.getElementById("userId").value,login:document.getElementById("mail").value,fio:document.getElementById("fio").value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(){document.getElementById("fio").dataset.old=document.getElementById("fio").value,document.getElementById("mail").dataset.old=document.getElementById("mail").value,t.target.disabled=!0})};var m=document.getElementById("oldPass"),v=document.getElementById("newPass"),g=document.getElementById("newPassRepeat"),y=document.getElementById("change"),b=function(t){0<m.value.length&&5<v.value.length&&5<g.value.length&&v.value==g.value?y.disabled=!1:y.disabled=!0,t.target.parentElement.querySelectorAll("input:not(#oldPass)").forEach(function(t){t.value.length<6?t.classList.add("is-error"):t.classList.remove("is-error")}),0<m.value.length?m.classList.remove("is-error"):m.classList.add("is-error"),g.value!=v.value||g.value.length<=0?g.classList.add("is-error"):g.classList.remove("is-error")};m.oninput=b,v.oninput=b,g.oninput=b,y.onclick=function(t){t.target.disabled=!0,m.disabled=!0,v.disabled=!0,g.disabled=!0,fetch("/office/users/update",{method:"POST",body:JSON.stringify({id:document.getElementById("userId").value,password:m.value,newPassword:v.value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){m.value=v.value=g.value="",m.disabled=!1,v.disabled=!1,g.disabled=!1})};var w=document.getElementById("person"),_=document.getElementById("personSwitch");_.onchange=function(){_.checked?w.classList.remove("d-hide"):w.classList.add("d-hide")},d.editStat()}if("/office/privilages"===h||"/office/privilages/"===h){var x=document.getElementById("privilagesModal");document.getElementById("privilagesOpenModal").onclick=function(){return x.classList.add("active")};var T=document.getElementById("privilagesOption"),D=document.getElementById("privilageTitle"),C=document.getElementById("parentPrivilage"),M=function(t){5<t.target.value.trim().length?t.target.classList.remove("is-error"):t.target.classList.add("is-error")};D.oninput=M,D.onfocus=M,D.onblur=function(t){t.target.classList.remove("is-error")};var O=document.getElementById("mainPageAccess"),L=document.getElementById("lidsAccess"),I=document.getElementById("pipesAccess"),A=document.getElementById("chanelsAccess"),P=document.getElementById("privilagesAccess"),N=document.getElementById("tasksAccess"),j=document.getElementById("usersAccess"),B=document.getElementById("postsAccess"),R=document.getElementById("statsAccess"),F=function(){function t(t){var e;return t.querySelectorAll("input").forEach(function(t){t.checked&&(e=t.dataset.access)}),e}return{main:t(O),lids:t(L),pipes:t(I),chanels:t(A),privilage:t(P),tasks:t(N),users:t(j),posts:t(B),stats:t(R)}},z=function(t){function e(t,e){t.querySelector('input[data-access="'+e+'"]').checked=!0}for(var i in t)switch(i){case"main":e(O,t[i]);break;case"lids":e(L,t[i]);break;case"pipes":e(I,t[i]);break;case"chanels":e(A,t[i]);break;case"privilage":e(P,t[i]);break;case"tasks":e(N,t[i]);break;case"users":e(j,t[i]);break;case"posts":e(B,t[i]);break;case"stats":e(R,t[i])}},H=function(t){x.querySelectorAll('input[data-access="full"]').forEach(function(t){return t.disabled=!0});function e(t,e){t.querySelector('input[data-access="full"]').disabled="full"!=e,t.querySelector('input[data-access="watch"]').disabled="full"!=e&&"watch"!=e}for(var i in t)switch(i){case"main":e(O,t[i]);break;case"lids":e(L,t[i]);break;case"pipes":e(I,t[i]);break;case"chanels":e(A,t[i]);break;case"privilage":e(P,t[i]);break;case"tasks":e(N,t[i]);break;case"users":e(j,t[i]);break;case"posts":e(B,t[i]);break;case"stats":e(R,t[i])}},q=document.getElementById("savePrivilage"),Y=document.getElementById("deletePrivilage"),U=function r(s){x.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!0}),x.querySelectorAll('input[data-access="full"]').forEach(function(t){return t.checked=!0}),C.querySelectorAll("option").forEach(function(t){return t.classList.remove("d-hide")}),q.onclick=null,C.value="0",fetch("/office/privilages/",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(i){if(x.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!1}),"new"!=s){var e=i.find(function(t){return t.id==s}),n=e.parent?i.find(function(t){return t.id==e.parent}):null,o=[];i.forEach(function(t){t.parent==s&&(o.push(t),C.querySelector('option[value="'+t.id+'"]').classList.add("d-hide"))}),D.value=e.title,z(e.privilage_data),n&&(C.value=n.id,H(n.privilage_data)),C.querySelector('option[value="'+s+'"]').classList.add("d-hide"),Y.classList.remove("d-hide"),q.onclick=function(t){2<D.value.trim().length?(x.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!0}),"full"==u&&fetch("/office/privilages/update",{method:"POST",body:JSON.stringify({id:s,title:D.value,parent:C.value,privilage_data:F(),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(){x.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!1}),n&&H(n)})):(D.scrollIntoView({behavior:"smooth",block:"end"}),D.classList.add("is-error"))},Y.onclick=function(t){confirm("Вы точно хотите удалить?")&&(x.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!0}),"full"==u&&fetch("/office/privilages/update",{method:"POST",body:JSON.stringify({id:s,cmd:"delete",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(){x.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!1}),r("new"),T.value="new",T.querySelector('option[value="'+s+'"]').remove(),C.querySelector('option[value="'+s+'"]').remove()}))}}else C.oninput=function(t){if("0"!=t.target.value){var e=i[t.target.value-1];z(e.privilage_data),H(e.privilage_data)}else x.querySelectorAll('.access input[type="radio"]').forEach(function(t){return t.disabled=!1}),x.querySelectorAll('input[data-access="full"]').forEach(function(t){return t.checked=!0})},q.onclick=function(t){5<D.value.trim().length?(x.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!0}),"full"==u&&fetch("/office/privilages/update",{method:"POST",body:JSON.stringify({title:D.value,parent:C.value,privilage_data:F(),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){x.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!1}),T.insertAdjacentHTML("afterbegin",'\n                                <option value="'.concat(t.insertId,'">').concat(D.value,"</option>\n                            ")),T.value=t.insertId,C.insertAdjacentHTML("afterbegin",'\n                                <option value="'.concat(t.insertId,'">').concat(D.value,"</option>\n                            ")),r(t.insertId)})):(D.scrollIntoView({behavior:"smooth",block:"end"}),D.classList.add("is-error"))},D.value="",Y.classList.add("d-hide")})};T.oninput=function(t){return U(t.target.value)},U("new");var W=document.querySelectorAll("#users tbody tr");W.forEach(function(t){t.onclick=function(a){a.target.classList.contains("t-edit")||(document.querySelectorAll(".t-edit").forEach(function(t){return t.remove()}),t.insertAdjacentHTML("afterend",'\n        <tr class="t-edit">\n            <td colspan="4">\n                <div class="btn btn-clear float-right close-editUser"></div>\n                <div class="d-flex">\n                    <div class="col-4">\n                        <label>login</label>\n                        <input class="form-input mb-2 newLogin" placeholder="pochta@email.ru" disabled>\n                        <label>ФИО</label>\n                        <input class="form-input mb-2 newFio" placeholder="Иванов Иван Иванович" disabled>\n                        <label>Профиль</label>\n                        <select class="form-select mb-2 newProfile" disabled>\n                            <option value="0">Без профиля</option>\n                        </select>\n                        <button class="btn btn-sm btn-primary mla d-block mt-2 save" disabled>Сохранить</button>\n                    </div>      \n                </div>\n            </td>\n        </tr>\n    '),document.querySelectorAll(".close-editUser").forEach(function(t){t.onclick=function(t){return document.querySelectorAll(".t-edit").forEach(function(t){return t.remove()})}}),"full"==u&&fetch("/office/privilages/",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){var e=document.querySelector(".t-edit"),i=a.path[1],n=JSON.parse(i.dataset.data),o=e.querySelector(".newLogin"),r=e.querySelector(".newFio"),s=e.querySelector(".newProfile");o.value=n.login,r.value=n.fio,t.forEach(function(t){return s.insertAdjacentHTML("beforeend",'<option value="'.concat(t.id,'">').concat(t.title,"</option>"))}),s.value=n.role,e.querySelector(".save").onclick=function(e){fetch("/office/users/update",{method:"POST",body:JSON.stringify({id:n.id,login:o.value,fio:r.value,role:s.value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){n.login=o.value,n.fio=r.value,n.role=s.value,i.querySelector(".login").innerText=o.value,i.querySelector(".fio").innerText=r.value,i.querySelector(".priv").innerText="0"!=s.value?s.querySelector('option[value="'+s.value+'"]').innerText:"",e.path[1].dataset.data=JSON.stringify(n),document.querySelectorAll(".t-edit").forEach(function(t){return t.remove()})})},e.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!1})}));V()}}),"full"!=u&&setInterval(function(){V()},300);var V=function(){document.querySelectorAll(".access input, #savePrivilage, #deletePrivilage, .save, .newLogin, .newFio, .newProfile").forEach(function(t){t.disabled=!0})}}"/office/tasks"!==h&&"/office/tasks/"!==h||n(49).init(),"/office/contacts"!==h&&"/office/contacts/"!==h||n(50).init(),"/office/users"!==h&&"/office/users/"!==h||n(51).init(),"/office/posts"!==h&&"/office/posts/"!==h||n(52).init(),"/office/stats"!==h&&"/office/stats/"!==h||n(53).init(),"/office"!==h&&"/office/"!==h||n(60).init(),"/office/cic"!==h&&"/office/cic/"!==h||n(61).init()}]);