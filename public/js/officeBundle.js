!function(n){var i={};function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=n,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=70)}([function(t,e,n){t.exports=n(39)},function(t,e){function l(t,e,n,i,r,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,r)}t.exports=function(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var i=s.apply(t,a);function r(t){l(i,e,n,r,o,"next",t)}function o(t){l(i,e,n,r,o,"throw",t)}r(void 0)})}}},,function(t,e,n){var i,r,o;r=[e],void 0===(o="function"==typeof(i=function(t){var s=window,l=document,c="mousemove",u="mouseup",d="mousedown",e="EventListener",h="add"+e,i="remove"+e,f,p,r=[],n=function t(e,n){for(e=0;e<r.length;){n=r[e++];n=n.container||n;n[i](d,n.md,0);s[i](u,n.mu,0);s[i](c,n.mm,0)}r=[].slice.call(l.getElementsByClassName("dragscroll"));for(e=0;e<r.length;){(function(e,n,i,r,o,a){(a=e.container||e)[h](d,a.md=function(t){if(!e.hasAttribute("nochilddrag")||l.elementFromPoint(t.pageX,t.pageY)==a){r=1;n=t.clientX;i=t.clientY;t.preventDefault()}},0);s[h](u,a.mu=function(){r=0},0);s[h](c,a.mm=function(t){if(r){(o=e.scroller||e).scrollLeft-=f=-n+(n=t.clientX);o.scrollTop-=p=-i+(i=t.clientY);if(e==l.body){(o=l.documentElement).scrollLeft-=f;o.scrollTop-=p}}},0)})(r[e++])}};if(l.readyState=="complete"){n()}else{s[h]("load",n,0)}t.reset=n})?i.apply(e,r):i)||(t.exports=o)},function(t,e,n){"use strict";
/**!
 * Sortable 1.10.1
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function A(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},e=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),e.forEach(function(t){var e,n,i;e=r,i=o[n=t],n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i})}return r}function s(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],0<=e.indexOf(n)||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],0<=e.indexOf(n)||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function r(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var w=r(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),_=r(/Edge/i),c=r(/firefox/i),l=r(/safari/i)&&!r(/chrome/i)&&!r(/android/i),o=r(/iP(ad|od|hone)/i),u=r(/chrome/i)&&r(/android/i),d={capture:!1,passive:!1};function h(t,e,n){t.addEventListener(e,n,!w&&d)}function f(t,e,n){t.removeEventListener(e,n,!w&&d)}function p(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function I(t,e,n,i){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&p(t,e):p(t,e))||i&&t===n)return t;if(t===n)break}while(t=(r=t).host&&r!==document&&r.host.nodeType?r.host:r.parentNode)}var r;return null}var v,m=/\s+/g;function P(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(m," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(m," ")}}function j(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||-1!==e.indexOf("webkit")||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function g(t,e){var n="";if("string"==typeof t)n=t;else do{var i=j(t,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix;return r&&new r(n)}function y(t,e,n){if(t){var i=t.getElementsByTagName(e),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function L(){return w?document.documentElement:document.scrollingElement}function N(t,e,n,i,r){if(t.getBoundingClientRect||t===window){var o,a,s,l,c,u,d;if(d=t!==window&&t!==L()?(a=(o=t.getBoundingClientRect()).top,s=o.left,l=o.bottom,c=o.right,u=o.height,o.width):(s=a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!w))do{if(r&&r.getBoundingClientRect&&("none"!==j(r,"transform")||n&&"static"!==j(r,"position"))){var h=r.getBoundingClientRect();a-=h.top+parseInt(j(r,"border-top-width")),s-=h.left+parseInt(j(r,"border-left-width")),l=a+o.height,c=s+o.width;break}}while(r=r.parentNode);if(i&&t!==window){var f=g(r||t),p=f&&f.a,v=f&&f.d;f&&(l=(a/=v)+(u/=v),c=(s/=p)+(d/=p))}return{top:a,left:s,bottom:l,right:c,width:d,height:u}}}function B(t,e,n){for(var i=H(t,!0),r=N(t)[e];i;){var o=N(i)[n];if(!("top"===n||"left"===n?o<=r:r<=o))return i;if(i===L())break;i=H(i,!1)}return!1}function b(t,e,n){for(var i=0,r=0,o=t.children;r<o.length;){if("none"!==o[r].style.display&&o[r]!==jt.ghost&&o[r]!==jt.dragged&&I(o[r],n.draggable,t,!1)){if(i===e)return o[r];i++}r++}return null}function F(t,e){for(var n=t.lastElementChild;n&&(n===jt.ghost||"none"===j(n,"display")||e&&!p(n,e));)n=n.previousElementSibling;return n||null}function R(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===jt.clone||e&&!p(t,e)||n++;return n}function k(t){var e=0,n=0,i=L();if(t)do{var r=g(t),o=r.a,a=r.d;e+=t.scrollLeft*o,n+=t.scrollTop*a}while(t!==i&&(t=t.parentNode));return[e,n]}function H(t,e){if(!t||!t.getBoundingClientRect)return L();var n=t,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=j(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return L();if(i||e)return n;i=!0}}}while(n=n.parentNode);return L()}function x(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function S(e,n){return function(){if(!v){var t=arguments;1===t.length?e.call(this,t[0]):e.apply(this,t),v=setTimeout(function(){v=void 0},n)}}}function z(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function E(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var Y="Sortable"+(new Date).getTime();function T(){var e,i=[];return{captureAnimationState:function(){i=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){if("none"!==j(t,"display")&&t!==jt.ghost){i.push({target:t,rect:N(t)});var e=A({},i[i.length-1].rect);if(t.thisAnimationDuration){var n=g(t,!0);n&&(e.top-=n.f,e.left-=n.e)}t.fromRect=e}})},addAnimationState:function(t){i.push(t)},removeAnimationState:function(t){i.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var i in e)if(e.hasOwnProperty(i)&&e[i]===t[n][i])return Number(n);return-1}(i,{target:t}),1)},animateAll:function(t){var c=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof t&&t());var u=!1,d=0;i.forEach(function(t){var e=0,n=t.target,i=n.fromRect,r=N(n),o=n.prevFromRect,a=n.prevToRect,s=t.rect,l=g(n,!0);l&&(r.top-=l.f,r.left-=l.e),n.toRect=r,n.thisAnimationDuration&&x(o,r)&&!x(i,r)&&(s.top-r.top)/(s.left-r.left)==(i.top-r.top)/(i.left-r.left)&&(e=function(t,e,n,i){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*i.animation}(s,o,a,c.options)),x(r,i)||(n.prevFromRect=i,n.prevToRect=r,e=e||c.options.animation,c.animate(n,s,r,e)),e&&(u=!0,d=Math.max(d,e),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout(function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null},e),n.thisAnimationDuration=e)}),clearTimeout(e),u?e=setTimeout(function(){"function"==typeof t&&t()},d):"function"==typeof t&&t(),i=[]},animate:function(t,e,n,i){if(i){j(t,"transition",""),j(t,"transform","");var r=g(this.el),o=r&&r.a,a=r&&r.d,s=(e.left-n.left)/(o||1),l=(e.top-n.top)/(a||1);t.animatingX=!!s,t.animatingY=!!l,j(t,"transform","translate3d("+s+"px,"+l+"px,0)"),function(t){t.offsetWidth}(t),j(t,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),j(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout(function(){j(t,"transition",""),j(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1},i)}}}}var O=[],M={initializeByDefault:!0},D={mount:function(t){for(var e in M)!M.hasOwnProperty(e)||e in t||(t[e]=M[e]);O.push(t)},pluginEvent:function(e,n,i){var t=this;this.eventCanceled=!1,i.cancel=function(){t.eventCanceled=!0};var r=e+"Global";O.forEach(function(t){n[t.pluginName]&&(n[t.pluginName][r]&&n[t.pluginName][r](A({sortable:n},i)),n.options[t.pluginName]&&n[t.pluginName][e]&&n[t.pluginName][e](A({sortable:n},i)))})},initializePlugins:function(i,r,o){for(var t in O.forEach(function(t){var e=t.pluginName;if(i.options[e]||t.initializeByDefault){var n=new t(i,r,i.options);n.sortable=i,n.options=i.options,i[e]=n,a(o,n.defaults)}}),i.options)if(i.options.hasOwnProperty(t)){var e=this.modifyOption(i,t,i.options[t]);void 0!==e&&(i.options[t]=e)}},getEventProperties:function(e,n){var i={};return O.forEach(function(t){"function"==typeof t.eventProperties&&a(i,t.eventProperties.call(n[t.pluginName],e))}),i},modifyOption:function(e,n,i){var r;return O.forEach(function(t){e[t.pluginName]&&t.optionListeners&&"function"==typeof t.optionListeners[n]&&(r=t.optionListeners[n].call(e[t.pluginName],i))}),r}};function C(t){var e=t.sortable,n=t.rootEl,i=t.name,r=t.targetEl,o=t.cloneEl,a=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,h=t.originalEvent,f=t.putSortable,p=t.extraEventProperties;if(e=e||n&&n[Y]){var v,m=e.options,g="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||w||_?(v=document.createEvent("Event")).initEvent(i,!0,!0):v=new CustomEvent(i,{bubbles:!0,cancelable:!0}),v.to=a||n,v.from=s||n,v.item=r||n,v.clone=o,v.oldIndex=l,v.newIndex=c,v.oldDraggableIndex=u,v.newDraggableIndex=d,v.originalEvent=h,v.pullMode=f?f.lastPutMode:void 0;var y=A({},p,D.getEventProperties(i,e));for(var b in y)v[b]=y[b];n&&n.dispatchEvent(v),m[g]&&m[g].call(e,v)}}function q(t,e,n){var i=2<arguments.length&&void 0!==n?n:{},r=i.evt,o=s(i,["evt"]);D.pluginEvent.bind(jt)(t,e,A({dragEl:W,parentEl:V,ghostEl:G,rootEl:J,nextEl:X,lastDownEl:Z,cloneEl:$,cloneHidden:Q,dragStarted:dt,putSortable:rt,activeSortable:jt.active,originalEvent:r,oldIndex:K,oldDraggableIndex:et,newIndex:tt,newDraggableIndex:nt,hideGhostForTarget:Lt,unhideGhostForTarget:At,cloneNowHidden:function(){Q=!0},cloneNowShown:function(){Q=!1},dispatchSortableEvent:function(t){U({sortable:e,name:t,originalEvent:r})}},o))}function U(t){C(A({putSortable:rt,cloneEl:$,targetEl:W,rootEl:J,oldIndex:K,oldDraggableIndex:et,newIndex:tt,newDraggableIndex:nt},t))}var W,V,G,J,X,Z,$,Q,K,tt,et,nt,it,rt,ot,at,st,lt,ct,ut,dt,ht,ft,pt,vt,mt=!1,gt=!1,yt=[],bt=!1,wt=!1,_t=[],kt=!1,xt=[],St="undefined"!=typeof document,Et=o,Tt=_||w?"cssFloat":"float",Ot=St&&!u&&!o&&"draggable"in document.createElement("div"),Mt=function(){if(St){if(w)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Dt=function(t,e){var n=j(t),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=b(t,0,e),o=b(t,1,e),a=r&&j(r),s=o&&j(o),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+N(r).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+N(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&"none"!==a.float){var u="left"===a.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||i<=l&&"none"===n[Tt]||o&&"none"===n[Tt]&&i<l+c)?"vertical":"horizontal"},Ct=function(t){function l(a,s){return function(t,e,n,i){var r=t.options.group.name&&e.options.group.name&&t.options.group.name===e.options.group.name;if(null==a&&(s||r))return!0;if(null==a||!1===a)return!1;if(s&&"clone"===a)return a;if("function"==typeof a)return l(a(t,e,n,i),s)(t,e,n,i);var o=(s?t:e).options.group.name;return!0===a||"string"==typeof a&&a===o||a.join&&-1<a.indexOf(o)}}var e={},n=t.group;n&&"object"==i(n)||(n={name:n}),e.name=n.name,e.checkPull=l(n.pull,!0),e.checkPut=l(n.put),e.revertClone=n.revertClone,t.group=e},Lt=function(){!Mt&&G&&j(G,"display","none")},At=function(){!Mt&&G&&j(G,"display","")};St&&document.addEventListener("click",function(t){if(gt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),gt=!1},!0);function It(t){if(W){var e=function(o,a){var s;return yt.some(function(t){if(!F(t)){var e=N(t),n=t[Y].options.emptyInsertThreshold,i=o>=e.left-n&&o<=e.right+n,r=a>=e.top-n&&a<=e.bottom+n;return n&&i&&r?s=t:void 0}}),s}((t=t.touches?t.touches[0]:t).clientX,t.clientY);if(e){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[Y]._onDragOver(n)}}}function Pt(t){W&&W.parentNode[Y]._isOutsideThisEl(t.target)}function jt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=a({},e),t[Y]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Dt(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==jt.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var i in D.initializePlugins(this,t,n),n)i in e||(e[i]=n[i]);for(var r in Ct(e),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&Ot,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?h(t,"pointerdown",this._onTapStart):(h(t,"mousedown",this._onTapStart),h(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(h(t,"dragover",this),h(t,"dragenter",this)),yt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),a(this,T())}function Nt(t,e,n,i,r,o,a,s){var l,c,u=t[Y],d=u.options.onMove;return!window.CustomEvent||w||_?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=n,l.draggedRect=i,l.related=r||e,l.relatedRect=o||N(e),l.willInsertAfter=s,l.originalEvent=a,t.dispatchEvent(l),d&&(c=d.call(u,l,a)),c}function Bt(t){t.draggable=!1}function Ft(){kt=!1}function Rt(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function Ht(t){return setTimeout(t,0)}function zt(t){return clearTimeout(t)}jt.prototype={constructor:jt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(ht=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,W):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,i=this.el,t=this.options,r=t.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(a||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=t.filter;if(!function(t){xt.length=0;var e=t.getElementsByTagName("input"),n=e.length;for(;n--;){var i=e[n];i.checked&&xt.push(i)}}(i),!W&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||t.disabled||l.isContentEditable||(s=I(s,t.draggable,i,!1))&&s.animated||Z===s)){if(K=R(s),et=R(s,t.draggable),"function"==typeof c){if(c.call(this,e,s,this))return U({sortable:n,rootEl:l,name:"filter",targetEl:s,toEl:i,fromEl:i}),q("filter",n,{evt:e}),void(r&&e.cancelable&&e.preventDefault())}else if(c=c&&c.split(",").some(function(t){if(t=I(l,t.trim(),i,!1))return U({sortable:n,rootEl:t,name:"filter",targetEl:s,fromEl:i,toEl:i}),q("filter",n,{evt:e}),!0}))return void(r&&e.cancelable&&e.preventDefault());t.handle&&!I(l,t.handle,i,!1)||this._prepareDragStart(e,a,s)}}},_prepareDragStart:function(t,e,n){var i,r=this,o=r.el,a=r.options,s=o.ownerDocument;if(n&&!W&&n.parentNode===o){var l=N(n);if(J=o,V=(W=n).parentNode,X=W.nextSibling,Z=n,it=a.group,ot={target:jt.dragged=W,clientX:(e||t).clientX,clientY:(e||t).clientY},ct=ot.clientX-l.left,ut=ot.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,W.style["will-change"]="all",i=function(){q("delayEnded",r,{evt:t}),jt.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!c&&r.nativeDraggable&&(W.draggable=!0),r._triggerDragStart(t,e),U({sortable:r,name:"choose",originalEvent:t}),P(W,a.chosenClass,!0))},a.ignore.split(",").forEach(function(t){y(W,t.trim(),Bt)}),h(s,"dragover",It),h(s,"mousemove",It),h(s,"touchmove",It),h(s,"mouseup",r._onDrop),h(s,"touchend",r._onDrop),h(s,"touchcancel",r._onDrop),c&&this.nativeDraggable&&(this.options.touchStartThreshold=4,W.draggable=!0),q("delayStart",this,{evt:t}),!a.delay||a.delayOnTouchOnly&&!e||this.nativeDraggable&&(_||w))i();else{if(jt.eventCanceled)return void this._onDrop();h(s,"mouseup",r._disableDelayedDrag),h(s,"touchend",r._disableDelayedDrag),h(s,"touchcancel",r._disableDelayedDrag),h(s,"mousemove",r._delayedDragTouchMoveHandler),h(s,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&h(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,a.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){W&&Bt(W),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;f(t,"mouseup",this._disableDelayedDrag),f(t,"touchend",this._disableDelayedDrag),f(t,"touchcancel",this._disableDelayedDrag),f(t,"mousemove",this._delayedDragTouchMoveHandler),f(t,"touchmove",this._delayedDragTouchMoveHandler),f(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?h(document,"pointermove",this._onTouchMove):h(document,e?"touchmove":"mousemove",this._onTouchMove):(h(W,"dragend",this),h(J,"dragstart",this._onDragStart));try{document.selection?Ht(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(mt=!1,J&&W){q("dragStarted",this,{evt:e}),this.nativeDraggable&&h(document,"dragover",Pt);var n=this.options;t||P(W,n.dragClass,!1),P(W,n.ghostClass,!0),jt.active=this,t&&this._appendGhost(),U({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(at){this._lastX=at.clientX,this._lastY=at.clientY,Lt();for(var t=document.elementFromPoint(at.clientX,at.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(at.clientX,at.clientY))!==e;)e=t;if(W.parentNode[Y]._isOutsideThisEl(t),e)do{if(e[Y]){if(e[Y]._onDragOver({clientX:at.clientX,clientY:at.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);At()}},_onTouchMove:function(t){if(ot){var e=this.options,n=e.fallbackTolerance,i=e.fallbackOffset,r=t.touches?t.touches[0]:t,o=G&&g(G),a=G&&o&&o.a,s=G&&o&&o.d,l=Et&&vt&&k(vt),c=(r.clientX-ot.clientX+i.x)/(a||1)+(l?l[0]-_t[0]:0)/(a||1),u=(r.clientY-ot.clientY+i.y)/(s||1)+(l?l[1]-_t[1]:0)/(s||1);if(!jt.active&&!mt){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(G){o?(o.e+=c-(st||0),o.f+=u-(lt||0)):o={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");j(G,"webkitTransform",d),j(G,"mozTransform",d),j(G,"msTransform",d),j(G,"transform",d),st=c,lt=u,at=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!G){var t=this.options.fallbackOnBody?document.body:J,e=N(W,!0,Et,!0,t),n=this.options;if(Et){for(vt=t;"static"===j(vt,"position")&&"none"===j(vt,"transform")&&vt!==document;)vt=vt.parentNode;vt!==document.body&&vt!==document.documentElement?(vt===document&&(vt=L()),e.top+=vt.scrollTop,e.left+=vt.scrollLeft):vt=L(),_t=k(vt)}P(G=W.cloneNode(!0),n.ghostClass,!1),P(G,n.fallbackClass,!0),P(G,n.dragClass,!0),j(G,"transition",""),j(G,"transform",""),j(G,"box-sizing","border-box"),j(G,"margin",0),j(G,"top",e.top),j(G,"left",e.left),j(G,"width",e.width),j(G,"height",e.height),j(G,"opacity","0.8"),j(G,"position",Et?"absolute":"fixed"),j(G,"zIndex","100000"),j(G,"pointerEvents","none"),jt.ghost=G,t.appendChild(G),j(G,"transform-origin",ct/parseInt(G.style.width)*100+"% "+ut/parseInt(G.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,i=t.dataTransfer,r=n.options;q("dragStart",this,{evt:t}),jt.eventCanceled?this._onDrop():(q("setupClone",this),jt.eventCanceled||(($=E(W)).draggable=!1,$.style["will-change"]="",this._hideClone(),P($,this.options.chosenClass,!1),jt.clone=$),n.cloneId=Ht(function(){q("clone",n),jt.eventCanceled||(n.options.removeCloneOnHide||J.insertBefore($,W),n._hideClone(),U({sortable:n,name:"clone"}))}),e||P(W,r.dragClass,!0),e?(gt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(f(document,"mouseup",n._onDrop),f(document,"touchend",n._onDrop),f(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,W)),h(document,"drop",n),j(W,"transform","translateZ(0)")),mt=!0,n._dragStartId=Ht(n._dragStarted.bind(n,e,t)),h(document,"selectstart",n),dt=!0,l&&j(document.body,"user-select","none"))},_onDragOver:function(n){var i,r,o,a,s=this.el,l=n.target,e=this.options,t=e.group,c=jt.active,u=it===t,d=e.sort,h=rt||c,f=this,p=!1;if(!kt){if(void 0!==n.preventDefault&&n.cancelable&&n.preventDefault(),l=I(l,e.draggable,s,!0),M("dragOver"),jt.eventCanceled)return p;if(W.contains(n.target)||l.animated&&l.animatingX&&l.animatingY||f._ignoreWhileAnimating===l)return C(!1);if(gt=!1,c&&!e.disabled&&(u?d||(o=!J.contains(W)):rt===this||(this.lastPutMode=it.checkPull(this,c,W,n))&&t.checkPut(this,c,W,n))){if(a="vertical"===this._getDirection(n,l),i=N(W),M("dragOverValid"),jt.eventCanceled)return p;if(o)return V=J,D(),this._hideClone(),M("revert"),jt.eventCanceled||(X?J.insertBefore(W,X):J.appendChild(W)),C(!0);var v=F(s,e.draggable);if(!v||function(t,e,n){var i=N(F(n.el,n.options.draggable));return e?t.clientX>i.right+10||t.clientX<=i.right&&t.clientY>i.bottom&&t.clientX>=i.left:t.clientX>i.right&&t.clientY>i.top||t.clientX<=i.right&&t.clientY>i.bottom+10}(n,a,this)&&!v.animated){if(v===W)return C(!1);if(v&&s===n.target&&(l=v),l&&(r=N(l)),!1!==Nt(J,s,W,i,l,r,n,!!l))return D(),s.appendChild(W),V=s,L(),C(!0)}else if(l.parentNode===s){r=N(l);var m,g,y,b=W.parentNode!==s,w=!function(t,e,n){var i=n?t.left:t.top,r=n?t.right:t.bottom,o=n?t.width:t.height,a=n?e.left:e.top,s=n?e.right:e.bottom,l=n?e.width:e.height;return i===a||r===s||i+o/2===a+l/2}(W.animated&&W.toRect||i,l.animated&&l.toRect||r,a),_=a?"top":"left",k=B(l,"top","top")||B(W,"top","top"),x=k?k.scrollTop:void 0;if(ht!==l&&(g=r[_],bt=!1,wt=!w&&e.invertSwap||b),0!==(m=function(t,e,n,i,r,o,a,s){var l=i?t.clientY:t.clientX,c=i?n.height:n.width,u=i?n.top:n.left,d=i?n.bottom:n.right,h=!1;if(!a)if(s&&pt<c*r){if(!bt&&(1===ft?u+c*o/2<l:l<d-c*o/2)&&(bt=!0),bt)h=!0;else if(1===ft?l<u+pt:d-pt<l)return-ft}else if(u+c*(1-r)/2<l&&l<d-c*(1-r)/2)return function(t){return R(W)<R(t)?1:-1}(e);if((h=h||a)&&(l<u+c*o/2||d-c*o/2<l))return u+c/2<l?1:-1;return 0}(n,l,r,a,w?1:e.swapThreshold,null==e.invertedSwapThreshold?e.swapThreshold:e.invertedSwapThreshold,wt,ht===l)))for(var S=R(W);S-=m,(y=V.children[S])&&("none"===j(y,"display")||y===G););if(0===m||y===l)return C(!1);ft=m;var E=(ht=l).nextElementSibling,T=!1,O=Nt(J,s,W,i,l,r,n,T=1===m);if(!1!==O)return 1!==O&&-1!==O||(T=1===O),kt=!0,setTimeout(Ft,30),D(),T&&!E?s.appendChild(W):l.parentNode.insertBefore(W,T?E:l),k&&z(k,0,x-k.scrollTop),V=W.parentNode,void 0===g||wt||(pt=Math.abs(g-N(l)[_])),L(),C(!0)}if(s.contains(W))return C(!1)}return!1}function M(t,e){q(t,f,A({evt:n,isOwner:u,axis:a?"vertical":"horizontal",revert:o,dragRect:i,targetRect:r,canSort:d,fromSortable:h,target:l,completed:C,onMove:function(t,e){return Nt(J,s,W,i,t,N(t),n,e)},changed:L},e))}function D(){M("dragOverAnimationCapture"),f.captureAnimationState(),f!==h&&h.captureAnimationState()}function C(t){return M("dragOverCompleted",{insertion:t}),t&&(u?c._hideClone():c._showClone(f),f!==h&&(P(W,rt?rt.options.ghostClass:c.options.ghostClass,!1),P(W,e.ghostClass,!0)),rt!==f&&f!==jt.active?rt=f:f===jt.active&&rt&&(rt=null),h===f&&(f._ignoreWhileAnimating=l),f.animateAll(function(){M("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(l===W&&!W.animated||l===s&&!l.animated)&&(ht=null),e.dragoverBubble||n.rootEl||l===document||(W.parentNode[Y]._isOutsideThisEl(n.target),t||It(n)),!e.dragoverBubble&&n.stopPropagation&&n.stopPropagation(),p=!0}function L(){tt=R(W),nt=R(W,e.draggable),U({sortable:f,name:"change",toEl:s,newIndex:tt,newDraggableIndex:nt,originalEvent:n})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){f(document,"mousemove",this._onTouchMove),f(document,"touchmove",this._onTouchMove),f(document,"pointermove",this._onTouchMove),f(document,"dragover",It),f(document,"mousemove",It),f(document,"touchmove",It)},_offUpEvents:function(){var t=this.el.ownerDocument;f(t,"mouseup",this._onDrop),f(t,"touchend",this._onDrop),f(t,"pointerup",this._onDrop),f(t,"touchcancel",this._onDrop),f(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;tt=R(W),nt=R(W,n.draggable),q("drop",this,{evt:t}),V=W&&W.parentNode,tt=R(W),nt=R(W,n.draggable),jt.eventCanceled||(bt=wt=mt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),zt(this.cloneId),zt(this._dragStartId),this.nativeDraggable&&(f(document,"drop",this),f(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),l&&j(document.body,"user-select",""),t&&(dt&&(t.cancelable&&t.preventDefault(),n.dropBubble||t.stopPropagation()),G&&G.parentNode&&G.parentNode.removeChild(G),(J===V||rt&&"clone"!==rt.lastPutMode)&&$&&$.parentNode&&$.parentNode.removeChild($),W&&(this.nativeDraggable&&f(W,"dragend",this),Bt(W),W.style["will-change"]="",dt&&!mt&&P(W,rt?rt.options.ghostClass:this.options.ghostClass,!1),P(W,this.options.chosenClass,!1),U({sortable:this,name:"unchoose",toEl:V,newIndex:null,newDraggableIndex:null,originalEvent:t}),J!==V?(0<=tt&&(U({rootEl:V,name:"add",toEl:V,fromEl:J,originalEvent:t}),U({sortable:this,name:"remove",toEl:V,originalEvent:t}),U({rootEl:V,name:"sort",toEl:V,fromEl:J,originalEvent:t}),U({sortable:this,name:"sort",toEl:V,originalEvent:t})),rt&&rt.save()):tt!==K&&0<=tt&&(U({sortable:this,name:"update",toEl:V,originalEvent:t}),U({sortable:this,name:"sort",toEl:V,originalEvent:t})),jt.active&&(null!=tt&&-1!==tt||(tt=K,nt=et),U({sortable:this,name:"end",toEl:V,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){q("nulling",this),J=W=V=G=X=$=Z=Q=ot=at=dt=tt=nt=K=et=ht=ft=rt=it=jt.dragged=jt.ghost=jt.clone=jt.active=null,xt.forEach(function(t){t.checked=!0}),xt.length=st=lt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":W&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)I(t=n[i],o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||Rt(t));return e},sort:function(t){var i={},r=this.el;this.toArray().forEach(function(t,e){var n=r.children[e];I(n,this.options.draggable,r,!1)&&(i[t]=n)},this),t.forEach(function(t){i[t]&&(r.removeChild(i[t]),r.appendChild(i[t]))})},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return I(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var i=D.modifyOption(this,t,e);n[t]=void 0!==i?i:e,"group"===t&&Ct(n)},destroy:function(){q("destroy",this);var t=this.el;t[Y]=null,f(t,"mousedown",this._onTapStart),f(t,"touchstart",this._onTapStart),f(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(f(t,"dragover",this),f(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),yt.splice(yt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Q){if(q("hideClone",this),jt.eventCanceled)return;j($,"display","none"),this.options.removeCloneOnHide&&$.parentNode&&$.parentNode.removeChild($),Q=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(Q){if(q("showClone",this),jt.eventCanceled)return;J.contains(W)&&!this.options.group.revertClone?J.insertBefore($,W):X?J.insertBefore($,X):J.appendChild($),this.options.group.revertClone&&this.animate(W,$),j($,"display",""),Q=!1}}else this._hideClone()}},St&&h(document,"touchmove",function(t){(jt.active||mt)&&t.cancelable&&t.preventDefault()}),jt.utils={on:h,off:f,css:j,find:y,is:function(t,e){return!!I(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:S,closest:I,toggleClass:P,clone:E,index:R,nextTick:Ht,cancelNextTick:zt,detectDirection:Dt,getChild:b},jt.get=function(t){return t[Y]},jt.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(jt.utils=A({},jt.utils,t.utils)),D.mount(t)})},jt.create=function(t,e){return new jt(t,e)};var Yt,qt,Ut,Wt,Vt,Gt,Jt=[],Xt=!(jt.version="1.10.1");function Zt(){Jt.forEach(function(t){clearInterval(t.pid)}),Jt=[]}function $t(){clearInterval(Gt)}function Qt(t){var e=t.originalEvent,n=t.putSortable,i=t.dragEl,r=t.activeSortable,o=t.dispatchSortableEvent,a=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var l=n||r;a();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(u)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}}var Kt=S(function(n,t,e,i){if(t.scroll){var r,o=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=L(),u=!1;qt!==e&&(qt=e,Zt(),Yt=t.scroll,r=t.scrollFn,!0===Yt&&(Yt=H(e,!0)));var d=0,h=Yt;do{var f=h,p=N(f),v=p.top,m=p.bottom,g=p.left,y=p.right,b=p.width,w=p.height,_=void 0,k=void 0,x=f.scrollWidth,S=f.scrollHeight,E=j(f),T=f.scrollLeft,O=f.scrollTop;k=f===c?(_=b<x&&("auto"===E.overflowX||"scroll"===E.overflowX||"visible"===E.overflowX),w<S&&("auto"===E.overflowY||"scroll"===E.overflowY||"visible"===E.overflowY)):(_=b<x&&("auto"===E.overflowX||"scroll"===E.overflowX),w<S&&("auto"===E.overflowY||"scroll"===E.overflowY));var M=_&&(Math.abs(y-o)<=s&&T+b<x)-(Math.abs(g-o)<=s&&!!T),D=k&&(Math.abs(m-a)<=s&&O+w<S)-(Math.abs(v-a)<=s&&!!O);if(!Jt[d])for(var C=0;C<=d;C++)Jt[C]||(Jt[C]={});Jt[d].vx==M&&Jt[d].vy==D&&Jt[d].el===f||(Jt[d].el=f,Jt[d].vx=M,Jt[d].vy=D,clearInterval(Jt[d].pid),0==M&&0==D||(u=!0,Jt[d].pid=setInterval(function(){i&&0===this.layer&&jt.active._onTouchMove(Vt);var t=Jt[this.layer].vy?Jt[this.layer].vy*l:0,e=Jt[this.layer].vx?Jt[this.layer].vx*l:0;"function"==typeof r&&"continue"!==r.call(jt.dragged.parentNode[Y],e,t,n,Vt,Jt[this.layer].el)||z(Jt[this.layer].el,e,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&h!==c&&(h=H(h,!1)));Xt=u}},30);function te(){}function ee(){}te.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=b(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(e,i):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:Qt},a(te,{pluginName:"revertOnSpill"}),ee.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:Qt},a(ee,{pluginName:"removeOnSpill"});jt.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?h(document,"dragover",this._handleAutoScroll):this.options.supportPointer?h(document,"pointermove",this._handleFallbackAutoScroll):e.touches?h(document,"touchmove",this._handleFallbackAutoScroll):h(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?f(document,"dragover",this._handleAutoScroll):(f(document,"pointermove",this._handleFallbackAutoScroll),f(document,"touchmove",this._handleFallbackAutoScroll),f(document,"mousemove",this._handleFallbackAutoScroll)),$t(),Zt(),clearTimeout(v),v=void 0},nulling:function(){Vt=qt=Yt=Xt=Gt=Ut=Wt=null,Jt.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(e,n){var i=this,r=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,t=document.elementFromPoint(r,o);if(Vt=e,n||_||w||l){Kt(e,this.options,t,n);var a=H(t,!0);!Xt||Gt&&r===Ut&&o===Wt||(Gt&&$t(),Gt=setInterval(function(){var t=H(document.elementFromPoint(r,o),!0);t!==a&&(a=t,Zt()),Kt(e,i.options,t,n)},10),Ut=r,Wt=o)}else{if(!this.options.bubbleScroll||H(t,!0)===L())return void Zt();Kt(e,this.options,H(t,!1),!1)}}},a(t,{pluginName:"scroll",initializeByDefault:!0})}),jt.mount(ee,te),e.a=jt},function(t,m,e){"use strict";(function(t){var n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},u=function(t,e,n,i,r,o,a,s,l){var c=this;c.numeralDecimalMark=t||".",c.numeralIntegerScale=0<e?e:0,c.numeralDecimalScale=0<=n?n:2,c.numeralThousandsGroupStyle=i||u.groupStyle.thousand,c.numeralPositiveOnly=!!r,c.stripLeadingZeroes=!1!==o,c.prefix=a||""===a?a:"",c.signBeforePrefix=!!s,c.delimiter=l||""===l?l:",",c.delimiterRE=l?new RegExp("\\"+l,"g"):""};u.groupStyle={thousand:"thousand",lakh:"lakh",wan:"wan",none:"none"},u.prototype={getRawValue:function(t){return t.replace(this.delimiterRE,"").replace(this.numeralDecimalMark,".")},format:function(t){var e,n,i,r,o=this,a="";switch(t=t.replace(/[A-Za-z]/g,"").replace(o.numeralDecimalMark,"M").replace(/[^\dM-]/g,"").replace(/^\-/,"N").replace(/\-/g,"").replace("N",o.numeralPositiveOnly?"":"-").replace("M",o.numeralDecimalMark),o.stripLeadingZeroes&&(t=t.replace(/^(-)?0+(?=\d)/,"$1")),n="-"===t.slice(0,1)?"-":"",i=void 0!==o.prefix?o.signBeforePrefix?n+o.prefix:o.prefix+n:n,0<=(r=t).indexOf(o.numeralDecimalMark)&&(r=(e=t.split(o.numeralDecimalMark))[0],a=o.numeralDecimalMark+e[1].slice(0,o.numeralDecimalScale)),"-"==n&&(r=r.slice(1)),0<o.numeralIntegerScale&&(r=r.slice(0,o.numeralIntegerScale)),o.numeralThousandsGroupStyle){case u.groupStyle.lakh:r=r.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+o.delimiter);break;case u.groupStyle.wan:r=r.replace(/(\d)(?=(\d{4})+$)/g,"$1"+o.delimiter);break;case u.groupStyle.thousand:r=r.replace(/(\d)(?=(\d{3})+$)/g,"$1"+o.delimiter)}return i+r.toString()+(0<o.numeralDecimalScale?a.toString():"")}};function e(t,e,n){var i=this;i.date=[],i.blocks=[],i.datePattern=t,i.dateMin=e.split("-").reverse().map(function(t){return parseInt(t,10)}),2===i.dateMin.length&&i.dateMin.unshift(0),i.dateMax=n.split("-").reverse().map(function(t){return parseInt(t,10)}),2===i.dateMax.length&&i.dateMax.unshift(0),i.initBlocks()}var i=u;e.prototype={initBlocks:function(){var e=this;e.datePattern.forEach(function(t){"Y"===t?e.blocks.push(4):e.blocks.push(2)})},getISOFormatDate:function(){var t=this.date;return t[2]?t[2]+"-"+this.addLeadingZero(t[1])+"-"+this.addLeadingZero(t[0]):""},getBlocks:function(){return this.blocks},getValidatedDate:function(o){var a=this,s="";return o=o.replace(/[^\d]/g,""),a.blocks.forEach(function(t,e){if(0<o.length){var n=o.slice(0,t),i=n.slice(0,1),r=o.slice(t);switch(a.datePattern[e]){case"d":"00"===n?n="01":3<parseInt(i,10)?n="0"+i:31<parseInt(n,10)&&(n="31");break;case"m":"00"===n?n="01":1<parseInt(i,10)?n="0"+i:12<parseInt(n,10)&&(n="12")}s+=n,o=r}}),this.getFixedDateString(s)},getFixedDateString:function(t){var e,n,i,r=this,o=r.datePattern,a=[],s=0,l=0,c=0,u=0,d=0,h=0,f=!1;return 4===t.length&&"y"!==o[0].toLowerCase()&&"y"!==o[1].toLowerCase()&&(d=2-(u="d"===o[0]?0:2),e=parseInt(t.slice(u,u+2),10),n=parseInt(t.slice(d,d+2),10),a=this.getFixedDate(e,n,0)),8===t.length&&(o.forEach(function(t,e){switch(t){case"d":s=e;break;case"m":l=e;break;default:c=e}}),h=2*c,u=s<=c?2*s:2*s+2,d=l<=c?2*l:2*l+2,e=parseInt(t.slice(u,u+2),10),n=parseInt(t.slice(d,d+2),10),i=parseInt(t.slice(h,h+4),10),f=4===t.slice(h,h+4).length,a=this.getFixedDate(e,n,i)),4!==t.length||"y"!==o[0]&&"y"!==o[1]||(h=2-(d="m"===o[0]?0:2),n=parseInt(t.slice(d,d+2),10),i=parseInt(t.slice(h,h+2),10),f=2===t.slice(h,h+2).length,a=[0,n,i]),6!==t.length||"Y"!==o[0]&&"Y"!==o[1]||(h=2-.5*(d="m"===o[0]?0:4),n=parseInt(t.slice(d,d+2),10),i=parseInt(t.slice(h,h+4),10),f=4===t.slice(h,h+4).length,a=[0,n,i]),a=r.getRangeFixedDate(a),0===(r.date=a).length?t:o.reduce(function(t,e){switch(e){case"d":return t+(0===a[0]?"":r.addLeadingZero(a[0]));case"m":return t+(0===a[1]?"":r.addLeadingZero(a[1]));case"y":return t+(f?r.addLeadingZeroForYear(a[2],!1):"");case"Y":return t+(f?r.addLeadingZeroForYear(a[2],!0):"")}},"")},getRangeFixedDate:function(t){var e=this.datePattern,n=this.dateMin||[],i=this.dateMax||[];return!t.length||n.length<3&&i.length<3?t:e.find(function(t){return"y"===t.toLowerCase()})&&0===t[2]?t:i.length&&(i[2]<t[2]||i[2]===t[2]&&(i[1]<t[1]||i[1]===t[1]&&i[0]<t[0]))?i:n.length&&(n[2]>t[2]||n[2]===t[2]&&(n[1]>t[1]||n[1]===t[1]&&n[0]>t[0]))?n:t},getFixedDate:function(t,e,n){return t=Math.min(t,31),e=Math.min(e,12),n=parseInt(n||0,10),(e<7&&e%2==0||8<e&&e%2==1)&&(t=Math.min(t,2===e?this.isLeapYear(n)?29:28:30)),[t,e,n]},isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},addLeadingZero:function(t){return(t<10?"0":"")+t},addLeadingZeroForYear:function(t,e){return e?(t<10?"000":t<100?"00":t<1e3?"0":"")+t:(t<10?"0":"")+t}};function r(t,e){var n=this;n.time=[],n.blocks=[],n.timePattern=t,n.timeFormat=e,n.initBlocks()}var o=e;r.prototype={initBlocks:function(){var t=this;t.timePattern.forEach(function(){t.blocks.push(2)})},getISOFormatTime:function(){var t=this.time;return t[2]?this.addLeadingZero(t[0])+":"+this.addLeadingZero(t[1])+":"+this.addLeadingZero(t[2]):""},getBlocks:function(){return this.blocks},getTimeFormatOptions:function(){return"12"===String(this.timeFormat)?{maxHourFirstDigit:1,maxHours:12,maxMinutesFirstDigit:5,maxMinutes:60}:{maxHourFirstDigit:2,maxHours:23,maxMinutesFirstDigit:5,maxMinutes:60}},getValidatedTime:function(o){var a=this,s="";o=o.replace(/[^\d]/g,"");var l=a.getTimeFormatOptions();return a.blocks.forEach(function(t,e){if(0<o.length){var n=o.slice(0,t),i=n.slice(0,1),r=o.slice(t);switch(a.timePattern[e]){case"h":parseInt(i,10)>l.maxHourFirstDigit?n="0"+i:parseInt(n,10)>l.maxHours&&(n=l.maxHours+"");break;case"m":case"s":parseInt(i,10)>l.maxMinutesFirstDigit?n="0"+i:parseInt(n,10)>l.maxMinutes&&(n=l.maxMinutes+"")}s+=n,o=r}}),this.getFixedTimeString(s)},getFixedTimeString:function(t){var e,n,i,r=this,o=r.timePattern,a=[],s=0,l=0,c=0,u=0,d=0,h=0;return 6===t.length&&(o.forEach(function(t,e){switch(t){case"s":s=2*e;break;case"m":l=2*e;break;case"h":c=2*e}}),h=c,d=l,u=s,e=parseInt(t.slice(u,u+2),10),n=parseInt(t.slice(d,d+2),10),i=parseInt(t.slice(h,h+2),10),a=this.getFixedTime(i,n,e)),4===t.length&&r.timePattern.indexOf("s")<0&&(o.forEach(function(t,e){switch(t){case"m":l=2*e;break;case"h":c=2*e}}),h=c,d=l,e=0,n=parseInt(t.slice(d,d+2),10),i=parseInt(t.slice(h,h+2),10),a=this.getFixedTime(i,n,e)),0===(r.time=a).length?t:o.reduce(function(t,e){switch(e){case"s":return t+r.addLeadingZero(a[2]);case"m":return t+r.addLeadingZero(a[1]);case"h":return t+r.addLeadingZero(a[0])}},"")},getFixedTime:function(t,e,n){return n=Math.min(parseInt(n||0,10),60),e=Math.min(e,60),[t=Math.min(t,60),e,n]},addLeadingZero:function(t){return(t<10?"0":"")+t}};function a(t,e){this.delimiter=e||""===e?e:" ",this.delimiterRE=e?new RegExp("\\"+e,"g"):"",this.formatter=t}var s=r;a.prototype={setFormatter:function(t){this.formatter=t},format:function(t){this.formatter.clear();for(var e,n="",i=!1,r=0,o=(t=(t=(t=t.replace(/[^\d+]/g,"")).replace(/^\+/,"B").replace(/\+/g,"").replace("B","+")).replace(this.delimiterRE,"")).length;r<o;r++)e=this.formatter.inputDigit(t.charAt(r)),/[\s()-]/g.test(e)?(n=e,i=!0):i||(n=e);return n=(n=n.replace(/[()]/g,"")).replace(/[\s-]/g,this.delimiter)}};var l=a,c={blocks:{uatp:[4,5,6],amex:[4,6,5],diners:[4,6,4],discover:[4,4,4,4],mastercard:[4,4,4,4],dankort:[4,4,4,4],instapayment:[4,4,4,4],jcb15:[4,6,5],jcb:[4,4,4,4],maestro:[4,4,4,4],visa:[4,4,4,4],mir:[4,4,4,4],unionPay:[4,4,4,4],general:[4,4,4,4]},re:{uatp:/^(?!1800)1\d{0,14}/,amex:/^3[47]\d{0,13}/,discover:/^(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/,diners:/^3(?:0([0-5]|9)|[689]\d?)\d{0,11}/,mastercard:/^(5[1-5]\d{0,2}|22[2-9]\d{0,1}|2[3-7]\d{0,2})\d{0,12}/,dankort:/^(5019|4175|4571)\d{0,12}/,instapayment:/^63[7-9]\d{0,13}/,jcb15:/^(?:2131|1800)\d{0,11}/,jcb:/^(?:35\d{0,2})\d{0,12}/,maestro:/^(?:5[0678]\d{0,2}|6304|67\d{0,2})\d{0,12}/,mir:/^220[0-4]\d{0,12}/,visa:/^4\d{0,15}/,unionPay:/^62\d{0,14}/},getStrictBlocks:function(t){var e=t.reduce(function(t,e){return t+e},0);return t.concat(19-e)},getInfo:function(t,e){var n=c.blocks,i=c.re;for(var r in e=!!e,i)if(i[r].test(t)){var o=n[r];return{type:r,blocks:e?this.getStrictBlocks(o):o}}return{type:"unknown",blocks:e?this.getStrictBlocks(n.general):n.general}}},d=c,h={noop:function(){},strip:function(t,e){return t.replace(e,"")},getPostDelimiter:function(e,t,n){if(0===n.length)return e.slice(-t.length)===t?t:"";var i="";return n.forEach(function(t){e.slice(-t.length)===t&&(i=t)}),i},getDelimiterREByDelimiter:function(t){return new RegExp(t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g")},getNextCursorPosition:function(t,e,n,i,r){return e.length===t?n.length:t+this.getPositionOffset(t,e,n,i,r)},getPositionOffset:function(t,e,n,i,r){var o,a,s;return o=this.stripDelimiters(e.slice(0,t),i,r),a=this.stripDelimiters(n.slice(0,t),i,r),0!=(s=o.length-a.length)?s/Math.abs(s):0},stripDelimiters:function(e,t,n){var i=this;if(0!==n.length)return n.forEach(function(t){t.split("").forEach(function(t){e=e.replace(i.getDelimiterREByDelimiter(t),"")})}),e;var r=t?i.getDelimiterREByDelimiter(t):"";return e.replace(r,"")},headStr:function(t,e){return t.slice(0,e)},getMaxLength:function(t){return t.reduce(function(t,e){return t+e},0)},getPrefixStrippedValue:function(t,e,n,i,r,o,a){if(0===n)return t;if(i.slice(0,n)!==e)return a&&!i&&t?t:"";var s=this.stripDelimiters(i,r,o);return t.slice(0,n)!==e?s.slice(n):t.slice(n)},getFirstDiffIndex:function(t,e){for(var n=0;t.charAt(n)===e.charAt(n);)if(""===t.charAt(n++))return-1;return n},getFormattedValue:function(r,t,o,a,s,l){var c,u="",d=0<s.length;return 0===o?r:(t.forEach(function(t,e){if(0<r.length){var n=r.slice(0,t),i=r.slice(t);c=d?s[l?e-1:e]||c:a,l?(0<e&&(u+=c),u+=n):(u+=n,n.length===t&&e<o-1&&(u+=c)),r=i}}),u)},fixPrefixCursor:function(t,e,n,i){if(t){var r=t.value,o=n||i[0]||" ";if(t.setSelectionRange&&e&&!(e.length+o.length<r.length)){var a=2*r.length;setTimeout(function(){t.setSelectionRange(a,a)},1)}}},checkFullSelection:function(t){try{return(window.getSelection()||document.getSelection()||{}).toString().length===t.length}catch(t){}return!1},setSelection:function(t,e,n){if(t===this.getActiveElement(n)&&!(t&&t.value.length<=e))if(t.createTextRange){var i=t.createTextRange();i.move("character",e),i.select()}else try{t.setSelectionRange(e,e)}catch(t){console.warn("The input element type does not support selection")}},getActiveElement:function(t){var e=t.activeElement;return e&&e.shadowRoot?this.getActiveElement(e.shadowRoot):e},isAndroid:function(){return navigator&&/android/i.test(navigator.userAgent)},isAndroidBackspaceKeydown:function(t,e){return!!(this.isAndroid()&&t&&e)&&e===t.slice(0,-1)}},f={assign:function(t,e){return(t=t||{}).creditCard=!!(e=e||{}).creditCard,t.creditCardStrictMode=!!e.creditCardStrictMode,t.creditCardType="",t.onCreditCardTypeChanged=e.onCreditCardTypeChanged||function(){},t.phone=!!e.phone,t.phoneRegionCode=e.phoneRegionCode||"AU",t.phoneFormatter={},t.time=!!e.time,t.timePattern=e.timePattern||["h","m","s"],t.timeFormat=e.timeFormat||"24",t.timeFormatter={},t.date=!!e.date,t.datePattern=e.datePattern||["d","m","Y"],t.dateMin=e.dateMin||"",t.dateMax=e.dateMax||"",t.dateFormatter={},t.numeral=!!e.numeral,t.numeralIntegerScale=0<e.numeralIntegerScale?e.numeralIntegerScale:0,t.numeralDecimalScale=0<=e.numeralDecimalScale?e.numeralDecimalScale:2,t.numeralDecimalMark=e.numeralDecimalMark||".",t.numeralThousandsGroupStyle=e.numeralThousandsGroupStyle||"thousand",t.numeralPositiveOnly=!!e.numeralPositiveOnly,t.stripLeadingZeroes=!1!==e.stripLeadingZeroes,t.signBeforePrefix=!!e.signBeforePrefix,t.numericOnly=t.creditCard||t.date||!!e.numericOnly,t.uppercase=!!e.uppercase,t.lowercase=!!e.lowercase,t.prefix=t.creditCard||t.date?"":e.prefix||"",t.noImmediatePrefix=!!e.noImmediatePrefix,t.prefixLength=t.prefix.length,t.rawValueTrimPrefix=!!e.rawValueTrimPrefix,t.copyDelimiter=!!e.copyDelimiter,t.initValue=void 0!==e.initValue&&null!==e.initValue?e.initValue.toString():"",t.delimiter=e.delimiter||""===e.delimiter?e.delimiter:e.date?"/":e.time?":":e.numeral?",":(e.phone," "),t.delimiterLength=t.delimiter.length,t.delimiterLazyShow=!!e.delimiterLazyShow,t.delimiters=e.delimiters||[],t.blocks=e.blocks||[],t.blocksLength=t.blocks.length,t.root="object"==typeof n&&n?n:window,t.document=e.document||t.root.document,t.maxLength=0,t.backspace=!1,t.result="",t.onValueChanged=e.onValueChanged||function(){},t}},p=function(t,e){var n=this,i=!1;if("string"==typeof t?(n.element=document.querySelector(t),i=1<document.querySelectorAll(t).length):void 0!==t.length&&0<t.length?(n.element=t[0],i=1<t.length):n.element=t,!n.element)throw new Error("[cleave.js] Please check the element");if(i)try{console.warn("[cleave.js] Multiple input fields matched, cleave.js will only take the first one.")}catch(t){}e.initValue=n.element.value,n.properties=p.DefaultProperties.assign({},e),n.init()};p.prototype={init:function(){var t=this,e=t.properties;e.numeral||e.phone||e.creditCard||e.time||e.date||0!==e.blocksLength||e.prefix?(e.maxLength=p.Util.getMaxLength(e.blocks),t.isAndroid=p.Util.isAndroid(),t.lastInputValue="",t.onChangeListener=t.onChange.bind(t),t.onKeyDownListener=t.onKeyDown.bind(t),t.onFocusListener=t.onFocus.bind(t),t.onCutListener=t.onCut.bind(t),t.onCopyListener=t.onCopy.bind(t),t.element.addEventListener("input",t.onChangeListener),t.element.addEventListener("keydown",t.onKeyDownListener),t.element.addEventListener("focus",t.onFocusListener),t.element.addEventListener("cut",t.onCutListener),t.element.addEventListener("copy",t.onCopyListener),t.initPhoneFormatter(),t.initDateFormatter(),t.initTimeFormatter(),t.initNumeralFormatter(),(e.initValue||e.prefix&&!e.noImmediatePrefix)&&t.onInput(e.initValue)):t.onInput(e.initValue)},initNumeralFormatter:function(){var t=this.properties;t.numeral&&(t.numeralFormatter=new p.NumeralFormatter(t.numeralDecimalMark,t.numeralIntegerScale,t.numeralDecimalScale,t.numeralThousandsGroupStyle,t.numeralPositiveOnly,t.stripLeadingZeroes,t.prefix,t.signBeforePrefix,t.delimiter))},initTimeFormatter:function(){var t=this.properties;t.time&&(t.timeFormatter=new p.TimeFormatter(t.timePattern,t.timeFormat),t.blocks=t.timeFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=p.Util.getMaxLength(t.blocks))},initDateFormatter:function(){var t=this.properties;t.date&&(t.dateFormatter=new p.DateFormatter(t.datePattern,t.dateMin,t.dateMax),t.blocks=t.dateFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=p.Util.getMaxLength(t.blocks))},initPhoneFormatter:function(){var t=this.properties;if(t.phone)try{t.phoneFormatter=new p.PhoneFormatter(new t.root.Cleave.AsYouTypeFormatter(t.phoneRegionCode),t.delimiter)}catch(t){throw new Error("[cleave.js] Please include phone-type-formatter.{country}.js lib")}},onKeyDown:function(t){var e=this,n=e.properties,i=t.which||t.keyCode,r=p.Util,o=e.element.value;e.hasBackspaceSupport=e.hasBackspaceSupport||8===i,!e.hasBackspaceSupport&&r.isAndroidBackspaceKeydown(e.lastInputValue,o)&&(i=8),e.lastInputValue=o;var a=r.getPostDelimiter(o,n.delimiter,n.delimiters);n.postDelimiterBackspace=!(8!==i||!a)&&a},onChange:function(){this.onInput(this.element.value)},onFocus:function(){var t=this.properties;p.Util.fixPrefixCursor(this.element,t.prefix,t.delimiter,t.delimiters)},onCut:function(t){p.Util.checkFullSelection(this.element.value)&&(this.copyClipboardData(t),this.onInput(""))},onCopy:function(t){p.Util.checkFullSelection(this.element.value)&&this.copyClipboardData(t)},copyClipboardData:function(t){var e=this.properties,n=p.Util,i=this.element.value,r="";r=e.copyDelimiter?i:n.stripDelimiters(i,e.delimiter,e.delimiters);try{t.clipboardData?t.clipboardData.setData("Text",r):window.clipboardData.setData("Text",r),t.preventDefault()}catch(t){}},onInput:function(t){var e=this,n=e.properties,i=p.Util,r=i.getPostDelimiter(t,n.delimiter,n.delimiters);return n.numeral||!n.postDelimiterBackspace||r||(t=i.headStr(t,t.length-n.postDelimiterBackspace.length)),n.phone?(!n.prefix||n.noImmediatePrefix&&!t.length?n.result=n.phoneFormatter.format(t):n.result=n.prefix+n.phoneFormatter.format(t).slice(n.prefix.length),void e.updateValueState()):n.numeral?(n.prefix&&n.noImmediatePrefix&&0===t.length?n.result="":n.result=n.numeralFormatter.format(t),void e.updateValueState()):(n.date&&(t=n.dateFormatter.getValidatedDate(t)),n.time&&(t=n.timeFormatter.getValidatedTime(t)),t=i.stripDelimiters(t,n.delimiter,n.delimiters),t=i.getPrefixStrippedValue(t,n.prefix,n.prefixLength,n.result,n.delimiter,n.delimiters,n.noImmediatePrefix),t=n.numericOnly?i.strip(t,/[^\d]/g):t,t=n.uppercase?t.toUpperCase():t,t=n.lowercase?t.toLowerCase():t,!n.prefix||n.noImmediatePrefix&&!t.length||(t=n.prefix+t,0!==n.blocksLength)?(n.creditCard&&e.updateCreditCardPropsByValue(t),t=i.headStr(t,n.maxLength),n.result=i.getFormattedValue(t,n.blocks,n.blocksLength,n.delimiter,n.delimiters,n.delimiterLazyShow)):n.result=t,void e.updateValueState())},updateCreditCardPropsByValue:function(t){var e,n=this.properties,i=p.Util;i.headStr(n.result,4)!==i.headStr(t,4)&&(e=p.CreditCardDetector.getInfo(t,n.creditCardStrictMode),n.blocks=e.blocks,n.blocksLength=n.blocks.length,n.maxLength=i.getMaxLength(n.blocks),n.creditCardType!==e.type&&(n.creditCardType=e.type,n.onCreditCardTypeChanged.call(this,n.creditCardType)))},updateValueState:function(){var t=this,e=p.Util,n=t.properties;if(t.element){var i=t.element.selectionEnd,r=t.element.value,o=n.result;i=e.getNextCursorPosition(i,r,o,n.delimiter,n.delimiters),t.isAndroid?window.setTimeout(function(){t.element.value=o,e.setSelection(t.element,i,n.document,!1),t.callOnValueChanged()},1):(t.element.value=o,e.setSelection(t.element,i,n.document,!1),t.callOnValueChanged())}},callOnValueChanged:function(){var t=this.properties;t.onValueChanged.call(this,{target:{value:t.result,rawValue:this.getRawValue()}})},setPhoneRegionCode:function(t){this.properties.phoneRegionCode=t,this.initPhoneFormatter(),this.onChange()},setRawValue:function(t){var e=this.properties;t=null!=t?t.toString():"",e.numeral&&(t=t.replace(".",e.numeralDecimalMark)),e.postDelimiterBackspace=!1,this.element.value=t,this.onInput(t)},getRawValue:function(){var t=this.properties,e=p.Util,n=this.element.value;return t.rawValueTrimPrefix&&(n=e.getPrefixStrippedValue(n,t.prefix,t.prefixLength,t.result,t.delimiter,t.delimiters)),n=t.numeral?t.numeralFormatter.getRawValue(n):e.stripDelimiters(n,t.delimiter,t.delimiters)},getISOFormatDate:function(){var t=this.properties;return t.date?t.dateFormatter.getISOFormatDate():""},getISOFormatTime:function(){var t=this.properties;return t.time?t.timeFormatter.getISOFormatTime():""},getFormattedValue:function(){return this.element.value},destroy:function(){var t=this;t.element.removeEventListener("input",t.onChangeListener),t.element.removeEventListener("keydown",t.onKeyDownListener),t.element.removeEventListener("focus",t.onFocusListener),t.element.removeEventListener("cut",t.onCutListener),t.element.removeEventListener("copy",t.onCopyListener)},toString:function(){return"[Cleave Object]"}},p.NumeralFormatter=i,p.DateFormatter=o,p.TimeFormatter=s,p.PhoneFormatter=l,p.CreditCardDetector=d,p.Util=h,p.DefaultProperties=f;var v=("object"==typeof n&&n?n:window).Cleave=p;m.a=v}).call(this,e(7))},,function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}},function(t,e,n){"use strict";var i=n(28),_=n.n(i),r=n(8),k=n.n(r),o=n(9),a=n.n(o),s=function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN},l=function(o){return 1===o.length&&(o=function(n){return function(t,e){return s(n(t),e)}}(o)),{left:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;o(t[r],e)<0?n=1+r:i=r}return n},right:function(t,e,n,i){for(null==n&&(n=0),null==i&&(i=t.length);n<i;){var r=n+i>>>1;0<o(t[r],e)?i=r:n=1+r}return n}}};var c=l(s),u=c.right,d=(c.left,u);var h=Array.prototype,f=(h.slice,h.map,Math.sqrt(50)),p=Math.sqrt(10),v=Math.sqrt(2),m=function(t,e,n){var i,r,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&0<n)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(a=g(t,e,n))||!isFinite(a))return[];if(0<a)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(r=Math.ceil(e-t+1));++s<r;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(r=Math.ceil(t-e+1));++s<r;)o[s]=(t-s)/a;return i&&o.reverse(),o};function g(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),o=i/Math.pow(10,r);return 0<=r?(f<=o?10:p<=o?5:v<=o?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(f<=o?10:p<=o?5:v<=o?2:1)}function y(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),o=i/r;return f<=o?r*=10:p<=o?r*=5:v<=o&&(r*=2),e<t?-r:r}function S(t,e){var n,i,r=t.length,o=-1;if(null==e){for(;++o<r;)if(null!=(n=t[o])&&n<=n)for(i=n;++o<r;)null!=(n=t[o])&&i<n&&(i=n)}else for(;++o<r;)if(null!=(n=e(t[o],o,t))&&n<=n)for(i=n;++o<r;)null!=(n=e(t[o],o,t))&&i<n&&(i=n);return i}function b(t,e){var n,i,r=t.length,o=-1;if(null==e){for(;++o<r;)if(null!=(n=t[o])&&n<=n)for(i=n;++o<r;)null!=(n=t[o])&&n<i&&(i=n)}else for(;++o<r;)if(null!=(n=e(t[o],o,t))&&n<=n)for(i=n;++o<r;)null!=(n=e(t[o],o,t))&&n<i&&(i=n);return i}var T=Array.prototype.slice,O=function(t){return t},M=1,D=2,C=3,L=4,A=1e-6;function I(t){return"translate("+(t+.5)+",0)"}function P(t){return"translate(0,"+(t+.5)+")"}function j(){return!this.__axis}function E(v,m){var g=[],y=null,b=null,w=6,_=6,k=3,x=v===M||v===L?-1:1,S=v===L||v===D?"x":"y",E=v===M||v===C?I:P;function e(t){var e=null==y?m.ticks?m.ticks.apply(m,g):m.domain():y,n=null==b?m.tickFormat?m.tickFormat.apply(m,g):O:b,i=Math.max(w,0)+k,r=m.range(),o=+r[0]+.5,a=+r[r.length-1]+.5,s=(m.bandwidth?function(e){var n=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(n=Math.round(n)),function(t){return+e(t)+n}}:function(e){return function(t){return+e(t)}})(m.copy()),l=t.selection?t.selection():t,c=l.selectAll(".domain").data([null]),u=l.selectAll(".tick").data(e,m).order(),d=u.exit(),h=u.enter().append("g").attr("class","tick"),f=u.select("line"),p=u.select("text");c=c.merge(c.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),u=u.merge(h),f=f.merge(h.append("line").attr("stroke","currentColor").attr(S+"2",x*w)),p=p.merge(h.append("text").attr("fill","currentColor").attr(S,x*i).attr("dy",v===M?"0em":v===C?"0.71em":"0.32em")),t!==l&&(c=c.transition(t),u=u.transition(t),f=f.transition(t),p=p.transition(t),d=d.transition(t).attr("opacity",A).attr("transform",function(t){return isFinite(t=s(t))?E(t):this.getAttribute("transform")}),h.attr("opacity",A).attr("transform",function(t){var e=this.parentNode.__axis;return E(e&&isFinite(e=e(t))?e:s(t))})),d.remove(),c.attr("d",v===L||v==D?_?"M"+x*_+","+o+"H0.5V"+a+"H"+x*_:"M0.5,"+o+"V"+a:_?"M"+o+","+x*_+"V0.5H"+a+"V"+x*_:"M"+o+",0.5H"+a),u.attr("opacity",1).attr("transform",function(t){return E(s(t))}),f.attr(S+"2",x*w),p.attr(S,x*i).text(n),l.filter(j).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",v===D?"start":v===L?"end":"middle"),l.each(function(){this.__axis=s})}return e.scale=function(t){return arguments.length?(m=t,e):m},e.ticks=function(){return g=T.call(arguments),e},e.tickArguments=function(t){return arguments.length?(g=null==t?[]:T.call(t),e):g.slice()},e.tickValues=function(t){return arguments.length?(y=null==t?null:T.call(t),e):y&&y.slice()},e.tickFormat=function(t){return arguments.length?(b=t,e):b},e.tickSize=function(t){return arguments.length?(w=_=+t,e):w},e.tickSizeInner=function(t){return arguments.length?(w=+t,e):w},e.tickSizeOuter=function(t){return arguments.length?(_=+t,e):_},e.tickPadding=function(t){return arguments.length?(k=+t,e):k},e}var w={value:function(){}};function N(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new B(i)}function B(t){this._=t}function F(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function R(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=w,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}B.prototype=N.prototype={constructor:B,on:function(t,e){var n,i=this._,r=function(t,i){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}(t+"",i),o=-1,a=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=r[o]).type)i[n]=R(i[n],t.name,e);else if(null==e)for(n in i)i[n]=R(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=r[o]).type)&&(n=F(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new B(t)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};var H=N;function z(){}function Y(t){return null==t?z:function(){return this.querySelector(t)}}function q(){return[]}function U(t){return null==t?q:function(){return this.querySelectorAll(t)}}function W(t){return function(){return this.matches(t)}}function V(t){return new Array(t.length)}function G(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}G.prototype={constructor:G,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function J(t,e,n,i,r,o){for(var a,s=0,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],i[s]=a):n[s]=new G(t,o[s]);for(;s<l;++s)(a=e[s])&&(r[s]=a)}function X(t,e,n,i,r,o,a){var s,l,c,u={},d=e.length,h=o.length,f=new Array(d);for(s=0;s<d;++s)(l=e[s])&&(f[s]=c="$"+a.call(l,l.__data__,s,e),c in u?r[s]=l:u[c]=l);for(s=0;s<h;++s)(l=u[c="$"+a.call(t,o[s],s,o)])?((i[s]=l).__data__=o[s],u[c]=null):n[s]=new G(t,o[s]);for(s=0;s<d;++s)(l=e[s])&&u[f[s]]===l&&(r[s]=l)}function Z(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}function $(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),K.hasOwnProperty(e)?{space:K[e],local:t}:t}var Q="http://www.w3.org/1999/xhtml",K={svg:"http://www.w3.org/2000/svg",xhtml:Q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var tt=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function et(t,e){return t.style.getPropertyValue(e)||tt(t).getComputedStyle(t,null).getPropertyValue(e)}function nt(t){return t.trim().split(/^|\s+/)}function it(t){return t.classList||new rt(t)}function rt(t){this._node=t,this._names=nt(t.getAttribute("class")||"")}function ot(t,e){for(var n=it(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function at(t,e){for(var n=it(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}rt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};function st(){this.textContent=""}function lt(){this.innerHTML=""}function ct(){this.nextSibling&&this.parentNode.appendChild(this)}function ut(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dt(t){var e=$(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===Q&&t.documentElement.namespaceURI===Q?t.createElement(n):t.createElementNS(e,n)}})(e)}function ht(){return null}function ft(){var t=this.parentNode;t&&t.removeChild(this)}function pt(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var mt={},gt=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(mt={mouseenter:"mouseover",mouseleave:"mouseout"}));function yt(n,t,e){return n=bt(n,t,e),function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function bt(n,i,r){return function(t){var e=gt;gt=t;try{n.call(this,this.__data__,i,r)}finally{gt=e}}}function wt(o){return function(){var t=this.__on;if(t){for(var e,n=0,i=-1,r=t.length;n<r;++n)e=t[n],o.type&&e.type!==o.type||e.name!==o.name?t[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?t.length=i:delete this.__on}}}function _t(l,c,u){var d=mt.hasOwnProperty(l.type)?yt:bt;return function(t,e,n){var i,r=this.__on,o=d(c,e,n);if(r)for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===l.type&&i.name===l.name)return this.removeEventListener(i.type,i.listener,i.capture),this.addEventListener(i.type,i.listener=o,i.capture=u),void(i.value=c);this.addEventListener(l.type,o,u),i={type:l.type,name:l.name,value:c,listener:o,capture:u},r?r.push(i):this.__on=[i]}}function kt(t,e,n){var i=tt(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}var xt=[null];function St(t,e){this._groups=t,this._parents=e}function Et(){return new St([[document.documentElement]],xt)}St.prototype=Et.prototype={constructor:St,select:function(t){"function"!=typeof t&&(t=Y(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a,s=e[r],l=s.length,c=i[r]=new Array(l),u=0;u<l;++u)(o=s[u])&&(a=t.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),c[u]=a);return new St(i,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=U(t));for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a,s=e[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(i.push(t.call(a,a.__data__,c,s)),r.push(a));return new St(i,r)},filter:function(t){"function"!=typeof t&&(t=W(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],s=a.length,l=i[r]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new St(i,this._parents)},data:function(t,e){if(!t)return f=new Array(this.size()),c=-1,this.each(function(t){f[++c]=t}),f;var n=e?X:J,i=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=r.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=i[c],d=r[c],h=d.length,f=t.call(u,u&&u.__data__,c,i),p=f.length,v=s[c]=new Array(p),m=a[c]=new Array(p);n(u,d,v,m,l[c]=new Array(h),f,e);for(var g,y,b=0,w=0;b<p;++b)if(g=v[b]){for(w<=b&&(w=b+1);!(y=m[w])&&++w<p;);g._next=y||null}}return(a=new St(a,i))._enter=s,a._exit=l,a},enter:function(){return new St(this._enter||this._groups.map(V),this._parents)},exit:function(){return new St(this._exit||this._groups.map(V),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,o=this.exit();return i="function"==typeof t?t(i):i.append(t+""),null!=e&&(r=e(r)),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l,c=e[s],u=n[s],d=c.length,h=a[s]=new Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(h[f]=l);for(;s<i;++s)a[s]=e[s];return new St(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,a=r[o];0<=--o;)(i=r[o])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n=n||Z;for(var e=this._groups,i=e.length,r=new Array(i),o=0;o<i;++o){for(var a,s=e[o],l=s.length,c=r[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new St(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],a=0,s=o.length;a<s;++a)(r=o[a])&&t.call(r,r.__data__,a,o);return this},attr:function(t,e){var n=$(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,i){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,i)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):et(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=nt(t+"");if(arguments.length<2){for(var i=it(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?ot:at)(this,t)}}:e?function(t){return function(){ot(this,t)}}:function(t){return function(){at(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?st:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?lt:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(ct)},lower:function(){return this.each(ut)},append:function(t){var e="function"==typeof t?t:dt(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:dt(t),i=null==e?ht:"function"==typeof e?e:Y(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(ft)},clone:function(t){return this.select(t?vt:pt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?_t:wt,null==n&&(n=!1),i=0;i<a;++i)this.each(s(o[i],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(i=0,l=s[c];i<a;++i)if((r=o[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return kt(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return kt(this,t,e)}})(t,e))}};var Tt=Et,Ot=function(t){return"string"==typeof t?new St([[document.querySelector(t)]],[document.documentElement]):new St([[t]],xt)};function Mt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Dt(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Ct(){}var Lt="\\s*([+-]?\\d+)\\s*",At="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",It="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pt=/^#([0-9a-f]{3,8})$/,jt=new RegExp("^rgb\\("+[Lt,Lt,Lt]+"\\)$"),Nt=new RegExp("^rgb\\("+[It,It,It]+"\\)$"),Bt=new RegExp("^rgba\\("+[Lt,Lt,Lt,At]+"\\)$"),Ft=new RegExp("^rgba\\("+[It,It,It,At]+"\\)$"),Rt=new RegExp("^hsl\\("+[At,It,It]+"\\)$"),Ht=new RegExp("^hsla\\("+[At,It,It,At]+"\\)$"),zt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Yt(){return this.rgb().formatHex()}function qt(){return this.rgb().formatRgb()}function Ut(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Pt.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Wt(e):3===n?new Jt(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?new Jt(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?new Jt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=jt.exec(t))?new Jt(e[1],e[2],e[3],1):(e=Nt.exec(t))?new Jt(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Bt.exec(t))?Vt(e[1],e[2],e[3],e[4]):(e=Ft.exec(t))?Vt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Rt.exec(t))?Qt(e[1],e[2]/100,e[3]/100,1):(e=Ht.exec(t))?Qt(e[1],e[2]/100,e[3]/100,e[4]):zt.hasOwnProperty(t)?Wt(zt[t]):"transparent"===t?new Jt(NaN,NaN,NaN,0):null}function Wt(t){return new Jt(t>>16&255,t>>8&255,255&t,1)}function Vt(t,e,n,i){return i<=0&&(t=e=n=NaN),new Jt(t,e,n,i)}function Gt(t,e,n,i){return 1===arguments.length?function(t){return t instanceof Ct||(t=Ut(t)),t?new Jt((t=t.rgb()).r,t.g,t.b,t.opacity):new Jt}(t):new Jt(t,e,n,null==i?1:i)}function Jt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Xt(){return"#"+$t(this.r)+$t(this.g)+$t(this.b)}function Zt(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function $t(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Qt(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new te(t,e,n,i)}function Kt(t){if(t instanceof te)return new te(t.h,t.s,t.l,t.opacity);if(t instanceof Ct||(t=Ut(t)),!t)return new te;if(t instanceof te)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,s=o-r,l=(o+r)/2;return s?(a=e===o?(n-i)/s+6*(n<i):n===o?(i-e)/s+2:(e-n)/s+4,s/=l<.5?o+r:2-o-r,a*=60):s=0<l&&l<1?0:a,new te(a,s,l,t.opacity)}function te(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function ee(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function ne(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}Mt(Ct,Ut,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Yt,formatHex:Yt,formatHsl:function(){return Kt(this).formatHsl()},formatRgb:qt,toString:qt}),Mt(Jt,Gt,Dt(Ct,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Jt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Jt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xt,formatHex:Xt,formatRgb:Zt,toString:Zt})),Mt(te,function(t,e,n,i){return 1===arguments.length?Kt(t):new te(t,e,n,null==i?1:i)},Dt(Ct,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new te(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new te(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Jt(ee(240<=t?t-240:120+t,r,i),ee(t,r,i),ee(t<120?240+t:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var ie=function(t){return function(){return t}};function re(e,n){return function(t){return e+t*n}}function oe(n){return 1==(n=+n)?ae:function(t,e){return e-t?function(e,n,i){return e=Math.pow(e,i),n=Math.pow(n,i)-e,i=1/i,function(t){return Math.pow(e+t*n,i)}}(t,e,n):ie(isNaN(t)?e:t)}}function ae(t,e){var n=e-t;return n?re(t,n):ie(isNaN(t)?e:t)}var se=function t(e){var a=oe(e);function n(e,t){var n=a((e=Gt(e)).r,(t=Gt(t)).r),i=a(e.g,t.g),r=a(e.b,t.b),o=ae(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=r(t),e.opacity=o(t),e+""}}return n.gamma=t,n}(1);function le(s){return function(t){var e,n,i=t.length,r=new Array(i),o=new Array(i),a=new Array(i);for(e=0;e<i;++e)n=Gt(t[e]),r[e]=n.r||0,o[e]=n.g||0,a[e]=n.b||0;return r=s(r),o=s(o),a=s(a),n.opacity=1,function(t){return n.r=r(t),n.g=o(t),n.b=a(t),n+""}}}function ce(e,n){n=n||[];var i,r=e?Math.min(n.length,e.length):0,o=n.slice();return function(t){for(i=0;i<r;++i)o[i]=e[i]*(1-t)+n[i]*t;return o}}le(function(a){var s=a.length-1;return function(t){var e=t<=0?t=0:1<=t?s-(t=1):Math.floor(t*s),n=a[e],i=a[e+1],r=0<e?a[e-1]:2*n-i,o=e<s-1?a[e+2]:2*i-n;return ne((t-e/s)*s,r,n,i,o)}}),le(function(a){var s=a.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*s),n=a[(e+s-1)%s],i=a[e%s],r=a[(e+1)%s],o=a[(e+2)%s];return ne((t-e/s)*s,n,i,r,o)}});function ue(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function de(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,o=new Array(r),a=new Array(i);for(n=0;n<r;++n)o[n]=ye(t[n],e[n]);for(;n<i;++n)a[n]=e[n];return function(t){for(n=0;n<r;++n)a[n]=o[n](t);return a}}var he=function(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}},fe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pe=new RegExp(fe.source,"g");function ve(t,i){var e,n,r,o=fe.lastIndex=pe.lastIndex=0,a=-1,s=[],l=[];for(t+="",i+="";(e=fe.exec(t))&&(n=pe.exec(i));)(r=n.index)>o&&(r=i.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(e=e[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,l.push({i:a,x:he(e,n)})),o=pe.lastIndex;return o<i.length&&(r=i.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(t){return function(){return t}}(i):(i=l.length,function(t){for(var e,n=0;n<i;++n)s[(e=l[n]).i]=e.x(t);return s.join("")})}var me,ge,ye=function(t,e){var n,i=typeof e;return null==e||"boolean"==i?ie(e):("number"==i?he:"string"==i?(n=Ut(e))?(e=n,se):ve:e instanceof Ut?se:e instanceof Date?function(e,n){var i=new Date;return e=+e,n=+n,function(t){return i.setTime(e*(1-t)+n*t),i}}:ue(e)?ce:Array.isArray(e)?de:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=ye(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}:he)(t,e)},be=0,we=0,_e=0,ke=1e3,xe=0,Se=0,Ee=0,Te="object"==typeof performance&&performance.now?performance:Date,Oe="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Me(){return Se||(Oe(De),Se=Te.now()+Ee)}function De(){Se=0}function Ce(){this._call=this._time=this._next=null}function Le(t,e,n){var i=new Ce;return i.restart(t,e,n),i}function Ae(){Se=(xe=Te.now())+Ee,be=we=0;try{!function(){Me(),++be;for(var t,e=me;e;)0<=(t=Se-e._time)&&e._call.call(null,t),e=e._next;--be}()}finally{be=0,function(){var t,e,n=me,i=1/0;for(;n;)n=n._call?(i>n._time&&(i=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:me=e);ge=t,Pe(i)}(),Se=0}}function Ie(){var t=Te.now(),e=t-xe;ke<e&&(Ee-=e,xe=t)}function Pe(t){be||(we=we&&clearTimeout(we),24<t-Se?(t<1/0&&(we=setTimeout(Ae,t-Te.now()-Ee)),_e=_e&&clearInterval(_e)):(_e||(xe=Te.now(),_e=setInterval(Ie,ke)),be=1,Oe(Ae)))}Ce.prototype=Le.prototype={constructor:Ce,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Me():+n)+(null==e?0:+e),this._next||ge===this||(ge?ge._next=this:me=this,ge=this),this._call=t,this._time=n,Pe()},stop:function(){this._call&&(this._call=null,this._time=1/0,Pe())}};function je(e,n,t){var i=new Ce;return n=null==n?0:+n,i.restart(function(t){i.stop(),e(t+n)},n,t),i}function Ne(t,e,n,i,r,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(o,a,s){var l,c=o.__transition;function u(t){var e,n,i,r;if(1!==s.state)return h();for(e in c)if((r=c[e]).name===s.name){if(r.state===He)return je(u);4===r.state?(r.state=6,r.timer.stop(),r.on.call("interrupt",o,o.__data__,r.index,r.group),delete c[e]):+e<a&&(r.state=6,r.timer.stop(),r.on.call("cancel",o,o.__data__,r.index,r.group),delete c[e])}if(je(function(){s.state===He&&(s.state=4,s.timer.restart(d,s.delay,s.time),d(t))}),s.state=2,s.on.call("start",o,o.__data__,s.index,s.group),2===s.state){for(s.state=He,l=new Array(i=s.tween.length),e=0,n=-1;e<i;++e)(r=s.tween[e].value.call(o,o.__data__,s.index,s.group))&&(l[++n]=r);l.length=n+1}}function d(t){for(var e=t<s.duration?s.ease.call(null,t/s.duration):(s.timer.restart(h),s.state=5,1),n=-1,i=l.length;++n<i;)l[n].call(o,e);5===s.state&&(s.on.call("end",o,o.__data__,s.index,s.group),h())}function h(){for(var t in s.state=6,s.timer.stop(),delete c[a],c)return;delete o.__transition}(c[a]=s).timer=Le(function(t){s.state=1,s.timer.restart(u,s.delay,s.time),s.delay<=t&&u(t-s.delay)},0,s.time)}(t,n,{name:e,index:i,group:r,on:Be,tween:Fe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Re})}var Be=H("start","end","cancel","interrupt"),Fe=[],Re=0,He=3;function ze(t,e){var n=qe(t,e);if(n.state>Re)throw new Error("too late; already scheduled");return n}function Ye(t,e){var n=qe(t,e);if(n.state>He)throw new Error("too late; already running");return n}function qe(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ue(t,e,n,i,r,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,l/=s),t*i<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Ze,skewX:Math.atan(l)*Ze,scaleX:a,scaleY:s}}var We,Ve,Ge,Je,Xe=function(t,e){var n,i,r,o=t.__transition,a=!0;if(o){for(r in e=null==e?null:e+"",o)(n=o[r]).name===e?(i=2<n.state&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[r]):a=!1;a&&delete t.__transition}},Ze=180/Math.PI,$e={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qe(n,s,l,a){function c(t){return t.length?t.pop()+" ":""}return function(t,e){var r=[],o=[];return t=n(t),e=n(e),function(t,e,n,i,r,o){if(t!==n||e!==i){var a=r.push("translate(",null,s,null,l);o.push({i:a-4,x:he(t,n)},{i:a-2,x:he(e,i)})}else(n||i)&&r.push("translate("+n+s+i+l)}(t.translateX,t.translateY,e.translateX,e.translateY,r,o),function(t,e,n,i){t!==e?(180<t-e?e+=360:180<e-t&&(t+=360),i.push({i:n.push(c(n)+"rotate(",null,a)-2,x:he(t,e)})):e&&n.push(c(n)+"rotate("+e+a)}(t.rotate,e.rotate,r,o),function(t,e,n,i){t!==e?i.push({i:n.push(c(n)+"skewX(",null,a)-2,x:he(t,e)}):e&&n.push(c(n)+"skewX("+e+a)}(t.skewX,e.skewX,r,o),function(t,e,n,i,r,o){if(t!==n||e!==i){var a=r.push(c(r)+"scale(",null,",",null,")");o.push({i:a-4,x:he(t,n)},{i:a-2,x:he(e,i)})}else 1===n&&1===i||r.push(c(r)+"scale("+n+","+i+")")}(t.scaleX,t.scaleY,e.scaleX,e.scaleY,r,o),t=e=null,function(t){for(var e,n=-1,i=o.length;++n<i;)r[(e=o[n]).i]=e.x(t);return r.join("")}}}var Ke=Qe(function(t){return"none"===t?$e:(We||(We=document.createElement("DIV"),Ve=document.documentElement,Ge=document.defaultView),We.style.transform=t,t=Ge.getComputedStyle(Ve.appendChild(We),null).getPropertyValue("transform"),Ve.removeChild(We),t=t.slice(7,-1).split(","),Ue(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),tn=Qe(function(t){return null==t?$e:((Je=Je||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=Je.transform.baseVal.consolidate())?(t=t.matrix,Ue(t.a,t.b,t.c,t.d,t.e,t.f)):$e)},", ",")",")");function en(t,e,n){var i=t._id;return t.each(function(){var t=Ye(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return qe(t,i).value[e]}}function nn(t,e){var n;return("number"==typeof e?he:e instanceof Ut?se:(n=Ut(e))?(e=n,se):ve)(t,e)}function rn(e,n){var i,r;function t(){var t=n.apply(this,arguments);return t!==r&&(i=(r=t)&&function(e,n){return function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}}(e,t)),i}return t._value=n,t}function on(e,n){var i,r;function t(){var t=n.apply(this,arguments);return t!==r&&(i=(r=t)&&function(e,n){return function(t){this.setAttribute(e,n.call(this,t))}}(e,t)),i}return t._value=n,t}function an(n,i,r){var o,a,s=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return 0<=e&&(t=t.slice(0,e)),!t||"start"===t})}(i)?ze:Ye;return function(){var t=s(this,n),e=t.on;e!==o&&(a=(o=e).copy()).on(i,r),t.on=a}}var sn=Tt.prototype.constructor;function ln(t){return function(){this.style.removeProperty(t)}}function cn(e,n,i){var r,o;function t(){var t=n.apply(this,arguments);return t!==o&&(r=(o=t)&&function(e,n,i){return function(t){this.style.setProperty(e,n.call(this,t),i)}}(e,t,i)),r}return t._value=n,t}function un(e){var n,i;function t(){var t=e.apply(this,arguments);return t!==i&&(n=(i=t)&&function(e){return function(t){this.textContent=e.call(this,t)}}(t)),n}return t._value=e,t}var dn=0;function hn(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function fn(){return++dn}var pn=Tt.prototype;hn.prototype={constructor:hn,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Y(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var s,l,c=i[a],u=c.length,d=o[a]=new Array(u),h=0;h<u;++h)(s=c[h])&&(l=t.call(s,s.__data__,h,c))&&("__data__"in s&&(l.__data__=s.__data__),d[h]=l,Ne(d[h],e,n,h,d,qe(s,n)));return new hn(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=U(t));for(var i=this._groups,r=i.length,o=[],a=[],s=0;s<r;++s)for(var l,c=i[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var h,f=t.call(l,l.__data__,d,c),p=qe(l,n),v=0,m=f.length;v<m;++v)(h=f[v])&&Ne(h,e,n,v,f,p);o.push(f),a.push(l)}return new hn(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=W(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],s=a.length,l=i[r]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new hn(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var l,c=e[s],u=n[s],d=c.length,h=a[s]=new Array(d),f=0;f<d;++f)(l=c[f]||u[f])&&(h[f]=l);for(;s<i;++s)a[s]=e[s];return new hn(a,this._parents,this._name,this._id)},selection:function(){return new sn(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=fn(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=qe(a,e);Ne(a,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new hn(i,this._parents,t,n)},call:pn.call,nodes:pn.nodes,node:pn.node,size:pn.size,empty:pn.empty,each:pn.each,on:function(t,e){var n=this._id;return arguments.length<2?qe(this.node(),n).on.on(t):this.each(an(n,t,e))},attr:function(t,e){var n=$(t),i="transform"===n?tn:nn;return this.attrTween(t,"function"==typeof e?(n.local?function(i,r,o){var a,s,l;return function(){var t,e,n=o(this);if(null!=n)return(t=this.getAttributeNS(i.space,i.local))===(e=n+"")?null:t===a&&e===s?l:(s=e,l=r(a=t,n));this.removeAttributeNS(i.space,i.local)}}:function(i,r,o){var a,s,l;return function(){var t,e,n=o(this);if(null!=n)return(t=this.getAttribute(i))===(e=n+"")?null:t===a&&e===s?l:(s=e,l=r(a=t,n));this.removeAttribute(i)}})(n,i,en(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,i){var r,o,a=i+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===a?null:t===r?o:o=n(r=t,i)}}:function(e,n,i){var r,o,a=i+"";return function(){var t=this.getAttribute(e);return t===a?null:t===r?o:o=n(r=t,i)}})(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=$(t);return this.tween(n,(i.local?rn:on)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Ke:nn;return null==e?this.styleTween(t,function(n,i){var r,o,a;return function(){var t=et(this,n),e=(this.style.removeProperty(n),et(this,n));return t===e?null:t===r&&e===o?a:a=i(r=t,o=e)}}(t,i)).on("end.style."+t,ln(t)):"function"==typeof e?this.styleTween(t,function(i,r,o){var a,s,l;return function(){var t=et(this,i),e=o(this),n=e+"";return null==e&&(this.style.removeProperty(i),n=e=et(this,i)),t===n?null:t===a&&n===s?l:(s=n,l=r(a=t,e))}}(t,i,en(this,"style."+t,e))).each(function(i,r){var o,a,s,l,c="style."+r,u="end."+c;return function(){var t=Ye(this,i),e=t.on,n=null==t.value[c]?l=l||ln(r):void 0;e===o&&s===n||(a=(o=e).copy()).on(u,s=n),t.on=a}}(this._id,t)):this.styleTween(t,function(e,n,i){var r,o,a=i+"";return function(){var t=et(this,e);return t===a?null:t===r?o:o=n(r=t,i)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,cn(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(en(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,un(t))},remove:function(){return this.on("end.remove",function(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=qe(this.node(),n).tween,o=0,a=r.length;o<a;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?function(r,o){var a,s;return function(){var t=Ye(this,r),e=t.tween;if(e!==a)for(var n=0,i=(s=a=e).length;n<i;++n)if(s[n].name===o){(s=s.slice()).splice(n,1);break}t.tween=s}}:function(o,a,s){var l,c;if("function"!=typeof s)throw new Error;return function(){var t=Ye(this,o),e=t.tween;if(e!==l){c=(l=e).slice();for(var n={name:a,value:s},i=0,r=c.length;i<r;++i)if(c[i].name===a){c[i]=n;break}i===r&&c.push(n)}t.tween=c}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){ze(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){ze(this,t).delay=e}})(e,t)):qe(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Ye(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Ye(this,t).duration=e}})(e,t)):qe(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Ye(this,t).ease=e}}(e,t)):qe(this.node(),e).ease},end:function(){var r,o,a=this,s=a._id,l=a.size();return new Promise(function(t,e){var n={value:e},i={value:function(){0==--l&&t()}};a.each(function(){var t=Ye(this,s),e=t.on;e!==r&&((o=(r=e).copy())._.cancel.push(n),o._.interrupt.push(n),o._.end.push(i)),t.on=o})})}};var vn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function mn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return vn.time=Me(),vn;return n}Tt.prototype.interrupt=function(t){return this.each(function(){Xe(this,t)})},Tt.prototype.transition=function(t){var e,n;t=t instanceof hn?(e=t._id,t._name):(e=fn(),(n=vn).time=Me(),null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],l=s.length,c=0;c<l;++c)(a=s[c])&&Ne(a,t,e,c,s,n||mn(a,e));return new hn(i,this._parents,t,e)};function gn(t){return[+t[0],+t[1]]}function yn(t){return[gn(t[0]),gn(t[1])]}["w","e"].map(bn),["n","s"].map(bn),["n","w","e","s","nw","ne","sw","se"].map(bn);function bn(t){return{type:t}}Math.cos,Math.sin,Math.PI,Math.max;Array.prototype.slice;var wn=Math.PI,_n=2*wn,kn=1e-6,xn=_n-kn;function Sn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}Sn.prototype={constructor:Sn,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var o=this._x1,a=this._y1,s=n-t,l=i-e,c=o-t,u=a-e,d=c*c+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(kn<d)if(Math.abs(u*s-l*c)>kn&&r){var h=n-o,f=i-a,p=s*s+l*l,v=h*h+f*f,m=Math.sqrt(p),g=Math.sqrt(d),y=r*Math.tan((wn-Math.acos((p+d-v)/(2*m*g)))/2),b=y/g,w=y/m;Math.abs(b-1)>kn&&(this._+="L"+(t+b*c)+","+(e+b*u)),this._+="A"+r+","+r+",0,0,"+ +(c*f<u*h)+","+(this._x1=t+w*s)+","+(this._y1=e+w*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,r,o){t=+t,e=+e,o=!!o;var a=(n=+n)*Math.cos(i),s=n*Math.sin(i),l=t+a,c=e+s,u=1^o,d=o?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>kn||Math.abs(this._y1-c)>kn)&&(this._+="L"+l+","+c),n&&(d<0&&(d=d%_n+_n),xn<d?this._+="A"+n+","+n+",0,1,"+u+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):kn<d&&(this._+="A"+n+","+n+",0,"+ +(wn<=d)+","+u+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var En="$";function Tn(){}function On(t,e){var n=new Tn;if(t instanceof Tn)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,r=-1,o=t.length;if(null==e)for(;++r<o;)n.set(r,t[r]);else for(;++r<o;)n.set(e(i=t[r],r,t),i)}else if(t)for(var a in t)n.set(a,t[a]);return n}Tn.prototype=On.prototype={constructor:Tn,has:function(t){return En+t in this},get:function(t){return this[En+t]},set:function(t,e){return this[En+t]=e,this},remove:function(t){var e=En+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===En&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===En&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===En&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===En&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===En&&++t;return t},empty:function(){for(var t in this)if(t[0]===En)return!1;return!0},each:function(t){for(var e in this)e[0]===En&&t(this[e],e.slice(1),this)}};var Mn=On;function Dn(){}var Cn=Mn.prototype;Dn.prototype={constructor:Dn,has:Cn.has,add:function(t){return this[En+(t+="")]=t,this},remove:Cn.remove,clear:Cn.clear,values:Cn.keys,size:Cn.size,empty:Cn.empty,each:Cn.each};Array.prototype.slice;var Ln={},An={};function In(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function Pn(t){var n=Object.create(null),i=[];return t.forEach(function(t){for(var e in t)e in n||i.push(n[e]=e)}),i}function jn(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function Nn(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+jn(-t,6):9999<t?"+"+jn(t,6):jn(t,4)}(t.getUTCFullYear())+"-"+jn(t.getUTCMonth()+1,2)+"-"+jn(t.getUTCDate(),2)+(r?"T"+jn(e,2)+":"+jn(n,2)+":"+jn(i,2)+"."+jn(r,3)+"Z":i?"T"+jn(e,2)+":"+jn(n,2)+":"+jn(i,2)+"Z":n||e?"T"+jn(e,2)+":"+jn(n,2)+"Z":"")}var Bn=function(i){var e=new RegExp('["'+i+"\n\r]"),d=i.charCodeAt(0);function o(i,t){var e,n=[],r=i.length,o=0,a=0,s=r<=0,l=!1;function c(){if(s)return An;if(l)return l=!1,Ln;var t,e,n=o;if(34===i.charCodeAt(n)){for(;o++<r&&34!==i.charCodeAt(o)||34===i.charCodeAt(++o););return(t=o)>=r?s=!0:10===(e=i.charCodeAt(o++))?l=!0:13===e&&(l=!0,10===i.charCodeAt(o)&&++o),i.slice(n+1,t-1).replace(/""/g,'"')}for(;o<r;){if(10===(e=i.charCodeAt(t=o++)))l=!0;else if(13===e)l=!0,10===i.charCodeAt(o)&&++o;else if(e!==d)continue;return i.slice(n,t)}return s=!0,i.slice(n,r)}for(10===i.charCodeAt(r-1)&&--r,13===i.charCodeAt(r-1)&&--r;(e=c())!==An;){for(var u=[];e!==Ln&&e!==An;)u.push(e),e=c();t&&null==(u=t(u,a++))||n.push(u)}return n}function n(t,n){return t.map(function(e){return n.map(function(t){return a(e[t])}).join(i)})}function r(t){return t.map(a).join(i)}function a(t){return null==t?"":t instanceof Date?Nn(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var i,r,e=o(t,function(t,e){if(i)return i(t,e-1);r=t,i=n?function(n,i){var r=In(n);return function(t,e){return i(r(t),e,n)}}(t,n):In(t)});return e.columns=r||[],e},parseRows:o,format:function(t,e){return null==e&&(e=Pn(t)),[e.map(a).join(i)].concat(n(t,e)).join("\n")},formatBody:function(t,e){return null==e&&(e=Pn(t)),n(t,e).join("\n")},formatRows:function(t){return t.map(r).join("\n")},formatRow:r,formatValue:a}},Fn=Bn(","),Rn=Fn.parse,Hn=(Fn.parseRows,Fn.format,Fn.formatBody,Fn.formatRows,Fn.formatRow,Fn.formatValue,Bn("\t")),zn=Hn.parse;Hn.parseRows,Hn.format,Hn.formatBody,Hn.formatRows,Hn.formatRow,Hn.formatValue;function Yn(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var qn=function(t,e){return fetch(t,e).then(Yn)};function Un(i){return function(t,e,n){return 2===arguments.length&&"function"==typeof e&&(n=e,e=void 0),qn(t,e).then(function(t){return i(t,n)})}}Un(Rn),Un(zn);function Wn(n){return function(t,e){return qn(t,e).then(function(t){return(new DOMParser).parseFromString(t,n)})}}Wn("application/xml"),Wn("text/html"),Wn("image/svg+xml");function Vn(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,o,a,s,l,c,u,d,h,f=t._root,p={data:i},v=t._x0,m=t._y0,g=t._x1,y=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((c=e>=(o=(v+g)/2))?v=o:g=o,(u=n>=(a=(m+y)/2))?m=a:y=a,!(f=(r=f)[d=u<<1|c]))return r[d]=p,t;if(s=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===s&&n===l)return p.next=f,r?r[d]=p:t._root=p,t;for(;r=r?r[d]=new Array(4):t._root=new Array(4),(c=e>=(o=(v+g)/2))?v=o:g=o,(u=n>=(a=(m+y)/2))?m=a:y=a,(d=u<<1|c)==(h=(a<=l)<<1|o<=s););return r[h]=f,r[d]=p,t}function Gn(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function Jn(t,e,n,i,r,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function Xn(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Zn=Jn.prototype;Zn.copy=function(){var t,e,n=new Jn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=Xn(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=Xn(e));return n},Zn.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Vn(this.cover(e,n),e,n,t)},Zn.addAll=function(t){var e,n,i,r,o=t.length,a=new Array(o),s=new Array(o),l=1/0,c=1/0,u=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||((a[n]=i)<l&&(l=i),u<i&&(u=i),(s[n]=r)<c&&(c=r),d<r&&(d=r));if(u<l||d<c)return this;for(this.cover(l,c).cover(u,d),n=0;n<o;++n)Vn(this,a[n],s[n],t[n]);return this},Zn.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{for(var a,s,l=r-n,c=this._root;t<n||r<=t||e<i||o<=e;)switch(s=(e<i)<<1|t<n,(a=new Array(4))[s]=c,c=a,l*=2,s){case 0:r=n+l,o=i+l;break;case 1:n=r-l,o=i+l;break;case 2:r=n+l,i=o-l;break;case 3:n=r-l,i=o-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this},Zn.data=function(){var e=[];return this.visit(function(t){if(!t.length)for(;e.push(t.data),t=t.next;);}),e},Zn.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Zn.find=function(t,e,n){var i,r,o,a,s,l,c,u=this._x0,d=this._y0,h=this._x1,f=this._y1,p=[],v=this._root;for(v&&p.push(new Gn(v,u,d,h,f)),null==n?n=1/0:(u=t-n,d=e-n,h=t+n,f=e+n,n*=n);l=p.pop();)if(!(!(v=l.node)||(r=l.x0)>h||(o=l.y0)>f||(a=l.x1)<u||(s=l.y1)<d))if(v.length){var m=(r+a)/2,g=(o+s)/2;p.push(new Gn(v[3],m,g,a,s),new Gn(v[2],r,g,m,s),new Gn(v[1],m,o,a,g),new Gn(v[0],r,o,m,g)),(c=(g<=e)<<1|m<=t)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var y=t-this._x.call(null,v.data),b=e-this._y.call(null,v.data),w=y*y+b*b;if(w<n){var _=Math.sqrt(n=w);u=t-_,d=e-_,h=t+_,f=e+_,i=v.data}}return i},Zn.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,i,r,o,a,s,l,c,u,d,h,f=this._root,p=this._x0,v=this._y0,m=this._x1,g=this._y1;if(!f)return this;if(f.length)for(;;){if((c=o>=(s=(p+m)/2))?p=s:m=s,(u=a>=(l=(v+g)/2))?v=l:g=l,!(f=(e=f)[d=u<<1|c]))return this;if(!f.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(n=e,h=d)}for(;f.data!==t;)if(!(f=(i=f).next))return this;return(r=f.next)&&delete f.next,i?r?i.next=r:delete i.next:e?(r?e[d]=r:delete e[d],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[h]=f:this._root=f)):this._root=r,this},Zn.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Zn.root=function(){return this._root},Zn.size=function(){var e=0;return this.visit(function(t){if(!t.length)for(;++e,t=t.next;);}),e},Zn.visit=function(t){var e,n,i,r,o,a,s=[],l=this._root;for(l&&s.push(new Gn(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,i=e.x0,r=e.y0,o=e.x1,a=e.y1)&&l.length){var c=(i+o)/2,u=(r+a)/2;(n=l[3])&&s.push(new Gn(n,c,u,o,a)),(n=l[2])&&s.push(new Gn(n,i,u,c,a)),(n=l[1])&&s.push(new Gn(n,c,r,o,u)),(n=l[0])&&s.push(new Gn(n,i,r,c,u))}return this},Zn.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new Gn(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var o,a=e.x0,s=e.y0,l=e.x1,c=e.y1,u=(a+l)/2,d=(s+c)/2;(o=r[0])&&n.push(new Gn(o,a,s,u,d)),(o=r[1])&&n.push(new Gn(o,u,s,l,d)),(o=r[2])&&n.push(new Gn(o,a,d,u,c)),(o=r[3])&&n.push(new Gn(o,u,d,l,c))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Zn.x=function(t){return arguments.length?(this._x=t,this):this._x},Zn.y=function(t){return arguments.length?(this._y=t,this):this._y};function $n(){return Math.random()}Math.PI,Math.sqrt(5),function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return n()*e+t}}return e.source=t,e}($n);var Qn=function t(o){function e(e,n){var i,r;return e=null==e?0:+e,n=null==n?1:+n,function(){var t;if(null!=i)t=i,i=null;else for(;i=2*o()-1,t=2*o()-1,!(r=i*i+t*t)||1<r;);return e+n*t*Math.sqrt(-2*Math.log(r)/r)}}return e.source=t,e}($n),Kn=(function t(e){function n(){var t=Qn.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}($n),function t(i){function e(n){return function(){for(var t=0,e=0;e<n;++e)t+=i();return t}}return e.source=t,e}($n));(function t(n){function e(t){var e=Kn.source(n)(t);return function(){return e()/t}}return e.source=t,e})($n),function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}($n);function ti(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var ei=Array.prototype,ni=ei.map,ii=ei.slice;var ri=function(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}},oi=function(t){return function(){return t}},ai=function(t){return+t},si=[0,1];function li(t){return t}function ci(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:oi(isNaN(n)?NaN:.5)}function ui(t){var e,n=t[0],i=t[t.length-1];return i<n&&(e=n,n=i,i=e),function(t){return Math.max(n,Math.min(i,t))}}function di(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return o=r<i?(i=ci(r,i),n(a,o)):(i=ci(i,r),n(o,a)),function(t){return o(i(t))}}function hi(n,t,e){var i=Math.min(n.length,t.length)-1,r=new Array(i),o=new Array(i),a=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<i;)r[a]=ci(n[a],n[a+1]),o[a]=e(t[a],t[a+1]);return function(t){var e=d(n,t,1,i)-1;return o[e](r[e](t))}}function fi(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function pi(){var n,i,e,r,o,a,s=si,l=si,c=ye,u=li;function d(){return r=2<Math.min(s.length,l.length)?hi:di,o=a=null,h}function h(t){return isNaN(t=+t)?e:(o=o||r(s.map(n),l,c))(n(u(t)))}return h.invert=function(t){return u(i((a=a||r(l,s.map(n),he))(t)))},h.domain=function(t){return arguments.length?(s=ni.call(t,ai),u===li||(u=ui(s)),d()):s.slice()},h.range=function(t){return arguments.length?(l=ii.call(t),d()):l.slice()},h.rangeRound=function(t){return l=ii.call(t),c=ri,d()},h.clamp=function(t){return arguments.length?(u=t?ui(s):li,h):u!==li},h.interpolate=function(t){return arguments.length?(c=t,d()):c},h.unknown=function(t){return arguments.length?(e=t,h):e},function(t,e){return n=t,i=e,d()}}function vi(t,e){return pi()(t,e)}var mi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gi(t){if(!(e=mi.exec(t)))throw new Error("invalid format: "+t);var e;return new yi({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function yi(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}gi.prototype=yi.prototype,yi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function bi(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[1<i.length?i[0]+i.slice(2):i,+t.slice(n+1)]}function wi(t){return(t=bi(Math.abs(t)))?t[1]:NaN}function _i(t,e){var n=bi(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}function ki(t){return t}var xi,Si,Ei,Ti,Oi={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return _i(100*t,e)},r:_i,s:function(t,e){var n=bi(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(xi=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=i.length;return o===a?i:a<o?i+new Array(o-a+1).join("0"):0<o?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+bi(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Mi=Array.prototype.map,Di=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];Si=function(t){var k=void 0===t.grouping||void 0===t.thousands?ki:function(s,l){return function(t,e){for(var n=t.length,i=[],r=0,o=s[0],a=0;0<n&&0<o&&(e<a+o+1&&(o=Math.max(1,e-a)),i.push(t.substring(n-=o,n+o)),!((a+=o+1)>e));)o=s[r=(r+1)%s.length];return i.reverse().join(l)}}(Mi.call(t.grouping,Number),t.thousands+""),i=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",x=void 0===t.decimal?".":t.decimal+"",S=void 0===t.numerals?ki:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(Mi.call(t.numerals,String)),o=void 0===t.percent?"%":t.percent+"",E=void 0===t.minus?"-":t.minus+"",T=void 0===t.nan?"NaN":t.nan+"";function a(t){var c=(t=gi(t)).fill,u=t.align,d=t.sign,e=t.symbol,h=t.zero,f=t.width,p=t.comma,v=t.precision,m=t.trim,g=t.type;"n"===g?(p=!0,g="g"):Oi[g]||(void 0===v&&(v=12),m=!0,g="g"),(h||"0"===c&&"="===u)&&(h=!0,c="0",u="=");var y="$"===e?i:"#"===e&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===e?r:/[%p]/.test(g)?o:"",w=Oi[g],_=/[defgprs%]/.test(g);function n(t){var e,n,i,r=y,o=b;if("c"===g)o=w(t)+o,t="";else{var a=(t=+t)<0;if(t=isNaN(t)?T:w(Math.abs(t),v),m&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(0<r){if(!+t[i])break t;r=0}}return 0<r?t.slice(0,r)+t.slice(e+1):t}(t)),a&&0==+t&&(a=!1),r=(a?"("===d?d:E:"-"===d||"("===d?"":d)+r,o=("s"===g?Di[8+xi/3]:"")+o+(a&&"("===d?")":""),_)for(e=-1,n=t.length;++e<n;)if((i=t.charCodeAt(e))<48||57<i){o=(46===i?x+t.slice(e+1):t.slice(e))+o,t=t.slice(0,e);break}}p&&!h&&(t=k(t,1/0));var s=r.length+t.length+o.length,l=s<f?new Array(f-s+1).join(c):"";switch(p&&h&&(t=k(l+t,l.length?f-o.length:1/0),l=""),u){case"<":t=r+t+o+l;break;case"=":t=r+l+t+o;break;case"^":t=l.slice(0,s=l.length>>1)+r+t+o+l.slice(s);break;default:t=l+r+t+o}return S(t)}return v=void 0===v?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),n.toString=function(){return t+""},n}return{format:a,formatPrefix:function(t,e){var n=a(((t=gi(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(wi(e)/3))),r=Math.pow(10,-i),o=Di[8+i/3];return function(t){return n(r*t)+o}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Ei=Si.format,Ti=Si.formatPrefix;var Ci=function(t,e,n,i){var r,o=y(t,e,n);switch((i=gi(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(wi(e)/3)))-wi(Math.abs(t)))}(o,a))||(i.precision=r),Ti(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,wi(e)-wi(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=function(t){return Math.max(0,-wi(Math.abs(t)))}(o))||(i.precision=r-2*("%"===i.type))}return Ei(i)};function Li(s){var l=s.domain;return s.ticks=function(t){var e=l();return m(e[0],e[e.length-1],null==t?10:t)},s.tickFormat=function(t,e){var n=l();return Ci(n[0],n[n.length-1],null==t?10:t,e)},s.nice=function(t){null==t&&(t=10);var e,n=l(),i=0,r=n.length-1,o=n[i],a=n[r];return a<o&&(e=o,o=a,a=e,e=i,i=r,r=e),0<(e=g(o,a,t))?e=g(o=Math.floor(o/e)*e,a=Math.ceil(a/e)*e,t):e<0&&(e=g(o=Math.ceil(o*e)/e,a=Math.floor(a*e)/e,t)),0<e?(n[i]=Math.floor(o/e)*e,n[r]=Math.ceil(a/e)*e,l(n)):e<0&&(n[i]=Math.ceil(o*e)/e,n[r]=Math.floor(a*e)/e,l(n)),s},s}function Ai(){var t=vi(li,li);return t.copy=function(){return fi(t,Ai())},ti.apply(t,arguments),Li(t)}var Ii=new Date,Pi=new Date;function ji(o,a,n,i){function s(t){return o(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=function(t){return o(t=new Date(+t)),t},s.ceil=function(t){return o(t=new Date(t-1)),a(t,1),o(t),t},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,e){return a(t=new Date(+t),null==e?1:Math.floor(e)),t},s.range=function(t,e,n){var i,r=[];if(t=s.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return r;for(;r.push(i=new Date(+t)),a(t,n),o(t),i<t&&t<e;);return r},s.filter=function(n){return ji(function(t){if(t<=t)for(;o(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;a(t,-1),!n(t););else for(;0<=--e;)for(;a(t,1),!n(t););})},n&&(s.count=function(t,e){return Ii.setTime(+t),Pi.setTime(+e),o(Ii),o(Pi),Math.floor(n(Ii,Pi))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?s.filter(i?function(t){return i(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}var Ni=ji(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Ni.every=function(n){return isFinite(n=Math.floor(n))&&0<n?ji(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};var Bi=Ni,Fi=(Ni.range,ji(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}));Fi.range;function Ri(e){return ji(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}var Hi=Ri(0),zi=Ri(1),Yi=Ri(2),qi=Ri(3),Ui=Ri(4),Wi=Ri(5),Vi=Ri(6),Gi=(Hi.range,zi.range,Yi.range,qi.range,Ui.range,Wi.range,Vi.range,ji(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5},function(t){return t.getDate()-1})),Ji=Gi,Xi=(Gi.range,ji(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()})),Zi=(Xi.range,ji(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getMinutes()})),$i=(Zi.range,ji(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()})),Qi=($i.range,ji(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t}));Qi.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?ji(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):Qi:null};Qi.range;function Ki(e){return ji(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var tr=Ki(0),er=Ki(1),nr=Ki(2),ir=Ki(3),rr=Ki(4),or=Ki(5),ar=Ki(6),sr=(tr.range,er.range,nr.range,ir.range,rr.range,or.range,ar.range,ji(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1})),lr=sr,cr=(sr.range,ji(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));cr.every=function(n){return isFinite(n=Math.floor(n))&&0<n?ji(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var ur=cr;cr.range;function dr(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function hr(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function fr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function pr(t){var i=t.dateTime,r=t.date,o=t.time,e=t.periods,n=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,c=kr(e),u=xr(e),d=kr(n),h=xr(n),f=kr(a),p=xr(a),v=kr(s),m=xr(s),g=kr(l),y=xr(l),b={a:function(t){return a[t.getDay()]},A:function(t){return n[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Ur,e:Ur,f:Xr,H:Wr,I:Vr,j:Gr,L:Jr,m:Zr,M:$r,p:function(t){return e[+(12<=t.getHours())]},q:function(t){return 1+~~(t.getMonth()/3)},Q:To,s:Oo,S:Qr,u:Kr,U:to,V:eo,w:no,W:io,x:null,X:null,y:ro,Y:oo,Z:ao,"%":Eo},w={a:function(t){return a[t.getUTCDay()]},A:function(t){return n[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:so,e:so,f:fo,H:lo,I:co,j:uo,L:ho,m:po,M:vo,p:function(t){return e[+(12<=t.getUTCHours())]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:To,s:Oo,S:mo,u:go,U:yo,V:bo,w:wo,W:_o,x:null,X:null,y:ko,Y:xo,Z:So,"%":Eo},_={a:function(t,e,n){var i=f.exec(e.slice(n));return i?(t.w=p[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=d.exec(e.slice(n));return i?(t.w=h[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.m=y[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=v.exec(e.slice(n));return i?(t.m=m[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,e,n){return S(t,i,e,n)},d:Pr,e:Pr,f:Hr,H:Nr,I:Nr,j:jr,L:Rr,m:Ir,M:Br,p:function(t,e,n){var i=c.exec(e.slice(n));return i?(t.p=u[i[0].toLowerCase()],n+i[0].length):-1},q:Ar,Q:Yr,s:qr,S:Fr,u:Er,U:Tr,V:Or,w:Sr,W:Mr,x:function(t,e,n){return S(t,r,e,n)},X:function(t,e,n){return S(t,o,e,n)},y:Cr,Y:Dr,Z:Lr,"%":zr};function k(l,c){return function(t){var e,n,i,r=[],o=-1,a=0,s=l.length;for(t instanceof Date||(t=new Date(+t));++o<s;)37===l.charCodeAt(o)&&(r.push(l.slice(a,o)),null!=(n=mr[e=l.charAt(++o)])?e=l.charAt(++o):n="e"===e?" ":"0",(i=c[e])&&(e=i(t,n)),r.push(e),a=o+1);return r.push(l.slice(a,o)),r.join("")}}function x(r,o){return function(t){var e,n,i=fr(1900,void 0,1);if(S(i,r,t+="",0)!=t.length)return null;if("Q"in i)return new Date(i.Q);if("s"in i)return new Date(1e3*i.s+("L"in i?i.L:0));if(!o||"Z"in i||(i.Z=0),"p"in i&&(i.H=i.H%12+12*i.p),void 0===i.m&&(i.m="q"in i?i.q:0),"V"in i){if(i.V<1||53<i.V)return null;"w"in i||(i.w=1),"Z"in i?(e=4<(n=(e=hr(fr(i.y,0,1))).getUTCDay())||0===n?er.ceil(e):er(e),e=lr.offset(e,7*(i.V-1)),i.y=e.getUTCFullYear(),i.m=e.getUTCMonth(),i.d=e.getUTCDate()+(i.w+6)%7):(e=4<(n=(e=dr(fr(i.y,0,1))).getDay())||0===n?zi.ceil(e):zi(e),e=Ji.offset(e,7*(i.V-1)),i.y=e.getFullYear(),i.m=e.getMonth(),i.d=e.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),n="Z"in i?hr(fr(i.y,0,1)).getUTCDay():dr(fr(i.y,0,1)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(n+5)%7:i.w+7*i.U-(n+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,hr(i)):dr(i)}}function S(t,e,n,i){for(var r,o,a=0,s=e.length,l=n.length;a<s;){if(l<=i)return-1;if(37===(r=e.charCodeAt(a++))){if(r=e.charAt(a++),!(o=_[r in mr?e.charAt(a++):r])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return b.x=k(r,b),b.X=k(o,b),b.c=k(i,b),w.x=k(r,w),w.X=k(o,w),w.c=k(i,w),{format:function(t){var e=k(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=x(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=k(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=x(t+="",!0);return e.toString=function(){return t},e}}}var vr,mr={"-":"",_:" ",0:"0"},gr=/^\s*\d+/,yr=/^%/,br=/[\\^$*+?|[\]().{}]/g;function wr(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function _r(t){return t.replace(br,"\\$&")}function kr(t){return new RegExp("^(?:"+t.map(_r).join("|")+")","i")}function xr(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function Sr(t,e,n){var i=gr.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Er(t,e,n){var i=gr.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Tr(t,e,n){var i=gr.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Or(t,e,n){var i=gr.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function Mr(t,e,n){var i=gr.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Dr(t,e,n){var i=gr.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Cr(t,e,n){var i=gr.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(68<+i[0]?1900:2e3),n+i[0].length):-1}function Lr(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Ar(t,e,n){var i=gr.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function Ir(t,e,n){var i=gr.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Pr(t,e,n){var i=gr.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function jr(t,e,n){var i=gr.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Nr(t,e,n){var i=gr.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Br(t,e,n){var i=gr.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Fr(t,e,n){var i=gr.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Rr(t,e,n){var i=gr.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Hr(t,e,n){var i=gr.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function zr(t,e,n){var i=yr.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Yr(t,e,n){var i=gr.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function qr(t,e,n){var i=gr.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Ur(t,e){return wr(t.getDate(),e,2)}function Wr(t,e){return wr(t.getHours(),e,2)}function Vr(t,e){return wr(t.getHours()%12||12,e,2)}function Gr(t,e){return wr(1+Ji.count(Bi(t),t),e,3)}function Jr(t,e){return wr(t.getMilliseconds(),e,3)}function Xr(t,e){return Jr(t,e)+"000"}function Zr(t,e){return wr(t.getMonth()+1,e,2)}function $r(t,e){return wr(t.getMinutes(),e,2)}function Qr(t,e){return wr(t.getSeconds(),e,2)}function Kr(t){var e=t.getDay();return 0===e?7:e}function to(t,e){return wr(Hi.count(Bi(t)-1,t),e,2)}function eo(t,e){var n=t.getDay();return t=4<=n||0===n?Ui(t):Ui.ceil(t),wr(Ui.count(Bi(t),t)+(4===Bi(t).getDay()),e,2)}function no(t){return t.getDay()}function io(t,e){return wr(zi.count(Bi(t)-1,t),e,2)}function ro(t,e){return wr(t.getFullYear()%100,e,2)}function oo(t,e){return wr(t.getFullYear()%1e4,e,4)}function ao(t){var e=t.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+wr(e/60|0,"0",2)+wr(e%60,"0",2)}function so(t,e){return wr(t.getUTCDate(),e,2)}function lo(t,e){return wr(t.getUTCHours(),e,2)}function co(t,e){return wr(t.getUTCHours()%12||12,e,2)}function uo(t,e){return wr(1+lr.count(ur(t),t),e,3)}function ho(t,e){return wr(t.getUTCMilliseconds(),e,3)}function fo(t,e){return ho(t,e)+"000"}function po(t,e){return wr(t.getUTCMonth()+1,e,2)}function vo(t,e){return wr(t.getUTCMinutes(),e,2)}function mo(t,e){return wr(t.getUTCSeconds(),e,2)}function go(t){var e=t.getUTCDay();return 0===e?7:e}function yo(t,e){return wr(tr.count(ur(t)-1,t),e,2)}function bo(t,e){var n=t.getUTCDay();return t=4<=n||0===n?rr(t):rr.ceil(t),wr(rr.count(ur(t),t)+(4===ur(t).getUTCDay()),e,2)}function wo(t){return t.getUTCDay()}function _o(t,e){return wr(er.count(ur(t)-1,t),e,2)}function ko(t,e){return wr(t.getUTCFullYear()%100,e,2)}function xo(t,e){return wr(t.getUTCFullYear()%1e4,e,4)}function So(){return"+0000"}function Eo(){return"%"}function To(t){return+t}function Oo(t){return Math.floor(t/1e3)}vr=pr({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),vr.format,vr.parse,vr.utcFormat,vr.utcParse;var Mo=ji(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Do=(Mo.range,ji(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()})),Co=(Do.range,ji(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getUTCMinutes()}));Co.range;function Lo(){this._=null}function Ao(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Io(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function Po(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function jo(t){for(;t.L;)t=t.L;return t}Lo.prototype={constructor:Lo,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else n=this._?(t=jo(this._),e.P=null,(e.N=t).P=t.L=e,t):(e.P=e.N=null,this._=e,null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(i=n.U).L?(r=i.R)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(Io(this,n),n=(t=n).U),n.C=!1,i.C=!0,Po(this,i)):(r=i.L)&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(Po(this,n),n=(t=n).U),n.C=!1,i.C=!0,Io(this,i)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,o=t.L,a=t.R;if(n=o?a?jo(a):o:a,r?r.L===t?r.L=n:r.R=n:this._=n,o&&a?(i=n.C,n.C=t.C,((n.L=o).U=n)!==a?(r=n.U,n.U=t.U,t=n.R,r.L=t,(n.R=a).U=n):(n.U=r,t=(r=n).R)):(i=t.C,t=n),t&&(t.U=r),!i)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Io(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Po(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Io(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Po(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Io(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Po(this,r),t=this._;break}e.C=!0,r=(t=r).U}while(!t.C);t&&(t.C=!1)}}};var No=Lo;function Bo(t,e,n,i){var r=[null,null],o=oa.push(r)-1;return r.left=t,r.right=e,n&&Ro(r,t,e,n),i&&Ro(r,e,t,i),ia[t.index].halfedges.push(o),ia[e.index].halfedges.push(o),r}function Fo(t,e,n){var i=[e,n];return i.left=t,i}function Ro(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function Ho(t,e,n,i,r){var o,a=t[0],s=t[1],l=a[0],c=a[1],u=0,d=1,h=s[0]-l,f=s[1]-c;if(o=e-l,h||!(0<o)){if(o/=h,h<0){if(o<u)return;o<d&&(d=o)}else if(0<h){if(d<o)return;u<o&&(u=o)}if(o=i-l,h||!(o<0)){if(o/=h,h<0){if(d<o)return;u<o&&(u=o)}else if(0<h){if(o<u)return;o<d&&(d=o)}if(o=n-c,f||!(0<o)){if(o/=f,f<0){if(o<u)return;o<d&&(d=o)}else if(0<f){if(d<o)return;u<o&&(u=o)}if(o=r-c,f||!(o<0)){if(o/=f,f<0){if(d<o)return;u<o&&(u=o)}else if(0<f){if(o<u)return;o<d&&(d=o)}return(0<u||d<1)&&(0<u&&(t[0]=[l+u*h,c+u*f]),d<1&&(t[1]=[l+d*h,c+d*f])),!0}}}}}function zo(t,e,n,i,r){var o=t[1];if(o)return!0;var a,s,l=t[0],c=t.left,u=t.right,d=c[0],h=c[1],f=u[0],p=u[1],v=(d+f)/2,m=(h+p)/2;if(p===h){if(v<e||i<=v)return;if(f<d){if(l){if(l[1]>=r)return}else l=[v,n];o=[v,r]}else{if(l){if(l[1]<n)return}else l=[v,r];o=[v,n]}}else if(s=m-(a=(d-f)/(p-h))*v,a<-1||1<a)if(f<d){if(l){if(l[1]>=r)return}else l=[(n-s)/a,n];o=[(r-s)/a,r]}else{if(l){if(l[1]<n)return}else l=[(r-s)/a,r];o=[(n-s)/a,n]}else if(h<p){if(l){if(l[0]>=i)return}else l=[e,a*e+s];o=[i,a*i+s]}else{if(l){if(l[0]<e)return}else l=[i,a*i+s];o=[e,a*e+s]}return t[0]=l,t[1]=o,!0}function Yo(t,e){return e[+(e.left!==t.site)]}var qo,Uo=[];function Wo(){Ao(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vo(t){var e=t.P,n=t.N;if(e&&n){var i=e.site,r=t.site,o=n.site;if(i!==o){var a=r[0],s=r[1],l=i[0]-a,c=i[1]-s,u=o[0]-a,d=o[1]-s,h=2*(l*d-c*u);if(!(-sa<=h)){var f=l*l+c*c,p=u*u+d*d,v=(d*f-c*p)/h,m=(l*p-u*f)/h,g=Uo.pop()||new Wo;g.arc=t,g.site=r,g.x=v+a,g.y=(g.cy=m+s)+Math.sqrt(v*v+m*m),t.circle=g;for(var y=null,b=ra._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}ra.insert(y,g),y||(qo=g)}}}}function Go(t){var e=t.circle;e&&(e.P||(qo=e.N),ra.remove(e),Uo.push(e),Ao(e),t.circle=null)}var Jo=[];function Xo(){Ao(this),this.edge=this.site=this.circle=null}function Zo(t){var e=Jo.pop()||new Xo;return e.site=t,e}function $o(t){Go(t),na.remove(t),Jo.push(t),Ao(t)}function Qo(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],o=t.P,a=t.N,s=[t];$o(t);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<aa&&Math.abs(i-l.circle.cy)<aa;)o=l.P,s.unshift(l),$o(l),l=o;s.unshift(l),Go(l);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<aa&&Math.abs(i-c.circle.cy)<aa;)a=c.N,s.push(c),$o(c),c=a;s.push(c),Go(c);var u,d=s.length;for(u=1;u<d;++u)c=s[u],l=s[u-1],Ro(c.edge,l.site,c.site,r);l=s[0],(c=s[d-1]).edge=Bo(l.site,c.site,null,r),Vo(l),Vo(c)}function Ko(t){for(var e,n,i,r,o=t[0],a=t[1],s=na._;s;)if(i=ta(s,a)-o,aa<i)s=s.L;else{if(r=o-ea(s,a),!(aa<r)){-aa<i?(e=s.P,n=s):-aa<r?n=(e=s).N:e=n=s;break}if(!s.R){e=s;break}s=s.R}!function(t){ia[t.index]={site:t,halfedges:[]}}(t);var l=Zo(t);if(na.insert(e,l),e||n){if(e===n)return Go(e),n=Zo(e.site),na.insert(l,n),l.edge=n.edge=Bo(e.site,l.site),Vo(e),void Vo(n);if(n){Go(e),Go(n);var c=e.site,u=c[0],d=c[1],h=t[0]-u,f=t[1]-d,p=n.site,v=p[0]-u,m=p[1]-d,g=2*(h*m-f*v),y=h*h+f*f,b=v*v+m*m,w=[(m*y-f*b)/g+u,(h*b-v*y)/g+d];Ro(n.edge,c,p,w),l.edge=Bo(c,t,null,w),n.edge=Bo(t,p,null,w),Vo(e),Vo(n)}else l.edge=Bo(e.site,l.site)}}function ta(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var a=t.P;if(!a)return-1/0;var s=(n=a.site)[0],l=n[1],c=l-e;if(!c)return s;var u=s-i,d=1/o-1/c,h=u/c;return d?(-h+Math.sqrt(h*h-2*d*(u*u/(-2*c)-l+c/2+r-o/2)))/d+i:(i+s)/2}function ea(t,e){var n=t.N;if(n)return ta(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var na,ia,ra,oa,aa=1e-6,sa=1e-12;function la(t,e){return e[1]-t[1]||e[0]-t[0]}function ca(t,e){var n,i,r,o=t.sort(la).pop();for(oa=[],ia=new Array(t.length),na=new No,ra=new No;;)if(r=qo,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))o[0]===n&&o[1]===i||(Ko(o),n=o[0],i=o[1]),o=t.pop();else{if(!r)break;Qo(r.arc)}if(!function(){for(var t,e,n,i,r=0,o=ia.length;r<o;++r)if((t=ia[r])&&(i=(e=t.halfedges).length)){var a=new Array(i),s=new Array(i);for(n=0;n<i;++n)a[n]=n,s[n]=(l=t,c=oa[e[n]],h=d=void 0,u=l.site,d=c.left,h=c.right,u===h&&(h=d,d=u),h?Math.atan2(h[1]-d[1],h[0]-d[0]):(h=u===d?(d=c[1],c[0]):(d=c[0],c[1]),Math.atan2(d[0]-h[0],h[1]-d[1])));for(a.sort(function(t,e){return s[e]-s[t]}),n=0;n<i;++n)s[n]=e[a[n]];for(n=0;n<i;++n)e[n]=s[n]}var l,c,u,d,h}(),e){var a=+e[0][0],s=+e[0][1],l=+e[1][0],c=+e[1][1];!function(t,e,n,i){for(var r,o=oa.length;o--;)zo(r=oa[o],t,e,n,i)&&Ho(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>aa||Math.abs(r[0][1]-r[1][1])>aa)||delete oa[o]}(a,s,l,c),function(t,e,n,i){var r,o,a,s,l,c,u,d,h,f,p,v,m,g,y=ia.length,b=!0;for(r=0;r<y;++r)if(o=ia[r]){for(a=o.site,s=(l=o.halfedges).length;s--;)oa[l[s]]||l.splice(s,1);for(s=0,c=l.length;s<c;)m=o,p=(f=(g=oa[l[s]])[+(g.left===m.site)])[0],v=f[1],d=(u=Yo(o,oa[l[++s%c]]))[0],h=u[1],(Math.abs(p-d)>aa||Math.abs(v-h)>aa)&&(l.splice(s,0,oa.push(Fo(a,f,Math.abs(p-t)<aa&&aa<i-v?[t,Math.abs(d-t)<aa?h:i]:Math.abs(v-i)<aa&&aa<n-p?[Math.abs(h-i)<aa?d:n,i]:Math.abs(p-n)<aa&&aa<v-e?[n,Math.abs(d-n)<aa?h:e]:Math.abs(v-e)<aa&&aa<p-t?[Math.abs(h-e)<aa?d:t,e]:null))-1),++c);c&&(b=!1)}if(b){var w,_,k,x=1/0;for(r=0,b=null;r<y;++r)(o=ia[r])&&(k=(w=(a=o.site)[0]-t)*w+(_=a[1]-e)*_)<x&&(x=k,b=o);if(b){var S=[t,e],E=[t,i],T=[n,i],O=[n,e];b.halfedges.push(oa.push(Fo(a=b.site,S,E))-1,oa.push(Fo(a,E,T))-1,oa.push(Fo(a,T,O))-1,oa.push(Fo(a,O,S))-1)}}for(r=0;r<y;++r)(o=ia[r])&&(o.halfedges.length||delete ia[r])}(a,s,l,c)}this.edges=oa,this.cells=ia,na=ra=oa=ia=null}ca.prototype={constructor:ca,polygons:function(){var n=this.edges;return this.cells.map(function(e){var t=e.halfedges.map(function(t){return Yo(e,n[t])});return t.data=e.site.data,t})},triangles:function(){var h=[],f=this.edges;return this.cells.forEach(function(t,e){if(i=(n=t.halfedges).length)for(var n,i,r,o,a,s,l=t.site,c=-1,u=f[n[i-1]],d=u.left===l?u.right:u.left;++c<i;)r=d,d=(u=f[n[c]]).left===l?u.right:u.left,r&&d&&e<r.index&&e<d.index&&(a=r,s=d,((o=l)[0]-s[0])*(a[1]-o[1])-(o[0]-a[0])*(s[1]-o[1])<0)&&h.push([l.data,r.data,d.data])}),h},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(a,s,t){for(var e,l,c=this,u=c._found||0,n=c.cells.length;!(l=c.cells[u]);)if(++u>=n)return null;for(var i=a-l.site[0],r=s-l.site[1],d=i*i+r*r;l=c.cells[e=u],u=null,l.halfedges.forEach(function(t){var e=c.edges[t],n=e.left;if(n!==l.site&&n||(n=e.right)){var i=a-n[0],r=s-n[1],o=i*i+r*r;o<d&&(d=o,u=n.index)}}),null!==u;);return c._found=e,null==t||d<=t*t?l.site:null}};Math.SQRT2;function ua(t,e,n){this.k=t,this.x=e,this.y=n}ua.prototype={constructor:ua,scale:function(t){return 1===t?this:new ua(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new ua(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new ua(1,0,0);function da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}n.d(e,"a",function(){return fa});function ha(t){return new Intl.NumberFormat("ru-RU").format(t)}var fa=function(){function w(t,i,e,r,n,o,a,s){k()(this,w),s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?da(Object(n),!0).forEach(function(t){_()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):da(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({accColor:"green",statHeight:250,quota:0,spaces:!0,numShow:!1},s);function l(t){return(t+="").length<2?t.length<1?"00":"0"+t:t}a=new Date(a);var c="Y"===o?"Y":7*Number(o);null==i&&(i=[]);var u=[];if("Y"!=c&&c<=28)for(var d=function(t){var e=new Date(new Date(a).setDate(a.getDate()+t));e="".concat(l(e.getDate()),".").concat(l(e.getMonth()+1),".").concat(e.getFullYear());var n=i.indexOf(i.find(function(t){return t.date==e}));u.push(i[n]||{date:e,value:null,quota:null})},h=0;h<c;h++)d(h);else{var f=new Date(n,0,1),p={date:null,value:null,quota:null};if(28<c){f=new Date(a);for(var v=function(t){var e=new Date(new Date(a).setDate(a.getDate()+t));e="".concat(l(e.getDate()),".").concat(l(e.getMonth()+1),".").concat(e.getFullYear());var n=i.find(function(t){return t.date==e});f.getDay()==r?(n&&null!=n.value&&(p.value+=Number(n.value)),n&&null!=n.quota&&(p.quota+=Number(n.quota)),p.date=e,u.push(p),p={date:null,value:null,quota:null}):(n&&null!=n.value&&(p.value+=Number(n.value)),n&&null!=n.quota&&(p.quota+=Number(n.quota))),f=new Date(f.setDate(f.getDate()+1))},m=0;m<c;m++)v(m)}else for(var g=function(){var e="".concat(l(f.getDate()),".").concat(l(f.getMonth()+1),".").concat(f.getFullYear()),t=i.find(function(t){return t.date==e});f.getDay()==r?(t&&null!=t.value&&(p.value+=Number(t.value)),t&&null!=t.quota&&(p.quota+=Number(t.quota)),p.date=e,u.push(p),p={date:null,value:null,quota:null}):(t&&null!=t.value&&(p.value+=Number(t.value)),t&&null!=t.quota&&(p.quota+=Number(t.quota))),f=new Date(f.setDate(f.getDate()+1))};f.getFullYear()==n;)g()}this.data=u;var y=0;this.dataAcc=u.map(function(t){return{date:t.date,value:null!=t.value?y+=t.value:null}});var b=0;this.dataQuota=u.map(function(t){return{date:t.date,quota:null!=t.quota?b+=t.quota:null}}),this.params=s,this.quota=s.quota,this.reverted=e,this.stat=document.getElementById(t),this.graphHeight,this.margin={top:40,right:25,bottom:50,left:30},this.graphHeight=s.statHeight-this.margin.top-this.margin.bottom,1<Math.ceil(String(Math.round(S(this.data,function(t){return Number(t.value)}))).length/3)?this.margin.left=20*Math.ceil(String(Math.round(S(this.data,function(t){return Number(t.value)}))).length/3)+10:1<String(Math.round(S(this.data,function(t){return Number(t.value)}))).length&&(this.margin.left=10*String(Math.round(S(this.data,function(t){return Number(t.value)}))).length+10),this.stat.innerHTML="",this.svg=Ot(this.stat).append("svg").attr("width",this.stat.offsetWidth-10).attr("height",this.graphHeight+this.margin.top+this.margin.bottom),this.graph=this.svg.append("g").attr("width",this.stat.offsetWidth-30).attr("height",this.graphHeight).attr("transform","translate(".concat(this.margin.left,", ").concat(this.margin.top,")")),this.x=Ai().range([0,this.stat.offsetWidth-this.margin.left-this.margin.right]),this.y=Ai().range([this.graphHeight,0]),this.xAxisGroup=this.graph.append("g").attr("class","x-axis").attr("transform","translate(0, "+this.graphHeight+")"),this.yAxisGroup=this.graph.append("g").attr("class","y-axis"),this.dottedLines=this.graph.append("g").attr("class","linesDot").style("opacity",0),this.xDottedLine=this.dottedLines.append("line").attr("stroke","#aaa").attr("stroke-width",1).attr("stroke-dasharray",4),this.yDottedLine=this.dottedLines.append("line").attr("stroke","#aaa").attr("stroke-width",1).attr("stroke-dasharray",4),this.lines=this.graph.append("g").attr("class","lines"),this.lines2=this.graph.append("g").attr("class","linesAcc"),this.lines3=this.graph.append("g").attr("class","linesQuota").attr("class","valueQuota"),this.dots=this.graph.append("g").attr("class","dots"),this.dotsAcc=this.graph.append("g").attr("class","dotsAcc"),this.dotsQuota=this.graph.append("g").attr("class","dotsQuota"),this.dottedValue=this.graph.append("g").attr("class","value"),this.dottedValue2=this.graph.append("g").attr("class","valueAcc"),this.dottedValue3=this.graph.append("g").attr("class","valueQuota")}return a()(w,[{key:"drawStat",value:function(){var i=this;if(this.data.find(function(t){return null!=t.value})){var r=this.data.map(function(t){return{date:t.date,value:null==t.value?i.params.spaces?null:0:Number(t.value)}});this.x.domain([1,r.length]),this.quota?(S(r,function(t){return Number(t.value)})>=S(this.dataQuota,function(t){return Number(t.quota)})&&S(r,function(t){return Number(t.value)})>=S(this.dataAcc,function(t){return Number(t.value)})&&this.y.domain(0==this.reverted?[b(r,function(t){return Number(t.value)}),S(r,function(t){return Number(t.value)})/100*20+S(r,function(t){return Number(t.value)})]:[S(r,function(t){return Number(t.value)})/100*20+S(r,function(t){return Number(t.value)}),b(r,function(t){return Number(t.value)})]),S(this.dataAcc,function(t){return Number(t.value)})>=S(r,function(t){return Number(t.value)})&&S(this.dataAcc,function(t){return Number(t.value)})>=S(this.dataQuota,function(t){return Number(t.quota)})&&this.y.domain([b(r,function(t){return Number(t.value)}),S(this.dataAcc,function(t){return Number(t.value)})/100*20+S(this.dataAcc,function(t){return Number(t.value)})]),S(this.dataQuota,function(t){return Number(t.quota)})>=S(r,function(t){return Number(t.value)})&&S(this.dataQuota,function(t){return Number(t.quota)})>=S(this.dataAcc,function(t){return Number(t.value)})&&this.y.domain([b(r,function(t){return Number(t.value)}),S(this.dataQuota,function(t){return Number(t.quota)})/100*20+S(this.dataQuota,function(t){return Number(t.quota)})])):this.y.domain(0==this.reverted?[b(r,function(t){return Number(t.value)}),S(r,function(t){return Number(t.value)})/100*20+S(r,function(t){return Number(t.value)})]:[S(r,function(t){return Number(t.value)})/100*20+S(r,function(t){return Number(t.value)}),b(r,function(t){return Number(t.value)})]);var t=this.lines.selectAll("line").data(r);if(t.exit().remove(),t.attr("x1",function(t,n){return r[n+1]&&r.find(function(t,e){return!(e<=n)&&null!=t.value})?null==r[n].value?i.x(0):i.x(n+1):i.x(0)}).attr("y1",function(t,n){return r[n+1]&&r.find(function(t,e){return!(e<=n)&&null!=t.value})?null==r[n].value?i.y(0):i.y(t.value):i.y(0)}).attr("x2",function(t,n){return r[n+1]&&r.find(function(t,e){return!(e<=n)&&null!=t.value})?null==r[n].value?i.x(0):null==r[n+1].value?i.x(n+1):i.x(n+2):i.x(0)}).attr("y2",function(t,n,e){return r[n+1]&&r.find(function(t,e){return!(e<=n)&&null!=t.value})?null==r[n].value?i.y(0):null==r[n+1].value?i.y(t.value):i.y(r[n+1].value):i.y(0)}),t.enter().append("line").attr("x1",function(t,n){return r[n+1]&&r.find(function(t,e){return!(e<=n)&&null!=t.value})?null==r[n].value?i.x(0):i.x(n+1):i.x(0)}).attr("y1",function(t,e){return i.y(0)}).attr("x2",function(t,n){return r[n+1]&&r.find(function(t,e){return!(e<=n)&&null!=t.value})?null==r[n].value?i.x(0):null==r[n+1].value?i.x(n+1):i.x(n+2):i.x(0)}).attr("y2",function(t,e,n){return i.y(0)}).attr("stroke",function(t,n){return 0==i.reverted?r.find(function(t,e){return!(e<=n)&&null!=t.value})&&r.find(function(t,e){return!(e<=n)&&null!=t.value}).value<t.value?"red":"#000":r.find(function(t,e){return!(e<=n)&&null!=t.value})?r.find(function(t,e){return!(e<=n)&&null!=t.value}).value<t.value?"#000":"red":"#000"}).attr("stroke-linecap","round").attr("stroke-width",function(t,n){return r[n+1]&&r.find(function(t,e){return!(e<=n)&&null!=t.value})?null==r[n].value?0:3:0}).transition().duration(500).attr("y1",function(t,n){return r[n+1]&&r.find(function(t,e){return!(e<=n)&&null!=t.value})?null==r[n].value?i.y(0):i.y(t.value):i.y(0)}).attr("y2",function(t,n,e){return r[n+1]&&r.find(function(t,e){return!(e<=n)&&null!=t.value})?null==r[n].value?i.y(0):null==r[n+1].value?i.y(t.value):i.y(r[n+1].value):i.y(0)}),this.quota){var e=this.lines2.selectAll("line").data(this.dataAcc);e.exit().remove(),e.attr("x1",function(t,n){return i.dataAcc[n+1]&&i.dataAcc.find(function(t,e){return!(e<=n)&&null!=t.value})?null==i.dataAcc[n].value?i.x(0):i.x(n+1):i.x(0)}).attr("y1",function(t,n){return i.dataAcc[n+1]&&i.dataAcc.find(function(t,e){return!(e<=n)&&null!=t.value})?null==i.dataAcc[n].value?i.y(0):i.y(t.value):i.y(0)}).attr("x2",function(t,n){return i.dataAcc[n+1]&&i.dataAcc.find(function(t,e){return!(e<=n)&&null!=t.value})?null==i.dataAcc[n].value?i.x(0):null==i.dataAcc[n+1].value?i.x(n+1):i.x(n+2):i.x(0)}).attr("y2",function(t,n,e){return i.dataAcc[n+1]&&i.dataAcc.find(function(t,e){return!(e<=n)&&null!=t.value})?null==i.dataAcc[n].value?i.y(0):null==i.dataAcc[n+1].value?i.y(t.value):i.y(i.dataAcc[n+1].value):i.y(0)}),e.enter().append("line").attr("x1",function(t,n){return i.dataAcc[n+1]&&i.dataAcc.find(function(t,e){return!(e<=n)&&null!=t.value})?null==i.dataAcc[n].value?i.x(0):i.x(n+1):i.x(0)}).attr("y1",function(t,n){return i.dataAcc[n+1]&&i.dataAcc.find(function(t,e){return!(e<=n)&&null!=t.value})?null==i.dataAcc[n].value?i.y(0):i.y(t.value):i.y(0)}).attr("x2",function(t,n){return i.dataAcc[n+1]&&i.dataAcc.find(function(t,e){return!(e<=n)&&null!=t.value})?null==i.dataAcc[n].value?i.x(0):null==i.dataAcc[n+1].value?i.x(n+1):i.x(n+2):i.x(0)}).attr("y2",function(t,n,e){return i.dataAcc[n+1]&&i.dataAcc.find(function(t,e){return!(e<=n)&&null!=t.value})?null==i.dataAcc[n].value?i.y(0):null==i.dataAcc[n+1].value?i.y(t.value):i.y(i.dataAcc[n+1].value):i.y(0)}).attr("stroke",function(t,n){return 0==i.reverted?i.dataAcc.find(function(t,e){return!(e<=n)&&null!=t.value})?i.dataAcc.find(function(t,e){return!(e<=n)&&null!=t.value}).value<t.value?"red":i.params.accColor||"green":void 0:i.dataAcc.find(function(t,e){return!(e<=n)&&null!=t.value})?i.dataAcc.find(function(t,e){return!(e<=n)&&null!=t.value}).value<t.value?i.params.accColor||"green":"red":i.params.accColor||"green"}).attr("stroke-linecap","round").attr("stroke-width",function(t,n){return i.dataAcc[n+1]&&i.dataAcc.find(function(t,e){return!(e<=n)&&null!=t.value})?null==i.dataAcc[n].value?0:3:0});var n=this.lines3.selectAll("line").data(this.dataQuota);n.exit().remove(),n.attr("x1",function(t,n){return i.dataQuota[n+1]&&i.dataQuota.find(function(t,e){return!(e<=n)&&null!=t.quota})?null==i.dataQuota[n].quota?i.x(0):x(n+1):i.x(0)}).attr("y1",function(t,n){return i.dataQuota[n+1]&&i.dataQuota.find(function(t,e){return!(e<=n)&&null!=t.quota})?null==i.dataQuota[n].quota?i.y(0):i.y(t.quota):i.y(0)}).attr("x2",function(t,n){return i.dataQuota[n+1]&&i.dataQuota.find(function(t,e){return!(e<=n)&&null!=t.quota})?null==i.dataQuota[n].quota?i.x(0):i.x(n+2+(i.dataQuota.indexOf(i.dataQuota.find(function(t,e){return!(e<=n)&&null!=t.quota}))-(n+1))):i.x(0)}).attr("y2",function(t,n,e){return i.dataQuota[n+1]&&i.dataQuota.find(function(t,e){return!(e<=n)&&null!=t.quota})?null==i.dataQuota[n].quota?i.y(0):i.y(i.dataQuota.find(function(t,e){return!(e<=n)&&null!=t.quota}).quota):i.y(0)}),n.enter().append("line").attr("x1",function(t,n){return i.dataQuota[n+1]&&i.dataQuota.find(function(t,e){return!(e<=n)&&null!=t.quota})?null==i.dataQuota[n].quota?i.x(0):i.x(n+1):i.x(0)}).attr("y1",function(t,n){return i.dataQuota[n+1]&&i.dataQuota.find(function(t,e){return!(e<=n)&&null!=t.quota})?null==i.dataQuota[n].quota?i.y(0):i.y(t.quota):i.y(0)}).attr("x2",function(t,n){return i.dataQuota[n+1]&&i.dataQuota.find(function(t,e){return!(e<=n)&&null!=t.quota})?null==i.dataQuota[n].quota?i.x(0):i.x(n+2+(i.dataQuota.indexOf(i.dataQuota.find(function(t,e){return!(e<=n)&&null!=t.quota}))-(n+1))):i.x(0)}).attr("y2",function(t,n,e){return i.dataQuota[n+1]&&i.dataQuota.find(function(t,e){return!(e<=n)&&null!=t.quota})?null==i.dataQuota[n].quota?i.y(0):i.y(i.dataQuota.find(function(t,e){return!(e<=n)&&null!=t.quota}).quota):i.y(0)}).attr("stroke",function(t,n){if(0==i.reverted)return i.dataQuota.find(function(t,e){return!(e<=n)&&null!=t.quota}),"gray"}).attr("stroke-linecap","round").attr("stroke-dasharray",11).attr("stroke-width",function(t,n){return i.dataQuota[n+1]&&i.dataQuota.find(function(t,e){return!(e<=n)&&null!=t.quota})?null==i.dataQuota[n].quota?0:2:0});var o=this.dottedValue2.selectAll("text").data(this.dataAcc);o.exit().remove(),o.attr("x",function(t,e){return i.x(e+1)}).attr("y",function(t){return i.y(t.value)}).text(function(t){return null==t.value?"":ha(Math.round(t.value))}).style("font-family","arial condensed","important");var a=o.enter().append("text");a.attr("x",function(t,e){return i.x(e+1)}).attr("y",function(t){return i.y(0)}).attr("fill","currentColor").text(function(t){return null==t.value?"":ha(Math.round(t.value))}).style("font-family","arial condensed","important").style("font-size","10px","important").transition().duration(500).attr("y",function(t){return i.y(t.value)}),this.params.numShow||a.attr("hidden","true"),this.dottedValue2.selectAll("text").attr("transform",function(t,e){return r[e+1]?"rotate(0) translate(0, -13)":"translate(-20, -15)"});var s=this.dottedValue3.selectAll("text").data(this.dataQuota);s.exit().remove(),s.attr("x",function(t,e){return i.x(e+1)}).attr("y",function(t){return i.y(t.quota)}).text(function(t){return null==t.quota?"":ha(Math.round(t.quota))}).style("font-family","arial condensed","important");var l=s.enter().append("text");l.attr("x",function(t,e){return i.x(e+1)}).attr("y",function(t){return i.y(0)}).attr("fill","currentColor").text(function(t){return null==t.quota?"":ha(Math.round(t.quota))}).style("font-family","arial condensed","important").style("font-size","10px","important").transition().duration(500).attr("y",function(t){return i.y(t.quota)}),this.params.numShow||l.attr("hidden","true"),this.dottedValue3.selectAll("text").attr("transform",function(t,e){return r[e+1]?"rotate(0) translate(0, -13)":"translate(-20, -15)"});var c=this.dotsAcc.selectAll("circle").data(this.dataAcc);c.exit().remove(),c.attr("cx",function(t,e){return i.x(e+1)}).attr("cy",function(t){return i.y(t.value)}),c.enter().append("circle").attr("r",function(t){return null==t.value?0:3}).attr("cx",function(t,e){return i.x(e+1)}).attr("cy",function(t){return i.y(t.value)}).attr("fill","#000"),this.dotsAcc.selectAll("circle").on("mouseover",function(t,e,n){i.params.numShow||i.dottedValue2.selectAll("text")._groups[0][e].removeAttribute("hidden"),i.dottedValue2.selectAll("text")._groups[0][e].style.stroke="orange",Ot(n[e]).transition().duration(100).attr("r",8).attr("fill","#000"),i.xDottedLine.attr("x1",i.x(e+1)).attr("x2",i.x(e+1)).attr("y1",i.graphHeight).attr("y2",i.y(t.value)),i.yDottedLine.attr("x1",0).attr("x2",i.x(e+1)).attr("y1",i.y(t.value)).attr("y2",i.y(t.value)),i.dottedLines.style("opacity",1)}).on("mouseleave",function(t,e,n){i.params.numShow||i.dottedValue2.selectAll("text")._groups[0][e].setAttribute("hidden","true"),i.dottedValue2.selectAll("text")._groups[0][e].style.stroke="unset",Ot(n[e]).transition().duration(100).attr("r",4).attr("fill","#000"),i.dottedLines.style("opacity",0)});var u=this.dotsQuota.selectAll("circle").data(this.dataQuota);u.exit().remove(),u.attr("cx",function(t,e){return i.x(e+1)}).attr("cy",function(t){return i.y(t.quota)}),u.enter().append("circle").attr("r",function(t){return null==t.quota?0:3}).attr("cx",function(t,e){return i.x(e+1)}).attr("cy",function(t){return i.y(t.quota)}).attr("fill","#000"),this.dotsQuota.selectAll("circle").on("mouseover",function(t,e,n){i.params.numShow||i.dottedValue3.selectAll("text")._groups[0][e].removeAttribute("hidden"),i.dottedValue2.selectAll("text")._groups[0][e].style.stroke="orange",Ot(n[e]).transition().duration(100).attr("r",8).attr("fill","#000"),i.xDottedLine.attr("x1",i.x(e+1)).attr("x2",i.x(e+1)).attr("y1",i.graphHeight).attr("y2",i.y(t.quota)),i.yDottedLine.attr("x1",0).attr("x2",i.x(e+1)).attr("y1",i.y(t.quota)).attr("y2",i.y(t.quota)),i.dottedLines.style("opacity",1)}).on("mouseleave",function(t,e,n){i.params.numShow||i.dottedValue3.selectAll("text")._groups[0][e].setAttribute("hidden","true"),i.dottedValue2.selectAll("text")._groups[0][e].style.stroke="unset",Ot(n[e]).transition().duration(100).attr("r",4).attr("fill","#000"),i.dottedLines.style("opacity",0)})}var d=this.dottedValue.selectAll("text").data(r);d.exit().remove(),d.attr("x",function(t,e){return i.x(e+1)}).attr("y",function(t){return i.y(t.value)}).text(function(t){return null==t.value?"":ha(Math.round(t.value))}).style("font-family","arial condensed","important");var h=d.enter().append("text");h.attr("x",function(t,e){return i.x(e+1)}).attr("y",function(t){return i.y(0)}).attr("fill","currentColor").text(function(t){return null==t.value?"":ha(Math.round(t.value))}).style("font-family","arial condensed","important").style("font-size","10px","important").transition().duration(500).attr("y",function(t){return i.y(t.value)}),this.params.numShow||h.attr("hidden","true"),this.dottedValue.selectAll("text").attr("transform",function(t,e){return r[e+1]?"rotate(0) translate(0, -13)":"translate(-20, -15)"});var f=this.dots.selectAll("circle").data(r);f.exit().remove(),f.attr("cx",function(t,e){return i.x(e+1)}).attr("cy",function(t){return i.y(t.value)}),f.enter().append("circle").attr("r",function(t){return null==t.value?0:3}).attr("cx",function(t,e){return i.x(e+1)}).attr("cy",function(t){return i.y(0)}).attr("fill","#000").transition().duration(500).attr("cy",function(t){return i.y(t.value)}),this.svg.on("mouseover",function(){i.svg.selectAll("circle").attr("r",function(t){return null==t.value&&null==t.quota?0:4})}).on("mouseleave",function(){i.svg.selectAll("circle").attr("r",function(t){return null==t.value&&null==t.quota?0:3})}),this.dots.selectAll("circle").on("mouseover",function(t,e,n){i.params.numShow||i.dottedValue.selectAll("text")._groups[0][e].removeAttribute("hidden"),i.dottedValue.selectAll("text")._groups[0][e].style.stroke="orange",Ot(n[e]).transition().duration(100).attr("r",8).attr("fill","#000"),i.xDottedLine.attr("x1",i.x(e+1)).attr("x2",i.x(e+1)).attr("y1",i.graphHeight).attr("y2",i.y(t.value)),i.yDottedLine.attr("x1",0).attr("x2",i.x(e+1)).attr("y1",i.y(t.value)).attr("y2",i.y(t.value)),i.dottedLines.style("opacity",1)}).on("mouseleave",function(t,e,n){i.params.numShow||i.dottedValue.selectAll("text")._groups[0][e].setAttribute("hidden","true"),i.dottedValue.selectAll("text")._groups[0][e].style.stroke="unset",Ot(n[e]).transition().duration(100).attr("r",4).attr("fill","#000"),i.dottedLines.style("opacity",0)});var p=function(t){return E(C,t)}(this.x).ticks(r.length).tickSize(10).tickFormat(function(t,e){return r.length,r[e].date.substr(0,5)}),v=function(t){return E(L,t)}(this.y).tickSize(10).ticks(4);this.xAxisGroup.call(p),this.yAxisGroup.call(v),this.yAxisGroup.call(v).selectAll("text").style("font-family","arial condensed","important"),this.xAxisGroup.selectAll("text").style("font-family","arial condensed","important").attr("transform",7<r.length?"rotate(-90) translate(-25, -17)":500<=this.stat.offsetWidth?"":"rotate(-90) translate(-25, -17)")}}}]),w}()},,,,,function(t,e,G){"use strict";G.r(e),G.d(e,"KanbanScript",function(){return a});var n=G(8),i=G.n(n),r=G(9),o=G.n(r),J=G(4),X=G(5),p=G(20),Z=(G(47),G(26)),$=document.getElementById("access").value,a=function(){function t(){i()(this,t),this.init()}return o()(t,[{key:"init",value:function(n){var f=this;fetch("/office/getPipes",{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(d){var W=document.getElementById("kanbanStepsHolder"),h=document.getElementById("kanbanList");h.querySelectorAll("*").forEach(function(t){return t.remove()}),f.data=d;function V(t){return(t+="").length<2?t.length<1?"00":"0"+t:t}function t(l){var c=document.createElement("button");c.classList.add("btn"),c.classList.add("btn-sm"),n===l&&c.classList.add("btn-primary"),d.pipe.kanban[l].title.trim()?c.innerText=d.pipe.kanban[l].title:c.innerText="Без названия",c.dataset.kanbanId=l;var t=document.createElement("div");t.classList.add("input-group","m-1"),t.insertAdjacentElement("beforeend",c);var u=document.createElement("button");u.innerHTML='<img src="images/edit.svg" alt="Редактировать воронку">',u.classList.add("btn"),u.classList.add("btn-sm"),u.classList.add("d-hide"),u.classList.add("js-editKanban"),t.insertAdjacentElement("beforeend",u),c.onclick=function(t){h.querySelectorAll("button").forEach(function(t){t.disabled=!1}),c.disabled=!0,document.getElementById("kanbanStepsList").classList.remove("d-hide"),document.querySelectorAll("#kanbanList button").forEach(function(t){return t.classList.remove("btn-primary")}),c.classList.add("btn-primary");var e=t.target.dataset.kanbanId;document.getElementById("kanbanTitleHolder").innerText=d.pipe.kanban[l].title,document.querySelectorAll("#kanbanStepsHolder > *").forEach(function(t){return t.remove()}),document.getElementById("stepsHolder").innerHTML="",W.onmousedown=function(){W.classList.contains("dragscroll")?W.classList.add("grabbing"):W.classList.add("c-not-allowed")},W.onmousemove=function(t){0<t.buttons&&W.classList.contains("dragscroll")?W.classList.add("grabbing"):(W.classList.remove("grabbing"),W.classList.remove("c-not-allowed"))};function a(){var e=[];"full"==$&&document.querySelectorAll("#stepsHolder input").forEach(function(t){fetch("/office/steps/edit",{method:"POST",body:JSON.stringify({id:t.name,title:t.value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).catch(function(t){return console.error(t)}),e.push(t.name)}),"full"==$&&fetch("/office/pipes/"+location.pathname.split("/")[3],{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],title:document.getElementById("pipeTitle").value,kanban:{title:document.getElementById("kanbanTitle").innerText,description:"",steps:e},key:l,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){f.init(l)}).catch(function(t){return console.error(t)})}var i=[];d.pipe.kanban[e].steps.forEach(function(t){var n;for(var e in d.steps)+d.steps[e].id==+t&&(n=d.steps[e]);n&&(document.querySelectorAll(".js-editKanban").forEach(function(t){return t.classList.add("d-hide")}),u.classList.remove("d-hide"),"full"==$&&(u.onclick=function(t){d.pipe.kanban[l].title.trim()?s().innerText=document.getElementById("kanbanTitleChangeInput").value=d.pipe.kanban[l].title:s().innerText=document.getElementById("kanbanTitleChangeInput").value="Без названия",document.getElementById("kanbanStepsList").classList.add("active")}),i.push(fetch("/office/lids/getListByStep",{method:"POST",body:JSON.stringify({id:n.id,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){var e={};return e.stepData=n,e.lids=t,e})),document.getElementById("saveStepsBtn").onclick=a)}),Promise.all(i).then(function(t){t.forEach(function(t){var U={};U.step=document.createElement("div"),U.step.classList.add("card","step"),U.step.dataset.id=t.stepData.id,U.step.dataset.title=t.stepData.title,U.stepTitle=document.createElement("div"),U.stepTitle.classList.add("h5","text-center","bg-dark","step-title"),U.stepTitle.innerText=t.stepData.title,U.stepTitle.title=t.stepData.title,U.step.insertAdjacentElement("afterbegin",U.stepTitle),U.content=document.createElement("div"),U.content.dataset.id=t.stepData.id,U.content.classList.add("step-content");function e(h){var n=document.createElement("div");n.classList.add("card","m-2","bg-secondary","lid","animated"),n.dataset.data=JSON.stringify(h);var r=document.createElement("div");fetch("/office/contacts/",{method:"POST",body:JSON.stringify({id:h.holder,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){r.querySelector("small").innerText=t.length&&t[0].title?t[0].title:"Неизвестный"}),r.innerHTML="#"+h.id+' <small>?</small><h6 class="text-bold">'+h.title+"</h6>",r.classList.add("lid-header");var t=document.createElement("i");t.classList.add("float-right","icon","icon-menu","lid-drag"),n.insertAdjacentElement("afterbegin",t),n.insertAdjacentElement("afterbegin",r);var e=document.createElement("div");e.classList.add("lid-body","d-flex");var i=document.createElement("div");i.innerHTML='<div class="loading"></div>',fetch("/office/phones/",{method:"POST",body:JSON.stringify({parent:h.holder,find:"byparent",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){i.innerHTML="<div>".concat(t.length&&t[0].phone?"+7"+t[0].phone:"Номера телефона нет","</div>")}),e.insertAdjacentElement("beforeend",i),n.insertAdjacentElement("beforeend",e),U.content.insertAdjacentElement("beforeend",n);var o=document.createElement("div");o.classList.add("lid-footer"),o.innerHTML='<span class="label label-primary">'+Z.formatMoney(h.gi,"",0," ",",")+' р.</span><div class="float-right">'+V(new Date(h.created).getDate())+"."+V(new Date(h.created).getMonth()+1)+"."+new Date(h.created).getFullYear()+" "+V(new Date(h.created).getHours())+":"+V(new Date(h.created).getMinutes())+"</div>";var a=document.createElement("button");a.classList.add("btn","btn-link","btn-sm","btn-action","s-circle","expand","icon","icon-arrow-down","d-hide"),e.insertAdjacentElement("beforeend",a);var s=document.createElement("div");s.classList.add("lid-menu","d-hide","animated");var l=document.createElement("ul");function c(){Promise.all([fetch("/office/contacts/",{method:"POST",body:JSON.stringify({id:h.holder,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/phones/",{method:"POST",body:JSON.stringify({parent:h.holder,find:"byparent",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(t){var e=t[0][0],n=t[1][0],i=e.title?e.title:"Неизвестный";r.innerHTML="<small>"+i+'</small><h6 class="text-bold">'+h.title+"</h6>",n.innerText="+7"+n.phone,o.innerHTML='<span class="label label-primary">'+Z.formatMoney(h.gi,"",0," ",",")+' р.</span><div class="float-right">'+V(new Date(h.created).getMonth())+"."+V(new Date(h.created).getDate())+"."+new Date(h.created).getFullYear()+" "+V(new Date(h.created).getHours())+":"+V(new Date(h.created).getMinutes())+"</div>"})}function f(t){if(h.lid_data?h.lid_data.tasks=[]:h.lid_data={tasks:[]},y.querySelectorAll("dd").forEach(function(t){h.lid_data.tasks.push({title:t.querySelector('[name="title"]').innerText,done:t.querySelector("input").checked,date:t.querySelector('[name="calendar"]').dataset.date,time:t.querySelector('[name="time"]').dataset.time,author:t.querySelector("figure.avatar").dataset.userId})}),h._csrf=document.getElementById("csrfToken").value,t&&h.lid_data.history.push(t),T(),c(),"full"==$)return fetch("/office/lids/update",{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json"}})}function u(i){var r=i.querySelector('[name="title"]'),o=r.innerText;r.onclick=function(t){var e=i.parentElement.parentElement.querySelector(".card-footer input");e.value=r.innerText,e.focus(),e.classList.remove("is-error");function n(t,e){var n={when:(new Date).toISOString(),author:null,oldTitle:o,newTitle:e.value};0<(e.value.trim()+"").length?(r.innerText=e.value,n.type="editTitleTask"):(i.remove(),n.type="removeTask"),t.target.disabled=!0,f(n).then(function(){_(e),t.target.disabled=!1,t.target.focus()}),e.value=""}e.onkeydown=function(t){"Escape"===t.key||"Enter"===t.key&&o==e.value?(e.value="",e.onblur=null,_(e)):"Enter"===t.key&&(e.onblur=null,n(t,e))},e.onblur=function(){n(t,e),e.classList.remove("is-error"),e.onblur=null}}}function d(t,o){"full"==$&&(t.onclick=function(i){var t=new dhx.Calendar(null,{weekStart:"monday",thisMonthOnly:!0,timePicker:!0}),e=new Date(new Date(20+i.target.dataset.date.split("/")[2],i.target.dataset.date.split("/")[1]-1,i.target.dataset.date.split("/")[0],o.dataset.time.split(":")[0],o.dataset.time.split(":")[1]));t.setValue(e);var r=new dhx.Popup;r.attach(t),r.hide(),document.querySelector(".dhx_widget")||(i.preventDefault(),t.events.on("change",function(t){var e=i.target.innerText;t.setDate(t.getDate()+1);var n=t.toISOString();i.target.innerText="".concat(n.slice(8,10),".").concat(n.slice(5,7)),o.innerText="".concat(n.slice(11,13),":").concat(n.slice(14,16)),i.target.dataset.date=n.slice(8,10)+"/"+n.slice(5,7)+"/"+n.slice(2,4),o.dataset.time=n.slice(11,13)+":"+n.slice(14,16),f({type:"editDateTask",when:(new Date).toISOString(),author:null,title:i.target.parentElement.querySelector('[name="title"]').innerText,oldDate:e,newDate:i.target.innerText}),r.hide()}),r.show(i.target))})}function p(t){"full"==$&&(t.onclick=function(e){var n=new dhx.Timepicker(null,{actions:!0});n.setValue(new Date(null,null,null,(new Date).getHours()+1));var i=new dhx.Popup;i.attach(n),i.hide(),document.querySelector(".dhx_widget")||(n.events.on("save",function(){var t=e.target.innerText;e.target.innerText=e.target.dataset.time=n.getValue(),f({type:"editTimeTask",when:(new Date).toISOString(),author:null,title:e.target.parentElement.querySelector('[name="title"]').innerText,oldTime:t,newTime:e.target.innerText}),i.hide()}),i.show(e.target),i.events.on("aftershow",function(){document.querySelectorAll(".dhx_timepicker__button-close").forEach(function(t){return t.addEventListener("click",function(){return i.hide()})})}))})}function v(){return"".concat(V((new Date).getDate()),"/").concat(V((new Date).getMonth()),"/").concat(((new Date).getFullYear()+"").substring(2))}function m(){return"".concat(V((new Date).getMinutes()),":").concat(V((new Date).getMinutes()))}l.classList.add("tab","tab-block"),["Карточка","Задачи","История"].forEach(function(t,e){return l.insertAdjacentHTML("beforeend",'<li class="tab-item"><a name="'+ ++e+'">'+t+"</a></li>")}),l.querySelectorAll("a").forEach(function(e){return e.onclick=function(){l.querySelectorAll("li").forEach(function(t){return t.classList.remove("active")}),e.parentElement.classList.add("active"),n.querySelectorAll(".menu-tab").forEach(function(t){return t.name!=e.name?t.classList.add("d-hide"):t.classList.remove("d-hide")})}}),l.querySelector("li:nth-child(2)").classList.add("active"),s.insertAdjacentElement("beforeend",l);var g=document.createElement("div");g.classList.add("tasks","menu-tab"),g.name=2;var y=document.createElement("dl");function b(o){"full"==$&&(o.querySelector("figure.avatar").onclick=function(t){document.getElementById("usersListModal").classList.add("active");var i=document.getElementById("usersList"),r=document.getElementById("confirmUserSelect"),e=document.getElementById("rejectUserSelect");r.disabled=!0,i.innerHTML="",i.insertAdjacentHTML("beforeend",'<div class="loading"></div>'),fetch("/office/users",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){i.innerHTML="",t.forEach(function(t){i.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile p-2 c-hand user" data-user-id="'.concat(t.id,'" data-fio="').concat(t.fio,'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar avatar-sm" data-initial="').concat(t.fio.trim()?t.fio.slice(0,1):"?",'"></figure>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-content">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-title">').concat(t.fio?t.fio:t.login,"</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t")),i.querySelectorAll(".user").forEach(function(e){e.onclick=function(t){i.querySelectorAll(".user").forEach(function(t){return t.classList.remove("active")}),e.classList.add("active"),r.disabled=!1}})}),r.onclick=function(t){var e=o.querySelector("figure.avatar"),n=i.querySelector(".user.active");e.dataset.userId=n.dataset.userId,e.dataset.initial=n.dataset.fio.trim()?n.dataset.fio.split(" ")[1]?n.dataset.fio.split(" ")[0].slice(0,1)+n.dataset.fio.split(" ")[1].slice(0,1):n.dataset.fio.slice(0,1):"?",e.title=n.dataset.fio,f(),document.getElementById("usersListModal").classList.remove("active"),i.innerHTML="",r.disabled=!0},e.onclick=function(t){document.getElementById("usersListModal").classList.remove("active"),i.innerHTML="",r.disabled=!0}})})}y.dataset.lid=h.id,"full"==$&&new J.a(y,{animation:150,handle:".taskDragger",onEnd:function(){f()}}),h.lid_data&&h.lid_data.tasks&&h.lid_data.tasks.forEach(function(n){var i=document.createElement("dd");n.date?n.date=n.date:n.date=v(),n.time?n.time=n.time:n.time=m();var t="".concat(V(n.date.slice(0,2)),".").concat(V(n.date.slice(3,5)));i.innerHTML='<div class="taskDraggerHolder"><i class="icon icon-menu taskDragger"></i></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="form-checkbox">\n\t\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox" '.concat(n.done?"checked":"",'>\n\t\t\t\t\t\t\t\t\t\t\t\t<i class="form-icon"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t<div name="titleHolder">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div name="calendar" data-date="').concat(n.date,'" data-lid="').concat(h.id,'" title="Изменить дату">').concat(t,'</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div name="time" data-time="').concat(n.time,'" title="Изменить время">').concat(n.time,'</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div name="title" title="Изменить название">').concat(n.title,'</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar avatar-sm" data-initial="?"></figure>\n\t\t\t\t\t\t\t\t\t\t\t</div>'),n.author&&fetch("/office/users",{method:"POST",body:JSON.stringify({id:n.author,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){t[0]&&(i.querySelector("figure.avatar").dataset.initial=t[0].fio.slice(0,1),t[0].fio.split(" ")[1]&&(i.querySelector("figure.avatar").dataset.initial+=t[0].fio.split(" ")[1].slice(0,1)),i.querySelector("figure.avatar").dataset.initial.trim()||(i.querySelector("figure.avatar").dataset.initial="?"),i.querySelector("figure.avatar").title=t[0].fio?t[0].fio:t[0].login)}),u(i),d(i.querySelector('[name="calendar"]'),i.querySelector('[name="time"]'),h.id),p(i.querySelector('[name="time"]'),h.id),b(i),"full"==$&&(i.querySelector("i.form-icon").onclick=function(t){var e=i.querySelector("input");e.checked?(e.checked=!1,f({type:"declineTask",when:(new Date).toISOString(),author:null,title:n.title})):(e.checked=!0,f({type:"compleateTask",when:(new Date).toISOString(),author:null,title:n.title}))}),y.insertAdjacentElement("beforeend",i)}),g.insertAdjacentElement("beforeend",y);var w=document.createElement("input");w.type="text",w.classList.add("form-input","input-sm");var _=function(i){i.onkeydown=function(t){if((i.value.trim()+"").length<=0?i.classList.add("is-error"):i.classList.remove("is-error"),"Enter"===t.code&&0<(i.value.trim()+"").length){t.target.disabled=!0;var e="".concat(v().substring(2,-9),".").concat(v().substring(5,3)),n=document.createElement("dd");n.innerHTML='<div class="taskDraggerHolder"><i class="icon icon-menu taskDragger"></i></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="form-checkbox">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="checkbox">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="form-icon"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div name="titleHolder">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div name="calendar" data-date="'.concat(v(),'" data-lid="').concat(h.id,'" title="Изменить дату">').concat(e,'</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div name="time" data-time="').concat(m(),'" title="Изменить время">').concat(m(),'</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div name="title" title="Изменить название">').concat(i.value,'</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar avatar-sm" data-initial="?"></figure>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>'),y.insertAdjacentElement("beforeend",n),h._csrf=document.getElementById("csrfToken").value,u(n),d(n.querySelector('[name="calendar"]'),n.querySelector('[name="time"]'),h.id),p(n.querySelector('[name="time"]'),h.id),b(n),"full"==$&&(n.querySelector("i.form-icon").onclick=function(t){var e=n.querySelector("input");e.checked?(e.checked=!1,f({type:"declineTask",when:new Date,author:null,title:t.target.parentElement.querySelector('[name="titleHolder"] [name="title"]').innerText})):(e.checked=!0,f({type:"compleateTask",when:new Date,author:null,title:t.target.parentElement.querySelector('[name="titleHolder"] [name="title"]').innerText}))}),f({type:"newTask",when:(new Date).toISOString(),author:null,title:i.value}).then(function(){t.target.value="",t.target.disabled=!1,t.target.focus()})}}};_(w),y.querySelectorAll(".taskDragger").forEach(function(t){t.onmousedown=function(t){W.classList.remove("dragscroll"),G(3).reset()}}),y.querySelectorAll(".taskDragger").forEach(function(t){t.onmouseup=function(t){W.classList.contains("dragscroll")||(W.classList.add("dragscroll"),G(3).reset())}});var k=document.createElement("div");k.classList.add("card-footer","input-group"),k.insertAdjacentElement("beforeend",w),g.insertAdjacentElement("beforeend",k);var x=document.createElement("div");x.classList.add("story","menu-tab","d-hide"),x.name=3;var S=document.createElement("div");S.classList.add("form-group","m-0","pl-2"),S.innerHTML='\n\t\t\t\t\t\t\t\t\t<label class="form-switch">\n\t\t\t\t\t\t\t\t\t\t<input type="checkbox">\n\t\t\t\t\t\t\t\t\t\t<i class="form-icon"></i> Полная история\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t',S.querySelector("input").oninput=function(e){E.querySelectorAll(".timeline-item").forEach(function(t){return t.classList.contains("unnecessary")&&!e.target.checked?t.classList.add("d-hide"):t.classList.remove("d-hide")})};var E=document.createElement("div");E.classList.add("timeline"),h.lid_data||(h.lid_data={}),h.lid_data.history||(h.lid_data.history=[]);var T=function(){E.innerHTML="",Array.from(h.lid_data.history.reverse()).forEach(function(t){var r=document.createElement("div");r.classList.add("timeline-item");var o=document.createElement("div");o.classList.add("timeline-left"),o.innerHTML='<a class="timeline-icon"></a>',r.insertAdjacentElement("afterbegin",o);function e(t,e){var n=1<arguments.length&&void 0!==e?e:[];r.classList.add("icon-lg");var i=o.querySelector("a");i.classList.add("icon-lg"),n.forEach(function(t){return i.classList.add(t)}),i.insertAdjacentElement("beforeend",t)}var n=document.createElement("div");n.classList.add("timeline-content");function i(t){var e=t.querySelector("a"),n=t.querySelector("audio");n&&(e.onclick=function(){n.classList.contains("d-hide")?(n.pause(),n.currentTime=0):n.focus(),n.classList.toggle("d-hide")},n.onblur=function(){n.pause(),n.currentTime=0,n.classList.add("d-hide")})}var a=t.when?V(new Date(t.when).getDate())+"."+V(new Date(t.when).getMonth())+" "+V(new Date(t.when).getHours())+":"+V(new Date(t.when).getMinutes()):"...",s=Math.floor(t.duration/60/60%60)?Math.floor(t.duration/60/60%60):null,l=Math.floor(t.duration/60%60),c=Math.floor(t.duration%60),u=t.duration?s?V(s)+":"+V(l)+":"+V(c):V(l)+":"+V(c):"<неизвестно>",d=document.createElement("i");switch(t.type){case"create":d.classList.add("icon","icon-plus"),e(d);var h="phonecall"==t.from?"звонок по телефону "+t.diversion:"website"==t.from?"сайт":"неизвестный источник";n.innerHTML='<span name="time">'.concat(a,"</span> Заявка принта через ").concat(h," ").concat(t.author?"пользователем <b>"+t.author+"</b>":""),r.classList.add("unnecessary","d-hide");break;case"progress":d.classList.add("icon","icon-share"),e(d),n.innerHTML='<span name="time">'.concat(a,"</span> Лид был перемещён с шага «").concat(t.oldStep,"» на «").concat(t.newStep,"»"),r.classList.add("unnecessary","d-hide");break;case"callIn":d.classList.add("icon","icon-download"),e(d,["bg-success"]),n.innerHTML='<span name="time">'.concat(a,'</span> <a>Входящий вызов <i class="icon icon-arrow-up"></i></a> ').concat("Success"!=t.status?"был пропущен":"был принят"," пользователем <b>").concat(t.author,"</b> ").concat(u?"продолжительностью <b>"+u+"</b>":""," ").concat(t.link?'<audio src="'.concat(t.link,'" controls class="d-hide"></audio>'):""),i(n);break;case"callOut":d.classList.add("icon","icon-upload"),e(d),n.innerHTML='<span name="time">'.concat(a,'</span> <a>Исходящий вызов <i class="icon icon-arrow-up"></i></a> ').concat("Success"!=t.status?"был пропущен":"был принят"," пользователем <b>").concat(t.author,"</b> ").concat(u?"продолжительностью <b>"+u+"</b>":""," ").concat(t.link?'<audio src="'.concat(t.link,'" controls class="d-hide"></audio>'):""),i(n);break;case"callMissed":d.classList.add("icon","icon-more-horiz"),e(d,["bg-error"]),n.innerHTML='<span name="time">'.concat(a,'</span> <a>Вызов <i class="icon icon-arrow-up"></i></a> ').concat("Success"!=t.status?"был пропущен":"был принят"," пользователем <b>").concat(t.author,"</b> ").concat(u?"продолжительностью <b>"+u+"</b>":""," ").concat(t.link?'<audio src="'.concat(t.link,'" controls class="d-hide"></audio>'):""),i(n);break;case"newTask":n.innerHTML='<span name="time">'.concat(a,"</span> Создана новая задача «").concat(t.title,"»"),r.classList.add("unnecessary","d-hide");break;case"editTitleTask":d.classList.add("icon","icon-edit"),e(d,["bg-warning"]),n.innerHTML='<span name="time">'.concat(a,"</span> Задача «").concat(t.oldTitle,"» теперь называется «").concat(t.newTitle,"»"),r.classList.add("unnecessary","d-hide");break;case"editDateTask":n.innerHTML='<span name="time">'.concat(a,"</span> Дата выполнения задачи «").concat(t.title,"» перенесена с ").concat(t.oldDate," на ").concat(t.newDate),r.classList.add("unnecessary","d-hide");break;case"editTimeTask":n.innerHTML='<span name="time">'.concat(a,"</span> Время выполнения «").concat(t.title,"» задачи перенесено с ").concat(t.oldTime," на ").concat(t.newTime),r.classList.add("unnecessary","d-hide");break;case"compleateTask":d.classList.add("icon","icon-check"),e(d,["bg-success"]),n.innerHTML='<span name="time">'.concat(a,"</span> Задача «").concat(t.title,"» выполнена"),r.classList.add("unnecessary","d-hide");break;case"declineTask":d.classList.add("icon","icon-cross"),e(d,["bg-error"]),n.innerHTML='<span name="time">'.concat(a,"</span> Выполнение задачи «").concat(t.title,"» было отменено"),r.classList.add("unnecessary","d-hide");break;case"removeTask":d.classList.add("icon","icon-delete"),e(d),n.innerHTML='<span name="time">'.concat(a,"</span> Задача «").concat(t.oldTitle,"» удалена"),r.classList.add("unnecessary","d-hide");break;case"newData":d.classList.add("icon","icon-edit"),e(d,["bg-success"]),n.innerHTML='<span name="time">'.concat(a,"</span>Добавлено значение «").concat(t.title,"»: ").concat(t.value),r.classList.add("unnecessary","d-hide");break;case"editData":d.classList.add("icon","icon-edit"),e(d,["bg-warning"]),n.innerHTML='<span name="time">'.concat(a,"</span> Значение «").concat(t.title,"» изменено на ").concat(t.newValue,", было ").concat(t.oldValue),r.classList.add("unnecessary","d-hide");break;case"removeData":d.classList.add("icon","icon-edit"),e(d,["bg-error"]),n.innerHTML='<span name="time">'.concat(a,"</span> Значение «").concat(t.title,"» было отчищено"),r.classList.add("unnecessary","d-hide");break;case"editComment":d.classList.add("icon","icon-edit"),e(d,["bg-warning"]),n.innerHTML='<span name="time">'.concat(a,"</span> Внесенны изменения в коментарий"),r.classList.add("unnecessary","d-hide")}r.insertAdjacentElement("beforeend",n),E.insertAdjacentElement("beforeend",r)}),h.lid_data.history.reverse()};T(),n.ondragend=function(){return T()},x.insertAdjacentElement("beforeend",S),x.insertAdjacentElement("beforeend",E);var O=document.createElement("dl");function M(t){var e=document.createElement("div");e.classList.add("divider","text-center"),e.dataset.content=t+"",O.insertAdjacentElement("beforeend",e)}O.classList.add("about","menu-tab","d-hide"),O.name=1,[{title:"Название",value:h.title,key:"title",type:"text",max:120},{title:"Вал",value:h.gi,key:"gi",type:"money"},{title:"Маржа",value:h.cgi,key:"cgi",type:"money"},{title:"Предоплата",value:h.prepayment,key:"prepayment",type:"money"},{title:"Доплата",value:h.restpayment,key:"restpayment",type:"money"}].forEach(function(t){var e=document.createElement("dd");e.classList.add("d-flex");var n=document.createElement("div");n.innerText=t.title,n.classList.add("title"),e.insertAdjacentElement("beforeend",n);var r=document.createElement("input");r.value=t.value,r.dataset.old=t.value,r.dataset.key=t.key;var o="money"==t.type?new X.a(r,{numeral:!0,delimiter:" "}):null;"money"!=t.type&&(r.value=t.value);function i(){r.disabled=!0;var t=o?o.getRawValue():r.value;h[r.dataset.key]=t+"";var e={type:"newData",when:(new Date).toISOString(),author:null,title:r.parentElement.querySelector(".title").innerText,value:t},n={type:"editData",when:(new Date).toISOString(),author:null,title:r.parentElement.querySelector(".title").innerText,oldValue:r.dataset.old,newValue:t},i={type:"removeData",when:(new Date).toISOString(),author:null,title:r.parentElement.querySelector(".title").innerText};r.dataset.old!=t&&(0==r.dataset.old.length?f(e).then(function(){return r.dataset.old=t}):0!=t.trim().length?f(n).then(function(){return r.dataset.old=t}):f(i).then(function(){return r.dataset.old=t})),r.dataset.old=t,O.querySelectorAll("dd input").forEach(function(t){return t.disabled=!1})}r.onkeyup=function(t){"Enter"==t.code&&i()},r.onblur=i,r.placeholder="...",e.insertAdjacentElement("beforeend",r),O.insertAdjacentElement("beforeend",e)}),M("Коментарий");var D=document.createElement("textarea");D.value=D.dataset.old=h.lid_data.commnet?h.lid_data.commnet:"";var C=document.createElement("button");C.classList.add("btn","btn-sm"),C.disabled=!0,C.innerText="Сохранить","full"==$&&(C.onclick=function(t){D.value!=D.dataset.old&&(C.disabled=!0,h.lid_data.commnet=D.value,f({type:"editComment",when:(new Date).toISOString(),author:null}),D.dataset.old=D.value)}),D.oninput=function(t){t.target.value==t.target.dataset.old?C.disabled=!0:C.disabled=!1},O.insertAdjacentElement("beforeend",D),O.insertAdjacentElement("beforeend",C),M("Ответственный");var L=document.createElement("div");O.insertAdjacentElement("beforeend",L),fetch("/office/users/",{method:"POST",body:JSON.stringify({id:h.responsible,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){var e=t[0];L.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t\t\t<div class="d-flex responsibleUser mt-2 p-relative">\n\t\t\t\t\t\t\t\t\t\t<figure class="avatar contact" data-initial="'.concat(h.responsible?e.fio?e.fio.slice(0,1):e.login.slice(0,1):"?",'"></figure>\n\t\t\t\t\t\t\t\t\t\t<div>\t\n\t\t\t\t\t\t\t\t\t\t\t<div name="rtitle">').concat(h.responsible?e.fio?e.fio:e.login:"Назначить ответственного","</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>")),L.querySelector(".responsibleUser").onclick=function(t){var n=document.getElementById("responsibleListModal");n.classList.add("active");var e=document.getElementById("responsibleList");fetch("/office/users/",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){e.innerHTML="",t.forEach(function(t){e.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile p-2 c-hand user" data-id="'.concat(t.id,'" data-fio="').concat(t.fio,'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar avatar-sm" data-initial="').concat(t.fio.slice(0,1),'"></figure>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-content">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-title">').concat(t.fio,"</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>"))}),e.querySelectorAll(".tile").forEach(function(e){return e.onclick=function(t){n.classList.remove("active"),h.responsible=e.dataset.id,L.querySelector('.responsibleUser [name="rtitle"]').innerText=e.dataset.fio,L.querySelector(".responsibleUser figure").dataset.initial=e.dataset.fio.slice(0,1),f()}})})}}),M("Контакты");var A=document.createElement("div");"full"==$&&new J.a(A,{animation:150,handle:"figure",onEnd:function(){var e=[];A.querySelectorAll("div.contact").forEach(function(t){e.push(t.dataset.id)}),I.querySelectorAll("div.contact").forEach(function(t){e.push(t.dataset.id)}),h.sub_holders=e.join(","),f()}});var I=document.createElement("div");"full"==$&&new J.a(I,{animation:150,handle:"figure",onEnd:function(){var e=[];A.querySelectorAll("div.contact").forEach(function(t){e.push(t.dataset.id)}),I.querySelectorAll("div.contact").forEach(function(t){e.push(t.dataset.id)}),h.sub_holders=e.join(","),f()}});var P=document.createElement("div");P.classList.add("d-flex","contact","main");var j=document.createElement("figure");j.classList.add("avatar","contact"),j.dataset.initial="?",P.insertAdjacentElement("beforeend",j);var N=document.createElement("div");function B(){var a=O.querySelector(".main");fetch("/office/contacts/",{method:"POST",body:JSON.stringify({find:"byid",id:h.holder,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){var o=t[0];Promise.all([fetch("/office/contacts/",{method:"POST",body:JSON.stringify({find:"byid",id:o.parent,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/phones/",{method:"POST",body:JSON.stringify({find:"byparent",parent:o.id,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/email/",{method:"POST",body:JSON.stringify({find:"byparent",parent:o.id,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(t){var e=t[0][0],n=t[1],i=t[2][0];a.querySelector(".title").value=a.querySelector(".title").dataset.old=o.title,a.querySelector("figure").dataset.initial=o.title.slice(0,1),a.querySelectorAll(".form-radio input").forEach(function(t){return t.name="type"+h.holder}),"person"==o.type?a.querySelector(".form-autocomplete").classList.remove("d-hide"):a.querySelector(".form-autocomplete").classList.add("d-hide"),e&&(a.querySelectorAll('[name="searchCompany"]').value=e.title),a.querySelectorAll(".seven-prefix").forEach(function(t){t.querySelector(".new-phone")||t.remove()});var r=a.querySelector(".seven-prefix");n.forEach(function(t){r.insertAdjacentHTML("beforebegin",'<div class="seven-prefix"><input type="text" data-i="'+t.id+'" pattern="/d [0-9]/g" maxlength="10" placeholder="..." value="'+t.phone+'"></div>')}),a.querySelector(".mail").value=a.querySelector(".mail").dataset.old=i?i.email:""})})}function F(e,n){e.onkeyup=function(t){"Enter"==t.code&&0<e.value.trim().length&&(e.disabled=!1,e.dataset.old=e.value.trim(),fetch("/office/contacts/update",{method:"POST",body:JSON.stringify({id:n,title:e.value.trim(),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){return e.disabled=!1}))},e.onblur=function(){return e.value=e.dataset.old}}function R(t,i){t.forEach(function(n){n.onkeyup=function(t){"Enter"!=t.code||10!=n.value.trim().length||new RegExp(/\D/).test(n.value)?"Enter"==t.code&&0==n.value.trim().length&&"new"!=n.dataset.i&&(n.disabled=!0,fetch("/office/phones/update",{method:"POST",body:JSON.stringify({id:n.dataset.i,cmd:"delete",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){n.parentElement.remove()})):(n.disabled=!0,"new"!=n.dataset.i?fetch("/office/phones/update",{method:"POST",body:JSON.stringify({id:n.dataset.i,phone:n.value,parent:i,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(){n.disabled=!1}):fetch("/office/phones/update",{method:"POST",body:JSON.stringify({phone:n.value,parent:i,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){var e=document.createElement("div");e.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" data-i="'.concat(t.insertId,'" pattern="/d [0-9]/g" maxlength="10" placeholder="..." value="').concat(n.value,'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t')),n.parentElement.insertAdjacentHTML("beforebegin",e),R([e.querySelector("input")],i),n.value="",n.disabled=!1}))}})}function H(e,n){e.onkeyup=function(t){"Enter"==t.code&&0<e.value.trim().length&&(e.disabled=!0,fetch("/office/email/update",{method:"POST",body:JSON.stringify({id:"new"==e.dataset.i?null:e.dataset.i,email:e.value,parent:n,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){"new"==e.dataset.i&&(e.dataset.i=t.insertId),e.disabled=!1}))}}function z(){Promise.all([fetch("/office/contacts",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/phones/",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/email/",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(a){A.innerHTML="",I.innerHTML="",h.sub_holders.split(",").forEach(function(e){var n=a[0].find(function(t){return t.id==e}),t=a[1].filter(function(t){return t.parent==e}),i=a[2].find(function(t){return t.parent==e}),r="person"==n.type?A:I,o=[];t.forEach(function(t){o.push('<div class="seven-prefix"><input type="text" data-i="'+t.id+'" pattern="/d [0-9]/g" maxlength="10" placeholder="..." value="'+t.phone+'"></div>')}),r.insertAdjacentHTML("beforeend",'\n                        <div data-id="'.concat(n.id,'" class="d-flex contact mt-2 p-relative subholder">\n                          <figure class="avatar contact" data-initial="').concat(n.title.slice(0,1),'"></figure>\n                          <div>\n                            <div>\n                              <input class="title w100" data-old="').concat(n&&n.title?n.title:"",'" type="text" pattern="/d [0-9]/g" maxlength="50" placeholder="Без названия" value="').concat(n&&n.title?n.title:"",'">\n                            </div>\n                            ').concat(o.join(""),'\n                            <input class="w100 mail" data-id="').concat(i&&i.id?i.id:"new",'" data-old="').concat(i&&i.email?i.email:"",'" type="text" placeholder="pochta@email.ru" value="').concat(i&&i.email?i.email:"",'">\n                            <div class="pos-rt mt-2 pt-2 c-hand promoteBtn">\n                              <i class="icon icon-people"></i>\n                              <i class="icon icon-upward"></i>\n                            </div>\n                          </div>\n                          <div class="btn btn-clear pos-rt"></div>\n                        </div>\n                      ')),F(r.querySelectorAll('.subholder[data-id="'+n.id+'"] input.title'),n.id),R(r.querySelectorAll('.subholder[data-id="'+n.id+'"] .seven-prefix input'),n.id),H(r.querySelector('.subholder[data-id="'+n.id+'"] .mail'),n.id),r.querySelector('.subholder[data-id="'+n.id+'"] .btn-clear').onclick=function(t){if(confirm("Вы точно хотите убрать контакт?")){t.target.onclick=null;var e=(h.sub_holders+"").split(",").filter(function(t){return t!=n.id});h.sub_holders=e.join(",")?e.join(","):"none",f().then(function(){return r.querySelector('[data-id="'+n.id+'"]').remove()})}},r.querySelector('.subholder[data-id="'+n.id+'"] .promoteBtn').onclick=function(t){var e=[];h.sub_holders.split(",").forEach(function(t){t!=n.id&&e.push(t)}),e.push(h.holder),h.holder=n.id,h.sub_holders=e.join(","),f().then(function(){z(),B()})}})})}function Y(o){var a=document.createElement("div");a.classList.add("d-flex","contact","mt-2","c-hand"),a.innerHTML='\n\t\t\t\t\t\t\t\t\t\t<div class="d-flex contact mt-2 p-relative c-hand">\n\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar contact" data-initial="+"></figure>\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div>'.concat("person"==o?"Добавить контакт":"Добавить компанию","</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n                  ");var s="person"==o?A:I;a.onclick=function(){var r=document.getElementById("contactsSearcher");r.classList.add("active");var i=document.getElementById("searchNewSubContact"),e=document.getElementById("newSubContactSuggestion");i.value="";function t(){0<i.value.trim().length?fetch("/office/contacts",{method:"POST",body:JSON.stringify({title:(i.value+"").trim(),find:"liketitle",only:"person"==o?"person":"company",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){h.sub_holders&&h.sub_holders.split(",").forEach(function(e){return t=t.filter(function(t){return t.id!=e})}),e.innerHTML="",t.forEach(function(t){e.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<dd class="menu-item c-hand py-2" data-i="'.concat(t.id,'" data-title="').concat(t.title,'">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile tile-centered">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar avatar-sm" data-initial="').concat(t.title.slice(0,1),'"></figure>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-content">').concat(t.title,"</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t\t\t\t\t\t"))}),e.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t\t\t\t\t\t\t<dd class="menu-item c-hand py-2" data-i="new" data-title="'.concat(i.value,'" title="Создать новый контакт">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile tile-centered">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-icon">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar avatar-sm" data-initial="').concat(i.value.slice(0,1),'"></figure>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="tile-content">').concat(i.value,"</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t\t\t\t\t"));var n=e.querySelector("[data-i=new]");n.onclick=function(t){var e=(h.sub_holders+"").split(",").filter(function(t){return"null"!=t});fetch("/office/contacts/update",{method:"POST",body:JSON.stringify({title:i.value.trim(),type:"person"==o?"person":"company",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){e.push(t.insertId),h.sub_holders=e.join(","),r.classList.remove("active"),f().then(function(){s.insertAdjacentHTML("beforebegin",'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div data-id="'.concat(t.insertId,'" class="d-flex contact mt-2 p-relative">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar contact" data-initial="').concat(n.dataset.title.slice(0,1),'"></figure>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>').concat(n.dataset.title,'</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="seven-prefix"><input type="text" data-i="new" pattern="/d [0-9]/g" maxlength="10" placeholder="..."></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="btn btn-clear pos-rt"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t')),R(a.querySelectorAll("input"),t.insertId),H(a.querySelector(".mail"),t.insertId)})})},e.querySelectorAll("dd:not([data-i=new])").forEach(function(i){i.onclick=function(t){var e=(h.sub_holders+"").split(",").filter(function(t){return"null"!=t});e.push(i.dataset.i),h.sub_holders=e.join(","),r.classList.remove("active"),f().then(function(){Promise.all([fetch("/office/phones/",{method:"POST",body:JSON.stringify({parent:i.dataset.i,find:"byparent",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/email/",{method:"POST",body:JSON.stringify({parent:i.dataset.i,find:"byparent",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(t){var e=[];t[0].forEach(function(t){e.push('<div class="seven-prefix"><input type="text" data-i="'+t.id+'" pattern="/d [0-9]/g" maxlength="10" placeholder="..." value="'+t.phone+'"></div>')});var n=t[1][0];s.insertAdjacentHTML("beforeend",'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div data-id="'.concat(i.dataset.i,'" class="d-flex contact mt-2 p-relative subholder">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<figure class="avatar contact" data-initial="').concat(i.dataset.title.slice(0,1),'"></figure>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>').concat(i.dataset.title,"</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t").concat(e.join(""),'\n                                      <input class="w100 mail" data-id="').concat(n&&n.id?n.id:"new",'" data-old="').concat(n&&n.email?n.email:"",'" type="text" placeholder="pochta@email.ru" value="').concat(n&&n.email?n.email:"",'">\n                                      <div class="pos-rt mt-2 pt-2 c-hand promoteBtn">\n                                        <i class="icon icon-people"></i>\n                                        <i class="icon icon-upward"></i>\n                                      </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="btn btn-clear pos-rt"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n                                ')),R(s.querySelectorAll("input"),i.dataset.i),H(s.querySelector('.subholder[data-id="'+i.dataset.i+'"] .mail'),i.dataset.i),s.querySelector('.subholder[data-id="'+i.dataset.i+'"] .btn-clear').onclick=function(t){if(confirm("Вы точно хотите убрать контакт?")){t.target.onclick=null;var e=(h.sub_holders+"").split(",").filter(function(t){return t!=i.dataset.i});h.sub_holders=e.join(",")?e.join(","):"none",f().then(function(){return s.querySelector('[data-id="'+i.dataset.i+'"]').remove()})}},s.querySelector('.subholder[data-id="'+i.dataset.i+'"] .promoteBtn').onclick=function(t){var e=[];h.sub_holders.split(",").forEach(function(t){t!=i.dataset.i&&e.push(t)}),e.push(h.holder),h.holder=i.dataset.i,h.sub_holders=e.join(","),f().then(function(){B(),z()})}})})}})}):e.innerHTML=""}t(),i.oninput=function(){return t()}},s.insertAdjacentElement("afterend",a)}Promise.all([fetch("/office/phones/",{method:"POST",body:JSON.stringify({parent:h.holder,find:"byparent",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/email/",{method:"POST",body:JSON.stringify({parent:h.holder,find:"byparent",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/contacts/",{method:"POST",body:JSON.stringify({id:h.holder,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(t){var o=t[0],a=t[1][0],s=t[2][0];fetch("/office/contacts/",{method:"POST",body:JSON.stringify({id:s.parent?s.parent:0,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){var e=t[0];s&&s.title&&(j.dataset.initial=s.title.slice(0,1));var n=[];o.forEach(function(t){n.push('<div class="seven-prefix"><input data-id="'+t.id+'" data-old="'+t.phone+'" type="text" pattern="/d [0-9]/g" placeholder="..." value="'+t.phone+'" maxlength="10"></div>')}),n.push('<div class="seven-prefix"><input class="new-phone" type="text" pattern="/d [0-9]/g" placeholder="..." maxlength="10"></div>'),N.innerHTML='\n\t\t\t\t\t\t\t\t\t\t\t<input class="title w100" data-old="'.concat(s&&s.title?s.title:"",'" type="text" pattern="/d [0-9]/g" maxlength="50" placeholder="Без названия" value="').concat(s&&s.title?s.title:"",'">\n\t\t\t\t\t\t\t\t\t\t\t<div class="form-group m-0" name="contactType">\n\t\t\t\t\t\t\t\t\t\t\t\t\x3c!-- <label class="form-radio form-inline m-0">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="radio" name="type').concat(s.id,'" ').concat("person"==s.type?"checked":"",' value="person"><i class="form-icon"></i> Контакт\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t\t<label class="form-radio form-inline m-0">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input type="radio" name="type').concat(s.id,'" ').concat("company"==s.type?"checked":"",' value="company"><i class="form-icon"></i> Компания\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="form-autocomplete ').concat("person"==s.type?"":"d-hide",'">\n\t\t\t\t\t\t\t\t\t\t\t\t<input type="text" name="searchCompany" placeholder="Поиск..." value="').concat(e?e.title:"",'">\n\t\t\t\t\t\t\t\t\t\t\t\t<ul class="menu d-hide" name="suggestion"></ul>\n\t\t\t\t\t\t\t\t\t\t\t</div> --\x3e\n\t\t\t\t\t\t\t\t\t\t\t').concat(n.join(""),'\n\t\t\t\t\t\t\t\t\t\t\t<input class="w100 mail" data-id="').concat(a&&a.id?a.id:"new",'" data-old="').concat(a&&a.email?a.email:"",'" type="text" placeholder="pochta@email.ru" value="').concat(a&&a.email?a.email:"",'">\n\t\t\t\t\t\t\t\t\t\t'),N.querySelector(".mail").onkeyup=function(e){"Enter"==e.code&&e.target.dataset.old!=e.target.value&&(e.target.disabled=!0,fetch("/office/email/update",{method:"POST",body:JSON.stringify({id:"new"==e.target.dataset.id?null:e.target.dataset.id,email:e.target.value,parent:"new"==e.target.dataset.id?s.id:null,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){"new"==e.target.dataset.id&&(e.target.dataset.id=t.insertId),e.target.disabled=!1}))},N.querySelector(".title").onkeyup=function(t){"Enter"==t.code&&t.target.dataset.old!=t.target.value&&(t.target.dataset.old=t.target.value,N.querySelectorAll("input").forEach(function(t){return t.disabled=!0}),fetch("/office/contacts/update",{method:"POST",body:JSON.stringify({id:s.id,title:t.target.value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){c(),j.dataset.initial=t.target.value.slice(0,1),N.querySelectorAll("input").forEach(function(t){return t.disabled=!1})}))},N.querySelector(".title").onblur=function(t){t.target.value!=t.target.dataset.old&&(t.target.value=t.target.dataset.old)};function i(t){var e=(t.target.value+"").trim().length;10!=e||0!=e?t.target.parentElement.classList.add("error"):t.target.parentElement.classList.remove("error"),"Enter"!=t.code||10!=e||t.target.dataset.old==t.target.value||new RegExp(/\D/).test(t.target.value)?"Enter"==t.code&&0==e&&(N.querySelectorAll("input").forEach(function(t){return t.disabled=!0}),fetch("/office/phones/update",{method:"POST",body:JSON.stringify({id:t.target.dataset.id,phone:t.target.value,cmd:"delete",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){c(),t.target.parentElement.remove(),N.querySelectorAll("input").forEach(function(t){return t.disabled=!1})})):(t.target.dataset.old=t.target.value,N.querySelectorAll("input").forEach(function(t){return t.disabled=!0}),fetch("/office/phones/update",{method:"POST",body:JSON.stringify({id:t.target.dataset.id,phone:t.target.value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){c(),N.querySelectorAll("input").forEach(function(t){return t.disabled=!1})}))}function r(t){t.target.parentElement.classList.remove("error"),t.target.value!=t.target.dataset.old&&(t.target.value=t.target.dataset.old)}N.querySelectorAll(".seven-prefix input:not(.new-phone)").forEach(function(t){t.onkeyup=i,t.onblur=r});N.querySelector(".new-phone").onkeyup=function e(n){"Enter"!=n.code||n.target.value.trim().length+""!=10||new RegExp(/\D/).test(n.target.value)||(N.querySelectorAll("input").forEach(function(t){return t.disabled=!0}),fetch("/office/phones/update",{method:"POST",body:JSON.stringify({phone:n.target.value,parent:s.id,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){c(),n.target.classList.remove("new-phone"),n.target.onkeyup=i,n.target.dataset.id=t.insertId,N.querySelectorAll("input").forEach(function(t){return t.disabled=!1}),N.insertAdjacentHTML("beforeend",'<div class="seven-prefix"><input class="new-phone" type="text" pattern="/d [0-9]/g" placeholder="..." maxlength="10"></div>'),N.querySelector(".new-phone").onkeyup=e}))}})}),P.insertAdjacentElement("beforeend",N),O.insertAdjacentElement("beforeend",P),O.insertAdjacentElement("beforeend",A),M("Компании"),O.insertAdjacentElement("beforeend",I),h.sub_holders?Promise.all([fetch("/office/phones/",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/email/",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(d){var t=[];(h.sub_holders+"").split(",").forEach(function(u){t.push(fetch("/office/contacts/",{method:"POST",body:JSON.stringify({id:u,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){var n=t[0],e=d[0].filter(function(t){return t.parent==n.id}),i=d[1].filter(function(t){return t.parent==n.id})[0],r=document.createElement("div");r.dataset.id=n.id,r.classList.add("d-flex","contact","mt-2","p-relative");var o=document.createElement("figure");o.classList.add("avatar","contact"),o.dataset.initial=n?n.title.slice(0,1):"?",r.insertAdjacentElement("beforeend",o);var a=document.createElement("div"),s=[];e.forEach(function(t){s.push('<div class="seven-prefix"><input type="text" data-i="'+t.id+'" pattern="/d [0-9]/g" maxlength="10" placeholder="..." value="'+t.phone+'"></div>')}),s.push('<div class="seven-prefix"><input type="text" data-i="new" pattern="/d [0-9]/g" maxlength="10" placeholder="..."></div>');var l=document.createElement("div");l.classList.add("pos-rt","mt-2","pt-2","c-hand"),l.innerHTML='<i class="icon icon-people"></i><i class="icon icon-upward"></i>',l.onclick=function(t){var e=[];h.sub_holders.split(",").forEach(function(t){t!=n.id&&e.push(t)}),e.push(h.holder),h.holder=n.id,h.sub_holders=e.join(","),f().then(function(){z(),B()})},a.innerHTML='\n                          <div>\n                            <input class="title w100" data-old="'.concat(n&&n.title?n.title:"",'" type="text" pattern="/d [0-9]/g" maxlength="50" placeholder="Без названия" value="').concat(n&&n.title?n.title:"",'">\n                          </div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t').concat(s.join(""),'\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input class="w100 mail" data-id="').concat(i&&i.id?i.id:"new",'" data-old="').concat(i&&i.email?i.email:"",'" type="text" placeholder="pochta@email.ru" value="').concat(i&&i.email?i.email:"",'">\n                        '),a.insertAdjacentElement("beforeend",l),F(a.querySelector("input.title"),u),R(a.querySelectorAll(".seven-prefix input"),u),H(a.querySelector(".mail"),u),r.insertAdjacentElement("beforeend",a);var c=document.createElement("div");c.classList.add("btn","btn-clear","pos-rt"),c.onclick=function(t){if(confirm("Вы точно хотите убрать контакт?")){c.onclick=null;var e=(h.sub_holders+"").split(",").filter(function(t){return t!=n.id});h.sub_holders=e.join(",")?e.join(","):"none",f().then(function(){"none"==h.sub_holders&&(h.sub_holders=null),r.remove()})}},r.insertAdjacentElement("beforeend",c),"person"==n.type?A.insertAdjacentElement("beforeend",r):I.insertAdjacentElement("beforeend",r)}))}),Promise.all(t).then(function(){Y("person"),Y("company")})}):(Y("person"),Y("company")),M("Взаимодействия");var q=document.createElement("button");q.classList.add("btn","btn-sm","btn-error","p-centered"),q.innerText="Удалить лид",q.onclick=function(t){confirm("Вы уверены что хотите удалить лид?")&&confirm("И дважды подумали?")&&(h.active=0,W.classList.add("dragscroll"),G(3).reset(),f().then(function(){return n.remove()}))},O.insertAdjacentElement("beforeend",q),s.insertAdjacentElement("beforeend",g),s.insertAdjacentElement("beforeend",x),s.insertAdjacentElement("beforeend",O),n.insertAdjacentElement("beforeend",s),n.insertAdjacentElement("beforeend",o),a.onclick=function t(){s.classList.add("fadeIn"),s.classList.remove("d-hide"),n.classList.add("active"),a.classList.remove("flip-back"),a.classList.add("flip"),w.focus(),W.classList.remove("dragscroll"),G(3).reset(),a.onclick=function(){s.classList.add("d-hide"),s.classList.remove("fadeIn"),n.classList.remove("active"),a.classList.add("flip-back"),a.classList.remove("flip"),a.onclick=t,n.querySelectorAll("input").forEach(function(t){return t.blur()}),W.classList.add("dragscroll"),G(3).reset()}},t.onmousedown=function(t){W.classList.remove("dragscroll"),G(3).reset()},t.onmouseup=function(t){W.classList.contains("dragscroll")||(W.classList.add("dragscroll"),G(3).reset())}}t.lids.forEach(function(t){e(t)}),"full"==$&&new J.a(U.content,{group:"steps",animation:150,handle:".lid-drag",ghostClass:"grabbingLid",onStart:function(t){t.item.querySelector(".lid-menu").classList.add("d-hide"),t.item.querySelector(".lid-menu").classList.remove("active"),t.item.querySelector(".expand").classList.add("flip-back"),t.item.querySelector(".expand").classList.remove("flip")},onEnd:function(e){var t=JSON.parse(e.item.dataset.data);t.step_id=e.to.dataset.id,e.from.parentElement.dataset.id!=e.to.parentElement.dataset.id&&(t.lid_data.history.push({type:"progress",when:(new Date).toISOString(),author:null,oldStep:e.from.parentElement.dataset.title,newStep:e.to.parentElement.dataset.title}),t._csrf=document.getElementById("csrfToken").value,fetch("/office/lids/update/",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(function(){var t=document.createElement("div");t.classList.add("timeline-item","icon-lg"),t.innerHTML='\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="timeline-left">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a class="timeline-icon icon-lg">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class="icon icon-share"></i>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="timeline-content">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span name="time">'.concat(V((new Date).getDate())+"."+V((new Date).getMonth())+" "+V((new Date).getHours())+":"+V((new Date).getMinutes())," </span> Лид был перемещён с шага «").concat(e.from.parentElement.querySelector(".step-title").innerText,"» на «").concat(e.to.parentElement.querySelector(".step-title").innerText,"»\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t"),e.item.querySelector(".timeline").insertAdjacentElement("afterbegin",t)})),W.classList.add("dragscroll"),G(3).reset()},onMove:function(e){Object(p.setTimeout)(function(){var t=e.dragged.offsetLeft-W.scrollLeft>.6*window.innerWidth?"right":e.dragged.offsetLeft-W.scrollLeft<.025*window.innerWidth?"left":"none";"right"==t?W.scroll({left:W.scrollLeft+e.dragged.toRect.width,behavior:"smooth"}):"left"==t&&W.scroll({left:W.scrollLeft-e.dragged.toRect.width,behavior:"smooth"})},150)}}),U.content.style.height="100%",U.step.insertAdjacentElement("beforeend",U.content),W.insertAdjacentElement("beforeend",U.step),U.step=document.createElement("div"),U.step.classList.add("input-group","col-12"),U.span=document.createElement("span"),U.span.classList.add("input-group-addon"),U.icon=document.createElement("span"),U.icon.classList.add("icon","icon-resize-vert"),U.span.insertAdjacentElement("beforeend",U.icon),U.step.insertAdjacentElement("beforeend",U.span),U.input=document.createElement("input"),U.input.classList.add("form-input"),U.input.type="text",U.input.dataset.last=U.input.value=t.stepData.title,U.input.name=t.stepData.id,U.step.insertAdjacentElement("beforeend",U.input),U.button=document.createElement("button"),U.button.classList.add("btn"),U.button.dataset.id=t.stepData.id,U.button.innerText="X",U.step.insertAdjacentElement("beforeend",U.button),document.getElementById("stepsHolder").insertAdjacentElement("beforeend",U.step)}),document.querySelectorAll("#stepsHolder button[data-id]").forEach(function(o){"full"==$&&(o.onclick=function(t){var e=document.getElementById("csrfToken").value,n=(o.dataset.id,document.createElement("div")),i=document.createElement("button");i.classList.add("btn"),i.classList.add("btn-error"),i.innerText="Удалить";var r=document.createElement("button");r.classList.add("btn"),r.innerText="Отмена",n.insertAdjacentElement("beforeend",i),n.insertAdjacentElement("beforeend",r),t.target.classList.add("d-hide"),t.path[1].insertAdjacentElement("beforeend",n),"full"==$&&(i.onclick=function(){o.parentElement.remove(),a()}),r.addEventListener("click",function(){t.target.classList.remove("d-hide"),n.remove()})})})});function n(){return document.getElementById("kanbanTitleChangeInput")}function r(){return document.getElementById("kanbanTitleChangeBtn")}function o(){var e=[];document.querySelectorAll("#stepsHolder input").forEach(function(t){return e.push(t.name)}),fetch("/office/pipes/"+location.pathname.split("/")[3],{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],title:document.getElementById("pipeTitle").value,kanban:{title:n().value,description:"",steps:e},key:l,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){s().innerText=n().value,s().classList.remove("d-hide"),r().classList.remove("d-hide"),n().classList.add("d-hide")}).catch(function(t){return console.error(t)})}var s=function(){return document.getElementById("kanbanTitle")};"full"==$&&(r().onclick=function(t){r().classList.add("d-hide"),s().classList.add("d-hide"),n().classList.remove("d-hide"),n().focus(),n().innerText=d.pipe.kanban[l].title}),n().onblur=function(t){o()},document.getElementById("kanbanTitleChangeInput").onkeydown=function(t){"Enter"===t.code&&o()},"full"==$&&(document.getElementById("deleteKanban").onclick=function(t){confirm("Вы точно хотите удалить kanban?")&&fetch("/office/pipes/"+location.pathname.split("/")[3],{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],title:document.getElementById("pipeTitle").value,key:l,delete:!0,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){document.getElementById("kanbanStepsList").classList.remove("active"),W.childNodes.forEach(function(t){return t.remove()}),f.init(l)}).catch(function(t){return console.error(t)})})},n===l&&c.click(),h.insertAdjacentElement("beforeend",t)}for(var e in d.pipe.kanban)t(e)})}}]),t}()},,,,,function(t,r,o){(function(t){var e=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}r.setTimeout=function(){return new i(n.call(setTimeout,e,arguments),clearTimeout)},r.setInterval=function(){return new i(n.call(setInterval,e,arguments),clearInterval)},r.clearTimeout=r.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(e,this._id)},r.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},r.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},r._unrefActive=r.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},o(46),r.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,r.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,o(7))},,,,,function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&f())}function f(){if(!u){var t=s(h);u=!0;for(var e=c.length;e;){for(l=c,c=[];++d<e;)l&&l[d].run();d=-1,e=c.length}l=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||u||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){function u(t){return!!(""===t||t&&t.charCodeAt&&t.substr)}function d(t){return i?i(t):"[object Array]"===r.call(t)}function h(t){return"[object Object]"===r.call(t)}function f(t,e){var n;t=t||{},e=e||{};for(n in e)e.hasOwnProperty(n)&&null==t[n]&&(t[n]=e[n]);return t}function p(t,e,n){var i,r,o=[];if(!t)return o;if(a&&t.map===a)return t.map(e,n);for(i=0,r=t.length;i<r;i++)o[i]=e.call(n,t[i],i,t);return o}function v(t,e){return t=Math.round(Math.abs(t)),isNaN(t)?e:t}function m(t){var e=g.settings.currency.format;return"function"==typeof t&&(t=t()),u(t)&&t.match("%v")?{pos:t,neg:t.replace("-","").replace("%v","-%v"),zero:t}:t&&t.pos&&t.pos.match("%v")?t:u(e)?g.settings.currency.format={pos:e,neg:e.replace("%v","-%v"),zero:e}:e}
/*!
 * accounting.js v0.4.2, copyright 2014 Open Exchange Rates, MIT license, http://openexchangerates.github.io/accounting.js
 */
var g,a,i,r,y,c,b,l;g={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},a=Array.prototype.map,i=Array.isArray,r=Object.prototype.toString,y=g.unformat=g.parse=function(t,e){if(d(t))return p(t,function(t){return y(t,e)});if("number"==typeof(t=t||0))return t;e=e||".";var n=RegExp("[^0-9-"+e+"]",["g"]);n=parseFloat((""+t).replace(/\((.*)\)/,"-$1").replace(n,"").replace(e,"."));return isNaN(n)?0:n},c=g.toFixed=function(t,e){e=v(e,g.settings.number.precision);var n=Math.pow(10,e);return(Math.round(g.unformat(t)*n)/n).toFixed(e)},b=g.formatNumber=g.format=function(t,e,n,i){if(d(t))return p(t,function(t){return b(t,e,n,i)});t=y(t);var r=f(h(e)?e:{precision:e,thousand:n,decimal:i},g.settings.number),o=v(r.precision),a=t<0?"-":"",s=parseInt(c(Math.abs(t||0),o),10)+"",l=3<s.length?s.length%3:0;return a+(l?s.substr(0,l)+r.thousand:"")+s.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+r.thousand)+(o?r.decimal+c(Math.abs(t),o).split(".")[1]:"")},l=g.formatMoney=function(t,e,n,i,r,o){if(d(t))return p(t,function(t){return l(t,e,n,i,r,o)});t=y(t);var a=f(h(e)?e:{symbol:e,precision:n,thousand:i,decimal:r,format:o},g.settings.currency),s=m(a.format);return(0<t?s.pos:t<0?s.neg:s.zero).replace("%s",a.symbol).replace("%v",b(Math.abs(t),v(a.precision),a.thousand,a.decimal))},g.formatColumn=function(t,e,n,i,r,o){if(!t)return[];var a=f(h(e)?e:{symbol:e,precision:n,thousand:i,decimal:r,format:o},g.settings.currency),s=m(a.format),l=s.pos.indexOf("%s")<s.pos.indexOf("%v"),c=0;t=p(t,function(t){return d(t)?g.formatColumn(t,a):((t=(0<(t=y(t))?s.pos:t<0?s.neg:s.zero).replace("%s",a.symbol).replace("%v",b(Math.abs(t),v(a.precision),a.thousand,a.decimal))).length>c&&(c=t.length),t)});return p(t,function(t){return u(t)&&t.length<c?l?t.replace(a.symbol,a.symbol+Array(c-t.length+1).join(" ")):Array(c-t.length+1).join(" ")+t:t})},t.exports&&(e=t.exports=g),e.accounting=g},,function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},,,,,,,,,,function(t,e){},function(t,e,n){var i=function(o){"use strict";var l,t=Object.prototype,c=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function a(t,e,n,i){var r=e&&e.prototype instanceof s?e:s,o=Object.create(r.prototype),a=new O(i||[]);return o._invoke=function(o,a,s){var l=d;return function(t,e){if(l===f)throw new Error("Generator is already running");if(l===p){if("throw"===t)throw e;return D()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var i=S(n,s);if(i){if(i===v)continue;return i}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(l===d)throw l=p,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);l=f;var r=u(o,a,s);if("normal"===r.type){if(l=s.done?p:h,r.arg===v)continue;return{value:r.arg,done:s.done}}"throw"===r.type&&(l=p,s.method="throw",s.arg=r.arg)}}}(t,n,a),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}o.wrap=a;var d="suspendedStart",h="suspendedYield",f="executing",p="completed",v={};function s(){}function m(){}function g(){}var y={};y[r]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(M([])));w&&w!==t&&c.call(w,r)&&(y=w);var _=g.prototype=s.prototype=Object.create(y);function k(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function x(l){var e;this._invoke=function(n,i){function t(){return new Promise(function(t,e){!function e(t,n,i,r){var o=u(l[t],l,n);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"==typeof s&&c.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,i,r)},function(t){e("throw",t,i,r)}):Promise.resolve(s).then(function(t){a.value=t,i(a)},function(t){return e("throw",t,i,r)})}r(o.arg)}(n,i,t,e)})}return e=e?e.then(t,t):t()}}function S(t,e){var n=t.iterator[e.method];if(n===l){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=l,S(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=u(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var r=i.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=l),e.delegate=null,v):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function M(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=l,t.done=!0,t};return i.next=i}}return{next:D}}function D(){return{value:l,done:!0}}return m.prototype=_.constructor=g,g.constructor=m,g[i]=m.displayName="GeneratorFunction",o.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,i in t||(t[i]="GeneratorFunction")),t.prototype=Object.create(_),t},o.awrap=function(t){return{__await:t}},k(x.prototype),x.prototype[n]=function(){return this},o.AsyncIterator=x,o.async=function(t,e,n,i){var r=new x(a(t,e,n,i));return o.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},k(_),_[i]="Generator",_[r]=function(){return this},_.toString=function(){return"[object Generator]"},o.keys=function(n){var i=[];for(var t in n)i.push(t);return i.reverse(),function t(){for(;i.length;){var e=i.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},o.values=M,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var i=this;function t(t,e){return o.type="throw",o.arg=n,i.next=t,e&&(i.method="next",i.arg=l),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e],o=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var a=c.call(r,"catchLoc"),s=c.call(r,"finallyLoc");if(a&&s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&c.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:M(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=l),v}},o}(t.exports);try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}},function(t,e,n){"use strict";function i(){var n=document.getElementById("addPipeBtn");"full"==document.getElementById("access").value&&n.addEventListener("click",function(t){n.disabled="disabled";var e={_csrf:document.getElementById("csrfToken").value};fetch("/office/pipes",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){window.location="/office/pipes/"+t.id}).catch(function(t){return console.error(t)})});var i=document.getElementById("select");i.addEventListener("click",function(t){var e={_csrf:document.getElementById("csrfToken").value,id:i.value};fetch("/office/getPipes",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){!function(t){document.getElementById("pipe");var e=document.getElementById("pipeTitle");document.getElementById("pipeStepsHolder"),document.getElementById("editPipeBtn").addEventListener("click",function(){return window.location="/office/pipes/"+t.pipe.id}),t.pipe&&(e.querySelector("h2").innerText=t.pipe.title)}(t)}).catch(function(t){return console.error(t)})}),i.click(),document.getElementById("select").innerHTML||(document.getElementById("editPipeBtn").disabled=!0)}n.r(e),n.d(e,"pipesRouteScript",function(){return i})},function(t,e,n){"use strict";n.r(e),n.d(e,"init",function(){return i});document.getElementById("access").value;function i(){var r=document.getElementById("createLidModal"),o=document.getElementById("addLidBtn");o.onclick=function(t){r.classList.add("active")};function t(e,t){function n(){e.value.toString().trim().length>t?e.classList.remove("is-error"):e.classList.add("is-error")}e.addEventListener("input",n),e.addEventListener("focus",n),e.addEventListener("blur",function(t){e.classList.remove("is-error")})}var a=document.getElementById("lidTitle"),s=document.getElementById("lidStep"),l=document.getElementById("lidGi"),c=document.getElementById("lidCgi"),u=document.getElementById("lidPrepayment"),d=document.getElementById("lidRestpayment"),h=document.getElementById("lidComment"),f=document.getElementById("lidContactTitle"),p=document.getElementById("lidHolderUser"),v=document.getElementById("newPhone"),n=document.getElementById("found"),m=document.getElementById("creatingContactHolder"),g=document.getElementById("lidContactType"),y=document.getElementById("rejectCrateingLid"),b=document.getElementById("confirmCreatingLid");t(a,0),t(f,0);function e(){n.querySelector("a").onclick=function(t){p.value="Новый контакт",p.dataset.id="new",n.classList.add("d-hide"),m.classList.remove("d-hide")}}p.oninput=function(t){delete p.dataset.id,0<(t.target.value+"").trim().length?(n.innerHTML="",n.classList.remove("d-hide"),fetch("/office/contacts",{method:"POST",body:JSON.stringify({title:(t.target.value+"").trim(),find:"liketitle",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){t.forEach(function(t){n.insertAdjacentHTML("beforeend",'\n                        <li class="menu-item"><a class="c-hand" data-id="'.concat(t.id,'" data-title="').concat(t.title,'">\n                            <div class="tile tile-centered">\n                                <div class="tile-icon"><figure class="avatar avatar-sm" data-initial="').concat(t.title.slice(0,1),'"></figure></div>\n                                <div class="tile-content">').concat(t.title,"</div>\n                            </div>\n                        </a></li>\n                    "))}),n.childElementCount||(n.insertAdjacentHTML("beforeend",'\n                        <li class="menu-item"><a class="c-hand new">\n                            <div class="tile tile-centered">\n                                <div class="tile-icon"><figure class="avatar avatar-sm" data-initial="?"></figure></div>\n                                <div class="tile-content">Новый контакт</div>\n                            </div>\n                        </a></li>\n                    '),e()),n.querySelectorAll("a").forEach(function(e){e.onclick=function(t){m.classList.add("d-hide"),p.value=e.dataset.title,n.classList.add("d-hide"),p.dataset.id=e.dataset.id,fetch("/office/contacts",{method:"POST",body:JSON.stringify({id:e.dataset.id,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){f.value=t[0].title})}})})):n.classList.add("d-hide")},p.onfocus=function(t){n.classList.remove("d-hide"),p.value||(n.innerHTML="",n.insertAdjacentHTML("beforeend",'\n                <li class="menu-item"><a class="c-hand new">\n                    <div class="tile tile-centered">\n                        <div class="tile-icon"><figure class="avatar avatar-sm" data-initial="?"></figure></div>\n                        <div class="tile-content">Новый контакт</div>\n                    </div>\n                </a></li>\n            '),e())},p.onblur=function(t){setTimeout(function(){t.target!=document.activeElement&&n.classList.add("d-hide")},1e3)},b.onclick=function(t){if(0<(a.value+"").trim().length&&p.dataset.id||"new"==p.dataset.id&&10==v.value.trim().length&&0<f.value.trim().length){var e=function(){a.value="",s.value=1,l.value=0,c.value=0,u.value=0,d.value=0,h.value="",v.value="",f.value="",m.classList.add("d-hide")};b.classList.add("loading"),a.disabled=!0,s.disabled=!0,l.disabled=!0,c.disabled=!0,u.disabled=!0,d.disabled=!0,h.disabled=!0,y.disabled=!0,p.disabled=!0;var n=function(t){return fetch("/office/lids/create",{method:"POST",body:JSON.stringify({title:a.value,lid_data:{comment:h.value},step_id:s.value,tunnel_id:s.querySelector('[value="'+s.value+'"]').dataset.pipe,gi:l.value,cgi:c.value,prepayment:u.value,restpayment:d.value,holder:t,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){o.insertAdjacentHTML("beforebegin",'\n                        <tr>\n                            <td class="id pl-2">'.concat(t.insertId,'</td>\n                            <td class="title">').concat(a.value,'</td>\n                            <td class="date">').concat((new Date).toISOString().split("T")[0].split("-")[1],".").concat((new Date).toISOString().split("T")[0].split("-")[2]," ").concat((new Date).toISOString().split("T")[1].slice(0,8),'</td>\n                            <td class="gi">').concat(l.value,' р.</td>\n                            <td class="contact"><span class="name">').concat(f.value,"</span></td>\n                        </tr>\n                    "))})};if("new"==p.dataset.id){var i=Array.from(g.querySelectorAll("input")).find(function(t){return!!t.checked}).value;fetch("/office/contacts/update",{method:"POST",body:JSON.stringify({title:f.value,type:i,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){fetch("/office/phones/update",{method:"POST",body:JSON.stringify({phone:v.value,parent:t.insertId,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){n(t.insertId).then(function(){b.classList.remove("loading"),a.disabled=!1,s.disabled=!1,l.disabled=!1,c.disabled=!1,u.disabled=!1,d.disabled=!1,h.disabled=!1,y.disabled=!1,p.disabled=!1,r.classList.remove("active"),e()})})})}else n(p.dataset.id).then(function(){b.classList.remove("loading"),a.disabled=!1,s.disabled=!1,l.disabled=!1,c.disabled=!1,u.disabled=!1,d.disabled=!1,h.disabled=!1,y.disabled=!1,p.disabled=!1,r.classList.remove("active"),e()})}}}},function(t,e,n){"use strict";function i(){var t=document.getElementById("renamePipeBtn"),a=document.getElementById("pipeTitle"),s=document.getElementById("pageTitle"),e=document.getElementById("pipeEditBtn"),n=document.getElementById("access").value;"full"==n&&(e.onclick=function(t){document.getElementById("pipeEditingModal").classList.add("active")}),a.addEventListener("input",function(){""===a.value.trim()?(t.disabled=!0,a.classList.add("is-error")):(t.disabled=!1,a.classList.remove("is-error"))}),"full"==n&&t.addEventListener("click",function(t){var e="/office/pipes/"+location.pathname.split("/")[3],n=document.getElementById("csrfToken").value,i=a.value.trim(),r=+location.pathname.split("/")[3],o={title:i,id:r,_csrf:n};""!==a.value&&fetch(e,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}).then(function(t){return s.innerText=i,document.getElementById("pipeEditingModal").classList.remove("active"),t.json()}).catch(function(t){return console.error(t)})});var i=document.getElementById("pipeDeleteBtn");"full"==n&&i.addEventListener("click",function(t){if(confirm("Вы точно хотите удалить воронку?")&&confirm("В уверены?")){var e=document.getElementById("csrfToken").value,n={id:+location.pathname.split("/")[3],_csrf:e,active:0};fetch("/office/pipes/delete",{method:"DELETE",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(t){return window.location.pathname="office/pipes",t.json()}).catch(function(t){return console.error(t)})}})}n.r(e),n.d(e,"pipeEditing",function(){return i})},function(t,e,n){"use strict";n.r(e),n.d(e,"stepsScript",function(){return o}),n.d(e,"setEventDeleteBtn",function(){return a});var i=n(4),r=document.getElementById("access").value;function o(){"full"==r&&new i.a(document.getElementById("stepsHolder"),{animation:200,handle:"span"})}function a(){document.querySelectorAll("#stepsHolder button[data-id]").forEach(function(a){"full"!=r||+a.dataset.listener||(a.addEventListener("click",function(t){var e=document.getElementById("csrfToken").value,n={id:a.dataset.id,_csrf:e,active:0},i=document.createElement("div"),r=document.createElement("button");r.classList.add("btn"),r.classList.add("btn-error"),r.innerText="Удалить";var o=document.createElement("button");o.classList.add("btn"),o.innerText="Отмена",i.insertAdjacentElement("beforeend",r),i.insertAdjacentElement("beforeend",o),t.target.classList.add("d-hide"),t.path[1].insertAdjacentElement("beforeend",i),r.addEventListener("click",function(){fetch("/office/steps/delete",{method:"DELETE",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).catch(function(t){return console.error(t)}),t.path[1].remove()}),o.addEventListener("click",function(){t.target.classList.remove("d-hide"),i.remove()})}),a.dataset.listener=1)})}},function(t,e,c){"use strict";c.r(e),c.d(e,"visScript",function(){return n});var o=c(45),a=document.getElementById("access").value;function n(){fetch("/office/getPipes",{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){function e(){(function(){var n=[],i=[];return fetch("/office/getPipes",{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t.steps.forEach(function(e){n.push({id:e.id,label:e.title,color:{border:e.vis_data?e.vis_data.color:"#000"},shape:e.vis_data?e.vis_data.shape:"box"}),e.parents&&e.parents.split(",").forEach(function(t){i.push({to:e.id,from:t})})}),console.log(n),{nodes:n,edges:i}})})().then(function(t){n.innerHTML="",document.getElementById("reloadVisBtn").disabled=!1,document.getElementById("strictBtn").disabled=!1,(u=new o.Network(n,t,{height:document.getElementById("vis").getBoundingClientRect().height+"px",width:"100%",layout:{randomSeed:2,hierarchical:{enabled:document.getElementById("strictBtn").checked,sortMethod:"directed",direction:"LR"}},physics:{enabled:!1},edges:{smooth:{enabled:!1},arrows:{to:!0},chosen:{edge:function(t,e,n){t.width=n?3:1}}},nodes:{shape:"box",borderWidth:1,borderWidthSelected:2,color:{border:"medgray",background:"#fff",highlight:{border:"#lightslategray",background:"gainsboro"}},chosen:{node:function(t,e,n){n?(t.color="#ccffcc",t.borderColor="#004d00"):(t.color="#fff",t.borderColor="medgray")}}},locale:"ru",interaction:{multiselect:!0},manipulation:{enabled:"full"==a,addNode:function(e,n){var i=document.getElementById("nodeCreateModal"),r=document.getElementById("confirmNodeCreate"),o=document.getElementById("rejectNodeCreate"),a=document.getElementById("nodeCreateColor"),s=document.getElementById("nodeCreateShape");i.classList.add("active"),i.querySelector(".modal-close").onclick=function(t){r.onclick=null,o.onclick=null,n(null)};var l=document.getElementById("nodeCrateTitle");l.oninput=function(t){0<l.value.trim().length?(l.classList.remove("is-error"),r.disabled=!1):(l.classList.add("is-error"),r.disabled=!0)},r.onclick=function(t){t.target.onclick=null,i.classList.add("active"),fetch("/office/steps",{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],title:l.value,vis_data:{color:a.value,shape:s.value},_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){e.id=t.id,e.label=l.value,n(e),i.classList.remove("active")}).catch(function(t){return console.error(t)})},o.onclick=function(t){i.classList.remove("active"),n(null)}},editNode:function(e,n){var i=document.getElementById("nodeEditingModal"),r=document.getElementById("confirmNodeEdit"),o=document.getElementById("rejectNodeEdit"),a=document.getElementById("nodeEditColor"),s=document.getElementById("nodeEditShape");i.classList.add("active"),a.value=u.body.data.nodes._data[e.id].color.border,s.value=u.body.data.nodes._data[e.id].shape;var l=[];for(var t in u.body.data.edges._data)u.body.data.edges._data[t].to===e.id&&l.push(u.body.data.edges._data[t].from);l.forEach(function(t,e){return l[e]=+t}),l=l.join(","),i.querySelector(".modal-close").onclick=function(t){r.onclick=null,o.onclick=null,n(null)};var c=document.getElementById("nodeEditTitle");c.value=e.label,c.oninput=function(t){0<c.value.trim().length?(c.classList.remove("is-error"),r.disabled=!1):(c.classList.add("is-error"),r.disabled=!0)},r.onclick=function(t){t.target.onclick=null,i.classList.add("active"),fetch("/office/steps/edit",{method:"POST",body:JSON.stringify({id:e.id,title:c.value,parents:l,vis_data:{color:a.value,shape:s.value},_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){e.label=c.value,i.classList.remove("active"),n(e)}).catch(function(t){return console.error(t)})},o.onclick=function(t){i.classList.remove("active"),n(null)}},addEdge:function(e,n){var t=u.body.data.nodes._data[e.to].label,i=[e.from];for(var r in u.body.data.edges._data)u.body.data.edges._data[r].to===e.to&&i.push(u.body.data.edges._data[r].from);i.forEach(function(t,e){return i[e]=+t}),i=(i=i.filter(function(t,e){return i.indexOf(+t)==e})).join(","),e.from===e.to?alert("Невозможно замкнуть путь на самом себе"):fetch("/office/steps/edit",{method:"POST",body:JSON.stringify({id:e.to,title:t,parents:i,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){n(e)}).catch(function(t){return console.error(t)})},editEdge:function(e,n){var t=u.body.data.edges._data[e.id],i=[];for(var r in u.body.data.edges._data)u.body.data.edges._data[r].to===e.to&&u.body.data.edges._data[r].to!==t.to&&i.push(u.body.data.edges._data[r].from);i=i.join(",");var o=fetch("/office/steps/edit",{method:"POST",body:JSON.stringify({id:t.to,title:u.body.data.nodes._data[t.to].labels,parents:i,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).catch(function(t){return console.error(t)}),a=u.body.data.nodes._data[e.to].label,s=[e.from];for(var l in u.body.data.edges._data)u.body.data.edges._data[l].to===e.to&&s.push(u.body.data.edges._data[l].from);s=s.join(","),e.from==e.from||"number"!=typeof e.from||"number"!=typeof e.to?n(null):Promise.all([o,fetch("/office/steps/edit",{method:"POST",body:JSON.stringify({id:e.to,title:a,parents:s,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return(new(c(15).KanbanScript)).init(),t.json()}).catch(function(t){return console.error(t)})]).then(function(t){n(e)})},deleteNode:function(e,n){confirm("Вы точно хотит удалить шаг?")?e.nodes.forEach(function(t){fetch("/office/steps/delete",{method:"DELETE",body:JSON.stringify({id:t,_csrf:document.getElementById("csrfToken").value,active:0}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).catch(function(t){return console.error(t)}),n(e)}):n(null)},deleteEdge:function(r,o){confirm("Вы точно хотит удалить путь?")?(r.edges.forEach(function(t){var e=u.body.data.edges._data[t],n=[];for(var i in u.body.data.edges._data)u.body.data.edges._data[i].to===e.to&&e.from!==u.body.data.edges._data[i].from&&n.push(u.body.data.edges._data[i].from);n=n.join(","),console.log(e,n),o(null),fetch("/office/steps/edit",{method:"POST",body:JSON.stringify({id:e.to,title:u.body.data.nodes._data[e.to].label,parents:n,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return(new(c(15).KanbanScript)).init(),t.json()}).then(function(t){o(r)}).catch(function(t){return console.error(t)})}),o(r)):o(null)}}})).on("selectNode",function(t){var e=u.getNodeAt({x:t.pointer.DOM.x,y:t.pointer.DOM.y});e&&!i.find(function(t){return t===e})&&i.push(e),i.forEach(function(t,e){u.body.nodes[t].selected||i.splice(e,e+1)}),1<i.length?(r.disabled=!1,r.classList.remove("tooltip")):(r.disabled=!0,r.classList.add("tooltip"))});function e(){i.forEach(function(t,e){u.body.nodes[t].selected||i.splice(e,e+1)}),1<i.length?(r.disabled=!1,r.classList.remove("tooltip")):(r.disabled=!0,r.classList.add("tooltip"))}u.on("dragEnd",function(t){u.unselectAll(),e()}),u.on("deselectNode",function(t){return e()})})}var u,n=document.getElementById("vis"),i=[];e(),document.getElementById("reloadVisBtn").addEventListener("click",function(t){e()}),document.getElementById("strictBtn").addEventListener("click",function(t){u.setOptions({layout:{hierarchical:{enabled:t.target.checked}},physics:{enabled:!1}})});var r=document.getElementById("saveStepsVis");document.getElementById("saveStepsVis").addEventListener("click",function(){return function(){var e={};i.forEach(function(t){e[t]=u.body.data.nodes._data[t]}),fetch("/office/pipes/"+location.pathname.split("/")[3],{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],title:document.getElementById("pipeTitle").value,kanban:{title:"",description:"",steps:i},_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){pageTitle.innerText=document.getElementById("pipeTitle").value,(new(c(15).KanbanScript)).init()}).catch(function(t){return console.error(t)})}()}),showVis.addEventListener("click",function(){u.stabilize(),visHolder.classList.remove("d-hide"),showVis.classList.add("d-hide"),e()}),hideVis.addEventListener("click",function(){showVis.classList.remove("d-hide"),visHolder.classList.add("d-hide")}),"full"==a&&document.getElementById("deleteStepsVis").addEventListener("click",function(){if(confirm("Это действие удалит все шаги и структуру, вы уверены?")){for(var t in u.body.data.nodes._data)fetch("/office/steps/delete",{method:"DELETE",body:JSON.stringify({id:t,_csrf:document.getElementById("csrfToken").value,active:0}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).catch(function(t){return console.error(t)});fetch("/office/pipes/clearKanbans",{method:"POST",body:JSON.stringify({id:+location.pathname.split("/")[3],_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){console.log("clear done"),document.getElementById("kanbanList").innerHTML="",e()})}}),document.getElementById("visFullScreen").onclick=function(t){n.classList.add("full-screen"),e(),document.getElementById("exitFullScreen").classList.remove("d-hide"),document.getElementById("reloadVisBtn").classList.add("full-screen"),document.getElementById("strictBtnHolder").classList.add("full-screen"),document.getElementById("saveStepsVis").classList.add("full-screen")},document.getElementById("exitFullScreen").onclick=function(t){n.classList.remove("full-screen"),e(),t.target.classList.add("d-hide"),document.getElementById("reloadVisBtn").classList.remove("full-screen"),document.getElementById("strictBtnHolder").classList.remove("full-screen"),document.getElementById("saveStepsVis").classList.remove("full-screen")}}).catch(function(t){return console.error(t)})}},function(t,ML,DL){"use strict";DL.r(ML),function(t){DL.d(ML,"DOMutil",function(){return kL}),DL.d(ML,"DataSet",function(){return CS}),DL.d(ML,"DataView",function(){return LS}),DL.d(ML,"Hammer",function(){return xh}),DL.d(ML,"Network",function(){return fL}),DL.d(ML,"Queue",function(){return bS}),DL.d(ML,"data",function(){return IS}),DL.d(ML,"keycharm",function(){return vu}),DL.d(ML,"moment",function(){return EL}),DL.d(ML,"network",function(){return TL}),DL.d(ML,"util",function(){return qa});
/**
 * vis-network
 * https://visjs.github.io/vis-network/
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 7.3.5
 * @date    2020-02-17T23:13:04.027Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */
var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function n(t,e){return t(e={exports:{}},e.exports),e.exports}function i(t){return t&&t.Math==Math&&t}function d(t){try{return!!t()}catch(t){return!0}}function w(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function r(t){return S.call(t).slice(8,-1)}function l(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function c(t){return T(l(t))}function h(t){return"object"==typeof t?null!==t:"function"==typeof t}function o(t,e){if(!h(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!h(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!h(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!h(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}function g(t,e){return O.call(t,e)}function a(t){return D?M.createElement(t):{}}function s(t,e){var n=j[P(t)];return n==B||n!=N&&("function"==typeof e?d(e):!!e)}function u(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function _(i,r,t){if(u(i),void 0===r)return i;switch(t){case 0:return function(){return i.call(r)};case 1:return function(t){return i.call(r,t)};case 2:return function(t,e){return i.call(r,t,e)};case 3:return function(t,e,n){return i.call(r,t,e,n)}}return function(){return i.apply(r,arguments)}}function v(t){if(!h(t))throw TypeError(String(t)+" is not an object");return t}function y(i){function t(t,e,n){if(this instanceof i){switch(arguments.length){case 0:return new i;case 1:return new i(t);case 2:return new i(t,e)}return new i(t,e,n)}return i.apply(this,arguments)}return t.prototype=i.prototype,t}function k(t,e){var n,i,r,o,a,s,l,c,u=t.target,d=t.global,h=t.stat,f=t.proto,p=d?b:h?b[u]:(b[u]||{}).prototype,v=d?R:R[u]||(R[u]={}),m=v.prototype;for(r in e)n=!F(d?r:u+(h?".":"#")+r,t.forced)&&p&&g(p,r),a=v[r],n&&(s=t.noTargetGet?(c=q(p,r))&&c.value:p[r]),o=n&&s?s:e[r],n&&typeof a==typeof o||(l=t.bind&&n?_(o,b):t.wrap&&n?y(o):f&&"function"==typeof o?_(Function.call,o):o,(t.sham||o&&o.sham||a&&a.sham)&&Y(l,"sham",!0),v[r]=l,f&&(g(R,i=u+"Prototype")||Y(R,i,{}),R[i][r]=o,t.real&&m&&!m[r]&&Y(m,r,o)))}var b=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof e&&e)||Function("return this")(),f=!d(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),p={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,x={f:m&&!p.call({1:2},1)?function(t){var e=m(this,t);return!!e&&e.enumerable}:p},S={}.toString,E="".split,T=d(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==r(t)?E.call(t,""):Object(t)}:Object,O={}.hasOwnProperty,M=b.document,D=h(M)&&h(M.createElement),C=!f&&!d(function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}),L=Object.getOwnPropertyDescriptor,A={f:f?L:function(t,e){if(t=c(t),e=o(e,!0),C)try{return L(t,e)}catch(t){}if(g(t,e))return w(!x.f.call(t,e),t[e])}},I=/#|\.prototype\./,P=s.normalize=function(t){return String(t).replace(I,".").toLowerCase()},j=s.data={},N=s.NATIVE="N",B=s.POLYFILL="P",F=s,R={},H=Object.defineProperty,z={f:f?H:function(t,e,n){if(v(t),e=o(e,!0),v(n),C)try{return H(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Y=f?function(t,e,n){return z.f(t,e,w(1,n))}:function(t,e,n){return t[e]=n,t},q=A.f,U=[].slice,W={},V=Function.bind||function(e){var n=u(this),i=U.call(arguments,1),r=function(){var t=i.concat(U.call(arguments));return this instanceof r?function(t,e,n){if(!(e in W)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";W[e]=Function("C,a","return new C("+i.join(",")+")")}return W[e](t,n)}(n,t.length,t):n.apply(e,t)};return h(n.prototype)&&(r.prototype=n.prototype),r};k({target:"Function",proto:!0},{bind:V});function G(t){return R[t+"Prototype"]}var J=G("Function").bind,X=Function.prototype,Z=function(t){var e=t.bind;return t===X||t instanceof Function&&e===X.bind?J:e};function $(t,e,n,i){t.beginPath(),t.arc(e,n,i,0,2*Math.PI,!1),t.closePath()}function Q(t,e,n,i,r,o){var a=Math.PI/180;i-2*o<0&&(o=i/2),r-2*o<0&&(o=r/2),t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+i-o,n),t.arc(e+i-o,n+o,o,270*a,360*a,!1),t.lineTo(e+i,n+r-o),t.arc(e+i-o,n+r-o,o,0,90*a,!1),t.lineTo(e+o,n+r),t.arc(e+o,n+r-o,o,90*a,180*a,!1),t.lineTo(e,n+o),t.arc(e+o,n+o,o,180*a,270*a,!1),t.closePath()}function K(t,e,n,i,r){var o=i/2*.5522848,a=r/2*.5522848,s=e+i,l=n+r,c=e+i/2,u=n+r/2;t.beginPath(),t.moveTo(e,u),t.bezierCurveTo(e,u-a,c-o,n,c,n),t.bezierCurveTo(c+o,n,s,u-a,s,u),t.bezierCurveTo(s,u+a,c+o,l,c,l),t.bezierCurveTo(c-o,l,e,u+a,e,u),t.closePath()}function tt(t,e,n,i,r){var o=r*(1/3),a=i/2*.5522848,s=o/2*.5522848,l=e+i,c=n+o,u=e+i/2,d=n+o/2,h=n+(r-o/2),f=n+r;t.beginPath(),t.moveTo(l,d),t.bezierCurveTo(l,d+s,u+a,c,u,c),t.bezierCurveTo(u-a,c,e,d+s,e,d),t.bezierCurveTo(e,d-s,u-a,n,u,n),t.bezierCurveTo(u+a,n,l,d-s,l,d),t.lineTo(l,h),t.bezierCurveTo(l,h+s,u+a,f,u,f),t.bezierCurveTo(u-a,f,e,h+s,e,h),t.lineTo(e,d)}function et(t,e,n,i,r,o){t.beginPath(),t.moveTo(e,n);for(var a=o.length,s=i-e,l=r-n,c=l/s,u=Math.sqrt(s*s+l*l),d=0,h=!0,f=0,p=+o[0];.1<=u;)(p=+o[d++%a])>u&&(p=u),f=Math.sqrt(p*p/(1+c*c)),e+=f=s<0?-f:f,n+=c*f,!0===h?t.lineTo(e,n):t.moveTo(e,n),u-=p,h=!h}var nt={circle:$,dashedLine:et,database:tt,diamond:function(t,e,n,i){t.beginPath(),t.lineTo(e,n+i),t.lineTo(e+i,n),t.lineTo(e,n-i),t.lineTo(e-i,n),t.closePath()},ellipse:K,ellipse_vis:K,hexagon:function(t,e,n,i){t.beginPath();var r=2*Math.PI/6;t.moveTo(e+i,n);for(var o=1;o<6;o++)t.lineTo(e+i*Math.cos(r*o),n+i*Math.sin(r*o));t.closePath()},roundRect:Q,square:function(t,e,n,i){t.beginPath(),t.rect(e-i,n-i,2*i,2*i),t.closePath()},star:function(t,e,n,i){t.beginPath(),n+=.1*(i*=.82);for(var r=0;r<10;r++){var o=r%2==0?1.3*i:.5*i;t.lineTo(e+o*Math.sin(2*r*Math.PI/10),n-o*Math.cos(2*r*Math.PI/10))}t.closePath()},triangle:function(t,e,n,i){t.beginPath(),n+=.275*(i*=1.15);var r=2*i,o=r/2,a=Math.sqrt(3)/6*r,s=Math.sqrt(r*r-o*o);t.moveTo(e,n-(s-a)),t.lineTo(e+o,n+a),t.lineTo(e-o,n+a),t.lineTo(e,n-(s-a)),t.closePath()},triangleDown:function(t,e,n,i){t.beginPath(),n-=.275*(i*=1.15);var r=2*i,o=r/2,a=Math.sqrt(3)/6*r,s=Math.sqrt(r*r-o*o);t.moveTo(e,n+(s-a)),t.lineTo(e+o,n-a),t.lineTo(e-o,n-a),t.lineTo(e,n+(s-a)),t.closePath()}},it=n(function(t){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}(t.exports=n).prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r=0;r<i.length;r++)if((n=i[r])===e||n.fn===e){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),rt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};
/**
 * vis-util
 * https://github.com/visjs/vis-util
 *
 * utilitie collection for visjs
 *
 * @version 2.1.0
 * @date    2020-01-12T20:17:27.848Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function ot(t,e){return t(e={exports:{}},e.exports),e.exports}function at(t){return t&&t.Math==Math&&t}function st(t){try{return!!t()}catch(t){return!0}}function lt(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function ct(t){return Tt.call(t).slice(8,-1)}function ut(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function dt(t){return Mt(ut(t))}function ht(t){return"object"==typeof t?null!==t:"function"==typeof t}function ft(t,e){if(!ht(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!ht(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!ht(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!ht(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}function pt(t,e){return Dt.call(t,e)}function vt(t){return Lt?Ct.createElement(t):{}}function mt(t,e){var n=Bt[Nt(t)];return n==Rt||n!=Ft&&("function"==typeof e?st(e):!!e)}function gt(i,r,t){if(function(){if("function"!=typeof i)throw TypeError(String(i)+" is not a function")}(),void 0===r)return i;switch(t){case 0:return function(){return i.call(r)};case 1:return function(t){return i.call(r,t)};case 2:return function(t,e){return i.call(r,t,e)};case 3:return function(t,e,n){return i.call(r,t,e,n)}}return function(){return i.apply(r,arguments)}}function yt(t){if(!ht(t))throw TypeError(String(t)+" is not an object");return t}function bt(i){function t(t,e,n){if(this instanceof i){switch(arguments.length){case 0:return new i;case 1:return new i(t);case 2:return new i(t,e)}return new i(t,e,n)}return i.apply(this,arguments)}return t.prototype=i.prototype,t}function wt(t,e){var n,i,r,o,a,s,l,c,u=t.target,d=t.global,h=t.stat,f=t.proto,p=d?_t:h?_t[u]:(_t[u]||{}).prototype,v=d?zt:zt[u]||(zt[u]={}),m=v.prototype;for(r in e)n=!Ht(d?r:u+(h?".":"#")+r,t.forced)&&p&&pt(p,r),a=v[r],n&&(s=t.noTargetGet?(c=Wt(p,r))&&c.value:p[r]),o=n&&s?s:e[r],n&&typeof a==typeof o||(l=t.bind&&n?gt(o,_t):t.wrap&&n?bt(o):f&&"function"==typeof o?gt(Function.call,o):o,(t.sham||o&&o.sham||a&&a.sham)&&Ut(l,"sham",!0),v[r]=l,f&&(pt(zt,i=u+"Prototype")||Ut(zt,i,{}),zt[i][r]=o,t.real&&m&&!m[r]&&Ut(m,r,o)))}var _t=at("object"==typeof globalThis&&globalThis)||at("object"==typeof window&&window)||at("object"==typeof self&&self)||at("object"==typeof rt&&rt)||Function("return this")(),kt=!st(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),xt={}.propertyIsEnumerable,St=Object.getOwnPropertyDescriptor,Et={f:St&&!xt.call({1:2},1)?function(t){var e=St(this,t);return!!e&&e.enumerable}:xt},Tt={}.toString,Ot="".split,Mt=st(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==ct(t)?Ot.call(t,""):Object(t)}:Object,Dt={}.hasOwnProperty,Ct=_t.document,Lt=ht(Ct)&&ht(Ct.createElement),At=!kt&&!st(function(){return 7!=Object.defineProperty(vt("div"),"a",{get:function(){return 7}}).a}),It=Object.getOwnPropertyDescriptor,Pt={f:kt?It:function(t,e){if(t=dt(t),e=ft(e,!0),At)try{return It(t,e)}catch(t){}if(pt(t,e))return lt(!Et.f.call(t,e),t[e])}},jt=/#|\.prototype\./,Nt=mt.normalize=function(t){return String(t).replace(jt,".").toLowerCase()},Bt=mt.data={},Ft=mt.NATIVE="N",Rt=mt.POLYFILL="P",Ht=mt,zt={},Yt=Object.defineProperty,qt={f:kt?Yt:function(t,e,n){if(yt(t),e=ft(e,!0),yt(n),At)try{return Yt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Ut=kt?function(t,e,n){return qt.f(t,e,lt(1,n))}:function(t,e,n){return t[e]=n,t},Wt=Pt.f,Vt=Array.isArray||function(t){return"Array"==ct(t)};wt({target:"Array",stat:!0},{isArray:Vt});var Gt=zt.Array.isArray,Jt=Gt,Xt={},Zt=_t["__core-js_shared__"]||function(e,n){try{Ut(_t,e,n)}catch(t){_t[e]=n}return n}("__core-js_shared__",{}),$t=Function.toString;"function"!=typeof Zt.inspectSource&&(Zt.inspectSource=function(t){return $t.call(t)});function Qt(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++se+le).toString(36)}function Kt(t){return ce[t]||(ce[t]=Qt(t))}var te,ee,ne,ie=Zt.inspectSource,re=_t.WeakMap,oe="function"==typeof re&&/native code/.test(ie(re)),ae=ot(function(t){(t.exports=function(t,e){return Zt[t]||(Zt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.0",mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),se=0,le=Math.random(),ce=ae("keys"),ue={},de=_t.WeakMap;if(oe){var he=new de,fe=he.get,pe=he.has,ve=he.set;te=function(t,e){return ve.call(he,t,e),e},ee=function(t){return fe.call(he,t)||{}},ne=function(t){return pe.call(he,t)}}else{var me=Kt("state");ue[me]=!0,te=function(t,e){return Ut(t,me,e),e},ee=function(t){return pt(t,me)?t[me]:{}},ne=function(t){return pt(t,me)}}function ge(t){return Object(ut(t))}function ye(t){return pt(De,t)||(Oe&&pt(Ce,t)?De[t]=Ce[t]:De[t]=Le("Symbol."+t)),De[t]}var be,we,_e,ke={set:te,get:ee,has:ne,enforce:function(t){return ne(t)?ee(t):te(t,{})},getterFor:function(n){return function(t){var e;if(!ht(t)||(e=ee(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},xe=!st(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Se=Kt("IE_PROTO"),Ee=Object.prototype,Te=xe?Object.getPrototypeOf:function(t){return t=ge(t),pt(t,Se)?t[Se]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ee:null},Oe=!!Object.getOwnPropertySymbols&&!st(function(){return!String(Symbol())}),Me=Oe&&!Symbol.sham&&"symbol"==typeof Symbol(),De=ae("wks"),Ce=_t.Symbol,Le=Me?Ce:Qt,Ae=(ye("iterator"),!1);[].keys&&("next"in(_e=[].keys())?(we=Te(Te(_e)))!==Object.prototype&&(be=we):Ae=!0),null==be&&(be={});function Ie(t){return isNaN(t=+t)?0:(0<t?We:Ue)(t)}function Pe(t){return 0<t?Ve(Ie(t),9007199254740991):0}function je(t,e){var n=Ie(t);return n<0?Ge(n+e,0):Je(n,e)}function Ne(s){return function(t,e,n){var i,r=dt(t),o=Pe(r.length),a=je(n,o);if(s&&e!=e){for(;a<o;)if((i=r[a++])!=i)return!0}else for(;a<o;a++)if((s||a in r)&&r[a]===e)return s||a||0;return!s&&-1}}function Be(t,e){var n,i=dt(t),r=0,o=[];for(n in i)!pt(ue,n)&&pt(i,n)&&o.push(n);for(;e.length>r;)pt(i,n=e[r++])&&(~Ze(o,n)||o.push(n));return o}function Fe(t){return"function"==typeof t?t:void 0}function Re(t,e){return arguments.length<2?Fe(zt[t])||Fe(_t[t]):zt[t]&&zt[t][e]||_t[t]&&_t[t][e]}function He(){}function ze(t){return"<script>"+t+"<\/script>"}var Ye,qe={IteratorPrototype:be,BUGGY_SAFARI_ITERATORS:Ae},Ue=Math.ceil,We=Math.floor,Ve=Math.min,Ge=Math.max,Je=Math.min,Xe={includes:Ne(!0),indexOf:Ne(!1)},Ze=Xe.indexOf,$e=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Qe=Object.keys||function(t){return Be(t,$e)},Ke=kt?Object.defineProperties:function(t,e){yt(t);for(var n,i=Qe(e),r=i.length,o=0;o<r;)qt.f(t,n=i[o++],e[n]);return t},tn=Re("document","documentElement"),en=Kt("IE_PROTO"),nn=function(){try{Ye=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;nn=Ye?function(t){t.write(ze("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Ye):((e=vt("iframe")).style.display="none",tn.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(ze("document.F=Object")),t.close(),t.F);for(var n=$e.length;n--;)delete nn.prototype[$e[n]];return nn()};ue[en]=!0;var rn=Object.create||function(t,e){var n;return null!==t?(He.prototype=yt(t),n=new He,He.prototype=null,n[en]=t):n=nn(),void 0===e?n:Ke(n,e)},on={};on[ye("toStringTag")]="z";function an(t,e,n,i){if(t){var r=n?t:t.prototype;pt(r,mn)||vn(r,mn,{configurable:!0,value:e}),i&&!un&&Ut(r,"toString",pn)}}function sn(){return this}function ln(){return this}function cn(t,e,n,i,r,o,a){var s,l,c;function u(t){if(t===r&&y)return y;if(!wn&&t in m)return m[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}}l=i,c=e+" Iterator",(s=n).prototype=rn(gn,{next:lt(1,l)}),an(s,c,!1,!0),Xt[c]=sn;var d,h,f,p=e+" Iterator",v=!1,m=t.prototype,g=m[_n]||m["@@iterator"]||r&&m[r],y=!wn&&g||u(r),b="Array"==e&&m.entries||g;if(b&&(d=Te(b.call(new t)),bn!==Object.prototype&&d.next&&(an(d,p,!0,!0),Xt[p]=ln)),"values"==r&&g&&"values"!==g.name&&(v=!0,y=function(){return g.call(this)}),a&&m[_n]!==y&&Ut(m,_n,y),Xt[e]=y,r)if(h={values:u("values"),keys:o?y:u("keys"),entries:u("entries")},a)for(f in h)!wn&&!v&&f in m||yn(m,f,h[f]);else wt({target:e,proto:!0,forced:wn||v},h);return h}var un="[object z]"===String(on),dn=ye("toStringTag"),hn="Arguments"==ct(function(){return arguments}()),fn=un?ct:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),dn))?n:hn?ct(e):"Object"==(i=ct(e))&&"function"==typeof e.callee?"Arguments":i},pn=un?{}.toString:function(){return"[object "+fn(this)+"]"},vn=qt.f,mn=ye("toStringTag"),gn=qe.IteratorPrototype,yn=(Object.setPrototypeOf||"__proto__"in{}&&function(){var t={};try{Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set.call(t,[]),t instanceof Array}catch(t){}}(),function(t,e,n,i){i&&i.enumerable?t[e]=n:Ut(t,e,n)}),bn=qe.IteratorPrototype,wn=qe.BUGGY_SAFARI_ITERATORS,_n=ye("iterator"),kn=ke.set,xn=ke.getterFor("Array Iterator");cn(Array,"Array",function(t,e){kn(this,{type:"Array Iterator",target:dt(t),index:0,kind:e})},function(){var t=xn(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}},"values"),Xt.Arguments=Xt.Array;var Sn=ye("toStringTag");for(var En in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Tn=_t[En],On=Tn&&Tn.prototype;On&&!On[Sn]&&Ut(On,Sn,En),Xt[En]=Xt.Array}function Mn(s){return function(t,e){var n,i,r=String(ut(t)),o=Ie(e),a=r.length;return o<0||a<=o?s?"":void 0:(n=r.charCodeAt(o))<55296||56319<n||o+1===a||(i=r.charCodeAt(o+1))<56320||57343<i?s?r.charAt(o):n:s?r.slice(o,o+2):i-56320+(n-55296<<10)+65536}}var Dn=(Mn(!1),Mn(!0)),Cn=ke.set,Ln=ke.getterFor("String Iterator");cn(String,"String",function(t){Cn(this,{type:"String Iterator",string:String(t),index:0})},function(){var t,e=Ln(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=Dn(n,i),e.index+=t.length,{value:t,done:!1})});function An(t){if(null!=t)return t[jn]||t["@@iterator"]||Xt[fn(t)]}function In(t){var e=An(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return yt(e.call(t))}function Pn(t){var e=Object(t);return void 0!==e[Nn]||"@@iterator"in e||Xt.hasOwnProperty(fn(e))}var jn=ye("iterator"),Nn=ye("iterator"),Bn=function(t,e){return function(t){if(Jt(t))return t}(t)||function(t,e){if(Pn(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=In(t);!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()};wt({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var Fn=zt.Date.now;function Rn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r=e.length?e:[Fn()],o=function(){for(var t=function(){var r=4022871197;return function(t){for(var e=t.toString(),n=0;n<e.length;n++){var i=.02519603282416938*(r+=e.charCodeAt(n));i-=r=i>>>0,r=(i*=r)>>>0,r+=4294967296*(i-=r)}return 2.3283064365386963e-10*(r>>>0)}}(),e=t(" "),n=t(" "),i=t(" "),r=0;r<arguments.length;r++)(e-=t(r<0||arguments.length<=r?void 0:arguments[r]))<0&&(e+=1),(n-=t(r<0||arguments.length<=r?void 0:arguments[r]))<0&&(n+=1),(i-=t(r<0||arguments.length<=r?void 0:arguments[r]))<0&&(i+=1);return[e,n,i]}(r),a=Bn(o,3),s=a[0],l=a[1],c=a[2],u=1,i.uint32=function(){return 4294967296*i()},i.fract53=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.algorithm="Alea",i.seed=r,i.version="0.9",i;function i(){var t=2091639*s+2.3283064365386963e-10*u;return s=l,l=c,c=t-(u=0|t)}var r,o,a,s,l,c,u}wt({target:"Object",stat:!0,forced:!kt,sham:!kt},{defineProperty:qt.f});var Hn=ot(function(t){var i=zt.Object,e=t.exports=function(t,e,n){return i.defineProperty(t,e,n)};i.defineProperty.sham&&(e.sham=!0)}),zn=Hn;wt({target:"Object",stat:!0,forced:!kt,sham:!kt},{defineProperties:Ke});function Yn(t,e,n){var i=ft(e);i in t?qt.f(t,i,lt(0,n)):t[i]=n}var qn=ot(function(t){var n=zt.Object,e=t.exports=function(t,e){return n.defineProperties(t,e)};n.defineProperties.sham&&(e.sham=!0)}),Un=$e.concat("length","prototype"),Wn={f:Object.getOwnPropertyNames||function(t){return Be(t,Un)}},Vn={f:Object.getOwnPropertySymbols},Gn=Re("Reflect","ownKeys")||function(t){var e=Wn.f(yt(t)),n=Vn.f;return n?e.concat(n(t)):e};wt({target:"Object",stat:!0,sham:!kt},{getOwnPropertyDescriptors:function(t){for(var e,n,i=dt(t),r=Pt.f,o=Gn(i),a={},s=0;o.length>s;)void 0!==(n=r(i,e=o[s++]))&&Yn(a,e,n);return a}});var Jn=zt.Object.getOwnPropertyDescriptors,Xn=Pt.f,Zn=st(function(){Xn(1)});wt({target:"Object",stat:!0,forced:!kt||Zn,sham:!kt},{getOwnPropertyDescriptor:function(t,e){return Xn(dt(t),e)}});function $n(t){var e=zt.Symbol||(zt.Symbol={});pt(e,t)||ui(e,t,{value:ci.f(t)})}function Qn(t,e){var n;return Vt(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Vt(n.prototype)?ht(n)&&null===(n=n[di])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function Kn(f){var p=1==f,v=2==f,m=3==f,g=4==f,y=6==f,b=5==f||y;return function(t,e,n,i){for(var r,o,a=ge(t),s=Mt(a),l=gt(e,n,3),c=Pe(s.length),u=0,d=i||Qn,h=p?d(t,c):v?d(t,0):void 0;u<c;u++)if((b||u in s)&&(o=l(r=s[u],u,a),f))if(p)h[u]=o;else if(o)switch(f){case 3:return!0;case 5:return r;case 6:return u;case 2:hi.call(h,r)}else if(g)return!1;return y?-1:m||g?g:h}}function ti(t,e){var n=Ti[t]=rn(wi.prototype);return gi(n,{type:"Symbol",tag:t,description:e}),kt||(n.description=e),n}function ei(e,t){yt(e);var n=dt(t),i=Qe(n).concat(Bi(n));return pi(i,function(t){kt&&!Ni.call(n,t)||ji(e,t,n[t])}),e}function ni(t,e){var n=dt(t),i=ft(e,!0);if(n!==bi||!pt(Ti,i)||pt(Oi,i)){var r=ki(n,i);return!r||!pt(Ti,i)||pt(n,vi)&&n[vi][i]||(r.enumerable=!0),r}}function ii(t){var e=Si(dt(t)),n=[];return pi(e,function(t){pt(Ti,t)||pt(ue,t)||n.push(t)}),n}var ri=ot(function(t){var n=zt.Object,e=t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)};n.getOwnPropertyDescriptor.sham&&(e.sham=!0)}),oi=Wn.f,ai={}.toString,si="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],li={f:function(t){return si&&"[object Window]"==ai.call(t)?function(t){try{return oi(t)}catch(t){return si.slice()}}(t):oi(dt(t))}},ci={f:ye},ui=qt.f,di=ye("species"),hi=[].push,fi={forEach:Kn(0),map:Kn(1),filter:Kn(2),some:Kn(3),every:Kn(4),find:Kn(5),findIndex:Kn(6)},pi=fi.forEach,vi=Kt("hidden"),mi=ye("toPrimitive"),gi=ke.set,yi=ke.getterFor("Symbol"),bi=Object.prototype,wi=_t.Symbol,_i=Re("JSON","stringify"),ki=Pt.f,xi=qt.f,Si=li.f,Ei=Et.f,Ti=ae("symbols"),Oi=ae("op-symbols"),Mi=ae("string-to-symbol-registry"),Di=ae("symbol-to-string-registry"),Ci=ae("wks"),Li=_t.QObject,Ai=!Li||!Li.prototype||!Li.prototype.findChild,Ii=kt&&st(function(){return 7!=rn(xi({},"a",{get:function(){return xi(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=ki(bi,e);i&&delete bi[e],xi(t,e,n),i&&t!==bi&&xi(bi,e,i)}:xi,Pi=Oe&&"symbol"==typeof wi.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof wi},ji=function(t,e,n){t===bi&&ji(Oi,e,n),yt(t);var i=ft(e,!0);return yt(n),pt(Ti,i)?(n.enumerable?(pt(t,vi)&&t[vi][i]&&(t[vi][i]=!1),n=rn(n,{enumerable:lt(0,!1)})):(pt(t,vi)||xi(t,vi,lt(1,{})),t[vi][i]=!0),Ii(t,i,n)):xi(t,i,n)},Ni=function(t){var e=ft(t,!0),n=Ei.call(this,e);return!(this===bi&&pt(Ti,e)&&!pt(Oi,e))&&(!(n||!pt(this,e)||!pt(Ti,e)||pt(this,vi)&&this[vi][e])||n)},Bi=function(t){var e=t===bi,n=Si(e?Oi:dt(t)),i=[];return pi(n,function(t){!pt(Ti,t)||e&&!pt(bi,t)||i.push(Ti[t])}),i};if(Oe||(yn((wi=function(){if(this instanceof wi)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=Qt(t),n=function(t){this===bi&&n.call(Oi,t),pt(this,vi)&&pt(this[vi],e)&&(this[vi][e]=!1),Ii(this,e,lt(1,t))};return kt&&Ai&&Ii(bi,e,{configurable:!0,set:n}),ti(e,t)}).prototype,"toString",function(){return yi(this).tag}),Et.f=Ni,qt.f=ji,Pt.f=ni,Wn.f=li.f=ii,Vn.f=Bi,kt&&xi(wi.prototype,"description",{configurable:!0,get:function(){return yi(this).description}})),Me||(ci.f=function(t){return ti(ye(t),t)}),wt({global:!0,wrap:!0,forced:!Oe,sham:!Oe},{Symbol:wi}),pi(Qe(Ci),function(t){$n(t)}),wt({target:"Symbol",stat:!0,forced:!Oe},{for:function(t){var e=String(t);if(pt(Mi,e))return Mi[e];var n=wi(e);return Mi[e]=n,Di[n]=e,n},keyFor:function(t){if(!Pi(t))throw TypeError(t+" is not a symbol");if(pt(Di,t))return Di[t]},useSetter:function(){Ai=!0},useSimple:function(){Ai=!1}}),wt({target:"Object",stat:!0,forced:!Oe,sham:!kt},{create:function(t,e){return void 0===e?rn(t):ei(rn(t),e)},defineProperty:ji,defineProperties:ei,getOwnPropertyDescriptor:ni}),wt({target:"Object",stat:!0,forced:!Oe},{getOwnPropertyNames:ii,getOwnPropertySymbols:Bi}),wt({target:"Object",stat:!0,forced:st(function(){Vn.f(1)})},{getOwnPropertySymbols:function(t){return Vn.f(ge(t))}}),_i){var Fi=!Oe||st(function(){var t=wi();return"[null]"!=_i([t])||"{}"!=_i({a:t})||"{}"!=_i(Object(t))});wt({target:"JSON",stat:!0,forced:Fi},{stringify:function(t,e,n){for(var i,r=[t],o=1;o<arguments.length;)r.push(arguments[o++]);if((ht(i=e)||void 0!==t)&&!Pi(t))return Vt(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!Pi(e))return e}),r[1]=e,_i.apply(null,r)}})}wi.prototype[mi]||Ut(wi.prototype,mi,wi.prototype.valueOf),an(wi,"Symbol"),ue[vi]=!0;var Ri=zt.Object.getOwnPropertySymbols;wt({target:"Object",stat:!0,sham:!kt},{create:rn});var Hi=zt.Object,zi=function(t,e){return Hi.create(t,e)},Yi=Hn,qi=st(function(){Qe(1)});wt({target:"Object",stat:!0,forced:qi},{keys:function(t){return Qe(ge(t))}});function Ui(n){return function(t){var e=String(ut(t));return 1&n&&(e=e.replace(Xi,"")),2&n&&(e=e.replace(Zi,"")),e}}var Wi,Vi=zt.Object.keys,Gi="\t\n\v\f\r                　\u2028\u2029\ufeff",Ji="["+Gi+"]",Xi=RegExp("^"+Ji+Ji+"*"),Zi=RegExp(Ji+Ji+"*$"),$i={start:Ui(1),end:Ui(2),trim:Ui(3)},Qi=$i.trim;wt({target:"String",proto:!0,forced:(Wi="trim",st(function(){return!!Gi.trim()||"​᠎"!="​᠎".trim()||Gi.trim.name!==Wi}))},{trim:function(){return Qi(this)}});function Ki(t){return zt[t+"Prototype"]}function tr(t){var e=t.trim;return"string"==typeof t||t===ir||t instanceof String&&e===ir.trim?nr:e}function er(t,e){var n=[][t];return!n||!st(function(){n.call(null,e||function(){throw 1},1)})}var nr=Ki("String").trim,ir=String.prototype,rr=fi.forEach,or=er("forEach")?function(t){return rr(this,t,1<arguments.length?arguments[1]:void 0)}:[].forEach;wt({target:"Array",proto:!0,forced:[].forEach!=or},{forEach:or});function ar(t){var e=t.forEach;return t===ur||t instanceof Array&&e===ur.forEach||dr.hasOwnProperty(fn(t))?cr:e}var sr,lr,cr=Ki("Array").forEach,ur=Array.prototype,dr={DOMTokenList:!0,NodeList:!0},hr=Re("navigator","userAgent")||"",fr=_t.process,pr=fr&&fr.versions,vr=pr&&pr.v8;vr?lr=(sr=vr.split("."))[0]+sr[1]:hr&&(!(sr=hr.match(/Edge\/(\d+)/))||74<=sr[1])&&(sr=hr.match(/Chrome\/(\d+)/))&&(lr=sr[1]);function mr(e){return 51<=gr||!st(function(){var t=[];return(t.constructor={})[yr]=function(){return{foo:1}},1!==t[e](Boolean).foo})}var gr=lr&&+lr,yr=ye("species"),br=fi.map,wr=mr("map"),_r=wr&&!st(function(){[].map.call({length:-1,0:1},function(t){throw t})});wt({target:"Array",proto:!0,forced:!wr||!_r},{map:function(t){return br(this,t,1<arguments.length?arguments[1]:void 0)}});function kr(t){var e=t.map;return t===Sr||t instanceof Array&&e===Sr.map?xr:e}var xr=Ki("Array").map,Sr=Array.prototype,Er=$i.trim,Tr=_t.parseInt,Or=/^[+-]?0[Xx]/,Mr=8!==Tr(Gi+"08")||22!==Tr(Gi+"0x16")?function(t,e){var n=Er(String(t));return Tr(n,e>>>0||(Or.test(n)?16:10))}:Tr;wt({global:!0,forced:parseInt!=Mr},{parseInt:Mr});function Dr(s){return function(t){for(var e,n=dt(t),i=Qe(n),r=i.length,o=0,a=[];o<r;)e=i[o++],kt&&!Lr.call(n,e)||a.push(s?[e,n[e]]:n[e]);return a}}var Cr=zt.parseInt,Lr=Et.f,Ar=(Dr(!0),Dr(!1));wt({target:"Object",stat:!0},{values:function(t){return Ar(t)}});var Ir=zt.Object.values,Pr=fi.filter,jr=mr("filter"),Nr=jr&&!st(function(){[].filter.call({length:-1,0:1},function(t){throw t})});wt({target:"Array",proto:!0,forced:!jr||!Nr},{filter:function(t){return Pr(this,t,1<arguments.length?arguments[1]:void 0)}});function Br(t){if(!ht(t))return!1;var e=t[zr];return void 0!==e?!!e:Vt(t)}var Fr=Ki("Array").filter,Rr=Array.prototype,Hr=function(t){var e=t.filter;return t===Rr||t instanceof Array&&e===Rr.filter?Fr:e},zr=ye("isConcatSpreadable"),Yr=51<=gr||!st(function(){var t=[];return t[zr]=!1,t.concat()[0]!==t}),qr=mr("concat");wt({target:"Array",proto:!0,forced:!Yr||!qr},{concat:function(t){var e,n,i,r,o,a=ge(this),s=Qn(a,0),l=0;for(e=-1,i=arguments.length;e<i;e++)if(Br(o=-1===e?a:arguments[e])){if(9007199254740991<l+(r=Pe(o.length)))throw TypeError("Maximum allowed index exceeded");for(n=0;n<r;n++,l++)n in o&&Yn(s,l,o[n])}else{if(9007199254740991<=l)throw TypeError("Maximum allowed index exceeded");Yn(s,l++,o)}return s.length=l,s}});function Ur(t){var e=t.concat;return t===Gr||t instanceof Array&&e===Gr.concat?Vr:e}function Wr(t,e,n,i){try{return i?e(yt(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&yt(r.call(t)),e}}var Vr=Ki("Array").concat,Gr=Array.prototype,Jr=ye("iterator"),Xr=Array.prototype,Zr=ye("iterator"),$r=!1;try{var Qr=0,Kr={next:function(){return{done:!!Qr++}},return:function(){$r=!0}};Kr[Zr]=function(){return this},Array.from(Kr,function(){throw 2})}catch(e){}var to=!function(){if(!$r)return 0;var t=!1;try{var e={};e[Zr]=function(){return{next:function(){return{done:t=!0}}}},function(t){Array.from(t)}(e)}catch(t){}return t}();wt({target:"Array",stat:!0,forced:to},{from:function(t){var e,n,i,r,o,a=ge(t),s="function"==typeof this?this:Array,l=arguments.length,c=1<l?arguments[1]:void 0,u=void 0!==c,d=0,h=An(a);if(u&&(c=gt(c,2<l?arguments[2]:void 0,2)),null==h||s==Array&&function(t){return void 0!==t&&(Xt.Array===t||Xr[Jr]===t)}(h))for(n=new s(e=Pe(a.length));d<e;d++)Yn(n,d,u?c(a[d],d):a[d]);else for(o=(r=h.call(a)).next,n=new s;!(i=o.call(r)).done;d++)Yn(n,d,u?Wr(r,c,[i.value,d],!0):i.value);return n.length=d,n}});function eo(t){return function(t){if(Jt(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Pn(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return no(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var no=zt.Array.from,io=ye("species"),ro=[].slice,oo=Math.max;wt({target:"Array",proto:!0,forced:!mr("slice")},{slice:function(t,e){var n,i,r,o=dt(this),a=Pe(o.length),s=je(t,a),l=je(void 0===e?a:e,a);if(Vt(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Vt(n.prototype)?ht(n)&&null===(n=n[io])&&(n=void 0):n=void 0,n===Array||void 0===n))return ro.call(o,s,l);for(i=new(void 0===n?Array:n)(oo(l-s,0)),r=0;s<l;s++,r++)s in o&&Yn(i,r,o[s]);return i.length=r,i}});var ao=Ki("Array").slice,so=Array.prototype,lo=function(t){var e=t.slice;return t===so||t instanceof Array&&e===so.slice?ao:e},co=st(function(){Te(1)});wt({target:"Object",stat:!0,forced:co,sham:!xe},{getPrototypeOf:function(t){return Te(ge(t))}});var uo=zt.Object.getPrototypeOf,ho=Xe.indexOf,fo=[].indexOf,po=!!fo&&1/[1].indexOf(1,-0)<0,vo=er("indexOf");wt({target:"Array",proto:!0,forced:po||vo},{indexOf:function(t){return po?fo.apply(this,arguments)||0:ho(this,t,1<arguments.length?arguments[1]:void 0)}});function mo(t){var e=t.indexOf;return t===yo||t instanceof Array&&e===yo.indexOf?go:e}var go=Ki("Array").indexOf,yo=Array.prototype,bo=Gt,wo=Object.assign,_o=Object.defineProperty,ko=!wo||st(function(){if(kt&&1!==wo({b:1},wo(_o({},"a",{enumerable:!0,get:function(){_o(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!=wo({},t)[n]||"abcdefghijklmnopqrst"!=Qe(wo({},e)).join("")})?function(t,e){for(var n=ge(t),i=arguments.length,r=1,o=Vn.f,a=Et.f;r<i;)for(var s,l=Mt(arguments[r++]),c=o?Qe(l).concat(o(l)):Qe(l),u=c.length,d=0;d<u;)s=c[d++],kt&&!a.call(l,s)||(n[s]=l[s]);return n}:wo;wt({target:"Object",stat:!0,forced:Object.assign!==ko},{assign:ko});var xo=zt.Object.assign;$n("iterator");var So=ci.f("iterator");$n("asyncIterator"),$n("hasInstance"),$n("isConcatSpreadable"),$n("match"),$n("matchAll"),$n("replace"),$n("search"),$n("species"),$n("split"),$n("toPrimitive"),$n("toStringTag"),$n("unscopables"),an(Math,"Math",!0),an(_t.JSON,"JSON",!0);var Eo=zt.Symbol;$n("asyncDispose"),$n("dispose"),$n("observable"),$n("patternMatch"),$n("replaceAll");for(var To=Eo,Oo=ot(function(e){function n(t){return e.exports=n="function"==typeof To&&"symbol"==typeof So?function(t){return typeof t}:function(t){return t&&"function"==typeof To&&t.constructor===To&&t!==To.prototype?"symbol":typeof t},n(t)}e.exports=n}),Mo=[],Do=0;Do<256;Do++)Mo[Do]=(Do+256).toString(16).substr(1);for(var Co=function(){if("undefined"!=typeof crypto&&crypto.getRandomValues){var t=new Uint8Array(16);return function(){return crypto.getRandomValues(t),t}}var n=new Array(16);return function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}(),Lo=[],Ao=0;Ao<256;Ao++)Lo[Ao]=(Ao+256).toString(16).substr(1);var Io=Co();function Po(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0,n=e&&(2<arguments.length?arguments[2]:void 0)||0;"string"==typeof t&&(e="binary"===t?new Array(16):void 0,t={});var i,r,o,a=t.random||(t.rng||Co)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;s++)e[n+s]=a[s];return e||(r=0,(o=Mo)[(i=a)[r++]]+o[i[r++]]+o[i[r++]]+o[i[r++]]+"-"+o[i[r++]]+o[i[r++]]+"-"+o[i[r++]]+o[i[r++]]+"-"+o[i[r++]]+o[i[r++]]+"-"+o[i[r++]]+o[i[r++]]+o[i[r++]]+o[i[r++]]+o[i[r++]]+o[i[r++]])}function jo(e,t){var n=Vi(e);if(Ri){var i=Ri(e);t&&(i=Hr(i).call(i,function(t){return ri(e,t).enumerable})),n.push.apply(n,i)}return n}Io[0],Io[1],Io[2],Io[3],Io[4],Io[5],Io[6],Io[7];var No=/^\/?Date\((-?\d+)/i,Bo=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Fo=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Ro=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,Ho=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function zo(t){return t instanceof Number||"number"==typeof t}function Yo(t){if(t)for(;!0===t.hasChildNodes();){var e=t.firstChild;e&&(Yo(e),t.removeChild(e))}}function qo(t){return t instanceof String||"string"==typeof t}function Uo(t){return"object"===Oo(t)&&null!==t}function Wo(t){if(t instanceof Date)return!0;if(qo(t)){if(No.exec(t))return!0;if(!isNaN(Date.parse(t)))return!0}return!1}function Vo(t,e,n,i){var r=!1;!0===i&&(r=null===e[n]&&void 0!==t[n]),r?delete t[n]:t[n]=e[n]}function Go(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];for(var i in t)if(void 0!==e[i])if(null===e[i]||"object"!==Oo(e[i]))Vo(t,e,i,n);else{var r=t[i],o=e[i];Uo(r)&&Uo(o)&&Go(r,o,n)}}var Jo=xo;function Xo(t,e){if(!bo(t))throw new Error("Array with property names expected as first argument");for(var n=arguments.length,i=new Array(2<n?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];for(var o=0,a=i;o<a.length;o++)for(var s=a[o],l=0;l<t.length;l++){var c=t[l];s&&Object.prototype.hasOwnProperty.call(s,c)&&(e[c]=s[c])}return e}function Zo(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(bo(n))throw new TypeError("Arrays are not supported by deepExtend");for(var r=0;r<t.length;r++){var o=t[r];if(Object.prototype.hasOwnProperty.call(n,o))if(n[o]&&n[o].constructor===Object)void 0===e[o]&&(e[o]={}),e[o].constructor===Object?Qo(e[o],n[o],!1,i):Vo(e,n,o,i);else{if(bo(n[o]))throw new TypeError("Arrays are not supported by deepExtend");Vo(e,n,o,i)}}return e}function $o(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(bo(n))throw new TypeError("Arrays are not supported by deepExtend");for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)&&-1===mo(t).call(t,r))if(n[r]&&n[r].constructor===Object)void 0===e[r]&&(e[r]={}),e[r].constructor===Object?Qo(e[r],n[r]):Vo(e,n,r,i);else if(bo(n[r])){e[r]=[];for(var o=0;o<n[r].length;o++)e[r].push(n[r][o])}else Vo(e,n,r,i);return e}function Qo(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)||!0===n)if("object"===Oo(e[r])&&null!==e[r]&&uo(e[r])===Object.prototype)void 0===t[r]?t[r]=Qo({},e[r],n):"object"===Oo(t[r])&&null!==t[r]&&uo(t[r])===Object.prototype?Qo(t[r],e[r],n):Vo(t,e,r,i);else if(bo(e[r])){var o;t[r]=lo(o=e[r]).call(o)}else Vo(t,e,r,i);return t}function Ko(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!=e[n])return!1;return!0}function ta(t){var e=Oo(t);return"object"===e?null===t?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":bo(t)?"Array":t instanceof Date?"Date":"Object":"number"===e?"Number":"boolean"===e?"Boolean":"string"===e?"String":void 0===e?"undefined":e}function ea(t,e){var n;return Ur(n=[]).call(n,eo(t),[e])}function na(t){return lo(t).call(t)}function ia(t){return t.getBoundingClientRect().left}function ra(t){return t.getBoundingClientRect().right}function oa(t){return t.getBoundingClientRect().top}function aa(t,e){var n=t.className.split(" "),i=e.split(" ");n=Ur(n).call(n,Hr(i).call(i,function(t){return mo(n).call(n,t)<0})),t.className=n.join(" ")}function sa(t,e){var n=t.className.split(" "),i=e.split(" ");n=Hr(n).call(n,function(t){return mo(i).call(i,t)<0}),t.className=n.join(" ")}function la(t,e){if(bo(t))for(var n=t.length,i=0;i<n;i++)e(t[i],i,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}var ca=Ir;function ua(t,e,n){return t[e]!==n&&(t[e]=n,!0)}function da(t){var e=!1;return function(){e||(e=!0,requestAnimationFrame(function(){e=!1,t()}))}}function ha(t,e,n,i){var r;t.addEventListener?(void 0===i&&(i=!1),"mousewheel"===e&&0<=mo(r=navigator.userAgent).call(r,"Firefox")&&(e="DOMMouseScroll"),t.addEventListener(e,n,i)):t.attachEvent("on"+e,n)}function fa(t,e,n,i){var r;t.removeEventListener?(void 0===i&&(i=!1),"mousewheel"===e&&0<=mo(r=navigator.userAgent).call(r,"Firefox")&&(e="DOMMouseScroll"),t.removeEventListener(e,n,i)):t.detachEvent("on"+e,n)}function pa(t){(t=t||window.event)&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}function va(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window.event,e=null;return t&&(t.target?e=t.target:t.srcElement&&(e=t.srcElement)),e instanceof Element&&(null==e.nodeType||3!=e.nodeType||(e=e.parentNode)instanceof Element)?e:null}function ma(t,e){for(var n=t;n;){if(n===e)return!0;if(!n.parentNode)return!1;n=n.parentNode}return!1}var ga={asBoolean:function(t,e){return"function"==typeof t&&(t=t()),null!=t?0!=t:e||null},asNumber:function(t,e){return"function"==typeof t&&(t=t()),null!=t?Number(t)||e||null:e||null},asString:function(t,e){return"function"==typeof t&&(t=t()),null!=t?String(t):e||null},asSize:function(t,e){return"function"==typeof t&&(t=t()),qo(t)?t:zo(t)?t+"px":e||null},asElement:function(t,e){return"function"==typeof t&&(t=t()),t||e||null}};function ya(t){var e;switch(t.length){case 3:case 4:return(e=Fo.exec(t))?{r:Cr(e[1]+e[1],16),g:Cr(e[2]+e[2],16),b:Cr(e[3]+e[3],16)}:null;case 6:case 7:return(e=Bo.exec(t))?{r:Cr(e[1],16),g:Cr(e[2],16),b:Cr(e[3],16)}:null;default:return null}}function ba(t,e){if(-1!==mo(t).call(t,"rgba"))return t;if(-1!==mo(t).call(t,"rgb")){var n=t.substr(mo(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+n[0]+","+n[1]+","+n[2]+","+e+")"}var i=ya(t);return null==i?t:"rgba("+i.r+","+i.g+","+i.b+","+e+")"}function wa(t,e,n){var i;return"#"+lo(i=((1<<24)+(t<<16)+(e<<8)+n).toString(16)).call(i,1)}function _a(t,e){if(qo(t)){var n=t;if(La(n)){var i,r=kr(i=n.substr(4).substr(0,n.length-5).split(",")).call(i,function(t){return Cr(t)});n=wa(r[0],r[1],r[2])}if(!0!==Ca(n))return{background:n,border:n,highlight:{background:n,border:n},hover:{background:n,border:n}};var o=Da(n),a={h:o.h,s:.8*o.s,v:Math.min(1,1.02*o.v)},s={h:o.h,s:Math.min(1,1.25*o.s),v:.8*o.v},l=Ma(s.h,s.s,s.v),c=Ma(a.h,a.s,a.v);return{background:n,border:l,highlight:{background:c,border:l},hover:{background:c,border:l}}}return e?{background:t.background||e.background,border:t.border||e.border,highlight:qo(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||e.highlight.background,border:t.highlight&&t.highlight.border||e.highlight.border},hover:qo(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||e.hover.border,background:t.hover&&t.hover.background||e.hover.background}}:{background:t.background||void 0,border:t.border||void 0,highlight:qo(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:qo(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function ka(t,e,n){t/=255,e/=255,n/=255;var i=Math.min(t,Math.min(e,n)),r=Math.max(t,Math.max(e,n));return i===r?{h:0,s:0,v:i}:{h:60*((t===i?3:n===i?1:5)-(t===i?e-n:n===i?t-e:n-t)/(r-i))/360,s:(r-i)/r,v:r}}var xa=function(t){var e,a={};return ar(e=t.split(";")).call(e,function(t){if(""!=tr(t).call(t)){var e,n,i=t.split(":"),r=tr(e=i[0]).call(e),o=tr(n=i[1]).call(n);a[r]=o}}),a},Sa=function(e){var t;return kr(t=Vi(e)).call(t,function(t){return t+": "+e[t]}).join("; ")};function Ea(t,e){var n=function(r){for(var t=1;t<arguments.length;t++){var e,o=null!=arguments[t]?arguments[t]:{};if(t%2)ar(e=jo(Object(o),!0)).call(e,function(t){var e,n,i;e=r,i=o[n=t],n in e?Yi(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i});else if(Jn)qn(r,Jn(o));else{var n;ar(n=jo(Object(o))).call(n,function(t){zn(r,t,ri(o,t))})}}return r}({},xa(t.style.cssText),{},xa(e));t.style.cssText=Sa(n)}function Ta(t,e){var n=xa(t.style.cssText),i=xa(e);for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&delete n[r];t.style.cssText=Sa(n)}function Oa(t,e,n){var i,r,o,a=Math.floor(6*t),s=6*t-a,l=n*(1-e),c=n*(1-s*e),u=n*(1-(1-s)*e);switch(a%6){case 0:i=n,r=u,o=l;break;case 1:i=c,r=n,o=l;break;case 2:i=l,r=n,o=u;break;case 3:i=l,r=c,o=n;break;case 4:i=u,r=l,o=n;break;case 5:i=n,r=l,o=c}return{r:Math.floor(255*i),g:Math.floor(255*r),b:Math.floor(255*o)}}function Ma(t,e,n){var i=Oa(t,e,n);return wa(i.r,i.g,i.b)}function Da(t){var e=ya(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return ka(e.r,e.g,e.b)}function Ca(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function La(t){return Ro.test(t)}function Aa(t){return Ho.test(t)}function Ia(t,e){if(null===e||"object"!==Oo(e))return null;for(var n=zi(e),i=0;i<t.length;i++)Object.prototype.hasOwnProperty.call(e,t[i])&&"object"==Oo(e[t[i]])&&(n[t[i]]=Pa(e[t[i]]));return n}function Pa(t){if(null===t||"object"!==Oo(t))return null;if(t instanceof Element)return t;var e=zi(t);for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&"object"==Oo(t[n])&&(e[n]=Pa(t[n]));return e}function ja(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=void 0;for(r=n;0<r&&e(i,t[r-1])<0;r--)t[r]=t[r-1];t[r]=i}return t}function Na(t,e,n){function i(t){return null!=t}function a(t){return null!==t&&"object"===Oo(t)}var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(!a(t))throw new Error("Parameter mergeTarget must be an object");if(!a(e))throw new Error("Parameter options must be an object");if(!i(n))throw new Error("Parameter option must have a value");if(!a(r))throw new Error("Parameter globalOptions must be an object");var o=e[n],s=a(r)&&!function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return 0;return 1}(r)?r[n]:void 0,l=s?s.enabled:void 0;if(void 0!==o){if("boolean"==typeof o)return a(t[n])||(t[n]={}),void(t[n].enabled=o);if(null===o&&!a(t[n])){if(!i(s))return;t[n]=zi(s)}if(a(o)){var c=!0;void 0!==o.enabled?c=o.enabled:void 0!==l&&(c=s.enabled),function(t,e,n){a(t[n])||(t[n]={});var i=e[n],r=t[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}(t,e,n),t[n].enabled=c}}}function Ba(t,e,n,i){for(var r=0,o=0,a=t.length-1;o<=a&&r<1e4;){var s=Math.floor((o+a)/2),l=t[s],c=e(void 0===i?l[n]:l[n][i]);if(0==c)return s;-1==c?o=s+1:a=s-1,r++}return-1}function Fa(t,e,n,i,r){var o,a,s,l,c=0,u=0,d=t.length-1;for(r=null!=r?r:function(t,e){return t==e?0:t<e?-1:1};u<=d&&c<1e4;){if(l=Math.floor(.5*(d+u)),o=t[Math.max(0,l-1)][n],a=t[l][n],s=t[Math.min(t.length-1,l+1)][n],0==r(a,e))return l;if(r(o,e)<0&&0<r(a,e))return"before"==i?Math.max(0,l-1):l;if(r(a,e)<0&&0<r(s,e))return"before"==i?l:Math.min(t.length-1,l+1);r(a,e)<0?u=l+1:d=l-1,c++}return-1}var Ra={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function Ha(){var t=document.createElement("p");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;return n==i&&(i=e.clientWidth),document.body.removeChild(e),n-i}function za(t,e){var n;bo(e)||(e=[e]);var i=!0,r=!1,o=void 0;try{for(var a,s=In(t);!(i=(a=s.next()).done);i=!0){var l=a.value;if(l){n=l[e[0]];for(var c=1;c<e.length;c++)n=n&&n[e[c]];if(void 0!==n)break}}}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}var Ya=Object.freeze({__proto__:null,isNumber:zo,recursiveDOMDelete:Yo,isString:qo,isObject:Uo,isDate:Wo,fillIfDefined:Go,extend:Jo,selectiveExtend:Xo,selectiveDeepExtend:Zo,selectiveNotDeepExtend:$o,deepExtend:Qo,equalArray:Ko,getType:ta,copyAndExtendArray:ea,copyArray:na,getAbsoluteLeft:ia,getAbsoluteRight:ra,getAbsoluteTop:oa,addClassName:aa,removeClassName:sa,forEach:la,toArray:ca,updateProperty:ua,throttle:da,addEventListener:ha,removeEventListener:fa,preventDefault:pa,getTarget:va,hasParent:ma,option:ga,hexToRGB:ya,overrideOpacity:ba,RGBToHex:wa,parseColor:_a,RGBToHSV:ka,addCssText:Ea,removeCssText:Ta,HSVToRGB:Oa,HSVToHex:Ma,hexToHSV:Da,isValidHex:Ca,isValidRGB:La,isValidRGBA:Aa,selectiveBridgeObject:Ia,bridgeObject:Pa,insertSort:ja,mergeOptions:Na,binarySearchCustom:Ba,binarySearchValue:Fa,easingFunctions:Ra,getScrollBarWidth:Ha,topMost:za,randomUUID:Po}),qa=Object.freeze({__proto__:null,default:Ya,Alea:Rn,HSVToHex:Ma,HSVToRGB:Oa,RGBToHSV:ka,RGBToHex:wa,addClassName:aa,addCssText:Ea,addEventListener:ha,binarySearchCustom:Ba,binarySearchValue:Fa,bridgeObject:Pa,copyAndExtendArray:ea,copyArray:na,deepExtend:Qo,easingFunctions:Ra,equalArray:Ko,extend:Jo,fillIfDefined:Go,forEach:la,getAbsoluteLeft:ia,getAbsoluteRight:ra,getAbsoluteTop:oa,getScrollBarWidth:Ha,getTarget:va,getType:ta,hasParent:ma,hexToHSV:Da,hexToRGB:ya,insertSort:ja,isDate:Wo,isNumber:zo,isObject:Uo,isString:qo,isValidHex:Ca,isValidRGB:La,isValidRGBA:Aa,mergeOptions:Na,option:ga,overrideOpacity:ba,parseColor:_a,preventDefault:pa,randomUUID:Po,recursiveDOMDelete:Yo,removeClassName:sa,removeCssText:Ta,removeEventListener:fa,selectiveBridgeObject:Ia,selectiveDeepExtend:Zo,selectiveExtend:Xo,selectiveNotDeepExtend:$o,throttle:da,toArray:ca,topMost:za,updateProperty:ua}),Ua={},Wa=b["__core-js_shared__"]||function(e,n){try{Y(b,e,n)}catch(t){b[e]=n}return n}("__core-js_shared__",{}),Va=Function.toString;"function"!=typeof Wa.inspectSource&&(Wa.inspectSource=function(t){return Va.call(t)});function Ga(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++ns+is).toString(36)}function Ja(t){return rs[t]||(rs[t]=Ga(t))}var Xa,Za,$a,Qa=Wa.inspectSource,Ka=b.WeakMap,ts="function"==typeof Ka&&/native code/.test(Qa(Ka)),es=n(function(t){(t.exports=function(t,e){return Wa[t]||(Wa[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.3",mode:"pure",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})}),ns=0,is=Math.random(),rs=es("keys"),os={},as=b.WeakMap;if(ts){var ss=new as,ls=ss.get,cs=ss.has,us=ss.set;Xa=function(t,e){return us.call(ss,t,e),e},Za=function(t){return ls.call(ss,t)||{}},$a=function(t){return cs.call(ss,t)}}else{var ds=Ja("state");os[ds]=!0,Xa=function(t,e){return Y(t,ds,e),e},Za=function(t){return g(t,ds)?t[ds]:{}},$a=function(t){return g(t,ds)}}function hs(t){return Object(l(t))}function fs(t){return g(Ss,t)||(ks&&g(Es,t)?Ss[t]=Es[t]:Ss[t]=Ts("Symbol."+t)),Ss[t]}var ps,vs,ms,gs={set:Xa,get:Za,has:$a,enforce:function(t){return $a(t)?Za(t):Xa(t,{})},getterFor:function(n){return function(t){var e;if(!h(t)||(e=Za(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},ys=!d(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),bs=Ja("IE_PROTO"),ws=Object.prototype,_s=ys?Object.getPrototypeOf:function(t){return t=hs(t),g(t,bs)?t[bs]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ws:null},ks=!!Object.getOwnPropertySymbols&&!d(function(){return!String(Symbol())}),xs=ks&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ss=es("wks"),Es=b.Symbol,Ts=xs?Es:Es&&Es.withoutSetter||Ga,Os=(fs("iterator"),!1);[].keys&&("next"in(ms=[].keys())?(vs=_s(_s(ms)))!==Object.prototype&&(ps=vs):Os=!0),null==ps&&(ps={});function Ms(t){return isNaN(t=+t)?0:(0<t?Hs:Rs)(t)}function Ds(t){return 0<t?zs(Ms(t),9007199254740991):0}function Cs(t,e){var n=Ms(t);return n<0?Ys(n+e,0):qs(n,e)}function Ls(s){return function(t,e,n){var i,r=c(t),o=Ds(r.length),a=Cs(n,o);if(s&&e!=e){for(;a<o;)if((i=r[a++])!=i)return!0}else for(;a<o;a++)if((s||a in r)&&r[a]===e)return s||a||0;return!s&&-1}}function As(t,e){var n,i=c(t),r=0,o=[];for(n in i)!g(os,n)&&g(i,n)&&o.push(n);for(;e.length>r;)g(i,n=e[r++])&&(~Ws(o,n)||o.push(n));return o}function Is(t){return"function"==typeof t?t:void 0}function Ps(t,e){return arguments.length<2?Is(R[t])||Is(b[t]):R[t]&&R[t][e]||b[t]&&b[t][e]}function js(){}function Ns(t){return"<script>"+t+"<\/script>"}var Bs,Fs={IteratorPrototype:ps,BUGGY_SAFARI_ITERATORS:Os},Rs=Math.ceil,Hs=Math.floor,zs=Math.min,Ys=Math.max,qs=Math.min,Us={includes:Ls(!0),indexOf:Ls(!1)},Ws=Us.indexOf,Vs=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Gs=Object.keys||function(t){return As(t,Vs)},Js=f?Object.defineProperties:function(t,e){v(t);for(var n,i=Gs(e),r=i.length,o=0;o<r;)z.f(t,n=i[o++],e[n]);return t},Xs=Ps("document","documentElement"),Zs=Ja("IE_PROTO"),$s=function(){try{Bs=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;$s=Bs?function(t){t.write(Ns("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Bs):((e=a("iframe")).style.display="none",Xs.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Ns("document.F=Object")),t.close(),t.F);for(var n=Vs.length;n--;)delete $s.prototype[Vs[n]];return $s()};os[Zs]=!0;var Qs=Object.create||function(t,e){var n;return null!==t?(js.prototype=v(t),n=new js,js.prototype=null,n[Zs]=t):n=$s(),void 0===e?n:Js(n,e)},Ks={};Ks[fs("toStringTag")]="z";function tl(t,e,n,i){if(t){var r=n?t:t.prototype;g(r,dl)||ul(r,dl,{configurable:!0,value:e}),i&&!ol&&Y(r,"toString",cl)}}function el(){return this}function nl(t,e,n,i){i&&i.enumerable?t[e]=n:Y(t,e,n)}function il(){return this}function rl(t,e,n,i,r,o,a){var s,l,c;function u(t){if(t===r&&y)return y;if(!vl&&t in m)return m[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}}l=i,c=e+" Iterator",(s=n).prototype=Qs(hl,{next:w(1,l)}),tl(s,c,!1,!0),Ua[c]=el;var d,h,f,p=e+" Iterator",v=!1,m=t.prototype,g=m[ml]||m["@@iterator"]||r&&m[r],y=!vl&&g||u(r),b="Array"==e&&m.entries||g;if(b&&(d=_s(b.call(new t)),pl!==Object.prototype&&d.next&&(tl(d,p,!0,!0),Ua[p]=il)),"values"==r&&g&&"values"!==g.name&&(v=!0,y=function(){return g.call(this)}),a&&m[ml]!==y&&Y(m,ml,y),Ua[e]=y,r)if(h={values:u("values"),keys:o?y:u("keys"),entries:u("entries")},a)for(f in h)!vl&&!v&&f in m||nl(m,f,h[f]);else k({target:e,proto:!0,forced:vl||v},h);return h}var ol="[object z]"===String(Ks),al=fs("toStringTag"),sl="Arguments"==r(function(){return arguments}()),ll=ol?r:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),al))?n:sl?r(e):"Object"==(i=r(e))&&"function"==typeof e.callee?"Arguments":i},cl=ol?{}.toString:function(){return"[object "+ll(this)+"]"},ul=z.f,dl=fs("toStringTag"),hl=Fs.IteratorPrototype,fl=Object.setPrototypeOf||("__proto__"in{}?function(){var n,i=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),i=t instanceof Array}catch(n){}return function(t,e){return v(t),function(t){if(!h(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),i?n.call(t,e):t.__proto__=e,t}}():void 0),pl=Fs.IteratorPrototype,vl=Fs.BUGGY_SAFARI_ITERATORS,ml=fs("iterator"),gl=gs.set,yl=gs.getterFor("Array Iterator");rl(Array,"Array",function(t,e){gl(this,{type:"Array Iterator",target:c(t),index:0,kind:e})},function(){var t=yl(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}},"values"),Ua.Arguments=Ua.Array;var bl=fs("toStringTag");for(var wl in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var _l=b[wl],kl=_l&&_l.prototype;kl&&ll(kl)!==bl&&Y(kl,bl,wl),Ua[wl]=Ua.Array}function xl(t,e){var n;return Ml(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Ml(n.prototype)?h(n)&&null===(n=n[Dl])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function Sl(f){var p=1==f,v=2==f,m=3==f,g=4==f,y=6==f,b=5==f||y;return function(t,e,n,i){for(var r,o,a=hs(t),s=T(a),l=_(e,n,3),c=Ds(s.length),u=0,d=i||xl,h=p?d(t,c):v?d(t,0):void 0;u<c;u++)if((b||u in s)&&(o=l(r=s[u],u,a),f))if(p)h[u]=o;else if(o)switch(f){case 3:return!0;case 5:return r;case 6:return u;case 2:Cl.call(h,r)}else if(g)return!1;return y?-1:m||g?g:h}}function El(t,e){var n=[][t];return!!n&&d(function(){n.call(null,e||function(){throw 1},1)})}function Tl(t){throw t}function Ol(t,e){var n=[][t],i=!!g(e=e||{},"ACCESSORS")&&e.ACCESSORS,r=g(e,0)?e[0]:Tl,o=g(e,1)?e[1]:void 0;return!!n&&!d(function(){if(i&&!f)return!0;function t(t){i?Al(e,t,{enumerable:!0,get:Tl}):e[t]=1}var e={length:-1};t(1),t(2147483646),t(4294967294),n.call(e,r,o)})}var Ml=Array.isArray||function(t){return"Array"==r(t)},Dl=fs("species"),Cl=[].push,Ll={forEach:Sl(0),map:Sl(1),filter:Sl(2),some:Sl(3),every:Sl(4),find:Sl(5),findIndex:Sl(6)},Al=Object.defineProperty,Il=Ll.forEach,Pl=El("forEach"),jl=Ol("forEach"),Nl=Pl&&jl?[].forEach:function(t){return Il(this,t,1<arguments.length?arguments[1]:void 0)};k({target:"Array",proto:!0,forced:[].forEach!=Nl},{forEach:Nl});var Bl=G("Array").forEach,Fl=Array.prototype,Rl={DOMTokenList:!0,NodeList:!0},Hl=function(t){var e=t.forEach;return t===Fl||t instanceof Array&&e===Fl.forEach||Rl.hasOwnProperty(ll(t))?Bl:e};k({target:"Array",stat:!0},{isArray:Ml});function zl(t,e,n){var i=o(e);i in t?z.f(t,i,w(0,n)):t[i]=n}var Yl,ql,Ul=R.Array.isArray,Wl=Ul,Vl=Ps("navigator","userAgent")||"",Gl=b.process,Jl=Gl&&Gl.versions,Xl=Jl&&Jl.v8;Xl?ql=(Yl=Xl.split("."))[0]+Yl[1]:Vl&&(!(Yl=Vl.match(/Edge\/(\d+)/))||74<=Yl[1])&&(Yl=Vl.match(/Chrome\/(\d+)/))&&(ql=Yl[1]);function Zl(e){return 51<=$l||!d(function(){var t=[];return(t.constructor={})[Ql]=function(){return{foo:1}},1!==t[e](Boolean).foo})}var $l=ql&&+ql,Ql=fs("species"),Kl=Zl("splice"),tc=Ol("splice",{ACCESSORS:!0,0:0,1:2}),ec=Math.max,nc=Math.min;k({target:"Array",proto:!0,forced:!Kl||!tc},{splice:function(t,e){var n,i,r,o,a,s,l=hs(this),c=Ds(l.length),u=Cs(t,c),d=arguments.length;if(0===d?n=i=0:i=1===d?(n=0,c-u):(n=d-2,nc(ec(Ms(e),0),c-u)),9007199254740991<c+n-i)throw TypeError("Maximum allowed length exceeded");for(r=xl(l,i),o=0;o<i;o++)(a=u+o)in l&&zl(r,o,l[a]);if(n<(r.length=i)){for(o=u;o<c-i;o++)s=o+n,(a=o+i)in l?l[s]=l[a]:delete l[s];for(o=c;c-i+n<o;o--)delete l[o-1]}else if(i<n)for(o=c-i;u<o;o--)s=o+n-1,(a=o+i-1)in l?l[s]=l[a]:delete l[s];for(o=0;o<n;o++)l[o+u]=arguments[o+2];return l.length=c-i+n,r}});var ic=G("Array").splice,rc=Array.prototype,oc=function(t){var e=t.splice;return t===rc||t instanceof Array&&e===rc.splice?ic:e},ac=Us.includes,sc=Ol("indexOf",{ACCESSORS:!0,1:0});k({target:"Array",proto:!0,forced:!sc},{includes:function(t){return ac(this,t,1<arguments.length?arguments[1]:void 0)}});var lc=G("Array").includes,cc=fs("match"),uc=fs("match");k({target:"String",proto:!0,forced:!function(){var e=/./;try{"/./".includes(e)}catch(t){try{return e[uc]=!1,"/./".includes(e)}catch(t){}}return 0}()},{includes:function(t){return!!~String(l(this)).indexOf(function(t){if(h(e=t)&&(void 0!==(n=e[cc])?n:"RegExp"==r(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}(t),1<arguments.length?arguments[1]:void 0)}});var dc=G("String").includes,hc=Array.prototype,fc=String.prototype,pc=function(t){var e=t.includes;return t===hc||t instanceof Array&&e===hc.includes?lc:"string"==typeof t||t===fc||t instanceof String&&e===fc.includes?dc:e},vc=Us.indexOf,mc=[].indexOf,gc=!!mc&&1/[1].indexOf(1,-0)<0,yc=El("indexOf"),bc=Ol("indexOf",{ACCESSORS:!0,1:0});k({target:"Array",proto:!0,forced:gc||!yc||!bc},{indexOf:function(t){return gc?mc.apply(this,arguments)||0:vc(this,t,1<arguments.length?arguments[1]:void 0)}});var wc=G("Array").indexOf,_c=Array.prototype,kc=function(t){var e=t.indexOf;return t===_c||t instanceof Array&&e===_c.indexOf?wc:e};k({target:"Object",stat:!0,sham:!f},{create:Qs});function xc(t,e){return Sc.create(t,e)}var Sc=R.Object,Ec=xc;function Tc(t){return Lc=t,function(){var t={};if(Ac=0,Ic=Lc.charAt(0),Wc(),"strict"===Pc&&(t.strict=!0,Wc()),"graph"!==Pc&&"digraph"!==Pc||(t.type=Pc,Wc()),jc===Dc.IDENTIFIER&&(t.id=Pc,Wc()),"{"!=Pc)throw $c("Angle bracket { expected");if(Wc(),Vc(t),"}"!=Pc)throw $c("Angle bracket } expected");if(Wc(),""!==Pc)throw $c("End of file expected");return Wc(),delete t.node,delete t.edge,delete t.graph,t}()}var Oc={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},Mc=Ec(Oc);Mc.color="color.color",Mc.style="dashes";var Dc={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},Cc={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},Lc="",Ac=0,Ic="",Pc="",jc=Dc.NULL;function Nc(){Ac++,Ic=Lc.charAt(Ac)}function Bc(){return Lc.charAt(Ac+1)}var Fc=/[a-zA-Z_0-9.:#]/;function Rc(t){return Fc.test(t)}function Hc(t,e){if(t=t||{},e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function zc(t,e,n){for(var i=e.split("."),r=t;i.length;){var o=i.shift();i.length?(r[o]||(r[o]={}),r=r[o]):r[o]=n}}function Yc(t,e){for(var n,i,r=null,o=[t],a=t;a.parent;)o.push(a.parent),a=a.parent;if(a.nodes)for(n=0,i=a.nodes.length;n<i;n++)if(e.id===a.nodes[n].id){r=a.nodes[n];break}for(r||(r={id:e.id},t.node&&(r.attr=Hc(r.attr,t.node))),n=o.length-1;0<=n;n--){var s,l=o[n];l.nodes||(l.nodes=[]),-1===kc(s=l.nodes).call(s,r)&&l.nodes.push(r)}e.attr&&(r.attr=Hc(r.attr,e.attr))}function qc(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var n=Hc({},t.edge);e.attr=Hc(n,e.attr)}}function Uc(t,e,n,i,r){var o={from:e,to:n,type:i};return t.edge&&(o.attr=Hc({},t.edge)),o.attr=Hc(o.attr||{},r),null!=r&&r.hasOwnProperty("arrows")&&null!=r.arrows&&(o.arrows={to:{enabled:!0,type:r.arrows.type}},r.arrows=null),o}function Wc(){for(jc=Dc.NULL,Pc="";" "===Ic||"\t"===Ic||"\n"===Ic||"\r"===Ic;)Nc();do{var t=!1;if("#"===Ic){for(var e=Ac-1;" "===Lc.charAt(e)||"\t"===Lc.charAt(e);)e--;if("\n"===Lc.charAt(e)||""===Lc.charAt(e)){for(;""!=Ic&&"\n"!=Ic;)Nc();t=!0}}if("/"===Ic&&"/"===Bc()){for(;""!=Ic&&"\n"!=Ic;)Nc();t=!0}if("/"===Ic&&"*"===Bc()){for(;""!=Ic;){if("*"===Ic&&"/"===Bc()){Nc(),Nc();break}Nc()}t=!0}for(;" "===Ic||"\t"===Ic||"\n"===Ic||"\r"===Ic;)Nc()}while(t);if(""!==Ic){var n=Ic+Bc();if(Cc[n])return jc=Dc.DELIMITER,Pc=n,Nc(),void Nc();if(Cc[Ic])return jc=Dc.DELIMITER,Pc=Ic,void Nc();if(Rc(Ic)||"-"===Ic){for(Pc+=Ic,Nc();Rc(Ic);)Pc+=Ic,Nc();return"false"===Pc?Pc=!1:"true"===Pc?Pc=!0:isNaN(Number(Pc))||(Pc=Number(Pc)),void(jc=Dc.IDENTIFIER)}if('"'===Ic){for(Nc();""!=Ic&&('"'!=Ic||'"'===Ic&&'"'===Bc());)'"'===Ic?(Pc+=Ic,Nc()):"\\"===Ic&&"n"===Bc()?(Pc+="\n",Nc()):Pc+=Ic,Nc();if('"'!=Ic)throw $c('End of string " expected');return Nc(),void(jc=Dc.IDENTIFIER)}for(jc=Dc.UNKNOWN;""!=Ic;)Pc+=Ic,Nc();throw new SyntaxError('Syntax error in part "'+Qc(Pc,30)+'"')}jc=Dc.DELIMITER}function Vc(t){for(;""!==Pc&&"}"!=Pc;)Gc(t),";"===Pc&&Wc()}function Gc(t){var e,n,i,r,o,a=Jc(t);if(a)Xc(t,a);else if(o=t,!("node"===Pc?(Wc(),o.node=Zc(),"node"):"edge"===Pc?(Wc(),o.edge=Zc(),"edge"):"graph"===Pc&&(Wc(),o.graph=Zc(),"graph"))){if(jc!=Dc.IDENTIFIER)throw $c("Identifier expected");var s=Pc;if(Wc(),"="===Pc){if(Wc(),jc!=Dc.IDENTIFIER)throw $c("Identifier expected");t[s]=Pc,Wc()}else e=t,i={id:n=s},(r=Zc())&&(i.attr=r),Yc(e,i),Xc(e,n)}}function Jc(t){var e=null;if("subgraph"===Pc&&((e={}).type="subgraph",Wc(),jc===Dc.IDENTIFIER&&(e.id=Pc,Wc())),"{"===Pc){if(Wc(),(e=e||{}).parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,Vc(e),"}"!=Pc)throw $c("Angle bracket } expected");Wc(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function Xc(t,e){for(;"->"===Pc||"--"===Pc;){var n,i=Pc;Wc();var r=Jc(t);if(r)n=r;else{if(jc!=Dc.IDENTIFIER)throw $c("Identifier or subgraph expected");Yc(t,{id:n=Pc}),Wc()}qc(t,Uc(t,e,n,i,Zc())),e=n}}function Zc(){for(var t,e,n=null,i={dashed:!0,solid:!1,dotted:[1,5]},r={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},o=new Array,a=new Array;"["===Pc;){for(Wc(),n={};""!==Pc&&"]"!=Pc;){if(jc!=Dc.IDENTIFIER)throw $c("Attribute name expected");var s=Pc;if(Wc(),"="!=Pc)throw $c("Equal sign = expected");if(Wc(),jc!=Dc.IDENTIFIER)throw $c("Attribute value expected");var l=Pc;"style"===s&&(l=i[l]),"arrowhead"===s&&(s="arrows",l={to:{enabled:!0,type:r[l]}}),"arrowtail"===s&&(s="arrows",l={from:{enabled:!0,type:r[l]}}),o.push({attr:n,name:s,value:l}),a.push(s),Wc(),","==Pc&&Wc()}if("]"!=Pc)throw $c("Bracket ] expected");Wc()}if(pc(a).call(a,"dir")){var c={arrows:{}};for(t=0;t<o.length;t++)if("arrows"===o[t].name)if(null!=o[t].value.to)c.arrows.to=t;else{if(null==o[t].value.from)throw $c("Invalid value of arrows");c.arrows.from=t}else"dir"===o[t].name&&(c.dir=t);var u,d,h=o[c.dir].value;if(!pc(a).call(a,"arrows"))if("both"===h)o.push({attr:o[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=o.length-1,o.push({attr:o[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=o.length-1;else if("forward"===h)o.push({attr:o[c.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),c.arrows.to=o.length-1;else if("back"===h)o.push({attr:o[c.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),c.arrows.from=o.length-1;else{if("none"!==h)throw $c('Invalid dir type "'+h+'"');o.push({attr:o[c.dir].attr,name:"arrows",value:""}),c.arrows.to=o.length-1}if("both"===h)c.arrows.to&&c.arrows.from?(d=o[c.arrows.to].value.to.type,u=o[c.arrows.from].value.from.type,o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:u}}},oc(o).call(o,c.arrows.from,1)):c.arrows.to?(d=o[c.arrows.to].value.to.type,u="arrow",o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:u}}}):c.arrows.from&&(d="arrow",u=o[c.arrows.from].value.from.type,o[c.arrows.from]={attr:o[c.arrows.from].attr,name:o[c.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:u}}});else if("back"===h)c.arrows.to&&c.arrows.from?(d="",u=o[c.arrows.from].value.from.type,o[c.arrows.from]={attr:o[c.arrows.from].attr,name:o[c.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:u}}}):c.arrows.to?(d="",u="arrow",c.arrows.from=c.arrows.to,o[c.arrows.from]={attr:o[c.arrows.from].attr,name:o[c.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:u}}}):c.arrows.from&&(d="",u=o[c.arrows.from].value.from.type,o[c.arrows.to]={attr:o[c.arrows.from].attr,name:o[c.arrows.from].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:u}}}),o[c.arrows.from]={attr:o[c.arrows.from].attr,name:o[c.arrows.from].name,value:{from:{enabled:!0,type:o[c.arrows.from].value.from.type}}};else if("none"===h){var f;o[f=c.arrows.to?c.arrows.to:c.arrows.from]={attr:o[f].attr,name:o[f].name,value:""}}else{if("forward"!==h)throw $c('Invalid dir type "'+h+'"');c.arrows.to&&c.arrows.from?(d=o[c.arrows.to].value.to.type,u="",o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:u}}}):c.arrows.to?(d=o[c.arrows.to].value.to.type,u="",o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:u}}}):c.arrows.from&&(d="arrow",u="",c.arrows.to=c.arrows.from,o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:d},from:{enabled:!0,type:u}}}),o[c.arrows.to]={attr:o[c.arrows.to].attr,name:o[c.arrows.to].name,value:{to:{enabled:!0,type:o[c.arrows.to].value.to.type}}}}oc(o).call(o,c.dir,1)}if(pc(a).call(a,"penwidth")){var p=[];for(e=o.length,t=0;t<e;t++)"width"!==o[t].name&&("penwidth"===o[t].name&&(o[t].name="width"),p.push(o[t]));o=p}for(e=o.length,t=0;t<e;t++)zc(o[t].attr,o[t].name,o[t].value);return n}function $c(t){return new SyntaxError(t+', got "'+Qc(Pc,30)+'" (char '+Ac+")")}function Qc(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function Kc(t,e,n){for(var i=e.split("."),r=i.pop(),o=t,a=0;a<i.length;a++){var s=i[a];s in o||(o[s]={}),o=o[s]}return o[r]=n,t}function tu(e,t){var n={};for(var i in e)if(e.hasOwnProperty(i)){var r=t[i];Wl(r)?Hl(r).call(r,function(t){Kc(n,t,e[i])}):Kc(n,"string"==typeof r?r:i,e[i])}return n}function eu(t){var e,n=Tc(t),l={nodes:[],edges:[],options:{}};if(n.nodes&&Hl(e=n.nodes).call(e,function(t){var e={id:t.id,label:String(t.label||t.id)};Hc(e,tu(t.attr,Oc)),e.image&&(e.shape="image"),l.nodes.push(e)}),n.edges){var i,c=function(t){var e={from:t.from,to:t.to};return Hc(e,tu(t.attr,Mc)),null==e.arrows&&"->"===t.type&&(e.arrows="to"),e};Hl(i=n.edges).call(i,function(r){var t,e,n,i,o,a,s;t=r.from instanceof Object?r.from.nodes:{id:r.from},e=r.to instanceof Object?r.to.nodes:{id:r.to},r.from instanceof Object&&r.from.edges&&Hl(n=r.from.edges).call(n,function(t){var e=c(t);l.edges.push(e)}),o=e,a=function(t,e){var n=Uc(l,t.id,e.id,r.type,r.attr),i=c(n);l.edges.push(i)},Wl(i=t)?Hl(i).call(i,function(e){Wl(o)?Hl(o).call(o,function(t){a(e,t)}):a(e,o)}):Wl(o)?Hl(o).call(o,function(t){a(i,t)}):a(i,o),r.to instanceof Object&&r.to.edges&&Hl(s=r.to.edges).call(s,function(t){var e=c(t);l.edges.push(e)})})}return n.attr&&(l.options=n.attr),l}var nu=Tc,iu={parseDOT:nu,DOTToGraph:eu},ru=Object.freeze({__proto__:null,default:iu,__moduleExports:iu,parseDOT:nu,DOTToGraph:eu}),ou=Ll.map,au=Zl("map"),su=Ol("map");k({target:"Array",proto:!0,forced:!au||!su},{map:function(t){return ou(this,t,1<arguments.length?arguments[1]:void 0)}});function lu(t){var e=t.map;return t===uu||t instanceof Array&&e===uu.map?cu:e}var cu=G("Array").map,uu=Array.prototype;function du(t,e){var n,i={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};null!=e&&(null!=e.fixed&&(i.nodes.fixed=e.fixed),null!=e.parseColor&&(i.nodes.parseColor=e.parseColor),null!=e.inheritColor&&(i.edges.inheritColor=e.inheritColor));var r=t.edges,o=lu(r).call(r,function(t){var e={from:t.source,id:t.id,to:t.target};return null!=t.attributes&&(e.attributes=t.attributes),null!=t.label&&(e.label=t.label),null!=t.attributes&&null!=t.attributes.title&&(e.title=t.attributes.title),"Directed"===t.type&&(e.arrows="to"),t.color&&!1===i.edges.inheritColor&&(e.color=t.color),e});return{nodes:lu(n=t.nodes).call(n,function(t){var e={id:t.id,fixed:i.nodes.fixed&&null!=t.x&&null!=t.y};return null!=t.attributes&&(e.attributes=t.attributes),null!=t.label&&(e.label=t.label),null!=t.size&&(e.size=t.size),null!=t.attributes&&null!=t.attributes.title&&(e.title=t.attributes.title),null!=t.title&&(e.title=t.title),null!=t.x&&(e.x=t.x),null!=t.y&&(e.y=t.y),null!=t.color&&(!0===i.nodes.parseColor?e.color=t.color:e.color={background:t.color,border:t.color,highlight:{background:t.color,border:t.color},hover:{background:t.color,border:t.color}}),e}),edges:o}}var hu=Object.freeze({__proto__:null,parseGephi:du}),fu=Object.freeze({__proto__:null,default:void 0}),pu=n(function(t,e){t.exports=function(t){var e,r=t&&t.preventDefault||!1,n=t&&t.container||window,i={},a={keydown:{},keyup:{}},s={};for(e=97;e<=122;e++)s[String.fromCharCode(e)]={code:e-97+65,shift:!1};for(e=65;e<=90;e++)s[String.fromCharCode(e)]={code:e,shift:!0};for(e=0;e<=9;e++)s[""+e]={code:48+e,shift:!1};for(e=1;e<=12;e++)s["F"+e]={code:111+e,shift:!1};for(e=0;e<=9;e++)s["num"+e]={code:96+e,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};function o(t){c(t,"keydown")}function l(t){c(t,"keyup")}var c=function(t,e){if(void 0!==a[e][t.keyCode]){for(var n=a[e][t.keyCode],i=0;i<n.length;i++)void 0===n[i].shift?n[i].fn(t):1==n[i].shift&&1==t.shiftKey?n[i].fn(t):0==n[i].shift&&0==t.shiftKey&&n[i].fn(t);1==r&&t.preventDefault()}};return i.bind=function(t,e,n){if(void 0===n&&(n="keydown"),void 0===s[t])throw new Error("unsupported key: "+t);void 0===a[n][s[t].code]&&(a[n][s[t].code]=[]),a[n][s[t].code].push({fn:e,shift:s[t].shift})},i.bindAll=function(t,e){for(var n in void 0===e&&(e="keydown"),s)s.hasOwnProperty(n)&&i.bind(n,t,e)},i.getKey=function(t){for(var e in s)if(s.hasOwnProperty(e)){if(1==t.shiftKey&&1==s[e].shift&&t.keyCode==s[e].code)return e;if(0==t.shiftKey&&0==s[e].shift&&t.keyCode==s[e].code)return e;if(t.keyCode==s[e].code&&"shift"==e)return e}return"unknown key, currently not supported"},i.unbind=function(t,e,n){if(void 0===n&&(n="keydown"),void 0===s[t])throw new Error("unsupported key: "+t);if(void 0!==e){var i=[],r=a[n][s[t].code];if(void 0!==r)for(var o=0;o<r.length;o++)r[o].fn==e&&r[o].shift==s[t].shift||i.push(a[n][s[t].code][o]);a[n][s[t].code]=i}else a[n][s[t].code]=[]},i.reset=function(){a={keydown:{},keyup:{}}},i.destroy=function(){a={keydown:{},keyup:{}},n.removeEventListener("keydown",o,!0),n.removeEventListener("keyup",l,!0)},n.addEventListener("keydown",o,!0),n.addEventListener("keyup",l,!0),i}}),vu=Object.freeze({__proto__:null,default:pu,__moduleExports:pu});function mu(){return(mu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function gu(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function yu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var bu,wu="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign,_u=["","webkit","Moz","MS","ms","o"],ku="undefined"==typeof document?{style:{}}:document.createElement("div"),xu="function",Su=Math.round,Eu=Math.abs,Tu=Date.now;function Ou(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),o=0;o<_u.length;){if((i=(n=_u[o])?n+r:e)in t)return i;o++}}bu="undefined"==typeof window?{}:window;var Mu=Ou(ku.style,"touchAction"),Du=void 0!==Mu,Cu="manipulation",Lu="none",Au="pan-x",Iu="pan-y",Pu=function(){if(!Du)return!1;var e={},n=bu.CSS&&bu.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){return e[t]=!n||bu.CSS.supports("touch-action",t)}),e}(),ju="ontouchstart"in bu,Nu=void 0!==Ou(bu,"PointerEvent"),Bu=ju&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Fu="touch",Ru=25,Hu=1,zu=4,Yu=8,qu=1,Uu=2,Wu=4,Vu=8,Gu=16,Ju=Uu|Wu,Xu=Vu|Gu,Zu=Ju|Xu,$u=["x","y"],Qu=["clientX","clientY"];function Ku(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(void 0!==t.length)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function td(t,e){return typeof t===xu?t.apply(e&&e[0]||void 0,e):t}function ed(t,e){return-1<t.indexOf(e)}var nd,id=((nd=rd.prototype).set=function(t){"compute"===t&&(t=this.compute()),Du&&this.manager.element.style&&Pu[t]&&(this.manager.element.style[Mu]=t),this.actions=t.toLowerCase().trim()},nd.update=function(){this.set(this.manager.options.touchAction)},nd.compute=function(){var e=[];return Ku(this.manager.recognizers,function(t){td(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(t){if(ed(t,Lu))return Lu;var e=ed(t,Au),n=ed(t,Iu);return e&&n?Lu:e||n?e?Au:Iu:ed(t,Cu)?Cu:"auto"}(e.join(" "))},nd.preventDefaults=function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=ed(i,Lu)&&!Pu.none,o=ed(i,Iu)&&!Pu[Iu],a=ed(i,Au)&&!Pu[Au];if(r){var s=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(s&&l&&c)return}if(!a||!o)return r||o&&n&Ju||a&&n&Xu?this.preventSrc(e):void 0}},nd.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},rd);function rd(t,e){this.manager=t,this.set(e)}function od(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function ad(t){var e=t.length;if(1===e)return{x:Su(t[0].clientX),y:Su(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:Su(n/e),y:Su(i/e)}}function sd(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:Su(t.pointers[n].clientX),clientY:Su(t.pointers[n].clientY)},n++;return{timeStamp:Tu(),pointers:e,center:ad(e),deltaX:t.deltaX,deltaY:t.deltaY}}function ld(t,e,n){var i=e[(n=n||$u)[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function cd(t,e,n){var i=e[(n=n||$u)[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}function ud(t,e){return t===e?qu:Eu(t)>=Eu(e)?t<0?Uu:Wu:e<0?Vu:Gu}function dd(t,e,n){return{x:e/t||0,y:n/t||0}}function hd(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=e&Hu&&i-r==0,a=e&(zu|Yu)&&i-r==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=sd(e)),1<r&&!n.firstMultiple?n.firstMultiple=sd(e):1===r&&(n.firstMultiple=!1);var o,a,s,l,c,u,d=n.firstInput,h=n.firstMultiple,f=h?h.center:d.center,p=e.center=ad(i);e.timeStamp=Tu(),e.deltaTime=e.timeStamp-d.timeStamp,e.angle=cd(f,p),e.distance=ld(f,p),o=n,s=(a=e).center,l=o.offsetDelta||{},c=o.prevDelta||{},u=o.prevInput||{},a.eventType!==Hu&&u.eventType!==zu||(c=o.prevDelta={x:u.deltaX||0,y:u.deltaY||0},l=o.offsetDelta={x:s.x,y:s.y}),a.deltaX=c.x+(s.x-l.x),a.deltaY=c.y+(s.y-l.y),e.offsetDirection=ud(e.deltaX,e.deltaY);var v,m,g,y,b=dd(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=b.x,e.overallVelocityY=b.y,e.overallVelocity=Eu(b.x)>Eu(b.y)?b.x:b.y,e.scale=h?(v=h.pointers,ld((m=i)[0],m[1],Qu)/ld(v[0],v[1],Qu)):1,e.rotation=h?(g=h.pointers,cd((y=i)[1],y[0],Qu)+cd(g[1],g[0],Qu)):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,r,o,a=t.lastInterval||e,s=e.timeStamp-a.timeStamp;if(e.eventType!==Yu&&(Ru<s||void 0===a.velocity)){var l=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,u=dd(s,l,c);i=u.x,r=u.y,n=Eu(u.x)>Eu(u.y)?u.x:u.y,o=ud(l,c),t.lastInterval=e}else n=a.velocity,i=a.velocityX,r=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=o}(n,e);var w,_=t.element,k=e.srcEvent;od(w=k.composedPath?k.composedPath()[0]:k.path?k.path[0]:k.target,_)&&(_=w),e.target=_}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function fd(t){return t.trim().split(/\s+/g)}function pd(e,t,n){Ku(fd(t),function(t){e.addEventListener(t,n,!1)})}function vd(e,t,n){Ku(fd(t),function(t){e.removeEventListener(t,n,!1)})}function md(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var gd,yd=((gd=bd.prototype).handler=function(){},gd.init=function(){this.evEl&&pd(this.element,this.evEl,this.domHandler),this.evTarget&&pd(this.target,this.evTarget,this.domHandler),this.evWin&&pd(md(this.element),this.evWin,this.domHandler)},gd.destroy=function(){this.evEl&&vd(this.element,this.evEl,this.domHandler),this.evTarget&&vd(this.target,this.evTarget,this.domHandler),this.evWin&&vd(md(this.element),this.evWin,this.domHandler)},bd);function bd(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){td(e.options.enable,[e])&&n.handler(t)},this.init()}function wd(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}var _d={pointerdown:Hu,pointermove:2,pointerup:zu,pointercancel:Yu,pointerout:Yu},kd={2:Fu,3:"pen",4:"mouse",5:"kinect"},xd="pointerdown",Sd="pointermove pointerup pointercancel";bu.MSPointerEvent&&!bu.PointerEvent&&(xd="MSPointerDown",Sd="MSPointerMove MSPointerUp MSPointerCancel");var Ed,Td=(gu(Od,Ed=yd),Od.prototype.handler=function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=_d[i],o=kd[t.pointerType]||t.pointerType,a=o===Fu,s=wd(e,t.pointerId,"pointerId");r&Hu&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):r&(zu|Yu)&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))},Od);function Od(){var t,e=Od.prototype;return e.evEl=xd,e.evWin=Sd,(t=Ed.apply(this,arguments)||this).store=t.manager.session.pointerEvents=[],t}function Md(t){return Array.prototype.slice.call(t,0)}function Dd(t,n,e){for(var i=[],r=[],o=0;o<t.length;){var a=n?t[o][n]:t[o];wd(r,a)<0&&i.push(t[o]),r[o]=a,o++}return e&&(i=n?i.sort(function(t,e){return t[n]>e[n]}):i.sort()),i}var Cd,Ld={touchstart:Hu,touchmove:2,touchend:zu,touchcancel:Yu},Ad=(gu(Id,Cd=yd),Id.prototype.handler=function(t){var e=Ld[t.type],n=function(t,e){var n,i,r=Md(t.touches),o=this.targetIds;if(e&(2|Hu)&&1===r.length)return o[r[0].identifier]=!0,[r,r];var a=Md(t.changedTouches),s=[],l=this.target;if(i=r.filter(function(t){return od(t.target,l)}),e===Hu)for(n=0;n<i.length;)o[i[n].identifier]=!0,n++;for(n=0;n<a.length;)o[a[n].identifier]&&s.push(a[n]),e&(zu|Yu)&&delete o[a[n].identifier],n++;return s.length?[Dd(i.concat(s),"identifier",!0),s]:void 0}.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Fu,srcEvent:t})},Id);function Id(){var t;return Id.prototype.evTarget="touchstart touchmove touchend touchcancel",(t=Cd.apply(this,arguments)||this).targetIds={},t}var Pd,jd={mousedown:Hu,mousemove:2,mouseup:zu},Nd=(gu(Rd,Pd=yd),Rd.prototype.handler=function(t){var e=jd[t.type];e&Hu&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=zu),this.pressed&&(e&zu&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))},Rd),Bd=2500,Fd=25;function Rd(){var t,e=Rd.prototype;return e.evEl="mousedown",e.evWin="mousemove mouseup",(t=Pd.apply(this,arguments)||this).pressed=!1,t}function Hd(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY},i=this.lastTouches;this.lastTouches.push(n),setTimeout(function(){var t=i.indexOf(n);-1<t&&i.splice(t,1)},Bd)}}var zd,Yd=(gu(qd,zd=yd),qd.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},qd);function qd(t,e){var o;return(o=zd.call(this,t,e)||this).handler=function(t,e,n){var i=n.pointerType===Fu,r="mouse"===n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)(function(t,e){t&Hu?(this.primaryTouch=e.changedPointers[0].identifier,Hd.call(this,e)):t&(zu|Yu)&&Hd.call(this,e)}).call(yu(yu(o)),e,n);else if(r&&function(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),a=Math.abs(n-r.y);if(o<=Fd&&a<=Fd)return!0}return!1}.call(yu(yu(o)),n))return;o.callback(t,e,n)}},o.touch=new Ad(o.manager,o.handler),o.mouse=new Nd(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}function Ud(t,e,n){return!!Array.isArray(t)&&(Ku(t,n[e],n),!0)}var Wd=1;function Vd(t,e){var n=e.manager;return n?n.get(t):t}function Gd(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}var Jd,Xd=((Jd=Qd.prototype).set=function(t){return wu(this.options,t),this.manager&&this.manager.touchAction.update(),this},Jd.recognizeWith=function(t){if(Ud(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Vd(t,this)).id]||(e[t.id]=t).recognizeWith(this),this},Jd.dropRecognizeWith=function(t){return Ud(t,"dropRecognizeWith",this)||(t=Vd(t,this),delete this.simultaneous[t.id]),this},Jd.requireFailure=function(t){if(Ud(t,"requireFailure",this))return this;var e=this.requireFail;return-1===wd(e,t=Vd(t,this))&&(e.push(t),t.requireFailure(this)),this},Jd.dropRequireFailure=function(t){if(Ud(t,"dropRequireFailure",this))return this;t=Vd(t,this);var e=wd(this.requireFail,t);return-1<e&&this.requireFail.splice(e,1),this},Jd.hasRequireFailures=function(){return 0<this.requireFail.length},Jd.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},Jd.emit=function(e){var n=this,t=this.state;function i(t){n.manager.emit(t,e)}t<8&&i(n.options.event+Gd(t)),i(n.options.event),e.additionalEvent&&i(e.additionalEvent),8<=t&&i(n.options.event+Gd(t))},Jd.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=32},Jd.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},Jd.recognize=function(t){var e=wu({},t);if(!td(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},Jd.process=function(t){},Jd.getTouchAction=function(){},Jd.reset=function(){},Qd),Zd=function(n){function t(t){var e;return void 0===t&&(t={}),(e=n.call(this,mu({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},t))||this).pTime=!1,e.pCenter=!1,e._timer=null,e._input=null,e.count=0,e}gu(t,n);var e=t.prototype;return e.getTouchAction=function(){return[Cu]},e.process=function(t){var e=this,n=this.options,i=t.pointers.length===n.pointers,r=t.distance<n.threshold,o=t.deltaTime<n.time;if(this.reset(),t.eventType&Hu&&0===this.count)return this.failTimeout();if(r&&o&&i){if(t.eventType!==zu)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<n.interval,s=!this.pCenter||ld(this.pCenter,t.center)<n.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0==this.count%n.taps)return this.hasRequireFailures()?(this._timer=setTimeout(function(){e.state=8,e.tryEmit()},n.interval),2):8}return 32},e.failTimeout=function(){var t=this;return this._timer=setTimeout(function(){t.state=32},this.options.interval),32},e.reset=function(){clearTimeout(this._timer)},e.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},t}(Xd),$d=function(e){function t(t){return void 0===t&&(t={}),e.call(this,mu({pointers:1},t))||this}gu(t,e);var n=t.prototype;return n.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},n.process=function(t){var e=this.state,n=t.eventType,i=6&e,r=this.attrTest(t);return i&&(n&Yu||!r)?16|e:i||r?n&zu?8|e:2&e?4|e:2:32},t}(Xd);function Qd(t){void 0===t&&(t={}),this.options=mu({enable:!0},t),this.id=Wd++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}function Kd(t){return t===Gu?"down":t===Vu?"up":t===Uu?"left":t===Wu?"right":""}var th=function(n){function t(t){var e;return void 0===t&&(t={}),(e=n.call(this,mu({event:"pan",threshold:10,pointers:1,direction:Zu},t))||this).pX=null,e.pY=null,e}gu(t,n);var e=t.prototype;return e.getTouchAction=function(){var t=this.options.direction,e=[];return t&Ju&&e.push(Iu),t&Xu&&e.push(Au),e},e.directionTest=function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,a=t.deltaY;return r&e.direction||(i=e.direction&Ju?(r=0===o?qu:o<0?Uu:Wu,n=o!==this.pX,Math.abs(t.deltaX)):(r=0===a?qu:a<0?Vu:Gu,n=a!==this.pY,Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},e.attrTest=function(t){return $d.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},e.emit=function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Kd(t.direction);e&&(t.additionalEvent=this.options.event+e),n.prototype.emit.call(this,t)},t}($d),eh=function(i){function t(t){return void 0===t&&(t={}),i.call(this,mu({event:"swipe",threshold:10,velocity:.3,direction:Ju|Xu,pointers:1},t))||this}gu(t,i);var e=t.prototype;return e.getTouchAction=function(){return th.prototype.getTouchAction.call(this)},e.attrTest=function(t){var e,n=this.options.direction;return n&(Ju|Xu)?e=t.overallVelocity:n&Ju?e=t.overallVelocityX:n&Xu&&(e=t.overallVelocityY),i.prototype.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers===this.options.pointers&&Eu(e)>this.options.velocity&&t.eventType&zu},e.emit=function(t){var e=Kd(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},t}($d),nh=function(n){function t(t){return void 0===t&&(t={}),n.call(this,mu({event:"pinch",threshold:0,pointers:2},t))||this}gu(t,n);var e=t.prototype;return e.getTouchAction=function(){return[Lu]},e.attrTest=function(t){return n.prototype.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},e.emit=function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}n.prototype.emit.call(this,t)},t}($d),ih=function(e){function t(t){return void 0===t&&(t={}),e.call(this,mu({event:"rotate",threshold:0,pointers:2},t))||this}gu(t,e);var n=t.prototype;return n.getTouchAction=function(){return[Lu]},n.attrTest=function(t){return e.prototype.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)},t}($d),rh=function(n){function t(t){var e;return void 0===t&&(t={}),(e=n.call(this,mu({event:"press",pointers:1,time:251,threshold:9},t))||this)._timer=null,e._input=null,e}gu(t,n);var e=t.prototype;return e.getTouchAction=function(){return["auto"]},e.process=function(t){var e=this,n=this.options,i=t.pointers.length===n.pointers,r=t.distance<n.threshold,o=t.deltaTime>n.time;if(this._input=t,!r||!i||t.eventType&(zu|Yu)&&!o)this.reset();else if(t.eventType&Hu)this.reset(),this._timer=setTimeout(function(){e.state=8,e.tryEmit()},n.time);else if(t.eventType&zu)return 8;return 32},e.reset=function(){clearTimeout(this._timer)},e.emit=function(t){8===this.state&&(t&&t.eventType&zu?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=Tu(),this.manager.emit(this.options.event,this._input)))},t}(Xd),oh={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ah=[[ih,{enable:!1}],[nh,{enable:!1},["rotate"]],[eh,{direction:Ju}],[th,{direction:Ju},["swipe"]],[Zd],[Zd,{event:"doubletap",taps:2},["tap"]],[rh]];function sh(n,i){var r,o=n.element;o.style&&(Ku(n.options.cssProps,function(t,e){r=Ou(o.style,e),i?(n.oldCssProps[r]=o.style[r],o.style[r]=t):o.style[r]=n.oldCssProps[r]||""}),i||(n.oldCssProps={}))}var lh,ch,uh=((ch=ph.prototype).set=function(t){return wu(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},ch.stop=function(t){this.session.stopped=t?2:1},ch.recognize=function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||r&&n!==r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&14&n.state&&(r=e.curRecognizer=n),o++}},ch.get=function(t){if(t instanceof Xd)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event===t)return e[n];return null},ch.add=function(t){if(Ud(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),(t.manager=this).touchAction.update(),t},ch.remove=function(t){if(Ud(t,"remove",this))return this;var e=this.get(t);if(t){var n=this.recognizers,i=wd(n,e);-1!==i&&(n.splice(i,1),this.touchAction.update())}return this},ch.on=function(t,e){if(void 0===t||void 0===e)return this;var n=this.handlers;return Ku(fd(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this},ch.off=function(t,e){if(void 0===t)return this;var n=this.handlers;return Ku(fd(t),function(t){e?n[t]&&n[t].splice(wd(n[t],e),1):delete n[t]}),this},ch.emit=function(t,e){var n,i,r;this.options.domEvents&&(n=t,i=e,(r=document.createEvent("Event")).initEvent(n,!0,!0),(r.gesture=i).target.dispatchEvent(r));var o=this.handlers[t]&&this.handlers[t].slice();if(o&&o.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var a=0;a<o.length;)o[a](e),a++}},ch.destroy=function(){this.element&&sh(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},ph),dh={touchstart:Hu,touchmove:2,touchend:zu,touchcancel:Yu},hh=(gu(fh,lh=yd),fh.prototype.handler=function(t){var e=dh[t.type];if(e===Hu&&(this.started=!0),this.started){var n=function(t,e){var n=Md(t.touches),i=Md(t.changedTouches);return e&(zu|Yu)&&(n=Dd(n.concat(i),"identifier",!0)),[n,i]}.call(this,t,e);e&(zu|Yu)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:Fu,srcEvent:t})}},fh);function fh(){var t,e=fh.prototype;return e.evTarget="touchstart",e.evWin="touchstart touchmove touchend touchcancel",(t=lh.apply(this,arguments)||this).started=!1,t}function ph(t,e){var n=this;this.options=wu({},oh,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(Nu?Td:Bu?Ad:ju?Yd:Nd))(this,hd),this.touchAction=new id(this,this.options.touchAction),sh(this,!0),Ku(this.options.recognizers,function(t){var e=n.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function vh(i,t,e){var r="DEPRECATED METHOD: "+t+"\n"+e+" AT \n";return function(){var t=new Error("get-stack-trace"),e=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",n=window.console&&(window.console.warn||window.console.log);return n&&n.call(window.console,r,e),i.apply(this,arguments)}}var mh=vh(function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&void 0===t[i[r]])&&(t[i[r]]=e[i[r]]),r++;return t},"extend","Use `assign`."),gh=vh(function(t,e){return mh(t,e,!0)},"merge","Use `assign`.");function yh(t,e,n){var i,r=e.prototype;(i=t.prototype=Object.create(r)).constructor=t,i._super=r,n&&wu(i,n)}function bh(t,e){return function(){return t.apply(e,arguments)}}var wh,_h=(Sh.VERSION="2.0.17-rc",Sh.DIRECTION_ALL=Zu,Sh.DIRECTION_DOWN=Gu,Sh.DIRECTION_LEFT=Uu,Sh.DIRECTION_RIGHT=Wu,Sh.DIRECTION_UP=Vu,Sh.DIRECTION_HORIZONTAL=Ju,Sh.DIRECTION_VERTICAL=Xu,Sh.DIRECTION_NONE=qu,Sh.DIRECTION_DOWN=Gu,Sh.INPUT_START=Hu,Sh.INPUT_MOVE=2,Sh.INPUT_END=zu,Sh.INPUT_CANCEL=Yu,Sh.STATE_POSSIBLE=1,Sh.STATE_BEGAN=2,Sh.STATE_CHANGED=4,Sh.STATE_ENDED=8,Sh.STATE_RECOGNIZED=8,Sh.STATE_CANCELLED=16,Sh.STATE_FAILED=32,Sh.Manager=uh,Sh.Input=yd,Sh.TouchAction=id,Sh.TouchInput=Ad,Sh.MouseInput=Nd,Sh.PointerEventInput=Td,Sh.TouchMouseInput=Yd,Sh.SingleTouchInput=hh,Sh.Recognizer=Xd,Sh.AttrRecognizer=$d,Sh.Tap=Zd,Sh.Pan=th,Sh.Swipe=eh,Sh.Pinch=nh,Sh.Rotate=ih,Sh.Press=rh,Sh.on=pd,Sh.off=vd,Sh.each=Ku,Sh.merge=gh,Sh.extend=mh,Sh.bindFn=bh,Sh.assign=wu,Sh.inherit=yh,Sh.bindFn=bh,Sh.prefixed=Ou,Sh.toArray=Md,Sh.inArray=wd,Sh.uniqueArray=Dd,Sh.splitStr=fd,Sh.boolOrFn=td,Sh.hasParent=od,Sh.addEventListeners=pd,Sh.removeEventListeners=vd,Sh.defaults=wu({},oh,{preset:ah}),Sh),kh=n(function(t){if("undefined"!=typeof window){var e=window.Hammer||_h;t.exports=e}else t.exports=function(){return{on:e=function(){},off:e,destroy:e,emit:e,get:function(t){return{set:e}}};var e}}),xh=Object.freeze({__proto__:null,default:kh,__moduleExports:kh});function Sh(t,e){return void 0===e&&(e={}),new uh(t,mu({recognizers:ah.concat()},e))}function Eh(e){var t,n,i=this;this.active=!1,this.dom={container:e},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=kh(this.dom.overlay),this.hammer.on("tap",Z(t=this._onTapOverlay).call(t,this));var r=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Hl(r).call(r,function(t){i.hammer.on(t,function(t){t.srcEvent.stopPropagation()})}),document&&document.body&&(this.onClick=function(t){!function(t,e){for(;t;){if(t===e)return 1;t=t.parentNode}return 0}(t.target,e)&&i.deactivate()},document.body.addEventListener("click",this.onClick)),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=pu(),this.escListener=Z(n=this.deactivate).call(n,this)}(wh=fu)&&wh.default,it(Eh.prototype),Eh.current=null,Eh.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null},Eh.prototype.activate=function(){var t;Eh.current&&Eh.current.deactivate(),(Eh.current=this).active=!0,this.dom.overlay.style.display="none",Ya.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),Z(t=this.keycharm).call(t,"esc",this.escListener)},Eh.prototype.deactivate=function(){this.active=!1,this.dom.overlay.style.display="block",Ya.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},Eh.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function Th(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Oh=Eh,Mh=n(function(t,e){e.en={edit:"Edit",del:"Delete selected",back:"Back",addNode:"Add Node",addEdge:"Add Edge",editNode:"Edit Node",editEdge:"Edit Edge",addDescription:"Click in an empty space to place a new node.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",createEdgeError:"Cannot link edges to a cluster.",deleteClusterError:"Clusters cannot be deleted.",editClusterError:"Clusters cannot be edited."},e.en_EN=e.en,e.en_US=e.en,e.de={edit:"Editieren",del:"Lösche Auswahl",back:"Zurück",addNode:"Knoten hinzufügen",addEdge:"Kante hinzufügen",editNode:"Knoten editieren",editEdge:"Kante editieren",addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",deleteClusterError:"Cluster können nicht gelöscht werden.",editClusterError:"Cluster können nicht editiert werden."},e.de_DE=e.de,e.es={edit:"Editar",del:"Eliminar selección",back:"Atrás",addNode:"Añadir nodo",addEdge:"Añadir arista",editNode:"Editar nodo",editEdge:"Editar arista",addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",createEdgeError:"No se puede conectar una arista a un grupo.",deleteClusterError:"No es posible eliminar grupos.",editClusterError:"No es posible editar grupos."},e.es_ES=e.es,e.it={edit:"Modifica",del:"Cancella la selezione",back:"Indietro",addNode:"Aggiungi un nodo",addEdge:"Aggiungi un vertice",editNode:"Modifica il nodo",editEdge:"Modifica il vertice",addDescription:"Clicca per aggiungere un nuovo nodo",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",createEdgeError:"Non si possono collegare vertici ad un cluster",deleteClusterError:"I cluster non possono essere cancellati",editClusterError:"I clusters non possono essere modificati."},e.it_IT=e.it,e.nl={edit:"Wijzigen",del:"Selectie verwijderen",back:"Terug",addNode:"Node toevoegen",addEdge:"Link toevoegen",editNode:"Node wijzigen",editEdge:"Link wijzigen",addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",createEdgeError:"Kan geen link maken naar een cluster.",deleteClusterError:"Clusters kunnen niet worden verwijderd.",editClusterError:"Clusters kunnen niet worden aangepast."},e.nl_NL=e.nl,e.nl_BE=e.nl,e["pt-br"]={edit:"Editar",del:"Remover selecionado",back:"Voltar",addNode:"Adicionar nó",addEdge:"Adicionar aresta",editNode:"Editar nó",editEdge:"Editar aresta",addDescription:"Clique em um espaço em branco para adicionar um novo nó",edgeDescription:"Clique em um nó e arraste a aresta até outro nó para conectá-los",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nó para conectá-los",createEdgeError:"Não foi possível linkar arestas a um cluster.",deleteClusterError:"Clusters não puderam ser removidos.",editClusterError:"Clusters não puderam ser editados."},e["pt-BR"]=e["pt-br"],e.pt_BR=e["pt-br"],e.pt_br=e["pt-br"],e.ru={edit:"Редактировать",del:"Удалить выбранное",back:"Назад",addNode:"Добавить узел",addEdge:"Добавить ребро",editNode:"Редактировать узел",editEdge:"Редактировать ребро",addDescription:"Кликните в свободное место, чтобы добавить новый узел.",edgeDescription:"Кликните на узел и протяните ребро к другому узлу, чтобы соединить их.",editEdgeDescription:"Кликните на контрольные точки и перетащите их в узел, чтобы подключиться к нему.",createEdgeError:"Невозможно соединить ребра в кластер.",deleteClusterError:"Кластеры не могут быть удалены",editClusterError:"Кластеры недоступны для редактирования."},e.ru_RU=e.ru,e.cn={edit:"编辑",del:"删除选定",back:"返回",addNode:"添加节点",addEdge:"添加连接线",editNode:"编辑节点",editEdge:"编辑连接线",addDescription:"单击空白处放置新节点。",edgeDescription:"单击某个节点并将该连接线拖动到另一个节点以连接它们。",editEdgeDescription:"单击控制节点并将它们拖到节点上连接。",createEdgeError:"无法将连接线连接到群集。",deleteClusterError:"无法删除群集。",editClusterError:"无法编辑群集。"},e.zh_CN=e.cn,e.uk={edit:"Редагувати",del:"Видалити обране",back:"Назад",addNode:"Додати вузол",addEdge:"Додати край",editNode:"Редагувати вузол",editEdge:"Редагувати край",addDescription:"Kлікніть на вільне місце, щоб додати новий вузол.",edgeDescription:"Клікніть на вузол і перетягніть край до іншого вузла, щоб їх з'єднати.",editEdgeDescription:"Клікніть на контрольні точки і перетягніть їх у вузол, щоб підключитися до нього.",createEdgeError:"Не можливо об'єднати краї в групу.",deleteClusterError:"Групи не можуть бути видалені.",editClusterError:"Групи недоступні для редагування."},e.uk_UA=e.uk,e.fr={edit:"Éditer",del:"Effacer la sélection",back:"Retour",addNode:"Ajouter un nœud",addEdge:"Ajouter un lien",editNode:"Éditer le nœud",editEdge:"Éditer le lien",addDescription:"Cliquez dans un endroit vide pour placer un nœud.",edgeDescription:"Cliquez sur un nœud et glissez le lien vers un autre nœud pour les connecter.",editEdgeDescription:"Cliquez sur les points de contrôle et glissez-les pour connecter un nœud.",createEdgeError:"Impossible de créer un lien vers un cluster.",deleteClusterError:"Les clusters ne peuvent pas être effacés.",editClusterError:"Les clusters ne peuvent pas être édités."},e.fr_FR=e.fr,e.cs={edit:"Upravit",del:"Smazat výběr",back:"Zpět",addNode:"Přidat vrchol",addEdge:"Přidat hranu",editNode:"Upravit vrchol",editEdge:"Upravit hranu",addDescription:"Kluknutím do prázdného prostoru můžete přidat nový vrchol.",edgeDescription:"Přetažením z jednoho vrcholu do druhého můžete spojit tyto vrcholy novou hranou.",editEdgeDescription:"Přetažením kontrolního vrcholu hrany ji můžete připojit k jinému vrcholu.",createEdgeError:"Nelze připojit hranu ke shluku.",deleteClusterError:"Nelze mazat shluky.",editClusterError:"Nelze upravovat shluky."},e.cs_CZ=e.cs});k({target:"Object",stat:!0,forced:!f,sham:!f},{defineProperty:z.f});var Dh=n(function(t){var i=R.Object,e=t.exports=function(t,e,n){return i.defineProperty(t,e,n)};i.defineProperty.sham&&(e.sham=!0)}),Ch=Dh;function Lh(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Ch(t,i.key,i)}}function Ah(t,e,n){return e&&Lh(t.prototype,e),n&&Lh(t,n),t}function Ih(r){return function(t,e){var n=2<arguments.length,i=n?Bh.call(arguments,2):void 0;return r(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,e)}}var Ph=(Ah(zh,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,e=this.image.height;this.width=t,this.height=e;var n=Math.floor(e/2),i=Math.floor(e/4),r=Math.floor(e/8),o=Math.floor(e/16),a=Math.floor(t/2),s=Math.floor(t/4),l=Math.floor(t/8),c=Math.floor(t/16);this.canvas.width=3*s,this.canvas.height=n,this.coordinates=[[0,0,a,n],[a,0,s,i],[a,i,l,r],[5*l,i,c,o]],this._fillMipMap()}}},{key:"initialized",value:function(){return void 0!==this.coordinates}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),e=this.coordinates[0];t.drawImage(this.image,e[0],e[1],e[2],e[3]);for(var n=1;n<this.NUM_ITERATIONS;n++){var i=this.coordinates[n-1],r=this.coordinates[n];t.drawImage(this.canvas,i[0],i[1],i[2],i[3],r[0],r[1],r[2],r[3])}}},{key:"drawImageAtPosition",value:function(t,e,n,i,r,o){if(this.initialized())if(2<e){e*=.5;for(var a=0;2<e&&a<this.NUM_ITERATIONS;)e*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);var s=this.coordinates[a];t.drawImage(this.canvas,s[0],s[1],s[2],s[3],n,i,r,o)}else t.drawImage(this.image,n,i,r,o)}}]),zh),jh=(Ah(Hh,[{key:"_tryloadBrokenUrl",value:function(t,e,n){void 0!==t&&void 0!==n&&(void 0!==e?(n.image.onerror=function(){console.error("Could not load brokenImage:",e)},n.image.src=e):console.warn("No broken url image defined"))}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,e){var n=this,i=this.images[t];if(i)return i;var r=new Ph;return(this.images[t]=r).image.onload=function(){n._fixImageCoordinates(r.image),r.init(),n._redrawWithImage(r)},r.image.onerror=function(){console.error("Could not load image:",t),n._tryloadBrokenUrl(t,e,r)},r.image.src=t,r}},{key:"_fixImageCoordinates",value:function(t){0===t.width&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),Hh),Nh=(Ah(Rh,[{key:"setOptions",value:function(t){var e=["useDefaultGroups"];if(void 0!==t)for(var n in t)if(t.hasOwnProperty(n)&&-1===kc(e).call(e,n)){var i=t[n];this.add(n,i)}}},{key:"clear",value:function(){this.groups={},this.groupsArray=[]}},{key:"get",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=this.groups[t];if(void 0===n&&e)if(!1===this.options.useDefaultGroups&&0<this.groupsArray.length){var i=this.groupIndex%this.groupsArray.length;this.groupIndex++,(n={}).color=this.groups[this.groupsArray[i]],this.groups[t]=n}else{var r=this.defaultIndex%this.defaultGroups.length;this.defaultIndex++,(n={}).color=this.defaultGroups[r],this.groups[t]=n}return n}},{key:"add",value:function(t,e){return this.groups[t]=e,this.groupsArray.push(t),e}}]),Rh),Bh=[].slice,Fh=/MSIE .\./.test(Vl);function Rh(){Th(this,Rh),this.clear(),this.defaultIndex=0,this.groupsArray=[],this.groupIndex=0,this.defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},Jo(this.options,this.defaultOptions)}function Hh(t){Th(this,Hh),this.images={},this.imageBroken={},this.callback=t}function zh(){Th(this,zh),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}k({global:!0,bind:!0,forced:Fh},{setTimeout:Ih(b.setTimeout),setInterval:Ih(b.setInterval)});function Yh(s){return function(t,e){var n,i,r=String(l(t)),o=Ms(e),a=r.length;return o<0||a<=o?s?"":void 0:(n=r.charCodeAt(o))<55296||56319<n||o+1===a||(i=r.charCodeAt(o+1))<56320||57343<i?s?r.charAt(o):n:s?r.slice(o,o+2):i-56320+(n-55296<<10)+65536}}var qh=R.setTimeout,Uh=(Yh(!1),Yh(!0)),Wh=gs.set,Vh=gs.getterFor("String Iterator");rl(String,"String",function(t){Wh(this,{type:"String Iterator",string:String(t),index:0})},function(){var t,e=Vh(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=Uh(n,i),e.index+=t.length,{value:t,done:!1})});function Gh(t){if(null!=t)return t[Xh]||t["@@iterator"]||Ua[ll(t)]}function Jh(t){var e=Gh(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return v(e.call(t))}var Xh=fs("iterator"),Zh=Ll.some,$h=El("some"),Qh=Ol("some");k({target:"Array",proto:!0,forced:!$h||!Qh},{some:function(t){return Zh(this,t,1<arguments.length?arguments[1]:void 0)}});var Kh=G("Array").some,tf=Array.prototype,ef=d(function(){Gs(1)});k({target:"Object",stat:!0,forced:ef},{keys:function(t){return Gs(hs(t))}});var nf=R.Object.keys,rf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function of(t,e){return t(e={exports:{}},e.exports),e.exports}function af(t){return t&&t.Math==Math&&t}function sf(t){try{return!!t()}catch(t){return!0}}function lf(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function cf(t){return Of.call(t).slice(8,-1)}function uf(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function df(t){return Df(uf(t))}function hf(t){return"object"==typeof t?null!==t:"function"==typeof t}function ff(t,e){if(!hf(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!hf(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!hf(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!hf(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}function pf(t,e){return Cf.call(t,e)}function vf(t){return Af?Lf.createElement(t):{}}function mf(t,e){var n=Ff[Bf(t)];return n==Hf||n!=Rf&&("function"==typeof e?sf(e):!!e)}function gf(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function yf(i,r,t){if(gf(i),void 0===r)return i;switch(t){case 0:return function(){return i.call(r)};case 1:return function(t){return i.call(r,t)};case 2:return function(t,e){return i.call(r,t,e)};case 3:return function(t,e,n){return i.call(r,t,e,n)}}return function(){return i.apply(r,arguments)}}function bf(t){if(!hf(t))throw TypeError(String(t)+" is not an object");return t}function wf(i){function t(t,e,n){if(this instanceof i){switch(arguments.length){case 0:return new i;case 1:return new i(t);case 2:return new i(t,e)}return new i(t,e,n)}return i.apply(this,arguments)}return t.prototype=i.prototype,t}function _f(t,e){var n,i,r,o,a,s,l,c,u=t.target,d=t.global,h=t.stat,f=t.proto,p=d?kf:h?kf[u]:(kf[u]||{}).prototype,v=d?Yf:Yf[u]||(Yf[u]={}),m=v.prototype;for(r in e)n=!zf(d?r:u+(h?".":"#")+r,t.forced)&&p&&pf(p,r),a=v[r],n&&(s=t.noTargetGet?(c=Vf(p,r))&&c.value:p[r]),o=n&&s?s:e[r],n&&typeof a==typeof o||(l=t.bind&&n?yf(o,kf):t.wrap&&n?wf(o):f&&"function"==typeof o?yf(Function.call,o):o,(t.sham||o&&o.sham||a&&a.sham)&&Wf(l,"sham",!0),v[r]=l,f&&(pf(Yf,i=u+"Prototype")||Wf(Yf,i,{}),Yf[i][r]=o,t.real&&m&&!m[r]&&Wf(m,r,o)))}var kf=af("object"==typeof globalThis&&globalThis)||af("object"==typeof window&&window)||af("object"==typeof self&&self)||af("object"==typeof rf&&rf)||Function("return this")(),xf=!sf(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),Sf={}.propertyIsEnumerable,Ef=Object.getOwnPropertyDescriptor,Tf={f:Ef&&!Sf.call({1:2},1)?function(t){var e=Ef(this,t);return!!e&&e.enumerable}:Sf},Of={}.toString,Mf="".split,Df=sf(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==cf(t)?Mf.call(t,""):Object(t)}:Object,Cf={}.hasOwnProperty,Lf=kf.document,Af=hf(Lf)&&hf(Lf.createElement),If=!xf&&!sf(function(){return 7!=Object.defineProperty(vf("div"),"a",{get:function(){return 7}}).a}),Pf=Object.getOwnPropertyDescriptor,jf={f:xf?Pf:function(t,e){if(t=df(t),e=ff(e,!0),If)try{return Pf(t,e)}catch(t){}if(pf(t,e))return lf(!Tf.f.call(t,e),t[e])}},Nf=/#|\.prototype\./,Bf=mf.normalize=function(t){return String(t).replace(Nf,".").toLowerCase()},Ff=mf.data={},Rf=mf.NATIVE="N",Hf=mf.POLYFILL="P",zf=mf,Yf={},qf=Object.defineProperty,Uf={f:xf?qf:function(t,e,n){if(bf(t),e=ff(e,!0),bf(n),If)try{return qf(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Wf=xf?function(t,e,n){return Uf.f(t,e,lf(1,n))}:function(t,e,n){return t[e]=n,t},Vf=jf.f;_f({target:"Object",stat:!0,forced:!xf,sham:!xf},{defineProperty:Uf.f});function Gf(t){return isNaN(t=+t)?0:(0<t?ep:tp)(t)}function Jf(t){return 0<t?np(Gf(t),9007199254740991):0}function Xf(t,e){var n=Gf(t);return n<0?ip(n+e,0):rp(n,e)}function Zf(s){return function(t,e,n){var i,r=df(t),o=Jf(r.length),a=Xf(n,o);if(s&&e!=e){for(;a<o;)if((i=r[a++])!=i)return!0}else for(;a<o;a++)if((s||a in r)&&r[a]===e)return s||a||0;return!s&&-1}}function $f(t,e){var n,i=df(t),r=0,o=[];for(n in i)!pf(ap,n)&&pf(i,n)&&o.push(n);for(;e.length>r;)pf(i,n=e[r++])&&(~sp(o,n)||o.push(n));return o}var Qf=of(function(t){var i=Yf.Object,e=t.exports=function(t,e,n){return i.defineProperty(t,e,n)};i.defineProperty.sham&&(e.sham=!0)}),Kf=Qf,tp=Math.ceil,ep=Math.floor,np=Math.min,ip=Math.max,rp=Math.min,op={includes:Zf(!0),indexOf:Zf(!1)},ap={},sp=op.indexOf,lp=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],cp=Object.keys||function(t){return $f(t,lp)},up=xf?Object.defineProperties:function(t,e){bf(t);for(var n,i=cp(e),r=i.length,o=0;o<r;)Uf.f(t,n=i[o++],e[n]);return t};_f({target:"Object",stat:!0,forced:!xf,sham:!xf},{defineProperties:up});function dp(t){return"function"==typeof t?t:void 0}function hp(t,e){return arguments.length<2?dp(Yf[t])||dp(kf[t]):Yf[t]&&Yf[t][e]||kf[t]&&kf[t][e]}function fp(t,e,n){var i=ff(e);i in t?Uf.f(t,i,lf(0,n)):t[i]=n}var pp=of(function(t){var n=Yf.Object,e=t.exports=function(t,e){return n.defineProperties(t,e)};n.defineProperties.sham&&(e.sham=!0)}),vp=lp.concat("length","prototype"),mp={f:Object.getOwnPropertyNames||function(t){return $f(t,vp)}},gp={f:Object.getOwnPropertySymbols},yp=hp("Reflect","ownKeys")||function(t){var e=mp.f(bf(t)),n=gp.f;return n?e.concat(n(t)):e};_f({target:"Object",stat:!0,sham:!xf},{getOwnPropertyDescriptors:function(t){for(var e,n,i=df(t),r=jf.f,o=yp(i),a={},s=0;o.length>s;)void 0!==(n=r(i,e=o[s++]))&&fp(a,e,n);return a}});var bp=Yf.Object.getOwnPropertyDescriptors,wp={},_p=kf["__core-js_shared__"]||function(e,n){try{Wf(kf,e,n)}catch(t){kf[e]=n}return n}("__core-js_shared__",{}),kp=Function.toString;"function"!=typeof _p.inspectSource&&(_p.inspectSource=function(t){return kp.call(t)});function xp(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Ap+Ip).toString(36)}function Sp(t){return Pp[t]||(Pp[t]=xp(t))}var Ep,Tp,Op,Mp=_p.inspectSource,Dp=kf.WeakMap,Cp="function"==typeof Dp&&/native code/.test(Mp(Dp)),Lp=of(function(t){(t.exports=function(t,e){return _p[t]||(_p[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.3",mode:"pure",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})}),Ap=0,Ip=Math.random(),Pp=Lp("keys"),jp=kf.WeakMap;if(Cp){var Np=new jp,Bp=Np.get,Fp=Np.has,Rp=Np.set;Ep=function(t,e){return Rp.call(Np,t,e),e},Tp=function(t){return Bp.call(Np,t)||{}},Op=function(t){return Fp.call(Np,t)}}else{var Hp=Sp("state");ap[Hp]=!0,Ep=function(t,e){return Wf(t,Hp,e),e},Tp=function(t){return pf(t,Hp)?t[Hp]:{}},Op=function(t){return pf(t,Hp)}}function zp(t){return Object(uf(t))}function Yp(t){return pf(Kp,t)||($p&&pf(tv,t)?Kp[t]=tv[t]:Kp[t]=ev("Symbol."+t)),Kp[t]}var qp,Up,Wp,Vp={set:Ep,get:Tp,has:Op,enforce:function(t){return Op(t)?Tp(t):Ep(t,{})},getterFor:function(n){return function(t){var e;if(!hf(t)||(e=Tp(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},Gp=!sf(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Jp=Sp("IE_PROTO"),Xp=Object.prototype,Zp=Gp?Object.getPrototypeOf:function(t){return t=zp(t),pf(t,Jp)?t[Jp]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Xp:null},$p=!!Object.getOwnPropertySymbols&&!sf(function(){return!String(Symbol())}),Qp=$p&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Kp=Lp("wks"),tv=kf.Symbol,ev=Qp?tv:tv&&tv.withoutSetter||xp,nv=(Yp("iterator"),!1);[].keys&&("next"in(Wp=[].keys())?(Up=Zp(Zp(Wp)))!==Object.prototype&&(qp=Up):nv=!0),null==qp&&(qp={});function iv(){}function rv(t){return"<script>"+t+"<\/script>"}var ov,av={IteratorPrototype:qp,BUGGY_SAFARI_ITERATORS:nv},sv=hp("document","documentElement"),lv=Sp("IE_PROTO"),cv=function(){try{ov=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;cv=ov?function(t){t.write(rv("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ov):((e=vf("iframe")).style.display="none",sv.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(rv("document.F=Object")),t.close(),t.F);for(var n=lp.length;n--;)delete cv.prototype[lp[n]];return cv()};ap[lv]=!0;var uv=Object.create||function(t,e){var n;return null!==t?(iv.prototype=bf(t),n=new iv,iv.prototype=null,n[lv]=t):n=cv(),void 0===e?n:up(n,e)},dv={};dv[Yp("toStringTag")]="z";function hv(t,e,n,i){if(t){var r=n?t:t.prototype;pf(r,xv)||kv(r,xv,{configurable:!0,value:e}),i&&!gv&&Wf(r,"toString",_v)}}function fv(){return this}function pv(t,e,n,i){i&&i.enumerable?t[e]=n:Wf(t,e,n)}function vv(){return this}function mv(t,e,n,i,r,o,a){var s,l,c;function u(t){if(t===r&&y)return y;if(!Ov&&t in m)return m[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}}l=i,c=e+" Iterator",(s=n).prototype=uv(Sv,{next:lf(1,l)}),hv(s,c,!1,!0),wp[c]=fv;var d,h,f,p=e+" Iterator",v=!1,m=t.prototype,g=m[Mv]||m["@@iterator"]||r&&m[r],y=!Ov&&g||u(r),b="Array"==e&&m.entries||g;if(b&&(d=Zp(b.call(new t)),Tv!==Object.prototype&&d.next&&(hv(d,p,!0,!0),wp[p]=vv)),"values"==r&&g&&"values"!==g.name&&(v=!0,y=function(){return g.call(this)}),a&&m[Mv]!==y&&Wf(m,Mv,y),wp[e]=y,r)if(h={values:u("values"),keys:o?y:u("keys"),entries:u("entries")},a)for(f in h)!Ov&&!v&&f in m||pv(m,f,h[f]);else _f({target:e,proto:!0,forced:Ov||v},h);return h}var gv="[object z]"===String(dv),yv=Yp("toStringTag"),bv="Arguments"==cf(function(){return arguments}()),wv=gv?cf:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),yv))?n:bv?cf(e):"Object"==(i=cf(e))&&"function"==typeof e.callee?"Arguments":i},_v=gv?{}.toString:function(){return"[object "+wv(this)+"]"},kv=Uf.f,xv=Yp("toStringTag"),Sv=av.IteratorPrototype,Ev=Object.setPrototypeOf||("__proto__"in{}?function(){var n,i=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),i=t instanceof Array}catch(n){}return function(t,e){return bf(t),function(t){if(!hf(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),i?n.call(t,e):t.__proto__=e,t}}():void 0),Tv=av.IteratorPrototype,Ov=av.BUGGY_SAFARI_ITERATORS,Mv=Yp("iterator"),Dv=Vp.set,Cv=Vp.getterFor("Array Iterator");mv(Array,"Array",function(t,e){Dv(this,{type:"Array Iterator",target:df(t),index:0,kind:e})},function(){var t=Cv(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}},"values"),wp.Arguments=wp.Array;var Lv=Yp("toStringTag");for(var Av in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Iv=kf[Av],Pv=Iv&&Iv.prototype;Pv&&wv(Pv)!==Lv&&Wf(Pv,Lv,Av),wp[Av]=wp.Array}function jv(t,e){var n;return Hv(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Hv(n.prototype)?hf(n)&&null===(n=n[zv])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function Nv(f){var p=1==f,v=2==f,m=3==f,g=4==f,y=6==f,b=5==f||y;return function(t,e,n,i){for(var r,o,a=zp(t),s=Df(a),l=yf(e,n,3),c=Jf(s.length),u=0,d=i||jv,h=p?d(t,c):v?d(t,0):void 0;u<c;u++)if((b||u in s)&&(o=l(r=s[u],u,a),f))if(p)h[u]=o;else if(o)switch(f){case 3:return!0;case 5:return r;case 6:return u;case 2:Yv.call(h,r)}else if(g)return!1;return y?-1:m||g?g:h}}function Bv(t,e){var n=[][t];return!!n&&sf(function(){n.call(null,e||function(){throw 1},1)})}function Fv(t){throw t}function Rv(t,e){var n=[][t],i=!!pf(e=e||{},"ACCESSORS")&&e.ACCESSORS,r=pf(e,0)?e[0]:Fv,o=pf(e,1)?e[1]:void 0;return!!n&&!sf(function(){if(i&&!xf)return!0;function t(t){i?Uv(e,t,{enumerable:!0,get:Fv}):e[t]=1}var e={length:-1};t(1),t(2147483646),t(4294967294),n.call(e,r,o)})}var Hv=Array.isArray||function(t){return"Array"==cf(t)},zv=Yp("species"),Yv=[].push,qv={forEach:Nv(0),map:Nv(1),filter:Nv(2),some:Nv(3),every:Nv(4),find:Nv(5),findIndex:Nv(6)},Uv=Object.defineProperty,Wv=qv.forEach,Vv=Bv("forEach"),Gv=Rv("forEach"),Jv=Vv&&Gv?[].forEach:function(t){return Wv(this,t,1<arguments.length?arguments[1]:void 0)};_f({target:"Array",proto:!0,forced:[].forEach!=Jv},{forEach:Jv});function Xv(t){return Yf[t+"Prototype"]}function Zv(t){var e=t.forEach;return t===Qv||t instanceof Array&&e===Qv.forEach||Kv.hasOwnProperty(wv(t))?$v:e}var $v=Xv("Array").forEach,Qv=Array.prototype,Kv={DOMTokenList:!0,NodeList:!0},tm=jf.f,em=sf(function(){tm(1)});_f({target:"Object",stat:!0,forced:!xf||em,sham:!xf},{getOwnPropertyDescriptor:function(t,e){return tm(df(t),e)}});function nm(t){var e=Yf.Symbol||(Yf.Symbol={});pf(e,t)||fm(e,t,{value:hm.f(t)})}function im(t,e){var n=Tm[t]=uv(wm.prototype);return gm(n,{type:"Symbol",tag:t,description:e}),xf||(n.description=e),n}function rm(e,t){bf(e);var n=df(t),i=cp(n).concat(Bm(n));return pm(i,function(t){xf&&!Nm.call(n,t)||jm(e,t,n[t])}),e}function om(t,e){var n=df(t),i=ff(e,!0);if(n!==bm||!pf(Tm,i)||pf(Om,i)){var r=km(n,i);return!r||!pf(Tm,i)||pf(n,vm)&&n[vm][i]||(r.enumerable=!0),r}}function am(t){var e=Sm(df(t)),n=[];return pm(e,function(t){pf(Tm,t)||pf(ap,t)||n.push(t)}),n}var sm=of(function(t){var n=Yf.Object,e=t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)};n.getOwnPropertyDescriptor.sham&&(e.sham=!0)}),lm=mp.f,cm={}.toString,um="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],dm={f:function(t){return um&&"[object Window]"==cm.call(t)?function(t){try{return lm(t)}catch(t){return um.slice()}}(t):lm(df(t))}},hm={f:Yp},fm=Uf.f,pm=qv.forEach,vm=Sp("hidden"),mm=Yp("toPrimitive"),gm=Vp.set,ym=Vp.getterFor("Symbol"),bm=Object.prototype,wm=kf.Symbol,_m=hp("JSON","stringify"),km=jf.f,xm=Uf.f,Sm=dm.f,Em=Tf.f,Tm=Lp("symbols"),Om=Lp("op-symbols"),Mm=Lp("string-to-symbol-registry"),Dm=Lp("symbol-to-string-registry"),Cm=Lp("wks"),Lm=kf.QObject,Am=!Lm||!Lm.prototype||!Lm.prototype.findChild,Im=xf&&sf(function(){return 7!=uv(xm({},"a",{get:function(){return xm(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=km(bm,e);i&&delete bm[e],xm(t,e,n),i&&t!==bm&&xm(bm,e,i)}:xm,Pm=Qp?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof wm},jm=function(t,e,n){t===bm&&jm(Om,e,n),bf(t);var i=ff(e,!0);return bf(n),pf(Tm,i)?(n.enumerable?(pf(t,vm)&&t[vm][i]&&(t[vm][i]=!1),n=uv(n,{enumerable:lf(0,!1)})):(pf(t,vm)||xm(t,vm,lf(1,{})),t[vm][i]=!0),Im(t,i,n)):xm(t,i,n)},Nm=function(t){var e=ff(t,!0),n=Em.call(this,e);return!(this===bm&&pf(Tm,e)&&!pf(Om,e))&&(!(n||!pf(this,e)||!pf(Tm,e)||pf(this,vm)&&this[vm][e])||n)},Bm=function(t){var e=t===bm,n=Sm(e?Om:df(t)),i=[];return pm(n,function(t){!pf(Tm,t)||e&&!pf(bm,t)||i.push(Tm[t])}),i};if($p||(pv((wm=function(){if(this instanceof wm)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=xp(t),n=function(t){this===bm&&n.call(Om,t),pf(this,vm)&&pf(this[vm],e)&&(this[vm][e]=!1),Im(this,e,lf(1,t))};return xf&&Am&&Im(bm,e,{configurable:!0,set:n}),im(e,t)}).prototype,"toString",function(){return ym(this).tag}),pv(wm,"withoutSetter",function(t){return im(xp(t),t)}),Tf.f=Nm,Uf.f=jm,jf.f=om,mp.f=dm.f=am,gp.f=Bm,hm.f=function(t){return im(Yp(t),t)},xf&&xm(wm.prototype,"description",{configurable:!0,get:function(){return ym(this).description}})),_f({global:!0,wrap:!0,forced:!$p,sham:!$p},{Symbol:wm}),pm(cp(Cm),function(t){nm(t)}),_f({target:"Symbol",stat:!0,forced:!$p},{for:function(t){var e=String(t);if(pf(Mm,e))return Mm[e];var n=wm(e);return Mm[e]=n,Dm[n]=e,n},keyFor:function(t){if(!Pm(t))throw TypeError(t+" is not a symbol");if(pf(Dm,t))return Dm[t]},useSetter:function(){Am=!0},useSimple:function(){Am=!1}}),_f({target:"Object",stat:!0,forced:!$p,sham:!xf},{create:function(t,e){return void 0===e?uv(t):rm(uv(t),e)},defineProperty:jm,defineProperties:rm,getOwnPropertyDescriptor:om}),_f({target:"Object",stat:!0,forced:!$p},{getOwnPropertyNames:am,getOwnPropertySymbols:Bm}),_f({target:"Object",stat:!0,forced:sf(function(){gp.f(1)})},{getOwnPropertySymbols:function(t){return gp.f(zp(t))}}),_m){var Fm=!$p||sf(function(){var t=wm();return"[null]"!=_m([t])||"{}"!=_m({a:t})||"{}"!=_m(Object(t))});_f({target:"JSON",stat:!0,forced:Fm},{stringify:function(t,e,n){for(var i,r=[t],o=1;o<arguments.length;)r.push(arguments[o++]);if((hf(i=e)||void 0!==t)&&!Pm(t))return Hv(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!Pm(e))return e}),r[1]=e,_m.apply(null,r)}})}wm.prototype[mm]||Wf(wm.prototype,mm,wm.prototype.valueOf),hv(wm,"Symbol"),ap[vm]=!0;var Rm=Yf.Object.getOwnPropertySymbols,Hm=Xv("Array").entries,zm=Array.prototype,Ym={DOMTokenList:!0,NodeList:!0},qm=[].slice,Um={},Wm=Function.bind||function(e){var n=gf(this),i=qm.call(arguments,1),r=function(){var t=i.concat(qm.call(arguments));return this instanceof r?function(t,e,n){if(!(e in Um)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";Um[e]=Function("C,a","return new C("+i.join(",")+")")}return Um[e](t,n)}(n,t.length,t):n.apply(e,t)};return hf(n.prototype)&&(r.prototype=n.prototype),r};_f({target:"Function",proto:!0},{bind:Wm});function Vm(t){var e=t.bind;return t===Jm||t instanceof Function&&e===Jm.bind?Gm:e}var Gm=Xv("Function").bind,Jm=Function.prototype,Xm=of(function(t){var e=function(o){var l,t=Object.prototype,c=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",i=e.toStringTag||"@@toStringTag";function a(t,e,n,i){var o,a,s,l,r=e&&e.prototype instanceof g?e:g,c=Object.create(r.prototype),u=new O(i||[]);return c._invoke=(o=t,a=n,s=u,l=h,function(t,e){if(l===p)throw new Error("Generator is already running");if(l===v){if("throw"===t)throw e;return D()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var i=S(n,s);if(i){if(i===m)continue;return i}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(l===h)throw l=v,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);l=p;var r=d(o,a,s);if("normal"===r.type){if(l=s.done?v:f,r.arg===m)continue;return{value:r.arg,done:s.done}}"throw"===r.type&&(l=v,s.method="throw",s.arg=r.arg)}}),c}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}o.wrap=a;var h="suspendedStart",f="suspendedYield",p="executing",v="completed",m={};function g(){}function s(){}function u(){}var y={};y[r]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(M([])));w&&w!==t&&c.call(w,r)&&(y=w);var _=u.prototype=g.prototype=Object.create(y);function k(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function x(l){var e;this._invoke=function(n,i){function t(){return new Promise(function(t,e){!function e(t,n,i,r){var o=d(l[t],l,n);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"==typeof s&&c.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,i,r)},function(t){e("throw",t,i,r)}):Promise.resolve(s).then(function(t){a.value=t,i(a)},function(t){return e("throw",t,i,r)})}r(o.arg)}(n,i,t,e)})}return e=e?e.then(t,t):t()}}function S(t,e){var n=t.iterator[e.method];if(n===l){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=l,S(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=d(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var r=i.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=l),e.delegate=null,m):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function M(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=l,t.done=!0,t};return i.next=i}}return{next:D}}function D(){return{value:l,done:!0}}return s.prototype=_.constructor=u,u.constructor=s,u[i]=s.displayName="GeneratorFunction",o.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===s||"GeneratorFunction"===(e.displayName||e.name))},o.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,i in t||(t[i]="GeneratorFunction")),t.prototype=Object.create(_),t},o.awrap=function(t){return{__await:t}},k(x.prototype),x.prototype[n]=function(){return this},o.AsyncIterator=x,o.async=function(t,e,n,i){var r=new x(a(t,e,n,i));return o.isGeneratorFunction(e)?r:r.next().then(function(t){return t.done?t.value:r.next()})},k(_),_[i]="Generator",_[r]=function(){return this},_.toString=function(){return"[object Generator]"},o.keys=function(n){var i=[];for(var t in n)i.push(t);return i.reverse(),function t(){for(;i.length;){var e=i.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},o.values=M,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var i=this;function t(t,e){return o.type="throw",o.arg=n,i.next=t,e&&(i.method="next",i.arg=l),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var r=this.tryEntries[e],o=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var a=c.call(r,"catchLoc"),s=c.call(r,"finallyLoc");if(a&&s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&c.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:M(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=l),m}},o}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}});nm("iterator");function Zm(s){return function(t,e){var n,i,r=String(uf(t)),o=Gf(e),a=r.length;return o<0||a<=o?s?"":void 0:(n=r.charCodeAt(o))<55296||56319<n||o+1===a||(i=r.charCodeAt(o+1))<56320||57343<i?s?r.charAt(o):n:s?r.slice(o,o+2):i-56320+(n-55296<<10)+65536}}var $m=(Zm(!1),Zm(!0)),Qm=Vp.set,Km=Vp.getterFor("String Iterator");mv(String,"String",function(t){Qm(this,{type:"String Iterator",string:String(t),index:0})},function(){var t,e=Km(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=$m(n,i),e.index+=t.length,{value:t,done:!1})});function tg(t,e,n){var i=n.charAt(e-1),r=n.charAt(e+1);return og.test(t)&&!ag.test(r)||ag.test(t)&&!og.test(i)?"\\u"+t.charCodeAt(0).toString(16):t}var eg=hm.f("iterator"),ng=eg,ig=hp("JSON","stringify"),rg=/[\uD800-\uDFFF]/g,og=/^[\uD800-\uDBFF]$/,ag=/^[\uDC00-\uDFFF]$/,sg=sf(function(){return'"\\udf06\\ud834"'!==ig("\udf06\ud834")||'"\\udead"'!==ig("\udead")});ig&&_f({target:"JSON",stat:!0,forced:sg},{stringify:function(t,e,n){var i=ig.apply(null,arguments);return"string"==typeof i?i.replace(rg,tg):i}}),Yf.JSON||(Yf.JSON={stringify:JSON.stringify});function lg(t,e,n){return e in t?hg(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cg(t){var e=t.values;return t===pg||t instanceof Array&&e===pg.values||vg.hasOwnProperty(wv(t))?fg:e}function ug(t){if(null!=t)return t[mg]||t["@@iterator"]||wp[wv(t)]}function dg(t){var e=ug(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return bf(e.call(t))}var hg=Qf,fg=Xv("Array").values,pg=Array.prototype,vg={DOMTokenList:!0,NodeList:!0},mg=Yp("iterator"),gg=[],yg=gg.sort,bg=sf(function(){gg.sort(void 0)}),wg=sf(function(){gg.sort(null)}),_g=Bv("sort");_f({target:"Array",proto:!0,forced:bg||!wg||!_g},{sort:function(t){return void 0===t?yg.call(zp(this)):yg.call(zp(this),gf(t))}});function kg(t){var e=t.sort;return t===Eg||t instanceof Array&&e===Eg.sort?Sg:e}function xg(c){return function(t,e,n,i){gf(e);var r=zp(t),o=Df(r),a=Jf(r.length),s=c?a-1:0,l=c?-1:1;if(n<2)for(;;){if(s in o){i=o[s],s+=l;break}if(s+=l,c?s<0:a<=s)throw TypeError("Reduce of empty array with no initial value")}for(;c?0<=s:s<a;s+=l)s in o&&(i=e(i,o[s],s,r));return i}}var Sg=Xv("Array").sort,Eg=Array.prototype,Tg=[xg(!1),xg(!0)][0],Og=Bv("reduce"),Mg=Rv("reduce",{1:0});_f({target:"Array",proto:!0,forced:!Og||!Mg},{reduce:function(t){return Tg(this,t,arguments.length,1<arguments.length?arguments[1]:void 0)}});function Dg(t){var e=t.keys;return t===Ig||t instanceof Array&&e===Ig.keys||Pg.hasOwnProperty(wv(t))?Ag:e}var Cg=Xv("Array").reduce,Lg=Array.prototype,Ag=Xv("Array").keys,Ig=Array.prototype,Pg={DOMTokenList:!0,NodeList:!0};_f({target:"Array",stat:!0},{isArray:Hv});function jg(t,e,n,i){try{return i?e(bf(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&bf(r.call(t)),e}}function Ng(t){return void 0!==t&&(wp.Array===t||Hg[Rg]===t)}var Bg=Yf.Array.isArray,Fg=Bg,Rg=Yp("iterator"),Hg=Array.prototype,zg=Yp("iterator"),Yg=!1;try{var qg=0,Ug={next:function(){return{done:!!qg++}},return:function(){Yg=!0}};Ug[zg]=function(){return this},Array.from(Ug,function(){throw 2})}catch(e){}var Wg=!function(){if(!Yg)return 0;var t=!1;try{var e={};e[zg]=function(){return{next:function(){return{done:t=!0}}}},function(t){Array.from(t)}(e)}catch(t){}return t}();_f({target:"Array",stat:!0,forced:Wg},{from:function(t){var e,n,i,r,o,a,s=zp(t),l="function"==typeof this?this:Array,c=arguments.length,u=1<c?arguments[1]:void 0,d=void 0!==u,h=ug(s),f=0;if(d&&(u=yf(u,2<c?arguments[2]:void 0,2)),null==h||l==Array&&Ng(h))for(n=new l(e=Jf(s.length));f<e;f++)a=d?u(s[f],f):s[f],fp(n,f,a);else for(o=(r=h.call(s)).next,n=new l;!(i=o.call(r)).done;f++)a=d?jg(r,u,[i.value,f],!0):i.value,fp(n,f,a);return n.length=f,n}});function Vg(t){var e=Object(t);return void 0!==e[$g]||"@@iterator"in e||wp.hasOwnProperty(wv(e))}function Gg(t){return function(t){if(Fg(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Vg(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return Zg(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Jg,Xg,Zg=Yf.Array.from,$g=Yp("iterator"),Qg=hp("navigator","userAgent")||"",Kg=kf.process,ty=Kg&&Kg.versions,ey=ty&&ty.v8;ey?Xg=(Jg=ey.split("."))[0]+Jg[1]:Qg&&(!(Jg=Qg.match(/Edge\/(\d+)/))||74<=Jg[1])&&(Jg=Qg.match(/Chrome\/(\d+)/))&&(Xg=Jg[1]);function ny(e){return 51<=iy||!sf(function(){var t=[];return(t.constructor={})[ry]=function(){return{foo:1}},1!==t[e](Boolean).foo})}var iy=Xg&&+Xg,ry=Yp("species"),oy=qv.filter,ay=ny("filter"),sy=Rv("filter");_f({target:"Array",proto:!0,forced:!ay||!sy},{filter:function(t){return oy(this,t,1<arguments.length?arguments[1]:void 0)}});function ly(t){if(!hf(t))return!1;var e=t[hy];return void 0!==e?!!e:Hv(t)}var cy=Xv("Array").filter,uy=Array.prototype,dy=function(t){var e=t.filter;return t===uy||t instanceof Array&&e===uy.filter?cy:e},hy=Yp("isConcatSpreadable"),fy=51<=iy||!sf(function(){var t=[];return t[hy]=!1,t.concat()[0]!==t}),py=ny("concat");_f({target:"Array",proto:!0,forced:!fy||!py},{concat:function(t){var e,n,i,r,o,a=zp(this),s=jv(a,0),l=0;for(e=-1,i=arguments.length;e<i;e++)if(ly(o=-1===e?a:arguments[e])){if(9007199254740991<l+(r=Jf(o.length)))throw TypeError("Maximum allowed index exceeded");for(n=0;n<r;n++,l++)n in o&&fp(s,l,o[n])}else{if(9007199254740991<=l)throw TypeError("Maximum allowed index exceeded");fp(s,l++,o)}return s.length=l,s}});function vy(t){var e=t.concat;return t===gy||t instanceof Array&&e===gy.concat?my:e}var my=Xv("Array").concat,gy=Array.prototype,yy=Object.assign,by=Object.defineProperty,wy=!yy||sf(function(){if(xf&&1!==yy({b:1},yy(by({},"a",{enumerable:!0,get:function(){by(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!=yy({},t)[n]||"abcdefghijklmnopqrst"!=cp(yy({},e)).join("")})?function(t,e){for(var n=zp(t),i=arguments.length,r=1,o=gp.f,a=Tf.f;r<i;)for(var s,l=Df(arguments[r++]),c=o?cp(l).concat(o(l)):cp(l),u=c.length,d=0;d<u;)s=c[d++],xf&&!a.call(l,s)||(n[s]=l[s]);return n}:yy;_f({target:"Object",stat:!0,forced:Object.assign!==wy},{assign:wy});var _y=Yf.Object.assign,ky=qv.some,xy=Bv("some"),Sy=Rv("some");_f({target:"Array",proto:!0,forced:!xy||!Sy},{some:function(t){return ky(this,t,1<arguments.length?arguments[1]:void 0)}});var Ey=Xv("Array").some,Ty=Array.prototype,Oy=qv.map,My=ny("map"),Dy=Rv("map");_f({target:"Array",proto:!0,forced:!My||!Dy},{map:function(t){return Oy(this,t,1<arguments.length?arguments[1]:void 0)}});function Cy(t){var e=t.map;return t===Ay||t instanceof Array&&e===Ay.map?Ly:e}var Ly=Xv("Array").map,Ay=Array.prototype,Iy=eg;nm("asyncIterator"),nm("hasInstance"),nm("isConcatSpreadable"),nm("match"),nm("matchAll"),nm("replace"),nm("search"),nm("species"),nm("split"),nm("toPrimitive"),nm("toStringTag"),nm("unscopables"),hv(Math,"Math",!0),hv(kf.JSON,"JSON",!0);var Py=Yf.Symbol;nm("asyncDispose"),nm("dispose"),nm("observable"),nm("patternMatch"),nm("replaceAll");var jy=Py,Ny=of(function(e){function n(t){return e.exports=n="function"==typeof jy&&"symbol"==typeof Iy?function(t){return typeof t}:function(t){return t&&"function"==typeof jy&&t.constructor===jy&&t!==jy.prototype?"symbol":typeof t},n(t)}e.exports=n}),By=sf(function(){cp(1)});_f({target:"Object",stat:!0,forced:By},{keys:function(t){return cp(zp(t))}});function Fy(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function Ry(n,t,e){var i,r=-1!==n.indexOf("Map"),a=-1!==n.indexOf("Weak"),o=r?"set":"add",s=kf[n],l=s&&s.prototype,c={};if(xf&&"function"==typeof s&&(a||l.forEach&&!sf(function(){(new s).entries().next()}))){i=t(function(t,e){Jy(Fy(t,i,n),{type:n,collection:new s}),null!=e&&Wy(e,t[o],t,r)});var u=Xy(n);Gy(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(r){var o="add"==r||"set"==r;r in l&&(!a||"clear"!=r)&&Wf(i.prototype,r,function(t,e){var n=u(this).collection;if(!o&&a&&!hf(t))return"get"==r&&void 0;var i=n[r](0===t?0:t,e);return o?this:i})}),a||Vy(i.prototype,"size",{configurable:!0,get:function(){return u(this).collection.size}})}else i=e.getConstructor(t,n,r,o),Uy.REQUIRED=!0;return hv(i,n,!1,!0),c[n]=i,_f({global:!0,forced:!0},c),a||e.setStrong(i,n,r),i}function Hy(t,e,n){for(var i in e)n&&n.unsafe&&t[i]?t[i]=e[i]:pv(t,i,e[i],n);return t}function zy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Yy=Yf.Object.keys,qy=!sf(function(){return Object.isExtensible(Object.preventExtensions({}))}),Uy=of(function(t){function n(t){e(t,i,{value:{objectID:"O"+ ++r,weakData:{}}})}var e=Uf.f,i=xp("meta"),r=0,o=Object.isExtensible||function(){return!0},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!hf(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!pf(t,i)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[i].objectID},getWeakData:function(t,e){if(!pf(t,i)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[i].weakData},onFreeze:function(t){return qy&&a.REQUIRED&&o(t)&&!pf(t,i)&&n(t),t}};ap[i]=!0}),Wy=(Uy.REQUIRED,Uy.fastKey,Uy.getWeakData,Uy.onFreeze,of(function(t){function f(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,i,r){var o,a,s,l,c,u,d,h=yf(e,n,i?2:1);if(r)o=t;else{if("function"!=typeof(a=ug(t)))throw TypeError("Target is not iterable");if(Ng(a)){for(s=0,l=Jf(t.length);s<l;s++)if((c=i?h(bf(d=t[s])[0],d[1]):h(t[s]))&&c instanceof f)return c;return new f(!1)}o=a.call(t)}for(u=o.next;!(d=u.call(o)).done;)if("object"==typeof(c=jg(o,h,d.value,i))&&c&&c instanceof f)return c;return new f(!1)}).stop=function(t){return new f(!0,t)}})),Vy=Uf.f,Gy=qv.forEach,Jy=Vp.set,Xy=Vp.getterFor,Zy=Yp("species"),$y=Uf.f,Qy=Uy.fastKey,Ky=Vp.set,tb=Vp.getterFor,eb={getConstructor:function(t,n,i,r){function o(t,e,n){var i,r,o=s(t),a=l(t,e);return a?a.value=n:(o.last=a={index:r=Qy(e,!0),key:e,value:n,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=a),i&&(i.next=a),xf?o.size++:t.size++,"F"!==r&&(o.index[r]=a)),t}var a=t(function(t,e){Fy(t,a,n),Ky(t,{type:n,index:uv(null),first:void 0,last:void 0,size:0}),xf||(t.size=0),null!=e&&Wy(e,t[r],t,i)}),s=tb(n),l=function(t,e){var n,i=s(t),r=Qy(e);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==e)return n};return Hy(a.prototype,{clear:function(){for(var t=s(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,xf?t.size=0:this.size=0},delete:function(t){var e=s(this),n=l(this,t);if(n){var i=n.next,r=n.previous;delete e.index[n.index],n.removed=!0,r&&(r.next=i),i&&(i.previous=r),e.first==n&&(e.first=i),e.last==n&&(e.last=r),xf?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=s(this),i=yf(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(i(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),Hy(a.prototype,i?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),xf&&$y(a.prototype,"size",{get:function(){return s(this).size}}),a},setStrong:function(t,e,n){var i,r,o=e+" Iterator",a=tb(e),s=tb(o);mv(t,e,function(t,e){Ky(this,{type:o,target:t,state:a(t),kind:e,last:void 0})},function(){for(var t=s(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),i=hp(e),r=Uf.f,xf&&i&&!i[Zy]&&r(i,Zy,{configurable:!0,get:function(){return this}})}},nb=(Ry("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},eb),Yf.Map),ib=Bg;function rb(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),hg(t,i.key,i)}}function ob(t,e,n){return e&&rb(t.prototype,e),n&&rb(t,n),t}function ab(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sb(t,e){return!e||"object"!==Ny(e)&&"function"!=typeof e?ab(t):e}var lb=sf(function(){Zp(1)});_f({target:"Object",stat:!0,forced:lb,sham:!Gp},{getPrototypeOf:function(t){return Zp(zp(t))}});var cb=Yf.Object.getPrototypeOf;_f({target:"Object",stat:!0},{setPrototypeOf:Ev});var ub=Yf.Object.setPrototypeOf,db=of(function(e){function n(t){return e.exports=n=ub?cb:function(t){return t.__proto__||cb(t)},n(t)}e.exports=n});_f({target:"Object",stat:!0,sham:!xf},{create:uv});for(var hb=Yf.Object,fb=function(t,e){return hb.create(t,e)},pb=fb,vb=of(function(n){function i(t,e){return n.exports=i=ub||function(t,e){return t.__proto__=e,t},i(t,e)}n.exports=i}),mb=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=pb(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vb(t,e)},gb=[],yb=0;yb<256;yb++)gb[yb]=(yb+256).toString(16).substr(1);for(var bb=function(){if("undefined"!=typeof crypto&&crypto.getRandomValues){var t=new Uint8Array(16);return function(){return crypto.getRandomValues(t),t}}var n=new Array(16);return function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}(),wb=[],_b=0;_b<256;_b++)wb[_b]=(_b+256).toString(16).substr(1);var kb=bb();kb[0],kb[1],kb[2],kb[3],kb[4],kb[5],kb[6],kb[7];var xb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function Sb(t,e){return t(e={exports:{}},e.exports),e.exports}function Eb(t){return t&&t.Math==Math&&t}function Tb(t){try{return!!t()}catch(t){return!0}}function Ob(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function Mb(t){return Wb.call(t).slice(8,-1)}function Db(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function Cb(t){return Gb(Db(t))}function Lb(t){return"object"==typeof t?null!==t:"function"==typeof t}function Ab(t,e){if(!Lb(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!Lb(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!Lb(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!Lb(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}function Ib(t,e){return Jb.call(t,e)}function Pb(t){return Zb?Xb.createElement(t):{}}function jb(t,e){var n=nw[ew(t)];return n==rw||n!=iw&&("function"==typeof e?Tb(e):!!e)}function Nb(i,r,t){if(function(){if("function"!=typeof i)throw TypeError(String(i)+" is not a function")}(),void 0===r)return i;switch(t){case 0:return function(){return i.call(r)};case 1:return function(t){return i.call(r,t)};case 2:return function(t,e){return i.call(r,t,e)};case 3:return function(t,e,n){return i.call(r,t,e,n)}}return function(){return i.apply(r,arguments)}}function Bb(t){if(!Lb(t))throw TypeError(String(t)+" is not an object");return t}function Fb(i){function t(t,e,n){if(this instanceof i){switch(arguments.length){case 0:return new i;case 1:return new i(t);case 2:return new i(t,e)}return new i(t,e,n)}return i.apply(this,arguments)}return t.prototype=i.prototype,t}function Rb(t,e){var n,i,r,o,a,s,l,c,u=t.target,d=t.global,h=t.stat,f=t.proto,p=d?Hb:h?Hb[u]:(Hb[u]||{}).prototype,v=d?aw:aw[u]||(aw[u]={}),m=v.prototype;for(r in e)n=!ow(d?r:u+(h?".":"#")+r,t.forced)&&p&&Ib(p,r),a=v[r],n&&(s=t.noTargetGet?(c=uw(p,r))&&c.value:p[r]),o=n&&s?s:e[r],n&&typeof a==typeof o||(l=t.bind&&n?Nb(o,Hb):t.wrap&&n?Fb(o):f&&"function"==typeof o?Nb(Function.call,o):o,(t.sham||o&&o.sham||a&&a.sham)&&cw(l,"sham",!0),v[r]=l,f&&(Ib(aw,i=u+"Prototype")||cw(aw,i,{}),aw[i][r]=o,t.real&&m&&!m[r]&&cw(m,r,o)))}var Hb=Eb("object"==typeof globalThis&&globalThis)||Eb("object"==typeof window&&window)||Eb("object"==typeof self&&self)||Eb("object"==typeof xb&&xb)||Function("return this")(),zb=!Tb(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Yb={}.propertyIsEnumerable,qb=Object.getOwnPropertyDescriptor,Ub={f:qb&&!Yb.call({1:2},1)?function(t){var e=qb(this,t);return!!e&&e.enumerable}:Yb},Wb={}.toString,Vb="".split,Gb=Tb(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==Mb(t)?Vb.call(t,""):Object(t)}:Object,Jb={}.hasOwnProperty,Xb=Hb.document,Zb=Lb(Xb)&&Lb(Xb.createElement),$b=!zb&&!Tb(function(){return 7!=Object.defineProperty(Pb("div"),"a",{get:function(){return 7}}).a}),Qb=Object.getOwnPropertyDescriptor,Kb={f:zb?Qb:function(t,e){if(t=Cb(t),e=Ab(e,!0),$b)try{return Qb(t,e)}catch(t){}if(Ib(t,e))return Ob(!Ub.f.call(t,e),t[e])}},tw=/#|\.prototype\./,ew=jb.normalize=function(t){return String(t).replace(tw,".").toLowerCase()},nw=jb.data={},iw=jb.NATIVE="N",rw=jb.POLYFILL="P",ow=jb,aw={},sw=Object.defineProperty,lw={f:zb?sw:function(t,e,n){if(Bb(t),e=Ab(e,!0),Bb(n),$b)try{return sw(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},cw=zb?function(t,e,n){return lw.f(t,e,Ob(1,n))}:function(t,e,n){return t[e]=n,t},uw=Kb.f;Rb({target:"Object",stat:!0,forced:!zb,sham:!zb},{defineProperty:lw.f}),Sb(function(t){var i=aw.Object,e=t.exports=function(t,e,n){return i.defineProperty(t,e,n)};i.defineProperty.sham&&(e.sham=!0)});function dw(t){return isNaN(t=+t)?0:(0<t?gw:mw)(t)}function hw(t){return 0<t?yw(dw(t),9007199254740991):0}function fw(t,e){var n=dw(t);return n<0?bw(n+e,0):ww(n,e)}function pw(s){return function(t,e,n){var i,r=Cb(t),o=hw(r.length),a=fw(n,o);if(s&&e!=e){for(;a<o;)if((i=r[a++])!=i)return!0}else for(;a<o;a++)if((s||a in r)&&r[a]===e)return s||a||0;return!s&&-1}}function vw(t,e){var n,i=Cb(t),r=0,o=[];for(n in i)!Ib(kw,n)&&Ib(i,n)&&o.push(n);for(;e.length>r;)Ib(i,n=e[r++])&&(~xw(o,n)||o.push(n));return o}var mw=Math.ceil,gw=Math.floor,yw=Math.min,bw=Math.max,ww=Math.min,_w={includes:pw(!0),indexOf:pw(!1)},kw={},xw=_w.indexOf,Sw=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ew=Object.keys||function(t){return vw(t,Sw)},Tw=zb?Object.defineProperties:function(t,e){Bb(t);for(var n,i=Ew(e),r=i.length,o=0;o<r;)lw.f(t,n=i[o++],e[n]);return t};Rb({target:"Object",stat:!0,forced:!zb,sham:!zb},{defineProperties:Tw}),Sb(function(t){var n=aw.Object,e=t.exports=function(t,e){return n.defineProperties(t,e)};n.defineProperties.sham&&(e.sham=!0)});function Ow(t){return"function"==typeof t?t:void 0}function Mw(t,e){return arguments.length<2?Ow(aw[t])||Ow(Hb[t]):aw[t]&&aw[t][e]||Hb[t]&&Hb[t][e]}function Dw(t,e,n){var i=Ab(e);i in t?lw.f(t,i,Ob(0,n)):t[i]=n}var Cw=Sw.concat("length","prototype"),Lw={f:Object.getOwnPropertyNames||function(t){return vw(t,Cw)}},Aw={f:Object.getOwnPropertySymbols},Iw=Mw("Reflect","ownKeys")||function(t){var e=Lw.f(Bb(t)),n=Aw.f;return n?e.concat(n(t)):e};Rb({target:"Object",stat:!0,sham:!zb},{getOwnPropertyDescriptors:function(t){for(var e,n,i=Cb(t),r=Kb.f,o=Iw(i),a={},s=0;o.length>s;)void 0!==(n=r(i,e=o[s++]))&&Dw(a,e,n);return a}}),aw.Object.getOwnPropertyDescriptors;var Pw=Kb.f,jw=Tb(function(){Pw(1)});Rb({target:"Object",stat:!0,forced:!zb||jw,sham:!zb},{getOwnPropertyDescriptor:function(t,e){return Pw(Cb(t),e)}}),Sb(function(t){var n=aw.Object,e=t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)};n.getOwnPropertyDescriptor.sham&&(e.sham=!0)});function Nw(t){return Object(Db(t))}function Bw(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Ww+Vw).toString(36)}function Fw(t){return Gw[t]||(Gw[t]=Bw(t))}function Rw(){}var Hw=!!Object.getOwnPropertySymbols&&!Tb(function(){return!String(Symbol())}),zw=Array.isArray||function(t){return"Array"==Mb(t)},Yw=Mw("document","documentElement"),qw=Hb["__core-js_shared__"]||function(e,n){try{cw(Hb,e,n)}catch(t){Hb[e]=n}return n}("__core-js_shared__",{}),Uw=Sb(function(t){(t.exports=function(t,e){return qw[t]||(qw[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.4.1",mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),Ww=0,Vw=Math.random(),Gw=Uw("keys"),Jw=Fw("IE_PROTO"),Xw=function(){var t,e=Pb("iframe"),n=Sw.length;for(e.style.display="none",Yw.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Xw=t.F;n--;)delete Xw.prototype[Sw[n]];return Xw()},Zw=Object.create||function(t,e){var n;return null!==t?(Rw.prototype=Bb(t),n=new Rw,Rw.prototype=null,n[Jw]=t):n=Xw(),void 0===e?n:Tw(n,e)};kw[Jw]=!0;function $w(t,e,n,i){i&&i.enumerable?t[e]=n:cw(t,e,n)}function Qw(t){return a_[t]||(a_[t]=Hw&&o_[t]||(Hw?o_:Bw)("Symbol."+t))}function Kw(t){var e=aw.Symbol||(aw.Symbol={});Ib(e,t)||l_(e,t,{value:s_.f(t)})}function t_(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),c_))?n:u_?Mb(e):"Object"==(i=Mb(e))&&"function"==typeof e.callee?"Arguments":i}var e_=Lw.f,n_={}.toString,i_="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],r_={f:function(t){return i_&&"[object Window]"==n_.call(t)?function(t){try{return e_(t)}catch(t){return i_.slice()}}(t):e_(Cb(t))}},o_=Hb.Symbol,a_=Uw("wks"),s_={f:Qw},l_=lw.f,c_=Qw("toStringTag"),u_="Arguments"==Mb(function(){return arguments}()),d_={};d_[Qw("toStringTag")]="z";function h_(t,e,n,i){if(t){var r=n?t:t.prototype;Ib(r,y_)||g_(r,y_,{configurable:!0,value:e}),i&&b_&&cw(r,"toString",m_)}}var f_,p_,v_,m_="[object z]"!==String(d_)?function(){return"[object "+t_(this)+"]"}:d_.toString,g_=lw.f,y_=Qw("toStringTag"),b_=m_!=={}.toString,w_=Uw("native-function-to-string",Function.toString),__=Hb.WeakMap,k_="function"==typeof __&&/native code/.test(w_.call(__)),x_=Hb.WeakMap;if(k_){var S_=new x_,E_=S_.get,T_=S_.has,O_=S_.set;f_=function(t,e){return O_.call(S_,t,e),e},p_=function(t){return E_.call(S_,t)||{}},v_=function(t){return T_.call(S_,t)}}else{var M_=Fw("state");kw[M_]=!0,f_=function(t,e){return cw(t,M_,e),e},p_=function(t){return Ib(t,M_)?t[M_]:{}},v_=function(t){return Ib(t,M_)}}function D_(t,e){var n;return zw(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!zw(n.prototype)?Lb(n)&&null===(n=n[N_])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function C_(f){var p=1==f,v=2==f,m=3==f,g=4==f,y=6==f,b=5==f||y;return function(t,e,n,i){for(var r,o,a=Nw(t),s=Gb(a),l=Nb(e,n,3),c=hw(s.length),u=0,d=i||D_,h=p?d(t,c):v?d(t,0):void 0;u<c;u++)if((b||u in s)&&(o=l(r=s[u],u,a),f))if(p)h[u]=o;else if(o)switch(f){case 3:return!0;case 5:return r;case 6:return u;case 2:B_.call(h,r)}else if(g)return!1;return y?-1:m||g?g:h}}function L_(t,e){var n=$_[t]=Zw(W_.prototype);return Y_(n,{type:"Symbol",tag:t,description:e}),zb||(n.description=e),n}function A_(e,t){Bb(e);var n=Cb(t),i=Ew(n).concat(lk(n));return R_(i,function(t){zb&&!sk.call(n,t)||ak(e,t,n[t])}),e}function I_(t,e){var n=Cb(t),i=Ab(e,!0);if(n!==U_||!Ib($_,i)||Ib(Q_,i)){var r=G_(n,i);return!r||!Ib($_,i)||Ib(n,H_)&&n[H_][i]||(r.enumerable=!0),r}}function P_(t){var e=X_(Cb(t)),n=[];return R_(e,function(t){Ib($_,t)||Ib(kw,t)||n.push(t)}),n}var j_={set:f_,get:p_,has:v_,enforce:function(t){return v_(t)?p_(t):f_(t,{})},getterFor:function(n){return function(t){var e;if(!Lb(t)||(e=p_(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},N_=Qw("species"),B_=[].push,F_={forEach:C_(0),map:C_(1),filter:C_(2),some:C_(3),every:C_(4),find:C_(5),findIndex:C_(6)},R_=F_.forEach,H_=Fw("hidden"),z_=Qw("toPrimitive"),Y_=j_.set,q_=j_.getterFor("Symbol"),U_=Object.prototype,W_=Hb.Symbol,V_=Mw("JSON","stringify"),G_=Kb.f,J_=lw.f,X_=r_.f,Z_=Ub.f,$_=Uw("symbols"),Q_=Uw("op-symbols"),K_=Uw("string-to-symbol-registry"),tk=Uw("symbol-to-string-registry"),ek=Uw("wks"),nk=Hb.QObject,ik=!nk||!nk.prototype||!nk.prototype.findChild,rk=zb&&Tb(function(){return 7!=Zw(J_({},"a",{get:function(){return J_(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=G_(U_,e);i&&delete U_[e],J_(t,e,n),i&&t!==U_&&J_(U_,e,i)}:J_,ok=Hw&&"symbol"==typeof W_.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof W_},ak=function(t,e,n){t===U_&&ak(Q_,e,n),Bb(t);var i=Ab(e,!0);return Bb(n),Ib($_,i)?(n.enumerable?(Ib(t,H_)&&t[H_][i]&&(t[H_][i]=!1),n=Zw(n,{enumerable:Ob(0,!1)})):(Ib(t,H_)||J_(t,H_,Ob(1,{})),t[H_][i]=!0),rk(t,i,n)):J_(t,i,n)},sk=function(t){var e=Ab(t,!0),n=Z_.call(this,e);return!(this===U_&&Ib($_,e)&&!Ib(Q_,e))&&(!(n||!Ib(this,e)||!Ib($_,e)||Ib(this,H_)&&this[H_][e])||n)},lk=function(t){var e=t===U_,n=X_(e?Q_:Cb(t)),i=[];return R_(n,function(t){!Ib($_,t)||e&&!Ib(U_,t)||i.push($_[t])}),i};if(Hw||($w((W_=function(){if(this instanceof W_)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=Bw(t),n=function(t){this===U_&&n.call(Q_,t),Ib(this,H_)&&Ib(this[H_],e)&&(this[H_][e]=!1),rk(this,e,Ob(1,t))};return zb&&ik&&rk(U_,e,{configurable:!0,set:n}),L_(e,t)}).prototype,"toString",function(){return q_(this).tag}),Ub.f=sk,lw.f=ak,Kb.f=I_,Lw.f=r_.f=P_,Aw.f=lk,zb&&J_(W_.prototype,"description",{configurable:!0,get:function(){return q_(this).description}}),s_.f=function(t){return L_(Qw(t),t)}),Rb({global:!0,wrap:!0,forced:!Hw,sham:!Hw},{Symbol:W_}),R_(Ew(ek),function(t){Kw(t)}),Rb({target:"Symbol",stat:!0,forced:!Hw},{for:function(t){var e=String(t);if(Ib(K_,e))return K_[e];var n=W_(e);return K_[e]=n,tk[n]=e,n},keyFor:function(t){if(!ok(t))throw TypeError(t+" is not a symbol");if(Ib(tk,t))return tk[t]},useSetter:function(){ik=!0},useSimple:function(){ik=!1}}),Rb({target:"Object",stat:!0,forced:!Hw,sham:!zb},{create:function(t,e){return void 0===e?Zw(t):A_(Zw(t),e)},defineProperty:ak,defineProperties:A_,getOwnPropertyDescriptor:I_}),Rb({target:"Object",stat:!0,forced:!Hw},{getOwnPropertyNames:P_,getOwnPropertySymbols:lk}),Rb({target:"Object",stat:!0,forced:Tb(function(){Aw.f(1)})},{getOwnPropertySymbols:function(t){return Aw.f(Nw(t))}}),V_){var ck=!Hw||Tb(function(){var t=W_();return"[null]"!=V_([t])||"{}"!=V_({a:t})||"{}"!=V_(Object(t))});Rb({target:"JSON",stat:!0,forced:ck},{stringify:function(t,e,n){for(var i,r=[t],o=1;o<arguments.length;)r.push(arguments[o++]);if((Lb(i=e)||void 0!==t)&&!ok(t))return zw(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!ok(e))return e}),r[1]=e,V_.apply(null,r)}})}W_.prototype[z_]||cw(W_.prototype,z_,W_.prototype.valueOf),h_(W_,"Symbol"),kw[H_]=!0,aw.Object.getOwnPropertySymbols;var uk,dk,hk,fk={},pk=!Tb(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),vk=Fw("IE_PROTO"),mk=Object.prototype,gk=pk?Object.getPrototypeOf:function(t){return t=Nw(t),Ib(t,vk)?t[vk]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?mk:null},yk=(Qw("iterator"),!1);[].keys&&("next"in(hk=[].keys())?(dk=gk(gk(hk)))!==Object.prototype&&(uk=dk):yk=!0),null==uk&&(uk={});function bk(){return this}function wk(){return this}function _k(t,e,n,i,r,o,a){var s,l,c;function u(t){if(t===r&&y)return y;if(!Ek&&t in m)return m[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}}l=i,c=e+" Iterator",(s=n).prototype=Zw(xk,{next:Ob(1,l)}),h_(s,c,!1,!0),fk[c]=bk;var d,h,f,p=e+" Iterator",v=!1,m=t.prototype,g=m[Tk]||m["@@iterator"]||r&&m[r],y=!Ek&&g||u(r),b="Array"==e&&m.entries||g;if(b&&(d=gk(b.call(new t)),Sk!==Object.prototype&&d.next&&(h_(d,p,!0,!0),fk[p]=wk)),"values"==r&&g&&"values"!==g.name&&(v=!0,y=function(){return g.call(this)}),a&&m[Tk]!==y&&cw(m,Tk,y),fk[e]=y,r)if(h={values:u("values"),keys:o?y:u("keys"),entries:u("entries")},a)for(f in h)!Ek&&!v&&f in m||$w(m,f,h[f]);else Rb({target:e,proto:!0,forced:Ek||v},h);return h}var kk={IteratorPrototype:uk,BUGGY_SAFARI_ITERATORS:yk},xk=kk.IteratorPrototype,Sk=(Object.setPrototypeOf||"__proto__"in{}&&function(){var t={};try{Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set.call(t,[]),t instanceof Array}catch(t){}}(),kk.IteratorPrototype),Ek=kk.BUGGY_SAFARI_ITERATORS,Tk=Qw("iterator"),Ok=j_.set,Mk=j_.getterFor("Array Iterator");_k(Array,"Array",function(t,e){Ok(this,{type:"Array Iterator",target:Cb(t),index:0,kind:e})},function(){var t=Mk(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}},"values"),fk.Arguments=fk.Array;var Dk=Qw("toStringTag");for(var Ck in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Lk=Hb[Ck],Ak=Lk&&Lk.prototype;Ak&&!Ak[Dk]&&cw(Ak,Dk,Ck),fk[Ck]=fk.Array}function Ik(s){return function(t,e){var n,i,r=String(Db(t)),o=dw(e),a=r.length;return o<0||a<=o?s?"":void 0:(n=r.charCodeAt(o))<55296||56319<n||o+1===a||(i=r.charCodeAt(o+1))<56320||57343<i?s?r.charAt(o):n:s?r.slice(o,o+2):i-56320+(n-55296<<10)+65536}}var Pk=(Ik(!1),Ik(!0)),jk=j_.set,Nk=j_.getterFor("String Iterator");_k(String,"String",function(t){jk(this,{type:"String Iterator",string:String(t),index:0})},function(){var t,e=Nk(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=Pk(n,i),e.index+=t.length,{value:t,done:!1})});var Bk=Qw("iterator");Rb({target:"Object",stat:!0,sham:!zb},{create:Zw});var Fk=Tb(function(){Ew(1)});Rb({target:"Object",stat:!0,forced:Fk},{keys:function(t){return Ew(Nw(t))}}),aw.Object.keys;function Rk(n){return function(t){var e=String(Db(t));return 1&n&&(e=e.replace(qk,"")),2&n&&(e=e.replace(Uk,"")),e}}var Hk,zk="\t\n\v\f\r                　\u2028\u2029\ufeff",Yk="["+zk+"]",qk=RegExp("^"+Yk+Yk+"*"),Uk=RegExp(Yk+Yk+"*$"),Wk={start:Rk(1),end:Rk(2),trim:Rk(3)},Vk=Wk.trim;Rb({target:"String",proto:!0,forced:(Hk="trim",Tb(function(){return!!zk.trim()||"​᠎"!="​᠎".trim()||zk.trim.name!==Hk}))},{trim:function(){return Vk(this)}});function Gk(t){return aw[t+"Prototype"]}var Jk=(Gk("String").trim,function(t,e){var n=[][t];return!n||!Tb(function(){n.call(null,e||function(){throw 1},1)})}),Xk=F_.forEach,Zk=Jk("forEach")?function(t){return Xk(this,t,1<arguments.length?arguments[1]:void 0)}:[].forEach;Rb({target:"Array",proto:!0,forced:[].forEach!=Zk},{forEach:Zk}),Gk("Array").forEach;var $k,Qk,Kk=Mw("navigator","userAgent")||"",tx=Hb.process,ex=tx&&tx.versions,nx=ex&&ex.v8;nx?Qk=($k=nx.split("."))[0]+$k[1]:Kk&&(!($k=Kk.match(/Edge\/(\d+)/))||74<=$k[1])&&($k=Kk.match(/Chrome\/(\d+)/))&&(Qk=$k[1]);function ix(e){return 51<=rx||!Tb(function(){var t=[];return(t.constructor={})[ox]=function(){return{foo:1}},1!==t[e](Boolean).foo})}var rx=Qk&&+Qk,ox=Qw("species"),ax=F_.map;Rb({target:"Array",proto:!0,forced:!ix("map")},{map:function(t){return ax(this,t,1<arguments.length?arguments[1]:void 0)}}),Gk("Array").map;var sx=Wk.trim,lx=Hb.parseInt,cx=/^[+-]?0[Xx]/,ux=8!==lx(zk+"08")||22!==lx(zk+"0x16")?function(t,e){var n=sx(String(t));return lx(n,e>>>0||(cx.test(n)?16:10))}:lx;Rb({global:!0,forced:parseInt!=ux},{parseInt:ux});function dx(s){return function(t){for(var e,n=Cb(t),i=Ew(n),r=i.length,o=0,a=[];o<r;)e=i[o++],zb&&!hx.call(n,e)||a.push(s?[e,n[e]]:n[e]);return a}}var hx=Ub.f,fx=(dx(!0),dx(!1));Rb({target:"Object",stat:!0},{values:function(t){return fx(t)}}),aw.Object.values;var px=F_.filter;Rb({target:"Array",proto:!0,forced:!ix("filter")},{filter:function(t){return px(this,t,1<arguments.length?arguments[1]:void 0)}}),Gk("Array").filter;function vx(t){if(!Lb(t))return!1;var e=t[mx];return void 0!==e?!!e:zw(t)}var mx=Qw("isConcatSpreadable"),gx=51<=rx||!Tb(function(){var t=[];return t[mx]=!1,t.concat()[0]!==t}),yx=ix("concat");Rb({target:"Array",proto:!0,forced:!gx||!yx},{concat:function(t){var e,n,i,r,o,a=Nw(this),s=D_(a,0),l=0;for(e=-1,i=arguments.length;e<i;e++)if(vx(o=-1===e?a:arguments[e])){if(9007199254740991<l+(r=hw(o.length)))throw TypeError("Maximum allowed index exceeded");for(n=0;n<r;n++,l++)n in o&&Dw(s,l,o[n])}else{if(9007199254740991<=l)throw TypeError("Maximum allowed index exceeded");Dw(s,l++,o)}return s.length=l,s}}),Gk("Array").concat,Rb({target:"Array",stat:!0},{isArray:zw});function bx(t,e,n,i){try{return i?e(Bb(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&Bb(r.call(t)),e}}var wx=aw.Array.isArray,_x=Qw("iterator"),kx=Array.prototype,xx=Qw("iterator"),Sx=!1;try{var Ex=0,Tx={next:function(){return{done:!!Ex++}},return:function(){Sx=!0}};Tx[xx]=function(){return this},Array.from(Tx,function(){throw 2})}catch(e){}var Ox=!function(){if(!Sx)return 0;var t=!1;try{var e={};e[xx]=function(){return{next:function(){return{done:t=!0}}}},function(t){Array.from(t)}(e)}catch(t){}return t}();Rb({target:"Array",stat:!0,forced:Ox},{from:function(t){var e,n,i,r,o,a=Nw(t),s="function"==typeof this?this:Array,l=arguments.length,c=1<l?arguments[1]:void 0,u=void 0!==c,d=0,h=function(t){if(null!=t)return t[Bk]||t["@@iterator"]||fk[t_(t)]}(a);if(u&&(c=Nb(c,2<l?arguments[2]:void 0,2)),null==h||s==Array&&function(t){return void 0!==t&&(fk.Array===t||kx[_x]===t)}(h))for(n=new s(e=hw(a.length));d<e;d++)Dw(n,d,u?c(a[d],d):a[d]);else for(o=(r=h.call(a)).next,n=new s;!(i=o.call(r)).done;d++)Dw(n,d,u?bx(r,c,[i.value,d],!0):i.value);return n.length=d,n}}),aw.Array.from,Qw("iterator");var Mx=Qw("species"),Dx=[].slice,Cx=Math.max;Rb({target:"Array",proto:!0,forced:!ix("slice")},{slice:function(t,e){var n,i,r,o=Cb(this),a=hw(o.length),s=fw(t,a),l=fw(void 0===e?a:e,a);if(zw(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!zw(n.prototype)?Lb(n)&&null===(n=n[Mx])&&(n=void 0):n=void 0,n===Array||void 0===n))return Dx.call(o,s,l);for(i=new(void 0===n?Array:n)(Cx(l-s,0)),r=0;s<l;s++,r++)s in o&&Dw(i,r,o[s]);return i.length=r,i}});var Lx=Gk("Array").slice,Ax=Array.prototype,Ix=function(t){var e=t.slice;return t===Ax||t instanceof Array&&e===Ax.slice?Lx:e},Px=Tb(function(){gk(1)});Rb({target:"Object",stat:!0,forced:Px,sham:!pk},{getPrototypeOf:function(t){return gk(Nw(t))}});var jx=aw.Object.getPrototypeOf,Nx=_w.indexOf,Bx=[].indexOf,Fx=!!Bx&&1/[1].indexOf(1,-0)<0,Rx=Jk("indexOf");Rb({target:"Array",proto:!0,forced:Fx||Rx},{indexOf:function(t){return Fx?Bx.apply(this,arguments)||0:Nx(this,t,1<arguments.length?arguments[1]:void 0)}}),Gk("Array").indexOf;var Hx=wx,zx=Object.assign,Yx=!zx||Tb(function(){var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!=zx({},t)[n]||"abcdefghijklmnopqrst"!=Ew(zx({},e)).join("")})?function(t,e){for(var n=Nw(t),i=arguments.length,r=1,o=Aw.f,a=Ub.f;r<i;)for(var s,l=Gb(arguments[r++]),c=o?Ew(l).concat(o(l)):Ew(l),u=c.length,d=0;d<u;)s=c[d++],zb&&!a.call(l,s)||(n[s]=l[s]);return n}:zx;Rb({target:"Object",stat:!0,forced:Object.assign!==Yx},{assign:Yx}),aw.Object.assign,Kw("iterator");var qx=s_.f("iterator");Kw("asyncIterator"),Kw("hasInstance"),Kw("isConcatSpreadable"),Kw("match"),Kw("matchAll"),Kw("replace"),Kw("search"),Kw("species"),Kw("split"),Kw("toPrimitive"),Kw("toStringTag"),Kw("unscopables"),h_(Math,"Math",!0),h_(Hb.JSON,"JSON",!0);var Ux=aw.Symbol;Kw("asyncDispose"),Kw("dispose"),Kw("observable"),Kw("patternMatch"),Kw("replaceAll");for(var Wx=Ux,Vx=Sb(function(e){function n(t){return(n="function"==typeof Wx&&"symbol"==typeof qx?function(t){return typeof t}:function(t){return t&&"function"==typeof Wx&&t.constructor===Wx&&t!==Wx.prototype?"symbol":typeof t})(t)}function i(t){return"function"==typeof Wx&&"symbol"===n(qx)?e.exports=i=function(t){return n(t)}:e.exports=i=function(t){return t&&"function"==typeof Wx&&t.constructor===Wx&&t!==Wx.prototype?"symbol":n(t)},i(t)}e.exports=i}),Gx=[],Jx=0;Jx<256;Jx++)Gx[Jx]=(Jx+256).toString(16).substr(1);for(var Xx=function(){if("undefined"!=typeof crypto&&crypto.getRandomValues){var t=new Uint8Array(16);return function(){return crypto.getRandomValues(t),t}}var n=new Array(16);return function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}(),Zx=[],$x=0;$x<256;$x++)Zx[$x]=($x+256).toString(16).substr(1);var Qx=Xx();function Kx(t){return t instanceof Number||"number"==typeof t}function tS(t){return t instanceof String||"string"==typeof t}function eS(t,e,n,i){var r=!1;!0===i&&(r=null===e[n]&&void 0!==t[n]),r?delete t[n]:t[n]=e[n]}function nS(t,e,n,i){var r=2<arguments.length&&void 0!==n&&n,o=3<arguments.length&&void 0!==i&&i;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)||!0===r)if("object"===Vx(e[a])&&null!==e[a]&&jx(e[a])===Object.prototype)void 0===t[a]?t[a]=nS({},e[a],r):"object"===Vx(t[a])&&null!==t[a]&&jx(t[a])===Object.prototype?nS(t[a],e[a],r):eS(t,e,a,o);else if(Hx(e[a])){var s;t[a]=Ix(s=e[a]).call(s)}else eS(t,e,a,o);return t}function iS(t){var e=Vx(t);return"object"===e?null===t?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":Hx(t)?"Array":t instanceof Date?"Date":"Object":"number"===e?"Number":"boolean"===e?"Boolean":"string"===e?"String":void 0===e?"undefined":e}Qx[0],Qx[1],Qx[2],Qx[3],Qx[4],Qx[5],Qx[6],Qx[7];var rS=of(function(Vn,t){Vn.exports=function(){var t,r;function y(){return t.apply(null,arguments)}function s(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function l(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function c(t){return void 0===t}function u(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function d(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function h(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function b(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function f(t,e){for(var n in e)b(e,n)&&(t[n]=e[n]);return b(e,"toString")&&(t.toString=e.toString),b(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e,n,i){return Ee(t,e,n,i,!0).utc()}function w(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function v(t){if(null==t._isValid){var e=w(t),n=r.call(e.parsedDateParts,function(t){return null!=t}),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function m(t){var e=p(NaN);return null!=t?f(w(e),t):w(e).userInvalidated=!0,e}r=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};var o=y.momentProperties=[];function g(t,e){var n,i,r;if(c(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),c(e._i)||(t._i=e._i),c(e._f)||(t._f=e._f),c(e._l)||(t._l=e._l),c(e._strict)||(t._strict=e._strict),c(e._tzm)||(t._tzm=e._tzm),c(e._isUTC)||(t._isUTC=e._isUTC),c(e._offset)||(t._offset=e._offset),c(e._pf)||(t._pf=w(e)),c(e._locale)||(t._locale=e._locale),0<o.length)for(n=0;n<o.length;n++)c(r=e[i=o[n]])||(t[i]=r);return t}var e=!1;function _(t){g(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===e&&(e=!0,y.updateOffset(this),e=!1)}function k(t){return t instanceof _||null!=t&&null!=t._isAMomentObject}function x(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function S(t){var e=+t,n=0;return 0!=e&&isFinite(e)&&(n=x(e)),n}function a(t,e,n){var i,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(i=0;i<r;i++)(n&&t[i]!==e[i]||!n&&S(t[i])!==S(e[i]))&&a++;return a+o}function E(t){!1===y.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function n(r,o){var a=!0;return f(function(){if(null!=y.deprecationHandler&&y.deprecationHandler(null,r),a){for(var t,e=[],n=0;n<arguments.length;n++){if(t="","object"==typeof arguments[n]){for(var i in t+="\n["+n+"] ",arguments[0])t+=i+": "+arguments[0][i]+", ";t=t.slice(0,-2)}else t=arguments[n];e.push(t)}E(r+"\nArguments: "+Array.prototype.slice.call(e).join("")+"\n"+(new Error).stack),a=!1}return o.apply(this,arguments)},o)}var i,T={};function O(t,e){null!=y.deprecationHandler&&y.deprecationHandler(t,e),T[t]||(E(e),T[t]=!0)}function M(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function D(t,e){var n,i=f({},t);for(n in e)b(e,n)&&(l(t[n])&&l(e[n])?(i[n]={},f(i[n],t[n]),f(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);for(n in t)b(t,n)&&!b(e,n)&&l(t[n])&&(i[n]=f({},i[n]));return i}function C(t){null!=t&&this.set(t)}y.suppressDeprecationWarnings=!1,y.deprecationHandler=null,i=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)b(t,e)&&n.push(e);return n};var L={};function A(t,e){var n=t.toLowerCase();L[n]=L[n+"s"]=L[e]=t}function I(t){return"string"==typeof t?L[t]||L[t.toLowerCase()]:void 0}function P(t){var e,n,i={};for(n in t)b(t,n)&&(e=I(n))&&(i[e]=t[n]);return i}var j={};function N(t,e){j[t]=e}function B(t,e,n){var i=""+Math.abs(t),r=e-i.length;return(0<=t?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var F=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,R=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,H={},z={};function Y(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(z[t]=r),e&&(z[e[0]]=function(){return B(r.apply(this,arguments),e[1],e[2])}),n&&(z[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function q(t,e){return t.isValid()?(e=U(e,t.localeData()),H[e]=H[e]||function(i){var t,r,e,o=i.match(F);for(t=0,r=o.length;t<r;t++)z[o[t]]?o[t]=z[o[t]]:o[t]=(e=o[t]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(t){var e,n="";for(e=0;e<r;e++)n+=M(o[e])?o[e].call(t,i):o[e];return n}}(e),H[e](t)):t.localeData().invalidDate()}function U(t,e){var n=5;function i(t){return e.longDateFormat(t)||t}for(R.lastIndex=0;0<=n&&R.test(t);)t=t.replace(R,i),R.lastIndex=0,n-=1;return t}var W=/\d/,V=/\d\d/,G=/\d{3}/,J=/\d{4}/,X=/[+-]?\d{6}/,Z=/\d\d?/,$=/\d\d\d\d?/,Q=/\d\d\d\d\d\d?/,K=/\d{1,3}/,tt=/\d{1,4}/,et=/[+-]?\d{1,6}/,nt=/\d+/,it=/[+-]?\d+/,rt=/Z|[+-]\d\d:?\d\d/gi,ot=/Z|[+-]\d\d(?::?\d\d)?/gi,at=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,st={};function lt(t,n,i){st[t]=M(n)?n:function(t,e){return t&&i?i:n}}function ct(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ut={};function dt(t,n){var e,i=n;for("string"==typeof t&&(t=[t]),u(n)&&(i=function(t,e){e[n]=S(t)}),e=0;e<t.length;e++)ut[t[e]]=i}function ht(t,r){dt(t,function(t,e,n,i){n._w=n._w||{},r(t,n._w,n,i)})}var ft=0,pt=1,vt=2,mt=3,gt=4,yt=5,bt=6,wt=7,_t=8;function kt(t){return xt(t)?366:365}function xt(t){return t%4==0&&t%100!=0||t%400==0}Y("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),Y(0,["YY",2],0,function(){return this.year()%100}),Y(0,["YYYY",4],0,"year"),Y(0,["YYYYY",5],0,"year"),Y(0,["YYYYYY",6,!0],0,"year"),A("year","y"),N("year",1),lt("Y",it),lt("YY",Z,V),lt("YYYY",tt,J),lt("YYYYY",et,X),lt("YYYYYY",et,X),dt(["YYYYY","YYYYYY"],ft),dt("YYYY",function(t,e){e[ft]=2===t.length?y.parseTwoDigitYear(t):S(t)}),dt("YY",function(t,e){e[ft]=y.parseTwoDigitYear(t)}),dt("Y",function(t,e){e[ft]=parseInt(t,10)}),y.parseTwoDigitYear=function(t){return S(t)+(68<S(t)?1900:2e3)};var St,Et=Tt("FullYear",!0);function Tt(e,n){return function(t){return null!=t?(Mt(this,e,t),y.updateOffset(this,n),this):Ot(this,e)}}function Ot(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Mt(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&xt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Dt(n,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function Dt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=(e%12+12)%12;return t+=(e-n)/12,1==n?xt(t)?29:28:31-n%7%2}St=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},Y("M",["MM",2],"Mo",function(){return this.month()+1}),Y("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),Y("MMMM",0,0,function(t){return this.localeData().months(this,t)}),A("month","M"),N("month",8),lt("M",Z),lt("MM",Z,V),lt("MMM",function(t,e){return e.monthsShortRegex(t)}),lt("MMMM",function(t,e){return e.monthsRegex(t)}),dt(["M","MM"],function(t,e){e[pt]=S(t)-1}),dt(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[pt]=r:w(n).invalidMonth=t});var Ct=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Lt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),At="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function It(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=S(e);else if(!u(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),Dt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function Pt(t){return null!=t?(It(this,t),y.updateOffset(this,!0),this):Ot(this,"Month")}var jt=at,Nt=at;function Bt(){function t(t,e){return e.length-t.length}var e,n,i=[],r=[],o=[];for(e=0;e<12;e++)n=p([2e3,e]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(t),r.sort(t),o.sort(t),e=0;e<12;e++)i[e]=ct(i[e]),r[e]=ct(r[e]);for(e=0;e<24;e++)o[e]=ct(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Ft(t){var e;if(t<100&&0<=t){var n=Array.prototype.slice.call(arguments);n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function Rt(t,e,n){var i=7+e-n;return-(7+Ft(t,0,i).getUTCDay()-e)%7+i-1}function Ht(t,e,n,i,r){var o,a,s=1+7*(e-1)+(7+n-i)%7+Rt(t,i,r);return a=s<=0?kt(o=t-1)+s:s>kt(t)?(o=t+1,s-kt(t)):(o=t,s),{year:o,dayOfYear:a}}function zt(t,e,n){var i,r,o=Rt(t.year(),e,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?i=a+Yt(r=t.year()-1,e,n):a>Yt(t.year(),e,n)?(i=a-Yt(t.year(),e,n),r=t.year()+1):(r=t.year(),i=a),{week:i,year:r}}function Yt(t,e,n){var i=Rt(t,e,n),r=Rt(t+1,e,n);return(kt(t)-i+r)/7}function qt(t,e){return t.slice(e,7).concat(t.slice(0,e))}Y("w",["ww",2],"wo","week"),Y("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),N("week",5),N("isoWeek",5),lt("w",Z),lt("ww",Z,V),lt("W",Z),lt("WW",Z,V),ht(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=S(t)}),Y("d",0,"do","day"),Y("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),Y("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),Y("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),Y("e",0,0,"weekday"),Y("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),N("day",11),N("weekday",11),N("isoWeekday",11),lt("d",Z),lt("e",Z),lt("E",Z),lt("dd",function(t,e){return e.weekdaysMinRegex(t)}),lt("ddd",function(t,e){return e.weekdaysShortRegex(t)}),lt("dddd",function(t,e){return e.weekdaysRegex(t)}),ht(["dd","ddd","dddd"],function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);null!=r?e.d=r:w(n).invalidWeekday=t}),ht(["d","e","E"],function(t,e,n,i){e[i]=S(t)});var Ut="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Wt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Vt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var Gt=at,Jt=at,Xt=at;function Zt(){function t(t,e){return e.length-t.length}var e,n,i,r,o,a=[],s=[],l=[],c=[];for(e=0;e<7;e++)n=p([2e3,1]).day(e),i=this.weekdaysMin(n,""),r=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(i),s.push(r),l.push(o),c.push(i),c.push(r),c.push(o);for(a.sort(t),s.sort(t),l.sort(t),c.sort(t),e=0;e<7;e++)s[e]=ct(s[e]),l[e]=ct(l[e]),c[e]=ct(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function $t(){return this.hours()%12||12}function Qt(t,e){Y(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Kt(t,e){return e._meridiemParse}Y("H",["HH",2],0,"hour"),Y("h",["hh",2],0,$t),Y("k",["kk",2],0,function(){return this.hours()||24}),Y("hmm",0,0,function(){return""+$t.apply(this)+B(this.minutes(),2)}),Y("hmmss",0,0,function(){return""+$t.apply(this)+B(this.minutes(),2)+B(this.seconds(),2)}),Y("Hmm",0,0,function(){return""+this.hours()+B(this.minutes(),2)}),Y("Hmmss",0,0,function(){return""+this.hours()+B(this.minutes(),2)+B(this.seconds(),2)}),Qt("a",!0),Qt("A",!1),A("hour","h"),N("hour",13),lt("a",Kt),lt("A",Kt),lt("H",Z),lt("h",Z),lt("k",Z),lt("HH",Z,V),lt("hh",Z,V),lt("kk",Z,V),lt("hmm",$),lt("hmmss",Q),lt("Hmm",$),lt("Hmmss",Q),dt(["H","HH"],mt),dt(["k","kk"],function(t,e,n){var i=S(t);e[mt]=24===i?0:i}),dt(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),dt(["h","hh"],function(t,e,n){e[mt]=S(t),w(n).bigHour=!0}),dt("hmm",function(t,e,n){var i=t.length-2;e[mt]=S(t.substr(0,i)),e[gt]=S(t.substr(i)),w(n).bigHour=!0}),dt("hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[mt]=S(t.substr(0,i)),e[gt]=S(t.substr(i,2)),e[yt]=S(t.substr(r)),w(n).bigHour=!0}),dt("Hmm",function(t,e,n){var i=t.length-2;e[mt]=S(t.substr(0,i)),e[gt]=S(t.substr(i))}),dt("Hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[mt]=S(t.substr(0,i)),e[gt]=S(t.substr(i,2)),e[yt]=S(t.substr(r))});var te,ee=Tt("Hours",!0),ne={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Lt,monthsShort:At,week:{dow:0,doy:6},weekdays:Ut,weekdaysMin:Vt,weekdaysShort:Wt,meridiemParse:/[ap]\.?m?\.?/i},ie={},re={};function oe(t){return t?t.toLowerCase().replace("_","-"):t}function ae(t){var e=null;if(!ie[t]&&Vn&&Vn.exports)try{e=te._abbr,function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}(),se(e)}catch(t){}return ie[t]}function se(t,e){var n;return t&&((n=c(e)?ce(t):le(t,e))?te=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),te._abbr}function le(t,e){if(null===e)return delete ie[t],null;var n,i=ne;if(e.abbr=t,null!=ie[t])O("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=ie[t]._config;else if(null!=e.parentLocale)if(null!=ie[e.parentLocale])i=ie[e.parentLocale]._config;else{if(null==(n=ae(e.parentLocale)))return re[e.parentLocale]||(re[e.parentLocale]=[]),re[e.parentLocale].push({name:t,config:e}),null;i=n._config}return ie[t]=new C(D(i,e)),re[t]&&re[t].forEach(function(t){le(t.name,t.config)}),se(t),ie[t]}function ce(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return te;if(!s(t)){if(e=ae(t))return e;t=[t]}return function(t){for(var e,n,i,r,o=0;o<t.length;){for(e=(r=oe(t[o]).split("-")).length,n=(n=oe(t[o+1]))?n.split("-"):null;0<e;){if(i=ae(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&a(r,n,!0)>=e-1)break;e--}o++}return te}(t)}function ue(t){var e,n=t._a;return n&&-2===w(t).overflow&&(e=n[pt]<0||11<n[pt]?pt:n[vt]<1||n[vt]>Dt(n[ft],n[pt])?vt:n[mt]<0||24<n[mt]||24===n[mt]&&(0!==n[gt]||0!==n[yt]||0!==n[bt])?mt:n[gt]<0||59<n[gt]?gt:n[yt]<0||59<n[yt]?yt:n[bt]<0||999<n[bt]?bt:-1,w(t)._overflowDayOfYear&&(e<ft||vt<e)&&(e=vt),w(t)._overflowWeeks&&-1===e&&(e=wt),w(t)._overflowWeekday&&-1===e&&(e=_t),w(t).overflow=e),t}function de(t,e,n){return null!=t?t:null!=e?e:n}function he(t){var e,n,i,r,o,a,s,l=[];if(!t._d){for(a=t,s=void 0,s=new Date(y.now()),i=a._useUTC?[s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()]:[s.getFullYear(),s.getMonth(),s.getDate()],t._w&&null==t._a[vt]&&null==t._a[pt]&&function(t){var e,n,i,r,o,a,s,l;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)o=1,a=4,n=de(e.GG,t._a[ft],zt(Te(),1,4).year),i=de(e.W,1),((r=de(e.E,1))<1||7<r)&&(l=!0);else{o=t._locale._week.dow,a=t._locale._week.doy;var c=zt(Te(),o,a);n=de(e.gg,t._a[ft],c.year),i=de(e.w,c.week),null!=e.d?((r=e.d)<0||6<r)&&(l=!0):null!=e.e?(r=e.e+o,(e.e<0||6<e.e)&&(l=!0)):r=o}i<1||i>Yt(n,o,a)?w(t)._overflowWeeks=!0:null!=l?w(t)._overflowWeekday=!0:(s=Ht(n,i,r,o,a),t._a[ft]=s.year,t._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(o=de(t._a[ft],i[ft]),(t._dayOfYear>kt(o)||0===t._dayOfYear)&&(w(t)._overflowDayOfYear=!0),n=Ft(o,0,t._dayOfYear),t._a[pt]=n.getUTCMonth(),t._a[vt]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=l[e]=i[e];for(;e<7;e++)t._a[e]=l[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[mt]&&0===t._a[gt]&&0===t._a[yt]&&0===t._a[bt]&&(t._nextDay=!0,t._a[mt]=0),t._d=(t._useUTC?Ft:function(t,e,n,i,r,o,a){var s;return t<100&&0<=t?(s=new Date(t+400,e,n,i,r,o,a),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,i,r,o,a),s}).apply(null,l),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[mt]=24),t._w&&void 0!==t._w.d&&t._w.d!==r&&(w(t).weekdayMismatch=!0)}}var fe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ve=/Z|[+-]\d\d(?::?\d\d)?/,me=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ge=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ye=/^\/?Date\((\-?\d+)/i;function be(t){var e,n,i,r,o,a,s=t._i,l=fe.exec(s)||pe.exec(s);if(l){for(w(t).iso=!0,e=0,n=me.length;e<n;e++)if(me[e][1].exec(l[1])){r=me[e][0],i=!1!==me[e][2];break}if(null==r)return void(t._isValid=!1);if(l[3]){for(e=0,n=ge.length;e<n;e++)if(ge[e][1].exec(l[3])){o=(l[2]||" ")+ge[e][0];break}if(null==o)return void(t._isValid=!1)}if(!i&&null!=o)return void(t._isValid=!1);if(l[4]){if(!ve.exec(l[4]))return void(t._isValid=!1);a="Z"}t._f=r+(o||"")+(a||""),xe(t)}else t._isValid=!1}var we=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;var _e={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ke(t){var e,n,i,r,o,a,s,l,c,u,d=we.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(d){var h=(e=d[4],n=d[3],i=d[2],r=d[5],o=d[6],a=d[7],s=[function(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}(e),At.indexOf(n),parseInt(i,10),parseInt(r,10),parseInt(o,10)],a&&s.push(parseInt(a,10)),s);if(l=d[1],c=h,u=t,l&&Wt.indexOf(l)!==new Date(c[0],c[1],c[2]).getDay()&&(w(u).weekdayMismatch=!0,u._isValid=!1,1))return;t._a=h,t._tzm=function(t,e,n){if(t)return _e[t];if(e)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}(d[8],d[9],d[10]),t._d=Ft.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),w(t).rfc2822=!0}else t._isValid=!1}function xe(t){if(t._f!==y.ISO_8601)if(t._f!==y.RFC_2822){t._a=[],w(t).empty=!0;var e,n,i,r,o,a=""+t._i,s=a.length,l=0;for(i=U(t._f,t._locale).match(F)||[],e=0;e<i.length;e++)r=i[e],(n=(a.match((g=t,b(st,m=r)?st[m](g._strict,g._locale):new RegExp(ct(m.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r})))))||[])[0])&&(0<(o=a.substr(0,a.indexOf(n))).length&&w(t).unusedInput.push(o),a=a.slice(a.indexOf(n)+n.length),l+=n.length),z[r]?(n?w(t).empty=!1:w(t).unusedTokens.push(r),f=r,v=t,null!=(p=n)&&b(ut,f)&&ut[f](p,v._a,v,f)):t._strict&&!n&&w(t).unusedTokens.push(r);w(t).charsLeftOver=s-l,0<a.length&&w(t).unusedInput.push(a),t._a[mt]<=12&&!0===w(t).bigHour&&0<t._a[mt]&&(w(t).bigHour=void 0),w(t).parsedDateParts=t._a.slice(0),w(t).meridiem=t._meridiem,t._a[mt]=(c=t._locale,u=t._a[mt],null==(d=t._meridiem)?u:null!=c.meridiemHour?c.meridiemHour(u,d):(null!=c.isPM&&((h=c.isPM(d))&&u<12&&(u+=12),h||12!==u||(u=0)),u)),he(t),ue(t)}else ke(t);else be(t);var c,u,d,h,f,p,v,m,g}function Se(t){var e,n,i,r,o=t._i,a=t._f;return t._locale=t._locale||ce(t._l),null===o||void 0===a&&""===o?m({nullInput:!0}):("string"==typeof o&&(t._i=o=t._locale.preparse(o)),k(o)?new _(ue(o)):(d(o)?t._d=o:s(a)?function(t){var e,n,i,r,o;if(0===t._f.length)return w(t).invalidFormat=!0,t._d=new Date(NaN);for(r=0;r<t._f.length;r++)o=0,e=g({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],xe(e),v(e)&&(o+=w(e).charsLeftOver,o+=10*w(e).unusedTokens.length,w(e).score=o,(null==i||o<i)&&(i=o,n=e));f(t,n||e)}(t):a?xe(t):c(r=(e=t)._i)?e._d=new Date(y.now()):d(r)?e._d=new Date(r.valueOf()):"string"==typeof r?(n=e,null===(i=ye.exec(n._i))?(be(n),!1===n._isValid&&(delete n._isValid,ke(n),!1===n._isValid&&(delete n._isValid,y.createFromInputFallback(n)))):n._d=new Date(+i[1])):s(r)?(e._a=h(r.slice(0),function(t){return parseInt(t,10)}),he(e)):l(r)?function(t){if(!t._d){var e=P(t._i);t._a=h([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),he(t)}}(e):u(r)?e._d=new Date(r):y.createFromInputFallback(e),v(t)||(t._d=null),t))}function Ee(t,e,n,i,r){var o,a={};return!0!==n&&!1!==n||(i=n,n=void 0),(l(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||s(t)&&0===t.length)&&(t=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=r,a._l=n,a._i=t,a._f=e,a._strict=i,(o=new _(ue(Se(a))))._nextDay&&(o.add(1,"d"),o._nextDay=void 0),o}function Te(t,e,n,i){return Ee(t,e,n,i,!1)}y.createFromInputFallback=n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),y.ISO_8601=function(){},y.RFC_2822=function(){};var Oe=n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Te.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:m()}),Me=n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Te.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:m()});function De(t,e){var n,i;if(1===e.length&&s(e[0])&&(e=e[0]),!e.length)return Te();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}var Ce=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Le(t){var e=P(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||e.isoWeek||0,a=e.day||0,s=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===St.call(Ce,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var n=!1,i=0;i<Ce.length;++i)if(t[Ce[i]]){if(n)return!1;parseFloat(t[Ce[i]])!==S(t[Ce[i]])&&(n=!0)}return!0}(e),this._milliseconds=+u+1e3*c+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=ce(),this._bubble()}function Ae(t){return t instanceof Le}function Ie(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Pe(t,n){Y(t,0,0,function(){var t=this.utcOffset(),e="+";return t<0&&(t=-t,e="-"),e+B(~~(t/60),2)+n+B(~~t%60,2)})}Pe("Z",":"),Pe("ZZ",""),lt("Z",ot),lt("ZZ",ot),dt(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ne(ot,t)});var je=/([\+\-]|\d\d)/gi;function Ne(t,e){var n=(e||"").match(t);if(null===n)return null;var i=((n[n.length-1]||[])+"").match(je)||["-",0,0],r=60*i[1]+S(i[2]);return 0===r?0:"+"===i[0]?r:-r}function Be(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(k(t)||d(t)?t.valueOf():Te(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),y.updateOffset(n,!1),n):Te(t).local()}function Fe(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Re(){return!!this.isValid()&&this._isUTC&&0===this._offset}y.updateOffset=function(){};var He=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,ze=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ye(t,e){var n,i,r,o,a,s,l=t,c=null;return Ae(t)?l={ms:t._milliseconds,d:t._days,M:t._months}:u(t)?(l={},e?l[e]=t:l.milliseconds=t):(c=He.exec(t))?(n="-"===c[1]?-1:1,l={y:0,d:S(c[vt])*n,h:S(c[mt])*n,m:S(c[gt])*n,s:S(c[yt])*n,ms:S(Ie(1e3*c[bt]))*n}):(c=ze.exec(t))?(n="-"===c[1]?-1:1,l={y:qe(c[2],n),M:qe(c[3],n),w:qe(c[4],n),d:qe(c[5],n),h:qe(c[6],n),m:qe(c[7],n),s:qe(c[8],n)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(o=Te(l.from),a=Te(l.to),r=o.isValid()&&a.isValid()?(a=Be(a,o),o.isBefore(a)?s=Ue(o,a):((s=Ue(a,o)).milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0},(l={}).ms=r.milliseconds,l.M=r.months),i=new Le(l),Ae(t)&&b(t,"_locale")&&(i._locale=t._locale),i}function qe(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ue(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=e-t.clone().add(n.months,"M"),n}function We(i,r){return function(t,e){var n;return null===e||isNaN(+e)||(O(r,"moment()."+r+"(period, number) is deprecated. Please use moment()."+r+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=t,t=e,e=n),Ve(this,Ye(t="string"==typeof t?+t:t,e),i),this}}function Ve(t,e,n,i){var r=e._milliseconds,o=Ie(e._days),a=Ie(e._months);t.isValid()&&(i=null==i||i,a&&It(t,Ot(t,"Month")+a*n),o&&Mt(t,"Date",Ot(t,"Date")+o*n),r&&t._d.setTime(t._d.valueOf()+r*n),i&&y.updateOffset(t,o||a))}Ye.fn=Le.prototype,Ye.invalid=function(){return Ye(NaN)};var Ge=We(1,"add"),Je=We(-1,"subtract");function Xe(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,"months");return-(n+(e-i<0?(e-i)/(i-t.clone().add(n-1,"months")):(e-i)/(t.clone().add(1+n,"months")-i)))||0}function Ze(t){var e;return void 0===t?this._locale._abbr:(null!=(e=ce(t))&&(this._locale=e),this)}y.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",y.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var $e=n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function Qe(){return this._locale}function Ke(t,e){return(t%e+e)%e}function tn(t,e,n){return t<100&&0<=t?new Date(t+400,e,n)-126227808e5:new Date(t,e,n).valueOf()}function en(t,e,n){return t<100&&0<=t?Date.UTC(t+400,e,n)-126227808e5:Date.UTC(t,e,n)}function nn(t,e){Y(0,[t,t.length],0,e)}function rn(t,e,n,i,r){var o;return null==t?zt(this,i,r).year:(e>(o=Yt(t,i,r))&&(e=o),function(t,e,n,i,r){var o=Ht(t,e,n,i,r),a=Ft(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,t,e,n,i,r))}Y(0,["gg",2],0,function(){return this.weekYear()%100}),Y(0,["GG",2],0,function(){return this.isoWeekYear()%100}),nn("gggg","weekYear"),nn("ggggg","weekYear"),nn("GGGG","isoWeekYear"),nn("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),N("weekYear",1),N("isoWeekYear",1),lt("G",it),lt("g",it),lt("GG",Z,V),lt("gg",Z,V),lt("GGGG",tt,J),lt("gggg",tt,J),lt("GGGGG",et,X),lt("ggggg",et,X),ht(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=S(t)}),ht(["gg","GG"],function(t,e,n,i){e[i]=y.parseTwoDigitYear(t)}),Y("Q",0,"Qo","quarter"),A("quarter","Q"),N("quarter",7),lt("Q",W),dt("Q",function(t,e){e[pt]=3*(S(t)-1)}),Y("D",["DD",2],"Do","date"),A("date","D"),N("date",9),lt("D",Z),lt("DD",Z,V),lt("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),dt(["D","DD"],vt),dt("Do",function(t,e){e[vt]=S(t.match(Z)[0])});var on=Tt("Date",!0);Y("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),N("dayOfYear",4),lt("DDD",K),lt("DDDD",G),dt(["DDD","DDDD"],function(t,e,n){n._dayOfYear=S(t)}),Y("m",["mm",2],0,"minute"),A("minute","m"),N("minute",14),lt("m",Z),lt("mm",Z,V),dt(["m","mm"],gt);var an=Tt("Minutes",!1);Y("s",["ss",2],0,"second"),A("second","s"),N("second",15),lt("s",Z),lt("ss",Z,V),dt(["s","ss"],yt);var sn,ln=Tt("Seconds",!1);for(Y("S",0,0,function(){return~~(this.millisecond()/100)}),Y(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Y(0,["SSS",3],0,"millisecond"),Y(0,["SSSS",4],0,function(){return 10*this.millisecond()}),Y(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),Y(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),Y(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),Y(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),Y(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),N("millisecond",16),lt("S",K,W),lt("SS",K,V),lt("SSS",K,G),sn="SSSS";sn.length<=9;sn+="S")lt(sn,nt);function cn(t,e){e[bt]=S(1e3*("0."+t))}for(sn="S";sn.length<=9;sn+="S")dt(sn,cn);var un=Tt("Milliseconds",!1);Y("z",0,0,"zoneAbbr"),Y("zz",0,0,"zoneName");var dn=_.prototype;function hn(t){return t}dn.add=Ge,dn.calendar=function(t,e){var n=t||Te(),i=Be(n,this).startOf("day"),r=y.calendarFormat(this,i)||"sameElse",o=e&&(M(e[r])?e[r].call(this,n):e[r]);return this.format(o||this.localeData().calendar(r,this,Te(n)))},dn.clone=function(){return new _(this)},dn.diff=function(t,e,n){var i,r,o;if(!this.isValid())return NaN;if(!(i=Be(t,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),e=I(e)){case"year":o=Xe(this,i)/12;break;case"month":o=Xe(this,i);break;case"quarter":o=Xe(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:x(o)},dn.endOf=function(t){var e;if(void 0===(t=I(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?en:tn;switch(t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-Ke(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-Ke(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-Ke(e,1e3)-1}return this._d.setTime(e),y.updateOffset(this,!0),this},dn.format=function(t){t=t||(this.isUtc()?y.defaultFormatUtc:y.defaultFormat);var e=q(this,t);return this.localeData().postformat(e)},dn.from=function(t,e){return this.isValid()&&(k(t)&&t.isValid()||Te(t).isValid())?Ye({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},dn.fromNow=function(t){return this.from(Te(),t)},dn.to=function(t,e){return this.isValid()&&(k(t)&&t.isValid()||Te(t).isValid())?Ye({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},dn.toNow=function(t){return this.to(Te(),t)},dn.get=function(t){return M(this[t=I(t)])?this[t]():this},dn.invalidAt=function(){return w(this).overflow},dn.isAfter=function(t,e){var n=k(t)?t:Te(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=I(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},dn.isBefore=function(t,e){var n=k(t)?t:Te(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=I(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},dn.isBetween=function(t,e,n,i){var r=k(t)?t:Te(t),o=k(e)?e:Te(e);return!!(this.isValid()&&r.isValid()&&o.isValid())&&("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(o,n):!this.isAfter(o,n))},dn.isSame=function(t,e){var n,i=k(t)?t:Te(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=I(e)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},dn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},dn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},dn.isValid=function(){return v(this)},dn.lang=$e,dn.locale=Ze,dn.localeData=Qe,dn.max=Me,dn.min=Oe,dn.parsingFlags=function(){return f({},w(this))},dn.set=function(t,e){if("object"==typeof t)for(var n=function(t){var e=[];for(var n in t)e.push({unit:n,priority:j[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}(t=P(t)),i=0;i<n.length;i++)this[n[i].unit](t[n[i].unit]);else if(M(this[t=I(t)]))return this[t](e);return this},dn.startOf=function(t){var e;if(void 0===(t=I(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?en:tn;switch(t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Ke(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=Ke(e,6e4);break;case"second":e=this._d.valueOf(),e-=Ke(e,1e3)}return this._d.setTime(e),y.updateOffset(this,!0),this},dn.subtract=Je,dn.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},dn.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},dn.toDate=function(){return new Date(this.valueOf())},dn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||9999<n.year()?q(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):M(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",q(n,"Z")):q(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},dn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r=e+'[")]';return this.format(n+i+"-MM-DD[T]HH:mm:ss.SSS"+r)},dn.toJSON=function(){return this.isValid()?this.toISOString():null},dn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},dn.unix=function(){return Math.floor(this.valueOf()/1e3)},dn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},dn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},dn.year=Et,dn.isLeapYear=function(){return xt(this.year())},dn.weekYear=function(t){return rn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},dn.isoWeekYear=function(t){return rn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},dn.quarter=dn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},dn.month=Pt,dn.daysInMonth=function(){return Dt(this.year(),this.month())},dn.week=dn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},dn.isoWeek=dn.isoWeeks=function(t){var e=zt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},dn.weeksInYear=function(){var t=this.localeData()._week;return Yt(this.year(),t.dow,t.doy)},dn.isoWeeksInYear=function(){return Yt(this.year(),1,4)},dn.date=on,dn.day=dn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e,n,i=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(e=t,n=this.localeData(),t="string"!=typeof e?e:isNaN(e)?"number"==typeof(e=n.weekdaysParse(e))?e:null:parseInt(e,10),this.add(t-i,"d")):i},dn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},dn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null==t)return this.day()||7;var e,n,i=(e=t,n=this.localeData(),"string"==typeof e?n.weekdaysParse(e)%7||7:isNaN(e)?null:e);return this.day(this.day()%7?i:i-7)},dn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},dn.hour=dn.hours=ee,dn.minute=dn.minutes=an,dn.second=dn.seconds=ln,dn.millisecond=dn.milliseconds=un,dn.utcOffset=function(t,e,n){var i,r=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null==t)return this._isUTC?r:Fe(this);if("string"==typeof t){if(null===(t=Ne(ot,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=Fe(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==t&&(!e||this._changeInProgress?Ve(this,Ye(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,y.updateOffset(this,!0),this._changeInProgress=null)),this},dn.utc=function(t){return this.utcOffset(0,t)},dn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Fe(this),"m")),this},dn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Ne(rt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},dn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Te(t).utcOffset():0,(this.utcOffset()-t)%60==0)},dn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},dn.isLocal=function(){return!!this.isValid()&&!this._isUTC},dn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},dn.isUtc=Re,dn.isUTC=Re,dn.zoneAbbr=function(){return this._isUTC?"UTC":""},dn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},dn.dates=n("dates accessor is deprecated. Use date instead.",on),dn.months=n("months accessor is deprecated. Use month instead",Pt),dn.years=n("years accessor is deprecated. Use year instead",Et),dn.zone=n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),dn.isDSTShifted=n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!c(this._isDSTShifted))return this._isDSTShifted;var t={};if(g(t,this),(t=Se(t))._a){var e=t._isUTC?p(t._a):Te(t._a);this._isDSTShifted=this.isValid()&&0<a(t._a,e.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var fn=C.prototype;function pn(t,e,n,i){var r=ce(),o=p().set(i,e);return r[n](o,t)}function vn(t,e,n){if(u(t)&&(e=t,t=void 0),t=t||"",null!=e)return pn(t,e,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=pn(t,i,n,"month");return r}function mn(t,e,n,i){e=("boolean"==typeof t||(n=e=t,t=!1),u(e)&&(n=e,e=void 0),e||"");var r,o=ce(),a=t?o._week.dow:0;if(null!=n)return pn(e,(n+a)%7,i,"day");var s=[];for(r=0;r<7;r++)s[r]=pn(e,(r+a)%7,i,"day");return s}fn.calendar=function(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return M(i)?i.call(e,n):i},fn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])},fn.invalidDate=function(){return this._invalidDate},fn.ordinal=function(t){return this._ordinal.replace("%d",t)},fn.preparse=hn,fn.postformat=hn,fn.relativeTime=function(t,e,n,i){var r=this._relativeTime[n];return M(r)?r(t,e,n,i):r.replace(/%d/i,t)},fn.pastFuture=function(t,e){var n=this._relativeTime[0<t?"future":"past"];return M(n)?n(e):n.replace(/%s/i,e)},fn.set=function(t){var e,n;for(n in t)M(e=t[n])?this[n]=e:this["_"+n]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},fn.months=function(t,e){return t?s(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Ct).test(e)?"format":"standalone"][t.month()]:s(this._months)?this._months:this._months.standalone},fn.monthsShort=function(t,e){return t?s(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Ct.test(e)?"format":"standalone"][t.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},fn.monthsParse=function(t,e,n){var i,r,o;if(this._monthsParseExact)return function(t,e,n){var i,r,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=p([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(r=St.call(this._shortMonthsParse,a))?r:null:-1!==(r=St.call(this._longMonthsParse,a))?r:null:"MMM"===e?-1!==(r=St.call(this._shortMonthsParse,a))?r:-1!==(r=St.call(this._longMonthsParse,a))?r:null:-1!==(r=St.call(this._longMonthsParse,a))?r:-1!==(r=St.call(this._shortMonthsParse,a))?r:null}.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=p([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}},fn.monthsRegex=function(t){return this._monthsParseExact?(b(this,"_monthsRegex")||Bt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(b(this,"_monthsRegex")||(this._monthsRegex=Nt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},fn.monthsShortRegex=function(t){return this._monthsParseExact?(b(this,"_monthsRegex")||Bt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(b(this,"_monthsShortRegex")||(this._monthsShortRegex=jt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},fn.week=function(t){return zt(t,this._week.dow,this._week.doy).week},fn.firstDayOfYear=function(){return this._week.doy},fn.firstDayOfWeek=function(){return this._week.dow},fn.weekdays=function(t,e){var n=s(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?qt(n,this._week.dow):t?n[t.day()]:n},fn.weekdaysMin=function(t){return!0===t?qt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},fn.weekdaysShort=function(t){return!0===t?qt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},fn.weekdaysParse=function(t,e,n){var i,r,o;if(this._weekdaysParseExact)return function(t,e,n){var i,r,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=p([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(r=St.call(this._weekdaysParse,a))?r:null:"ddd"===e?-1!==(r=St.call(this._shortWeekdaysParse,a))?r:null:-1!==(r=St.call(this._minWeekdaysParse,a))?r:null:"dddd"===e?-1!==(r=St.call(this._weekdaysParse,a))?r:-1!==(r=St.call(this._shortWeekdaysParse,a))?r:-1!==(r=St.call(this._minWeekdaysParse,a))?r:null:"ddd"===e?-1!==(r=St.call(this._shortWeekdaysParse,a))?r:-1!==(r=St.call(this._weekdaysParse,a))?r:-1!==(r=St.call(this._minWeekdaysParse,a))?r:null:-1!==(r=St.call(this._minWeekdaysParse,a))?r:-1!==(r=St.call(this._weekdaysParse,a))?r:-1!==(r=St.call(this._shortWeekdaysParse,a))?r:null}.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=p([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}},fn.weekdaysRegex=function(t){return this._weekdaysParseExact?(b(this,"_weekdaysRegex")||Zt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(b(this,"_weekdaysRegex")||(this._weekdaysRegex=Gt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},fn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(b(this,"_weekdaysRegex")||Zt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(b(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Jt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},fn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(b(this,"_weekdaysRegex")||Zt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(b(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Xt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},fn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},fn.meridiem=function(t,e,n){return 11<t?n?"pm":"PM":n?"am":"AM"},se("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===S(t%100/10)?"th":1==e?"st":2==e?"nd":3==e?"rd":"th")}}),y.lang=n("moment.lang is deprecated. Use moment.locale instead.",se),y.langData=n("moment.langData is deprecated. Use moment.localeData instead.",ce);var gn=Math.abs;function yn(t,e,n,i){var r=Ye(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function bn(t){return t<0?Math.floor(t):Math.ceil(t)}function wn(t){return 4800*t/146097}function _n(t){return 146097*t/4800}function kn(t){return function(){return this.as(t)}}var xn=kn("ms"),Sn=kn("s"),En=kn("m"),Tn=kn("h"),On=kn("d"),Mn=kn("w"),Dn=kn("M"),Cn=kn("Q"),Ln=kn("y");function An(t){return function(){return this.isValid()?this._data[t]:NaN}}var In=An("milliseconds"),Pn=An("seconds"),jn=An("minutes"),Nn=An("hours"),Bn=An("days"),Fn=An("months"),Rn=An("years"),Hn=Math.round,zn={ss:44,s:45,m:45,h:22,d:26,M:11};var Yn=Math.abs;function qn(t){return(0<t)-(t<0)||+t}function Un(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n=Yn(this._milliseconds)/1e3,i=Yn(this._days),r=Yn(this._months);t=x(n/60),e=x(t/60),n%=60,t%=60;var o=x(r/12),a=r%=12,s=i,l=e,c=t,u=n?n.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var h=d<0?"-":"",f=qn(this._months)!==qn(d)?"-":"",p=qn(this._days)!==qn(d)?"-":"",v=qn(this._milliseconds)!==qn(d)?"-":"";return h+"P"+(o?f+o+"Y":"")+(a?f+a+"M":"")+(s?p+s+"D":"")+(l||c||u?"T":"")+(l?v+l+"H":"")+(c?v+c+"M":"")+(u?v+u+"S":"")}var Wn=Le.prototype;return Wn.isValid=function(){return this._isValid},Wn.abs=function(){var t=this._data;return this._milliseconds=gn(this._milliseconds),this._days=gn(this._days),this._months=gn(this._months),t.milliseconds=gn(t.milliseconds),t.seconds=gn(t.seconds),t.minutes=gn(t.minutes),t.hours=gn(t.hours),t.months=gn(t.months),t.years=gn(t.years),this},Wn.add=function(t,e){return yn(this,t,e,1)},Wn.subtract=function(t,e){return yn(this,t,e,-1)},Wn.as=function(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if("month"===(t=I(t))||"quarter"===t||"year"===t)switch(e=this._days+i/864e5,n=this._months+wn(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(_n(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}},Wn.asMilliseconds=xn,Wn.asSeconds=Sn,Wn.asMinutes=En,Wn.asHours=Tn,Wn.asDays=On,Wn.asWeeks=Mn,Wn.asMonths=Dn,Wn.asQuarters=Cn,Wn.asYears=Ln,Wn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*S(this._months/12):NaN},Wn._bubble=function(){var t,e,n,i,r,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return 0<=o&&0<=a&&0<=s||o<=0&&a<=0&&s<=0||(o+=864e5*bn(_n(s)+a),s=a=0),l.milliseconds=o%1e3,t=x(o/1e3),l.seconds=t%60,e=x(t/60),l.minutes=e%60,n=x(e/60),l.hours=n%24,a+=x(n/24),s+=r=x(wn(a)),a-=bn(_n(r)),i=x(s/12),s%=12,l.days=a,l.months=s,l.years=i,this},Wn.clone=function(){return Ye(this)},Wn.get=function(t){return t=I(t),this.isValid()?this[t+"s"]():NaN},Wn.milliseconds=In,Wn.seconds=Pn,Wn.minutes=jn,Wn.hours=Nn,Wn.days=Bn,Wn.weeks=function(){return x(this.days()/7)},Wn.months=Fn,Wn.years=Rn,Wn.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e,n,i,r,o,a,s,l,c,u,d,h=this.localeData(),f=(n=!t,i=h,r=Ye(e=this).abs(),o=Hn(r.as("s")),a=Hn(r.as("m")),s=Hn(r.as("h")),l=Hn(r.as("d")),c=Hn(r.as("M")),u=Hn(r.as("y")),(d=o<=zn.ss&&["s",o]||o<zn.s&&["ss",o]||a<=1&&["m"]||a<zn.m&&["mm",a]||s<=1&&["h"]||s<zn.h&&["hh",s]||l<=1&&["d"]||l<zn.d&&["dd",l]||c<=1&&["M"]||c<zn.M&&["MM",c]||u<=1&&["y"]||["yy",u])[2]=n,d[3]=0<+e,d[4]=i,function(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}.apply(null,d));return t&&(f=h.pastFuture(+this,f)),h.postformat(f)},Wn.toISOString=Un,Wn.toString=Un,Wn.toJSON=Un,Wn.locale=Ze,Wn.localeData=Qe,Wn.toIsoString=n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Un),Wn.lang=$e,Y("X",0,0,"unix"),Y("x",0,0,"valueOf"),lt("x",it),lt("X",/[+-]?\d+(\.\d{1,3})?/),dt("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),dt("x",function(t,e,n){n._d=new Date(S(t))}),y.version="2.24.0",t=Te,y.fn=dn,y.min=function(){return De("isBefore",[].slice.call(arguments,0))},y.max=function(){return De("isAfter",[].slice.call(arguments,0))},y.now=function(){return Date.now?Date.now():+new Date},y.utc=p,y.unix=function(t){return Te(1e3*t)},y.months=function(t,e){return vn(t,e,"months")},y.isDate=d,y.locale=se,y.invalid=m,y.duration=Ye,y.isMoment=k,y.weekdays=function(t,e,n){return mn(t,e,n,"weekdays")},y.parseZone=function(){return Te.apply(null,arguments).parseZone()},y.localeData=ce,y.isDuration=Ae,y.monthsShort=function(t,e){return vn(t,e,"monthsShort")},y.weekdaysMin=function(t,e,n){return mn(t,e,n,"weekdaysMin")},y.defineLocale=le,y.updateLocale=function(t,e){if(null!=e){var n,i,r=ne;null!=(i=ae(t))&&(r=i._config),(n=new C(e=D(r,e))).parentLocale=ie[t],ie[t]=n,se(t)}else null!=ie[t]&&(null!=ie[t].parentLocale?ie[t]=ie[t].parentLocale:null!=ie[t]&&delete ie[t]);return ie[t]},y.locales=function(){return i(ie)},y.weekdaysShort=function(t,e,n){return mn(t,e,n,"weekdaysShort")},y.normalizeUnits=I,y.relativeTimeRounding=function(t){return void 0===t?Hn:"function"==typeof t&&(Hn=t,!0)},y.relativeTimeThreshold=function(t,e){return void 0!==zn[t]&&(void 0===e?zn[t]:(zn[t]=e,"s"===t&&(zn.ss=e-1),!0))},y.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},y.prototype=dn,y.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},y}()}),oS=/^\/?Date\((-?\d+)/i;function aS(t){return rS.isMoment(t)}function sS(t,e){var n;if(void 0!==t){if(null===t)return null;if(!e)return t;if("string"!=typeof e&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return Boolean(t);case"number":case"Number":return tS(t)&&!isNaN(Date.parse(t))?rS(t).valueOf():Number(t.valueOf());case"string":case"String":return String(t);case"Date":if(Kx(t))return new Date(t);if(t instanceof Date)return new Date(t.valueOf());if(aS(t))return new Date(t.valueOf());if(tS(t))return(n=oS.exec(t))?new Date(Number(n[1])):rS(new Date(t)).toDate();throw new Error("Cannot convert object of type "+iS(t)+" to type Date");case"Moment":if(Kx(t))return rS(t);if(t instanceof Date)return rS(t.valueOf());if(aS(t))return rS(t);if(tS(t))return n=oS.exec(t),rS(n?Number(n[1]):t);throw new Error("Cannot convert object of type "+iS(t)+" to type Date");case"ISODate":if(Kx(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(aS(t))return t.toDate().toISOString();if(tS(t))return(n=oS.exec(t))?new Date(Number(n[1])).toISOString():rS(t).format();throw new Error("Cannot convert object of type "+iS(t)+" to type ISODate");case"ASPDate":if(Kx(t))return"/Date("+t+")/";if(t instanceof Date||aS(t))return"/Date("+t.valueOf()+")/";if(tS(t))return"/Date("+((n=oS.exec(t))?new Date(Number(n[1])).valueOf():new Date(t).valueOf())+")/";throw new Error("Cannot convert object of type "+iS(t)+" to type ASPDate");default:throw new Error("Unknown type ".concat(e))}}}function lS(t){return"string"==typeof t||"number"==typeof t}var cS=ny("splice"),uS=Rv("splice",{ACCESSORS:!0,0:0,1:2}),dS=Math.max,hS=Math.min;_f({target:"Array",proto:!0,forced:!cS||!uS},{splice:function(t,e){var n,i,r,o,a,s,l=zp(this),c=Jf(l.length),u=Xf(t,c),d=arguments.length;if(0===d?n=i=0:i=1===d?(n=0,c-u):(n=d-2,hS(dS(Gf(e),0),c-u)),9007199254740991<c+n-i)throw TypeError("Maximum allowed length exceeded");for(r=jv(l,i),o=0;o<i;o++)(a=u+o)in l&&fp(r,o,l[a]);if(n<(r.length=i)){for(o=u;o<c-i;o++)s=o+n,(a=o+i)in l?l[s]=l[a]:delete l[s];for(o=c;c-i+n<o;o--)delete l[o-1]}else if(i<n)for(o=c-i;u<o;o--)s=o+n-1,(a=o+i-1)in l?l[s]=l[a]:delete l[s];for(o=0;o<n;o++)l[o+u]=arguments[o+2];return l.length=c-i+n,r}});function fS(r){return function(t,e){var n=2<arguments.length,i=n?mS.call(arguments,2):void 0;return r(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,e)}}var pS=Xv("Array").splice,vS=Array.prototype,mS=[].slice,gS=/MSIE .\./.test(Qg);_f({global:!0,bind:!0,forced:gS},{setTimeout:fS(kf.setTimeout),setInterval:fS(kf.setInterval)});var yS=Yf.setTimeout,bS=(ob(SS,[{key:"setOptions",value:function(t){t&&void 0!==t.delay&&(this.delay=t.delay),t&&void 0!==t.max&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,e=this._extended.methods,n=0;n<e.length;n++){var i=e[n];i.original?t[i.name]=i.original:delete t[i.name]}this._extended=null}}},{key:"replace",value:function(t,e){var i=this,r=t[e];if(!r)throw new Error("Method "+e+" undefined");t[e]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.queue({args:e,fn:r,context:this})}}},{key:"queue",value:function(t){"function"==typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null),0<this.queue.length&&"number"==typeof this.delay&&(this._timeout=yS(function(){t.flush()},this.delay))}},{key:"flush",value:function(){var t,e;Zv(t=function(t){var e=t.splice;return t===vS||t instanceof Array&&e===vS.splice?pS:e}(e=this._queue).call(e,0)).call(t,function(t){t.fn.apply(t.context||t.fn,t.args||[])})}}],[{key:"extend",value:function(t,e){var n=new SS(e);if(void 0!==t.flush)throw new Error("Target object already has a property flush");t.flush=function(){n.flush()};var i=[{name:"flush",original:void 0}];if(e&&e.replace)for(var r=0;r<e.replace.length;r++){var o=e.replace[r];i.push({name:o,original:t[o]}),n.replace(t,o)}return n._extended={object:t,methods:i},n}}]),SS),wS=(ob(xS,[{key:"_trigger",value:function(e,n,i){var t,r;if("*"===e)throw new Error("Cannot trigger event *");Zv(t=vy(r=[]).call(r,Gg(this._subscribers[e]),Gg(this._subscribers["*"]))).call(t,function(t){t(e,n,null!=i?i:null)})}},{key:"on",value:function(t,e){"function"==typeof e&&this._subscribers[t].push(e)}},{key:"off",value:function(t,e){var n;this._subscribers[t]=dy(n=this._subscribers[t]).call(n,function(t){return t!==e})}}]),xS),_S=(Ry("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},eb),Yf.Set),kS=fb;function xS(){zy(this,xS),this._subscribers={"*":[],add:[],remove:[],update:[]},this.subscribe=xS.prototype.on,this.unsubscribe=xS.prototype.off}function SS(t){zy(this,SS),this._queue=[],this._timeout=null,this._extended=null,this.delay=null,this.max=1/0,this.setOptions(t)}function ES(t,e){return function(t){if(Fg(t))return t}(t)||function(t,e){if(Vg(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=dg(t);!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var TS=(ob(OS,[{key:ng,value:Xm.mark(function t(){var e,n,i,r,o,a,s,l;return Xm.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=!(e=!0),i=void 0,t.prev=3,r=dg(this._pairs);case 5:if(e=(o=r.next()).done){t.next=12;break}return a=ES(o.value,2),s=a[0],l=a[1],t.next=9,[s,l];case 9:e=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),n=!0,i=t.t0;case 18:t.prev=18,t.prev=19,e||null==r.return||r.return();case 21:if(t.prev=21,n)throw i;t.next=24;break;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},t,this,[[3,14,18,26],[19,,21,25]])})},{key:"entries",value:Xm.mark(function t(){var e,n,i,r,o,a,s,l;return Xm.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=!(e=!0),i=void 0,t.prev=3,r=dg(this._pairs);case 5:if(e=(o=r.next()).done){t.next=12;break}return a=ES(o.value,2),s=a[0],l=a[1],t.next=9,[s,l];case 9:e=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),n=!0,i=t.t0;case 18:t.prev=18,t.prev=19,e||null==r.return||r.return();case 21:if(t.prev=21,n)throw i;t.next=24;break;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},t,this,[[3,14,18,26],[19,,21,25]])})},{key:"keys",value:Xm.mark(function t(){var e,n,i,r,o,a,s;return Xm.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=!(e=!0),i=void 0,t.prev=3,r=dg(this._pairs);case 5:if(e=(o=r.next()).done){t.next=12;break}return a=ES(o.value,1),s=a[0],t.next=9,s;case 9:e=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),n=!0,i=t.t0;case 18:t.prev=18,t.prev=19,e||null==r.return||r.return();case 21:if(t.prev=21,n)throw i;t.next=24;break;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},t,this,[[3,14,18,26],[19,,21,25]])})},{key:"values",value:Xm.mark(function t(){var e,n,i,r,o,a,s;return Xm.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=!(e=!0),i=void 0,t.prev=3,r=dg(this._pairs);case 5:if(e=(o=r.next()).done){t.next=12;break}return a=ES(o.value,2),s=a[1],t.next=9,s;case 9:e=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),n=!0,i=t.t0;case 18:t.prev=18,t.prev=19,e||null==r.return||r.return();case 21:if(t.prev=21,n)throw i;t.next=24;break;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},t,this,[[3,14,18,26],[19,,21,25]])})},{key:"toIdArray",value:function(){var t;return Cy(t=Gg(this._pairs)).call(t,function(t){return t[0]})}},{key:"toItemArray",value:function(){var t;return Cy(t=Gg(this._pairs)).call(t,function(t){return t[1]})}},{key:"toEntryArray",value:function(){return Gg(this._pairs)}},{key:"toObjectMap",value:function(){var t=kS(null),e=!0,n=!1,i=void 0;try{for(var r,o=dg(this._pairs);!(e=(r=o.next()).done);e=!0){var a=ES(r.value,2),s=a[0],l=a[1];t[s]=l}}catch(t){n=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw i}}return t}},{key:"toMap",value:function(){return new nb(this._pairs)}},{key:"toIdSet",value:function(){return new _S(this.toIdArray())}},{key:"toItemSet",value:function(){return new _S(this.toItemArray())}},{key:"cache",value:function(){return new OS(Gg(this._pairs))}},{key:"distinct",value:function(t){var e=new _S,n=!0,i=!1,r=void 0;try{for(var o,a=dg(this._pairs);!(n=(o=a.next()).done);n=!0){var s=ES(o.value,2),l=s[0],c=s[1];e.add(t(c,l))}}catch(t){i=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return e}},{key:"filter",value:function(c){var u=this._pairs;return new OS(lg({},ng,Xm.mark(function t(){var e,n,i,r,o,a,s,l;return Xm.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=!(e=!0),i=void 0,t.prev=3,r=dg(u);case 5:if(e=(o=r.next()).done){t.next=13;break}if(a=ES(o.value,2),s=a[0],l=a[1],c(l,s))return t.next=10,[s,l];t.next=10;break;case 10:e=!0,t.next=5;break;case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(3),n=!0,i=t.t0;case 19:t.prev=19,t.prev=20,e||null==r.return||r.return();case 22:if(t.prev=22,n)throw i;t.next=25;break;case 25:return t.finish(22);case 26:return t.finish(19);case 27:case"end":return t.stop()}},t,null,[[3,15,19,27],[20,,22,26]])})))}},{key:"forEach",value:function(t){var e=!0,n=!1,i=void 0;try{for(var r,o=dg(this._pairs);!(e=(r=o.next()).done);e=!0){var a=ES(r.value,2),s=a[0];t(a[1],s)}}catch(t){n=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw i}}}},{key:"map",value:function(c){var u=this._pairs;return new OS(lg({},ng,Xm.mark(function t(){var e,n,i,r,o,a,s,l;return Xm.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=!(e=!0),i=void 0,t.prev=3,r=dg(u);case 5:if(e=(o=r.next()).done){t.next=12;break}return a=ES(o.value,2),s=a[0],l=a[1],t.next=9,[s,c(l,s)];case 9:e=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),n=!0,i=t.t0;case 18:t.prev=18,t.prev=19,e||null==r.return||r.return();case 21:if(t.prev=21,n)throw i;t.next=24;break;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},t,null,[[3,14,18,26],[19,,21,25]])})))}},{key:"max",value:function(t){var e=dg(this._pairs),n=e.next();if(n.done)return null;for(var i=n.value[1],r=t(n.value[1],n.value[0]);!(n=e.next()).done;){var o=ES(n.value,2),a=o[0],s=o[1],l=t(s,a);r<l&&(r=l,i=s)}return i}},{key:"min",value:function(t){var e=dg(this._pairs),n=e.next();if(n.done)return null;for(var i=n.value[1],r=t(n.value[1],n.value[0]);!(n=e.next()).done;){var o=ES(n.value,2),a=o[0],s=o[1],l=t(s,a);l<r&&(r=l,i=s)}return i}},{key:"reduce",value:function(t,e){var n=!0,i=!1,r=void 0;try{for(var o,a=dg(this._pairs);!(n=(o=a.next()).done);n=!0){var s=ES(o.value,2),l=s[0];e=t(e,s[1],l)}}catch(t){i=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return e}},{key:"sort",value:function(l){var e=this;return new OS(lg({},ng,function(){var t;return dg(kg(t=Gg(e._pairs)).call(t,function(t,e){var n=ES(t,2),i=n[0],r=n[1],o=ES(e,2),a=o[0],s=o[1];return l(r,s,i,a)}))}))}}]),OS);function OS(t){zy(this,OS),this._pairs=t}function MS(e,t){var n=Yy(e);if(Rm){var i=Rm(e);t&&(i=dy(i).call(i,function(t){return sm(e,t).enumerable})),n.push.apply(n,i)}return n}function DS(){console.warn("Type coercion has been deprecated. Please, use data pipes instead. See https://visjs.github.io/vis-data/data/datapipe.html#TypeCoercion for more details with working migration example.")}var CS=(mb(NS,wS),ob(NS,[{key:"setOptions",value:function(t){t&&void 0!==t.queue&&(!1===t.queue?this._queue&&(this._queue.destroy(),delete this._queue):(this._queue||(this._queue=bS.extend(this,{replace:["add","update","remove"]})),t.queue&&"object"===Ny(t.queue)&&this._queue.setOptions(t.queue)))}},{key:"add",value:function(t,e){var n,i=this,r=[];if(ib(t)){var o=Cy(t).call(t,function(t){return t[i._idProp]});if(function(t){var e=t.some;return t===Ty||t instanceof Array&&e===Ty.some?Ey:e}(o).call(o,function(t){return i._data.has(t)}))throw new Error("A duplicate id was found in the parameter array.");for(var a=0,s=t.length;a<s;a++)n=this._addItem(t[a]),r.push(n)}else{if(!t||"object"!==Ny(t))throw new Error("Unknown dataType");n=this._addItem(t),r.push(n)}return r.length&&this._trigger("add",{items:r},e),r}},{key:"update",value:function(t,e){function n(t){var e=t[d];if(null!=e&&a._data.has(e)){var n=t,i=_y({},a._data.get(e)),r=a._updateItem(n);l.push(r),u.push(n),c.push(i)}else{var o=a._addItem(t);s.push(o)}}var a=this,s=[],l=[],c=[],u=[],d=this._idProp;if(ib(t))for(var i=0,r=t.length;i<r;i++)t[i]&&"object"===Ny(t[i])?n(t[i]):console.warn("Ignoring input item, which is not an object at index "+i);else{if(!t||"object"!==Ny(t))throw new Error("Unknown dataType");n(t)}if(s.length&&this._trigger("add",{items:s},e),l.length){var o={items:l,oldData:c,data:u};this._trigger("update",o,e)}return vy(s).call(s,l)}},{key:"updateOnly",value:function(t,e){var n,o=this;ib(t)||(t=[t]);var i=Cy(n=Cy(t).call(t,function(t){var e=o._data.get(t[o._idProp]);if(null==e)throw new Error("Updating non-existent items is not allowed.");return{oldData:e,update:t}})).call(n,function(t){var e=t.oldData,n=t.update,i=e[o._idProp],r=nS(nS({},e),n);return o._data.set(i,r),{id:i,oldData:e,updatedData:r}});if(i.length){var r={items:Cy(i).call(i,function(t){return t.id}),oldData:Cy(i).call(i,function(t){return t.oldData}),data:Cy(i).call(i,function(t){return t.updatedData})};return this._trigger("update",r,e),r.items}return[]}},{key:"get",value:function(t,e){var n=void 0,i=void 0,r=void 0,o=(r=lS(t)?(n=t,e):ib(t)?(i=t,e):t)&&"Object"===r.returnType?"Object":"Array",a=r&&r.type||this._options.type,s=r&&dy(r),l=[],c=null,u=null,d=null;if(null!=n)(c=this._getItem(n,a))&&s&&!s(c)&&(c=null);else if(null!=i)for(var h=0,f=i.length;h<f;h++)null==(c=this._getItem(i[h],a))||s&&!s(c)||l.push(c);else for(var p,v=0,m=(u=Gg(Dg(p=this._data).call(p))).length;v<m;v++)d=u[v],null==(c=this._getItem(d,a))||s&&!s(c)||l.push(c);if(r&&r.order&&null==n&&this._sort(l,r.order),r&&r.fields){var g=r.fields;if(null!=n&&null!=c)c=this._filterFields(c,g);else for(var y=0,b=l.length;y<b;y++)l[y]=this._filterFields(l[y],g)}if("Object"!=o)return null!=n?c:l;for(var w={},_=0,k=l.length;_<k;_++){var x=l[_];w[x[this._idProp]]=x}return w}},{key:"getIds",value:function(t){var e,n,i=this._data,r=t&&dy(t),o=t&&t.order,a=t&&t.type||this._options.type,s=Gg(Dg(i).call(i)),l=[];if(r)if(o){n=[];for(var c=0,u=s.length;c<u;c++){var d=s[c];r(e=this._getItem(d,a))&&n.push(e)}this._sort(n,o);for(var h=0,f=n.length;h<f;h++)l.push(n[h][this._idProp])}else for(var p=0,v=s.length;p<v;p++){var m=s[p];r(e=this._getItem(m,a))&&l.push(e[this._idProp])}else if(o){n=[];for(var g=0,y=s.length;g<y;g++){var b=s[g];n.push(i.get(b))}this._sort(n,o);for(var w=0,_=n.length;w<_;w++)l.push(n[w][this._idProp])}else for(var k=0,x=s.length;k<x;k++){var S=s[k];e=i.get(S),l.push(e[this._idProp])}return l}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(t,e){var n=e&&dy(e),i=e&&e.type||this._options.type,r=this._data,o=Gg(Dg(r).call(r));if(e&&e.order)for(var a=this.get(e),s=0,l=a.length;s<l;s++){var c=a[s];t(c,c[this._idProp])}else for(var u=0,d=o.length;u<d;u++){var h=o[u],f=this._getItem(h,i);n&&!n(f)||t(f,h)}}},{key:"map",value:function(t,e){for(var n=e&&dy(e),i=e&&e.type||this._options.type,r=[],o=this._data,a=Gg(Dg(o).call(o)),s=0,l=a.length;s<l;s++){var c=a[s],u=this._getItem(c,i);n&&!n(u)||r.push(t(u,c))}return e&&e.order&&this._sort(r,e.order),r}},{key:"_filterFields",value:function(n,t){var e;return n?function(t){var e=t.reduce;return t===Lg||t instanceof Array&&e===Lg.reduce?Cg:e}(e=ib(t)?t:Yy(t)).call(e,function(t,e){return t[e]=n[e],t},{}):n}},{key:"_sort",value:function(t,e){if("string"==typeof e){var r=e;kg(t).call(t,function(t,e){var n=t[r],i=e[r];return i<n?1:n<i?-1:0})}else{if("function"!=typeof e)throw new TypeError("Order must be a function or a string");kg(t).call(t,e)}}},{key:"remove",value:function(t,e){for(var n=[],i=[],r=ib(t)?t:[t],o=0,a=r.length;o<a;o++){var s=this._remove(r[o]);if(s){var l=s[this._idProp];null!=l&&(n.push(l),i.push(s))}}return n.length&&this._trigger("remove",{items:n,oldData:i},e),n}},{key:"_remove",value:function(t){var e;if(lS(t)?e=t:t&&"object"===Ny(t)&&(e=t[this._idProp]),null!=e&&this._data.has(e)){var n=this._data.get(e)||null;return this._data.delete(e),--this.length,n}return null}},{key:"clear",value:function(t){for(var e,n=Gg(Dg(e=this._data).call(e)),i=[],r=0,o=n.length;r<o;r++)i.push(this._data.get(n[r]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:i},t),n}},{key:"max",value:function(t){var e=null,n=null,i=!0,r=!1,o=void 0;try{for(var a,s=dg(cg(l=this._data).call(l));!(i=(a=s.next()).done);i=!0){var l,c=a.value,u=c[t];"number"==typeof u&&(null==n||n<u)&&(e=c,n=u)}}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return e||null}},{key:"min",value:function(t){var e=null,n=null,i=!0,r=!1,o=void 0;try{for(var a,s=dg(cg(l=this._data).call(l));!(i=(a=s.next()).done);i=!0){var l,c=a.value,u=c[t];"number"==typeof u&&(null==n||u<n)&&(e=c,n=u)}}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return e||null}},{key:"distinct",value:function(t){for(var e=this._data,n=Gg(Dg(e).call(e)),i=[],r=this._options.type&&this._options.type[t]||null,o=0,a=0,s=n.length;a<s;a++){for(var l=n[a],c=e.get(l)[t],u=!1,d=0;d<o;d++)if(i[d]==c){u=!0;break}u||void 0===c||(i[o]=c,o++)}if(r)for(var h=0,f=i.length;h<f;h++)i[h]=sS(i[h],r);return i}},{key:"_addItem",value:function(t){var e=t[this._idProp];if(null!=e){if(this._data.has(e))throw new Error("Cannot add item: item with id "+e+" already exists")}else e=function(t,e,n){var i=0<arguments.length&&void 0!==t?t:{},r=1<arguments.length?e:void 0,o=r&&(2<arguments.length?n:void 0)||0;"string"==typeof i&&(r="binary"===i?new Array(16):void 0,i={});var a,s,l,c=i.random||(i.rng||bb)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,r)for(var u=0;u<16;u++)r[o+u]=c[u];return r||(s=0,(l=gb)[(a=c)[s++]]+l[a[s++]]+l[a[s++]]+l[a[s++]]+"-"+l[a[s++]]+l[a[s++]]+"-"+l[a[s++]]+l[a[s++]]+"-"+l[a[s++]]+l[a[s++]]+"-"+l[a[s++]]+l[a[s++]]+l[a[s++]]+l[a[s++]]+l[a[s++]]+l[a[s++]])}(),t[this._idProp]=e;for(var n={},i=Yy(t),r=0,o=i.length;r<o;r++){var a=i[r],s=this._type[a];n[a]=sS(t[a],s)}return this._data.set(e,n),++this.length,e}},{key:"_getItem",value:function(t,e){var n,i=this._data.get(t);if(!i)return null;var r=Yy(i);if(e){DS(),n={};for(var o=0,a=r.length;o<a;o++){var s=r[o],l=i[s];n[s]=sS(l,e[s])}}else n=function(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)Zv(n=MS(Object(i),!0)).call(n,function(t){lg(e,t,i[t])});else if(bp)pp(e,bp(i));else{var r;Zv(r=MS(Object(i))).call(r,function(t){Kf(e,t,sm(i,t))})}}return e}({},i);return null==n[this._idProp]&&(n[this._idProp]=i.id),n}},{key:"_updateItem",value:function(t){var e=t[this._idProp];if(null==e)throw new Error("Cannot update item: item has no id (item: "+function(t,e,n){return Yf.JSON.stringify.apply(null,arguments)}(t)+")");var n=this._data.get(e);if(!n)throw new Error("Cannot update item: no item with id "+e+" found");for(var i=Yy(t),r=0,o=i.length;r<o;r++){var a=i[r],s=this._type[a];n[a]=sS(t[a],s)}return e}},{key:"stream",value:function(l){if(l){var c=this._data;return new TS(lg({},ng,Xm.mark(function t(){var e,n,i,r,o,a,s;return Xm.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=!(e=!0),i=void 0,t.prev=3,r=dg(l);case 5:if(e=(o=r.next()).done){t.next=14;break}if(a=o.value,null!=(s=c.get(a)))return t.next=11,[a,s];t.next=11;break;case 11:e=!0,t.next=5;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(3),n=!0,i=t.t0;case 20:t.prev=20,t.prev=21,e||null==r.return||r.return();case 23:if(t.prev=23,n)throw i;t.next=26;break;case 26:return t.finish(23);case 27:return t.finish(20);case 28:case"end":return t.stop()}},t,null,[[3,16,20,28],[21,,23,27]])})))}var t;return new TS(lg({},ng,Vm(t=function(t){var e=t.entries;return t===zm||t instanceof Array&&e===zm.entries||Ym.hasOwnProperty(wv(t))?Hm:e}(this._data)).call(t,this._data)))}}]),NS),LS=(mb(jS,wS),ob(jS,[{key:"setData",value:function(t){if(this._data){this._data.off&&this._data.off("*",this._listener);var e=this._data.getIds({filter:dy(this._options)}),n=this._data.get(e);this._ids.clear(),this.length=0,this._trigger("remove",{items:e,oldData:n})}if(null!=t){this._data=t;for(var i=this._data.getIds({filter:dy(this._options)}),r=0,o=i.length;r<o;r++){var a=i[r];this._ids.add(a)}this.length=i.length,this._trigger("add",{items:i})}else this._data=new CS;this._data.on&&this._data.on("*",this._listener)}},{key:"refresh",value:function(){for(var t=this._data.getIds({filter:dy(this._options)}),e=Gg(this._ids),n={},i=[],r=[],o=[],a=0,s=t.length;a<s;a++){var l=t[a];n[l]=!0,this._ids.has(l)||(i.push(l),this._ids.add(l))}for(var c=0,u=e.length;c<u;c++){var d=e[c],h=this._data.get(d);null==h?console.error("If you see this, report it please."):n[d]||(r.push(d),o.push(h),this._ids.delete(d))}this.length+=i.length-r.length,i.length&&this._trigger("add",{items:i}),r.length&&this._trigger("remove",{items:r,oldData:o})}},{key:"get",value:function(t,e){if(null==this._data)return null;var n,i=null;n=lS(t)||ib(t)?(i=t,e):t;var r=_y({},this._options,n),o=dy(this._options),a=n&&dy(n);return o&&a&&(r.filter=function(t){return o(t)&&a(t)}),null==i?this._data.get(r):this._data.get(i,r)}},{key:"getIds",value:function(t){if(this._data.length){var e,n=dy(this._options),i=null!=t?dy(t):null;return e=i?n?function(t){return n(t)&&i(t)}:i:n,this._data.getIds({filter:e,order:t&&t.order})}return[]}},{key:"forEach",value:function(t,e){if(this._data){var n,i,r=dy(this._options),o=e&&dy(e);i=o?r?function(t){return r(t)&&o(t)}:o:r,Zv(n=this._data).call(n,t,{filter:i,order:e&&e.order})}}},{key:"map",value:function(t,e){if(this._data){var n,i,r=dy(this._options),o=e&&dy(e);return i=o?r?function(t){return r(t)&&o(t)}:o:r,Cy(n=this._data).call(n,t,{filter:i,order:e&&e.order})}return[]}},{key:"getDataSet",value:function(){return this._data.getDataSet()}},{key:"stream",value:function(t){var e;return this._data.stream(t||lg({},ng,Vm(e=Dg(this._ids)).call(e,this._ids)))}},{key:"_onEvent",value:function(t,e,n){if(e&&e.items&&this._data){var i=e.items,r=[],o=[],a=[],s=[],l=[],c=[];switch(t){case"add":for(var u=0,d=i.length;u<d;u++){var h=i[u];this.get(h)&&(this._ids.add(h),r.push(h))}break;case"update":for(var f=0,p=i.length;f<p;f++){var v=i[f];this.get(v)?this._ids.has(v)?(o.push(v),l.push(e.data[f]),s.push(e.oldData[f])):(this._ids.add(v),r.push(v)):this._ids.has(v)&&(this._ids.delete(v),a.push(v),c.push(e.oldData[f]))}break;case"remove":for(var m=0,g=i.length;m<g;m++){var y=i[m];this._ids.has(y)&&(this._ids.delete(y),a.push(y),c.push(e.oldData[m]))}}this.length+=r.length-a.length,r.length&&this._trigger("add",{items:r},n),o.length&&this._trigger("update",{items:o,oldData:s,data:l},n),a.length&&this._trigger("remove",{items:a,oldData:c},n)}}}]),jS),AS={DataSet:CS,DataView:LS,Queue:bS},IS=Object.freeze({__proto__:null,default:AS,DataSet:CS,DataStream:TS,DataView:LS,Queue:bS}),PS=Dh;function jS(t,e){var n,i;return zy(this,jS),(i=sb(this,db(jS).call(this))).length=0,i._ids=new _S,i._options=e||{},i._listener=Vm(n=i._onEvent).call(n,ab(i)),i.setData(t),i}function NS(t,e){var n;if(zy(this,NS),n=sb(this,db(NS).call(this)),t&&!ib(t)&&(e=t,t=[]),n._options=e||{},n._data=new nb,n.length=0,n._idProp=n._options.fieldId||"id",n._type={},n._options.type){DS();for(var i=Yy(n._options.type),r=0,o=i.length;r<o;r++){var a=i[r],s=n._options.type[a];n._type[a]="Date"==s||"ISODate"==s||"ASPDate"==s?"Date":s}}return t&&t.length&&n.add(t),n.setOptions(e),n}k({target:"Object",stat:!0,forced:!f,sham:!f},{defineProperties:Js});var BS=n(function(t){var n=R.Object,e=t.exports=function(t,e){return n.defineProperties(t,e)};n.defineProperties.sham&&(e.sham=!0)}),FS=Vs.concat("length","prototype"),RS={f:Object.getOwnPropertyNames||function(t){return As(t,FS)}},HS={f:Object.getOwnPropertySymbols},zS=Ps("Reflect","ownKeys")||function(t){var e=RS.f(v(t)),n=HS.f;return n?e.concat(n(t)):e};k({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(t){for(var e,n,i=c(t),r=A.f,o=zS(i),a={},s=0;o.length>s;)void 0!==(n=r(i,e=o[s++]))&&zl(a,e,n);return a}});var YS=R.Object.getOwnPropertyDescriptors,qS=A.f,US=d(function(){qS(1)});k({target:"Object",stat:!0,forced:!f||US,sham:!f},{getOwnPropertyDescriptor:function(t,e){return qS(c(t),e)}});var WS=n(function(t){var n=R.Object,e=t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)};n.getOwnPropertyDescriptor.sham&&(e.sham=!0)}),VS=WS,GS=Ll.filter,JS=Zl("filter"),XS=Ol("filter");k({target:"Array",proto:!0,forced:!JS||!XS},{filter:function(t){return GS(this,t,1<arguments.length?arguments[1]:void 0)}});function ZS(t){var e=R.Symbol||(R.Symbol={});g(e,t)||cE(e,t,{value:lE.f(t)})}function $S(t,e){var n=kE[t]=Qs(mE.prototype);return fE(n,{type:"Symbol",tag:t,description:e}),f||(n.description=e),n}function QS(e,t){v(e);var n=c(t),i=Gs(n).concat(IE(n));return uE(i,function(t){f&&!AE.call(n,t)||LE(e,t,n[t])}),e}function KS(t,e){var n=c(t),i=o(e,!0);if(n!==vE||!g(kE,i)||g(xE,i)){var r=yE(n,i);return!r||!g(kE,i)||g(n,dE)&&n[dE][i]||(r.enumerable=!0),r}}function tE(t){var e=wE(c(t)),n=[];return uE(e,function(t){g(kE,t)||g(os,t)||n.push(t)}),n}var eE=G("Array").filter,nE=Array.prototype,iE=function(t){var e=t.filter;return t===nE||t instanceof Array&&e===nE.filter?eE:e},rE=RS.f,oE={}.toString,aE="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],sE={f:function(t){return aE&&"[object Window]"==oE.call(t)?function(t){try{return rE(t)}catch(t){return aE.slice()}}(t):rE(c(t))}},lE={f:fs},cE=z.f,uE=Ll.forEach,dE=Ja("hidden"),hE=fs("toPrimitive"),fE=gs.set,pE=gs.getterFor("Symbol"),vE=Object.prototype,mE=b.Symbol,gE=Ps("JSON","stringify"),yE=A.f,bE=z.f,wE=sE.f,_E=x.f,kE=es("symbols"),xE=es("op-symbols"),SE=es("string-to-symbol-registry"),EE=es("symbol-to-string-registry"),TE=es("wks"),OE=b.QObject,ME=!OE||!OE.prototype||!OE.prototype.findChild,DE=f&&d(function(){return 7!=Qs(bE({},"a",{get:function(){return bE(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=yE(vE,e);i&&delete vE[e],bE(t,e,n),i&&t!==vE&&bE(vE,e,i)}:bE,CE=xs?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof mE},LE=function(t,e,n){t===vE&&LE(xE,e,n),v(t);var i=o(e,!0);return v(n),g(kE,i)?(n.enumerable?(g(t,dE)&&t[dE][i]&&(t[dE][i]=!1),n=Qs(n,{enumerable:w(0,!1)})):(g(t,dE)||bE(t,dE,w(1,{})),t[dE][i]=!0),DE(t,i,n)):bE(t,i,n)},AE=function(t){var e=o(t,!0),n=_E.call(this,e);return!(this===vE&&g(kE,e)&&!g(xE,e))&&(!(n||!g(this,e)||!g(kE,e)||g(this,dE)&&this[dE][e])||n)},IE=function(t){var e=t===vE,n=wE(e?xE:c(t)),i=[];return uE(n,function(t){!g(kE,t)||e&&!g(vE,t)||i.push(kE[t])}),i};if(ks||(nl((mE=function(){if(this instanceof mE)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=Ga(t),n=function(t){this===vE&&n.call(xE,t),g(this,dE)&&g(this[dE],e)&&(this[dE][e]=!1),DE(this,e,w(1,t))};return f&&ME&&DE(vE,e,{configurable:!0,set:n}),$S(e,t)}).prototype,"toString",function(){return pE(this).tag}),nl(mE,"withoutSetter",function(t){return $S(Ga(t),t)}),x.f=AE,z.f=LE,A.f=KS,RS.f=sE.f=tE,HS.f=IE,lE.f=function(t){return $S(fs(t),t)},f&&bE(mE.prototype,"description",{configurable:!0,get:function(){return pE(this).description}})),k({global:!0,wrap:!0,forced:!ks,sham:!ks},{Symbol:mE}),uE(Gs(TE),function(t){ZS(t)}),k({target:"Symbol",stat:!0,forced:!ks},{for:function(t){var e=String(t);if(g(SE,e))return SE[e];var n=mE(e);return SE[e]=n,EE[n]=e,n},keyFor:function(t){if(!CE(t))throw TypeError(t+" is not a symbol");if(g(EE,t))return EE[t]},useSetter:function(){ME=!0},useSimple:function(){ME=!1}}),k({target:"Object",stat:!0,forced:!ks,sham:!f},{create:function(t,e){return void 0===e?Qs(t):QS(Qs(t),e)},defineProperty:LE,defineProperties:QS,getOwnPropertyDescriptor:KS}),k({target:"Object",stat:!0,forced:!ks},{getOwnPropertyNames:tE,getOwnPropertySymbols:IE}),k({target:"Object",stat:!0,forced:d(function(){HS.f(1)})},{getOwnPropertySymbols:function(t){return HS.f(hs(t))}}),gE){var PE=!ks||d(function(){var t=mE();return"[null]"!=gE([t])||"{}"!=gE({a:t})||"{}"!=gE(Object(t))});k({target:"JSON",stat:!0,forced:PE},{stringify:function(t,e,n){for(var i,r=[t],o=1;o<arguments.length;)r.push(arguments[o++]);if((h(i=e)||void 0!==t)&&!CE(t))return Ml(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!CE(e))return e}),r[1]=e,gE.apply(null,r)}})}mE.prototype[hE]||Y(mE.prototype,hE,mE.prototype.valueOf),tl(mE,"Symbol"),os[dE]=!0;function jE(t,e,n){return e in t?Ch(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NE(n){return function(t){var e=String(l(t));return 1&n&&(e=e.replace(HE,"")),2&n&&(e=e.replace(zE,"")),e}}var BE=R.Object.getOwnPropertySymbols,FE="\t\n\v\f\r                　\u2028\u2029\ufeff",RE="["+FE+"]",HE=RegExp("^"+RE+RE+"*"),zE=RegExp(RE+RE+"*$"),YE={start:NE(1),end:NE(2),trim:NE(3)},qE=YE.trim,UE=b.parseFloat,WE=1/UE(FE+"-0")!=-1/0?function(t){var e=qE(String(t)),n=UE(e);return 0===n&&"-"==e.charAt(0)?-0:n}:UE;k({global:!0,forced:parseFloat!=WE},{parseFloat:WE});var VE=R.parseFloat,GE=YE.trim,JE=b.parseInt,XE=/^[+-]?0[Xx]/,ZE=8!==JE(FE+"08")||22!==JE(FE+"0x16")?function(t,e){var n=GE(String(t));return JE(n,e>>>0||(XE.test(n)?16:10))}:JE;k({global:!0,forced:parseInt!=ZE},{parseInt:ZE});function $E(t,e){if(function(t){var e=Object(t);return void 0!==e[eT]||"@@iterator"in e||Ua.hasOwnProperty(ll(e))}(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=Jh(t);!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}function QE(t,e){return function(t){if(tT(t))return t}(t)||$E(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var KE=R.parseInt,tT=Ul,eT=fs("iterator");ZS("iterator");function nT(t){if(!h(t))return!1;var e=t[rT];return void 0!==e?!!e:Ml(t)}var iT=lE.f("iterator"),rT=fs("isConcatSpreadable"),oT=51<=$l||!d(function(){var t=[];return t[rT]=!1,t.concat()[0]!==t}),aT=Zl("concat");k({target:"Array",proto:!0,forced:!oT||!aT},{concat:function(t){var e,n,i,r,o,a=hs(this),s=xl(a,0),l=0;for(e=-1,i=arguments.length;e<i;e++)if(nT(o=-1===e?a:arguments[e])){if(9007199254740991<l+(r=Ds(o.length)))throw TypeError("Maximum allowed index exceeded");for(n=0;n<r;n++,l++)n in o&&zl(s,l,o[n])}else{if(9007199254740991<=l)throw TypeError("Maximum allowed index exceeded");zl(s,l++,o)}return s.length=l,s}}),ZS("asyncIterator"),ZS("hasInstance"),ZS("isConcatSpreadable"),ZS("match"),ZS("matchAll"),ZS("replace"),ZS("search"),ZS("species"),ZS("split"),ZS("toPrimitive"),ZS("toStringTag"),ZS("unscopables"),tl(Math,"Math",!0),tl(b.JSON,"JSON",!0);var sT=R.Symbol;ZS("asyncDispose"),ZS("dispose"),ZS("observable"),ZS("patternMatch"),ZS("replaceAll");var lT=sT,cT=n(function(e){function n(t){return e.exports=n="function"==typeof lT&&"symbol"==typeof iT?function(t){return typeof t}:function(t){return t&&"function"==typeof lT&&t.constructor===lT&&t!==lT.prototype?"symbol":typeof t},n(t)}e.exports=n}),uT=(Ah(mT,null,[{key:"choosify",value:function(t,e){var n=["node","edge","label"],i=!0,r=za(e,"chosen");if("boolean"==typeof r)i=r;else if("object"===cT(r)){if(-1===kc(n).call(n,t))throw new Error("choosify: subOption '"+t+"' should be one of '"+n.join("', '")+"'");var o=za(e,["chosen",t]);"boolean"!=typeof o&&"function"!=typeof o||(i=o)}return i}},{key:"pointInRect",value:function(t,e,n){if(t.width<=0||t.height<=0)return!1;if(void 0!==n){var i={x:e.x-n.x,y:e.y-n.y};if(0!==n.angle){var r=-n.angle;e={x:Math.cos(r)*i.x-Math.sin(r)*i.y,y:Math.sin(r)*i.x+Math.cos(r)*i.y}}else e=i}var o=t.x+t.width,a=t.y+t.width;return t.left<e.x&&o>e.x&&t.top<e.y&&a>e.y}},{key:"isValidLabel",value:function(t){return"string"==typeof t&&""!==t}},{key:"getSelfRefCoordinates",value:function(t,e,n,i){var r=i.x,o=i.y;if("function"==typeof i.distanceToBorder){var a=i.distanceToBorder(t,e),s=Math.sin(e)*a,l=Math.cos(e)*a;l===a?(r+=a,o=i.y):s===a?(r=i.x,o-=a):(r+=l,o-=s)}else o=i.shape.width>i.shape.height?(r=i.x+.5*i.shape.width,i.y-n):(r=i.x+n,i.y-.5*i.shape.height);return{x:r,y:o}}}]),mT),dT=Zl("slice"),hT=Ol("slice",{ACCESSORS:!0,0:0,1:2}),fT=fs("species"),pT=[].slice,vT=Math.max;function mT(){Th(this,mT)}k({target:"Array",proto:!0,forced:!dT||!hT},{slice:function(t,e){var n,i,r,o=c(this),a=Ds(o.length),s=Cs(t,a),l=Cs(void 0===e?a:e,a);if(Ml(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Ml(n.prototype)?h(n)&&null===(n=n[fT])&&(n=void 0):n=void 0,n===Array||void 0===n))return pT.call(o,s,l);for(i=new(void 0===n?Array:n)(vT(l-s,0)),r=0;s<l;s++,r++)s in o&&zl(i,r,o[s]);return i.length=r,i}});function gT(t){var e=t.slice;return t===bT||t instanceof Array&&e===bT.slice?yT:e}var yT=G("Array").slice,bT=Array.prototype,wT=G("Array").values,_T=Array.prototype,kT={DOMTokenList:!0,NodeList:!0},xT=Object.assign,ST=Object.defineProperty,ET=!xT||d(function(){if(f&&1!==xT({b:1},xT(ST({},"a",{enumerable:!0,get:function(){ST(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!=xT({},t)[n]||"abcdefghijklmnopqrst"!=Gs(xT({},e)).join("")})?function(t,e){for(var n=hs(t),i=arguments.length,r=1,o=HS.f,a=x.f;r<i;)for(var s,l=T(arguments[r++]),c=o?Gs(l).concat(o(l)):Gs(l),u=c.length,d=0;d<u;)s=c[d++],f&&!a.call(l,s)||(n[s]=l[s]);return n}:xT;k({target:"Object",stat:!0,forced:Object.assign!==ET},{assign:ET});var TT=R.Object.assign,OT=(Ah(NT,[{key:"_add",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"normal";void 0===this.lines[t]&&(this.lines[t]={width:0,height:0,blocks:[]});var i=e;void 0!==e&&""!==e||(i=" ");var r=this.measureText(i,n),o=TT({},function(t){var e=t.values;return t===_T||t instanceof Array&&e===_T.values||kT.hasOwnProperty(ll(t))?wT:e}(r));o.text=e,o.width=r.width,o.mod=n,void 0!==e&&""!==e||(o.width=0),this.lines[t].blocks.push(o),this.lines[t].width+=o.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return void 0===t?0:t.width}},{key:"append",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e)}},{key:"newLine",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var e=this.lines[t],n=0;if(void 0!==e.blocks)for(var i=0;i<e.blocks.length;i++){var r=e.blocks[i];n<r.height&&(n=r.height)}e.height=n}}},{key:"determineLabelSize",value:function(){for(var t=0,e=0,n=0;n<this.lines.length;n++){var i=this.lines[n];i.width>t&&(t=i.width),e+=i.height}this.width=t,this.height=e}},{key:"removeEmptyBlocks",value:function(){for(var t=[],e=0;e<this.lines.length;e++){var n=this.lines[e];if(0!==n.blocks.length&&(e!==this.lines.length-1||0!==n.width)){var i={};TT(i,n),i.blocks=[];for(var r=void 0,o=[],a=0;a<n.blocks.length;a++){var s=n.blocks[a];0!==s.width?o.push(s):void 0===r&&(r=s)}0===o.length&&void 0!==r&&o.push(r),i.blocks=o,t.push(i)}}return t}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),NT),MT={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/\_/,"`":/`/,afterBold:/[^\*]/,afterItal:/[^_]/,afterMono:/[^`]/},DT=(Ah(jT,[{key:"mod",value:function(){return 0===this.modStack.length?"normal":this.modStack[0]}},{key:"modName",value:function(){return 0===this.modStack.length?"normal":"mono"===this.modStack[0]?"mono":this.bold&&this.ital?"boldital":this.bold?"bold":this.ital?"ital":void 0}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),0<this.buffer.length&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(t){" "===t&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1)," "!=t&&(this.buffer+=t)}},{key:"parseWS",value:function(t){return!!/[ \t]/.test(t)&&(this.mono?this.add(t):this.spacing=!0,!0)}},{key:"setTag",value:function(t){this.emitBlock(),this[t]=!0,this.modStack.unshift(t)}},{key:"unsetTag",value:function(t){this.emitBlock(),this[t]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(t,e){return!(this.mono||this[t]||!this.match(e)||(this.setTag(t),0))}},{key:"match",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=this.prepareRegExp(t),i=QE(n,2),r=i[0],o=i[1],a=r.test(this.text.substr(this.position,o));return a&&e&&(this.position+=o-1),a}},{key:"parseEndTag",value:function(t,e,n){var i=this.mod()===t;return!(!(i="mono"===t?i&&this.mono:i&&!this.mono)||!this.match(e)||(void 0!==n&&this.position!==this.text.length-1&&!this.match(n,!1)||this.unsetTag(t),0))}},{key:"replace",value:function(t,e){return!!this.match(t)&&(this.add(e),this.position+=length-1,!0)}},{key:"prepareRegExp",value:function(t){var e,n;if(t instanceof RegExp)n=t,e=1;else{var i=MT[t];n=void 0!==i?i:new RegExp(t),e=t.length}return[n,e]}}]),jT),CT=(Ah(PT,[{key:"process",value:function(t){if(!uT.isValidLabel(t))return this.lines.finalize();var e=this.parent.fontOptions;t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n");var n=String(t).split("\n"),i=n.length;if(e.multi)for(var r=0;r<i;r++){var o=this.splitBlocks(n[r],e.multi);if(void 0!==o)if(0!==o.length){if(0<e.maxWdt)for(var a=0;a<o.length;a++){var s=o[a].mod,l=o[a].text;this.splitStringIntoLines(l,s,!0)}else for(var c=0;c<o.length;c++){var u=o[c].mod,d=o[c].text;this.lines.append(d,u)}this.lines.newLine()}else this.lines.newLine("")}else if(0<e.maxWdt)for(var h=0;h<i;h++)this.splitStringIntoLines(n[h]);else for(var f=0;f<i;f++)this.lines.newLine(n[f]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var e="none";return"markdown"===t||"md"===t?e="markdown":!0!==t&&"html"!==t||(e="html"),e}},{key:"splitHtmlBlocks",value:function(t){for(var e=new DT(t);e.position<e.text.length;){var n=e.text.charAt(e.position);e.parseWS(n)||/</.test(n)&&(e.parseStartTag("bold","<b>")||e.parseStartTag("ital","<i>")||e.parseStartTag("mono","<code>")||e.parseEndTag("bold","</b>")||e.parseEndTag("ital","</i>")||e.parseEndTag("mono","</code>"))||!!/&/.test(n)&&(e.replace(e.text,"&lt;","<")||e.replace(e.text,"&amp;","&")||e.add("&"),!0)||e.add(n),e.position++}return e.emitBlock(),e.blocks}},{key:"splitMarkdownBlocks",value:function(t){for(var e=this,n=new DT(t),i=!0;n.position<n.text.length;){var r=n.text.charAt(n.position);n.parseWS(r)||!!/\\/.test(o=r)&&(n.position<e.text.length+1&&(n.position++,o=e.text.charAt(n.position),/ \t/.test(o)?n.spacing=!0:(n.add(o),i=!1)),!0)||(i||n.spacing)&&(n.parseStartTag("bold","*")||n.parseStartTag("ital","_")||n.parseStartTag("mono","`"))||n.parseEndTag("bold","*","afterBold")||n.parseEndTag("ital","_","afterItal")||n.parseEndTag("mono","`","afterMono")||(n.add(r),i=!1),n.position++}var o;return n.emitBlock(),n.blocks}},{key:"splitBlocks",value:function(t,e){var n=this.decodeMarkupSystem(e);return"none"===n?[{text:t,mod:"normal"}]:"markdown"===n?this.splitMarkdownBlocks(t):"html"===n?this.splitHtmlBlocks(t):void 0}},{key:"overMaxWidth",value:function(t){var e=this.ctx.measureText(t).width;return this.lines.curWidth()+e>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var e="",n=0;n<t.length;){var i=e+(""===e?"":" ")+t[n];if(this.overMaxWidth(i))break;e=i,n++}return n}},{key:"getLongestFitWord",value:function(t){for(var e=0;e<t.length&&!this.overMaxWidth(gT(t).call(t,0,e));)e++;return e}},{key:"splitStringIntoLines",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"normal",n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];this.parent.getFormattingValues(this.ctx,this.selected,this.hover,e);for(var i=(t=(t=t.replace(/^( +)/g,"$1\r")).replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r")).split("\r");0<i.length;){var r=this.getLongestFit(i);if(0===r){var o=i[0],a=this.getLongestFitWord(o);this.lines.newLine(gT(o).call(o,0,a),e),i[0]=gT(o).call(o,a)}else{var s=r;" "===i[r-1]?r--:" "===i[s]&&s++;var l=gT(i).call(i,0,r).join("");r==i.length&&n?this.lines.append(l,e):this.lines.newLine(l,e),i=gT(i).call(i,s)}}}}]),PT),LT=["bold","ital","boldital","mono"],AT=(Ah(IT,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),uT.isValidLabel(t.label)?this.labelDirty=!0:t.label=void 0,void 0!==t.font&&null!==t.font)if("string"==typeof t.font)this.baseSize=this.fontOptions.size;else if("object"===cT(t.font)){var e=t.font.size;void 0!==e&&(this.baseSize=e)}}},{key:"initFontOptions",value:function(t){var n=this;la(LT,function(t){n.fontOptions[t]={}}),IT.parseFontString(this.fontOptions,t)?this.fontOptions.vadjust=0:la(t,function(t,e){null!=t&&"object"!==cT(t)&&(n.fontOptions[e]=t)})}},{key:"constrain",value:function(t){var e={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},n=za(t,"widthConstraint");if("number"==typeof n)e.maxWdt=Number(n),e.minWdt=Number(n);else if("object"===cT(n)){var i=za(t,["widthConstraint","maximum"]);"number"==typeof i&&(e.maxWdt=Number(i));var r=za(t,["widthConstraint","minimum"]);"number"==typeof r&&(e.minWdt=Number(r))}var o=za(t,"heightConstraint");if("number"==typeof o)e.minHgt=Number(o);else if("object"===cT(o)){var a=za(t,["heightConstraint","minimum"]);"number"==typeof a&&(e.minHgt=Number(a));var s=za(t,["heightConstraint","valign"]);"string"==typeof s&&("top"!==s&&"bottom"!==s||(e.valign=s))}return e}},{key:"update",value:function(t,e){this.setOptions(t,!0),this.propagateFonts(e),Qo(this.fontOptions,this.constrain(e)),this.fontOptions.chooser=uT.choosify("label",e)}},{key:"adjustSizes",value:function(t){var e=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=e,this.fontOptions.minWdt-=e);var n=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=n)}},{key:"addFontOptionsToPile",value:function(t,e){for(var n=0;n<e.length;++n)this.addFontToPile(t,e[n])}},{key:"addFontToPile",value:function(t,e){if(void 0!==e&&void 0!==e.font&&null!==e.font){var n=e.font;t.push(n)}}},{key:"getBasicOptions",value:function(t){for(var n={},e=0;e<t.length;++e){var i=t[e],r={};IT.parseFontString(r,i)&&(i=r),la(i,function(t,e){void 0!==t&&(n.hasOwnProperty(e)||(-1!==kc(LT).call(LT,e)?n[e]={}:n[e]=t))})}return n}},{key:"getFontOption",value:function(t,e,n){for(var i,r=0;r<t.length;++r){var o=t[r];if(o.hasOwnProperty(e)){if(null==(i=o[e]))continue;var a={};if(IT.parseFontString(a,i)&&(i=a),i.hasOwnProperty(n))return i[n]}}if(this.fontOptions.hasOwnProperty(n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}},{key:"getFontOptions",value:function(t,e){for(var n={},i=["color","size","face","mod","vadjust"],r=0;r<i.length;++r){var o=i[r];n[o]=this.getFontOption(t,e,o)}return n}},{key:"propagateFonts",value:function(t){var i=this,r=[];this.addFontOptionsToPile(r,t),this.fontOptions=this.getBasicOptions(r);for(var e=function(t){var e=LT[t],n=i.fontOptions[e];la(i.getFontOptions(r,e),function(t,e){n[e]=t}),n.size=Number(n.size),n.vadjust=Number(n.vadjust)},n=0;n<LT.length;++n)e(n)}},{key:"draw",value:function(t,e,n,i,r){var o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"middle";if(void 0!==this.elementOptions.label){var a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,i,r,e,n,o),this._drawBackground(t),this._drawText(t,e,this.size.yLine,o,a))}}},{key:"_drawBackground",value:function(t){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){t.fillStyle=this.fontOptions.background;var e=this.getSize();t.fillRect(e.left,e.top,e.width,e.height)}}},{key:"_drawText",value:function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"middle",r=4<arguments.length?arguments[4]:void 0,o=this._setAlignment(t,e,n,i),a=QE(o,2);e=a[0],n=a[1],t.textAlign="left",e-=this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&("top"===this.fontOptions.valign&&(n-=(this.size.height-this.size.labelHeight)/2),"bottom"===this.fontOptions.valign&&(n+=(this.size.height-this.size.labelHeight)/2));for(var s=0;s<this.lineCount;s++){var l=this.lines[s];if(l&&l.blocks){var c=0;this.isEdgeLabel||"center"===this.fontOptions.align?c+=(this.size.width-l.width)/2:"right"===this.fontOptions.align&&(c+=this.size.width-l.width);for(var u=0;u<l.blocks.length;u++){var d=l.blocks[u];t.font=d.font;var h=this._getColor(d.color,r,d.strokeColor),f=QE(h,2),p=f[0],v=f[1];0<d.strokeWidth&&(t.lineWidth=d.strokeWidth,t.strokeStyle=v,t.lineJoin="round"),t.fillStyle=p,0<d.strokeWidth&&t.strokeText(d.text,e+c,n+d.vadjust),t.fillText(d.text,e+c,n+d.vadjust),c+=d.width}n+=l.height}}}},{key:"_setAlignment",value:function(t,e,n,i){return this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&!1===this.pointToSelf?(n=e=0,"top"===this.fontOptions.align?(t.textBaseline="alphabetic",n-=4):"bottom"===this.fontOptions.align?(t.textBaseline="hanging",n+=4):t.textBaseline="middle"):t.textBaseline=i,[e,n]}},{key:"_getColor",value:function(t,e,n){var i=t||"#000000",r=n||"#ffffff";if(e<=this.elementOptions.scaling.label.drawThreshold){var o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-e)));i=ba(i,o),r=ba(r,o)}return[i,r]}},{key:"getTextSize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return this._processLabel(t,e,n),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=this.size.left,e=this.size.top-1;if(this.isEdgeLabel){var n=.5*-this.size.width;switch(this.fontOptions.align){case"middle":t=n,e=.5*-this.size.height;break;case"top":t=n,e=-(this.size.height+2);break;case"bottom":t=n,e=2}}return{left:t,top:e,width:this.size.width,height:this.size.height}}},{key:"calculateLabelSize",value:function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"middle";this._processLabel(t,e,n),this.size.left=i-.5*this.size.width,this.size.top=r-.5*this.size.height,this.size.yLine=r+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===o&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,e,n,i){function r(t,e,n){return"normal"===e?"mod"===n?"":t[n]:void 0!==t[e][n]?t[e][n]:t[n]}var o={color:r(this.fontOptions,i,"color"),size:r(this.fontOptions,i,"size"),face:r(this.fontOptions,i,"face"),mod:r(this.fontOptions,i,"mod"),vadjust:r(this.fontOptions,i,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(e||n)&&("normal"===i&&!0===this.fontOptions.chooser&&this.elementOptions.labelHighlightBold?o.mod="bold":"function"==typeof this.fontOptions.chooser&&this.fontOptions.chooser(o,this.elementOptions.id,e,n));var a="";return void 0!==o.mod&&""!==o.mod&&(a+=o.mod+" "),a+=o.size+"px "+o.face,t.font=a.replace(/"/g,""),o.font=t.font,o.height=o.size,o}},{key:"differentState",value:function(t,e){return t!==this.selectedState||e!==this.hoverState}},{key:"_processLabelText",value:function(t,e,n,i){return new CT(t,this,e,n).process(i)}},{key:"_processLabel",value:function(t,e,n){if(!1!==this.labelDirty||this.differentState(e,n)){var i=this._processLabelText(t,e,n,this.elementOptions.label);0<this.fontOptions.minWdt&&i.width<this.fontOptions.minWdt&&(i.width=this.fontOptions.minWdt),this.size.labelHeight=i.height,0<this.fontOptions.minHgt&&i.height<this.fontOptions.minHgt&&(i.height=this.fontOptions.minHgt),this.lines=i.lines,this.lineCount=i.lines.length,this.size.width=i.width,this.size.height=i.height,this.selectedState=e,this.hoverState=n,this.labelDirty=!1}}},{key:"visible",value:function(){return 0!==this.size.width&&0!==this.size.height&&void 0!==this.elementOptions.label&&!(this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,e){if(!e||"string"!=typeof e)return!1;var n=e.split(" ");return t.size=+n[0].replace("px",""),t.face=n[1],t.color=n[2],!0}}]),IT);function IT(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];Th(this,IT),this.body=t,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(e),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}function PT(r,t,o,a){var s=this;Th(this,PT),this.ctx=r,this.parent=t,this.selected=o,this.hover=a,this.lines=new OT(function(t,e){if(void 0===t)return 0;var n=s.parent.getFormattingValues(r,o,a,e),i=0;return""!==t&&(i=s.ctx.measureText(t).width),{width:i,values:n}})}function jT(t){Th(this,jT),this.text=t,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}function NT(t){Th(this,NT),this.measureText=t,this.current=0,this.width=0,this.height=0,this.lines=[]}function BT(t,e){return!e||"object"!==cT(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var FT=d(function(){_s(1)});k({target:"Object",stat:!0,forced:FT,sham:!ys},{getPrototypeOf:function(t){return _s(hs(t))}});var RT=R.Object.getPrototypeOf;k({target:"Object",stat:!0},{setPrototypeOf:fl});function HT(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=qT(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&UT(t,e)}var zT=R.Object.setPrototypeOf,YT=n(function(e){function n(t){return e.exports=n=zT?RT:function(t){return t.__proto__||RT(t)},n(t)}e.exports=n}),qT=xc,UT=n(function(n){function i(t,e){return n.exports=i=zT||function(t,e){return t.__proto__=e,t},i(t,e)}n.exports=i});k({target:"Array",proto:!0},{fill:function(t){for(var e=hs(this),n=Ds(e.length),i=arguments.length,r=Cs(1<i?arguments[1]:void 0,n),o=2<i?arguments[2]:void 0,a=void 0===o?n:Cs(o,n);r<a;)e[r++]=t;return e}});function WT(t){var e=t.fill;return t===JT||t instanceof Array&&e===JT.fill?GT:e}function VT(t,e,n){var i=n.charAt(e-1),r=n.charAt(e+1);return vO.test(t)&&!mO.test(r)||mO.test(t)&&!vO.test(i)?"\\u"+t.charCodeAt(0).toString(16):t}var GT=G("Array").fill,JT=Array.prototype,XT=(Ah(jO,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&("object"==cT(this.options.margin)?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,e){var n=this.options.borderWidth;return t&&this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+n}},{key:"enableShadow",value:function(t,e){e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,e){if(!1!==e.borderDashes)if(void 0!==t.setLineDash){var n=e.borderDashes;!0===n&&(n=[5,15]),t.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,e){!1!==e.borderDashes&&(void 0!==t.setLineDash?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1))}},{key:"needsRefresh",value:function(t,e){return!0===this.refreshNeeded?!(this.refreshNeeded=!1):void 0===this.width||this.labelModule.differentState(t,e)}},{key:"initContextForDraw",value:function(t,e){var n=e.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,n),t.strokeStyle=e.borderColor,t.fillStyle=e.color}},{key:"performStroke",value:function(t,e){var n=e.borderWidth/this.body.view.scale;t.save(),0<n&&(this.enableBorderDashes(t,e),t.stroke(),this.disableBorderDashes(t,e)),t.restore()}},{key:"performFill",value:function(t,e){this.enableShadow(t,e),WT(t).call(t),this.disableShadow(t,e),this.performStroke(t,e)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,e,n,i,r){void 0!==n&&this.resize(n,i,r),this.left=t-this.width/2,this.top=e-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,e,n,i,r){this._updateBoundingBox(t,e,n,i,r)}},{key:"getDimensionsFromLabel",value:function(t,e,n){this.textSize=this.labelModule.getTextSize(t,e,n);var i=this.textSize.width,r=this.textSize.height;return 0===i&&(r=i=14),{width:i,height:r}}}]),jO),ZT=(HT(PO,XT),Ah(PO,[{key:"resize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,n)){var i=this.getDimensionsFromLabel(t,e,n);this.width=i.width+this.margin.right+this.margin.left,this.height=i.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(t,e,n,i,r,o){this.resize(t,i,r),this.left=e-this.width/2,this.top=n-this.height/2,this.initContextForDraw(t,o),Q(t,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(t,o),this.updateBoundingBox(e,n,t,i,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,r)}},{key:"updateBoundingBox",value:function(t,e,n,i,r){this._updateBoundingBox(t,e,n,i,r);var o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}},{key:"distanceToBorder",value:function(t,e){t&&this.resize(t);var n=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+n}}]),PO),$T=(HT(IO,XT),Ah(IO,[{key:"setOptions",value:function(t,e,n){this.options=t,void 0===e&&void 0===n||this.setImages(e,n)}},{key:"setImages",value:function(t,e){e&&this.selected?(this.imageObj=e,this.imageObjAlt=t):(this.imageObj=t,this.imageObjAlt=e)}},{key:"switchImages",value:function(t){var e=t&&!this.selected||!t&&this.selected;if(this.selected=t,void 0!==this.imageObjAlt&&e){var n=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=n}}},{key:"_getImagePadding",value:function(){var t={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var e=this.options.imagePadding;"object"==cT(e)?(t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left):(t.top=e,t.right=e,t.bottom=e,t.left=e)}return t}},{key:"_resizeImage",value:function(){var t,e;if(!1===this.options.shapeProperties.useImageSize){var n=1,i=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?n=this.imageObj.width/this.imageObj.height:i=this.imageObj.height/this.imageObj.width),t=2*this.options.size*n,e=2*this.options.size*i}else{var r=this._getImagePadding();t=this.imageObj.width+r.left+r.right,e=this.imageObj.height+r.top+r.bottom}this.width=t,this.height=e,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(t,e,n,i){this.initContextForDraw(t,i),$(t,e,n,i.size),this.performFill(t,i)}},{key:"_drawImageAtPosition",value:function(t,e){if(0!=this.imageObj.width){t.globalAlpha=1,this.enableShadow(t,e);var n=1;!0===this.options.shapeProperties.interpolation&&(n=this.imageObj.width/this.width/this.body.view.scale);var i=this._getImagePadding(),r=this.left+i.left,o=this.top+i.top,a=this.width-i.left-i.right,s=this.height-i.top-i.bottom;this.imageObj.drawImageAtPosition(t,n,r,o,a,s),this.disableShadow(t,e)}}},{key:"_drawImageLabel",value:function(t,e,n,i,r){var o,a=0;if(void 0!==this.height){a=.5*this.height;var s=this.labelModule.getTextSize(t,i,r);1<=s.lineCount&&(a+=s.height/2)}o=n+a,this.options.label&&(this.labelOffset=a),this.labelModule.draw(t,e,o,i,r,"hanging")}}]),IO),QT=(HT(AO,$T),Ah(AO,[{key:"resize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,n)){var i=this.getDimensionsFromLabel(t,e,n),r=Math.max(i.width+this.margin.right+this.margin.left,i.height+this.margin.top+this.margin.bottom);this.options.size=r/2,this.width=r,this.height=r,this.radius=this.width/2}}},{key:"draw",value:function(t,e,n,i,r,o){this.resize(t,i,r),this.left=e-this.width/2,this.top=n-this.height/2,this._drawRawCircle(t,e,n,o),this.updateBoundingBox(e,n),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,n,i,r)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size}},{key:"distanceToBorder",value:function(t,e){return t&&this.resize(t),.5*this.width}}]),AO),KT=(HT(LO,$T),Ah(LO,[{key:"resize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var i=2*this.options.size;return this.width=i,this.height=i,void(this.radius=.5*this.width)}this.needsRefresh(e,n)&&this._resizeImage()}},{key:"draw",value:function(t,e,n,i,r,o){this.switchImages(i),this.resize(),this.left=e-this.width/2,this.top=n-this.height/2,this._drawRawCircle(t,e,n,o),t.save(),t.clip(),this._drawImageAtPosition(t,o),t.restore(),this._drawImageLabel(t,e,n,i,r),this.updateBoundingBox(e,n)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(t,e){return t&&this.resize(t),.5*this.width}}]),LO),tO=(HT(CO,XT),Ah(CO,[{key:"resize",value:function(t,e,n){if(this.needsRefresh(e,n)){var i=this.getDimensionsFromLabel(t,e,n).width+this.margin.right+this.margin.left;this.width=i,this.height=i,this.radius=this.width/2}}},{key:"draw",value:function(t,e,n,i,r,o){this.resize(t,i,r),this.left=e-this.width/2,this.top=n-this.height/2,this.initContextForDraw(t,o),tt(t,e-this.width/2,n-this.height/2,this.width,this.height),this.performFill(t,o),this.updateBoundingBox(e,n,t,i,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),CO),eO=(HT(DO,XT),Ah(DO,[{key:"resize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{size:this.options.size};if(this.needsRefresh(e,n)){this.labelModule.getTextSize(t,e,n);var r=2*i.size;this.width=r,this.height=r,this.radius=.5*this.width}}},{key:"_drawShape",value:function(t,e,n,i,r,o,a,s){var l;if(this.resize(t,o,a,s),this.left=i-this.width/2,this.top=r-this.height/2,this.initContextForDraw(t,s),l=e,(Object.prototype.hasOwnProperty.call(nt,l)?nt[l]:function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];CanvasRenderingContext2D.prototype[l].call(t,n)})(t,i,r,s.size),this.performFill(t,s),void 0!==this.options.icon&&void 0!==this.options.icon.code&&(t.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",t.fillText(this.options.icon.code,i,r)),void 0!==this.options.label){this.labelModule.calculateLabelSize(t,o,a,i,r,"hanging");var c=r+.5*this.height+.5*this.labelModule.size.height;this.labelModule.draw(t,i,c,o,a,"hanging")}this.updateBoundingBox(i,r)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,void 0!==this.options.label&&0<this.labelModule.size.width&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),DO),nO=(HT(MO,eO),Ah(MO,[{key:"draw",value:function(t,e,n,i,r,o){this._drawShape(t,"diamond",4,e,n,i,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),MO),iO=(HT(OO,eO),Ah(OO,[{key:"draw",value:function(t,e,n,i,r,o){this._drawShape(t,"circle",2,e,n,i,r,o)}},{key:"distanceToBorder",value:function(t,e){return t&&this.resize(t),this.options.size}}]),OO),rO=(HT(TO,XT),Ah(TO,[{key:"resize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,n)){var i=this.getDimensionsFromLabel(t,e,n);this.height=2*i.height,this.width=i.width+i.height,this.radius=.5*this.width}}},{key:"draw",value:function(t,e,n,i,r,o){this.resize(t,i,r),this.left=e-.5*this.width,this.top=n-.5*this.height,this.initContextForDraw(t,o),K(t,this.left,this.top,this.width,this.height),this.performFill(t,o),this.updateBoundingBox(e,n,t,i,r),this.labelModule.draw(t,e,n,i,r)}},{key:"distanceToBorder",value:function(t,e){t&&this.resize(t);var n=.5*this.width,i=.5*this.height,r=Math.sin(e)*n,o=Math.cos(e)*i;return n*i/Math.sqrt(r*r+o*o)}}]),TO),oO=(HT(EO,XT),Ah(EO,[{key:"resize",value:function(t,e,n){this.needsRefresh(e,n)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,n,i,r,o){this.resize(t,i,r),this.options.icon.size=this.options.icon.size||50,this.left=e-this.width/2,this.top=n-this.height/2,this._icon(t,e,n,i,r,o),void 0!==this.options.label&&this.labelModule.draw(t,this.left+this.iconSize.width/2+this.margin.left,n+this.height/2+5,i),this.updateBoundingBox(e,n)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-.5*this.options.icon.size,this.boundingBox.left=t-.5*this.options.icon.size,this.boundingBox.right=t+.5*this.options.icon.size,this.boundingBox.bottom=e+.5*this.options.icon.size,void 0!==this.options.label&&0<this.labelModule.size.width&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}},{key:"_icon",value:function(t,e,n,i,r,o){var a=Number(this.options.icon.size);void 0!==this.options.icon.code?(t.font=[null!=this.options.icon.weight?this.options.icon.weight:i?"bold":"",(null!=this.options.icon.weight&&i?5:0)+a+"px",this.options.icon.face].join(" "),t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",this.enableShadow(t,o),t.fillText(this.options.icon.code,e,n),this.disableShadow(t,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),EO),aO=(HT(SO,$T),Ah(SO,[{key:"resize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var i=2*this.options.size;return this.width=i,void(this.height=i)}this.needsRefresh(e,n)&&this._resizeImage()}},{key:"draw",value:function(t,e,n,i,r,o){if(this.switchImages(i),this.resize(),this.left=e-this.width/2,this.top=n-this.height/2,!0===this.options.shapeProperties.useBorderWithImage){var a=this.options.borderWidth,s=this.options.borderWidthSelected||2*this.options.borderWidth,l=(i?s:a)/this.body.view.scale;t.lineWidth=Math.min(this.width,l),t.beginPath(),t.strokeStyle=i?this.options.color.highlight.border:r?this.options.color.hover.border:this.options.color.border,t.fillStyle=i?this.options.color.highlight.background:r?this.options.color.hover.background:this.options.color.background,t.rect(this.left-.5*t.lineWidth,this.top-.5*t.lineWidth,this.width+t.lineWidth,this.height+t.lineWidth),WT(t).call(t),this.performStroke(t,o),t.closePath()}this._drawImageAtPosition(t,o),this._drawImageLabel(t,e,n,i,r),this.updateBoundingBox(e,n)}},{key:"updateBoundingBox",value:function(t,e){this.resize(),this._updateBoundingBox(t,e),void 0!==this.options.label&&0<this.labelModule.size.width&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),SO),sO=(HT(xO,eO),Ah(xO,[{key:"draw",value:function(t,e,n,i,r,o){this._drawShape(t,"square",2,e,n,i,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),xO),lO=(HT(kO,eO),Ah(kO,[{key:"draw",value:function(t,e,n,i,r,o){this._drawShape(t,"hexagon",4,e,n,i,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),kO),cO=(HT(_O,eO),Ah(_O,[{key:"draw",value:function(t,e,n,i,r,o){this._drawShape(t,"star",4,e,n,i,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),_O),uO=(HT(wO,XT),Ah(wO,[{key:"resize",value:function(t,e,n){this.needsRefresh(e,n)&&(this.textSize=this.labelModule.getTextSize(t,e,n),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,n,i,r,o){this.resize(t,i,r),this.left=e-this.width/2,this.top=n-this.height/2,this.enableShadow(t,o),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,i,r),this.disableShadow(t,o),this.updateBoundingBox(e,n,t,i,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),wO),dO=(HT(bO,eO),Ah(bO,[{key:"draw",value:function(t,e,n,i,r,o){this._drawShape(t,"triangle",3,e,n,i,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),bO),hO=(HT(yO,eO),Ah(yO,[{key:"draw",value:function(t,e,n,i,r,o){this._drawShape(t,"triangleDown",3,e,n,i,r,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),yO),fO=Ps("JSON","stringify"),pO=/[\uD800-\uDFFF]/g,vO=/^[\uD800-\uDBFF]$/,mO=/^[\uDC00-\uDFFF]$/,gO=d(function(){return'"\\udf06\\ud834"'!==fO("\udf06\ud834")||'"\\udead"'!==fO("\udead")});function yO(t,e,n){return Th(this,yO),BT(this,YT(yO).call(this,t,e,n))}function bO(t,e,n){return Th(this,bO),BT(this,YT(bO).call(this,t,e,n))}function wO(t,e,n){var i;return Th(this,wO),(i=BT(this,YT(wO).call(this,t,e,n)))._setMargins(n),i}function _O(t,e,n){return Th(this,_O),BT(this,YT(_O).call(this,t,e,n))}function kO(t,e,n){return Th(this,kO),BT(this,YT(kO).call(this,t,e,n))}function xO(t,e,n){return Th(this,xO),BT(this,YT(xO).call(this,t,e,n))}function SO(t,e,n,i,r){var o;return Th(this,SO),(o=BT(this,YT(SO).call(this,t,e,n))).setImages(i,r),o}function EO(t,e,n){var i;return Th(this,EO),(i=BT(this,YT(EO).call(this,t,e,n)))._setMargins(n),i}function TO(t,e,n){return Th(this,TO),BT(this,YT(TO).call(this,t,e,n))}function OO(t,e,n){return Th(this,OO),BT(this,YT(OO).call(this,t,e,n))}function MO(t,e,n){return Th(this,MO),BT(this,YT(MO).call(this,t,e,n))}function DO(t,e,n){return Th(this,DO),BT(this,YT(DO).call(this,t,e,n))}function CO(t,e,n){var i;return Th(this,CO),(i=BT(this,YT(CO).call(this,t,e,n)))._setMargins(n),i}function LO(t,e,n,i,r){var o;return Th(this,LO),(o=BT(this,YT(LO).call(this,t,e,n))).setImages(i,r),o}function AO(t,e,n){var i;return Th(this,AO),(i=BT(this,YT(AO).call(this,t,e,n)))._setMargins(n),i}function IO(t,e,n){var i;return Th(this,IO),(i=BT(this,YT(IO).call(this,t,e,n))).labelOffset=0,i.selected=!1,i}function PO(t,e,n){var i;return Th(this,PO),(i=BT(this,YT(PO).call(this,t,e,n)))._setMargins(n),i}function jO(t,e,n){Th(this,jO),this.body=e,this.labelModule=n,this.setOptions(t),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}fO&&k({target:"JSON",stat:!0,forced:gO},{stringify:function(t,e,n){var i=fO.apply(null,arguments);return"string"==typeof i?i.replace(pO,VT):i}}),R.JSON||(R.JSON={stringify:JSON.stringify});function NO(t,e,n){return R.JSON.stringify.apply(null,arguments)}var BO,FO=!1,RO="background: #FFeeee; color: #dd0000",HO=(Ah(zO,null,[{key:"validate",value:function(t,e,n){FO=!1;var i=BO=e;return void 0!==n&&(i=e[n]),zO.parse(t,i,[]),FO}},{key:"parse",value:function(t,e,n){for(var i in t)t.hasOwnProperty(i)&&zO.check(i,t,e,n)}},{key:"check",value:function(t,e,n,i){if(void 0!==n[t]||void 0!==n.__any__){var r=t,o=!0;void 0===n[t]&&void 0!==n.__any__&&(r="__any__",o="object"===zO.getType(e[t]));var a=n[r];o&&void 0!==a.__type__&&(a=a.__type__),zO.checkFields(t,e,n,r,a,i)}else zO.getSuggestion(t,n,i)}},{key:"checkFields",value:function(e,t,n,i,r,o){function a(t){console.log("%c"+t+zO.printLocation(o,e),RO)}var s=zO.getType(t[e]),l=r[s];void 0!==l?"array"===zO.getType(l)&&-1===kc(l).call(l,t[e])?(a('Invalid option detected in "'+e+'". Allowed values are:'+zO.print(l)+' not "'+t[e]+'". '),FO=!0):"object"===s&&"__any__"!==i&&(o=ea(o,e),zO.parse(t[e],n[i],o)):void 0===r.any&&(a('Invalid type received for "'+e+'". Expected: '+zO.print(nf(r))+". Received ["+s+'] "'+t[e]+'"'),FO=!0)}},{key:"getType",value:function(t){var e=cT(t);return"object"===e?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Wl(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":!0===t._isAMomentObject?"moment":"object":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}},{key:"getSuggestion",value:function(t,e,n){var i,r=zO.findInOptions(t,e,n,!1),o=zO.findInOptions(t,BO,[],!0);i=void 0!==r.indexMatch?" in "+zO.printLocation(r.path,t,"")+'Perhaps it was incomplete? Did you mean: "'+r.indexMatch+'"?\n\n':o.distance<=4&&r.distance>o.distance?" in "+zO.printLocation(r.path,t,"")+"Perhaps it was misplaced? Matching option found at: "+zO.printLocation(o.path,o.closestMatch,""):r.distance<=8?'. Did you mean "'+r.closestMatch+'"?'+zO.printLocation(r.path,t):". Did you mean one of these: "+zO.print(nf(e))+zO.printLocation(n,t),console.log('%cUnknown option detected: "'+t+'"'+i,RO),FO=!0}},{key:"findInOptions",value:function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=1e9,o="",a=[],s=t.toLowerCase(),l=void 0;for(var c in e){var u=void 0;if(void 0!==e[c].__type__&&!0===i){var d=zO.findInOptions(t,e[c],ea(n,c));r>d.distance&&(o=d.closestMatch,a=d.path,r=d.distance,l=d.indexMatch)}else{var h;-1!==kc(h=c.toLowerCase()).call(h,s)&&(l=c),r>(u=zO.levenshteinDistance(t,c))&&(o=c,a=na(n),r=u)}}return{closestMatch:o,path:a,distance:r,indexMatch:l}}},{key:"printLocation",value:function(t,e){for(var n="\n\n"+(2<arguments.length&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n")+"options = {\n",i=0;i<t.length;i++){for(var r=0;r<i+1;r++)n+="  ";n+=t[i]+": {\n"}for(var o=0;o<t.length+1;o++)n+="  ";n+=e+"\n";for(var a=0;a<t.length+1;a++){for(var s=0;s<t.length-a;s++)n+="  ";n+="}\n"}return n+"\n\n"}},{key:"print",value:function(t){return NO(t).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}},{key:"levenshteinDistance",value:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;var n,i,r=[];for(n=0;n<=e.length;n++)r[n]=[n];for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)==t.charAt(i-1)?r[n][i]=r[n-1][i-1]:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}}]),zO);function zO(){Th(this,zO)}function YO(e,t){var n=nf(e);if(BE){var i=BE(e);t&&(i=iE(i).call(i,function(t){return VS(e,t).enumerable})),n.push.apply(n,i)}return n}var qO=(Ah(GO,[{key:"attachEdge",value:function(t){var e;-1===kc(e=this.edges).call(e,t)&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var e,n,i=kc(e=this.edges).call(e,t);-1!=i&&oc(n=this.edges).call(n,i,1)}},{key:"setOptions",value:function(t){var e=this.options.shape;if(t){if(void 0!==t.color&&(this._localColor=t.color),void 0!==t.id&&(this.id=t.id),void 0===this.id)throw new Error("Node must have an id");GO.checkMass(t,this.id),void 0!==t.x&&(null===t.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=KE(t.x),this.predefinedPosition=!0)),void 0!==t.y&&(null===t.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=KE(t.y),this.predefinedPosition=!0)),void 0!==t.size&&(this.baseSize=t.size),void 0!==t.value&&(t.value=VE(t.value)),GO.parseOptions(this.options,t,!0,this.globalOptions,this.grouplist);var n=[t,this.options,this.defaultOptions];return this.chooser=uT.choosify("node",n),this._load_images(),this.updateLabelModule(t),this.updateShape(e),void 0!==t.hidden||void 0!==t.physics}}},{key:"_load_images",value:function(){if(("circularImage"===this.options.shape||"image"===this.options.shape)&&void 0===this.options.image)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(void 0!==this.options.image){if(void 0===this.imagelist)throw new Error("Internal Error: No images provided");if("string"==typeof this.options.image)this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(void 0===this.options.image.unselected)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),void 0!==this.options.image.selected?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};return this.selected||this.hover?!0===this.chooser?this.selected?(t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):"function"==typeof this.chooser&&(this.chooser(t,this.options.id,this.selected,this.hover),!1===t.shadow&&(t.shadowColor===this.options.shadow.color&&t.shadowSize===this.options.shadow.size&&t.shadowX===this.options.shadow.x&&t.shadowY===this.options.shadow.y||(t.shadow=!0))):t.shadow=this.options.shadow.enabled,t}},{key:"updateLabelModule",value:function(t){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),GO.updateGroupOptions(this.options,function(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)Hl(n=YO(Object(i),!0)).call(n,function(t){jE(e,t,i[t])});else if(YS)BS(e,YS(i));else{var r;Hl(r=YO(Object(i))).call(r,function(t){PS(e,t,VS(i,t))})}}return e}({},t,{color:t&&t.color||this._localColor||void 0}),this.grouplist);var e=this.grouplist.get(this.options.group,!1),n=[t,this.options,e,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new ZT(this.options,this.body,this.labelModule);break;case"circle":this.shape=new QT(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new KT(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"database":this.shape=new tO(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new nO(this.options,this.body,this.labelModule);break;case"dot":this.shape=new iO(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new rO(this.options,this.body,this.labelModule);break;case"icon":this.shape=new oO(this.options,this.body,this.labelModule);break;case"image":this.shape=new aO(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new sO(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new lO(this.options,this.body,this.labelModule);break;case"star":this.shape=new cO(this.options,this.body,this.labelModule);break;case"text":this.shape=new uO(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new dO(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new hO(this.options,this.body,this.labelModule);break;default:this.shape=new rO(this.options,this.body,this.labelModule)}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,e){return this.shape.distanceToBorder(t,e)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,e,n){if(void 0!==this.options.value){var i=this.options.scaling.customScalingFunction(t,e,n,this.options.value),r=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.size=this.options.scaling.min+i*r}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var e=this.getFormattingValues();this.shape.draw(t,this.x,this.y,this.selected,this.hover,e)}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var e=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,e)}},{key:"getItemsOnPoint",value:function(t){var e=[];return this.labelModule.visible()&&uT.pointInRect(this.labelModule.getSize(),t)&&e.push({nodeId:this.id,labelId:0}),uT.pointInRect(this.shape.boundingBox,t)&&e.push({nodeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"updateGroupOptions",value:function(t,e,n){if(void 0!==n){var i=t.group;if(void 0!==e&&void 0!==e.group&&i!==e.group)throw new Error("updateGroupOptions: group values in options don't match.");if("number"==typeof i||"string"==typeof i&&""!=i){var r=n.get(i),o=["font"];void 0!==e&&void 0!==e.color&&null!=e.color&&o.push("color"),$o(o,t,r),t.color=_a(t.color)}}}},{key:"parseOptions",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=4<arguments.length?arguments[4]:void 0;if($o(["color","fixed","shadow"],t,e,n),GO.checkMass(e),Na(t,e,"shadow",i),void 0!==e.color&&null!==e.color){var o=_a(e.color);Go(t.color,o)}else!0===n&&null===e.color&&(t.color=Pa(i.color));void 0!==e.fixed&&null!==e.fixed&&("boolean"==typeof e.fixed?(t.fixed.x=e.fixed,t.fixed.y=e.fixed):(void 0!==e.fixed.x&&"boolean"==typeof e.fixed.x&&(t.fixed.x=e.fixed.x),void 0!==e.fixed.y&&"boolean"==typeof e.fixed.y&&(t.fixed.y=e.fixed.y))),!0===n&&null===e.font&&(t.font=Pa(i.font)),GO.updateGroupOptions(t,e,r),void 0!==e.scaling&&Na(t.scaling,e.scaling,"label",i.scaling)}},{key:"checkMass",value:function(t,e){if(void 0!==t.mass&&t.mass<=0){var n="";void 0!==e&&(n=" in node id: "+e),console.log("%cNegative or zero mass disallowed"+n+", setting mass to 1.",RO),t.mass=1}}}]),GO),UO=(Ah(VO,[{key:"bindEventListeners",value:function(){var t,e,n=this;this.body.emitter.on("refreshNodes",Z(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",Z(e=this.refresh).call(e,this)),this.body.emitter.on("destroy",function(){la(n.nodesListeners,function(t,e){n.body.data.nodes&&n.body.data.nodes.off(e,t)}),delete n.body.functions.createNode,delete n.nodesListeners.add,delete n.nodesListeners.update,delete n.nodesListeners.remove,delete n.nodesListeners})}},{key:"setOptions",value:function(t){if(void 0!==t){if(qO.parseOptions(this.options,t),void 0!==t.shape)for(var e in this.body.nodes)this.body.nodes.hasOwnProperty(e)&&this.body.nodes[e].updateShape();if(void 0!==t.font||void 0!==t.widthConstraint||void 0!==t.heightConstraint)for(var n=0,i=nf(this.body.nodes);n<i.length;n++){var r=i[n];this.body.nodes[r].updateLabelModule(),this.body.nodes[r].needsRefresh()}if(void 0!==t.size)for(var o in this.body.nodes)this.body.nodes.hasOwnProperty(o)&&this.body.nodes[o].needsRefresh();void 0===t.hidden&&void 0===t.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.body.data.nodes;if(t instanceof CS||t instanceof LS)this.body.data.nodes=t;else if(Wl(t))this.body.data.nodes=new CS,this.body.data.nodes.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new CS}if(n&&la(this.nodesListeners,function(t,e){n.off(e,t)}),this.body.nodes={},this.body.data.nodes){var i=this;la(this.nodesListeners,function(t,e){i.body.data.nodes.on(e,t)});var r=this.body.data.nodes.getIds();this.add(r,!0)}!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=[],r=0;r<t.length;r++){e=t[r];var o=this.body.data.nodes.get(e),a=this.create(o);i.push(a),this.body.nodes[e]=a}this.layoutEngine.positionInitially(i),!1===n&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,e,i){for(var n=this.body.nodes,r=!1,o=0;o<t.length;o++){var a=t[o],s=n[a],l=e[o];void 0!==s?s.setOptions(l)&&(r=!0):(r=!0,s=this.create(l),n[a]=s)}r||void 0===i||(r=function(t){var e=t.some;return t===tf||t instanceof Array&&e===tf.some?Kh:e}(e).call(e,function(t,e){var n=i[e];return n&&n.level!==t.level})),!0===r?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var e=this.body.nodes,n=0;n<t.length;n++)delete e[t[n]];this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){return new(1<arguments.length&&void 0!==arguments[1]?arguments[1]:qO)(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var i=this,r=0<arguments.length&&void 0!==arguments[0]&&arguments[0];la(this.body.nodes,function(t,e){var n=i.body.data.nodes.get(e);void 0!==n&&(!0===r&&t.setOptions({x:null,y:null}),t.setOptions({fixed:!1}),t.setOptions(n))})}},{key:"getPositions",value:function(t){var e={};if(void 0!==t){if(!0===Wl(t)){for(var n=0;n<t.length;n++)if(void 0!==this.body.nodes[t[n]]){var i=this.body.nodes[t[n]];e[t[n]]={x:Math.round(i.x),y:Math.round(i.y)}}}else if(void 0!==this.body.nodes[t]){var r=this.body.nodes[t];e[t]={x:Math.round(r.x),y:Math.round(r.y)}}}else for(var o=0;o<this.body.nodeIndices.length;o++){var a=this.body.nodes[this.body.nodeIndices[o]];e[this.body.nodeIndices[o]]={x:Math.round(a.x),y:Math.round(a.y)}}return e}},{key:"storePositions",value:function(){var t=[],e=this.body.data.nodes.getDataSet(),n=!0,i=!1,r=void 0;try{for(var o,a=Jh(e.get());!(n=(o=a.next()).done);n=!0){var s=o.value,l=s.id,c=this.body.nodes[l],u=Math.round(c.x),d=Math.round(c.y);s.x===u&&s.y===d||t.push({id:l,x:u,y:d})}}catch(t){i=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}e.update(t)}},{key:"getBoundingBox",value:function(t){if(void 0!==this.body.nodes[t])return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,e){var n=[];if(void 0!==this.body.nodes[t])for(var i=this.body.nodes[t],r={},o=0;o<i.edges.length;o++){var a=i.edges[o];"to"!==e&&a.toId==i.id?void 0===r[a.fromId]&&(n.push(a.fromId),r[a.fromId]=!0):"from"!==e&&a.fromId==i.id&&void 0===r[a.toId]&&(n.push(a.toId),r[a.toId]=!0)}return n}},{key:"getConnectedEdges",value:function(t){var e=[];if(void 0!==this.body.nodes[t])for(var n=this.body.nodes[t],i=0;i<n.edges.length;i++)e.push(n.edges[i].id);else console.log("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return e}},{key:"moveNode",value:function(t,e,n){var i=this;void 0!==this.body.nodes[t]?(this.body.nodes[t].x=Number(e),this.body.nodes[t].y=Number(n),qh(function(){i.body.emitter.emit("startSimulation")},0)):console.log("Node id supplied to moveNode does not exist. Provided: ",t)}}]),VO),WO=WS;function VO(t,e,n,i){var r,o=this;if(Th(this,VO),this.body=t,this.images=e,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=Z(r=this.create).call(r,this),this.nodesListeners={add:function(t,e){o.add(e.items)},update:function(t,e){o.update(e.items,e.data,e.oldData)},remove:function(t,e){o.remove(e.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:2,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,n,i){if(e===t)return.5;var r=1/(e-t);return Math.max(0,(i-t)*r)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Pa(this.defaultOptions),this.bindEventListeners()}function GO(t,e,n,i,r,o){Th(this,GO),this.options=Pa(r),this.globalOptions=r,this.defaultOptions=o,this.body=e,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new AT(this.body,this.options,!1),this.setOptions(t)}k({target:"Reflect",stat:!0},{get:function t(e,n,i){var r,o,a=arguments.length<3?e:i;return v(e)===a?e[n]:(r=A.f(e,n))?g(r,"value")?r.value:void 0===r.get?void 0:r.get.call(a):h(o=_s(e))?t(o,n,a):void 0}});var JO=R.Reflect.get,XO=n(function(i){function r(t,e,n){return"undefined"!=typeof Reflect&&JO?i.exports=r=JO:i.exports=r=function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=YT(t)););return t}(t,e);if(i){var r=WO(i,e);return r.get?r.get.call(n):r.value}},r(t,e,n||t)}i.exports=r}),ZO=Math.hypot,$O=Math.abs,QO=Math.sqrt,KO=!!ZO&&ZO(1/0,NaN)!==1/0;k({target:"Math",stat:!0,forced:KO},{hypot:function(t,e){for(var n,i,r=0,o=0,a=arguments.length,s=0;o<a;)s<(n=$O(arguments[o++]))?(r=r*(i=s/n)*i+1,s=n):r+=0<n?(i=n/s)*i:n;return s===1/0?1/0:s*QO(r)}});var tM=R.Math.hypot,eM=(Ah(MM,null,[{key:"transform",value:function(t,e){Wl(t)||(t=[t]);for(var n=e.point.x,i=e.point.y,r=e.angle,o=e.length,a=0;a<t.length;++a){var s=t[a],l=s.x*Math.cos(r)-s.y*Math.sin(r),c=s.x*Math.sin(r)+s.y*Math.cos(r);s.x=n+o*l,s.y=i+o*c}}},{key:"drawPath",value:function(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;++n)t.lineTo(e[n].x,e[n].y);t.closePath()}}]),MM),nM=(HT(OM,eM),Ah(OM,null,[{key:"draw",value:function(t,e){if(e.image){t.save(),t.translate(e.point.x,e.point.y),t.rotate(Math.PI/2+e.angle);var n=null!=e.imageWidth?e.imageWidth:e.image.width,i=null!=e.imageHeight?e.imageHeight:e.image.height;e.image.drawImageAtPosition(t,1,-n/2,0,n,i),t.restore()}return!1}}]),OM),iM=(HT(TM,eM),Ah(TM,null,[{key:"draw",value:function(t,e){var n=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return eM.transform(n,e),eM.drawPath(t,n),!0}}]),TM),rM=(Ah(EM,null,[{key:"draw",value:function(t,e){var n=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return eM.transform(n,e),eM.drawPath(t,n),!0}}]),EM),oM=(Ah(SM,null,[{key:"draw",value:function(t,e){var n={x:-.4,y:0};eM.transform(n,e),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var i=Math.PI,r=e.angle-i/2,o=e.angle+i/2;return t.beginPath(),t.arc(n.x,n.y,.4*e.length,r,o,!1),t.stroke(),!0}}]),SM),aM=(Ah(xM,null,[{key:"draw",value:function(t,e){var n={x:-.3,y:0};eM.transform(n,e),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var i=Math.PI,r=e.angle+i/2,o=e.angle+3*i/2;return t.beginPath(),t.arc(n.x,n.y,.4*e.length,r,o,!1),t.stroke(),!0}}]),xM),sM=(Ah(kM,null,[{key:"draw",value:function(t,e){var n=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return eM.transform(n,e),eM.drawPath(t,n),!0}}]),kM),lM=(Ah(_M,null,[{key:"draw",value:function(t,e){var n=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return eM.transform(n,e),eM.drawPath(t,n),!0}}]),_M),cM=(Ah(wM,null,[{key:"draw",value:function(t,e){var n={x:-.4,y:0};return eM.transform(n,e),$(t,n.x,n.y,.4*e.length),!0}}]),wM),uM=(Ah(bM,null,[{key:"draw",value:function(t,e){var n=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return eM.transform(n,e),eM.drawPath(t,n),!0}}]),bM),dM=(Ah(yM,null,[{key:"draw",value:function(t,e){var n=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return eM.transform(n,e),eM.drawPath(t,n),!0}}]),yM),hM=(Ah(gM,null,[{key:"draw",value:function(t,e){var n=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return eM.transform(n,e),eM.drawPath(t,n),!0}}]),gM),fM=(Ah(mM,null,[{key:"draw",value:function(t,e){var n=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return eM.transform(n,e),eM.drawPath(t,n),!0}}]),mM),pM=(Ah(vM,null,[{key:"draw",value:function(t,e){var n;switch(e.type&&(n=e.type.toLowerCase()),n){case"image":return nM.draw(t,e);case"circle":return cM.draw(t,e);case"box":return dM.draw(t,e);case"crow":return rM.draw(t,e);case"curve":return oM.draw(t,e);case"diamond":return hM.draw(t,e);case"inv_curve":return aM.draw(t,e);case"triangle":return sM.draw(t,e);case"inv_triangle":return lM.draw(t,e);case"bar":return uM.draw(t,e);case"vee":return fM.draw(t,e);case"arrow":default:return iM.draw(t,e)}}}]),vM);function vM(){Th(this,vM)}function mM(){Th(this,mM)}function gM(){Th(this,gM)}function yM(){Th(this,yM)}function bM(){Th(this,bM)}function wM(){Th(this,wM)}function _M(){Th(this,_M)}function kM(){Th(this,kM)}function xM(){Th(this,xM)}function SM(){Th(this,SM)}function EM(){Th(this,EM)}function TM(){return Th(this,TM),BT(this,YT(TM).apply(this,arguments))}function OM(){return Th(this,OM),BT(this,YT(OM).apply(this,arguments))}function MM(){Th(this,MM)}function DM(e,t){var n=nf(e);if(BE){var i=BE(e);t&&(i=iE(i).call(i,function(t){return VS(e,t).enumerable})),n.push.apply(n,i)}return n}var CM=(Ah(LM,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,e,n,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:this.getViaNode();t.strokeStyle=this.getColor(t,e),t.lineWidth=e.width,!1!==e.dashes?this._drawDashedLine(t,e,r):this._drawLine(t,e,r)}},{key:"_drawLine",value:function(t,e,n,i,r){if(this.from!=this.to)this._line(t,e,n,i,r);else{var o=this._getCircleData(t),a=QE(o,3),s=a[0],l=a[1],c=a[2];this._circle(t,e,s,l,c)}}},{key:"_drawDashedLine",value:function(t,e,n,i,r){t.lineCap="round";var o=Wl(e.dashes)?e.dashes:[5,5];if(void 0!==t.setLineDash){if(t.save(),t.setLineDash(o),t.lineDashOffset=0,this.from!=this.to)this._line(t,e,n);else{var a=this._getCircleData(t),s=QE(a,3),l=s[0],c=s[1],u=s[2];this._circle(t,e,l,c,u)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)et(t,this.from.x,this.from.y,this.to.x,this.to.y,o);else{var d=this._getCircleData(t),h=QE(d,3),f=h[0],p=h[1],v=h[2];this._circle(t,e,f,p,v)}this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}}},{key:"findBorderPosition",value:function(t,e,n){return this.from!=this.to?this._findBorderPosition(t,e,n):this._findBorderPositionCircle(t,e,n)}},{key:"findBorderPositions",value:function(t){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,t),to:this._findBorderPosition(this.to,t)};var e,n=gT(e=this._getCircleData(t)).call(e,0,2),i=QE(n,2),r=i[0],o=i[1];return{from:this._findBorderPositionCircle(this.from,t,{x:r,y:o,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,t,{x:r,y:o,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(t){var e=this.options.selfReference.size;void 0!==t&&void 0===this.from.shape.width&&this.from.shape.resize(t);var n=uT.getSelfRefCoordinates(t,this.options.selfReference.angle,e,this.from);return[n.x,n.y,e]}},{key:"_pointOnCircle",value:function(t,e,n,i){var r=2*i*Math.PI;return{x:t+n*Math.cos(r),y:e-n*Math.sin(r)}}},{key:"_findBorderPositionCircle",value:function(t,e,n){var i,r=n.x,o=n.y,a=n.low,s=n.high,l=n.direction,c=this.options.selfReference.size,u=.5*(a+s),d=0;do{u=.5*(a+s),i=this._pointOnCircle(r,o,c,u);var h=Math.atan2(t.y-i.y,t.x-i.x),f=t.distanceToBorder(e,h)-Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2));if(Math.abs(f)<.05)break;0<f?0<l?a=u:s=u:0<l?s=u:a=u,++d}while(a<=s&&d<10);return function(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)Hl(n=DM(Object(i),!0)).call(n,function(t){jE(e,t,i[t])});else if(YS)BS(e,YS(i));else{var r;Hl(r=DM(Object(i))).call(r,function(t){PS(e,t,VS(i,t))})}}return e}({},i,{t:u})}},{key:"getLineWidth",value:function(t,e){return!0===t?Math.max(this.selectionWidth,.3/this._body.view.scale):!0===e?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(t,e){if(!1===e.inheritsColor)return ba(e.color,e.opacity);if("both"!==e.inheritsColor||this.from.id===this.to.id)return"to"===e.inheritsColor?ba(this.to.options.color.border,e.opacity):ba(this.from.options.color.border,e.opacity);var n=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),i=this.from.options.color.highlight.border,r=this.to.options.color.highlight.border;return!1===this.from.selected&&!1===this.to.selected?(i=ba(this.from.options.color.border,e.opacity),r=ba(this.to.options.color.border,e.opacity)):!0===this.from.selected&&!1===this.to.selected?r=this.to.options.color.border:!1===this.from.selected&&!0===this.to.selected&&(i=this.from.options.color.border),n.addColorStop(0,i),n.addColorStop(1,r),n}},{key:"_circle",value:function(t,e,n,i,r){this.enableShadow(t,e);var o=0,a=2*Math.PI;if(!this.options.selfReference.renderBehindTheNode){var s=this.options.selfReference.angle,l=this.options.selfReference.angle+Math.PI,c=this._findBorderPositionCircle(this.from,t,{x:n,y:i,low:s,high:l,direction:-1}),u=this._findBorderPositionCircle(this.from,t,{x:n,y:i,low:s,high:l,direction:1});o=Math.atan2(c.y-i,c.x-n),a=Math.atan2(u.y-i,u.x-n)}t.beginPath(),t.arc(n,i,r,o,a,!1),t.stroke(),this.disableShadow(t,e)}},{key:"getDistanceToEdge",value:function(t,e,n,i,r,o){if(this.from!=this.to)return this._getDistanceToEdge(t,e,n,i,r,o);var a=this._getCircleData(void 0),s=QE(a,3),l=s[0],c=s[1],u=s[2],d=l-r,h=c-o;return Math.abs(Math.sqrt(d*d+h*h)-u)}},{key:"_getDistanceToLine",value:function(t,e,n,i,r,o){var a=n-t,s=i-e,l=((r-t)*a+(o-e)*s)/(a*a+s*s);1<l?l=1:l<0&&(l=0);var c=t+l*a-r,u=e+l*s-o;return Math.sqrt(c*c+u*u)}},{key:"getArrowData",value:function(t,e,n,i,r,o){var a,s,l,c,u,d,h,f=o.width;h="from"===e?(l=this.from,c=this.to,u=o.fromArrowScale<0,d=Math.abs(o.fromArrowScale),o.fromArrowType):"to"===e?(l=this.to,c=this.from,u=o.toArrowScale<0,d=Math.abs(o.toArrowScale),o.toArrowType):(l=this.to,c=this.from,u=o.middleArrowScale<0,d=Math.abs(o.middleArrowScale),o.middleArrowType);var p=15*d+3*f;if(l!=c){var v=p/tM(l.x-c.x,l.y-c.y);if("middle"!==e)if(!0===this.options.smooth.enabled){var m=this._findBorderPosition(l,t,{via:n}),g=this.getPoint(m.t+v*("from"===e?1:-1),n);a=Math.atan2(m.y-g.y,m.x-g.x),s=m}else a=Math.atan2(l.y-c.y,l.x-c.x),s=this._findBorderPosition(l,t);else{var y=(u?-v:v)/2,b=this.getPoint(.5+y,n),w=this.getPoint(.5-y,n);a=Math.atan2(b.y-w.y,b.x-w.x),s=this.getPoint(.5,n)}}else{var _=this._getCircleData(t),k=QE(_,3),x=k[0],S=k[1],E=k[2];if("from"===e){var T=this.options.selfReference.angle,O=this.options.selfReference.angle+Math.PI,M=this._findBorderPositionCircle(this.from,t,{x:x,y:S,low:T,high:O,direction:-1});a=-2*M.t*Math.PI+1.5*Math.PI+.1*Math.PI,s=M}else if("to"===e){var D=this.options.selfReference.angle,C=this.options.selfReference.angle+Math.PI,L=this._findBorderPositionCircle(this.from,t,{x:x,y:S,low:D,high:C,direction:1});a=-2*L.t*Math.PI+1.5*Math.PI-1.1*Math.PI,s=L}else{var A=this.options.selfReference.angle/(2*Math.PI);s=this._pointOnCircle(x,S,E,A),a=-2*A*Math.PI+1.5*Math.PI+.1*Math.PI}}return{point:s,core:{x:s.x-.9*p*Math.cos(a),y:s.y-.9*p*Math.sin(a)},angle:a,length:p,type:h}}},{key:"drawArrowHead",value:function(t,e,n,i,r){t.strokeStyle=this.getColor(t,e),t.fillStyle=t.strokeStyle,t.lineWidth=e.width,pM.draw(t,r)&&(this.enableShadow(t,e),WT(t).call(t),this.disableShadow(t,e))}},{key:"enableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"drawBackground",value:function(t,e){if(!1!==e.background){var n={strokeStyle:t.strokeStyle,lineWidth:t.lineWidth,dashes:t.dashes};t.strokeStyle=e.backgroundColor,t.lineWidth=e.backgroundSize,this.setStrokeDashed(t,e.backgroundDashes),t.stroke(),t.strokeStyle=n.strokeStyle,t.lineWidth=n.lineWidth,t.dashes=n.dashes,this.setStrokeDashed(t,e.dashes)}}},{key:"setStrokeDashed",value:function(t,e){if(!1!==e)if(void 0!==t.setLineDash){var n=Wl(e)?e:[5,5];t.setLineDash(n)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else void 0!==t.setLineDash?t.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),LM);function LM(t,e,n){Th(this,LM),this._body=e,this._labelModule=n,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(t),this.fromPoint=this.from,this.toPoint=this.to}function AM(e,t){var n=nf(e);if(BE){var i=BE(e);t&&(i=iE(i).call(i,function(t){return VS(e,t).enumerable})),n.push.apply(n,i)}return n}var IM=(HT(JM,CM),Ah(JM,[{key:"_findBorderPositionBezier",value:function(t,e){var n,i,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._getViaCoordinates(),o=!1,a=1,s=0,l=this.to;t.id===this.from.id&&(l=this.from,o=!0);var c=0;do{i=.5*(s+a),n=this.getPoint(i,r);var u=Math.atan2(l.y-n.y,l.x-n.x),d=l.distanceToBorder(e,u)-Math.sqrt(Math.pow(n.x-l.x,2)+Math.pow(n.y-l.y,2));if(Math.abs(d)<.2)break;d<0?!1===o?s=i:a=i:!1===o?a=i:s=i,++c}while(s<=a&&c<10);return function(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)Hl(n=AM(Object(i),!0)).call(n,function(t){jE(e,t,i[t])});else if(YS)BS(e,YS(i));else{var r;Hl(r=AM(Object(i))).call(r,function(t){PS(e,t,VS(i,t))})}}return e}({},n,{t:i})}},{key:"_getDistanceToBezierEdge",value:function(t,e,n,i,r,o,a){var s,l,c,u,d,h=1e9,f=t,p=e;for(l=1;l<10;l++)c=.1*l,u=Math.pow(1-c,2)*t+2*c*(1-c)*a.x+Math.pow(c,2)*n,d=Math.pow(1-c,2)*e+2*c*(1-c)*a.y+Math.pow(c,2)*i,0<l&&(h=(s=this._getDistanceToLine(f,p,u,d,r,o))<h?s:h),f=u,p=d;return h}},{key:"_bezierCurve",value:function(t,e,n,i){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),null!=n&&null!=n.x?null!=i&&null!=i.x?t.bezierCurveTo(n.x,n.y,i.x,i.y,this.toPoint.x,this.toPoint.y):t.quadraticCurveTo(n.x,n.y,this.toPoint.x,this.toPoint.y):t.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(t,e),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),JM),PM=(HT(GM,IM),Ah(GM,[{key:"setOptions",value:function(t){XO(YT(GM.prototype),"setOptions",this).call(this,t);var e=!1;this.options.physics!==t.physics&&(e=!0),this.options=t,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),!0===e&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],void 0===this.from||void 0===this.to||!1===this.options.physics?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via&&(delete this._body.nodes[this.via.id],!(this.via=void 0))}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var t="edgeId:"+this.id,e=this._body.functions.createNode({id:t,shape:"circle",physics:!0,hidden:!0});this._body.nodes[t]=e,this.via=e,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(t,e,n){this._bezierCurve(t,e,n)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.via;if(this.from!==this.to)return{x:Math.pow(1-t,2)*this.fromPoint.x+2*t*(1-t)*e.x+Math.pow(t,2)*this.toPoint.x,y:Math.pow(1-t,2)*this.fromPoint.y+2*t*(1-t)*e.y+Math.pow(t,2)*this.toPoint.y};var n=this._getCircleData(),i=QE(n,3),r=i[0],o=i[1],a=i[2],s=2*Math.PI*(1-t);return{x:r+a*Math.sin(s),y:o+a-a*(1-Math.cos(s))}}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e,this.via)}},{key:"_getDistanceToEdge",value:function(t,e,n,i,r,o){return this._getDistanceToBezierEdge(t,e,n,i,r,o,this.via)}}]),GM),jM=(HT(VM,IM),Ah(VM,[{key:"_line",value:function(t,e,n){this._bezierCurve(t,e,n)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var t,e,n=this.options.smooth.roundness,i=this.options.smooth.type,r=Math.abs(this.from.x-this.to.x),o=Math.abs(this.from.y-this.to.y);if("discrete"===i||"diagonalCross"===i){var a,s;a=s=r<=o?n*o:n*r,this.from.x>this.to.x&&(a=-a),this.from.y>=this.to.y&&(s=-s);var l=this.from.x+a,c=this.from.y+s;return"discrete"===i&&(r<=o?l=r<n*o?this.from.x:l:c=o<n*r?this.from.y:c),{x:l,y:c}}if("straightCross"===i){var u=(1-n)*r,d=(1-n)*o;return r<=o?(u=0,this.from.y<this.to.y&&(d=-d)):(this.from.x<this.to.x&&(u=-u),d=0),{x:this.to.x+u,y:this.to.y+d}}if("horizontal"===i){var h=(1-n)*r;return this.from.x<this.to.x&&(h=-h),{x:this.to.x+h,y:this.from.y}}if("vertical"===i){var f=(1-n)*o;return this.from.y<this.to.y&&(f=-f),{x:this.from.x,y:this.to.y+f}}if("curvedCW"===i){r=this.to.x-this.from.x,o=this.from.y-this.to.y;var p=Math.sqrt(r*r+o*o),v=Math.PI,m=(Math.atan2(o,r)+(.5*n+.5)*v)%(2*v);return{x:this.from.x+(.5*n+.5)*p*Math.sin(m),y:this.from.y+(.5*n+.5)*p*Math.cos(m)}}if("curvedCCW"===i){r=this.to.x-this.from.x,o=this.from.y-this.to.y;var g=Math.sqrt(r*r+o*o),y=Math.PI,b=(Math.atan2(o,r)+(.5*-n+.5)*y)%(2*y);return{x:this.from.x+(.5*n+.5)*g*Math.sin(b),y:this.from.y+(.5*n+.5)*g*Math.cos(b)}}t=e=r<=o?n*o:n*r,this.from.x>this.to.x&&(t=-t),this.from.y>=this.to.y&&(e=-e);var w=this.from.x+t,_=this.from.y+e;return r<=o?w=this.from.x<=this.to.x?this.to.x<w?this.to.x:w:this.to.x>w?this.to.x:w:_=this.from.y>=this.to.y?this.to.y>_?this.to.y:_:this.to.y<_?this.to.y:_,{x:w,y:_}}},{key:"_findBorderPosition",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return this._findBorderPositionBezier(t,e,n.via)}},{key:"_getDistanceToEdge",value:function(t,e,n,i,r,o){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(t,e,n,i,r,o,a)}},{key:"getPoint",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),n=t;return{x:Math.pow(1-n,2)*this.fromPoint.x+2*n*(1-n)*e.x+Math.pow(n,2)*this.toPoint.x,y:Math.pow(1-n,2)*this.fromPoint.y+2*n*(1-n)*e.y+Math.pow(n,2)*this.toPoint.y}}}]),VM),NM=(HT(WM,IM),Ah(WM,[{key:"_getDistanceToBezierEdge2",value:function(t,e,n,i,r,o,a,s){for(var l=1e9,c=t,u=e,d=[0,0,0,0],h=1;h<10;h++){var f=.1*h;d[0]=Math.pow(1-f,3),d[1]=3*f*Math.pow(1-f,2),d[2]=3*Math.pow(f,2)*(1-f),d[3]=Math.pow(f,3);var p=d[0]*t+d[1]*a.x+d[2]*s.x+d[3]*n,v=d[0]*e+d[1]*a.y+d[2]*s.y+d[3]*i;if(0<h){var m=this._getDistanceToLine(c,u,p,v,r,o);l=m<l?m:l}c=p,u=v}return l}}]),WM),BM=(HT(UM,NM),Ah(UM,[{key:"_line",value:function(t,e,n){var i=n[0],r=n[1];this._bezierCurve(t,e,i,r)}},{key:"_getViaCoordinates",value:function(){var t,e,n,i,r=this.from.x-this.to.x,o=this.from.y-this.to.y,a=this.options.smooth.roundness;return n=(Math.abs(r)>Math.abs(o)||!0===this.options.smooth.forceDirection||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(e=this.from.y,i=this.to.y,t=this.from.x-a*r,this.to.x+a*r):(e=this.from.y-a*o,i=this.to.y+a*o,t=this.from.x,this.to.x),[{x:t,y:e},{x:n,y:i}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e)}},{key:"_getDistanceToEdge",value:function(t,e,n,i,r,o){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates(),s=QE(a,2),l=s[0],c=s[1];return this._getDistanceToBezierEdge2(t,e,n,i,r,o,l,c)}},{key:"getPoint",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),n=QE(e,2),i=n[0],r=n[1],o=t,a=[Math.pow(1-o,3),3*o*Math.pow(1-o,2),3*Math.pow(o,2)*(1-o),Math.pow(o,3)];return{x:a[0]*this.fromPoint.x+a[1]*i.x+a[2]*r.x+a[3]*this.toPoint.x,y:a[0]*this.fromPoint.y+a[1]*i.y+a[2]*r.y+a[3]*this.toPoint.y}}}]),UM),FM=(HT(qM,CM),Ah(qM,[{key:"_line",value:function(t,e){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),t.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(t){return{x:(1-t)*this.fromPoint.x+t*this.toPoint.x,y:(1-t)*this.fromPoint.y+t*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){var n=this.to,i=this.from;t.id===this.from.id&&(n=this.from,i=this.to);var r=Math.atan2(n.y-i.y,n.x-i.x),o=n.x-i.x,a=n.y-i.y,s=Math.sqrt(o*o+a*a),l=(s-t.distanceToBorder(e,r))/s;return{x:(1-l)*i.x+l*n.x,y:(1-l)*i.y+l*n.y,t:0}}},{key:"_getDistanceToEdge",value:function(t,e,n,i,r,o){return this._getDistanceToLine(t,e,n,i,r,o)}}]),qM),RM=(Ah(YM,[{key:"setOptions",value:function(t){if(t){var e=void 0!==t.physics&&this.options.physics!==t.physics||void 0!==t.hidden&&(this.options.hidden||!1)!==(t.hidden||!1)||void 0!==t.from&&this.options.from!==t.from||void 0!==t.to&&this.options.to!==t.to;YM.parseOptions(this.options,t,!0,this.globalOptions),void 0!==t.id&&(this.id=t.id),void 0!==t.from&&(this.fromId=t.from),void 0!==t.to&&(this.toId=t.to),void 0!==t.title&&(this.title=t.title),void 0!==t.value&&(t.value=VE(t.value));var n=[t,this.options,this.defaultOptions];return this.chooser=uT.choosify("edge",n),this.updateLabelModule(t),e=this.updateEdgeType()||e,this._setInteractionWidths(),this.connect(),e}}},{key:"getFormattingValues",value:function(){var t=!0===this.options.arrows.to||!0===this.options.arrows.to.enabled,e=!0===this.options.arrows.from||!0===this.options.arrows.from.enabled,n=!0===this.options.arrows.middle||!0===this.options.arrows.middle.enabled,i=this.options.color.inherit,r={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:n,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:e,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:i?void 0:this.options.color.color,inheritsColor:i,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(!0===this.chooser){if(this.selected){var o=this.options.selectionWidth;"function"==typeof o?r.width=o(r.width):"number"==typeof o&&(r.width+=o),r.width=Math.max(r.width,.3/this.body.view.scale),r.color=this.options.color.highlight,r.shadow=this.options.shadow.enabled}else if(this.hover){var a=this.options.hoverWidth;"function"==typeof a?r.width=a(r.width):"number"==typeof a&&(r.width+=a),r.width=Math.max(r.width,.3/this.body.view.scale),r.color=this.options.color.hover,r.shadow=this.options.shadow.enabled}}else"function"==typeof this.chooser&&(this.chooser(r,this.options.id,this.selected,this.hover),void 0!==r.color&&(r.inheritsColor=!1),!1===r.shadow&&(r.shadowColor===this.options.shadow.color&&r.shadowSize===this.options.shadow.size&&r.shadowX===this.options.shadow.x&&r.shadowY===this.options.shadow.y||(r.shadow=!0)));else r.shadow=this.options.shadow.enabled,r.width=Math.max(r.width,.3/this.body.view.scale);return r}},{key:"updateLabelModule",value:function(t){var e=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,e),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,e=!1,n=!0;return void 0!==this.edgeType&&((this.edgeType instanceof PM&&!0===t.enabled&&"dynamic"===t.type||this.edgeType instanceof BM&&!0===t.enabled&&"cubicBezier"===t.type||this.edgeType instanceof jM&&!0===t.enabled&&"dynamic"!==t.type&&"cubicBezier"!==t.type||this.edgeType instanceof FM&&!1===t.type.enabled)&&(n=!1),!0===n&&(e=this.cleanup())),!0===n?!0===t.enabled?"dynamic"===t.type?(e=!0,this.edgeType=new PM(this.options,this.body,this.labelModule)):"cubicBezier"===t.type?this.edgeType=new BM(this.options,this.body,this.labelModule):this.edgeType=new jM(this.options,this.body,this.labelModule):this.edgeType=new FM(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),e}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,!0===this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,e,n){if(void 0!==this.options.value){var i=this.options.scaling.customScalingFunction(t,e,n,this.options.value),r=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+i*o}this.options.width=this.options.scaling.min+i*r}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"==typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"==typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var e=this.getFormattingValues();if(!e.hidden){var n=this.edgeType.getViaNode(),i={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,e.fromArrow&&(i.from=this.edgeType.getArrowData(t,"from",n,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.fromPoint=i.from.core),e.fromArrowSrc&&(i.from.image=this.imagelist.load(e.fromArrowSrc)),e.fromArrowImageWidth&&(i.from.imageWidth=e.fromArrowImageWidth),e.fromArrowImageHeight&&(i.from.imageHeight=e.fromArrowImageHeight)),e.toArrow&&(i.to=this.edgeType.getArrowData(t,"to",n,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.toPoint=i.to.core),e.toArrowSrc&&(i.to.image=this.imagelist.load(e.toArrowSrc)),e.toArrowImageWidth&&(i.to.imageWidth=e.toArrowImageWidth),e.toArrowImageHeight&&(i.to.imageHeight=e.toArrowImageHeight)),e.middleArrow&&(i.middle=this.edgeType.getArrowData(t,"middle",n,this.selected,this.hover,e),e.middleArrowSrc&&(i.middle.image=this.imagelist.load(e.middleArrowSrc)),e.middleArrowImageWidth&&(i.middle.imageWidth=e.middleArrowImageWidth),e.middleArrowImageHeight&&(i.middle.imageHeight=e.middleArrowImageHeight)),this.edgeType.drawLine(t,e,this.selected,this.hover,n),this.drawArrows(t,i,e),this.drawLabel(t,n)}}},{key:"drawArrows",value:function(t,e,n){n.fromArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,e.from),n.middleArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,e.middle),n.toArrow&&this.edgeType.drawArrowHead(t,n,this.selected,this.hover,e.to)}},{key:"drawLabel",value:function(t,e){if(void 0!==this.options.label){var n=this.from,i=this.to;if(this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover),n.id!=i.id){this.labelModule.pointToSelf=!1;var r=this.edgeType.getPoint(.5,e);t.save();var o=this._getRotation(t);0!=o.angle&&(t.translate(o.x,o.y),t.rotate(o.angle)),this.labelModule.draw(t,r.x,r.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;var a=uT.getSelfRefCoordinates(t,this.options.selfReference.angle,this.options.selfReference.size,n);r=this._pointOnCircle(a.x,a.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(t,r.x,r.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var e=[];if(this.labelModule.visible()){var n=this._getRotation();uT.pointInRect(this.labelModule.getSize(),t,n)&&e.push({edgeId:this.id,labelId:0})}var i={left:t.x,top:t.y};return this.isOverlappingWith(i)&&e.push({edgeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){if(this.connected){var e=this.from.x,n=this.from.y,i=this.to.x,r=this.to.y,o=t.left,a=t.top;return this.edgeType.getDistanceToEdge(e,n,i,r,o,a)<10}return!1}},{key:"_getRotation",value:function(t){var e=this.edgeType.getViaNode(),n=this.edgeType.getPoint(.5,e);void 0!==t&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,n.x,n.y);var i={x:n.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible())return i;if("horizontal"===this.options.font.align)return i;var r=this.from.y-this.to.y,o=this.from.x-this.to.x,a=Math.atan2(r,o);return(a<-1&&o<0||0<a&&o<0)&&(a+=Math.PI),i.angle=a,i}},{key:"_pointOnCircle",value:function(t,e,n,i){return{x:t+n*Math.cos(i),y:e-n*Math.sin(i)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return void 0!==this.body.nodes[this.fromId]&&void 0!==this.body.nodes[this.toId]}}],[{key:"parseOptions",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},r=4<arguments.length&&void 0!==arguments[4]&&arguments[4];if(Zo(["arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],t,e,n),uT.isValidLabel(e.label)?t.label=e.label:uT.isValidLabel(t.label)||(t.label=void 0),Na(t,e,"smooth",i),Na(t,e,"shadow",i),Na(t,e,"background",i),void 0!==e.dashes&&null!==e.dashes?t.dashes=e.dashes:!0===n&&null===e.dashes&&(t.dashes=Ec(i.dashes)),void 0!==e.scaling&&null!==e.scaling?(void 0!==e.scaling.min&&(t.scaling.min=e.scaling.min),void 0!==e.scaling.max&&(t.scaling.max=e.scaling.max),Na(t.scaling,e.scaling,"label",i.scaling)):!0===n&&null===e.scaling&&(t.scaling=Ec(i.scaling)),void 0!==e.arrows&&null!==e.arrows)if("string"==typeof e.arrows){var o=e.arrows.toLowerCase();t.arrows.to.enabled=-1!=kc(o).call(o,"to"),t.arrows.middle.enabled=-1!=kc(o).call(o,"middle"),t.arrows.from.enabled=-1!=kc(o).call(o,"from")}else{if("object"!==cT(e.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+NO(e.arrows));Na(t.arrows,e.arrows,"to",i.arrows),Na(t.arrows,e.arrows,"middle",i.arrows),Na(t.arrows,e.arrows,"from",i.arrows)}else!0===n&&null===e.arrows&&(t.arrows=Ec(i.arrows));if(void 0!==e.color&&null!==e.color){var a=qo(e.color)?{color:e.color,highlight:e.color,hover:e.color,inherit:!1,opacity:1}:e.color,s=t.color;if(r)Qo(s,i.color,!1,n);else for(var l in s)s.hasOwnProperty(l)&&delete s[l];if(qo(s))(((s.color=s).highlight=s).hover=s).inherit=!1,void 0===a.opacity&&(s.opacity=1);else{var c=!1;void 0!==a.color&&(s.color=a.color,c=!0),void 0!==a.highlight&&(s.highlight=a.highlight,c=!0),void 0!==a.hover&&(s.hover=a.hover,c=!0),void 0!==a.inherit&&(s.inherit=a.inherit),void 0!==a.opacity&&(s.opacity=Math.min(1,Math.max(0,a.opacity))),!0===c?s.inherit=!1:void 0===s.inherit&&(s.inherit="from")}}else!0===n&&null===e.color&&(t.color=Pa(i.color));!0===n&&null===e.font&&(t.font=Pa(i.font)),e.hasOwnProperty("selfReferenceSize")&&(console.log("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),t.selfReference.size=e.selfReferenceSize)}}]),YM),HM=(Ah(zM,[{key:"bindEventListeners",value:function(){var t,e,s=this;this.body.emitter.on("_forceDisableDynamicCurves",function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];"dynamic"===t&&(t="continuous");var n=!1;for(var i in s.body.edges)if(s.body.edges.hasOwnProperty(i)){var r=s.body.edges[i],o=s.body.data.edges.get(i);if(null!=o){var a=o.smooth;void 0!==a&&!0===a.enabled&&"dynamic"===a.type&&(void 0===t?r.setOptions({smooth:!1}):r.setOptions({smooth:{type:t}}),n=!0)}}!0===e&&!0===n&&s.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){s.reconnectEdges()}),this.body.emitter.on("refreshEdges",Z(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",Z(e=this.refresh).call(e,this)),this.body.emitter.on("destroy",function(){la(s.edgesListeners,function(t,e){s.body.data.edges&&s.body.data.edges.off(e,t)}),delete s.body.functions.createEdge,delete s.edgesListeners.add,delete s.edgesListeners.update,delete s.edgesListeners.remove,delete s.edgesListeners})}},{key:"setOptions",value:function(t){if(void 0!==t){RM.parseOptions(this.options,t,!0,this.defaultOptions,!0);var e=!1;if(void 0!==t.smooth)for(var n in this.body.edges)this.body.edges.hasOwnProperty(n)&&(e=this.body.edges[n].updateEdgeType()||e);if(void 0!==t.font)for(var i in this.body.edges)this.body.edges.hasOwnProperty(i)&&this.body.edges[i].updateLabelModule();void 0===t.hidden&&void 0===t.physics&&!0!==e||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var n=this,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=this.body.data.edges;if(t instanceof CS||t instanceof LS)this.body.data.edges=t;else if(Wl(t))this.body.data.edges=new CS,this.body.data.edges.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.edges=new CS}if(i&&la(this.edgesListeners,function(t,e){i.off(e,t)}),this.body.edges={},this.body.data.edges){la(this.edgesListeners,function(t,e){n.body.data.edges.on(e,t)});var r=this.body.data.edges.getIds();this.add(r,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this.body.edges,i=this.body.data.edges,r=0;r<t.length;r++){var o=t[r],a=n[o];a&&a.disconnect();var s=i.get(o,{showInternalIds:!0});n[o]=this.create(s)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var e=this.body.edges,n=this.body.data.edges,i=!1,r=0;r<t.length;r++){var o=t[r],a=n.get(o),s=e[o];void 0!==s?(s.disconnect(),i=s.setOptions(a)||i,s.connect()):(this.body.edges[o]=this.create(a),i=!0)}!0===i?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(0!==t.length){var n=this.body.edges;la(t,function(t){var e=n[t];void 0!==e&&e.remove()}),e&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var i=this;la(this.body.edges,function(t,e){var n=i.body.data.edges.get(e);void 0!==n&&t.setOptions(n)})}},{key:"create",value:function(t){return new RM(t,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,e=this.body.nodes,n=this.body.edges;for(t in e)e.hasOwnProperty(t)&&(e[t].edges=[]);for(t in n)if(n.hasOwnProperty(t)){var i=n[t];i.from=null,i.to=null,i.connect()}}},{key:"getConnectedNodes",value:function(t){var e=[];if(void 0!==this.body.edges[t]){var n=this.body.edges[t];void 0!==n.fromId&&e.push(n.fromId),void 0!==n.toId&&e.push(n.toId)}return e}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var r=this,o=[];la(this.body.edges,function(t,e){var n=r.body.nodes[t.toId],i=r.body.nodes[t.fromId];void 0!==n&&!0===n.isCluster||void 0!==i&&!0===i.isCluster||void 0!==n&&void 0!==i||o.push(e)}),this.remove(o,!1)}},{key:"_addMissingEdges",value:function(){var t=this.body.data.edges;if(null!=t){var n=this.body.edges,i=[];Hl(t).call(t,function(t,e){void 0===n[e]&&i.push(e)}),this.add(i,!0)}}}]),zM);function zM(t,e,n){var i,r=this;Th(this,zM),this.body=t,this.images=e,this.groups=n,this.body.functions.createEdge=Z(i=this.create).call(i,this),this.edgesListeners={add:function(t,e){r.add(e.items)},update:function(t,e){r.update(e.items)},remove:function(t,e){r.remove(e.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,n,i){if(e===t)return.5;var r=1/(e-t);return Math.max(0,(i-t)*r)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Qo(this.options,this.defaultOptions),this.bindEventListeners()}function YM(t,e,n,i,r){if(Th(this,YM),void 0===e)throw new Error("No body provided");this.options=Pa(i),this.globalOptions=i,this.defaultOptions=r,this.body=e,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new AT(this.body,this.options,!0),this.setOptions(t)}function qM(t,e,n){return Th(this,qM),BT(this,YT(qM).call(this,t,e,n))}function UM(t,e,n){return Th(this,UM),BT(this,YT(UM).call(this,t,e,n))}function WM(t,e,n){return Th(this,WM),BT(this,YT(WM).call(this,t,e,n))}function VM(t,e,n){return Th(this,VM),BT(this,YT(VM).call(this,t,e,n))}function GM(t,e,n){var i;return Th(this,GM),(i=BT(this,YT(GM).call(this,t,e,n))).via=i.via,i._boundFunction=function(){i.positionBezierNode()},i._body.emitter.on("_repositionBezierNodes",i._boundFunction),i}function JM(t,e,n){return Th(this,JM),BT(this,YT(JM).call(this,t,e,n))}k({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var XM=R.Date.now;k({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});var ZM=R.Number.isNaN,$M=(Ah(tD,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&0<this.physicsBody.physicsNodeIndices.length){var t,e=this.body.nodes,n=this.physicsBody.physicsNodeIndices,i=n.length,r=this._formBarnesHutTree(e,n);this.barnesHutTree=r;for(var o=0;o<i;o++)0<(t=e[n[o]]).options.mass&&this._getForceContributions(r.root,t)}}},{key:"_getForceContributions",value:function(t,e){this._getForceContribution(t.children.NW,e),this._getForceContribution(t.children.NE,e),this._getForceContribution(t.children.SW,e),this._getForceContribution(t.children.SE,e)}},{key:"_getForceContribution",value:function(t,e){var n,i,r;0<t.childrenCount&&(n=t.centerOfMass.x-e.x,i=t.centerOfMass.y-e.y,(r=Math.sqrt(n*n+i*i))*t.calcSize>this.thetaInversed?this._calculateForces(r,n,i,e,t):4===t.childrenCount?this._getForceContributions(t,e):t.children.data.id!=e.id&&this._calculateForces(r,n,i,e,t))}},{key:"_calculateForces",value:function(t,e,n,i,r){0===t&&(e=t=.1),this.overlapAvoidanceFactor<1&&i.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,t-i.shape.radius));var o=this.options.gravitationalConstant*r.mass*i.options.mass/Math.pow(t,3),a=e*o,s=n*o;this.physicsBody.forces[i.id].x+=a,this.physicsBody.forces[i.id].y+=s}},{key:"_formBarnesHutTree",value:function(t,e){for(var n,i=e.length,r=t[e[0]].x,o=t[e[0]].y,a=t[e[0]].x,s=t[e[0]].y,l=1;l<i;l++){var c=t[e[l]],u=c.x,d=c.y;0<c.options.mass&&(u<r&&(r=u),a<u&&(a=u),d<o&&(o=d),s<d&&(s=d))}var h=Math.abs(a-r)-Math.abs(s-o);0<h?(o-=.5*h,s+=.5*h):(r+=.5*h,a-=.5*h);var f=Math.max(1e-5,Math.abs(a-r)),p=.5*f,v=.5*(r+a),m=.5*(o+s),g={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:v-p,maxX:v+p,minY:m-p,maxY:m+p},size:f,calcSize:1/f,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(g.root);for(var y=0;y<i;y++)0<(n=t[e[y]]).options.mass&&this._placeInTree(g.root,n);return g}},{key:"_updateBranchMass",value:function(t,e){var n=t.centerOfMass,i=t.mass+e.options.mass,r=1/i;n.x=n.x*t.mass+e.x*e.options.mass,n.x*=r,n.y=n.y*t.mass+e.y*e.options.mass,n.y*=r,t.mass=i;var o=Math.max(Math.max(e.height,e.radius),e.width);t.maxWidth=t.maxWidth<o?o:t.maxWidth}},{key:"_placeInTree",value:function(t,e,n){1==n&&void 0!==n||this._updateBranchMass(t,e);var i,r=t.children.NW.range;i=r.maxX>e.x?r.maxY>e.y?"NW":"SW":r.maxY>e.y?"NE":"SE",this._placeInRegion(t,e,i)}},{key:"_placeInRegion",value:function(t,e,n){var i=t.children[n];switch(i.childrenCount){case 0:i.children.data=e,i.childrenCount=1,this._updateBranchMass(i,e);break;case 1:i.children.data.x===e.x&&i.children.data.y===e.y?(e.x+=this._rng(),e.y+=this._rng()):(this._splitBranch(i),this._placeInTree(i,e));break;case 4:this._placeInTree(i,e)}}},{key:"_splitBranch",value:function(t){var e=null;1===t.childrenCount&&(e=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),null!=e&&this._placeInTree(t,e)}},{key:"_insertRegion",value:function(t,e){var n,i,r,o,a=.5*t.size;switch(e){case"NW":n=t.range.minX,i=t.range.minX+a,r=t.range.minY,o=t.range.minY+a;break;case"NE":n=t.range.minX+a,i=t.range.maxX,r=t.range.minY,o=t.range.minY+a;break;case"SW":n=t.range.minX,i=t.range.minX+a,r=t.range.minY+a,o=t.range.maxY;break;case"SE":n=t.range.minX+a,i=t.range.maxX,r=t.range.minY+a,o=t.range.maxY}t.children[e]={centerOfMass:{x:0,y:0},mass:0,range:{minX:n,maxX:i,minY:r,maxY:o},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,e){void 0!==this.barnesHutTree&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,e))}},{key:"_drawBranch",value:function(t,e,n){void 0===n&&(n="#FF0000"),4===t.childrenCount&&(this._drawBranch(t.children.NW,e),this._drawBranch(t.children.NE,e),this._drawBranch(t.children.SE,e),this._drawBranch(t.children.SW,e)),e.strokeStyle=n,e.beginPath(),e.moveTo(t.range.minX,t.range.minY),e.lineTo(t.range.maxX,t.range.minY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.minY),e.lineTo(t.range.maxX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.maxY),e.lineTo(t.range.minX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.minX,t.range.maxY),e.lineTo(t.range.minX,t.range.minY),e.stroke()}}]),tD),QM=(Ah(KM,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,n,i,r,o,a,s,l=this.body.nodes,c=this.physicsBody.physicsNodeIndices,u=this.physicsBody.forces,d=this.options.nodeDistance,h=-2/3/d,f=0;f<c.length-1;f++){a=l[c[f]];for(var p=f+1;p<c.length;p++)t=(s=l[c[p]]).x-a.x,e=s.y-a.y,0===(n=Math.sqrt(t*t+e*e))&&(t=n=.1*this._rng()),n<2*d&&(o=n<.5*d?1:h*n+4/3,i=t*(o/=n),r=e*o,u[a.id].x-=i,u[a.id].y-=r,u[s.id].x+=i,u[s.id].y+=r)}}}]),KM);function KM(t,e,n){Th(this,KM),this._rng=Rn("REPULSION SOLVER"),this.body=t,this.physicsBody=e,this.setOptions(n)}function tD(t,e,n){Th(this,tD),this.body=t,this.physicsBody=e,this.barnesHutTree,this.setOptions(n),this._rng=Rn("BARNES HUT SOLVER")}function eD(t){throw new Error('"'+t+'" is read-only')}var nD=(Ah(gD,[{key:"setOptions",value:function(t){this.options=t,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var t=this.body.nodes,e=this.physicsBody.physicsNodeIndices,n=this.physicsBody.forces,i=this.options.nodeDistance,r=0;r<e.length-1;r++)for(var o=t[e[r]],a=r+1;a<e.length;a++){var s=t[e[a]];if(o.level===s.level){var l=i+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(s.shape.radius||0)/2),c=s.x-o.x,u=s.y-o.y,d=Math.sqrt(c*c+u*u),h=void 0;h=d<l?-Math.pow(.05*d,2)+Math.pow(.05*l,2):0,0===d?(eD("distance"),d=.01):h/=d;var f=c*h,p=u*h;n[o.id].x-=f,n[o.id].y-=p,n[s.id].x+=f,n[s.id].y+=p}}}}]),gD),iD=(Ah(mD,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,n,i,r,o=this.physicsBody.physicsEdgeIndices,a=this.body.edges,s=0;s<o.length;s++)!0===(e=a[o[s]]).connected&&e.toId!==e.fromId&&void 0!==this.body.nodes[e.toId]&&void 0!==this.body.nodes[e.fromId]&&(void 0!==e.edgeType.via?(t=void 0===e.options.length?this.options.springLength:e.options.length,n=e.to,i=e.edgeType.via,r=e.from,this._calculateSpringForce(n,i,.5*t),this._calculateSpringForce(i,r,.5*t)):(t=void 0===e.options.length?1.5*this.options.springLength:e.options.length,this._calculateSpringForce(e.from,e.to,t)))}},{key:"_calculateSpringForce",value:function(t,e,n){var i=t.x-e.x,r=t.y-e.y,o=Math.max(Math.sqrt(i*i+r*r),.01),a=this.options.springConstant*(n-o)/o,s=i*a,l=r*a;void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x+=s,this.physicsBody.forces[t.id].y+=l),void 0!==this.physicsBody.forces[e.id]&&(this.physicsBody.forces[e.id].x-=s,this.physicsBody.forces[e.id].y-=l)}}]),mD),rD=(Ah(vD,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,n,i,r,o,a,s,l,c,u=this.body.edges,d=this.physicsBody.physicsEdgeIndices,h=this.physicsBody.physicsNodeIndices,f=this.physicsBody.forces,p=0;p<h.length;p++){var v=h[p];f[v].springFx=0,f[v].springFy=0}for(var m=0;m<d.length;m++)!0===(e=u[d[m]]).connected&&(t=void 0===e.options.length?this.options.springLength:e.options.length,n=e.from.x-e.to.x,i=e.from.y-e.to.y,s=0===(s=Math.sqrt(n*n+i*i))?.01:s,r=n*(a=this.options.springConstant*(t-s)/s),o=i*a,e.to.level!=e.from.level?(void 0!==f[e.toId]&&(f[e.toId].springFx-=r,f[e.toId].springFy-=o),void 0!==f[e.fromId]&&(f[e.fromId].springFx+=r,f[e.fromId].springFy+=o)):(void 0!==f[e.toId]&&(f[e.toId].x-=.5*r,f[e.toId].y-=.5*o),void 0!==f[e.fromId]&&(f[e.fromId].x+=.5*r,f[e.fromId].y+=.5*o)));a=1;for(var g=0;g<h.length;g++){var y=h[g];l=Math.min(a,Math.max(-a,f[y].springFx)),c=Math.min(a,Math.max(-a,f[y].springFy)),f[y].x+=l,f[y].y+=c}for(var b=0,w=0,_=0;_<h.length;_++){var k=h[_];b+=f[k].x,w+=f[k].y}for(var x=b/h.length,S=w/h.length,E=0;E<h.length;E++){var T=h[E];f[T].x-=x,f[T].y-=S}}}]),vD),oD=(Ah(pD,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,n,i,r=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces,s=0;s<o.length;s++)t=-(i=r[o[s]]).x,e=-i.y,n=Math.sqrt(t*t+e*e),this._calculateForces(n,t,e,a,i)}},{key:"_calculateForces",value:function(t,e,n,i,r){var o=0===t?0:this.options.centralGravity/t;i[r.id].x=e*o,i[r.id].y=n*o}}]),pD),aD=(HT(fD,$M),Ah(fD,[{key:"_calculateForces",value:function(t,e,n,i,r){0===t&&(e=t=.1*this._rng()),this.overlapAvoidanceFactor<1&&i.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*i.shape.radius,t-i.shape.radius));var o=i.edges.length+1,a=this.options.gravitationalConstant*r.mass*i.options.mass*o/Math.pow(t,2),s=e*a,l=n*a;this.physicsBody.forces[i.id].x+=s,this.physicsBody.forces[i.id].y+=l}}]),fD),sD=(HT(hD,oD),Ah(hD,[{key:"_calculateForces",value:function(t,e,n,i,r){if(0<t){var o=r.edges.length+1,a=this.options.centralGravity*o*r.options.mass;i[r.id].x=e*a,i[r.id].y=n*a}}}]),hD),lD=(Ah(dD,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",function(){t.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){t.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){t.stopSimulation(),t.ready=!1}),this.body.emitter.on("disablePhysics",function(){t.physicsEnabled=!1,t.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){t.setOptions(t.options),!0===t.ready&&t.startSimulation()}),this.body.emitter.on("startSimulation",function(){!0===t.ready&&t.startSimulation()}),this.body.emitter.on("stopSimulation",function(){t.stopSimulation()}),this.body.emitter.on("destroy",function(){t.stopSimulation(!1),t.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){t.updatePhysicsData()})}},{key:"setOptions",value:function(t){if(void 0!==t)if(!1===t)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(!0===t)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,$o(["stabilization"],this.options,t),Na(this.options,t,"stabilization"),void 0===t.enabled&&(this.options.enabled=!0),!1===this.options.enabled&&(this.physicsEnabled=!1,this.stopSimulation());var e=this.options.wind;e&&("number"==typeof e.x&&!ZM(e.x)||(e.x=0),"number"==typeof e.y&&!ZM(e.y)||(e.y=0)),this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){var t;"forceAtlas2Based"===this.options.solver?(t=this.options.forceAtlas2Based,this.nodesSolver=new aD(this.body,this.physicsBody,t),this.edgesSolver=new iD(this.body,this.physicsBody,t),this.gravitySolver=new sD(this.body,this.physicsBody,t)):("repulsion"===this.options.solver?(t=this.options.repulsion,this.nodesSolver=new QM(this.body,this.physicsBody,t),this.edgesSolver=new iD(this.body,this.physicsBody,t)):"hierarchicalRepulsion"===this.options.solver?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new nD(this.body,this.physicsBody,t),this.edgesSolver=new rD(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new $M(this.body,this.physicsBody,t),this.edgesSolver=new iD(this.body,this.physicsBody,t)),this.gravitySolver=new oD(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?!0===this.options.stabilization.enabled?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){var t;!0===this.physicsEnabled&&!0===this.options.enabled?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=Z(t=this.simulationStep).call(t,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];(this.stabilized=!0)===t&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),!(this.viewFunction=void 0)===t&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=XM();this.physicsTick(),(XM()-t<.4*this.simulationInterval||!0===this.runDoubleSpeed)&&!1===this.stabilized&&(this.physicsTick(),this.runDoubleSpeed=!0),!0===this.stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.stabilizationIterations;(1<this.stabilizationIterations||!0===this.startedStabilization)&&qh(function(){t.body.emitter.emit("stabilized",{iterations:e}),t.startedStabilization=!1,t.stabilizationIterations=0},0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){!0===this._evaluateStepQuality()?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}},{key:"physicsTick",value:function(){this._startStabilizing(),!0!==this.stabilized&&(!0===this.adaptiveTimestep&&!0===this.adaptiveTimestepEnabled?(this.adaptiveCounter%this.adaptiveInterval==0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),!0===this.stabilized&&this.revert(),this.stabilizationIterations++)}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,e=this.body.edges;for(var n in t)t.hasOwnProperty(n)&&!0===t[n].options.physics&&this.physicsBody.physicsNodeIndices.push(t[n].id);for(var i in e)e.hasOwnProperty(i)&&!0===e[i].options.physics&&this.physicsBody.physicsEdgeIndices.push(e[i].id);for(var r=0;r<this.physicsBody.physicsNodeIndices.length;r++){var o=this.physicsBody.physicsNodeIndices[r];this.physicsBody.forces[o]={x:0,y:0},void 0===this.physicsBody.velocities[o]&&(this.physicsBody.velocities[o]={x:0,y:0})}for(var a in this.physicsBody.velocities)void 0===t[a]&&delete this.physicsBody.velocities[a]}},{key:"revert",value:function(){var t=nf(this.previousStates),e=this.body.nodes,n=this.physicsBody.velocities;this.referenceState={};for(var i=0;i<t.length;i++){var r=t[i];void 0!==e[r]?!0===e[r].options.physics&&(this.referenceState[r]={positions:{x:e[r].x,y:e[r].y}},n[r].x=this.previousStates[r].vx,n[r].y=this.previousStates[r].vy,e[r].x=this.previousStates[r].x,e[r].y=this.previousStates[r].y):delete this.previousStates[r]}}},{key:"_evaluateStepQuality",value:function(){var t,e,n=this.body.nodes,i=this.referenceState;for(var r in this.referenceState)if(this.referenceState.hasOwnProperty(r)&&void 0!==n[r]&&(t=n[r].x-i[r].positions.x,e=n[r].y-i[r].positions.y,.3<Math.sqrt(Math.pow(t,2)+Math.pow(e,2))))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,e=0,n=0,i=0;i<t.length;i++){var r=t[i],o=this._performStep(r);e=Math.max(e,o),n+=o}this.adaptiveTimestepEnabled=n/t.length<5,this.stabilized=e<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,e,n){t+=(e-this.modelOptions.damping*t)/n*this.timestep;var i=this.options.maxVelocity||1e9;return Math.abs(t)>i&&(t=0<t?i:-i),t}},{key:"_performStep",value:function(t){var e=this.body.nodes[t],n=this.physicsBody.forces[t];this.options.wind&&(n.x+=this.options.wind.x,n.y+=this.options.wind.y);var i=this.physicsBody.velocities[t];return!(this.previousStates[t]={x:e.x,y:e.y,vx:i.x,vy:i.y})===e.options.fixed.x?(i.x=this.calculateComponentVelocity(i.x,n.x,e.options.mass),e.x+=i.x*this.timestep):(n.x=0,i.x=0),!1===e.options.fixed.y?(i.y=this.calculateComponentVelocity(i.y,n.y,e.options.mass),e.y+=i.y*this.timestep):(n.y=0,i.y=0),Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2))}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var e in t)if(t.hasOwnProperty(e)&&t[e].x&&t[e].y){var n=t[e].options.fixed;this.freezeCache[e]={x:n.x,y:n.y},n.x=!0,n.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var e in t)t.hasOwnProperty(e)&&void 0!==this.freezeCache[e]&&(t[e].options.fixed.x=this.freezeCache[e].x,t[e].options.fixed.y=this.freezeCache[e].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.stabilization.iterations;"number"!=typeof e&&(e=this.options.stabilization.iterations,console.log("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),0!==this.physicsBody.physicsNodeIndices.length?(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,!0===this.options.stabilization.onlyDynamicEdges&&this._freezeNodes(),this.stabilizationIterations=0,qh(function(){return t._stabilizationBatch()},0)):this.ready=!0}},{key:"_startStabilizing",value:function(){return!0!==this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0)}},{key:"_stabilizationBatch",value:function(){function t(){return!1===n.stabilized&&n.stabilizationIterations<n.targetIterations}function e(){n.body.emitter.emit("stabilizationProgress",{iterations:n.stabilizationIterations,total:n.targetIterations})}var n=this;this._startStabilizing()&&e();for(var i,r=0;t()&&r<this.options.stabilization.updateInterval;)this.physicsTick(),r++;e(),t()?qh(Z(i=this._stabilizationBatch).call(i,this),0):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),!0===this.options.stabilization.fit&&this.body.emitter.emit("fit"),!0===this.options.stabilization.onlyDynamicEdges&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),!0===this.stabilized?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var e=0;e<this.physicsBody.physicsNodeIndices.length;e++){var n=this.physicsBody.physicsNodeIndices[e],i=this.body.nodes[n],r=this.physicsBody.forces[n],o=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.x,2)),a=Math.min(Math.max(5,o),15),s=3*a,l=Ma((180-180*Math.min(1,Math.max(0,.03*o)))/360,1,1),c={x:i.x+20*r.x,y:i.y+20*r.y};t.lineWidth=a,t.strokeStyle=l,t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(c.x,c.y),t.stroke();var u=Math.atan2(r.y,r.x);t.fillStyle=l,pM.draw(t,{type:"arrow",point:c,angle:u,length:s}),WT(t).call(t)}}}]),dD),cD=[].reverse,uD=[1,2];function dD(t){Th(this,dD),this.body=t,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},Jo(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}function hD(t,e,n){return Th(this,hD),BT(this,YT(hD).call(this,t,e,n))}function fD(t,e,n){var i;return Th(this,fD),(i=BT(this,YT(fD).call(this,t,e,n)))._rng=Rn("FORCE ATLAS 2 BASED REPULSION SOLVER"),i}function pD(t,e,n){Th(this,pD),this.body=t,this.physicsBody=e,this.setOptions(n)}function vD(t,e,n){Th(this,vD),this.body=t,this.physicsBody=e,this.setOptions(n)}function mD(t,e,n){Th(this,mD),this.body=t,this.physicsBody=e,this.setOptions(n)}function gD(t,e,n){Th(this,gD),this.body=t,this.physicsBody=e,this.setOptions(n)}k({target:"Array",proto:!0,forced:String(uD)===String(uD.reverse())},{reverse:function(){return Ml(this)&&(this.length=this.length),cD.call(this)}});function yD(t){var e=t.reverse;return t===wD||t instanceof Array&&e===wD.reverse?bD:e}var bD=G("Array").reverse,wD=Array.prototype,_D=(Ah(TD,null,[{key:"getRange",value:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=1e9,r=-1e9,o=1e9,a=-1e9;if(0<n.length)for(var s=0;s<n.length;s++)o>(e=t[n[s]]).shape.boundingBox.left&&(o=e.shape.boundingBox.left),a<e.shape.boundingBox.right&&(a=e.shape.boundingBox.right),i>e.shape.boundingBox.top&&(i=e.shape.boundingBox.top),r<e.shape.boundingBox.bottom&&(r=e.shape.boundingBox.bottom);return 1e9===o&&-1e9===a&&1e9===i&&-1e9===r&&(a=o=r=i=0),{minX:o,maxX:a,minY:i,maxY:r}}},{key:"getRangeCore",value:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],i=1e9,r=-1e9,o=1e9,a=-1e9;if(0<n.length)for(var s=0;s<n.length;s++)o>(e=t[n[s]]).x&&(o=e.x),a<e.x&&(a=e.x),i>e.y&&(i=e.y),r<e.y&&(r=e.y);return 1e9===o&&-1e9===a&&1e9===i&&-1e9===r&&(a=o=r=i=0),{minX:o,maxX:a,minY:i,maxY:r}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,e){var n={};return void 0===e||"node"===e?(Qo(n,t.options,!0),n.x=t.x,n.y=t.y,n.amountOfConnections=t.edges.length):Qo(n,t.options,!0),n}}]),TD),kD=(HT(ED,qO),Ah(ED,[{key:"_openChildCluster",value:function(t){var o=this,e=this.body.nodes[t];if(void 0===this.containedNodes[t])throw new Error("node with id: "+t+" not in current cluster");if(!e.isCluster)throw new Error("node with id: "+t+" is not a cluster");delete this.containedNodes[t],la(e.edges,function(t){delete o.containedEdges[t.id]}),la(e.containedNodes,function(t,e){o.containedNodes[e]=t}),e.containedNodes={},la(e.containedEdges,function(t,e){o.containedEdges[e]=t}),e.containedEdges={},la(e.edges,function(r){la(o.edges,function(e){var t,n,i=kc(t=e.clusteringEdgeReplacingIds).call(t,r.id);-1!==i&&(la(r.clusteringEdgeReplacingIds,function(t){e.clusteringEdgeReplacingIds.push(t),o.body.edges[t].edgeReplacedById=e.id}),oc(n=e.clusteringEdgeReplacingIds).call(n,i,1))})}),e.edges=[]}}]),ED),xD=(Ah(SD,[{key:"clusterByHubsize",value:function(t,e){void 0===t?t=this._getHubSize():"object"===cT(t)&&(e=this._checkOptions(t),t=this._getHubSize());for(var n=[],i=0;i<this.body.nodeIndices.length;i++){var r=this.body.nodes[this.body.nodeIndices[i]];r.edges.length>=t&&n.push(r.id)}for(var o=0;o<n.length;o++)this.clusterByConnection(n[o],e,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var n=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(void 0===i.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");i=this._checkOptions(i);var r={},o={};la(this.body.nodes,function(t,e){t.options&&!0===i.joinCondition(t.options)&&la((r[e]=t).edges,function(t){void 0===n.clusteredEdges[t.id]&&(o[t.id]=t)})}),this._cluster(r,o,i,t)}},{key:"clusterByEdgeCount",value:function(d,h){var f=this,t=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];h=this._checkOptions(h);for(var p,v,m,g=[],y={},e=function(t){var n={},e={},i=f.body.nodeIndices[t],r=f.body.nodes[i];if(void 0===y[i]){v=[];for(var o=m=0;o<r.edges.length;o++)p=r.edges[o],void 0===f.clusteredEdges[p.id]&&(p.toId!==p.fromId&&m++,v.push(p));if(m===d){b=function(t){if(void 0===h.joinCondition||null===h.joinCondition)return!0;var e=_D.cloneOptions(t);return h.joinCondition(e)};for(var a=!0,s=0;s<v.length;s++){p=v[s];var l=f._getConnectedId(p,i);if(!b(r)){a=!1;break}e[p.id]=p,n[i]=r,n[l]=f.body.nodes[l],y[i]=!0}if(0<nf(n).length&&0<nf(e).length&&!0===a)if(void 0!==(w=function(){for(var t=0;t<g.length;++t)for(var e in n)if(void 0!==g[t].nodes[e])return g[t]}())){for(var c in n)void 0===w.nodes[c]&&(w.nodes[c]=n[c]);for(var u in e)void 0===w.edges[u]&&(w.edges[u]=e[u])}else g.push({nodes:n,edges:e})}}},n=0;n<this.body.nodeIndices.length;n++){var b,w;e(n)}for(var i=0;i<g.length;i++)this._cluster(g[i].nodes,g[i].edges,h,!1);!0===t&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(1,t,e)}},{key:"clusterBridges",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(2,t,e)}},{key:"clusterByConnection",value:function(t,e){var n,i=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[t])throw new Error("The nodeId given to clusterByConnection does not exist!");var r=this.body.nodes[t];void 0===(e=this._checkOptions(e,r)).clusterNodeProperties.x&&(e.clusterNodeProperties.x=r.x),void 0===e.clusterNodeProperties.y&&(e.clusterNodeProperties.y=r.y),void 0===e.clusterNodeProperties.fixed&&(e.clusterNodeProperties.fixed={},e.clusterNodeProperties.fixed.x=r.options.fixed.x,e.clusterNodeProperties.fixed.y=r.options.fixed.y);var o={},a={},s=r.id,l=_D.cloneOptions(r);o[s]=r;for(var c=0;c<r.edges.length;c++){var u=r.edges[c];if(void 0===this.clusteredEdges[u.id]){var d=this._getConnectedId(u,s);if(void 0===this.clusteredNodes[d])if(d!==s)if(void 0===e.joinCondition)a[u.id]=u,o[d]=this.body.nodes[d];else{var h=_D.cloneOptions(this.body.nodes[d]);!0===e.joinCondition(l,h)&&(a[u.id]=u,o[d]=this.body.nodes[d])}else a[u.id]=u}}var f=lu(n=nf(o)).call(n,function(t){return o[t].id});for(p in o)if(o.hasOwnProperty(p))for(var p=o[p],v=0;v<p.edges.length;v++){var m=p.edges[v];-1<kc(f).call(f,this._getConnectedId(m,p.id))&&(a[m.id]=m)}this._cluster(o,a,e,i)}},{key:"_createClusterEdges",value:function(t,e,n,i){for(var r,o,a,s,l,c,u=nf(t),d=[],h=0;h<u.length;h++){a=t[o=u[h]];for(var f=0;f<a.edges.length;f++)r=a.edges[f],void 0===this.clusteredEdges[r.id]&&(r.toId==r.fromId?e[r.id]=r:c=r.toId==o?(s=n.id,l=r.fromId):(s=r.toId,l=n.id,s),void 0===t[c]&&d.push({edge:r,fromId:l,toId:s}))}for(var p=[],v=function(t){for(var e=0;e<p.length;e++){var n=p[e],i=t.fromId===n.fromId&&t.toId===n.toId,r=t.fromId===n.toId&&t.toId===n.fromId;if(i||r)return n}return null},m=0;m<d.length;m++){var g=d[m],y=g.edge,b=v(g);null===b?(b=this._createClusteredEdge(g.fromId,g.toId,y,i),p.push(b)):b.clusteringEdgeReplacingIds.push(y.id),this.body.edges[y.id].edgeReplacedById=b.id,this._backupEdgeOptions(y),y.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return void 0===t.clusterEdgeProperties&&(t.clusterEdgeProperties={}),void 0===t.clusterNodeProperties&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,e,n){var i=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],r=[];for(var o in t)t.hasOwnProperty(o)&&void 0!==this.clusteredNodes[o]&&r.push(o);for(var a=0;a<r.length;++a)delete t[r[a]];if(0!=nf(t).length&&(1!=nf(t).length||1==n.clusterNodeProperties.allowSingleNodeCluster)){var s=Qo({},n.clusterNodeProperties);if(void 0!==n.processProperties){var l=[];for(var c in t)if(t.hasOwnProperty(c)){var u=_D.cloneOptions(t[c]);l.push(u)}var d=[];for(var h in e)if(e.hasOwnProperty(h)&&"clusterEdge:"!==h.substr(0,12)){var f=_D.cloneOptions(e[h],"edge");d.push(f)}if(!(s=n.processProperties(s,l,d)))throw new Error("The processProperties function does not return properties!")}void 0===s.id&&(s.id="cluster:"+Po());var p=s.id;void 0===s.label&&(s.label="cluster");var v=void 0;void 0===s.x&&(v=this._getClusterPosition(t),s.x=v.x),void 0===s.y&&(void 0===v&&(v=this._getClusterPosition(t)),s.y=v.y),s.id=p;var m=this.body.functions.createNode(s,kD);m.containedNodes=t,m.containedEdges=e,m.clusterEdgeProperties=n.clusterEdgeProperties,this.body.nodes[s.id]=m,this._clusterEdges(t,e,s,n.clusterEdgeProperties),!(s.id=void 0)===i&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){void 0===this.clusteredEdges[t.id]&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var e=this.clusteredEdges[t.id];void 0!==e&&(t.setOptions({physics:e.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return void 0!==this.body.nodes[t]?!0===this.body.nodes[t].isCluster:(console.log("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var e,n=nf(t),i=t[n[0]].x,r=t[n[0]].x,o=t[n[0]].y,a=t[n[0]].y,s=1;s<n.length;s++)i=(e=t[n[s]]).x<i?e.x:i,r=e.x>r?e.x:r,o=e.y<o?e.y:o,a=e.y>a?e.y:a;return{x:.5*(i+r),y:.5*(o+a)}}},{key:"openCluster",value:function(t,e){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No clusterNodeId supplied to openCluster.");var i=this.body.nodes[t];if(void 0===i)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(!0!==i.isCluster||void 0===i.containedNodes||void 0===i.containedEdges)throw new Error("The node:"+t+" is not a valid cluster.");var r=this.findNode(t),o=kc(r).call(r,t)-1;if(0<=o){var a=r[o];return this.body.nodes[a]._openChildCluster(t),delete this.body.nodes[t],void(!0===n&&this.body.emitter.emit("_dataChanged"))}var s=i.containedNodes,l=i.containedEdges;if(void 0!==e&&void 0!==e.releaseFunction&&"function"==typeof e.releaseFunction){var c={},u={x:i.x,y:i.y};for(var d in s)if(s.hasOwnProperty(d)){var h=this.body.nodes[d];c[d]={x:h.x,y:h.y}}var f=e.releaseFunction(u,c);for(var p in s)if(s.hasOwnProperty(p)){var v=this.body.nodes[p];void 0!==f[p]&&(v.x=void 0===f[p].x?i.x:f[p].x,v.y=void 0===f[p].y?i.y:f[p].y)}}else la(s,function(t){!1===t.options.fixed.x&&(t.x=i.x),!1===t.options.fixed.y&&(t.y=i.y)});for(var m in s)if(s.hasOwnProperty(m)){var g=this.body.nodes[m];g.vx=i.vx,g.vy=i.vy,g.setOptions({physics:!0}),delete this.clusteredNodes[m]}for(var y=[],b=0;b<i.edges.length;b++)y.push(i.edges[b]);for(var w=0;w<y.length;w++){for(var _=y[w],k=this._getConnectedId(_,t),x=this.clusteredNodes[k],S=0;S<_.clusteringEdgeReplacingIds.length;S++){var E=_.clusteringEdgeReplacingIds[S],T=this.body.edges[E];if(void 0!==T)if(void 0!==x){var O=this.body.nodes[x.clusterId];delete l[(O.containedEdges[T.id]=T).id];var M=T.fromId,D=T.toId;T.toId==k?D=x.clusterId:M=x.clusterId,this._createClusteredEdge(M,D,T,O.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(T)}_.remove()}for(var C in l)l.hasOwnProperty(C)&&this._restoreEdge(l[C]);delete this.body.nodes[t],!0===n&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var e=[];if(!0===this.isCluster(t)){var n=this.body.nodes[t].containedNodes;for(var i in n)n.hasOwnProperty(i)&&e.push(this.body.nodes[i].id)}return e}},{key:"findNode",value:function(t){for(var e,n=[],i=0;void 0!==this.clusteredNodes[t]&&i<100;){if(void 0===(e=this.body.nodes[t]))return[];n.push(e.id),t=this.clusteredNodes[t].clusterId,i++}return void 0===(e=this.body.nodes[t])?[]:(n.push(e.id),yD(n).call(n),n)}},{key:"updateClusteredNode",value:function(t,e){if(void 0===t)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(void 0===e)throw new Error("No newOptions supplied to updateClusteredNode.");if(void 0===this.body.nodes[t])throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(e),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,e){if(void 0===t)throw new Error("No startEdgeId supplied to updateEdge.");if(void 0===e)throw new Error("No newOptions supplied to updateEdge.");if(void 0===this.body.edges[t])throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var n=this.getClusteredEdges(t),i=0;i<n.length;i++)this.body.edges[n[i]].setOptions(e);this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var e=[],n=0;void 0!==t&&void 0!==this.body.edges[t]&&n<100;)e.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,n++;return yD(e).call(e),e}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var e=[t],n=[],i=[],r=0;0<e.length&&r<100;){var o=e.pop();if(void 0!==o){var a=this.body.edges[o];if(void 0!==a){r++;var s=a.clusteringEdgeReplacingIds;if(void 0===s)i.push(o);else for(var l=0;l<s.length;++l){var c=s[l];-1===kc(e).call(e,s)&&-1===kc(n).call(n,s)&&e.push(c)}n.push(o)}}}return i}},{key:"_getConnectedId",value:function(t,e){return t.toId!=e?t.toId:(t.fromId,t.fromId)}},{key:"_getHubSize",value:function(){for(var t=0,e=0,n=0,i=0,r=0;r<this.body.nodeIndices.length;r++){var o=this.body.nodes[this.body.nodeIndices[r]];o.edges.length>i&&(i=o.edges.length),t+=o.edges.length,e+=Math.pow(o.edges.length,2),n+=1}t/=n;var a=(e/=n)-Math.pow(t,2),s=Math.sqrt(a),l=Math.floor(t+2*s);return i<l&&(l=i),l}},{key:"_createClusteredEdge",value:function(t,e,n,i,r){var o=_D.cloneOptions(n,"edge");Qo(o,i),o.from=t,o.to=e,o.id="clusterEdge:"+Po(),void 0!==r&&Qo(o,r);var a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[n.id],a.connect(),this.body.edges[a.id]=a}},{key:"_clusterEdges",value:function(t,e,n,i){if(e instanceof RM){var r=e,o={};o[r.id]=r,e=o}if(t instanceof qO){var a=t,s={};s[a.id]=a,t=s}if(null==n)throw new Error("_clusterEdges: parameter clusterNode required");for(var l in void 0===i&&(i=n.clusterEdgeProperties),this._createClusterEdges(t,e,n,i),e)if(e.hasOwnProperty(l)&&void 0!==this.body.edges[l]){var c=this.body.edges[l];this._backupEdgeOptions(c),c.setOptions({physics:!1})}for(var u in t)t.hasOwnProperty(u)&&(this.clusteredNodes[u]={clusterId:n.id,node:this.body.nodes[u]},this.body.nodes[u].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(void 0!==t){var e=this.clusteredNodes[t];if(void 0!==e){var n=e.clusterId;if(void 0!==n)return this.body.nodes[n]}}}},{key:"_filter",value:function(t,e){var n=[];return la(t,function(t){e(t)&&n.push(t)}),n}},{key:"_updateState",value:function(){function e(e){la(o.body.nodes,function(t){!0===t.isCluster&&e(t)})}var t,o=this,n=[],a={};for(t in this.clusteredNodes)this.clusteredNodes.hasOwnProperty(t)&&void 0===this.body.nodes[t]&&n.push(t);e(function(t){for(var e=0;e<n.length;e++)delete t.containedNodes[n[e]]});for(var i=0;i<n.length;i++)delete this.clusteredNodes[n[i]];la(this.clusteredEdges,function(t){var e=o.body.edges[t];void 0!==e&&e.endPointsValid()||(a[t]=t)}),e(function(t){la(t.containedEdges,function(t,e){t.endPointsValid()||a[e]||(a[e]=e)})}),la(this.body.edges,function(t,e){var n=!0,i=t.clusteringEdgeReplacingIds;if(void 0!==i){var r=0;la(i,function(t){var e=o.body.edges[t];void 0!==e&&e.endPointsValid()&&(r+=1)}),n=0<r}t.endPointsValid()&&n||(a[e]=e)}),e(function(i){la(a,function(n){delete i.containedEdges[n],la(i.edges,function(t,e){t.id!==n?t.clusteringEdgeReplacingIds=o._filter(t.clusteringEdgeReplacingIds,function(t){return!a[t]}):i.edges[e]=null}),i.edges=o._filter(i.edges,function(t){return null!==t})})}),la(a,function(t){delete o.clusteredEdges[t]}),la(a,function(t){delete o.body.edges[t]}),la(nf(this.body.edges),function(t){var e=o.body.edges[t],n=o._isClusteredNode(e.fromId)||o._isClusteredNode(e.toId);if(n!==o._isClusteredEdge(e.id))if(n){var i=o._getClusterNodeForNode(e.fromId);void 0!==i&&o._clusterEdges(o.body.nodes[e.fromId],e,i);var r=o._getClusterNodeForNode(e.toId);void 0!==r&&o._clusterEdges(o.body.nodes[e.toId],e,r)}else delete o._clusterEdges[t],o._restoreEdge(e)});for(var r=!1,s=!0,l=function(){var i=[];e(function(t){var e=nf(t.containedNodes).length,n=!0===t.options.allowSingleNodeCluster;(n&&e<1||!n&&e<2)&&i.push(t.id)});for(var t=0;t<i.length;++t)o.openCluster(i[t],{},!1);s=0<i.length,r=r||s};s;)l();r&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return void 0!==this.clusteredNodes[t]}},{key:"_isClusteredEdge",value:function(t){return void 0!==this.clusteredEdges[t]}}]),SD);function SD(t){var e=this;Th(this,SD),this.body=t,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},Jo(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){e.clusteredNodes={},e.clusteredEdges={}})}function ED(t,e,n,i,r,o){var a;return Th(this,ED),(a=BT(this,YT(ED).call(this,t,e,n,i,r,o))).isCluster=!0,a.containedNodes={},a.containedEdges={},a}function TD(){Th(this,TD)}var OD=(Ah(PD,[{key:"bindEventListeners",value:function(){var t,e=this;this.body.emitter.on("dragStart",function(){e.dragging=!0}),this.body.emitter.on("dragEnd",function(){e.dragging=!1}),this.body.emitter.on("zoom",function(){e.zooming=!0,window.clearTimeout(e.zoomTimeoutId),e.zoomTimeoutId=window.setTimeout(function(){var t;e.zooming=!1,Z(t=e._requestRedraw).call(t,e)()},250)}),this.body.emitter.on("_resizeNodes",function(){e._resizeNodes()}),this.body.emitter.on("_redraw",function(){!1===e.renderingActive&&e._redraw()}),this.body.emitter.on("_blockRedraw",function(){e.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){e.allowRedraw=!0,e.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",Z(t=this._requestRedraw).call(t,this)),this.body.emitter.on("_startRendering",function(){e.renderRequests+=1,e.renderingActive=!0,e._startRendering()}),this.body.emitter.on("_stopRendering",function(){e.renderRequests-=1,e.renderingActive=0<e.renderRequests,e.renderTimer=void 0}),this.body.emitter.on("destroy",function(){e.renderRequests=0,e.allowRedraw=!1,!(e.renderingActive=!1)===e.requiresTimeout?clearTimeout(e.renderTimer):window.cancelAnimationFrame(e.renderTimer),e.body.emitter.off()})}},{key:"setOptions",value:function(t){void 0!==t&&Zo(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,t)}},{key:"_requestNextFrame",value:function(t,e){if("undefined"!=typeof window){var n,i=window;return!0===this.requiresTimeout?n=i.setTimeout(t,e):i.requestAnimationFrame&&(n=i.requestAnimationFrame(t)),n}}},{key:"_startRendering",value:function(){var t;!0===this.renderingActive&&void 0===this.renderTimer&&(this.renderTimer=this._requestNextFrame(Z(t=this._renderStep).call(t,this),this.simulationInterval))}},{key:"_renderStep",value:function(){!0===this.renderingActive&&(!(this.renderTimer=void 0)===this.requiresTimeout&&this._startRendering(),this._redraw(),!1===this.requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;!0!==this.redrawRequested&&!1===this.renderingActive&&!0===this.allowRedraw&&(this.redrawRequested=!0,this._requestNextFrame(function(){t._redraw(!1)},0))}},{key:"_redraw",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(!0===this.allowRedraw){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1,0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.canvas.setTransform();var e=this.canvas.getContext(),n=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;if(e.clearRect(0,0,n,i),0===this.canvas.frame.clientWidth)return;e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale),e.beginPath(),this.body.emitter.emit("beforeDrawing",e),e.closePath(),!1===t&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawEdges(e),(!1===this.dragging||!0===this.dragging&&!1===this.options.hideNodesOnDrag)&&this._drawNodes(e,t),e.beginPath(),this.body.emitter.emit("afterDrawing",e),e.closePath(),e.restore(),!0===t&&e.clearRect(0,0,n,i)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var e,n=this.body.nodes;for(var i in n)n.hasOwnProperty(i)&&((e=n[i]).resize(t),e.updateBoundingBox(t,e.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var e,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=this.body.nodes,r=this.body.nodeIndices,o=[],a=this.canvas.DOMtoCanvas({x:-20,y:-20}),s=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+20,y:this.canvas.frame.canvas.clientHeight+20}),l={top:a.y,left:a.x,bottom:s.y,right:s.x},c=0;c<r.length;c++)(e=i[r[c]]).isSelected()?o.push(r[c]):!0===n?e.draw(t):!0===e.isBoundingBoxOverlappingWith(l)?e.draw(t):e.updateBoundingBox(t,e.selected);for(var u=0;u<o.length;u++)(e=i[o[u]]).draw(t)}},{key:"_drawEdges",value:function(t){for(var e,n=this.body.edges,i=this.body.edgeIndices,r=0;r<i.length;r++)!0===(e=n[i[r]]).connected&&e.draw(t)}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,-1!=kc(t).call(t,"msie 9.0")?this.requiresTimeout=!0:-1!=kc(t).call(t,"safari")&&kc(t).call(t,"chrome")<=-1&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}}]),PD),MD=R.setInterval,DD=n(function(t,e){e.onTouch=function(t,e){e.inputHandler=function(t){t.isFirst&&e(t)},t.on("hammer.input",e.inputHandler)},e.onRelease=function(t,e){return e.inputHandler=function(t){t.isFinal&&e(t)},t.on("hammer.input",e.inputHandler)},e.offTouch=function(t,e){t.off("hammer.input",e.inputHandler)},e.offRelease=e.offTouch,e.disablePreventDefaultVertically=function(t){return t.getTouchAction=function(){return["pan-y"]},t}}),CD=(DD.onTouch,DD.onRelease,DD.offTouch,DD.offRelease,DD.disablePreventDefaultVertically,Ah(ID,[{key:"bindEventListeners",value:function(){var t,e=this;this.body.emitter.once("resize",function(t){0!==t.width&&(e.body.view.translation.x=.5*t.width),0!==t.height&&(e.body.view.translation.y=.5*t.height)}),this.body.emitter.on("setSize",Z(t=this.setSize).call(t,this)),this.body.emitter.on("destroy",function(){e.hammerFrame.destroy(),e.hammer.destroy(),e._cleanUp()})}},{key:"setOptions",value:function(t){var e,n=this;void 0!==t&&Zo(["width","height","autoResize"],this.options,t),!0===this.options.autoResize&&(this._cleanUp(),this.resizeTimer=MD(function(){!0===n.setSize()&&n.body.emitter.emit("_requestRedraw")},1e3),this.resizeFunction=Z(e=this._onResize).call(e,this),ha(window,"resize",this.resizeFunction))}},{key:"_cleanUp",value:function(){void 0!==this.resizeTimer&&clearInterval(this.resizeTimer),fa(window,"resize",this.resizeFunction),this.resizeFunction=void 0}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.pixelRatio;!0===this.initialized&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&0<this.cameraState.previousWidth&&0<this.cameraState.previousHeight){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,e=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,n=this.cameraState.scale;1!=t&&1!=e?n=.5*this.cameraState.scale*(t+e):1!=t?n=this.cameraState.scale*t:1!=e&&(n=this.cameraState.scale*e),this.body.view.scale=n;var i=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),r=i.x-this.cameraState.position.x,o=i.y-this.cameraState.position.y;this.body.view.translation.x+=r*this.body.view.scale,this.body.view.translation.y+=o*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if("number"==typeof t)return t+"px";if("string"==typeof t){if(-1!==kc(t).call(t,"%")||-1!==kc(t).call(t,"px"))return t;if(-1===kc(t).call(t,"%"))return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=900,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var e=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new kh(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:kh.DIRECTION_ALL}),DD.onTouch(this.hammer,function(t){e.body.eventListeners.onTouch(t)}),this.hammer.on("tap",function(t){e.body.eventListeners.onTap(t)}),this.hammer.on("doubletap",function(t){e.body.eventListeners.onDoubleTap(t)}),this.hammer.on("press",function(t){e.body.eventListeners.onHold(t)}),this.hammer.on("panstart",function(t){e.body.eventListeners.onDragStart(t)}),this.hammer.on("panmove",function(t){e.body.eventListeners.onDrag(t)}),this.hammer.on("panend",function(t){e.body.eventListeners.onDragEnd(t)}),this.hammer.on("pinch",function(t){e.body.eventListeners.onPinch(t)}),this.frame.canvas.addEventListener("wheel",function(t){e.body.eventListeners.onMouseWheel(t)}),this.frame.canvas.addEventListener("mousemove",function(t){e.body.eventListeners.onMouseMove(t)}),this.frame.canvas.addEventListener("contextmenu",function(t){e.body.eventListeners.onContext(t)}),this.hammerFrame=new kh(this.frame),DD.onRelease(this.hammerFrame,function(t){e.body.eventListeners.onRelease(t)})}},{key:"setSize",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.width,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.options.height;t=this._prepareValue(t),e=this._prepareValue(e);var n=!1,i=this.frame.canvas.width,r=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||e!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=e)this._getCameraState(o),this.frame.style.width=t,this.frame.style.height=e,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=e,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},n=!0;else{var a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),s=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);this.frame.canvas.width===a&&this.frame.canvas.height===s||this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,n=!0),this.frame.canvas.height!==s&&(this.frame.canvas.height=s,n=!0)}return!0===n&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(i/this.pixelRatio),oldHeight:Math.round(r/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,n}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");var e=1;return"undefined"!=typeof window&&(e=window.devicePixelRatio||1),e/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),ID),LD=b.isFinite,AD=Number.isFinite||function(t){return"number"==typeof t&&LD(t)};function ID(t){var e;Th(this,ID),this.body=t,this.pixelRatio=1,this.resizeTimer=void 0,this.resizeFunction=Z(e=this._onResize).call(e,this),this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},Jo(this.options,this.defaultOptions),this.bindEventListeners()}function PD(t,e){var n;Th(this,PD),void 0!==window&&(n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),window.requestAnimationFrame=void 0===n?function(t){t()}:n,this.body=t,this.canvas=e,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},Jo(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}k({target:"Number",stat:!0},{isFinite:AD});function jD(t,e,n,i){try{return i?e(v(n)[0],n[1]):e(n)}catch(e){var r=t.return;throw void 0!==r&&v(r.call(t)),e}}function ND(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function BD(n,t,e){var i,r=-1!==n.indexOf("Map"),a=-1!==n.indexOf("Weak"),o=r?"set":"add",s=b[n],l=s&&s.prototype,c={};if(f&&"function"==typeof s&&(a||l.forEach&&!d(function(){(new s).entries().next()}))){i=t(function(t,e){KD(ND(t,i,n),{type:n,collection:new s}),null!=e&&ZD(e,t[o],t,r)});var u=tC(n);QD(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(r){var o="add"==r||"set"==r;r in l&&(!a||"clear"!=r)&&Y(i.prototype,r,function(t,e){var n=u(this).collection;if(!o&&a&&!h(t))return"get"==r&&void 0;var i=n[r](0===t?0:t,e);return o?this:i})}),a||$D(i.prototype,"size",{configurable:!0,get:function(){return u(this).collection.size}})}else i=e.getConstructor(t,n,r,o),GD.REQUIRED=!0;return tl(i,n,!1,!0),c[n]=i,k({global:!0,forced:!0},c),a||e.setStrong(i,n,r),i}function FD(t,e,n){for(var i in e)n&&n.unsafe&&t[i]?t[i]=e[i]:nl(t,i,e[i],n);return t}function RD(c){return function(t,e,n,i){u(e);var r=hs(t),o=T(r),a=Ds(r.length),s=c?a-1:0,l=c?-1:1;if(n<2)for(;;){if(s in o){i=o[s],s+=l;break}if(s+=l,c?s<0:a<=s)throw TypeError("Reduce of empty array with no initial value")}for(;c?0<=s:s<a;s+=l)s in o&&(i=e(i,o[s],s,r));return i}}var HD=R.Number.isFinite,zD=(Ah(vC,[{key:"setOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.options=t}},{key:"fit",value:function(){var t,e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{nodes:[]},i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];void 0!==(n=TT({},n)).nodes&&0!==n.nodes.length||(n.nodes=this.body.nodeIndices);var r=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(0===r||0===o)e=1,t=_D.getRange(this.body.nodes,n.nodes);else if(!0===i){var a=0;for(var s in this.body.nodes)this.body.nodes.hasOwnProperty(s)&&!0===this.body.nodes[s].predefinedPosition&&(a+=1);if(a>.5*this.body.nodeIndices.length)return void this.fit(n,!1);t=_D.getRange(this.body.nodes,n.nodes),e=12.662/(this.body.nodeIndices.length+7.4147)+.0964822,e*=Math.min(r/600,o/600)}else{this.body.emitter.emit("_resizeNodes"),t=_D.getRange(this.body.nodes,n.nodes);var l=r/(1.1*Math.abs(t.maxX-t.minX)),c=o/(1.1*Math.abs(t.maxY-t.minY));e=l<=c?l:c}1<e?e=1:0===e&&(e=1);var u={position:_D.findCenter(t),scale:e,animation:n.animation};this.moveTo(u)}},{key:"focus",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==this.body.nodes[t]){var n={x:this.body.nodes[t].x,y:this.body.nodes[t].y};e.position=n,e.lockedOnNode=t,this.moveTo(e)}else console.log("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){if(void 0!==t){if(null!=t.offset){if(null!=t.offset.x){if(t.offset.x=+t.offset.x,!HD(t.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else t.offset.x=0;if(null!=t.offset.y){if(t.offset.y=+t.offset.y,!HD(t.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else t.offset.x=0}else t.offset={x:0,y:0};if(null!=t.position){if(null!=t.position.x){if(t.position.x=+t.position.x,!HD(t.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else t.position.x=0;if(null!=t.position.y){if(t.position.y=+t.position.y,!HD(t.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else t.position.x=0}else t.position=this.getViewPosition();if(null!=t.scale){if(t.scale=+t.scale,!(0<t.scale))throw new TypeError('The option "scale" has to be a number greater than zero.')}else t.scale=this.body.view.scale;void 0===t.animation&&(t.animation={duration:0}),!1===t.animation&&(t.animation={duration:0}),!0===t.animation&&(t.animation={}),void 0===t.animation.duration&&(t.animation.duration=1e3),void 0===t.animation.easingFunction&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)}else t={}}},{key:"animateView",value:function(t){if(void 0!==t){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),!0===t.locked&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var e,n,i=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),r=i.x-t.position.x,o=i.y-t.position.y;this.targetTranslation={x:this.sourceTranslation.x+r*this.targetScale+t.offset.x,y:this.sourceTranslation.y+o*this.targetScale+t.offset.y},0===t.animation.duration?null!=this.lockedOnNodeId?(this.viewFunction=Z(e=this._lockedRedraw).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=Z(n=this._transitionRedraw).call(n,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var t=this.body.nodes[this.lockedOnNodeId].x,e=this.body.nodes[this.lockedOnNodeId].y,n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i=n.x-t,r=n.y-e,o=this.body.view.translation,a={x:o.x+i*this.body.view.scale+this.lockedOnNodeOffset.x,y:o.y+r*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=a}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=!0===t?1:this.easingTime;var e,n=Ra[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*n,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*n,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*n},1<=this.easingTime&&(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,null!=this.lockedOnNodeId&&(this.viewFunction=Z(e=this._lockedRedraw).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),vC),YD=(Ah(pC,[{key:"setOptions",value:function(t){void 0!==t&&(this.options=t,this.create())}},{key:"create",value:function(){!0===this.options.navigationButtons?!1===this.iconsCreated&&this.loadNavigationElements():!0===this.iconsCreated&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],n=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var i=0;i<e.length;i++){this.navigationDOM[e[i]]=document.createElement("div"),this.navigationDOM[e[i]].className="vis-button vis-"+e[i],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[i]]);var r,o,a=new kh(this.navigationDOM[e[i]]);"_fit"===n[i]?DD.onTouch(a,Z(r=this._fit).call(r,this)):DD.onTouch(a,Z(o=this.bindToRedraw).call(o,this,n[i])),this.navigationHammers.push(a)}var s=new kh(this.canvas.frame);DD.onRelease(s,function(){t._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){var e;void 0===this.boundFunctions[t]&&(this.boundFunctions[t]=Z(e=this[t]).call(e,this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(t){void 0!==this.boundFunctions[t]&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){700<(new Date).valueOf()-this.touchTime&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)this.boundFunctions.hasOwnProperty(t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,e=this.body.view.scale*(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=e/t,r=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=e,this.body.view.translation={x:r,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,e=this.body.view.scale/(1+this.options.keyboard.speed.zoom),n=this.body.view.translation,i=e/t,r=(1-i)*this.canvas.canvasViewCenter.x+n.x*i,o=(1-i)*this.canvas.canvasViewCenter.y+n.y*i;this.body.view.scale=e,this.body.view.translation={x:r,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t,e,n,i,r,o,a,s,l,c,u,d,h,f,p,v,m,g,y,b,w,_,k,x,S=this;void 0!==this.keycharm&&this.keycharm.destroy(),!0===this.options.keyboard.enabled&&(!0===this.options.keyboard.bindToWindow?this.keycharm=pu({container:window,preventDefault:!0}):this.keycharm=pu({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),!0===this.activated&&(Z(t=this.keycharm).call(t,"up",function(){S.bindToRedraw("_moveUp")},"keydown"),Z(e=this.keycharm).call(e,"down",function(){S.bindToRedraw("_moveDown")},"keydown"),Z(n=this.keycharm).call(n,"left",function(){S.bindToRedraw("_moveLeft")},"keydown"),Z(i=this.keycharm).call(i,"right",function(){S.bindToRedraw("_moveRight")},"keydown"),Z(r=this.keycharm).call(r,"=",function(){S.bindToRedraw("_zoomIn")},"keydown"),Z(o=this.keycharm).call(o,"num+",function(){S.bindToRedraw("_zoomIn")},"keydown"),Z(a=this.keycharm).call(a,"num-",function(){S.bindToRedraw("_zoomOut")},"keydown"),Z(s=this.keycharm).call(s,"-",function(){S.bindToRedraw("_zoomOut")},"keydown"),Z(l=this.keycharm).call(l,"[",function(){S.bindToRedraw("_zoomOut")},"keydown"),Z(c=this.keycharm).call(c,"]",function(){S.bindToRedraw("_zoomIn")},"keydown"),Z(u=this.keycharm).call(u,"pageup",function(){S.bindToRedraw("_zoomIn")},"keydown"),Z(d=this.keycharm).call(d,"pagedown",function(){S.bindToRedraw("_zoomOut")},"keydown"),Z(h=this.keycharm).call(h,"up",function(){S.unbindFromRedraw("_moveUp")},"keyup"),Z(f=this.keycharm).call(f,"down",function(){S.unbindFromRedraw("_moveDown")},"keyup"),Z(p=this.keycharm).call(p,"left",function(){S.unbindFromRedraw("_moveLeft")},"keyup"),Z(v=this.keycharm).call(v,"right",function(){S.unbindFromRedraw("_moveRight")},"keyup"),Z(m=this.keycharm).call(m,"=",function(){S.unbindFromRedraw("_zoomIn")},"keyup"),Z(g=this.keycharm).call(g,"num+",function(){S.unbindFromRedraw("_zoomIn")},"keyup"),Z(y=this.keycharm).call(y,"num-",function(){S.unbindFromRedraw("_zoomOut")},"keyup"),Z(b=this.keycharm).call(b,"-",function(){S.unbindFromRedraw("_zoomOut")},"keyup"),Z(w=this.keycharm).call(w,"[",function(){S.unbindFromRedraw("_zoomOut")},"keyup"),Z(_=this.keycharm).call(_,"]",function(){S.unbindFromRedraw("_zoomIn")},"keyup"),Z(k=this.keycharm).call(k,"pageup",function(){S.unbindFromRedraw("_zoomIn")},"keyup"),Z(x=this.keycharm).call(x,"pagedown",function(){S.unbindFromRedraw("_zoomOut")},"keyup")))}}]),pC),qD=(Ah(fC,[{key:"setPosition",value:function(t,e){this.x=KE(t),this.y=KE(e)}},{key:"setText",value:function(t){t instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(t)):this.frame.innerHTML=t}},{key:"show",value:function(t){if(void 0===t&&(t=!0),!0===t){var e=this.frame.clientHeight,n=this.frame.clientWidth,i=this.frame.parentNode.clientHeight,r=this.frame.parentNode.clientWidth,o=0,a=0;if("flip"==this.overflowMethod){var s=!1,l=!0;this.y-e<this.padding&&(l=!1),this.x+n>r-this.padding&&(s=!0),o=s?this.x-n:this.x,a=l?this.y-e:this.y}else(a=this.y-e)+e+this.padding>i&&(a=i-e-this.padding),a<this.padding&&(a=this.padding),(o=this.x)+n+this.padding>r&&(o=r-n-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),fC),UD=(Ah(hC,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer})}},{key:"setOptions",value:function(t){void 0!==t&&($o(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,t),Na(this.options,t,"keyboard"),t.tooltip&&(Jo(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=_a(t.tooltip.color)))),this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-ia(this.canvas.frame.canvas),y:t.y-oa(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(t){50<(new Date).valueOf()-this.touchTime&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(t){var e=this.getPointer(t.center),n=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(e,t,n),this.selectionHandler._generateClickEvent("click",t,e)}},{key:"onDoubleTap",value:function(t){var e=this.getPointer(t.center);this.selectionHandler._generateClickEvent("doubleClick",t,e)}},{key:"onHold",value:function(t){var e=this.getPointer(t.center),n=this.selectionHandler.options.multiselect;this.checkSelectionChanges(e,t,n),this.selectionHandler._generateClickEvent("click",t,e),this.selectionHandler._generateClickEvent("hold",t,e)}},{key:"onRelease",value:function(t){if(10<(new Date).valueOf()-this.touchTime){var e=this.getPointer(t.center);this.selectionHandler._generateClickEvent("release",t,e),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(t){var e=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler._generateClickEvent("oncontext",t,e)}},{key:"checkSelectionChanges",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=this.selectionHandler.getSelection(),r=!1;r=!0===n?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t);var o=this.selectionHandler.getSelection(),a=this._determineDifference(i,o),s=this._determineDifference(o,i);0<a.edges.length&&(this.selectionHandler._generateClickEvent("deselectEdge",e,t,i),r=!0),0<a.nodes.length&&(this.selectionHandler._generateClickEvent("deselectNode",e,t,i),r=!0),0<s.nodes.length&&(this.selectionHandler._generateClickEvent("selectNode",e,t),r=!0),0<s.edges.length&&(this.selectionHandler._generateClickEvent("selectEdge",e,t),r=!0),!0===r&&this.selectionHandler._generateClickEvent("select",e,t)}},{key:"_determineDifference",value:function(t,e){function n(t,e){for(var n=[],i=0;i<t.length;i++){var r=t[i];-1===kc(e).call(e,r)&&n.push(r)}return n}return{nodes:n(t.nodes,e.nodes),edges:n(t.edges,e.edges)}}},{key:"onDragStart",value:function(t){void 0===this.drag.pointer&&this.onTouch(t);var e=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=Jo({},this.body.view.translation),(this.drag.nodeId=void 0)!==e&&!0===this.options.dragNodes){this.drag.nodeId=e.id,!1===e.isSelected()&&(this.selectionHandler.unselectAll(),this.selectionHandler.selectObject(e)),this.selectionHandler._generateClickEvent("dragStart",t,this.drag.pointer);var n=this.selectionHandler.selectionObj.nodes;for(var i in n)if(n.hasOwnProperty(i)){var r=n[i],o={id:r.id,node:r,x:r.x,y:r.y,xFixed:r.options.fixed.x,yFixed:r.options.fixed.y};r.options.fixed.x=!0,r.options.fixed.y=!0,this.drag.selection.push(o)}}else this.selectionHandler._generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}},{key:"onDrag",value:function(t){var n=this;if(!0!==this.drag.pinched){this.body.emitter.emit("unlockNode");var e=this.getPointer(t.center),i=this.drag.selection;if(i&&i.length&&!0===this.options.dragNodes){this.selectionHandler._generateClickEvent("dragging",t,e);var r=e.x-this.drag.pointer.x,o=e.y-this.drag.pointer.y;Hl(i).call(i,function(t){var e=t.node;!1===t.xFixed&&(e.x=n.canvas._XconvertDOMtoCanvas(n.canvas._XconvertCanvasToDOM(t.x)+r)),!1===t.yFixed&&(e.y=n.canvas._YconvertDOMtoCanvas(n.canvas._YconvertCanvasToDOM(t.y)+o))}),this.body.emitter.emit("startSimulation")}else if(!0===this.options.dragView){if(this.selectionHandler._generateClickEvent("dragging",t,e,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);var a=e.x-this.drag.pointer.x,s=e.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+a,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}},{key:"onDragEnd",value:function(t){this.drag.dragging=!1;var e=this.drag.selection;e&&e.length?(Hl(e).call(e,function(t){t.node.options.fixed.x=t.xFixed,t.node.options.fixed.y=t.yFixed}),this.selectionHandler._generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler._generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}},{key:"onPinch",value:function(t){var e=this.getPointer(t.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var n=this.pinch.scale*t.scale;this.zoom(n,e)}},{key:"zoom",value:function(t,e){if(!0===this.options.zoomView){var n=this.body.view.scale;t<1e-5&&(t=1e-5),10<t&&(t=10);var i=void 0;void 0!==this.drag&&!0===this.drag.dragging&&(i=this.canvas.DOMtoCanvas(this.drag.pointer));var r=this.body.view.translation,o=t/n,a=(1-o)*e.x+r.x*o,s=(1-o)*e.y+r.y*o;if(this.body.view.scale=t,this.body.view.translation={x:a,y:s},null!=i){var l=this.canvas.canvasToDOM(i);this.drag.pointer.x=l.x,this.drag.pointer.y=l.y}this.body.emitter.emit("_requestRedraw"),n<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:e}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:e})}}},{key:"onMouseWheel",value:function(t){if(!0===this.options.zoomView){if(0!==t.deltaY){var e=this.body.view.scale;e*=1+(t.deltaY<0?1:-1)*(.1*this.options.zoomSpeed);var n=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(e,n)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var e=this,n=this.getPointer({x:t.clientX,y:t.clientY}),i=!1;void 0!==this.popup&&(!1===this.popup.hidden&&this._checkHidePopup(n),!1===this.popup.hidden&&(i=!0,this.popup.setPosition(n.x+3,n.y-5),this.popup.show())),!1===this.options.keyboard.bindToWindow&&!0===this.options.keyboard.enabled&&this.canvas.frame.focus(),!1===i&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=qh(function(){return e._checkShowPopup(n)},this.options.tooltipDelay))),!0===this.options.hover&&this.selectionHandler.hoverObject(t,n)}},{key:"_checkShowPopup",value:function(t){var e=this.canvas._XconvertDOMtoCanvas(t.x),n=this.canvas._YconvertDOMtoCanvas(t.y),i={left:e,top:n,right:e,bottom:n},r=void 0===this.popupObj?void 0:this.popupObj.id,o=!1,a="node";if(void 0===this.popupObj){for(var s,l=this.body.nodeIndices,c=this.body.nodes,u=[],d=0;d<l.length;d++)!0===(s=c[l[d]]).isOverlappingWith(i)&&(o=!0,void 0!==s.getTitle()&&u.push(l[d]));0<u.length&&(this.popupObj=c[u[u.length-1]],o=!0)}if(void 0===this.popupObj&&!1===o){for(var h,f=this.body.edgeIndices,p=this.body.edges,v=[],m=0;m<f.length;m++)!0===(h=p[f[m]]).isOverlappingWith(i)&&!0===h.connected&&void 0!==h.getTitle()&&v.push(f[m]);0<v.length&&(this.popupObj=p[v[v.length-1]],a="edge")}void 0!==this.popupObj?this.popupObj.id!==r&&(void 0===this.popup&&(this.popup=new qD(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var e=this.selectionHandler._pointerToPositionObject(t),n=!1;if("node"===this.popup.popupTargetType){if(void 0!==this.body.nodes[this.popup.popupTargetId]&&!0===(n=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(e))){var i=this.selectionHandler.getNodeAt(t);n=void 0!==i&&i.id===this.popup.popupTargetId}}else void 0===this.selectionHandler.getNodeAt(t)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(n=this.body.edges[this.popup.popupTargetId].isOverlappingWith(e));!1===n&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),hC),WD=(Ah(dC,[{key:"setOptions",value:function(t){void 0!==t&&Zo(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,t)}},{key:"selectOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var n=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),void 0!==n&&(e=this.selectObject(n)),this.body.emitter.emit("_requestRedraw")}return e}},{key:"selectAdditionalOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var n=this.getNodeAt(t)||this.getEdgeAt(t);void 0!==n&&((e=!0)===n.isSelected()?this.deselectObject(n):this.selectObject(n),this.body.emitter.emit("_requestRedraw"))}return e}},{key:"_initBaseEvent",value:function(t,e){var n={};return n.pointer={DOM:{x:e.x,y:e.y},canvas:this.canvas.DOMtoCanvas(e)},n.event=t,n}},{key:"_generateClickEvent",value:function(t,e,n,i){var r=4<arguments.length&&void 0!==arguments[4]&&arguments[4],o=this._initBaseEvent(e,n);if(!0===r)o.nodes=[],o.edges=[];else{var a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}void 0!==i&&(o.previousSelection=i),"click"==t&&(o.items=this.getClickedItems(n)),void 0!==e.controlEdge&&(o.controlEdge=e.controlEdge),this.body.emitter.emit(t,o)}},{key:"selectObject",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.options.selectConnectedEdges;return void 0!==t&&(t instanceof qO&&!0===e&&this._selectConnectedEdges(t),t.select(),this._addToSelection(t),!0)}},{key:"deselectObject",value:function(t){!0===t.isSelected()&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var e=[],n=this.body.nodes,i=0;i<this.body.nodeIndices.length;i++){var r=this.body.nodeIndices[i];n[r].isOverlappingWith(t)&&e.push(r)}return e}},{key:"_pointerToPositionObject",value:function(t){var e=this.canvas.DOMtoCanvas(t);return{left:e.x-1,top:e.y+1,right:e.x+1,bottom:e.y-1}}},{key:"getNodeAt",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=this._pointerToPositionObject(t),i=this._getAllNodesOverlappingWith(n);return 0<i.length?!0===e?this.body.nodes[i[i.length-1]]:i[i.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(t,e){for(var n=this.body.edges,i=0;i<this.body.edgeIndices.length;i++){var r=this.body.edgeIndices[i];n[r].isOverlappingWith(t)&&e.push(r)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var e=[];return this._getEdgesOverlappingWith(t,e),e}},{key:"getEdgeAt",value:function(t){for(var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=this.canvas.DOMtoCanvas(t),i=10,r=null,o=this.body.edges,a=0;a<this.body.edgeIndices.length;a++){var s=this.body.edgeIndices[a],l=o[s];if(l.connected){var c=l.from.x,u=l.from.y,d=l.to.x,h=l.to.y,f=l.edgeType.getDistanceToEdge(c,u,d,h,n.x,n.y);f<i&&(r=s,i=f)}}return null!==r?!0===e?this.body.edges[r]:r:void 0}},{key:"_addToSelection",value:function(t){t instanceof qO?this.selectionObj.nodes[t.id]=t:this.selectionObj.edges[t.id]=t}},{key:"_addToHover",value:function(t){t instanceof qO?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){t instanceof qO?(delete this.selectionObj.nodes[t.id],this._unselectConnectedEdges(t)):delete this.selectionObj.edges[t.id]}},{key:"unselectAll",value:function(){for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&this.selectionObj.nodes[t].unselect();for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&this.selectionObj.edges[e].unselect();this.selectionObj={nodes:{},edges:{}}}},{key:"_getSelectedNodeCount",value:function(){var t=0;for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(t+=1);return t}},{key:"_getSelectedNode",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t))return this.selectionObj.nodes[t]}},{key:"_getSelectedEdge",value:function(){for(var t in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(t))return this.selectionObj.edges[t]}},{key:"_getSelectedEdgeCount",value:function(){var t=0;for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&(t+=1);return t}},{key:"_getSelectedObjectCount",value:function(){var t=0;for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(t+=1);for(var n in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(n)&&(t+=1);return t}},{key:"_selectionIsEmpty",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t))return!1;for(var e in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(e))return!1;return!0}},{key:"_clusterInSelection",value:function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t)&&1<this.selectionObj.nodes[t].clusterSize)return!0;return!1}},{key:"_selectConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var n=t.edges[e];n.select(),this._addToSelection(n)}}},{key:"_hoverConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var n=t.edges[e];n.hover=!0,this._addToHover(n)}}},{key:"_unselectConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var n=t.edges[e];n.unselect(),this._removeFromSelection(n)}}},{key:"emitBlurEvent",value:function(t,e,n){var i=this._initBaseEvent(t,e);!0===n.hover&&(n.hover=!1,n instanceof qO?(i.node=n.id,this.body.emitter.emit("blurNode",i)):(i.edge=n.id,this.body.emitter.emit("blurEdge",i)))}},{key:"emitHoverEvent",value:function(t,e,n){var i=this._initBaseEvent(t,e),r=!1;return!1===n.hover&&(n.hover=!0,this._addToHover(n),r=!0,n instanceof qO?(i.node=n.id,this.body.emitter.emit("hoverNode",i)):(i.edge=n.id,this.body.emitter.emit("hoverEdge",i))),r}},{key:"hoverObject",value:function(t,e){var n=this.getNodeAt(e);void 0===n&&(n=this.getEdgeAt(e));var i=!1;for(var r in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(r)&&(void 0===n||n instanceof qO&&n.id!=r||n instanceof RM)&&(this.emitBlurEvent(t,e,this.hoverObj.nodes[r]),delete this.hoverObj.nodes[r],i=!0);for(var o in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(o)&&(!0===i?(this.hoverObj.edges[o].hover=!1,delete this.hoverObj.edges[o]):(void 0===n||n instanceof RM&&n.id!=o||n instanceof qO&&!n.hover)&&(this.emitBlurEvent(t,e,this.hoverObj.edges[o]),delete this.hoverObj.edges[o],i=!0));if(void 0!==n){var a=nf(this.hoverObj.edges).length,s=nf(this.hoverObj.nodes).length;(i||n instanceof RM&&0===a&&0===s||n instanceof qO&&0===a&&0===s)&&(i=this.emitHoverEvent(t,e,n)),n instanceof qO&&!0===this.options.hoverConnectedEdges&&this._hoverConnectedEdges(n)}!0===i&&this.body.emitter.emit("_requestRedraw")}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodes(),edges:this.getSelectedEdges()}}},{key:"getSelectedNodes",value:function(){var t=[];if(!0===this.options.selectable)for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&t.push(this.selectionObj.nodes[e].id);return t}},{key:"getSelectedEdges",value:function(){var t=[];if(!0===this.options.selectable)for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&t.push(this.selectionObj.edges[e].id);return t}},{key:"setSelection",value:function(t){var e,n,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!t||!t.nodes&&!t.edges)throw"Selection must be an object with nodes and/or edges properties";if(!i.unselectAll&&void 0!==i.unselectAll||this.unselectAll(),t.nodes)for(e=0;e<t.nodes.length;e++){n=t.nodes[e];var r=this.body.nodes[n];if(!r)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(r,i.highlightEdges)}if(t.edges)for(e=0;e<t.edges.length;e++){n=t.edges[e];var o=this.body.edges[n];if(!o)throw new RangeError('Edge with id "'+n+'" not found');this.selectObject(o)}this.body.emitter.emit("_requestRedraw")}},{key:"selectNodes",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:e})}},{key:"selectEdges",value:function(t){if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(this.body.nodes.hasOwnProperty(t)||delete this.selectionObj.nodes[t]);for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&(this.body.edges.hasOwnProperty(e)||delete this.selectionObj.edges[e])}},{key:"getClickedItems",value:function(t){for(var e=this.canvas.DOMtoCanvas(t),n=[],i=this.body.nodeIndices,r=this.body.nodes,o=i.length-1;0<=o;o--){var a=r[i[o]].getItemsOnPoint(e);n.push.apply(n,a)}for(var s=this.body.edgeIndices,l=this.body.edges,c=s.length-1;0<=c;c--){var u=l[s[c]].getItemsOnPoint(e);n.push.apply(n,u)}return n}}]),dC),VD=!d(function(){return Object.isExtensible(Object.preventExtensions({}))}),GD=n(function(t){function n(t){e(t,i,{value:{objectID:"O"+ ++r,weakData:{}}})}var e=z.f,i=Ga("meta"),r=0,o=Object.isExtensible||function(){return!0},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!h(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!g(t,i)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[i].objectID},getWeakData:function(t,e){if(!g(t,i)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[i].weakData},onFreeze:function(t){return VD&&a.REQUIRED&&o(t)&&!g(t,i)&&n(t),t}};os[i]=!0}),JD=(GD.REQUIRED,GD.fastKey,GD.getWeakData,GD.onFreeze,fs("iterator")),XD=Array.prototype,ZD=n(function(t){function p(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,i,r){var o,a,s,l,c,u,d,h,f=_(e,n,i?2:1);if(r)o=t;else{if("function"!=typeof(a=Gh(t)))throw TypeError("Target is not iterable");if(void 0!==(h=a)&&(Ua.Array===h||XD[JD]===h)){for(s=0,l=Ds(t.length);s<l;s++)if((c=i?f(v(d=t[s])[0],d[1]):f(t[s]))&&c instanceof p)return c;return new p(!1)}o=a.call(t)}for(u=o.next;!(d=u.call(o)).done;)if("object"==typeof(c=jD(o,f,d.value,i))&&c&&c instanceof p)return c;return new p(!1)}).stop=function(t){return new p(!0,t)}}),$D=z.f,QD=Ll.forEach,KD=gs.set,tC=gs.getterFor,eC=fs("species"),nC=z.f,iC=GD.fastKey,rC=gs.set,oC=gs.getterFor,aC={getConstructor:function(t,n,i,r){function o(t,e,n){var i,r,o=s(t),a=l(t,e);return a?a.value=n:(o.last=a={index:r=iC(e,!0),key:e,value:n,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=a),i&&(i.next=a),f?o.size++:t.size++,"F"!==r&&(o.index[r]=a)),t}var a=t(function(t,e){ND(t,a,n),rC(t,{type:n,index:Qs(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=e&&ZD(e,t[r],t,i)}),s=oC(n),l=function(t,e){var n,i=s(t),r=iC(e);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==e)return n};return FD(a.prototype,{clear:function(){for(var t=s(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e=s(this),n=l(this,t);if(n){var i=n.next,r=n.previous;delete e.index[n.index],n.removed=!0,r&&(r.next=i),i&&(i.previous=r),e.first==n&&(e.first=i),e.last==n&&(e.last=r),f?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=s(this),i=_(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(i(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),FD(a.prototype,i?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),f&&nC(a.prototype,"size",{get:function(){return s(this).size}}),a},setStrong:function(t,e,n){var i,r,o=e+" Iterator",a=oC(e),s=oC(o);rl(t,e,function(t,e){rC(this,{type:o,target:t,state:a(t),kind:e,last:void 0})},function(){for(var t=s(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),i=Ps(e),r=z.f,f&&i&&!i[eC]&&r(i,eC,{configurable:!0,get:function(){return this}})}},sC=(BD("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},aC),R.Map),lC=[RD(!1),RD(!0)][0],cC=El("reduce"),uC=Ol("reduce",{1:0});function dC(t,e){var n=this;Th(this,dC),this.body=t,this.canvas=e,this.selectionObj={nodes:[],edges:[]},this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},Jo(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){n.updateSelection()})}function hC(t,e,n){var i,r,o,a,s,l,c,u,d,h,f,p,v;Th(this,hC),this.body=t,this.canvas=e,this.selectionHandler=n,this.navigationHandler=new YD(t,e),this.body.eventListeners.onTap=Z(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=Z(r=this.onTouch).call(r,this),this.body.eventListeners.onDoubleTap=Z(o=this.onDoubleTap).call(o,this),this.body.eventListeners.onHold=Z(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=Z(s=this.onDragStart).call(s,this),this.body.eventListeners.onDrag=Z(l=this.onDrag).call(l,this),this.body.eventListeners.onDragEnd=Z(c=this.onDragEnd).call(c,this),this.body.eventListeners.onMouseWheel=Z(u=this.onMouseWheel).call(u,this),this.body.eventListeners.onPinch=Z(d=this.onPinch).call(d,this),this.body.eventListeners.onMouseMove=Z(h=this.onMouseMove).call(h,this),this.body.eventListeners.onRelease=Z(f=this.onRelease).call(f,this),this.body.eventListeners.onContext=Z(p=this.onContext).call(p,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=Z(v=this.getPointer).call(v,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},Jo(this.options,this.defaultOptions),this.bindEventListeners()}function fC(t,e){Th(this,fC),this.container=t,this.overflowMethod=e||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}function pC(t,e){var n=this;Th(this,pC),this.body=t,this.canvas=e,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){n.activated=!0,n.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){n.activated=!1,n.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){void 0!==n.keycharm&&n.keycharm.destroy()}),this.options={}}function vC(t,e){var n,i,r=this;Th(this,vC),this.body=t,this.canvas=e,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",Z(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",function(){r.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",Z(i=this.releaseNode).call(i,this))}k({target:"Array",proto:!0,forced:!cC||!uC},{reduce:function(t){return lC(this,t,arguments.length,1<arguments.length?arguments[1]:void 0)}});var mC=G("Array").reduce,gC=Array.prototype,yC=[],bC=yC.sort,wC=d(function(){yC.sort(void 0)}),_C=d(function(){yC.sort(null)}),kC=El("sort");k({target:"Array",proto:!0,forced:wC||!_C||!kC},{sort:function(t){return void 0===t?bC.call(hs(this)):bC.call(hs(this),u(t))}});function xC(t){var e=t.sort;return t===TC||t instanceof Array&&e===TC.sort?EC:e}var SC,EC=G("Array").sort,TC=Array.prototype,OC=n(function(t,e){!function(t){t.__esModule=!0,t.sort=function(t,e,n,i){if(!Array.isArray(t))throw new TypeError("Can only sort arrays");e?"function"!=typeof e&&(i=n,n=e,e=u):e=u,n=n||0;var r=(i=i||t.length)-n;if(!(r<2)){var o=0;if(r<c)return void h(t,n,i,n+(o=d(t,n,i,e)),e);var a=new f(t,e),s=function(t){for(var e=0;c<=t;)e|=1&t,t>>=1;return t+e}(r);do{if((o=d(t,n,i,e))<s){var l=r;s<l&&(l=s),h(t,n,n+l,n+o,e),o=l}a.pushRun(n,o),a.mergeRuns(),r-=o,n+=o}while(0!==r);a.forceMergeRuns()}};var c=32,s=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function l(t){return t<1e5?t<100?t<10?0:1:t<1e4?t<1e3?2:3:4:t<1e7?t<1e6?5:6:t<1e9?t<1e8?7:8:9}function u(t,e){if(t===e)return 0;if(~~t===t&&~~e===e){if(0===t||0===e)return t<e?-1:1;if(t<0||e<0){if(0<=e)return-1;if(0<=t)return 1;t=-t,e=-e}var n=l(t),i=l(e),r=0;return n<i?(t*=s[i-n-1],e/=10,r=-1):i<n&&(e*=s[n-i-1],t/=10,r=1),t===e?r:t<e?-1:1}var o=String(t),a=String(e);return o===a?0:o<a?-1:1}function d(t,e,n,i){var r=e+1;if(r===n)return 1;if(i(t[r++],t[e])<0){for(;r<n&&i(t[r],t[r-1])<0;)r++;!function(t,e,n){for(n--;e<n;){var i=t[e];t[e++]=t[n],t[n--]=i}}(t,e,r)}else for(;r<n&&0<=i(t[r],t[r-1]);)r++;return r-e}function h(t,e,n,i,r){for(i===e&&i++;i<n;i++){for(var o=t[i],a=e,s=i;a<s;){var l=a+s>>>1;r(o,t[l])<0?s=l:a=1+l}var c=i-a;switch(c){case 3:t[a+3]=t[a+2];case 2:t[a+2]=t[a+1];case 1:t[a+1]=t[a];break;default:for(;0<c;)t[a+c]=t[a+c-1],c--}t[a]=o}}function g(t,e,n,i,r,o){var a=0,s=0,l=1;if(0<o(t,e[n+r])){for(s=i-r;l<s&&0<o(t,e[n+r+l]);)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s),a+=r,l+=r}else{for(s=r+1;l<s&&o(t,e[n+r-l])<=0;)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s);var c=a;a=r-l,l=r-c}for(a++;a<l;){var u=a+(l-a>>>1);0<o(t,e[n+u])?a=u+1:l=u}return l}function y(t,e,n,i,r,o){var a=0,s=0,l=1;if(o(t,e[n+r])<0){for(s=r+1;l<s&&o(t,e[n+r-l])<0;)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s);var c=a;a=r-l,l=r-c}else{for(s=i-r;l<s&&0<=o(t,e[n+r+l]);)(l=1+((a=l)<<1))<=0&&(l=s);s<l&&(l=s),a+=r,l+=r}for(a++;a<l;){var u=a+(l-a>>>1);o(t,e[n+u])<0?l=u:a=u+1}return l}var f=(n.prototype.pushRun=function(t,e){this.runStart[this.stackSize]=t,this.runLength[this.stackSize]=e,this.stackSize+=1},n.prototype.mergeRuns=function(){for(;1<this.stackSize;){var t=this.stackSize-2;if(1<=t&&this.runLength[t-1]<=this.runLength[t]+this.runLength[t+1]||2<=t&&this.runLength[t-2]<=this.runLength[t]+this.runLength[t-1])this.runLength[t-1]<this.runLength[t+1]&&t--;else if(this.runLength[t]>this.runLength[t+1])break;this.mergeAt(t)}},n.prototype.forceMergeRuns=function(){for(;1<this.stackSize;){var t=this.stackSize-2;0<t&&this.runLength[t-1]<this.runLength[t+1]&&t--,this.mergeAt(t)}},n.prototype.mergeAt=function(t){var e=this.compare,n=this.array,i=this.runStart[t],r=this.runLength[t],o=this.runStart[t+1],a=this.runLength[t+1];this.runLength[t]=r+a,t===this.stackSize-3&&(this.runStart[t+1]=this.runStart[t+2],this.runLength[t+1]=this.runLength[t+2]),this.stackSize--;var s=y(n[o],n,i,r,0,e);i+=s,0!=(r-=s)&&0!==(a=g(n[i+r-1],n,o,a,a-1,e))&&(r<=a?this.mergeLow(i,r,o,a):this.mergeHigh(i,r,o,a))},n.prototype.mergeLow=function(t,e,n,i){var r=this.compare,o=this.array,a=this.tmp,s=0;for(s=0;s<e;s++)a[s]=o[t+s];var l=0,c=n,u=t;if(o[u++]=o[c++],0!=--i)if(1!==e){for(var d=this.minGallop;;){var h=0,f=0,p=!1;do{if(r(o[c],a[l])<0){if(o[u++]=o[c++],f++,(h=0)==--i){p=!0;break}}else if(o[u++]=a[l++],h++,f=0,1==--e){p=!0;break}}while((h|f)<d);if(p)break;do{if(0!==(h=y(o[c],a,l,e,0,r))){for(s=0;s<h;s++)o[u+s]=a[l+s];if(u+=h,l+=h,(e-=h)<=1){p=!0;break}}if(o[u++]=o[c++],0==--i){p=!0;break}if(0!==(f=g(a[l],o,c,i,0,r))){for(s=0;s<f;s++)o[u+s]=o[c+s];if(u+=f,c+=f,0==(i-=f)){p=!0;break}}if(o[u++]=a[l++],1==--e){p=!0;break}d--}while(7<=h||7<=f);if(p)break;d<0&&(d=0),d+=2}if((this.minGallop=d)<1&&(this.minGallop=1),1===e){for(s=0;s<i;s++)o[u+s]=o[c+s];o[u+i]=a[l]}else{if(0===e)throw new Error("mergeLow preconditions were not respected");for(s=0;s<e;s++)o[u+s]=a[l+s]}}else{for(s=0;s<i;s++)o[u+s]=o[c+s];o[u+i]=a[l]}else for(s=0;s<e;s++)o[u+s]=a[l+s]},n.prototype.mergeHigh=function(t,e,n,i){var r=this.compare,o=this.array,a=this.tmp,s=0;for(s=0;s<i;s++)a[s]=o[n+s];var l=t+e-1,c=i-1,u=n+i-1,d=0,h=0;if(o[u--]=o[l--],0!=--e)if(1!==i){for(var f=this.minGallop;;){var p=0,v=0,m=!1;do{if(r(a[c],o[l])<0){if(o[u--]=o[l--],p++,(v=0)==--e){m=!0;break}}else if(o[u--]=a[c--],v++,p=0,1==--i){m=!0;break}}while((p|v)<f);if(m)break;do{if(0!=(p=e-y(a[c],o,t,e,e-1,r))){for(e-=p,h=1+(u-=p),d=1+(l-=p),s=p-1;0<=s;s--)o[h+s]=o[d+s];if(0===e){m=!0;break}}if(o[u--]=a[c--],1==--i){m=!0;break}if(0!=(v=i-g(o[l],a,0,i,i-1,r))){for(i-=v,h=1+(u-=v),d=1+(c-=v),s=0;s<v;s++)o[h+s]=a[d+s];if(i<=1){m=!0;break}}if(o[u--]=o[l--],0==--e){m=!0;break}f--}while(7<=p||7<=v);if(m)break;f<0&&(f=0),f+=2}if((this.minGallop=f)<1&&(this.minGallop=1),1===i){for(h=1+(u-=e),d=1+(l-=e),s=e-1;0<=s;s--)o[h+s]=o[d+s];o[u]=a[c]}else{if(0===i)throw new Error("mergeHigh preconditions were not respected");for(d=u-(i-1),s=0;s<i;s++)o[d+s]=a[s]}}else{for(h=1+(u-=e),d=1+(l-=e),s=e-1;0<=s;s--)o[h+s]=o[d+s];o[u]=a[c]}else for(d=u-(i-1),s=0;s<i;s++)o[d+s]=a[s]},n);function n(t,e){!function(t){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.array=null,this.compare=null,this.minGallop=7,this.length=0,this.tmpStorageLength=256,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=t,this.compare=e,this.length=t.length,this.length<512&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}}(e)});(SC=OC)&&SC.__esModule&&Object.prototype.hasOwnProperty.call(SC,"default")&&SC.default;var MC=OC,DC=MC.sort,CC=(Ah(FC,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;this.fake_use(t,e,n),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,e){this.fake_use(t,e),this.abstract()}},{key:"shift",value:function(t,e){this.fake_use(t,e),this.abstract()}}]),FC),LC=(HT(BC,CC),Ah(BC,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(t){return t.x}},{key:"setPosition",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==n&&this.layout.hierarchical.addToOrdering(t,n),t.x=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_x,max:e.max_x}}},{key:"sort",value:function(t){DC(t,function(t,e){return t.x-e.x})}},{key:"fix",value:function(t,e){t.y=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.y=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].x+=e}}]),BC),AC=(HT(NC,CC),Ah(NC,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(t){return t.y}},{key:"setPosition",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==n&&this.layout.hierarchical.addToOrdering(t,n),t.y=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_y,max:e.max_y}}},{key:"sort",value:function(t){DC(t,function(t,e){return t.y-e.y})}},{key:"fix",value:function(t,e){t.x=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.x=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].y+=e}}]),NC),IC=Ll.every,PC=El("every"),jC=Ol("every");function NC(t){var e;return Th(this,NC),(e=BT(this,YT(NC).call(this))).layout=t,e}function BC(t){var e;return Th(this,BC),(e=BT(this,YT(BC).call(this))).layout=t,e}function FC(){Th(this,FC)}k({target:"Array",proto:!0,forced:!PC||!jC},{every:function(t){return IC(this,t,1<arguments.length?arguments[1]:void 0)}});function RC(t){var e=t.every;return t===zC||t instanceof Array&&e===zC.every?HC:e}var HC=G("Array").every,zC=Array.prototype,YC=(BD("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},aC),R.Set);function qC(l,c,u,d,h){var f=d.size,p=u+"Id",v="to"===u?1:-1,t=!0,e=!1,n=void 0;try{for(var m,i=function(){var t=QE(m.value,2),n=t[0],e=t[1];if(!d.has(n)||!l(e))return"continue";h[n]=0;for(var r=[e],o=0,a=void 0,i=function(){var t,e;if(!d.has(n))return"continue";var i=h[a.id]+v;if(Hl(t=iE(e=a.edges).call(e,function(t){return t.connected&&t.to!==t.from&&t[u]!==a&&d.has(t.toId)&&d.has(t.fromId)})).call(t,function(t){var e=t[p],n=h[e];null!=n&&!c(i,n)||(h[e]=i,r.push(t[u]))}),f<o)return{v:{v:function(t,i){var n=new YC;return Hl(t).call(t,function(t){var e;Hl(e=t.edges).call(e,function(t){t.connected&&n.add(t)})}),Hl(n).call(n,function(t){var e=t.from.id,n=t.to.id;null==i[e]&&(i[e]=0),(null==i[n]||i[e]>=i[n])&&(i[n]=i[e]+1)}),i}(d,h)}};++o};a=r.pop();){var s=i();switch(s){case"continue":continue;default:if("object"===cT(s))return s.v}}},r=Jh(d);!(t=(m=r.next()).done);t=!0){var o=i();switch(o){case"continue":continue;default:if("object"===cT(o))return o.v}}}catch(l){e=!0,n=l}finally{try{t||null==r.return||r.return()}finally{if(e)throw n}}return h}var UC=(Ah(aL,[{key:"addRelation",value:function(t,e){void 0===this.childrenReference[t]&&(this.childrenReference[t]=[]),this.childrenReference[t].push(e),void 0===this.parentReference[e]&&(this.parentReference[e]=[]),this.parentReference[e].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(1<this.parentReference[t].length)return void(this.isTree=!1);this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,e){void 0!==e&&void 0===this.trees[t.id]&&(this.trees[t.id]=e,this.treeIndex=Math.max(e,this.treeIndex))}},{key:"ensureLevel",value:function(t){void 0===this.levels[t]&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var o=this,a={};return function t(e){if(void 0!==a[e])return a[e];var n=o.levels[e];if(o.childrenReference[e]){var i=o.childrenReference[e];if(0<i.length)for(var r=0;r<i.length;r++)n=Math.max(n,t(i[r]))}return a[e]=n}(t)}},{key:"levelDownstream",value:function(t,e){void 0===this.levels[e.id]&&(void 0===this.levels[t.id]&&(this.levels[t.id]=0),this.levels[e.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var e=1e9;for(var n in t)t.hasOwnProperty(n)&&void 0!==this.levels[n]&&(e=Math.min(this.levels[n],e));for(var i in t)t.hasOwnProperty(i)&&void 0!==this.levels[i]&&(this.levels[i]-=e)}},{key:"getTreeSize",value:function(t,e){var n=1e9,i=-1e9,r=1e9,o=-1e9;for(var a in this.trees)if(this.trees.hasOwnProperty(a)&&this.trees[a]===e){var s=t[a];n=Math.min(s.x,n),i=Math.max(s.x,i),r=Math.min(s.y,r),o=Math.max(s.y,o)}return{min_x:n,max_x:i,min_y:r,max_y:o}}},{key:"hasSameParent",value:function(t,e){var n=this.parentReference[t.id],i=this.parentReference[e.id];if(void 0===n||void 0===i)return!1;for(var r=0;r<n.length;r++)for(var o=0;o<i.length;o++)if(n[r]==i[o])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,e){return this.trees[t.id]===this.trees[e.id]}},{key:"getLevels",value:function(){return nf(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,e){void 0===this.distributionOrdering[e]&&(this.distributionOrdering[e]=[]);var n=!1,i=this.distributionOrdering[e];for(var r in i)if(i[r]===t){n=!0;break}n||(this.distributionOrdering[e].push(t),this.distributionIndex[t.id]=this.distributionOrdering[e].length-1)}}]),aL),WC=(Ah(oL,[{key:"bindEventListeners",value:function(){var e=this;this.body.emitter.on("_dataChanged",function(){e.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){e.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){e.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",function(){if(!0===e.options.hierarchical.enabled){var t=e.direction.curveType();e.body.emitter.emit("_forceDisableDynamicCurves",t,!1)}})}},{key:"setOptions",value:function(t,e){if(void 0!==t){var n=this.options.hierarchical,i=n.enabled;if(Zo(["randomSeed","improvedLayout","clusterThreshold"],this.options,t),Na(this.options,t,"hierarchical"),void 0!==t.randomSeed&&this._resetRNG(t.randomSeed),!0===n.enabled)return!0===i&&this.body.emitter.emit("refresh",!0),"RL"===n.direction||"DU"===n.direction?0<n.levelSeparation&&(n.levelSeparation*=-1):n.levelSeparation<0&&(n.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(e);if(!0===i)return this.body.emitter.emit("refresh"),Qo(e,this.optionsBackup)}return e}},{key:"_resetRNG",value:function(t){this.initialRandomSeed=t,this._rng=Rn(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(!0===this.options.hierarchical.enabled){var e=this.optionsBackup.physics;void 0===t.physics||!0===t.physics?(t.physics={enabled:void 0===e.enabled||e.enabled,solver:"hierarchicalRepulsion"},e.enabled=void 0===e.enabled||e.enabled,e.solver=e.solver||"barnesHut"):"object"===cT(t.physics)?(e.enabled=void 0===t.physics.enabled||t.physics.enabled,e.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):!1!==t.physics&&(e.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var n=this.direction.curveType();if(void 0===t.edges)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(void 0===t.edges.smooth)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if("boolean"==typeof t.edges.smooth)this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:n};else{var i=t.edges.smooth;void 0!==i.type&&"dynamic"!==i.type&&(n=i.type),this.optionsBackup.edges={smooth:void 0===i.enabled||i.enabled,type:void 0===i.type?"dynamic":i.type,roundness:void 0===i.roundness?.5:i.roundness,forceDirection:void 0!==i.forceDirection&&i.forceDirection},t.edges.smooth={enabled:void 0===i.enabled||i.enabled,type:n,roundness:void 0===i.roundness?.5:i.roundness,forceDirection:void 0!==i.forceDirection&&i.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",n)}return t}},{key:"positionInitially",value:function(t){if(!0!==this.options.hierarchical.enabled){this._resetRNG(this.initialRandomSeed);for(var e=t.length+50,n=0;n<t.length;n++){var i=t[n],r=2*Math.PI*this._rng();void 0===i.x&&(i.x=e*Math.cos(r)),void 0===i.y&&(i.y=e*Math.sin(r))}}}},{key:"layoutNetwork",value:function(){if(!0!==this.options.hierarchical.enabled&&!0===this.options.improvedLayout){for(var t=this.body.nodeIndices,e=0,n=0;n<t.length;n++)!0===this.body.nodes[t[n]].predefinedPosition&&(e+=1);if(e<.5*t.length){var i=0,r=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(t.length>r){for(var a=t.length;t.length>r&&i<=10;){i+=1;var s=t.length;if(i%3==0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o),s==t.length&&i%3!=0)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*a)})}10<i&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();for(var l=0;l<t.length;l++){var c=this.body.nodes[t[l]];!1===c.predefinedPosition&&(c.x+=70*(.5-this._rng()),c.y+=70*(.5-this._rng()))}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=_D.getRangeCore(this.body.nodes,this.body.nodeIndices),e=_D.findCenter(t),n=0;n<this.body.nodeIndices.length;n++){var i=this.body.nodes[this.body.nodeIndices[n]];i.x-=e.x,i.y-=e.y}}},{key:"_declusterAll",value:function(){for(var t=!0;!0===t;){t=!1;for(var e=0;e<this.body.nodeIndices.length;e++)!0===this.body.nodes[this.body.nodeIndices[e]].isCluster&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[e],{},!1));!0===t&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===this.options.hierarchical.enabled&&0<this.body.nodeIndices.length){var t,e,n=!1,i=!1;for(e in this.lastNodeOnLevel={},this.hierarchical=new UC,this.body.nodes)this.body.nodes.hasOwnProperty(e)&&(void 0!==(t=this.body.nodes[e]).options.level?(n=!0,this.hierarchical.levels[e]=t.options.level):i=!0);if(!0===i&&!0===n)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(!0===i){var r=this.options.hierarchical.sortMethod;"hubsize"===r?this._determineLevelsByHubsize():"directed"===r?this._determineLevelsDirected():"custom"===r&&this._determineLevelsCustomCallback()}for(var o in this.body.nodes)this.body.nodes.hasOwnProperty(o)&&this.hierarchical.ensureLevel(o);var a=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(a),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){function i(t,e){var n=E.hierarchical.trees;for(var i in n)n.hasOwnProperty(i)&&n[i]===t&&E.direction.shift(i,e)}function x(t,e){if(!e[t.id]&&(e[t.id]=!0,E.hierarchical.childrenReference[t.id])){var n=E.hierarchical.childrenReference[t.id];if(0<n.length)for(var i=0;i<n.length;i++)x(E.body.nodes[n[i]],e)}}function S(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e9,n=1e9,i=1e9,r=1e9,o=-1e9;for(var a in t)if(t.hasOwnProperty(a)){var s=E.body.nodes[a],l=E.hierarchical.levels[s.id],c=E.direction.getPosition(s),u=E._getSpaceAroundNode(s,t),d=QE(u,2),h=d[0],f=d[1];n=Math.min(h,n),i=Math.min(f,i),l<=e&&(r=Math.min(c,r),o=Math.max(c,o))}return[r,o,n,i]}function n(t,e,n){for(var i=E.hierarchical,r=0;r<e.length;r++){var o=e[r],a=i.distributionOrdering[o];if(1<a.length)for(var s=0;s<a.length-1;s++){var l=a[s],c=a[s+1];i.hasSameParent(l,c)&&i.inSameSubNetwork(l,c)&&t(l,c,n)}}}function r(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=E.direction.getPosition(t),r=E.direction.getPosition(e),o=Math.abs(r-i),a=E.options.hierarchical.nodeSpacing;if(a<o){var s={},l={};x(t,s),x(e,l);var c=function(t,e){var n=E.hierarchical.getMaxLevel(t.id),i=E.hierarchical.getMaxLevel(e.id);return Math.min(n,i)}(t,e),u=S(s,c),d=S(l,c),h=u[1],f=d[0],p=d[2];if(a<Math.abs(h-f)){var v=h-f+a;v<-p+a&&(v=-p+a),v<0&&(E._shiftBlock(e.id,v),(T=!0)===n&&E._centerParent(e))}}}function a(t,l){for(var e=l.id,n=l.edges,i=E.hierarchical.levels[l.id],o=E.options.hierarchical.levelSeparation*E.options.hierarchical.levelSeparation,a={},r=[],s=0;s<n.length;s++){var c=n[s];if(c.toId!=c.fromId){var u=c.toId==e?c.from:c.to;a[n[s].id]=u,E.hierarchical.levels[u.id]<i&&r.push(c)}}function d(t,e){for(var n=0,i=0;i<e.length;i++)if(void 0!==a[e[i].id]){var r=E.direction.getPosition(a[e[i].id])-t;n+=r/Math.sqrt(r*r+o)}return n}function h(t,e){for(var n=0,i=0;i<e.length;i++)if(void 0!==a[e[i].id]){var r=E.direction.getPosition(a[e[i].id])-t;n-=o*Math.pow(r*r+o,-1.5)}return n}function f(t,e){for(var n=E.direction.getPosition(l),i={},r=0;r<t;r++){var o=d(n,e),a=h(n,e);if(void 0!==i[n-=Math.max(-40,Math.min(40,Math.round(o/a)))])break;i[n]=r}return n}var p,v,m,g,y,b,w,_,k=f(t,r);!function(t){var e=E.direction.getPosition(l);if(void 0===O[l.id]){var n={};x(l,n),O[l.id]=n}var i=S(O[l.id]),r=i[2],o=i[3],a=t-e,s=0;0<a?s=Math.min(a,o-E.options.hierarchical.nodeSpacing):a<0&&(s=-Math.min(-a,r-E.options.hierarchical.nodeSpacing)),0!=s&&(E._shiftBlock(l.id,s),T=!0)}(k),p=k=f(t,n),v=E.direction.getPosition(l),m=E._getSpaceAroundNode(l),g=QE(m,2),y=g[0],b=g[1],0<(w=p-(_=v))?_=Math.min(v+(b-E.options.hierarchical.nodeSpacing),p):w<0&&(_=Math.max(v-(y-E.options.hierarchical.nodeSpacing),p)),_!==v&&(E.direction.setPosition(l,_),T=!0)}var E=this,T=!1,O={};!0===this.options.hierarchical.blockShifting&&(function(){var t=E.hierarchical.getLevels();t=yD(t).call(t);for(var e=0;e<5&&(n(r,t,!(T=!1)),!0===T);e++);}(),function(){for(var t in E.body.nodes)E.body.nodes.hasOwnProperty(t)&&E._centerParent(E.body.nodes[t])}()),!0===this.options.hierarchical.edgeMinimization&&function(){var t=E.hierarchical.getLevels();t=yD(t).call(t);for(var e=0;e<20;e++){T=!1;for(var n=0;n<t.length;n++)for(var i=t[n],r=E.hierarchical.distributionOrdering[i],o=0;o<r.length;o++)a(1e3,r[o]);if(!0!==T)break}}(),!0===this.options.hierarchical.parentCentralization&&function(){var t=E.hierarchical.getLevels();t=yD(t).call(t);for(var e=0;e<t.length;e++)for(var n=t[e],i=E.hierarchical.distributionOrdering[n],r=0;r<i.length;r++)E._centerParent(i[r])}(),function(){for(var t=function(){for(var t=[],e=0;e<E.hierarchical.numTrees();e++)t.push(E.direction.getTreeSize(e));return t}(),e=0,n=0;n<t.length-1;n++)e+=t[n].max-t[n+1].min+E.options.hierarchical.treeSpacing,i(n+1,e)}()}},{key:"_getSpaceAroundNode",value:function(t,e){var n=!0;void 0===e&&(n=!1);var i=this.hierarchical.levels[t.id];if(void 0===i)return[0,0];var r=this.hierarchical.distributionIndex[t.id],o=this.direction.getPosition(t),a=this.hierarchical.distributionOrdering[i],s=1e9,l=1e9;if(0!==r){var c=a[r-1];(!0===n&&void 0===e[c.id]||!1===n)&&(s=o-this.direction.getPosition(c))}if(r!=a.length-1){var u=a[r+1];if(!0===n&&void 0===e[u.id]||!1===n){var d=this.direction.getPosition(u);l=Math.min(l,d-o)}}return[s,l]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var e=this.hierarchical.parentReference[t.id],n=0;n<e.length;n++){var i=e[n],r=this.body.nodes[i],o=this.hierarchical.childrenReference[i];if(void 0!==o){var a=this._getCenterPosition(o),s=this.direction.getPosition(r),l=this._getSpaceAroundNode(r),c=QE(l,2),u=c[0],d=c[1],h=s-a;(h<0&&Math.abs(h)<d-this.options.hierarchical.nodeSpacing||0<h&&Math.abs(h)<u-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(r,a)}}}},{key:"_placeNodesByHierarchy",value:function(t){for(var e in this.positionedNodes={},t)if(t.hasOwnProperty(e)){var n,i=nf(t[e]);i=this._indexArrayToNodes(i),xC(n=this.direction).call(n,i);for(var r=0,o=0;o<i.length;o++){var a=i[o];if(void 0===this.positionedNodes[a.id]){var s=this.options.hierarchical.nodeSpacing,l=s*r;0<r&&(l=this.direction.getPosition(i[o-1])+s),this.direction.setPosition(a,l,e),this._validatePositionAndContinue(a,e,l),r++}}}}},{key:"_placeBranchNodes",value:function(t,e){var n,i=this.hierarchical.childrenReference[t];if(void 0!==i){for(var r=[],o=0;o<i.length;o++)r.push(this.body.nodes[i[o]]);xC(n=this.direction).call(n,r);for(var a=0;a<r.length;a++){var s=r[a],l=this.hierarchical.levels[s.id];if(!(e<l&&void 0===this.positionedNodes[s.id]))return;var c,u=this.options.hierarchical.nodeSpacing;c=0===a?this.direction.getPosition(this.body.nodes[t]):this.direction.getPosition(r[a-1])+u,this.direction.setPosition(s,c,l),this._validatePositionAndContinue(s,l,c)}var d=this._getCenterPosition(r);this.direction.setPosition(this.body.nodes[t],d,e)}}},{key:"_validatePositionAndContinue",value:function(t,e,n){if(this.hierarchical.isTree){if(void 0!==this.lastNodeOnLevel[e]){var i=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[e]]);if(n-i<this.options.hierarchical.nodeSpacing){var r=i+this.options.hierarchical.nodeSpacing-n,o=this._findCommonParent(this.lastNodeOnLevel[e],t.id);this._shiftBlock(o.withChild,r)}}this.lastNodeOnLevel[e]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,e)}}},{key:"_indexArrayToNodes",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push(this.body.nodes[t[n]]);return e}},{key:"_getDistribution",value:function(){var t,e,n={};for(t in this.body.nodes)if(this.body.nodes.hasOwnProperty(t)){e=this.body.nodes[t];var i=void 0===this.hierarchical.levels[t]?0:this.hierarchical.levels[t];this.direction.fix(e,i),void 0===n[i]&&(n[i]={}),n[i][t]=e}return n}},{key:"_getActiveEdges",value:function(t){var n=this,i=[];return la(t.edges,function(t){var e;-1!==kc(e=n.body.edgeIndices).call(e,t.id)&&i.push(t)}),i}},{key:"_getHubSizes",value:function(){var i=this,r={};la(this.body.nodeIndices,function(t){var e=i.body.nodes[t],n=i._getActiveEdges(e).length;r[n]=!0});var e=[];return la(r,function(t){e.push(Number(t))}),xC(MC).call(MC,e,function(t,e){return e-t}),e}},{key:"_determineLevelsByHubsize",value:function(){for(var i=this,r=function(t,e){i.hierarchical.levelDownstream(t,e)},e=this._getHubSizes(),t=function(t){var n=e[t];if(0===n)return"break";la(i.body.nodeIndices,function(t){var e=i.body.nodes[t];n===i._getActiveEdges(e).length&&i._crawlNetwork(r,t)})},n=0;n<e.length&&"break"!==t(n);++n);}},{key:"_determineLevelsCustomCallback",value:function(){var o=this;this._crawlNetwork(function(t,e,n){var i=o.hierarchical.levels[t.id];void 0===i&&(i=o.hierarchical.levels[t.id]=1e5);var r=(_D.cloneOptions(t,"node"),_D.cloneOptions(e,"node"),void _D.cloneOptions(n,"edge"));o.hierarchical.levels[e.id]=i+r}),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var t,n=this,e=function(t){var e=t.reduce;return t===gC||t instanceof Array&&e===gC.reduce?mC:e}(t=this.body.nodeIndices).call(t,function(t,e){return t.set(e,n.body.nodes[e]),t},new sC),i=this.hierarchical.levels;"roots"===this.options.hierarchical.shakeTowards?this.hierarchical.levels=function(i,t){var e=1<arguments.length&&void 0!==t?t:Ec(null);return qC(function(e){var t,n;return RC(t=iE(n=e.edges).call(n,function(t){return i.has(t.toId)})).call(t,function(t){return t.from===e})},function(t,e){return e<t},"to",i,e)}(e,i):this.hierarchical.levels=function(i,t){var e=1<arguments.length&&void 0!==t?t:Ec(null);return qC(function(e){var t,n;return RC(t=iE(n=e.edges).call(n,function(t){return i.has(t.toId)})).call(t,function(t){return t.to===e})},function(t,e){return t<e},"from",i,e)}(e,i),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var n=this;this._crawlNetwork(function(t,e){n.hierarchical.levels[e.id]>n.hierarchical.levels[t.id]&&n.hierarchical.addRelation(t.id,e.id)}),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){function a(t,e){if(void 0===c[t.id]){var n;s.hierarchical.setTreeIndex(t,e),c[t.id]=!0;for(var i=s._getActiveEdges(t),r=0;r<i.length;r++){var o=i[r];!0===o.connected&&(n=o.toId==t.id?o.from:o.to,t.id!=n.id&&(l(t,n,o),a(n,e)))}}}var s=this,l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(){},t=1<arguments.length?arguments[1]:void 0,c={};if(void 0===t)for(var e=0,n=0;n<this.body.nodeIndices.length;n++){var i=this.body.nodeIndices[n];void 0===c[i]&&(a(this.body.nodes[i],e),e+=1)}else{var r=this.body.nodes[t];if(void 0===r)return void console.error("Node not found:",t);a(r)}}},{key:"_shiftBlock",value:function(t,r){var o=this,a={};!function t(e){if(!a[e]){a[e]=!0,o.direction.shift(e,r);var n=o.hierarchical.childrenReference[e];if(void 0!==n)for(var i=0;i<n.length;i++)t(n[i])}}(t)}},{key:"_findCommonParent",value:function(t,e){var s=this,n={};return function t(e,n){var i=s.hierarchical.parentReference[n];if(void 0!==i)for(var r=0;r<i.length;r++){var o=i[r];e[o]=!0,t(e,o)}}(n,t),function t(e,n){var i=s.hierarchical.parentReference[n];if(void 0!==i)for(var r=0;r<i.length;r++){var o=i[r];if(void 0!==e[o])return{foundParent:o,withChild:n};var a=t(e,o);if(null!==a.foundParent)return a}return{foundParent:null,withChild:n}}(n,e)}},{key:"setDirectionStrategy",value:function(){var t="UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction;this.direction=t?new LC(this):new AC(this)}},{key:"_getCenterPosition",value:function(t){for(var e=1e9,n=-1e9,i=0;i<t.length;i++){var r=void 0;if(void 0!==t[i].id)r=t[i];else{var o=t[i];r=this.body.nodes[o]}var a=this.direction.getPosition(r);e=Math.min(e,a),n=Math.max(n,a)}return.5*(e+n)}}]),oL),VC=(Ah(rL,[{key:"_restore",value:function(){!1!==this.inMode&&(!0===this.options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,e,n){void 0!==e&&(void 0!==e.locale?this.options.locale=e.locale:this.options.locale=n.locale,void 0!==e.locales?this.options.locales=e.locales:this.options.locales=n.locales),void 0!==t&&("boolean"==typeof t?this.options.enabled=t:(this.options.enabled=!0,Qo(this.options,t)),!0===this.options.initiallyActive&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===this.editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},!0===this.guiEnabled){var t,e;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var n=this.selectionHandler._getSelectedNodeCount(),i=this.selectionHandler._getSelectedEdgeCount(),r=n+i,o=this.options.locales[this.options.locale],a=!1;!1!==this.options.addNode&&(this._createAddNodeButton(o),a=!0),!1!==this.options.addEdge&&(!0===a?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),1===n&&"function"==typeof this.options.editNode?(!0===a?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):1===i&&0===n&&!1!==this.options.editEdge&&(!0===a?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),0!==r&&(0<n&&!1!==this.options.deleteNode?(!0===a&&this._createSeperator(4),this._createDeleteButton(o)):0===n&&!1!==this.options.deleteEdge&&(!0===a&&this._createSeperator(4),this._createDeleteButton(o))),this._bindHammerToDiv(this.closeDiv,Z(t=this.toggleEditMode).call(t,this)),this._temporaryBindEvent("select",Z(e=this.showManipulatorToolbar).call(e,this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var t;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addNode",!0===this.guiEnabled){var e,n=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(n),this._createSeperator(),this._createDescription(n.addDescription||this.options.locales.en.addDescription),this._bindHammerToDiv(this.closeDiv,Z(e=this.toggleEditMode).call(e,this))}this._temporaryBindEvent("click",Z(t=this._performAddNode).call(t,this))}},{key:"editNode",value:function(){var e=this;!0!==this.editMode&&this.enableEditMode(),this._clean();var t=this.selectionHandler._getSelectedNode();if(void 0!==t){if(this.inMode="editNode","function"!=typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(!0!==t.isCluster){var n=Qo({},t.options,!1);if(n.x=t.x,n.y=t.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(n,function(t){null!=t&&"editNode"===e.inMode&&e.body.data.nodes.getDataSet().update(t),e.showManipulatorToolbar()})}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var t,e,n,i,r;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addEdge",!0===this.guiEnabled){var o,a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindHammerToDiv(this.closeDiv,Z(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",Z(t=this._handleConnect).call(t,this)),this._temporaryBindUI("onDragEnd",Z(e=this._finishConnect).call(e,this)),this._temporaryBindUI("onDrag",Z(n=this._dragControlNode).call(n,this)),this._temporaryBindUI("onRelease",Z(i=this._finishConnect).call(i,this)),this._temporaryBindUI("onDragStart",Z(r=this._dragStartEdge).call(r,this)),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="editEdge","object"!==cT(this.options.editEdge)||"function"!=typeof this.options.editEdge.editWithoutDrag||(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0===this.edgeBeingEditedId)){if(!0===this.guiEnabled){var t,e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindHammerToDiv(this.closeDiv,Z(t=this.toggleEditMode).call(t,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0!==this.edgeBeingEditedId){var n,i,r,o,a=this.body.edges[this.edgeBeingEditedId],s=this._getNewTargetNode(a.from.x,a.from.y),l=this._getNewTargetNode(a.to.x,a.to.y);this.temporaryIds.nodes.push(s.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[s.id]=s,this.body.nodeIndices.push(s.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",Z(n=this._controlNodeTouch).call(n,this)),this._temporaryBindUI("onTap",function(){}),this._temporaryBindUI("onHold",function(){}),this._temporaryBindUI("onDragStart",Z(i=this._controlNodeDragStart).call(i,this)),this._temporaryBindUI("onDrag",Z(r=this._controlNodeDrag).call(r,this)),this._temporaryBindUI("onDragEnd",Z(o=this._controlNodeDragEnd).call(o,this)),this._temporaryBindUI("onMouseMove",function(){}),this._temporaryBindEvent("beforeDrawing",function(t){var e=a.edgeType.findBorderPositions(t);!1===s.selected&&(s.x=e.from.x,s.y=e.from.y),!1===l.selected&&(l.x=e.to.x,l.y=e.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}else{var c=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(c.from.id,c.to.id)}}},{key:"deleteSelected",value:function(){var e=this;!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="delete";var t=this.selectionHandler.getSelectedNodes(),n=this.selectionHandler.getSelectedEdges(),i=void 0;if(0<t.length){for(var r=0;r<t.length;r++)if(!0===this.body.nodes[t[r]].isCluster)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"==typeof this.options.deleteNode&&(i=this.options.deleteNode)}else 0<n.length&&"function"==typeof this.options.deleteEdge&&(i=this.options.deleteEdge);if("function"==typeof i){var o={nodes:t,edges:n};if(2!==i.length)throw new Error("The function for delete does not support two arguments (data, callback)");i(o,function(t){null!=t&&"delete"===e.inMode&&(e.body.data.edges.getDataSet().remove(t.edges),e.body.data.nodes.getDataSet().remove(t.nodes)),e.body.emitter.emit("startSimulation"),e.showManipulatorToolbar()})}else this.body.data.edges.getDataSet().remove(n),this.body.data.nodes.getDataSet().remove(t),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===this.options.enabled?(this.guiEnabled=!0,this._createWrappers(),!1===this.editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",!0===this.editMode?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",!0===this.editMode?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="vis-close",this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(t,e){var n=Qo({},this.options.controlNodeStyle);n.id="targetNode"+Po(),n.hidden=!1,n.physics=!1,n.x=t,n.y=e;var i=this.body.functions.createNode(n);return i.shape.boundingBox={left:t,right:t,top:e,bottom:e},i}},{key:"_createEditButton",value:function(){var t;this._clean(),this.manipulationDOM={},Yo(this.editModeDiv);var e=this.options.locales[this.options.locale],n=this._createButton("editMode","vis-button vis-edit vis-edit-mode",e.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(n),this._bindHammerToDiv(n,Z(t=this.toggleEditMode).call(t,this))}},{key:"_clean",value:function(){!(this.inMode=!1)===this.guiEnabled&&(Yo(this.editModeDiv),Yo(this.manipulationDiv),this._cleanManipulatorHammers()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanManipulatorHammers",value:function(){if(0!=this.manipulationHammers.length){for(var t=0;t<this.manipulationHammers.length;t++)this.manipulationHammers[t].destroy();this.manipulationHammers=[]}}},{key:"_removeManipulationDOM",value:function(){this._clean(),Yo(this.manipulationDiv),Yo(this.editModeDiv),Yo(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var e,n=this._createButton("addNode","vis-button vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(n),this._bindHammerToDiv(n,Z(e=this.addNodeMode).call(e,this))}},{key:"_createAddEdgeButton",value:function(t){var e,n=this._createButton("addEdge","vis-button vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(n),this._bindHammerToDiv(n,Z(e=this.addEdgeMode).call(e,this))}},{key:"_createEditNodeButton",value:function(t){var e,n=this._createButton("editNode","vis-button vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(n),this._bindHammerToDiv(n,Z(e=this.editNode).call(e,this))}},{key:"_createEditEdgeButton",value:function(t){var e,n=this._createButton("editEdge","vis-button vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(n),this._bindHammerToDiv(n,Z(e=this.editEdgeMode).call(e,this))}},{key:"_createDeleteButton",value:function(t){var e,n;n=this.options.rtl?"vis-button vis-delete-rtl":"vis-button vis-delete";var i=this._createButton("delete",n,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(i),this._bindHammerToDiv(i,Z(e=this.deleteSelected).call(e,this))}},{key:"_createBackButton",value:function(t){var e,n=this._createButton("back","vis-button vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(n),this._bindHammerToDiv(n,Z(e=this.showManipulatorToolbar).call(e,this))}},{key:"_createButton",value:function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("div"),this.manipulationDOM[t+"Div"].className=e,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=i,this.manipulationDOM[t+"Label"].innerHTML=n,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDiv.appendChild(this._createButton("description","vis-button vis-none",t))}},{key:"_temporaryBindEvent",value:function(t,e){this.temporaryEventFunctions.push({event:t,boundFunction:e}),this.body.emitter.on(t,e)}},{key:"_temporaryBindUI",value:function(t,e){if(void 0===this.body.eventListeners[t])throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+NO(nf(this.body.eventListeners)));this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=e}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)this.temporaryUIFunctions.hasOwnProperty(t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var e=this.temporaryEventFunctions[t].event,n=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(e,n)}this.temporaryEventFunctions=[]}},{key:"_bindHammerToDiv",value:function(t,e){var n=new kh(t,{});DD.onTouch(n,e),this.manipulationHammers.push(n)}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){var e;this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var n,i=kc(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[t]);-1!==i&&oc(n=this.body.edgeIndices).call(n,i,1)}for(var r=0;r<this.temporaryIds.nodes.length;r++){var o;delete this.body.nodes[this.temporaryIds.nodes[r]];var a,s=kc(o=this.body.nodeIndices).call(o,this.temporaryIds.nodes[r]);-1!==s&&oc(a=this.body.nodeIndices).call(a,s,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=Jo({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(t){var e=this.lastTouch,n=this.selectionHandler._pointerToPositionObject(e),i=this.body.nodes[this.temporaryIds.nodes[0]],r=this.body.nodes[this.temporaryIds.nodes[1]],o=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var a=i.isOverlappingWith(n),s=r.isOverlappingWith(n);!0===a?(this.selectedControlNode=i,o.edgeType.from=i):!0===s&&(this.selectedControlNode=r,o.edgeType.to=r),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var e=this.body.functions.getPointer(t.center),n=this.canvas.DOMtoCanvas(e);void 0!==this.selectedControlNode?(this.selectedControlNode.x=n.x,this.selectedControlNode.y=n.y):this.interactionHandler.onDrag(t),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var e=this.body.functions.getPointer(t.center),n=this.selectionHandler._pointerToPositionObject(e),i=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var r=this.selectionHandler._getAllNodesOverlappingWith(n),o=void 0,a=r.length-1;0<=a;a--)if(r[a]!==this.selectedControlNode.id){o=this.body.nodes[r[a]];break}if(void 0!==o&&void 0!==this.selectedControlNode)if(!0===o.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var s=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===s.id?this._performEditEdge(o.id,i.to.id):this._performEditEdge(i.from.id,o.id)}else i.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if(100<(new Date).valueOf()-this.touchTime){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=Jo({},this.body.view.translation);var e=this.lastTouch,n=this.selectionHandler.getNodeAt(e);if(void 0!==n)if(!0===n.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var i=this._getNewTargetNode(n.x,n.y);this.body.nodes[i.id]=i,this.body.nodeIndices.push(i.id);var r=this.body.functions.createEdge({id:"connectionEdge"+Po(),from:n.id,to:i.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[r.id]=r,this.body.edgeIndices.push(r.id),this.temporaryIds.nodes.push(i.id),this.temporaryIds.edges.push(r.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(t){var e=this.body.functions.getPointer(t.center),n=this.selectionHandler._pointerToPositionObject(e),i=void 0;void 0!==this.temporaryIds.edges[0]&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var r=this.selectionHandler._getAllNodesOverlappingWith(n),o=void 0,a=r.length-1;0<=a;a--){var s;if(-1===kc(s=this.temporaryIds.nodes).call(s,r[a])){o=this.body.nodes[r[a]];break}}if(t.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler._generateClickEvent("controlNodeDragging",t,e),void 0!==this.temporaryIds.nodes[0]){var l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(e.x),l.y=this.canvas._YconvertDOMtoCanvas(e.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(t)}},{key:"_finishConnect",value:function(t){var e=this.body.functions.getPointer(t.center),n=this.selectionHandler._pointerToPositionObject(e),i=void 0;void 0!==this.temporaryIds.edges[0]&&(i=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var r=this.selectionHandler._getAllNodesOverlappingWith(n),o=void 0,a=r.length-1;0<=a;a--){var s;if(-1===kc(s=this.temporaryIds.nodes).call(s,r[a])){o=this.body.nodes[r[a]];break}}this._cleanupTemporaryNodesAndEdges(),void 0!==o&&(!0===o.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[i]&&void 0!==this.body.nodes[o.id]&&this._performAddEdge(i,o.id)),t.controlEdge={from:i,to:o?o.id:void 0},this.selectionHandler._generateClickEvent("controlNodeDragEnd",t,e),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var e=this.lastTouch;this.selectionHandler._generateClickEvent("dragStart",t,e,void 0,!0)}},{key:"_performAddNode",value:function(t){var e=this,n={id:Po(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if("function"==typeof this.options.addNode){if(2!==this.options.addNode.length)throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(n,function(t){null!=t&&"addNode"===e.inMode&&e.body.data.nodes.getDataSet().add(t),e.showManipulatorToolbar()})}else this.body.data.nodes.getDataSet().add(n),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,e){var n=this,i={from:t,to:e};if("function"==typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(i,function(t){null!=t&&"addEdge"===n.inMode&&(n.body.data.edges.getDataSet().add(t),n.selectionHandler.unselectAll(),n.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().add(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,e){var n=this,i={id:this.edgeBeingEditedId,from:t,to:e,label:this.body.data.edges.get(this.edgeBeingEditedId).label},r=this.options.editEdge;if("object"===cT(r)&&(r=r.editWithoutDrag),"function"==typeof r){if(2!==r.length)throw new Error("The function for edit does not support two arguments (data, callback)");r(i,function(t){null==t||"editEdge"!==n.inMode?(n.body.edges[i.id].updateEdgeType(),n.body.emitter.emit("_redraw")):(n.body.data.edges.getDataSet().update(t),n.selectionHandler.unselectAll()),n.showManipulatorToolbar()})}else this.body.data.edges.getDataSet().update(i),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),rL),GC={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},JC=(Ah(iL,[{key:"insertTo",value:function(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=t}},{key:"setCloseCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=t}},{key:"_isColorString",value:function(t){if("string"==typeof t)return GC[t]}},{key:"setColor",value:function(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if("none"!==t){var n,i=this._isColorString(t);if(void 0!==i&&(t=i),!0===qo(t)){if(!0===La(t)){var r=t.substr(4).substr(0,t.length-5).split(",");n={r:r[0],g:r[1],b:r[2],a:1}}else if(!0===Aa(t)){var o=t.substr(5).substr(0,t.length-6).split(",");n={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(!0===Ca(t)){var a=ya(t);n={r:a.r,g:a.g,b:a.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){var s=void 0!==t.a?t.a:"1.0";n={r:t.r,g:t.g,b:t.b,a:s}}if(void 0===n)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+NO(t));this._setColor(n,e)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this;!0===(!(0<arguments.length&&void 0!==arguments[0])||arguments[0])&&(this.previousColor=Jo({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",qh(function(){void 0!==t.closeCallback&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){!0===(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&(this.initialColor=Jo({},t));var e=ka((this.color=t).r,t.g,t.b),n=2*Math.PI,i=this.r*e.s,r=this.centerCoordinates.x+i*Math.sin(n*e.h),o=this.centerCoordinates.y+i*Math.cos(n*e.h);this.colorPickerSelector.style.left=r-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=o-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var e=ka(this.color.r,this.color.g,this.color.b);e.v=t/100;var n=Oa(e.h,e.s,e.v);n.a=this.color.a,this.color=n,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.color,e=ka(t.r,t.g,t.b),n=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var i=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,i,r),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-e.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),WT(n).call(n),this.brightnessRange.value=100*e.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,e,n,i;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var r=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(t){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(t){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var a=this;this.opacityRange.onchange=function(){a._setOpacity(this.value)},this.opacityRange.oninput=function(){a._setOpacity(this.value)},this.brightnessRange.onchange=function(){a._setBrightness(this.value)},this.brightnessRange.oninput=function(){a._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=Z(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=Z(e=this._apply).call(e,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=Z(n=this._save).call(n,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=Z(i=this._loadLast).call(i,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var e=this;this.drag={},this.pinch={},this.hammer=new kh(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),DD.onTouch(this.hammer,function(t){e._moveSelector(t)}),this.hammer.on("tap",function(t){e._moveSelector(t)}),this.hammer.on("panstart",function(t){e._moveSelector(t)}),this.hammer.on("panmove",function(t){e._moveSelector(t)}),this.hammer.on("panend",function(t){e._moveSelector(t)})}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var e,n,i,r,o=this.colorPickerCanvas.clientWidth,a=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,o,a),this.centerCoordinates={x:.5*o,y:.5*a},this.r=.49*o;var s,l=2*Math.PI/360,c=1/this.r;for(i=0;i<360;i++)for(r=0;r<this.r;r++)e=this.centerCoordinates.x+r*Math.sin(l*i),n=this.centerCoordinates.y+r*Math.cos(l*i),s=Oa(i*(1/360),r*c,1),t.fillStyle="rgb("+s.r+","+s.g+","+s.b+")",t.fillRect(e-.5,n-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,o,a)}this.generated=!0}},{key:"_moveSelector",value:function(t){var e=this.colorPickerDiv.getBoundingClientRect(),n=t.center.x-e.left,i=t.center.y-e.top,r=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=n-o,s=i-r,l=Math.atan2(a,s),c=.98*Math.min(Math.sqrt(a*a+s*s),o),u=Math.cos(l)*c+r,d=Math.sin(l)*c+o;this.colorPickerSelector.style.top=u-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=d-.5*this.colorPickerSelector.clientWidth+"px";var h=l/(2*Math.PI);h=h<0?h+1:h;var f=c/this.r,p=ka(this.color.r,this.color.g,this.color.b);p.h=h,p.s=f;var v=Oa(p.h,p.s,p.v);v.a=this.color.a,this.color=v,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),iL),XC=(Ah(nL,[{key:"setOptions",value:function(t){if(void 0!==t){this.popupHistory={},this._removePopup();var e=!0;if("string"==typeof t)this.options.filter=t;else if(t instanceof Array)this.options.filter=t.join();else if("object"===cT(t)){if(null==t)throw new TypeError("options cannot be null");void 0!==t.container&&(this.options.container=t.container),void 0!==iE(t)&&(this.options.filter=iE(t)),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(e=t.enabled)}else"boolean"==typeof t?(this.options.filter=!0,e=t):"function"==typeof t&&(this.options.filter=t,e=!0);!1===iE(this.options)&&(e=!1),this.options.enabled=e}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=iE(this.options),e=0,n=!1;for(var i in this.configureOptions)this.configureOptions.hasOwnProperty(i)&&(n=this.allowCreation=!1,"function"==typeof t?n=(n=t(i,[]))||this._handleObject(this.configureOptions[i],[i],!0):!0!==t&&-1===kc(t).call(t,i)||(n=!0),!1!==n&&(this.allowCreation=!0,0<e&&this._makeItem([]),this._makeHeader(i),this._handleObject(this.configureOptions[i],[i])),e++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var e=this.moduleOptions,n=0;n<t.length;n++){if(void 0===e[t[n]]){e=void 0;break}e=e[t[n]]}return e}},{key:"_makeItem",value:function(t){if(!0!==this.allowCreation)return 0;var e=document.createElement("div");e.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return Hl(i).call(i,function(t){e.appendChild(t)}),this.domElements.push(e),this.domElements.length}},{key:"_makeHeader",value:function(t){var e=document.createElement("div");e.className="vis-configuration vis-config-header",e.innerHTML=t,this._makeItem([],e)}},{key:"_makeLabel",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=document.createElement("div");return i.className="vis-configuration vis-config-label vis-config-s"+e.length,i.innerHTML=!0===n?"<i><b>"+t+":</b></i>":t+":",i}},{key:"_makeDropdown",value:function(t,e,n){var i=document.createElement("select");i.className="vis-configuration vis-config-select";var r=0;void 0!==e&&-1!==kc(t).call(t,e)&&(r=kc(t).call(t,e));for(var o=0;o<t.length;o++){var a=document.createElement("option");a.value=t[o],o===r&&(a.selected="selected"),a.innerHTML=t[o],i.appendChild(a)}var s=this;i.onchange=function(){s._update(this.value,n)};var l=this._makeLabel(n[n.length-1],n);this._makeItem(n,l,i)}},{key:"_makeRange",value:function(t,e,n){var i=t[0],r=t[1],o=t[2],a=t[3],s=document.createElement("input");s.className="vis-configuration vis-config-range";try{s.type="range",s.min=r,s.max=o}catch(t){}s.step=a;var l="",c=0;void 0!==e?(e<0&&1.2*e<r?(s.min=Math.ceil(1.2*e),c=s.min,l="range increased"):e/1.2<r&&(s.min=Math.ceil(e/1.2),c=s.min,l="range increased"),o<1.2*e&&1!==o&&(s.max=Math.ceil(1.2*e),c=s.max,l="range increased"),s.value=e):s.value=i;var u=document.createElement("input");u.className="vis-configuration vis-config-rangeinput",u.value=s.value;var d=this;s.onchange=function(){u.value=this.value,d._update(Number(this.value),n)},s.oninput=function(){u.value=this.value};var h=this._makeLabel(n[n.length-1],n),f=this._makeItem(n,h,s,u);""!==l&&this.popupHistory[f]!==c&&(this.popupHistory[f]=c,this._setupPopup(l,f))}},{key:"_makeButton",value:function(){var t=this;if(!0===this.options.showButton){var e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerHTML="generate options",e.onclick=function(){t._printOptions()},e.onmouseover=function(){e.className="vis-configuration vis-config-button hover"},e.onmouseout=function(){e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}},{key:"_setupPopup",value:function(t,e){var n=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var i=document.createElement("div");i.id="vis-configuration-popup",i.className="vis-configuration-popup",i.innerHTML=t,i.onclick=function(){n._removePopup()},this.popupCounter+=1,this.popupDiv={html:i,index:e}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(void 0!==this.popupDiv.html){var e=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=e.left+"px",this.popupDiv.html.style.top=e.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=qh(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=qh(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,e,n){var i=document.createElement("input");i.type="checkbox",i.className="vis-configuration vis-config-checkbox",i.checked=t,void 0===e||(i.checked=e)!==t&&("object"===cT(t)?e!==t.enabled&&this.changedOptions.push({path:n,value:e}):this.changedOptions.push({path:n,value:e}));var r=this;i.onchange=function(){r._update(this.checked,n)};var o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}},{key:"_makeTextInput",value:function(t,e,n){var i=document.createElement("input");i.type="text",i.className="vis-configuration vis-config-text",(i.value=e)!==t&&this.changedOptions.push({path:n,value:e});var r=this;i.onchange=function(){r._update(this.value,n)};var o=this._makeLabel(n[n.length-1],n);this._makeItem(n,o,i)}},{key:"_makeColorField",value:function(t,e,n){var i=this,r=t[1],o=document.createElement("div");"none"!==(e=void 0===e?r:e)?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=e):o.className="vis-configuration vis-config-colorBlock none",e=void 0===e?r:e,o.onclick=function(){i._showColorPicker(e,o,n)};var a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,o)}},{key:"_showColorPicker",value:function(t,n,i){var r=this;n.onclick=function(){},this.colorPicker.insertTo(n),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(t){var e="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";n.style.backgroundColor=e,r._update(e,i)}),this.colorPicker.setCloseCallback(function(){n.onclick=function(){r._showColorPicker(t,n,i)}})}},{key:"_handleObject",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=!1,r=iE(this.options),o=!1;for(var a in t)if(t.hasOwnProperty(a)){i=!0;var s=t[a],l=ea(e,a);if("function"==typeof r&&!1===(i=r(a,e))&&!(s instanceof Array)&&"string"!=typeof s&&"boolean"!=typeof s&&s instanceof Object&&(this.allowCreation=!1,i=this._handleObject(s,l,!0),this.allowCreation=!1===n),!1!==i){o=!0;var c=this._getValue(l);if(s instanceof Array)this._handleArray(s,c,l);else if("string"==typeof s)this._makeTextInput(s,c,l);else if("boolean"==typeof s)this._makeCheckbox(s,c,l);else if(s instanceof Object){var u=!0;if(-1!==kc(e).call(e,"physics")&&this.moduleOptions.physics.solver!==a&&"wind"!==a&&(u=!1),!0===u)if(void 0!==s.enabled){var d=ea(l,"enabled"),h=this._getValue(d);if(!0===h){var f=this._makeLabel(a,l,!0);this._makeItem(l,f),o=this._handleObject(s,l)||o}else this._makeCheckbox(s,h,l)}else{var p=this._makeLabel(a,l,!0);this._makeItem(l,p),o=this._handleObject(s,l)||o}}else console.error("dont know how to handle",s,a,l)}}return o}},{key:"_handleArray",value:function(t,e,n){"string"==typeof t[0]&&"color"===t[0]?(this._makeColorField(t,e,n),t[1]!==e&&this.changedOptions.push({path:n,value:e})):"string"==typeof t[0]?(this._makeDropdown(t,e,n),t[0]!==e&&this.changedOptions.push({path:n,value:e})):"number"==typeof t[0]&&(this._makeRange(t,e,n),t[0]!==e&&this.changedOptions.push({path:n,value:Number(e)}))}},{key:"_update",value:function(t,e){var n=this._constructOptions(t,e);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}},{key:"_constructOptions",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=n;t="false"!==(t="true"===t||t)&&t;for(var r=0;r<e.length;r++)"global"!==e[r]&&(void 0===i[e[r]]&&(i[e[r]]={}),r!==e.length-1?i=i[e[r]]:i[e[r]]=t);return n}},{key:"_printOptions",value:function(){var t=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+NO(t,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var t={},e=0;e<this.changedOptions.length;e++)this._constructOptions(this.changedOptions[e].value,this.changedOptions[e].path,t);return t}}]),nL),ZC="string",$C="boolean",QC="number",KC="object",tL=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],eL={configure:{enabled:{boolean:$C},filter:{boolean:$C,string:ZC,array:"array",function:"function"},container:{dom:"dom"},showButton:{boolean:$C},__type__:{object:KC,boolean:$C,string:ZC,array:"array",function:"function"}},edges:{arrows:{to:{enabled:{boolean:$C},scaleFactor:{number:QC},type:{string:tL},imageHeight:{number:QC},imageWidth:{number:QC},src:{string:ZC},__type__:{object:KC,boolean:$C}},middle:{enabled:{boolean:$C},scaleFactor:{number:QC},type:{string:tL},imageWidth:{number:QC},imageHeight:{number:QC},src:{string:ZC},__type__:{object:KC,boolean:$C}},from:{enabled:{boolean:$C},scaleFactor:{number:QC},type:{string:tL},imageWidth:{number:QC},imageHeight:{number:QC},src:{string:ZC},__type__:{object:KC,boolean:$C}},__type__:{string:["from","to","middle"],object:KC}},arrowStrikethrough:{boolean:$C},background:{enabled:{boolean:$C},color:{string:ZC},size:{number:QC},dashes:{boolean:$C,array:"array"},__type__:{object:KC,boolean:$C}},chosen:{label:{boolean:$C,function:"function"},edge:{boolean:$C,function:"function"},__type__:{object:KC,boolean:$C}},color:{color:{string:ZC},highlight:{string:ZC},hover:{string:ZC},inherit:{string:["from","to","both"],boolean:$C},opacity:{number:QC},__type__:{object:KC,string:ZC}},dashes:{boolean:$C,array:"array"},font:{color:{string:ZC},size:{number:QC},face:{string:ZC},background:{string:ZC},strokeWidth:{number:QC},strokeColor:{string:ZC},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:QC},multi:{boolean:$C,string:ZC},bold:{color:{string:ZC},size:{number:QC},face:{string:ZC},mod:{string:ZC},vadjust:{number:QC},__type__:{object:KC,string:ZC}},boldital:{color:{string:ZC},size:{number:QC},face:{string:ZC},mod:{string:ZC},vadjust:{number:QC},__type__:{object:KC,string:ZC}},ital:{color:{string:ZC},size:{number:QC},face:{string:ZC},mod:{string:ZC},vadjust:{number:QC},__type__:{object:KC,string:ZC}},mono:{color:{string:ZC},size:{number:QC},face:{string:ZC},mod:{string:ZC},vadjust:{number:QC},__type__:{object:KC,string:ZC}},__type__:{object:KC,string:ZC}},hidden:{boolean:$C},hoverWidth:{function:"function",number:QC},label:{string:ZC,undefined:"undefined"},labelHighlightBold:{boolean:$C},length:{number:QC,undefined:"undefined"},physics:{boolean:$C},scaling:{min:{number:QC},max:{number:QC},label:{enabled:{boolean:$C},min:{number:QC},max:{number:QC},maxVisible:{number:QC},drawThreshold:{number:QC},__type__:{object:KC,boolean:$C}},customScalingFunction:{function:"function"},__type__:{object:KC}},selectionWidth:{function:"function",number:QC},selfReferenceSize:{number:QC},selfReference:{size:{number:QC},angle:{number:QC},renderBehindTheNode:{boolean:$C},__type__:{object:KC}},shadow:{enabled:{boolean:$C},color:{string:ZC},size:{number:QC},x:{number:QC},y:{number:QC},__type__:{object:KC,boolean:$C}},smooth:{enabled:{boolean:$C},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:QC},forceDirection:{string:["horizontal","vertical","none"],boolean:$C},__type__:{object:KC,boolean:$C}},title:{string:ZC,undefined:"undefined"},width:{number:QC},widthConstraint:{maximum:{number:QC},__type__:{object:KC,boolean:$C,number:QC}},value:{number:QC,undefined:"undefined"},__type__:{object:KC}},groups:{useDefaultGroups:{boolean:$C},__any__:"get from nodes, will be overwritten below",__type__:{object:KC}},interaction:{dragNodes:{boolean:$C},dragView:{boolean:$C},hideEdgesOnDrag:{boolean:$C},hideEdgesOnZoom:{boolean:$C},hideNodesOnDrag:{boolean:$C},hover:{boolean:$C},keyboard:{enabled:{boolean:$C},speed:{x:{number:QC},y:{number:QC},zoom:{number:QC},__type__:{object:KC}},bindToWindow:{boolean:$C},__type__:{object:KC,boolean:$C}},multiselect:{boolean:$C},navigationButtons:{boolean:$C},selectable:{boolean:$C},selectConnectedEdges:{boolean:$C},hoverConnectedEdges:{boolean:$C},tooltipDelay:{number:QC},zoomView:{boolean:$C},zoomSpeed:{number:QC},__type__:{object:KC}},layout:{randomSeed:{undefined:"undefined",number:QC},improvedLayout:{boolean:$C},clusterThreshold:{number:QC},hierarchical:{enabled:{boolean:$C},levelSeparation:{number:QC},nodeSpacing:{number:QC},treeSpacing:{number:QC},blockShifting:{boolean:$C},edgeMinimization:{boolean:$C},parentCentralization:{boolean:$C},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:KC,boolean:$C}},__type__:{object:KC}},manipulation:{enabled:{boolean:$C},initiallyActive:{boolean:$C},addNode:{boolean:$C,function:"function"},addEdge:{boolean:$C,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:KC,boolean:$C,function:"function"}},deleteNode:{boolean:$C,function:"function"},deleteEdge:{boolean:$C,function:"function"},controlNodeStyle:"get from nodes, will be overwritten below",__type__:{object:KC,boolean:$C}},nodes:{borderWidth:{number:QC},borderWidthSelected:{number:QC,undefined:"undefined"},brokenImage:{string:ZC,undefined:"undefined"},chosen:{label:{boolean:$C,function:"function"},node:{boolean:$C,function:"function"},__type__:{object:KC,boolean:$C}},color:{border:{string:ZC},background:{string:ZC},highlight:{border:{string:ZC},background:{string:ZC},__type__:{object:KC,string:ZC}},hover:{border:{string:ZC},background:{string:ZC},__type__:{object:KC,string:ZC}},__type__:{object:KC,string:ZC}},fixed:{x:{boolean:$C},y:{boolean:$C},__type__:{object:KC,boolean:$C}},font:{align:{string:ZC},color:{string:ZC},size:{number:QC},face:{string:ZC},background:{string:ZC},strokeWidth:{number:QC},strokeColor:{string:ZC},vadjust:{number:QC},multi:{boolean:$C,string:ZC},bold:{color:{string:ZC},size:{number:QC},face:{string:ZC},mod:{string:ZC},vadjust:{number:QC},__type__:{object:KC,string:ZC}},boldital:{color:{string:ZC},size:{number:QC},face:{string:ZC},mod:{string:ZC},vadjust:{number:QC},__type__:{object:KC,string:ZC}},ital:{color:{string:ZC},size:{number:QC},face:{string:ZC},mod:{string:ZC},vadjust:{number:QC},__type__:{object:KC,string:ZC}},mono:{color:{string:ZC},size:{number:QC},face:{string:ZC},mod:{string:ZC},vadjust:{number:QC},__type__:{object:KC,string:ZC}},__type__:{object:KC,string:ZC}},group:{string:ZC,number:QC,undefined:"undefined"},heightConstraint:{minimum:{number:QC},valign:{string:ZC},__type__:{object:KC,boolean:$C,number:QC}},hidden:{boolean:$C},icon:{face:{string:ZC},code:{string:ZC},size:{number:QC},color:{string:ZC},weight:{string:ZC,number:QC},__type__:{object:KC}},id:{string:ZC,number:QC},image:{selected:{string:ZC,undefined:"undefined"},unselected:{string:ZC,undefined:"undefined"},__type__:{object:KC,string:ZC}},imagePadding:{top:{number:QC},right:{number:QC},bottom:{number:QC},left:{number:QC},__type__:{object:KC,number:QC}},label:{string:ZC,undefined:"undefined"},labelHighlightBold:{boolean:$C},level:{number:QC,undefined:"undefined"},margin:{top:{number:QC},right:{number:QC},bottom:{number:QC},left:{number:QC},__type__:{object:KC,number:QC}},mass:{number:QC},physics:{boolean:$C},scaling:{min:{number:QC},max:{number:QC},label:{enabled:{boolean:$C},min:{number:QC},max:{number:QC},maxVisible:{number:QC},drawThreshold:{number:QC},__type__:{object:KC,boolean:$C}},customScalingFunction:{function:"function"},__type__:{object:KC}},shadow:{enabled:{boolean:$C},color:{string:ZC},size:{number:QC},x:{number:QC},y:{number:QC},__type__:{object:KC,boolean:$C}},shape:{string:["ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},shapeProperties:{borderDashes:{boolean:$C,array:"array"},borderRadius:{number:QC},interpolation:{boolean:$C},useImageSize:{boolean:$C},useBorderWithImage:{boolean:$C},__type__:{object:KC}},size:{number:QC},title:{string:ZC,dom:"dom",undefined:"undefined"},value:{number:QC,undefined:"undefined"},widthConstraint:{minimum:{number:QC},maximum:{number:QC},__type__:{object:KC,boolean:$C,number:QC}},x:{number:QC},y:{number:QC},__type__:{object:KC}},physics:{enabled:{boolean:$C},barnesHut:{theta:{number:QC},gravitationalConstant:{number:QC},centralGravity:{number:QC},springLength:{number:QC},springConstant:{number:QC},damping:{number:QC},avoidOverlap:{number:QC},__type__:{object:KC}},forceAtlas2Based:{theta:{number:QC},gravitationalConstant:{number:QC},centralGravity:{number:QC},springLength:{number:QC},springConstant:{number:QC},damping:{number:QC},avoidOverlap:{number:QC},__type__:{object:KC}},repulsion:{centralGravity:{number:QC},springLength:{number:QC},springConstant:{number:QC},nodeDistance:{number:QC},damping:{number:QC},__type__:{object:KC}},hierarchicalRepulsion:{centralGravity:{number:QC},springLength:{number:QC},springConstant:{number:QC},nodeDistance:{number:QC},damping:{number:QC},avoidOverlap:{number:QC},__type__:{object:KC}},maxVelocity:{number:QC},minVelocity:{number:QC},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:$C},iterations:{number:QC},updateInterval:{number:QC},onlyDynamicEdges:{boolean:$C},fit:{boolean:$C},__type__:{object:KC,boolean:$C}},timestep:{number:QC},adaptiveTimestep:{boolean:$C},wind:{x:{number:QC},y:{number:QC},__type__:{object:KC}},__type__:{object:KC,boolean:$C}},autoResize:{boolean:$C},clickToUse:{boolean:$C},locale:{string:ZC},locales:{__any__:{any:"any"},__type__:{object:KC}},height:{string:ZC},width:{string:ZC},__type__:{object:KC}};function nL(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;Th(this,nL),this.parent=t,this.changedOptions=[],this.container=e,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Jo(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new JC(i),this.wrapper=void 0}function iL(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;Th(this,iL),this.pixelRatio=t,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}function rL(t,e,n,i){var r,o,a=this;Th(this,rL),this.body=t,this.canvas=e,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this.manipulationHammers=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},Jo(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){a._clean()}),this.body.emitter.on("_dataChanged",Z(r=this._restore).call(r,this)),this.body.emitter.on("_resetData",Z(o=this._restore).call(o,this))}function oL(t){Th(this,oL),this.body=t,this._resetRNG(Math.random()+":"+XM()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},Jo(this.options,this.defaultOptions),this.bindEventListeners()}function aL(){Th(this,aL),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}eL.groups.__any__=eL.nodes,eL.manipulation.controlNodeStyle=eL.nodes;var sL={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},lL=Object.freeze({__proto__:null,allOptions:eL,configureOptions:sL}),cL=(Ah(hL,[{key:"getDistances",value:function(t,e,n){for(var i={},r=t.edges,o=0;o<e.length;o++){var a={};i[e[o]]=a;for(var s=0;s<e.length;s++)a[e[s]]=o==s?0:1e9}for(var l=0;l<n.length;l++){var c=r[n[l]];!0===c.connected&&void 0!==i[c.fromId]&&void 0!==i[c.toId]&&(i[c.fromId][c.toId]=1,i[c.toId][c.fromId]=1)}for(var u=e.length,d=0;d<u;d++)for(var h=e[d],f=i[h],p=0;p<u-1;p++)for(var v=e[p],m=i[v],g=p+1;g<u;g++){var y=e[g],b=i[y],w=Math.min(m[y],m[h]+f[y]);m[y]=w,b[v]=w}return i}}]),hL),uL=(Ah(dL,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=this.distanceSolver.getDistances(this.body,t,e);this._createL_matrix(i),this._createK_matrix(i),this._createE_matrix();for(var r=0,o=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),a=1e9,s=0,l=0,c=0,u=0,d=0;.01<a&&r<o;){r+=1;var h=this._getHighestEnergyNode(n),f=QE(h,4);for(s=f[0],a=f[1],l=f[2],c=f[3],u=a,d=0;1<u&&d<5;){d+=1,this._moveNode(s,l,c);var p=this._getEnergy(s),v=QE(p,3);u=v[0],l=v[1],c=v[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var e=this.body.nodeIndices,n=this.body.nodes,i=0,r=e[0],o=0,a=0,s=0;s<e.length;s++){var l=e[s];if(!1===n[l].predefinedPosition||!0===n[l].isCluster&&!0===t||!0===n[l].options.fixed.x||!0===n[l].options.fixed.y){var c=this._getEnergy(l),u=QE(c,3),d=u[0],h=u[1],f=u[2];i<d&&(i=d,r=l,o=h,a=f)}}return[r,i,o,a]}},{key:"_getEnergy",value:function(t){var e=QE(this.E_sums[t],2),n=e[0],i=e[1];return[Math.sqrt(Math.pow(n,2)+Math.pow(i,2)),n,i]}},{key:"_moveNode",value:function(t,e,n){for(var i=this.body.nodeIndices,r=this.body.nodes,o=0,a=0,s=0,l=r[t].x,c=r[t].y,u=this.K_matrix[t],d=this.L_matrix[t],h=0;h<i.length;h++){var f=i[h];if(f!==t){var p=r[f].x,v=r[f].y,m=u[f],g=d[f],y=1/Math.pow(Math.pow(l-p,2)+Math.pow(c-v,2),1.5);o+=m*(1-g*Math.pow(c-v,2)*y),a+=m*(g*(l-p)*(c-v)*y),s+=m*(1-g*Math.pow(l-p,2)*y)}}var b=(e/o+n/a)/(a/o-s/a),w=-(a*b+e)/o;r[t].x+=w,r[t].y+=b,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var e=this.body.nodeIndices,n=this.springLength;this.L_matrix=[];for(var i=0;i<e.length;i++){this.L_matrix[e[i]]={};for(var r=0;r<e.length;r++)this.L_matrix[e[i]][e[r]]=n*t[e[i]][e[r]]}}},{key:"_createK_matrix",value:function(t){var e=this.body.nodeIndices,n=this.springConstant;this.K_matrix=[];for(var i=0;i<e.length;i++){this.K_matrix[e[i]]={};for(var r=0;r<e.length;r++)this.K_matrix[e[i]][e[r]]=n*Math.pow(t[e[i]][e[r]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,e=this.body.nodes;this.E_matrix={},this.E_sums={};for(var n=0;n<t.length;n++)this.E_matrix[t[n]]=[];for(var i=0;i<t.length;i++){for(var r=t[i],o=e[r].x,a=e[r].y,s=0,l=0,c=i;c<t.length;c++){var u=t[c];if(u!==r){var d=e[u].x,h=e[u].y,f=1/Math.sqrt(Math.pow(o-d,2)+Math.pow(a-h,2));this.E_matrix[r][c]=[this.K_matrix[r][u]*(o-d-this.L_matrix[r][u]*(o-d)*f),this.K_matrix[r][u]*(a-h-this.L_matrix[r][u]*(a-h)*f)],this.E_matrix[u][i]=this.E_matrix[r][c],s+=this.E_matrix[r][c][0],l+=this.E_matrix[r][c][1]}}this.E_sums[r]=[s,l]}}},{key:"_updateE_matrix",value:function(t){for(var e=this.body.nodeIndices,n=this.body.nodes,i=this.E_matrix[t],r=this.K_matrix[t],o=this.L_matrix[t],a=n[t].x,s=n[t].y,l=0,c=0,u=0;u<e.length;u++){var d=e[u];if(d!==t){var h=i[u],f=h[0],p=h[1],v=n[d].x,m=n[d].y,g=1/Math.sqrt(Math.pow(a-v,2)+Math.pow(s-m,2)),y=r[d]*(a-v-o[d]*(a-v)*g),b=r[d]*(s-m-o[d]*(s-m)*g);i[u]=[y,b],l+=y,c+=b;var w=this.E_sums[d];w[0]+=y-f,w[1]+=b-p}}this.E_sums[t]=[l,c]}}]),dL);function dL(t,e,n){Th(this,dL),this.body=t,this.springLength=e,this.springConstant=n,this.distanceSolver=new cL}function hL(){Th(this,hL)}function fL(t,e,n){var i,r,o,a,s=this;if(!(this instanceof fL))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:Mh,clickToUse:!1},Jo(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:Z(i=this.on).call(i,this),off:Z(r=this.off).call(r,this),emit:Z(o=this.emit).call(o,this),once:Z(a=this.once).call(a,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}}},this.bindEventListeners(),this.images=new jh(function(){return s.body.emitter.emit("_requestRedraw")}),this.groups=new Nh,this.canvas=new CD(this.body),this.selectionHandler=new WD(this.body,this.canvas),this.interactionHandler=new UD(this.body,this.canvas,this.selectionHandler),this.view=new zD(this.body,this.canvas),this.renderer=new OD(this.body,this.canvas),this.physics=new lD(this.body),this.layoutEngine=new WC(this.body),this.clustering=new xD(this.body),this.manipulation=new VC(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new UO(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new HM(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new uL(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(n),this.setData(e)}it(fL.prototype),fL.prototype.setOptions=function(t){var e=this;if(null===t&&(t=void 0),void 0!==t){if(!0===HO.validate(t,eL)&&console.log("%cErrors have been found in the supplied options object.",RO),Zo(["locale","locales","clickToUse"],this.options,t),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),void 0!==t.groups&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new XC(this,this.body.container,sL,this.canvas.pixelRatio)),this.configurator.setOptions(t.configure)),this.configurator&&!0===this.configurator.options.enabled){var n={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Qo(n.nodes,this.nodesHandler.options),Qo(n.edges,this.edgesHandler.options),Qo(n.layout,this.layoutEngine.options),Qo(n.interaction,this.selectionHandler.options),Qo(n.interaction,this.renderer.options),Qo(n.interaction,this.interactionHandler.options),Qo(n.manipulation,this.manipulation.options),Qo(n.physics,this.physics.options),Qo(n.global,this.canvas.options),Qo(n.global,this.options),this.configurator.setModuleOptions(n)}void 0!==t.clickToUse?!0===t.clickToUse?void 0===this.activator&&(this.activator=new Oh(this.canvas.frame),this.activator.on("change",function(){e.body.emitter.emit("activate")})):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},fL.prototype._updateVisibleIndices=function(){var t=this.body.nodes,e=this.body.edges;for(var n in this.body.nodeIndices=[],this.body.edgeIndices=[],t)t.hasOwnProperty(n)&&(this.clustering._isClusteredNode(n)||!1!==t[n].options.hidden||this.body.nodeIndices.push(t[n].id));for(var i in e)if(e.hasOwnProperty(i)){var r=e[i],o=t[r.fromId],a=t[r.toId],s=void 0!==o&&void 0!==a;!this.clustering._isClusteredEdge(i)&&!1===r.options.hidden&&s&&!1===o.options.hidden&&!1===a.options.hidden&&this.body.edgeIndices.push(r.id)}},fL.prototype.bindEventListeners=function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.edgesHandler._updateState(),t.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){t.clustering._updateState(),t._updateVisibleIndices(),t._updateValueRange(t.body.nodes),t._updateValueRange(t.body.edges),t.body.emitter.emit("startSimulation"),t.body.emitter.emit("_requestRedraw")})},fL.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.log("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var e=iu.DOTToGraph(t.dot);this.setData(e)}else if(t&&t.gephi){console.log("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var n=du(t.gephi);this.setData(n)}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},fL.prototype.destroy=function(){for(var t in this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images,this.body.nodes)this.body.nodes.hasOwnProperty(t)&&delete this.body.nodes[t];for(var e in this.body.edges)this.body.edges.hasOwnProperty(e)&&delete this.body.edges[e];Yo(this.body.container)},fL.prototype._updateValueRange=function(t){var e,n=void 0,i=void 0,r=0;for(e in t)if(t.hasOwnProperty(e)){var o=t[e].getValue();void 0!==o&&(n=void 0===n?o:Math.min(o,n),i=void 0===i?o:Math.max(o,i),r+=o)}if(void 0!==n&&void 0!==i)for(e in t)t.hasOwnProperty(e)&&t[e].setValueRange(n,i,r)},fL.prototype.isActive=function(){return!this.activator||this.activator.active},fL.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},fL.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},fL.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},fL.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},fL.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},fL.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},fL.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},fL.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},fL.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},fL.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},fL.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)},fL.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)},fL.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)},fL.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)},fL.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)},fL.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},fL.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},fL.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},fL.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},fL.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},fL.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},fL.prototype.editNodeMode=function(){return console.log("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},fL.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},fL.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},fL.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},fL.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},fL.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},fL.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},fL.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},fL.prototype.getConnectedNodes=function(t){return void 0!==this.body.nodes[t]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},fL.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},fL.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},fL.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},fL.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},fL.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},fL.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},fL.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler,arguments)},fL.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler,arguments)},fL.prototype.getNodeAt=function(){var t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},fL.prototype.getEdgeAt=function(){var t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},fL.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},fL.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},fL.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.redraw()},fL.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},fL.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},fL.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},fL.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},fL.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},fL.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},fL.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},fL.prototype.getOptionsFromConfigurator=function(){var t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};var pL=n(function(t,c){c.prepareElements=function(t){for(var e in t)t.hasOwnProperty(e)&&(t[e].redundant=t[e].used,t[e].used=[])},c.cleanupElements=function(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e].redundant){for(var n=0;n<t[e].redundant.length;n++)t[e].redundant[n].parentNode.removeChild(t[e].redundant[n]);t[e].redundant=[]}},c.resetElements=function(t){c.prepareElements(t),c.cleanupElements(t),c.prepareElements(t)},c.getSVGElement=function(t,e,n){var i;return e.hasOwnProperty(t)?0<e[t].redundant.length?(i=e[t].redundant[0],e[t].redundant.shift()):(i=document.createElementNS("http://www.w3.org/2000/svg",t),n.appendChild(i)):(i=document.createElementNS("http://www.w3.org/2000/svg",t),e[t]={used:[],redundant:[]},n.appendChild(i)),e[t].used.push(i),i},c.getDOMElement=function(t,e,n,i){var r;return e.hasOwnProperty(t)?0<e[t].redundant.length?(r=e[t].redundant[0],e[t].redundant.shift()):(r=document.createElement(t),void 0!==i?n.insertBefore(r,i):n.appendChild(r)):(r=document.createElement(t),e[t]={used:[],redundant:[]},void 0!==i?n.insertBefore(r,i):n.appendChild(r)),e[t].used.push(r),r},c.drawPoint=function(t,e,n,i,r,o){var a;if("circle"==n.style?((a=c.getSVGElement("circle",i,r)).setAttributeNS(null,"cx",t),a.setAttributeNS(null,"cy",e),a.setAttributeNS(null,"r",.5*n.size)):((a=c.getSVGElement("rect",i,r)).setAttributeNS(null,"x",t-.5*n.size),a.setAttributeNS(null,"y",e-.5*n.size),a.setAttributeNS(null,"width",n.size),a.setAttributeNS(null,"height",n.size)),void 0!==n.styles&&a.setAttributeNS(null,"style",n.styles),a.setAttributeNS(null,"class",n.className+" vis-point"),o){var s=c.getSVGElement("text",i,r);o.xOffset&&(t+=o.xOffset),o.yOffset&&(e+=o.yOffset),o.content&&(s.textContent=o.content),o.className&&s.setAttributeNS(null,"class",o.className+" vis-label"),s.setAttributeNS(null,"x",t),s.setAttributeNS(null,"y",e)}return a},c.drawBar=function(t,e,n,i,r,o,a,s){if(0!=i){i<0&&(e-=i*=-1);var l=c.getSVGElement("rect",o,a);l.setAttributeNS(null,"x",t-.5*n),l.setAttributeNS(null,"y",e),l.setAttributeNS(null,"width",n),l.setAttributeNS(null,"height",i),l.setAttributeNS(null,"class",r),s&&l.setAttributeNS(null,"style",s)}}}),vL=pL.prepareElements,mL=pL.cleanupElements,gL=pL.resetElements,yL=pL.getSVGElement,bL=pL.getDOMElement,wL=pL.drawPoint,_L=pL.drawBar,kL=Object.freeze({__proto__:null,default:pL,__moduleExports:pL,prepareElements:vL,cleanupElements:mL,resetElements:gL,getSVGElement:yL,getDOMElement:bL,drawPoint:wL,drawBar:_L}),xL=n(function(Vn,t){Vn.exports=function(){var t,r;function y(){return t.apply(null,arguments)}function s(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function l(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function c(t){return void 0===t}function u(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function d(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function h(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function b(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function f(t,e){for(var n in e)b(e,n)&&(t[n]=e[n]);return b(e,"toString")&&(t.toString=e.toString),b(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e,n,i){return Ee(t,e,n,i,!0).utc()}function w(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function v(t){if(null==t._isValid){var e=w(t),n=r.call(e.parsedDateParts,function(t){return null!=t}),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function m(t){var e=p(NaN);return null!=t?f(w(e),t):w(e).userInvalidated=!0,e}r=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};var o=y.momentProperties=[];function g(t,e){var n,i,r;if(c(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),c(e._i)||(t._i=e._i),c(e._f)||(t._f=e._f),c(e._l)||(t._l=e._l),c(e._strict)||(t._strict=e._strict),c(e._tzm)||(t._tzm=e._tzm),c(e._isUTC)||(t._isUTC=e._isUTC),c(e._offset)||(t._offset=e._offset),c(e._pf)||(t._pf=w(e)),c(e._locale)||(t._locale=e._locale),0<o.length)for(n=0;n<o.length;n++)c(r=e[i=o[n]])||(t[i]=r);return t}var e=!1;function _(t){g(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===e&&(e=!0,y.updateOffset(this),e=!1)}function k(t){return t instanceof _||null!=t&&null!=t._isAMomentObject}function x(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function S(t){var e=+t,n=0;return 0!=e&&isFinite(e)&&(n=x(e)),n}function a(t,e,n){var i,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(i=0;i<r;i++)(n&&t[i]!==e[i]||!n&&S(t[i])!==S(e[i]))&&a++;return a+o}function E(t){!1===y.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function n(r,o){var a=!0;return f(function(){if(null!=y.deprecationHandler&&y.deprecationHandler(null,r),a){for(var t,e=[],n=0;n<arguments.length;n++){if(t="","object"==typeof arguments[n]){for(var i in t+="\n["+n+"] ",arguments[0])t+=i+": "+arguments[0][i]+", ";t=t.slice(0,-2)}else t=arguments[n];e.push(t)}E(r+"\nArguments: "+Array.prototype.slice.call(e).join("")+"\n"+(new Error).stack),a=!1}return o.apply(this,arguments)},o)}var i,T={};function O(t,e){null!=y.deprecationHandler&&y.deprecationHandler(t,e),T[t]||(E(e),T[t]=!0)}function M(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function D(t,e){var n,i=f({},t);for(n in e)b(e,n)&&(l(t[n])&&l(e[n])?(i[n]={},f(i[n],t[n]),f(i[n],e[n])):null!=e[n]?i[n]=e[n]:delete i[n]);for(n in t)b(t,n)&&!b(e,n)&&l(t[n])&&(i[n]=f({},i[n]));return i}function C(t){null!=t&&this.set(t)}y.suppressDeprecationWarnings=!1,y.deprecationHandler=null,i=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)b(t,e)&&n.push(e);return n};var L={};function A(t,e){var n=t.toLowerCase();L[n]=L[n+"s"]=L[e]=t}function I(t){return"string"==typeof t?L[t]||L[t.toLowerCase()]:void 0}function P(t){var e,n,i={};for(n in t)b(t,n)&&(e=I(n))&&(i[e]=t[n]);return i}var j={};function N(t,e){j[t]=e}function B(t,e,n){var i=""+Math.abs(t),r=e-i.length;return(0<=t?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}var F=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,R=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,H={},z={};function Y(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(z[t]=r),e&&(z[e[0]]=function(){return B(r.apply(this,arguments),e[1],e[2])}),n&&(z[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function q(t,e){return t.isValid()?(e=U(e,t.localeData()),H[e]=H[e]||function(i){var t,r,e,o=i.match(F);for(t=0,r=o.length;t<r;t++)z[o[t]]?o[t]=z[o[t]]:o[t]=(e=o[t]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(t){var e,n="";for(e=0;e<r;e++)n+=M(o[e])?o[e].call(t,i):o[e];return n}}(e),H[e](t)):t.localeData().invalidDate()}function U(t,e){var n=5;function i(t){return e.longDateFormat(t)||t}for(R.lastIndex=0;0<=n&&R.test(t);)t=t.replace(R,i),R.lastIndex=0,n-=1;return t}var W=/\d/,V=/\d\d/,G=/\d{3}/,J=/\d{4}/,X=/[+-]?\d{6}/,Z=/\d\d?/,$=/\d\d\d\d?/,Q=/\d\d\d\d\d\d?/,K=/\d{1,3}/,tt=/\d{1,4}/,et=/[+-]?\d{1,6}/,nt=/\d+/,it=/[+-]?\d+/,rt=/Z|[+-]\d\d:?\d\d/gi,ot=/Z|[+-]\d\d(?::?\d\d)?/gi,at=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,st={};function lt(t,n,i){st[t]=M(n)?n:function(t,e){return t&&i?i:n}}function ct(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ut={};function dt(t,n){var e,i=n;for("string"==typeof t&&(t=[t]),u(n)&&(i=function(t,e){e[n]=S(t)}),e=0;e<t.length;e++)ut[t[e]]=i}function ht(t,r){dt(t,function(t,e,n,i){n._w=n._w||{},r(t,n._w,n,i)})}var ft=0,pt=1,vt=2,mt=3,gt=4,yt=5,bt=6,wt=7,_t=8;function kt(t){return xt(t)?366:365}function xt(t){return t%4==0&&t%100!=0||t%400==0}Y("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),Y(0,["YY",2],0,function(){return this.year()%100}),Y(0,["YYYY",4],0,"year"),Y(0,["YYYYY",5],0,"year"),Y(0,["YYYYYY",6,!0],0,"year"),A("year","y"),N("year",1),lt("Y",it),lt("YY",Z,V),lt("YYYY",tt,J),lt("YYYYY",et,X),lt("YYYYYY",et,X),dt(["YYYYY","YYYYYY"],ft),dt("YYYY",function(t,e){e[ft]=2===t.length?y.parseTwoDigitYear(t):S(t)}),dt("YY",function(t,e){e[ft]=y.parseTwoDigitYear(t)}),dt("Y",function(t,e){e[ft]=parseInt(t,10)}),y.parseTwoDigitYear=function(t){return S(t)+(68<S(t)?1900:2e3)};var St,Et=Tt("FullYear",!0);function Tt(e,n){return function(t){return null!=t?(Mt(this,e,t),y.updateOffset(this,n),this):Ot(this,e)}}function Ot(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Mt(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&xt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Dt(n,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function Dt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=(e%12+12)%12;return t+=(e-n)/12,1==n?xt(t)?29:28:31-n%7%2}St=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},Y("M",["MM",2],"Mo",function(){return this.month()+1}),Y("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),Y("MMMM",0,0,function(t){return this.localeData().months(this,t)}),A("month","M"),N("month",8),lt("M",Z),lt("MM",Z,V),lt("MMM",function(t,e){return e.monthsShortRegex(t)}),lt("MMMM",function(t,e){return e.monthsRegex(t)}),dt(["M","MM"],function(t,e){e[pt]=S(t)-1}),dt(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[pt]=r:w(n).invalidMonth=t});var Ct=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Lt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),At="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function It(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=S(e);else if(!u(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),Dt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function Pt(t){return null!=t?(It(this,t),y.updateOffset(this,!0),this):Ot(this,"Month")}var jt=at,Nt=at;function Bt(){function t(t,e){return e.length-t.length}var e,n,i=[],r=[],o=[];for(e=0;e<12;e++)n=p([2e3,e]),i.push(this.monthsShort(n,"")),r.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(i.sort(t),r.sort(t),o.sort(t),e=0;e<12;e++)i[e]=ct(i[e]),r[e]=ct(r[e]);for(e=0;e<24;e++)o[e]=ct(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function Ft(t){var e;if(t<100&&0<=t){var n=Array.prototype.slice.call(arguments);n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function Rt(t,e,n){var i=7+e-n;return-(7+Ft(t,0,i).getUTCDay()-e)%7+i-1}function Ht(t,e,n,i,r){var o,a,s=1+7*(e-1)+(7+n-i)%7+Rt(t,i,r);return a=s<=0?kt(o=t-1)+s:s>kt(t)?(o=t+1,s-kt(t)):(o=t,s),{year:o,dayOfYear:a}}function zt(t,e,n){var i,r,o=Rt(t.year(),e,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?i=a+Yt(r=t.year()-1,e,n):a>Yt(t.year(),e,n)?(i=a-Yt(t.year(),e,n),r=t.year()+1):(r=t.year(),i=a),{week:i,year:r}}function Yt(t,e,n){var i=Rt(t,e,n),r=Rt(t+1,e,n);return(kt(t)-i+r)/7}function qt(t,e){return t.slice(e,7).concat(t.slice(0,e))}Y("w",["ww",2],"wo","week"),Y("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),N("week",5),N("isoWeek",5),lt("w",Z),lt("ww",Z,V),lt("W",Z),lt("WW",Z,V),ht(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=S(t)}),Y("d",0,"do","day"),Y("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),Y("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),Y("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),Y("e",0,0,"weekday"),Y("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),N("day",11),N("weekday",11),N("isoWeekday",11),lt("d",Z),lt("e",Z),lt("E",Z),lt("dd",function(t,e){return e.weekdaysMinRegex(t)}),lt("ddd",function(t,e){return e.weekdaysShortRegex(t)}),lt("dddd",function(t,e){return e.weekdaysRegex(t)}),ht(["dd","ddd","dddd"],function(t,e,n,i){var r=n._locale.weekdaysParse(t,i,n._strict);null!=r?e.d=r:w(n).invalidWeekday=t}),ht(["d","e","E"],function(t,e,n,i){e[i]=S(t)});var Ut="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Wt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Vt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var Gt=at,Jt=at,Xt=at;function Zt(){function t(t,e){return e.length-t.length}var e,n,i,r,o,a=[],s=[],l=[],c=[];for(e=0;e<7;e++)n=p([2e3,1]).day(e),i=this.weekdaysMin(n,""),r=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(i),s.push(r),l.push(o),c.push(i),c.push(r),c.push(o);for(a.sort(t),s.sort(t),l.sort(t),c.sort(t),e=0;e<7;e++)s[e]=ct(s[e]),l[e]=ct(l[e]),c[e]=ct(c[e]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function $t(){return this.hours()%12||12}function Qt(t,e){Y(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Kt(t,e){return e._meridiemParse}Y("H",["HH",2],0,"hour"),Y("h",["hh",2],0,$t),Y("k",["kk",2],0,function(){return this.hours()||24}),Y("hmm",0,0,function(){return""+$t.apply(this)+B(this.minutes(),2)}),Y("hmmss",0,0,function(){return""+$t.apply(this)+B(this.minutes(),2)+B(this.seconds(),2)}),Y("Hmm",0,0,function(){return""+this.hours()+B(this.minutes(),2)}),Y("Hmmss",0,0,function(){return""+this.hours()+B(this.minutes(),2)+B(this.seconds(),2)}),Qt("a",!0),Qt("A",!1),A("hour","h"),N("hour",13),lt("a",Kt),lt("A",Kt),lt("H",Z),lt("h",Z),lt("k",Z),lt("HH",Z,V),lt("hh",Z,V),lt("kk",Z,V),lt("hmm",$),lt("hmmss",Q),lt("Hmm",$),lt("Hmmss",Q),dt(["H","HH"],mt),dt(["k","kk"],function(t,e,n){var i=S(t);e[mt]=24===i?0:i}),dt(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),dt(["h","hh"],function(t,e,n){e[mt]=S(t),w(n).bigHour=!0}),dt("hmm",function(t,e,n){var i=t.length-2;e[mt]=S(t.substr(0,i)),e[gt]=S(t.substr(i)),w(n).bigHour=!0}),dt("hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[mt]=S(t.substr(0,i)),e[gt]=S(t.substr(i,2)),e[yt]=S(t.substr(r)),w(n).bigHour=!0}),dt("Hmm",function(t,e,n){var i=t.length-2;e[mt]=S(t.substr(0,i)),e[gt]=S(t.substr(i))}),dt("Hmmss",function(t,e,n){var i=t.length-4,r=t.length-2;e[mt]=S(t.substr(0,i)),e[gt]=S(t.substr(i,2)),e[yt]=S(t.substr(r))});var te,ee=Tt("Hours",!0),ne={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Lt,monthsShort:At,week:{dow:0,doy:6},weekdays:Ut,weekdaysMin:Vt,weekdaysShort:Wt,meridiemParse:/[ap]\.?m?\.?/i},ie={},re={};function oe(t){return t?t.toLowerCase().replace("_","-"):t}function ae(t){var e=null;if(!ie[t]&&Vn&&Vn.exports)try{e=te._abbr,function(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}(),se(e)}catch(t){}return ie[t]}function se(t,e){var n;return t&&((n=c(e)?ce(t):le(t,e))?te=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),te._abbr}function le(t,e){if(null===e)return delete ie[t],null;var n,i=ne;if(e.abbr=t,null!=ie[t])O("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=ie[t]._config;else if(null!=e.parentLocale)if(null!=ie[e.parentLocale])i=ie[e.parentLocale]._config;else{if(null==(n=ae(e.parentLocale)))return re[e.parentLocale]||(re[e.parentLocale]=[]),re[e.parentLocale].push({name:t,config:e}),null;i=n._config}return ie[t]=new C(D(i,e)),re[t]&&re[t].forEach(function(t){le(t.name,t.config)}),se(t),ie[t]}function ce(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return te;if(!s(t)){if(e=ae(t))return e;t=[t]}return function(t){for(var e,n,i,r,o=0;o<t.length;){for(e=(r=oe(t[o]).split("-")).length,n=(n=oe(t[o+1]))?n.split("-"):null;0<e;){if(i=ae(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&a(r,n,!0)>=e-1)break;e--}o++}return te}(t)}function ue(t){var e,n=t._a;return n&&-2===w(t).overflow&&(e=n[pt]<0||11<n[pt]?pt:n[vt]<1||n[vt]>Dt(n[ft],n[pt])?vt:n[mt]<0||24<n[mt]||24===n[mt]&&(0!==n[gt]||0!==n[yt]||0!==n[bt])?mt:n[gt]<0||59<n[gt]?gt:n[yt]<0||59<n[yt]?yt:n[bt]<0||999<n[bt]?bt:-1,w(t)._overflowDayOfYear&&(e<ft||vt<e)&&(e=vt),w(t)._overflowWeeks&&-1===e&&(e=wt),w(t)._overflowWeekday&&-1===e&&(e=_t),w(t).overflow=e),t}function de(t,e,n){return null!=t?t:null!=e?e:n}function he(t){var e,n,i,r,o,a,s,l=[];if(!t._d){for(a=t,s=void 0,s=new Date(y.now()),i=a._useUTC?[s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()]:[s.getFullYear(),s.getMonth(),s.getDate()],t._w&&null==t._a[vt]&&null==t._a[pt]&&function(t){var e,n,i,r,o,a,s,l;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)o=1,a=4,n=de(e.GG,t._a[ft],zt(Te(),1,4).year),i=de(e.W,1),((r=de(e.E,1))<1||7<r)&&(l=!0);else{o=t._locale._week.dow,a=t._locale._week.doy;var c=zt(Te(),o,a);n=de(e.gg,t._a[ft],c.year),i=de(e.w,c.week),null!=e.d?((r=e.d)<0||6<r)&&(l=!0):null!=e.e?(r=e.e+o,(e.e<0||6<e.e)&&(l=!0)):r=o}i<1||i>Yt(n,o,a)?w(t)._overflowWeeks=!0:null!=l?w(t)._overflowWeekday=!0:(s=Ht(n,i,r,o,a),t._a[ft]=s.year,t._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(o=de(t._a[ft],i[ft]),(t._dayOfYear>kt(o)||0===t._dayOfYear)&&(w(t)._overflowDayOfYear=!0),n=Ft(o,0,t._dayOfYear),t._a[pt]=n.getUTCMonth(),t._a[vt]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=l[e]=i[e];for(;e<7;e++)t._a[e]=l[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[mt]&&0===t._a[gt]&&0===t._a[yt]&&0===t._a[bt]&&(t._nextDay=!0,t._a[mt]=0),t._d=(t._useUTC?Ft:function(t,e,n,i,r,o,a){var s;return t<100&&0<=t?(s=new Date(t+400,e,n,i,r,o,a),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,i,r,o,a),s}).apply(null,l),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[mt]=24),t._w&&void 0!==t._w.d&&t._w.d!==r&&(w(t).weekdayMismatch=!0)}}var fe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ve=/Z|[+-]\d\d(?::?\d\d)?/,me=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],ge=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ye=/^\/?Date\((\-?\d+)/i;function be(t){var e,n,i,r,o,a,s=t._i,l=fe.exec(s)||pe.exec(s);if(l){for(w(t).iso=!0,e=0,n=me.length;e<n;e++)if(me[e][1].exec(l[1])){r=me[e][0],i=!1!==me[e][2];break}if(null==r)return void(t._isValid=!1);if(l[3]){for(e=0,n=ge.length;e<n;e++)if(ge[e][1].exec(l[3])){o=(l[2]||" ")+ge[e][0];break}if(null==o)return void(t._isValid=!1)}if(!i&&null!=o)return void(t._isValid=!1);if(l[4]){if(!ve.exec(l[4]))return void(t._isValid=!1);a="Z"}t._f=r+(o||"")+(a||""),xe(t)}else t._isValid=!1}var we=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;var _e={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ke(t){var e,n,i,r,o,a,s,l,c,u,d=we.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(d){var h=(e=d[4],n=d[3],i=d[2],r=d[5],o=d[6],a=d[7],s=[function(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}(e),At.indexOf(n),parseInt(i,10),parseInt(r,10),parseInt(o,10)],a&&s.push(parseInt(a,10)),s);if(l=d[1],c=h,u=t,l&&Wt.indexOf(l)!==new Date(c[0],c[1],c[2]).getDay()&&(w(u).weekdayMismatch=!0,u._isValid=!1,1))return;t._a=h,t._tzm=function(t,e,n){if(t)return _e[t];if(e)return 0;var i=parseInt(n,10),r=i%100;return(i-r)/100*60+r}(d[8],d[9],d[10]),t._d=Ft.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),w(t).rfc2822=!0}else t._isValid=!1}function xe(t){if(t._f!==y.ISO_8601)if(t._f!==y.RFC_2822){t._a=[],w(t).empty=!0;var e,n,i,r,o,a=""+t._i,s=a.length,l=0;for(i=U(t._f,t._locale).match(F)||[],e=0;e<i.length;e++)r=i[e],(n=(a.match((g=t,b(st,m=r)?st[m](g._strict,g._locale):new RegExp(ct(m.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r})))))||[])[0])&&(0<(o=a.substr(0,a.indexOf(n))).length&&w(t).unusedInput.push(o),a=a.slice(a.indexOf(n)+n.length),l+=n.length),z[r]?(n?w(t).empty=!1:w(t).unusedTokens.push(r),f=r,v=t,null!=(p=n)&&b(ut,f)&&ut[f](p,v._a,v,f)):t._strict&&!n&&w(t).unusedTokens.push(r);w(t).charsLeftOver=s-l,0<a.length&&w(t).unusedInput.push(a),t._a[mt]<=12&&!0===w(t).bigHour&&0<t._a[mt]&&(w(t).bigHour=void 0),w(t).parsedDateParts=t._a.slice(0),w(t).meridiem=t._meridiem,t._a[mt]=(c=t._locale,u=t._a[mt],null==(d=t._meridiem)?u:null!=c.meridiemHour?c.meridiemHour(u,d):(null!=c.isPM&&((h=c.isPM(d))&&u<12&&(u+=12),h||12!==u||(u=0)),u)),he(t),ue(t)}else ke(t);else be(t);var c,u,d,h,f,p,v,m,g}function Se(t){var e,n,i,r,o=t._i,a=t._f;return t._locale=t._locale||ce(t._l),null===o||void 0===a&&""===o?m({nullInput:!0}):("string"==typeof o&&(t._i=o=t._locale.preparse(o)),k(o)?new _(ue(o)):(d(o)?t._d=o:s(a)?function(t){var e,n,i,r,o;if(0===t._f.length)return w(t).invalidFormat=!0,t._d=new Date(NaN);for(r=0;r<t._f.length;r++)o=0,e=g({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],xe(e),v(e)&&(o+=w(e).charsLeftOver,o+=10*w(e).unusedTokens.length,w(e).score=o,(null==i||o<i)&&(i=o,n=e));f(t,n||e)}(t):a?xe(t):c(r=(e=t)._i)?e._d=new Date(y.now()):d(r)?e._d=new Date(r.valueOf()):"string"==typeof r?(n=e,null===(i=ye.exec(n._i))?(be(n),!1===n._isValid&&(delete n._isValid,ke(n),!1===n._isValid&&(delete n._isValid,y.createFromInputFallback(n)))):n._d=new Date(+i[1])):s(r)?(e._a=h(r.slice(0),function(t){return parseInt(t,10)}),he(e)):l(r)?function(t){if(!t._d){var e=P(t._i);t._a=h([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),he(t)}}(e):u(r)?e._d=new Date(r):y.createFromInputFallback(e),v(t)||(t._d=null),t))}function Ee(t,e,n,i,r){var o,a={};return!0!==n&&!1!==n||(i=n,n=void 0),(l(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||s(t)&&0===t.length)&&(t=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=r,a._l=n,a._i=t,a._f=e,a._strict=i,(o=new _(ue(Se(a))))._nextDay&&(o.add(1,"d"),o._nextDay=void 0),o}function Te(t,e,n,i){return Ee(t,e,n,i,!1)}y.createFromInputFallback=n("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),y.ISO_8601=function(){},y.RFC_2822=function(){};var Oe=n("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Te.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:m()}),Me=n("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Te.apply(null,arguments);return this.isValid()&&t.isValid()?this<t?this:t:m()});function De(t,e){var n,i;if(1===e.length&&s(e[0])&&(e=e[0]),!e.length)return Te();for(n=e[0],i=1;i<e.length;++i)e[i].isValid()&&!e[i][t](n)||(n=e[i]);return n}var Ce=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Le(t){var e=P(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||e.isoWeek||0,a=e.day||0,s=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===St.call(Ce,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var n=!1,i=0;i<Ce.length;++i)if(t[Ce[i]]){if(n)return!1;parseFloat(t[Ce[i]])!==S(t[Ce[i]])&&(n=!0)}return!0}(e),this._milliseconds=+u+1e3*c+6e4*l+1e3*s*60*60,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._locale=ce(),this._bubble()}function Ae(t){return t instanceof Le}function Ie(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Pe(t,n){Y(t,0,0,function(){var t=this.utcOffset(),e="+";return t<0&&(t=-t,e="-"),e+B(~~(t/60),2)+n+B(~~t%60,2)})}Pe("Z",":"),Pe("ZZ",""),lt("Z",ot),lt("ZZ",ot),dt(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ne(ot,t)});var je=/([\+\-]|\d\d)/gi;function Ne(t,e){var n=(e||"").match(t);if(null===n)return null;var i=((n[n.length-1]||[])+"").match(je)||["-",0,0],r=60*i[1]+S(i[2]);return 0===r?0:"+"===i[0]?r:-r}function Be(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(k(t)||d(t)?t.valueOf():Te(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),y.updateOffset(n,!1),n):Te(t).local()}function Fe(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Re(){return!!this.isValid()&&this._isUTC&&0===this._offset}y.updateOffset=function(){};var He=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,ze=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ye(t,e){var n,i,r,o,a,s,l=t,c=null;return Ae(t)?l={ms:t._milliseconds,d:t._days,M:t._months}:u(t)?(l={},e?l[e]=t:l.milliseconds=t):(c=He.exec(t))?(n="-"===c[1]?-1:1,l={y:0,d:S(c[vt])*n,h:S(c[mt])*n,m:S(c[gt])*n,s:S(c[yt])*n,ms:S(Ie(1e3*c[bt]))*n}):(c=ze.exec(t))?(n="-"===c[1]?-1:1,l={y:qe(c[2],n),M:qe(c[3],n),w:qe(c[4],n),d:qe(c[5],n),h:qe(c[6],n),m:qe(c[7],n),s:qe(c[8],n)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(o=Te(l.from),a=Te(l.to),r=o.isValid()&&a.isValid()?(a=Be(a,o),o.isBefore(a)?s=Ue(o,a):((s=Ue(a,o)).milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0},(l={}).ms=r.milliseconds,l.M=r.months),i=new Le(l),Ae(t)&&b(t,"_locale")&&(i._locale=t._locale),i}function qe(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ue(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=e-t.clone().add(n.months,"M"),n}function We(i,r){return function(t,e){var n;return null===e||isNaN(+e)||(O(r,"moment()."+r+"(period, number) is deprecated. Please use moment()."+r+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),n=t,t=e,e=n),Ve(this,Ye(t="string"==typeof t?+t:t,e),i),this}}function Ve(t,e,n,i){var r=e._milliseconds,o=Ie(e._days),a=Ie(e._months);t.isValid()&&(i=null==i||i,a&&It(t,Ot(t,"Month")+a*n),o&&Mt(t,"Date",Ot(t,"Date")+o*n),r&&t._d.setTime(t._d.valueOf()+r*n),i&&y.updateOffset(t,o||a))}Ye.fn=Le.prototype,Ye.invalid=function(){return Ye(NaN)};var Ge=We(1,"add"),Je=We(-1,"subtract");function Xe(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),i=t.clone().add(n,"months");return-(n+(e-i<0?(e-i)/(i-t.clone().add(n-1,"months")):(e-i)/(t.clone().add(1+n,"months")-i)))||0}function Ze(t){var e;return void 0===t?this._locale._abbr:(null!=(e=ce(t))&&(this._locale=e),this)}y.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",y.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var $e=n("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});function Qe(){return this._locale}function Ke(t,e){return(t%e+e)%e}function tn(t,e,n){return t<100&&0<=t?new Date(t+400,e,n)-126227808e5:new Date(t,e,n).valueOf()}function en(t,e,n){return t<100&&0<=t?Date.UTC(t+400,e,n)-126227808e5:Date.UTC(t,e,n)}function nn(t,e){Y(0,[t,t.length],0,e)}function rn(t,e,n,i,r){var o;return null==t?zt(this,i,r).year:(e>(o=Yt(t,i,r))&&(e=o),function(t,e,n,i,r){var o=Ht(t,e,n,i,r),a=Ft(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}.call(this,t,e,n,i,r))}Y(0,["gg",2],0,function(){return this.weekYear()%100}),Y(0,["GG",2],0,function(){return this.isoWeekYear()%100}),nn("gggg","weekYear"),nn("ggggg","weekYear"),nn("GGGG","isoWeekYear"),nn("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),N("weekYear",1),N("isoWeekYear",1),lt("G",it),lt("g",it),lt("GG",Z,V),lt("gg",Z,V),lt("GGGG",tt,J),lt("gggg",tt,J),lt("GGGGG",et,X),lt("ggggg",et,X),ht(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=S(t)}),ht(["gg","GG"],function(t,e,n,i){e[i]=y.parseTwoDigitYear(t)}),Y("Q",0,"Qo","quarter"),A("quarter","Q"),N("quarter",7),lt("Q",W),dt("Q",function(t,e){e[pt]=3*(S(t)-1)}),Y("D",["DD",2],"Do","date"),A("date","D"),N("date",9),lt("D",Z),lt("DD",Z,V),lt("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),dt(["D","DD"],vt),dt("Do",function(t,e){e[vt]=S(t.match(Z)[0])});var on=Tt("Date",!0);Y("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),N("dayOfYear",4),lt("DDD",K),lt("DDDD",G),dt(["DDD","DDDD"],function(t,e,n){n._dayOfYear=S(t)}),Y("m",["mm",2],0,"minute"),A("minute","m"),N("minute",14),lt("m",Z),lt("mm",Z,V),dt(["m","mm"],gt);var an=Tt("Minutes",!1);Y("s",["ss",2],0,"second"),A("second","s"),N("second",15),lt("s",Z),lt("ss",Z,V),dt(["s","ss"],yt);var sn,ln=Tt("Seconds",!1);for(Y("S",0,0,function(){return~~(this.millisecond()/100)}),Y(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Y(0,["SSS",3],0,"millisecond"),Y(0,["SSSS",4],0,function(){return 10*this.millisecond()}),Y(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),Y(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),Y(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),Y(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),Y(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),N("millisecond",16),lt("S",K,W),lt("SS",K,V),lt("SSS",K,G),sn="SSSS";sn.length<=9;sn+="S")lt(sn,nt);function cn(t,e){e[bt]=S(1e3*("0."+t))}for(sn="S";sn.length<=9;sn+="S")dt(sn,cn);var un=Tt("Milliseconds",!1);Y("z",0,0,"zoneAbbr"),Y("zz",0,0,"zoneName");var dn=_.prototype;function hn(t){return t}dn.add=Ge,dn.calendar=function(t,e){var n=t||Te(),i=Be(n,this).startOf("day"),r=y.calendarFormat(this,i)||"sameElse",o=e&&(M(e[r])?e[r].call(this,n):e[r]);return this.format(o||this.localeData().calendar(r,this,Te(n)))},dn.clone=function(){return new _(this)},dn.diff=function(t,e,n){var i,r,o;if(!this.isValid())return NaN;if(!(i=Be(t,this)).isValid())return NaN;switch(r=6e4*(i.utcOffset()-this.utcOffset()),e=I(e)){case"year":o=Xe(this,i)/12;break;case"month":o=Xe(this,i);break;case"quarter":o=Xe(this,i)/3;break;case"second":o=(this-i)/1e3;break;case"minute":o=(this-i)/6e4;break;case"hour":o=(this-i)/36e5;break;case"day":o=(this-i-r)/864e5;break;case"week":o=(this-i-r)/6048e5;break;default:o=this-i}return n?o:x(o)},dn.endOf=function(t){var e;if(void 0===(t=I(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?en:tn;switch(t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=36e5-Ke(e+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":e=this._d.valueOf(),e+=6e4-Ke(e,6e4)-1;break;case"second":e=this._d.valueOf(),e+=1e3-Ke(e,1e3)-1}return this._d.setTime(e),y.updateOffset(this,!0),this},dn.format=function(t){t=t||(this.isUtc()?y.defaultFormatUtc:y.defaultFormat);var e=q(this,t);return this.localeData().postformat(e)},dn.from=function(t,e){return this.isValid()&&(k(t)&&t.isValid()||Te(t).isValid())?Ye({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},dn.fromNow=function(t){return this.from(Te(),t)},dn.to=function(t,e){return this.isValid()&&(k(t)&&t.isValid()||Te(t).isValid())?Ye({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},dn.toNow=function(t){return this.to(Te(),t)},dn.get=function(t){return M(this[t=I(t)])?this[t]():this},dn.invalidAt=function(){return w(this).overflow},dn.isAfter=function(t,e){var n=k(t)?t:Te(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=I(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},dn.isBefore=function(t,e){var n=k(t)?t:Te(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=I(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},dn.isBetween=function(t,e,n,i){var r=k(t)?t:Te(t),o=k(e)?e:Te(e);return!!(this.isValid()&&r.isValid()&&o.isValid())&&("("===(i=i||"()")[0]?this.isAfter(r,n):!this.isBefore(r,n))&&(")"===i[1]?this.isBefore(o,n):!this.isAfter(o,n))},dn.isSame=function(t,e){var n,i=k(t)?t:Te(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=I(e)||"millisecond")?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},dn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},dn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},dn.isValid=function(){return v(this)},dn.lang=$e,dn.locale=Ze,dn.localeData=Qe,dn.max=Me,dn.min=Oe,dn.parsingFlags=function(){return f({},w(this))},dn.set=function(t,e){if("object"==typeof t)for(var n=function(t){var e=[];for(var n in t)e.push({unit:n,priority:j[n]});return e.sort(function(t,e){return t.priority-e.priority}),e}(t=P(t)),i=0;i<n.length;i++)this[n[i].unit](t[n[i].unit]);else if(M(this[t=I(t)]))return this[t](e);return this},dn.startOf=function(t){var e;if(void 0===(t=I(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?en:tn;switch(t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Ke(e+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":e=this._d.valueOf(),e-=Ke(e,6e4);break;case"second":e=this._d.valueOf(),e-=Ke(e,1e3)}return this._d.setTime(e),y.updateOffset(this,!0),this},dn.subtract=Je,dn.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},dn.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},dn.toDate=function(){return new Date(this.valueOf())},dn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||9999<n.year()?q(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):M(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",q(n,"Z")):q(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},dn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r=e+'[")]';return this.format(n+i+"-MM-DD[T]HH:mm:ss.SSS"+r)},dn.toJSON=function(){return this.isValid()?this.toISOString():null},dn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},dn.unix=function(){return Math.floor(this.valueOf()/1e3)},dn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},dn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},dn.year=Et,dn.isLeapYear=function(){return xt(this.year())},dn.weekYear=function(t){return rn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},dn.isoWeekYear=function(t){return rn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},dn.quarter=dn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},dn.month=Pt,dn.daysInMonth=function(){return Dt(this.year(),this.month())},dn.week=dn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},dn.isoWeek=dn.isoWeeks=function(t){var e=zt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},dn.weeksInYear=function(){var t=this.localeData()._week;return Yt(this.year(),t.dow,t.doy)},dn.isoWeeksInYear=function(){return Yt(this.year(),1,4)},dn.date=on,dn.day=dn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e,n,i=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(e=t,n=this.localeData(),t="string"!=typeof e?e:isNaN(e)?"number"==typeof(e=n.weekdaysParse(e))?e:null:parseInt(e,10),this.add(t-i,"d")):i},dn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},dn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null==t)return this.day()||7;var e,n,i=(e=t,n=this.localeData(),"string"==typeof e?n.weekdaysParse(e)%7||7:isNaN(e)?null:e);return this.day(this.day()%7?i:i-7)},dn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},dn.hour=dn.hours=ee,dn.minute=dn.minutes=an,dn.second=dn.seconds=ln,dn.millisecond=dn.milliseconds=un,dn.utcOffset=function(t,e,n){var i,r=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null==t)return this._isUTC?r:Fe(this);if("string"==typeof t){if(null===(t=Ne(ot,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=Fe(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==t&&(!e||this._changeInProgress?Ve(this,Ye(t-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,y.updateOffset(this,!0),this._changeInProgress=null)),this},dn.utc=function(t){return this.utcOffset(0,t)},dn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Fe(this),"m")),this},dn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Ne(rt,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},dn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Te(t).utcOffset():0,(this.utcOffset()-t)%60==0)},dn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},dn.isLocal=function(){return!!this.isValid()&&!this._isUTC},dn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},dn.isUtc=Re,dn.isUTC=Re,dn.zoneAbbr=function(){return this._isUTC?"UTC":""},dn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},dn.dates=n("dates accessor is deprecated. Use date instead.",on),dn.months=n("months accessor is deprecated. Use month instead",Pt),dn.years=n("years accessor is deprecated. Use year instead",Et),dn.zone=n("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),dn.isDSTShifted=n("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!c(this._isDSTShifted))return this._isDSTShifted;var t={};if(g(t,this),(t=Se(t))._a){var e=t._isUTC?p(t._a):Te(t._a);this._isDSTShifted=this.isValid()&&0<a(t._a,e.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var fn=C.prototype;function pn(t,e,n,i){var r=ce(),o=p().set(i,e);return r[n](o,t)}function vn(t,e,n){if(u(t)&&(e=t,t=void 0),t=t||"",null!=e)return pn(t,e,n,"month");var i,r=[];for(i=0;i<12;i++)r[i]=pn(t,i,n,"month");return r}function mn(t,e,n,i){e=("boolean"==typeof t||(n=e=t,t=!1),u(e)&&(n=e,e=void 0),e||"");var r,o=ce(),a=t?o._week.dow:0;if(null!=n)return pn(e,(n+a)%7,i,"day");var s=[];for(r=0;r<7;r++)s[r]=pn(e,(r+a)%7,i,"day");return s}fn.calendar=function(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return M(i)?i.call(e,n):i},fn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])},fn.invalidDate=function(){return this._invalidDate},fn.ordinal=function(t){return this._ordinal.replace("%d",t)},fn.preparse=hn,fn.postformat=hn,fn.relativeTime=function(t,e,n,i){var r=this._relativeTime[n];return M(r)?r(t,e,n,i):r.replace(/%d/i,t)},fn.pastFuture=function(t,e){var n=this._relativeTime[0<t?"future":"past"];return M(n)?n(e):n.replace(/%s/i,e)},fn.set=function(t){var e,n;for(n in t)M(e=t[n])?this[n]=e:this["_"+n]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},fn.months=function(t,e){return t?s(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||Ct).test(e)?"format":"standalone"][t.month()]:s(this._months)?this._months:this._months.standalone},fn.monthsShort=function(t,e){return t?s(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[Ct.test(e)?"format":"standalone"][t.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},fn.monthsParse=function(t,e,n){var i,r,o;if(this._monthsParseExact)return function(t,e,n){var i,r,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)o=p([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(r=St.call(this._shortMonthsParse,a))?r:null:-1!==(r=St.call(this._longMonthsParse,a))?r:null:"MMM"===e?-1!==(r=St.call(this._shortMonthsParse,a))?r:-1!==(r=St.call(this._longMonthsParse,a))?r:null:-1!==(r=St.call(this._longMonthsParse,a))?r:-1!==(r=St.call(this._shortMonthsParse,a))?r:null}.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(r=p([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}},fn.monthsRegex=function(t){return this._monthsParseExact?(b(this,"_monthsRegex")||Bt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(b(this,"_monthsRegex")||(this._monthsRegex=Nt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},fn.monthsShortRegex=function(t){return this._monthsParseExact?(b(this,"_monthsRegex")||Bt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(b(this,"_monthsShortRegex")||(this._monthsShortRegex=jt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},fn.week=function(t){return zt(t,this._week.dow,this._week.doy).week},fn.firstDayOfYear=function(){return this._week.doy},fn.firstDayOfWeek=function(){return this._week.dow},fn.weekdays=function(t,e){var n=s(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?qt(n,this._week.dow):t?n[t.day()]:n},fn.weekdaysMin=function(t){return!0===t?qt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},fn.weekdaysShort=function(t){return!0===t?qt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},fn.weekdaysParse=function(t,e,n){var i,r,o;if(this._weekdaysParseExact)return function(t,e,n){var i,r,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)o=p([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(r=St.call(this._weekdaysParse,a))?r:null:"ddd"===e?-1!==(r=St.call(this._shortWeekdaysParse,a))?r:null:-1!==(r=St.call(this._minWeekdaysParse,a))?r:null:"dddd"===e?-1!==(r=St.call(this._weekdaysParse,a))?r:-1!==(r=St.call(this._shortWeekdaysParse,a))?r:-1!==(r=St.call(this._minWeekdaysParse,a))?r:null:"ddd"===e?-1!==(r=St.call(this._shortWeekdaysParse,a))?r:-1!==(r=St.call(this._weekdaysParse,a))?r:-1!==(r=St.call(this._minWeekdaysParse,a))?r:null:-1!==(r=St.call(this._minWeekdaysParse,a))?r:-1!==(r=St.call(this._weekdaysParse,a))?r:-1!==(r=St.call(this._shortWeekdaysParse,a))?r:null}.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(r=p([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[i]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[i].test(t))return i;if(n&&"ddd"===e&&this._shortWeekdaysParse[i].test(t))return i;if(n&&"dd"===e&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}},fn.weekdaysRegex=function(t){return this._weekdaysParseExact?(b(this,"_weekdaysRegex")||Zt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(b(this,"_weekdaysRegex")||(this._weekdaysRegex=Gt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},fn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(b(this,"_weekdaysRegex")||Zt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(b(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Jt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},fn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(b(this,"_weekdaysRegex")||Zt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(b(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Xt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},fn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},fn.meridiem=function(t,e,n){return 11<t?n?"pm":"PM":n?"am":"AM"},se("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===S(t%100/10)?"th":1==e?"st":2==e?"nd":3==e?"rd":"th")}}),y.lang=n("moment.lang is deprecated. Use moment.locale instead.",se),y.langData=n("moment.langData is deprecated. Use moment.localeData instead.",ce);var gn=Math.abs;function yn(t,e,n,i){var r=Ye(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function bn(t){return t<0?Math.floor(t):Math.ceil(t)}function wn(t){return 4800*t/146097}function _n(t){return 146097*t/4800}function kn(t){return function(){return this.as(t)}}var xn=kn("ms"),Sn=kn("s"),En=kn("m"),Tn=kn("h"),On=kn("d"),Mn=kn("w"),Dn=kn("M"),Cn=kn("Q"),Ln=kn("y");function An(t){return function(){return this.isValid()?this._data[t]:NaN}}var In=An("milliseconds"),Pn=An("seconds"),jn=An("minutes"),Nn=An("hours"),Bn=An("days"),Fn=An("months"),Rn=An("years"),Hn=Math.round,zn={ss:44,s:45,m:45,h:22,d:26,M:11};var Yn=Math.abs;function qn(t){return(0<t)-(t<0)||+t}function Un(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n=Yn(this._milliseconds)/1e3,i=Yn(this._days),r=Yn(this._months);t=x(n/60),e=x(t/60),n%=60,t%=60;var o=x(r/12),a=r%=12,s=i,l=e,c=t,u=n?n.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var h=d<0?"-":"",f=qn(this._months)!==qn(d)?"-":"",p=qn(this._days)!==qn(d)?"-":"",v=qn(this._milliseconds)!==qn(d)?"-":"";return h+"P"+(o?f+o+"Y":"")+(a?f+a+"M":"")+(s?p+s+"D":"")+(l||c||u?"T":"")+(l?v+l+"H":"")+(c?v+c+"M":"")+(u?v+u+"S":"")}var Wn=Le.prototype;return Wn.isValid=function(){return this._isValid},Wn.abs=function(){var t=this._data;return this._milliseconds=gn(this._milliseconds),this._days=gn(this._days),this._months=gn(this._months),t.milliseconds=gn(t.milliseconds),t.seconds=gn(t.seconds),t.minutes=gn(t.minutes),t.hours=gn(t.hours),t.months=gn(t.months),t.years=gn(t.years),this},Wn.add=function(t,e){return yn(this,t,e,1)},Wn.subtract=function(t,e){return yn(this,t,e,-1)},Wn.as=function(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if("month"===(t=I(t))||"quarter"===t||"year"===t)switch(e=this._days+i/864e5,n=this._months+wn(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(_n(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}},Wn.asMilliseconds=xn,Wn.asSeconds=Sn,Wn.asMinutes=En,Wn.asHours=Tn,Wn.asDays=On,Wn.asWeeks=Mn,Wn.asMonths=Dn,Wn.asQuarters=Cn,Wn.asYears=Ln,Wn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*S(this._months/12):NaN},Wn._bubble=function(){var t,e,n,i,r,o=this._milliseconds,a=this._days,s=this._months,l=this._data;return 0<=o&&0<=a&&0<=s||o<=0&&a<=0&&s<=0||(o+=864e5*bn(_n(s)+a),s=a=0),l.milliseconds=o%1e3,t=x(o/1e3),l.seconds=t%60,e=x(t/60),l.minutes=e%60,n=x(e/60),l.hours=n%24,a+=x(n/24),s+=r=x(wn(a)),a-=bn(_n(r)),i=x(s/12),s%=12,l.days=a,l.months=s,l.years=i,this},Wn.clone=function(){return Ye(this)},Wn.get=function(t){return t=I(t),this.isValid()?this[t+"s"]():NaN},Wn.milliseconds=In,Wn.seconds=Pn,Wn.minutes=jn,Wn.hours=Nn,Wn.days=Bn,Wn.weeks=function(){return x(this.days()/7)},Wn.months=Fn,Wn.years=Rn,Wn.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e,n,i,r,o,a,s,l,c,u,d,h=this.localeData(),f=(n=!t,i=h,r=Ye(e=this).abs(),o=Hn(r.as("s")),a=Hn(r.as("m")),s=Hn(r.as("h")),l=Hn(r.as("d")),c=Hn(r.as("M")),u=Hn(r.as("y")),(d=o<=zn.ss&&["s",o]||o<zn.s&&["ss",o]||a<=1&&["m"]||a<zn.m&&["mm",a]||s<=1&&["h"]||s<zn.h&&["hh",s]||l<=1&&["d"]||l<zn.d&&["dd",l]||c<=1&&["M"]||c<zn.M&&["MM",c]||u<=1&&["y"]||["yy",u])[2]=n,d[3]=0<+e,d[4]=i,function(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}.apply(null,d));return t&&(f=h.pastFuture(+this,f)),h.postformat(f)},Wn.toISOString=Un,Wn.toString=Un,Wn.toJSON=Un,Wn.locale=Ze,Wn.localeData=Qe,Wn.toIsoString=n("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Un),Wn.lang=$e,Y("X",0,0,"unix"),Y("x",0,0,"valueOf"),lt("x",it),lt("X",/[+-]?\d+(\.\d{1,3})?/),dt("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),dt("x",function(t,e,n){n._d=new Date(S(t))}),y.version="2.24.0",t=Te,y.fn=dn,y.min=function(){return De("isBefore",[].slice.call(arguments,0))},y.max=function(){return De("isAfter",[].slice.call(arguments,0))},y.now=function(){return Date.now?Date.now():+new Date},y.utc=p,y.unix=function(t){return Te(1e3*t)},y.months=function(t,e){return vn(t,e,"months")},y.isDate=d,y.locale=se,y.invalid=m,y.duration=Ye,y.isMoment=k,y.weekdays=function(t,e,n){return mn(t,e,n,"weekdays")},y.parseZone=function(){return Te.apply(null,arguments).parseZone()},y.localeData=ce,y.isDuration=Ae,y.monthsShort=function(t,e){return vn(t,e,"monthsShort")},y.weekdaysMin=function(t,e,n){return mn(t,e,n,"weekdaysMin")},y.defineLocale=le,y.updateLocale=function(t,e){if(null!=e){var n,i,r=ne;null!=(i=ae(t))&&(r=i._config),(n=new C(e=D(r,e))).parentLocale=ie[t],ie[t]=n,se(t)}else null!=ie[t]&&(null!=ie[t].parentLocale?ie[t]=ie[t].parentLocale:null!=ie[t]&&delete ie[t]);return ie[t]},y.locales=function(){return i(ie)},y.weekdaysShort=function(t,e,n){return mn(t,e,n,"weekdaysShort")},y.normalizeUnits=I,y.relativeTimeRounding=function(t){return void 0===t?Hn:"function"==typeof t&&(Hn=t,!0)},y.relativeTimeThreshold=function(t,e){return void 0!==zn[t]&&(void 0===e?zn[t]:(zn[t]=e,"s"===t&&(zn.ss=e-1),!0))},y.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},y.prototype=dn,y.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},y}()}),SL="undefined"!=typeof window&&window.moment||xL,EL=Object.freeze({__proto__:null,default:SL,__moduleExports:SL}),TL={Images:jh,dotparser:ru,gephiParser:hu,allOptions:lL,convertDot:eu,convertGephi:du},OL=Object.freeze({__proto__:null,network:TL,DOMutil:kL,util:qa,data:IS,moment:EL,Hammer:xh,keycharm:vu,DataSet:CS,DataView:LS,Queue:bS,Network:fL});ML.default=OL}.call(this,DL(7))},function(t,e,n){(function(t,p){!function(n,i){"use strict";if(!n.setImmediate){var r,o,e,a,s=1,l={},c=!1,u=n.document,t=Object.getPrototypeOf&&Object.getPrototypeOf(n);t=t&&t.setTimeout?t:n,r="[object process]"==={}.toString.call(n.process)?function(t){p.nextTick(function(){h(t)})}:function(){if(n.postMessage&&!n.importScripts){var t=!0,e=n.onmessage;return n.onmessage=function(){t=!1},n.postMessage("","*"),n.onmessage=e,t}}()?(a="setImmediate$"+Math.random()+"$",n.addEventListener?n.addEventListener("message",f,!1):n.attachEvent("onmessage",f),function(t){n.postMessage(a+t,"*")}):n.MessageChannel?((e=new MessageChannel).port1.onmessage=function(t){h(t.data)},function(t){e.port2.postMessage(t)}):u&&"onreadystatechange"in u.createElement("script")?(o=u.documentElement,function(t){var e=u.createElement("script");e.onreadystatechange=function(){h(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):function(t){setTimeout(h,0,t)},t.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return l[s]=i,r(s),s++},t.clearImmediate=d}function d(t){delete l[t]}function h(t){if(c)setTimeout(h,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}(e)}finally{d(t),c=!1}}}}function f(t){t.source===n&&"string"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(7),n(25))},function(e,t,n){(function(J,X){
/*!
 *
 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(t){"use strict";"function"==typeof bootstrap?bootstrap("promise",t):e.exports=t()}(function(){"use strict";var s=!1;try{throw new Error}catch(t){s=!!t.stack}function e(){}var r,o=_(),u=function(){var n={task:void 0,next:null},e=n,i=!1,r=void 0,o=!1,a=[];function s(){for(var t,e;n.next;)t=(n=n.next).task,n.task=void 0,(e=n.domain)&&(n.domain=void 0,e.enter()),l(t,e);for(;a.length;)l(t=a.pop());i=!1}function l(t,e){try{t()}catch(t){if(o)throw e&&e.exit(),setTimeout(s,0),e&&e.enter(),t;setTimeout(function(){throw t},0)}e&&e.exit()}if(u=function(t){e=e.next={task:t,domain:o&&J.domain,next:null},i||(i=!0,r())},"object"==typeof J&&"[object process]"===J.toString()&&J.nextTick)o=!0,r=function(){J.nextTick(s)};else if("function"==typeof X)r="undefined"!=typeof window?X.bind(window,s):function(){X(s)};else if("undefined"!=typeof MessageChannel){var t=new MessageChannel;t.port1.onmessage=function(){r=c,(t.port1.onmessage=s)()};var c=function(){t.port2.postMessage(0)};r=function(){setTimeout(s,0),c()}}else r=function(){setTimeout(s,0)};return u.runAfter=function(t){a.push(t),i||(i=!0,r())},u}(),n=Function.call;function t(t){return function(){return n.apply(t,arguments)}}var a,l=t(Array.prototype.slice),c=t(Array.prototype.reduce||function(t,e){var n=0,i=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=i)throw new TypeError}for(;n<i;n++)n in this&&(e=t(e,this[n],n));return e}),i=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),d=t(Array.prototype.map||function(i,r){var o=this,a=[];return c(o,function(t,e,n){a.push(i.call(r,e,n,o))},void 0),a}),h=Object.create||function(t){function e(){}return e.prototype=t,new e},f=Object.defineProperty||function(t,e,n){return t[e]=n.value,t},p=t(Object.prototype.hasOwnProperty),v=Object.keys||function(t){var e=[];for(var n in t)p(t,n)&&e.push(n);return e},m=t(Object.prototype.toString);a="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var g="From previous event:";function y(t,e){if(s&&e.stack&&"object"==typeof t&&null!==t&&t.stack){for(var n=[],i=e;i;i=i.source)i.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>i.stackCounter)&&(f(t,"__minimumStackCounter__",{value:i.stackCounter,configurable:!0}),n.unshift(i.stack));n.unshift(t.stack);var r=function(t){for(var e=t.split("\n"),n=[],i=0;i<e.length;++i){var r=e[i];!w(r)&&(-1===(o=r).indexOf("(module.js:")&&-1===o.indexOf("(node.js:"))&&r&&n.push(r)}var o;return n.join("\n")}(n.join("\n"+g+"\n"));f(t,"stack",{value:r,configurable:!0})}}function b(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var i=/.*@(.+):(\d+)$/.exec(t);return i?[i[1],Number(i[2])]:void 0}function w(t){var e=b(t);if(!e)return!1;var n=e[0],i=e[1];return n===r&&o<=i&&i<=G}function _(){if(s)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=b(0<e[0].indexOf("@")?e[1]:e[2]);if(!n)return;return r=n[0],n[1]}}function k(t){return t instanceof O?t:L(t)?function(t){var e=S();return k.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}(t):z(t)}(k.resolve=k).nextTick=u,k.longStackSupport=!1;var x=1;function S(){var r,o=[],a=[],t=h(S.prototype),e=h(O.prototype);if(e.promiseDispatch=function(t,e,n){var i=l(arguments);o?(o.push(i),"when"===e&&n[1]&&a.push(n[1])):k.nextTick(function(){r.promiseDispatch.apply(r,i)})},e.valueOf=function(){if(o)return e;var t=D(r);return C(t)&&(r=t),t},e.inspect=function(){return r?r.inspect():{state:"pending"}},k.longStackSupport&&s)try{throw new Error}catch(t){e.stack=t.stack.substring(t.stack.indexOf("\n")+1),e.stackCounter=x++}function n(n){r=n,k.longStackSupport&&s&&(e.source=n),c(o,function(t,e){k.nextTick(function(){n.promiseDispatch.apply(n,e)})},void 0),a=o=void 0}return t.promise=e,t.resolve=function(t){r||n(k(t))},t.fulfill=function(t){r||n(z(t))},t.reject=function(t){r||n(H(t))},t.notify=function(n){r||c(a,function(t,e){k.nextTick(function(){e(n)})},void 0)},t}function E(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=S();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function T(r){return E(function(t,e){for(var n=0,i=r.length;n<i;n++)k(r[n]).then(t,e)})}function O(r,o,e){void 0===o&&(o=function(t){return H(new Error("Promise does not support operation: "+t))}),void 0===e&&(e=function(){return{state:"unknown"}});var a=h(O.prototype);if(a.promiseDispatch=function(t,e,n){var i;try{i=r[e]?r[e].apply(a,n):o.call(a,e,n)}catch(t){i=H(t)}t&&t(i)},a.inspect=e){var t=e();"rejected"===t.state&&(a.exception=t.reason),a.valueOf=function(){var t=e();return"pending"===t.state||"rejected"===t.state?a:t.value}}return a}function M(t,e,n,i){return k(t).then(e,n,i)}function D(t){if(C(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function C(t){return t instanceof O}function L(t){return function(t){return t===Object(t)}(t)&&"function"==typeof t.then}"object"==typeof J&&J&&J.env&&J.env.Q_DEBUG&&(k.longStackSupport=!0),(k.defer=S).prototype.makeNodeResolver=function(){var n=this;return function(t,e){t?n.reject(t):2<arguments.length?n.resolve(l(arguments,1)):n.resolve(e)}},k.Promise=E,(k.promise=E).race=T,E.all=U,E.reject=H,(E.resolve=k).passByCopy=function(t){return t},O.prototype.passByCopy=function(){return this},k.join=function(t,e){return k(t).join(e)},O.prototype.join=function(t){return k([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Q can't join: not the same: "+t+" "+e)})},k.race=T,O.prototype.race=function(){return this.then(k.race)},(k.makePromise=O).prototype.toString=function(){return"[object Promise]"},O.prototype.then=function(e,n,i){var r=this,o=S(),a=!1;return k.nextTick(function(){r.promiseDispatch(function(t){a||(a=!0,o.resolve(function(t){try{return"function"==typeof e?e(t):t}catch(t){return H(t)}}(t)))},"when",[function(t){a||(a=!0,o.resolve(function(t){if("function"==typeof n){y(t,r);try{return n(t)}catch(t){return H(t)}}return H(t)}(t)))}])}),r.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=function(t){return"function"==typeof i?i(t):t}(t)}catch(t){if(n=!0,!k.onerror)throw t;k.onerror(t)}n||o.notify(e)}]),o.promise},k.tap=function(t,e){return k(t).tap(e)},O.prototype.tap=function(e){return e=k(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},k.when=M,O.prototype.thenResolve=function(t){return this.then(function(){return t})},k.thenResolve=function(t,e){return k(t).thenResolve(e)},O.prototype.thenReject=function(t){return this.then(function(){throw t})},k.thenReject=function(t,e){return k(t).thenReject(e)},k.nearer=D,k.isPromise=C,k.isPromiseAlike=L,k.isPending=function(t){return C(t)&&"pending"===t.inspect().state},O.prototype.isPending=function(){return"pending"===this.inspect().state},k.isFulfilled=function(t){return!C(t)||"fulfilled"===t.inspect().state},O.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},k.isRejected=function(t){return C(t)&&"rejected"===t.inspect().state},O.prototype.isRejected=function(){return"rejected"===this.inspect().state};var A,I,P,j=[],N=[],B=[],F=!0;function R(){j.length=0,N.length=0,F=F||!0}function H(e){var t=O({when:function(t){return t&&function(e){if(F){var n=i(N,e);-1!==n&&("object"==typeof J&&"function"==typeof J.emit&&k.nextTick.runAfter(function(){var t=i(B,e);-1!==t&&(J.emit("rejectionHandled",j[n],e),B.splice(t,1))}),N.splice(n,1),j.splice(n,1))}}(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return function(t,e){F&&("object"==typeof J&&"function"==typeof J.emit&&k.nextTick.runAfter(function(){-1!==i(N,t)&&(J.emit("unhandledRejection",e,t),B.push(t))}),N.push(t),e&&void 0!==e.stack?j.push(e.stack):j.push("(no stack) "+e))}(t,e),t}function z(n){return O({when:function(){return n},get:function(t){return n[t]},set:function(t,e){n[t]=e},delete:function(t){delete n[t]},post:function(t,e){return null==t?n.apply(void 0,e):n[t].apply(n,e)},apply:function(t,e){return n.apply(t,e)},keys:function(){return v(n)}},void 0,function(){return{state:"fulfilled",value:n}})}function Y(t,e,n){return k(t).spread(e,n)}function q(t,e,n){return k(t).dispatch(e,n)}function U(t){return M(t,function(r){var o=0,a=S();return c(r,function(t,e,n){var i;C(e)&&"fulfilled"===(i=e.inspect()).state?r[n]=i.value:(++o,M(e,function(t){r[n]=t,0==--o&&a.resolve(r)},a.reject,function(t){a.notify({index:n,value:t})}))},void 0),0===o&&a.resolve(r),a.promise})}function W(r){if(0===r.length)return k.resolve();var o=k.defer(),a=0;return c(r,function(t,e,n){var i=r[n];a++,M(i,function(t){o.resolve(t)},function(t){if(0==--a){var e=t||new Error(""+t);e.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+e.message,o.reject(e)}},function(t){o.notify({index:n,value:t})})},void 0),o.promise}function V(t){return M(t,function(t){return t=d(t,k),M(U(d(t,function(t){return M(t,e,e)})),function(){return t})})}k.resetUnhandledRejections=R,k.getUnhandledReasons=function(){return j.slice()},k.stopUnhandledRejectionTracking=function(){R(),F=!1},R(),k.reject=H,k.fulfill=z,k.master=function(n){return O({isDef:function(){}},function(t,e){return q(n,t,e)},function(){return k(n).inspect()})},k.spread=Y,O.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},k.async=function(e){return function(){function t(t,e){var n;if("undefined"==typeof StopIteration){try{n=i[t](e)}catch(t){return H(t)}return n.done?k(n.value):M(n.value,r,o)}try{n=i[t](e)}catch(t){return function(t){return"[object StopIteration]"===m(t)||t instanceof a}(t)?k(t.value):H(t)}return M(n,r,o)}var i=e.apply(this,arguments),r=t.bind(t,"next"),o=t.bind(t,"throw");return r()}},k.spawn=function(t){k.done(k.async(t)())},k.return=function(t){throw new a(t)},k.promised=function(n){return function(){return Y([this,U(arguments)],function(t,e){return n.apply(t,e)})}},k.dispatch=q,O.prototype.dispatch=function(t,e){var n=this,i=S();return k.nextTick(function(){n.promiseDispatch(i.resolve,t,e)}),i.promise},k.get=function(t,e){return k(t).dispatch("get",[e])},O.prototype.get=function(t){return this.dispatch("get",[t])},k.set=function(t,e,n){return k(t).dispatch("set",[e,n])},O.prototype.set=function(t,e){return this.dispatch("set",[t,e])},k.del=k.delete=function(t,e){return k(t).dispatch("delete",[e])},O.prototype.del=O.prototype.delete=function(t){return this.dispatch("delete",[t])},k.mapply=k.post=function(t,e,n){return k(t).dispatch("post",[e,n])},O.prototype.mapply=O.prototype.post=function(t,e){return this.dispatch("post",[t,e])},k.send=k.mcall=k.invoke=function(t,e){return k(t).dispatch("post",[e,l(arguments,2)])},O.prototype.send=O.prototype.mcall=O.prototype.invoke=function(t){return this.dispatch("post",[t,l(arguments,1)])},k.fapply=function(t,e){return k(t).dispatch("apply",[void 0,e])},O.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},k.try=k.fcall=function(t){return k(t).dispatch("apply",[void 0,l(arguments,1)])},O.prototype.fcall=function(){return this.dispatch("apply",[void 0,l(arguments)])},k.fbind=function(t){var e=k(t),n=l(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(l(arguments))])}},O.prototype.fbind=function(){var t=this,e=l(arguments);return function(){return t.dispatch("apply",[this,e.concat(l(arguments))])}},k.keys=function(t){return k(t).dispatch("keys",[])},O.prototype.keys=function(){return this.dispatch("keys",[])},k.all=U,O.prototype.all=function(){return U(this)},k.any=W,O.prototype.any=function(){return W(this)},k.allResolved=(A=V,I="allResolved",P="allSettled",function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(I+" is deprecated, use "+P+" instead.",new Error("").stack),A.apply(A,arguments)}),O.prototype.allResolved=function(){return V(this)},k.allSettled=function(t){return k(t).allSettled()},O.prototype.allSettled=function(){return this.then(function(t){return U(d(t,function(t){function e(){return t.inspect()}return(t=k(t)).then(e,e)}))})},k.fail=k.catch=function(t,e){return k(t).then(void 0,e)},O.prototype.fail=O.prototype.catch=function(t){return this.then(void 0,t)},k.progress=function(t,e){return k(t).then(void 0,void 0,e)},O.prototype.progress=function(t){return this.then(void 0,void 0,t)},k.fin=k.finally=function(t,e){return k(t).finally(e)},O.prototype.fin=O.prototype.finally=function(e){if(!e||"function"!=typeof e.apply)throw new Error("Q can't apply finally callback");return e=k(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},k.done=function(t,e,n,i){return k(t).done(e,n,i)},O.prototype.done=function(t,e,n){var i=function(t){k.nextTick(function(){if(y(t,r),!k.onerror)throw t;k.onerror(t)})},r=t||e||n?this.then(t,e,n):this;"object"==typeof J&&J&&J.domain&&(i=J.domain.bind(i)),r.then(void 0,i)},k.timeout=function(t,e,n){return k(t).timeout(e,n)},O.prototype.timeout=function(t,e){var n=S(),i=setTimeout(function(){e&&"string"!=typeof e||((e=new Error(e||"Timed out after "+t+" ms")).code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(i),n.resolve(t)},function(t){clearTimeout(i),n.reject(t)},n.notify),n.promise},k.delay=function(t,e){return void 0===e&&(e=t,t=void 0),k(t).delay(e)},O.prototype.delay=function(n){return this.then(function(t){var e=S();return setTimeout(function(){e.resolve(t)},n),e.promise})},k.nfapply=function(t,e){return k(t).nfapply(e)},O.prototype.nfapply=function(t){var e=S(),n=l(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},k.nfcall=function(t){var e=l(arguments,1);return k(t).nfapply(e)},O.prototype.nfcall=function(){var t=l(arguments),e=S();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},k.nfbind=k.denodeify=function(n){if(void 0===n)throw new Error("Q can't wrap an undefined function");var i=l(arguments,1);return function(){var t=i.concat(l(arguments)),e=S();return t.push(e.makeNodeResolver()),k(n).fapply(t).fail(e.reject),e.promise}},O.prototype.nfbind=O.prototype.denodeify=function(){var t=l(arguments);return t.unshift(this),k.denodeify.apply(void 0,t)},k.nbind=function(n,i){var r=l(arguments,2);return function(){var t=r.concat(l(arguments)),e=S();return t.push(e.makeNodeResolver()),k(function(){return n.apply(i,arguments)}).fapply(t).fail(e.reject),e.promise}},O.prototype.nbind=function(){var t=l(arguments,0);return t.unshift(this),k.nbind.apply(void 0,t)},k.nmapply=k.npost=function(t,e,n){return k(t).npost(e,n)},O.prototype.nmapply=O.prototype.npost=function(t,e){var n=l(e||[]),i=S();return n.push(i.makeNodeResolver()),this.dispatch("post",[t,n]).fail(i.reject),i.promise},k.nsend=k.nmcall=k.ninvoke=function(t,e){var n=l(arguments,2),i=S();return n.push(i.makeNodeResolver()),k(t).dispatch("post",[e,n]).fail(i.reject),i.promise},O.prototype.nsend=O.prototype.nmcall=O.prototype.ninvoke=function(t){var e=l(arguments,1),n=S();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},k.nodeify=function(t,e){return k(t).nodeify(e)},O.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){k.nextTick(function(){e(null,t)})},function(t){k.nextTick(function(){e(t)})})},k.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var G=_();return k})}).call(this,n(25),n(20).setImmediate)},function(t,e,n){"use strict";n.r(e),n.d(e,"init",function(){return i});var D=document.getElementById("access").value,o=n(26),C=function(t){return(t=(t=t.replace(/\//g,".")).split("."))[2]="20"+t[2],t.join(".")},u={weekStart:"monday",mark:function(t){return t.getDate()==(new Date).getDate()&&t.getMonth()==(new Date).getMonth()?"markedDay":""}};function i(){document.querySelectorAll('input[name="filter-radio"]');function i(){document.querySelectorAll(".filter-item").forEach(function(t){t.querySelector("input").checked&&!M.checked?t.classList.add("d-hide"):t.classList.remove("d-hide");var e=t.parentElement;Array.from(e.querySelectorAll(".filter-item")).find(function(t){return!t.classList.contains("d-hide")})?e.classList.remove("d-hide"):e.classList.add("d-hide")});var e=!1;r.querySelectorAll(".w100").forEach(function(t){return e=!t.classList.contains("d-hide")}),e?r.classList.remove("emptyTasks"):r.classList.add("emptyTasks")}var r=document.getElementById("tasks"),l=document.getElementById("period"),t=document.querySelectorAll("#filters > *"),M=document.getElementById("showHiddenSwitch");M.oninput=i,t.forEach(function(a,t,s){a.onclick=function(t){var i,r;document.getElementById(a.getAttribute("for")).checked=!0;var o=new dhx.Popup;switch(a.getAttribute("for")){case"today":return c(new Date,"today"),s.forEach(function(t){return t.classList.remove("active")}),a.classList.add("active"),void(l.innerText="Выбрана сегодняшняя дата");case"day":i=new dhx.Calendar(null,u),r="day";break;case"3days":i=new dhx.Calendar(null,u),r="3days";break;case"week":i=new dhx.Calendar(null,u),r="week";break;case"mounth":i=new dhx.Calendar(null,{view:"month",value:new Date}),r="mounth"}o.attach(i),o.show(a),i.events.on("change",function(t){var e;s.forEach(function(t){return t.classList.remove("active")});function n(){return new Date(t)}switch(r){case"day":console.log(t),l.innerText="Выбрана дата: "+C(i.getValue());break;case"3days":e=new Date(n().setDate(n().getDate()+3)).toISOString(),console.log(e),l.innerText="Выбраны дни с "+C(i.getValue())+" по "+e.slice(8,10)+"."+e.slice(5,7)+"/"+e.slice(0,4);break;case"week":e=new Date(n().setDate(n().getDate()+7)).toISOString(),l.innerText="Выбраны дни с "+C(i.getValue())+" по "+e.slice(8,10)+"."+e.slice(5,7)+"."+e.slice(0,4);break;case"mounth":switch(t.getMonth()+1){case 1:l.innerText="Выбран Январь ";break;case 2:l.innerText="Выбран Февраль ";break;case 3:l.innerText="Выбран Март ";break;case 4:l.innerText="Выбран Апрель ";break;case 5:l.innerText="Выбран Май ";break;case 6:l.innerText="Выбран Июнь ";break;case 7:l.innerText="Выбран Июль ";break;case 8:l.innerText="Выбран Август ";break;case 9:l.innerText="Выбран Сентябрь ";break;case 10:l.innerText="Выбран Октябрь ";break;case 11:l.innerText="Выбран Ноябрь ";break;case 12:l.innerText="Выбран Декабрь "}}a.classList.add("active"),c(t,a.getAttribute("for")),o.hide()})}});var c=function E(T,O){r.innerHTML='<div class="loading loading-lg"></div>',fetch("/office/lids/getList",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){r.innerHTML="";var e=[];t.forEach(function(t){e.push({lidData:t,tasks:t.lid_data.tasks?t.lid_data.tasks:null})}),e.forEach(function(x){if(x.tasks&&!(x.tasks.length<=0)){var S=document.createElement("div");S.innerHTML='\n                    <div class="h4 emptyLidTitle">'.concat(x.lidData.title,'</div>\n                    <small class="s-rounded pb-1 float-right" title="Маржа"><b class="label label-primary">').concat(o.formatMoney(x.lidData.cgi,"",2," ",","),' р.</b></small>\n                    <small class="">\n                        Вал: <b class="label label-secondary">').concat(o.formatMoney(x.lidData.gi,"",2," ",","),' р.</b>\n                        Предоплата: <b class="label label-secondary">').concat(o.formatMoney(x.lidData.prepayment,"",2," ",","),' р.</b>\n                        Доплата: <b class="label label-secondary">').concat(o.formatMoney(x.lidData.restpayment,"",2," ",",")," р.</b>\n                    </small>\n                "),S.classList.add("w100"),x.tasks.forEach(function(t,e){var n=T.getDate(),i=new Date(new Date(T).setDate(new Date(T).getDate()+1)).getDate(),r=new Date(new Date(T).setDate(new Date(T).getDate()+2)).getDate(),o=Number(T.toISOString().slice(5,7)),a=Number(T.toISOString().slice(2,4)),s={day:Number(t.date.split("/")[0]),month:Number(t.date.split("/")[1]),year:Number(t.date.split("/")[2]),hours:Number(t.time.split(":")[0]),minutes:Number(t.time.split(":")[1])},l=!1;if(new Date(Number("20"+s.year),s.month-1,s.day,s.hours,s.minutes)>new Date&&!t.done)switch(O){case"day":case"today":if(s.day!=n||s.month!=o||s.year!=a)return;break;case"3days":if(s.day!=n&&s.day!=i&&s.day!=r||s.month!=o||s.year!=a)return;break;case"week":if(s.day!=n&&s.day!=new Date(getDate().setDate(getDate().getDate()+1)).toISOString().slice(8,10)&&s.day!=new Date(getDate().setDate(getDate().getDate()+2)).toISOString().slice(8,10)&&s.day!=new Date(getDate().setDate(getDate().getDate()+3)).toISOString().slice(8,10)&&s.day!=new Date(getDate().setDate(getDate().getDate()+4)).toISOString().slice(8,10)&&s.day!=new Date(getDate().setDate(getDate().getDate()+5)).toISOString().slice(8,10)&&s.day!=new Date(getDate().setDate(getDate().getDate()+6)).toISOString().slice(8,10)||s.month!=o||s.year!=a)return;break;case"mounth":if(s.month!=o||s.year!=a)return}else l=!0;var c=document.createElement("div");c.classList.add("filter-item","pl-2","pt-2","form-group","d-flex","mb-1"),!M.checked&&t.done&&c.classList.add("d-hide"),c.innerHTML='\n                        <label class="form-checkbox wfc d-inline-block pr-1">\n                            <input type="checkbox" '.concat(t.done?"checked":"",' data-i="').concat(e,'">\n                            <i class="form-icon"></i>\n                        </label>\n                        <div class="d-block w100 mya">\n                            <figure class="avatar float-right c-hand" data-initial="?" title="Никто" data-i="').concat(e,'"></figure>\n\n                            <button class="editbt d-hide btn btn-link float-right btn-sm" name="saveTask" disabled>\n                                <span class="icon icon-share"></span>\n                            </button>\n                            <button class="editbt d-hide btn btn-link float-right btn-sm" name="rejectTaskEdit" disabled>\n                                <span class="icon icon-cross"></span>\n                            </button>\n\n                            <span class="c-hand ').concat(l&&!t.done?"text-error":"text-gray",'" name="dhxDate" data-i="').concat(e,'">').concat(C(t.date),' </span>\n                            <span class="c-hand ').concat(l&&!t.done?"text-error":"text-gray",'" name="dhxTime" data-i="').concat(e,'">').concat(t.time,' </span>\n                            <div name="taskTitle" contenteditable="true" data-old="').concat(t.title,'" value="').concat(t.title,'" data-i="').concat(e,'">').concat(t.title,"</div>\n                        </div>\n                    "),t.author&&fetch("/office/users/",{method:"POST",body:JSON.stringify({id:t.author,find:"byid",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){c.querySelector("figure").dataset.initial=t[0].fio.slice(0,1),t[0].fio.split(" ")[1]&&(c.querySelector("figure").dataset.initial+=t[0].fio.split(" ")[1].slice(0,1)),c.querySelector("figure").title=t[0].fio,c.querySelector("figure").dataset.id=t[0].id,c.querySelector("figure").classList.add("loaded")});var u=new dhx.Timepicker(null,{actions:!0}),d=new dhx.Calendar(null,{weekStart:"monday"});u.setValue(t.time),d.setValue(t.date);var h=c.querySelector('[name="dhxTime"]'),f=c.querySelector('[name="dhxDate"]'),p=new dhx.Popup,v=new dhx.Popup;"full"==D&&(p.attach(u),v.attach(d)),"full"==D&&u.events.on("Save",function(){p.hide(),x.lidData.lid_data.tasks[h.dataset.i].time=u.getValue(),fetch("/office/lids/update",{method:"POST",body:JSON.stringify({id:x.lidData.id,lid_data:x.lidData.lid_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){E(T,O)})}),"full"==D&&d.events.on("change",function(){v.hide(),x.lidData.lid_data.tasks[f.dataset.i].date=d.getValue(),fetch("/office/lids/update",{method:"POST",body:JSON.stringify({id:x.lidData.id,lid_data:x.lidData.lid_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){E(T,O)})}),"full"==D&&(h.onclick=function(t){p.show(h),document.querySelector(".dhx_timepicker__button-close").onclick=function(t){return p.hide()}},f.onclick=function(t){v.show(f)});var m=c.querySelector('[name="taskTitle"]'),g=c.querySelector('[name="saveTask"]'),y=c.querySelector('[name="rejectTaskEdit"]');m.onfocus=function(t){m.classList.add("active"),g.classList.remove("d-hide"),y.classList.remove("d-hide"),g.disabled=!1,y.disabled=!1},m.onblur=function(t){return setTimeout(function(){m.classList.remove("active"),g.classList.add("d-hide"),y.classList.add("d-hide"),g.disabled=!0,y.disabled=!0},200)},"full"==D&&(g.onclick=function(t){console.log(m.innerText.trim().length),0!=m.innerText.trim().length&&(m.contenteditable=!1,g.disabled=!0,y.disabled=!0,m.innerText=m.innerText.replace(/\r?\n/g," ").trim(),x.lidData.lid_data.tasks[m.dataset.i].title=m.innerText,fetch("/office/lids/update",{method:"POST",body:JSON.stringify({id:x.lidData.id,lid_data:x.lidData.lid_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(){m.contenteditable=!0,g.disabled=!1,y.disabled=!1,m.dataset.old=m.innerText,m.blur()}))}),"full"==D&&(y.onclick=function(t){m.innerText=m.dataset.old}),"full"==D&&(c.querySelector("input").oninput=function(t){x.lidData.lid_data.tasks[t.target.dataset.i].done=t.target.checked,fetch("/office/lids/update",{method:"POST",body:JSON.stringify({id:x.lidData.id,lid_data:x.lidData.lid_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})});var b=c.querySelector("figure"),w=document.getElementById("userSelectModal"),_=(document.getElementById("rejectSelection"),document.getElementById("confirmUser"));b.onclick=function(t){w.classList.add("active");var n=w.querySelectorAll(".card-body .tile"),e=Array.from(n).find(function(t){return t.dataset.id==b.dataset.id&&t});e?e.classList.add("active"):n.forEach(function(t){return t.classList.remove("active")}),n.forEach(function(e){e.onclick=function(t){n.forEach(function(t){return t.classList.remove("active")}),e.classList.add("active"),_.onclick=function(t){return k(t,b.dataset.i,e.dataset.id)}}})};var k=function(t,e,n){x.lidData.lid_data.tasks[e].author=n,fetch("/office/lids/update",{method:"POST",body:JSON.stringify({id:x.lidData.id,lid_data:x.lidData.lid_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(){E(T,O)})};S.insertAdjacentElement("beforeend",c)}),S.insertAdjacentHTML("beforeend",'<div class="divider"></div>'),S.querySelectorAll(".filter-item").length&&r.insertAdjacentElement("beforeend",S),i()}});var n=!1;r.querySelectorAll(".w100").forEach(function(t){return n=!t.classList.contains("d-hide")}),n?r.classList.remove("emptyTasks"):r.classList.add("emptyTasks")})};c(new Date,"today")}},function(t,e,n){"use strict";n.r(e),n.d(e,"init",function(){return i});document.getElementById("access").value;function i(){function e(t){s.checked||l.checked||(t==s?l.checked=!0:s.checked=!0)}var s=document.getElementById("filterContacts"),l=document.getElementById("filterCompanies");s.oninput=function(t){e(t.target),p()},l.oninput=function(t){e(t.target),p()};function t(){c.querySelectorAll("tr").forEach(function(f){f.onclick=function(t){var i=f.dataset.info?JSON.parse(f.dataset.info):null,e=f.dataset.parent?JSON.parse(f.dataset.parent):null,n=f.dataset.phones?JSON.parse(f.dataset.phones):null,r=f.dataset.email?JSON.parse(f.dataset.email):null;document.querySelectorAll(".t-editContact").forEach(function(t){return t.remove()});var o=[];n&&n.forEach(function(t){o.push('\n                        <div class="seven-prefix">\n                            <input data-id="'.concat(t.id,'" data-old="').concat(t.phone,'" type="text" pattern="d*" placeholder="..." value="').concat(t.phone,'" maxlength="10" name="phoneEdit">\n                        </div>\n                    '))});var a='\n                    <tr class="t-editContact" data-i="'.concat(i.id,'">\n                        <td colspan="4">\n                            <div class="btn btn-clear float-right close-edit"></div>\n                            <div class="d-flex">\n                                <div class="col-4">\n                                    <label>Название</label>\n                                    <input class="form-input" name="contactTitle" type="text" placeholder="Иван" value="').concat(i.title?i.title:"",'">\n                                    <div class="form-group mb-0">\n                                        <label class="form-label pb-0">Тип</label>\n                                        <label class="form-radio d-inline-block">\n                                            <input type="radio" name="type" ').concat("person"==i.type?"checked":"",' value="person">\n                                            <i class="form-icon"></i> Контакт\n                                        </label>\n                                        <label class="form-radio d-inline-block">\n                                            <input type="radio" name="type" ').concat("company"==i.type?"checked":"",' value="company">\n                                            <i class="form-icon"></i> Компания\n                                        </label>\n                                    </div>\n                                    <div class="form-autocomplete ').concat("company"==i.type?"d-hide":"",'">\n                                        <label class="form-label">Компания</label>\n                                        <div class="form-autocomplete-input form-input">\n                                            <input class="form-input" type="text" placeholder="Поиск..." value="').concat(e?e.title:"",'">\n                                        </div>\n                                        <ul class="menu d-hide"></ul>\n                                    </div>\n                                    <label class="form-label">Телефоны</label>\n                                    ').concat(o.join("\n"),'\n                                    <div class="seven-prefix">\n                                        <input type="text" pattern="d*" placeholder="..." maxlength="10" name="newPhone">\n                                    </div>\n                                    <label class="form-label">Email</label>\n                                    <input class="form-input mail" type="text" placeholder="pochta@email.ru" data-i="').concat(r?r.id:"new",'" value="').concat(r?r.email:"",'">\n                                </div>\n                            </div>\n                            <button class="btn btn-primary btn-sm float-right">Сохранить</button>\n                        </td>\n                    </tr>\n                ');f.insertAdjacentHTML("afterend",a),document.querySelectorAll(".t-editContact .close-edit").forEach(function(t){return t.onclick=function(){return document.querySelectorAll(".t-editContact").forEach(function(t){return t.remove()})}});function s(){document.querySelectorAll('.t-editContact [name="phoneEdit"]').forEach(function(e){e.onkeyup=function(t){"Enter"==t.code&&10==e.value.length&&e.value!=e.dataset.old?(e.disabled=!0,fetch("/office/phones/update",{method:"POST",body:JSON.stringify({id:e.dataset.id,phone:e.value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){return e.disabled=!1})):"Enter"==t.code&&0==e.value.length&&fetch("/office/phones/update",{method:"POST",body:JSON.stringify({id:e.dataset.id,cmd:"delete",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){return e.parentElement.remove()})}})}s(),document.querySelector('.t-editContact [name="newPhone"]').onkeyup=function(e){"Enter"==e.code&&10==e.target.value.length&&(e.target.disabled=!0,fetch("/office/phones/update",{method:"POST",body:JSON.stringify({phone:e.target.value,parent:i.id,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){e.target.parentElement.insertAdjacentHTML("beforebegin",'\n                                <div class="seven-prefix">\n                                    <input data-id="'.concat(t.insertId,'" data-old="').concat(e.target.value,'" type="text" pattern="d*" placeholder="..." value="').concat(e.target.value,'" maxlength="10" name="phoneEdit">\n                                </div>\n                            ')),s(),e.target.value="",e.target.disabled=!1}))},document.querySelectorAll('.t-editContact input[type="radio"]').forEach(function(t){t.oninput=function(t){"company"==t.target.value?document.querySelector(".t-editContact .form-autocomplete").classList.add("d-hide"):document.querySelector(".t-editContact .form-autocomplete").classList.remove("d-hide")}});function l(){u.innerHTML='<div class="loading"></div>',fetch("/office/contacts",{method:"POST",body:JSON.stringify({title:c.value.trim(),find:"liketitle",only:"company",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){u.innerHTML="",t.forEach(function(t){u.insertAdjacentHTML("beforeend",'\n                                <div class="tile tile-centered py-1 c-hand" data-i="'.concat(t.id,"\" data-title='").concat(t.title,'\'>\n                                    <div class="tile-icon">\n                                        <figure class="avatar avatar-sm" data-initial="').concat(t.title.slice(0,1),'">\n                                    </div>\n                                    <div class="tile-content">').concat(t.title,"</div>\n                                </div>\n                            "))}),u.insertAdjacentHTML("beforeend",'\n                            <div class="tile tile-centered py-1 c-hand" data-i="0" data-title="">\n                                <div class="tile-icon">\n                                    <figure class="avatar avatar-sm" data-initial="?">\n                                </div>\n                                <div class="tile-content">Нет</div>\n                            </div>\n                        '),u.querySelectorAll(".tile").forEach(function(e){e.onclick=function(t){document.querySelector(".t-editContact .form-autocomplete").dataset.parent=e.dataset.i,c.value=e.dataset.title,u.classList.add("d-hide")}})})}var c=document.querySelector(".t-editContact .form-autocomplete input"),u=document.querySelector(".t-editContact .form-autocomplete .menu");c.oninput=l,c.onfocus=function(t){l(),u.classList.remove("d-hide")},c.onblur=function(t){return setTimeout(function(){return u.classList.add("d-hide")},300)};var d=document.querySelector(".t-editContact button"),h=document.querySelector('.t-editContact [name="contactTitle"]');h.oninput=function(t){0==h.value.trim().length?h.classList.add("is-error"):h.classList.remove("is-error")},h.onblur=function(t){return h.classList.remove("is-error")},d.onclick=function(t){var e=Array.from(document.querySelectorAll('.t-editContact input[type="radio"]')).find(function(t){return!!t.checked}).value;d.disabled=!0;var n=document.querySelector(".t-editContact .form-autocomplete").dataset.parent;0<h.value.trim().length?(fetch("/office/contacts/update",{method:"POST",body:JSON.stringify({id:i.id,title:h.value,type:e,parent:n,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){p()}),fetch("/office/email/update",{method:"POST",body:JSON.stringify({id:"new"!=document.querySelector(".mail").dataset.i?document.querySelector(".mail").dataset.i:void 0,parent:"new"!=document.querySelector(".mail").dataset.i?void 0:i.id,email:document.querySelector(".mail").value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})):h.classList.add("is-error")}}})}var n=document.getElementById("searchInput"),p=function(){return Promise.all([fetch("/office/contacts",{method:"POST",body:JSON.stringify({title:n.value.trim(),find:"liketitle",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/phones",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/email",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(t){i(t)})},c=document.getElementById("contactsList");t();var i=function(a){c.innerHTML="",a[0].length||c.insertAdjacentHTML("beforeend",'\n                <tr>\n                    <td class="empty-search" colspan="4"></td>\n                </tr>\n            '),a[0].forEach(function(e,t,n){var i=a[2].find(function(t){return t.parent==e.id}),r=n.find(function(t){return t.id==e.parent&&t}),o=[];a[1].forEach(function(t){return t.parent==e.id?o.push(t):null}),!s.checked&&"person"==e.type||!l.checked&&"company"==e.type||c.insertAdjacentHTML("beforeend",'\n                <tr class="c-hand" data-info=\''.concat(JSON.stringify(e),"' ").concat(r?"data-parent='"+JSON.stringify(r)+"'":""," data-phones='").concat(JSON.stringify(o),"' ").concat(i?"data-email='"+JSON.stringify(i)+"'":"",">\n                    <td>").concat(e.id,"</td>\n                    <td>").concat(e.title,"</td>\n                    <td>").concat(o[0]?"+7"+o[0].phone:"","</td>\n                    <td>").concat(r?r.title:"","</td>\n                </tr>\n            "))}),t()};n.oninput=function(t){p()}}},function(t,e,n){"use strict";function i(){document.querySelectorAll(".operations input").forEach(function(t){t.onclick=function(){fetch("/office/users/update",{method:"POST",body:JSON.stringify({id:t.dataset.uid,active:t.checked?1:0,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})}});var t=document.querySelector("#showInactive input"),e=document.querySelectorAll("tbody tr");t.onclick=function(){t.checked?e.forEach(function(t){t.classList.contains("d-hide")&&t.classList.remove("d-hide")}):e.forEach(function(t){t.querySelector("input").checked||t.classList.add("d-hide")})}}n.r(e),n.d(e,"init",function(){return i})},function(t,e,n){"use strict";n.r(e),n.d(e,"init",function(){return o});var i=n(0),s=n.n(i),r=n(1),l=n.n(r);function o(){document.querySelectorAll(".operations input").forEach(function(t){t.onclick=function(){fetch("/office/posts/update",{method:"POST",body:JSON.stringify({id:t.dataset.uid,active:t.checked?1:0,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})}});var t=document.querySelector("#showInactive input"),e=document.querySelectorAll("tbody tr");t.onclick=function(){t.checked?e.forEach(function(t){t.classList.contains("d-hide")&&t.classList.remove("d-hide")}):e.forEach(function(t){t.querySelector("td:nth-child(4) input").checked||t.classList.add("d-hide")})},document.querySelectorAll(".users .form-autocomplete").forEach(function(i){if(i.dataset.data){var r=JSON.parse(i.dataset.data),o=function(){i.querySelectorAll(".chip").forEach(function(e){return e.querySelector("a").onclick=function(){e.remove();var t=r.users.split(",").indexOf(e.dataset.id);r.users=r.users.split(","),r.users.splice(t,1),r.users=r.users.join(","),fetch("/office/posts/update",{method:"POST",body:JSON.stringify({id:r.id,users:r.users,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})}})};o();var a=i.querySelector("ul");i.querySelector("input").oninput=function(){var e=l()(s.a.mark(function t(n){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.target.value.trim().length){t.next=2;break}return t.abrupt("return",a.innerHTML="");case 2:return t.next=4,fetch("/office/users",{method:"POST",body:JSON.stringify({find:"search",fio:n.target.value.trim(),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()});case 4:if((e=t.sent).length){t.next=7;break}return t.abrupt("return",a.innerHTML="");case 7:a.innerHTML="",e.forEach(function(e){if(!r.users.split(",").find(function(t){return t==e.id})){var t=document.createElement("li");t.classList.add("menu-item"),t.innerHTML='\n                <a>\n                    <div class="tile tile-centered">\n                        <div class="tile-content">'.concat(e.fio,"</div>\n                    </div>\n                </a>"),t.querySelector("a").onclick=function(){a.innerHTML="",n.target.value="";var t=document.createElement("span");t.classList.add("chip"),t.dataset.id=e.id,t.innerHTML="".concat(e.fio,'<a class="btn btn-clear"></a>'),i.querySelector(".chips").insertAdjacentElement("beforeend",t),o(),r.users=r.users.length?r.users.split(","):[],r.users.push(e.id),r.users=r.users.join(","),fetch("/office/posts/update",{method:"POST",body:JSON.stringify({id:r.id,users:r.users,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})},a.insertAdjacentElement("beforeend",t)}});case 9:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),i.removeAttribute("data-data")}}),document.querySelectorAll(".stats .form-autocomplete").forEach(function(i){if(i.dataset.data){var r=JSON.parse(i.dataset.data),o=function(){i.querySelectorAll(".chip").forEach(function(e){return e.querySelector("a").onclick=function(){e.remove();var t=r.stat_id.split(",").indexOf(e.dataset.id);r.stat_id=r.stat_id.split(","),r.stat_id.splice(t,1),r.stat_id=r.stat_id.join(","),fetch("/office/posts/update",{method:"POST",body:JSON.stringify({id:r.id,stat_id:r.stat_id,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})}})};o();var a=i.querySelector("ul");i.querySelector("input").oninput=function(){var e=l()(s.a.mark(function t(n){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.target.value.trim().length){t.next=2;break}return t.abrupt("return",a.innerHTML="");case 2:return t.next=4,fetch("/office/stats",{method:"POST",body:JSON.stringify({find:"search",title:n.target.value.trim(),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()});case 4:if((e=t.sent).length){t.next=7;break}return t.abrupt("return",a.innerHTML="");case 7:a.innerHTML="",e.forEach(function(e){if(!r.stat_id.split(",").find(function(t){return t==e.id})){var t=document.createElement("li");t.classList.add("menu-item"),t.innerHTML='\n                <a>\n                    <div class="tile tile-centered">\n                        <div class="tile-content">'.concat(e.title,"</div>\n                    </div>\n                </a>"),t.querySelector("a").onclick=function(){a.innerHTML="",n.target.value="";var t=document.createElement("span");t.classList.add("chip"),t.dataset.id=e.id,t.innerHTML="".concat(e.title,'<a class="btn btn-clear"></a>'),i.querySelector(".chips").insertAdjacentElement("beforeend",t),o(),r.stat_id=r.stat_id.length?r.stat_id.split(","):[],r.stat_id.push(e.id),r.stat_id=r.stat_id.join(","),fetch("/office/posts/update",{method:"POST",body:JSON.stringify({id:r.id,stat_id:r.stat_id,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})},a.insertAdjacentElement("beforeend",t)}});case 9:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),i.removeAttribute("data-data")}}),document.querySelectorAll("table tbody tr td:first-child").forEach(function(e){if(e.dataset.data){var t=JSON.parse(e.dataset.data);e.onkeydown=function(t){"Enter"==t.code&&(t.preventDefault(),e.blur())},e.onblur=function(){fetch("/office/posts/update",{method:"POST",body:JSON.stringify({id:t.id,title:e.innerText.trim(),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})},e.removeAttribute("data-data")}}),document.getElementById("addPost").onclick=l()(s.a.mark(function t(){var e,n,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/office/posts/update",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t.insertId});case 2:e=t.sent,n=JSON.stringify({id:e,parent:null,active:1,title:"",users:"",stat_id:""}),(i=document.createElement("tr")).innerHTML='\n        <td contenteditable="true"></td><td class="users"><div class="form-autocomplete"><div class="form-autocomplete-input"><div class="chips"></div><input class="form-input" type="text" placeholder="Поиск"></div><ul class="menu"></ul></div></td><td class="stats"><div class="form-autocomplete"><div class="form-autocomplete-input"><div class="chips"></div><input class="form-input" type="text" placeholder="Поиск"></div><ul class="menu"></ul></div></td><td><div class="form-group"><label class="operations form-switch"><input type="checkbox" checked="checked"<i class="form-icon"></i></label></div></td>',i.querySelectorAll("td:first-child,.form-autocomplete").forEach(function(t){return t.setAttribute("data-data",n)}),document.querySelector("table tbody").insertAdjacentElement("beforeend",i),o();case 9:case"end":return t.stop()}},t)}))}},function(t,e,n){"use strict";n.r(e),n.d(e,"init",function(){return p});var i=n(0),a=n.n(i),r=n(1),s=n.n(r),o=n(4),l=n(53),c=n(54),u=n(55),d=n(56),h=n(57),f=n(58);function p(){document.querySelectorAll(".operations input").forEach(function(t){t.onclick=function(){fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:t.dataset.uid,active:t.checked?1:0,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})}});var t=document.querySelector("#showInactive input"),e=document.querySelectorAll("tbody tr");t.onclick=function(){t.checked?e.forEach(function(t){t.classList.contains("d-hide")&&t.classList.remove("d-hide")}):e.forEach(function(t){t.querySelector("input").checked||t.classList.add("d-hide")})},document.querySelectorAll("table tbody tr td:nth-child(2)").forEach(function(e){if(e.dataset.data){var t=JSON.parse(e.dataset.data);e.onkeydown=function(t){"Enter"==t.code&&(t.preventDefault(),e.blur())},e.onblur=function(){fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:t.id,title:e.innerText.trim(),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}})},e.removeAttribute("data-data")}}),document.querySelectorAll("table tbody tr td:nth-child(3)").forEach(function(o){o.querySelector("button").onclick=function(){document.getElementById("codex-editor").innerHTML="";var i=JSON.parse(o.dataset.data),t=document.getElementById("modalDescription");t.classList.add("active");var r=new EditorJS({holderId:"codex-editor",tools:{header:{class:l,inlineToolbar:["link"]},list:{class:c,inlineToolbar:!0},Marker:{class:u,shortcut:"CMD+SHIFT+M"},paragraph:{class:d,inlineToolbar:!0},checklist:{class:h,inlineToolbar:!0},delimiter:f},autofocus:!1,onReady:function(){document.querySelectorAll(".ce-inline-toolbar .icon").forEach(function(t){return t.classList.remove("icon")})},onChange:function(){},data:JSON.parse(i.description)});t.querySelector(".modal-footer button").onclick=s()(a.a.mark(function t(){var e,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.save();case 2:e=t.sent,fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:i.id,description:JSON.stringify(e),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}),(n=i).description=JSON.stringify(e),o.dataset.data=JSON.stringify(n);case 7:case"end":return t.stop()}},t)}))}}),document.getElementById("addStat").onclick=s()(a.a.mark(function t(){var e,n,i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/office/stats/update",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t.insertId});case 2:e=t.sent,n=JSON.stringify({id:e,title:null,description:null,reverted:0,active:1,stat_data:null,last_day:3}),(i=document.createElement("tr")).innerHTML='<td class="text-center"><i class="icon icon-menu c-hand"></i></td><td contenteditable="true"></td><td><button class="btn btn-link text-gray">Открыть описание</button></td><td><div class="form-group"><label class="operations form-switch"><input type="checkbox" checked="checked"><i class="form-icon"></i></label></div></td>',i.querySelectorAll("td:nth-child(2),td:nth-child(3)").forEach(function(t){return t.setAttribute("data-data",n)}),document.querySelector("table tbody").insertAdjacentElement("beforeend",i),p();case 9:case"end":return t.stop()}},t)}));var n=document.querySelector("tbody"),i=function(){var t=s()(a.a.mark(function t(){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],document.querySelectorAll("table tbody tr").forEach(function(t){return e.push(Number(t.dataset.sid))}),t.next=4,fetch("/office/stats/sort",{method:"POST",body:JSON.stringify({id:e,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}});case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();new o.a(n,{handle:".c-hand",animation:150,onEnd:i})}},function(t,e,n){window,t.exports=function(n){var i={};function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=n,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=0)}([function(t,e,n){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}n(1).toString();
/**
 * Header block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 * @version 2.0.0
 */
var r=function(){function r(t){var e=t.data,n=t.config,i=t.api;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.api=i,this._CSS={block:this.api.styles.block,settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive,wrapper:"ce-header"},this._settings=n,this._data=this.normalizeData(e),this.settingsButtons=[],this._element=this.getTag()}var t,e;return e=[{key:"conversionConfig",get:function(){return{export:"text",import:"text"}}},{key:"sanitize",get:function(){return{level:{}}}},{key:"pasteConfig",get:function(){return{tags:["H1","H2","H3","H4","H5","H6"]}}},{key:"toolbox",get:function(){return{icon:n(6).default,title:"Heading"}}}],o((t=r).prototype,[{key:"normalizeData",value:function(t){var e={};return"object"!==i(t)&&(t={}),e.text=t.text||"",e.level=parseInt(t.level)||this.defaultLevel.number,e}},{key:"render",value:function(){return this._element}},{key:"renderSettings",value:function(){var n=this,i=document.createElement("DIV");return this.levels.forEach(function(t){var e=document.createElement("SPAN");e.classList.add(n._CSS.settingsButton),n.currentLevel.number===t.number&&e.classList.add(n._CSS.settingsButtonActive),e.innerHTML=t.svg,e.dataset.level=t.number,e.addEventListener("click",function(){n.setLevel(t.number)}),i.appendChild(e),n.settingsButtons.push(e)}),i}},{key:"setLevel",value:function(e){var n=this;this.data={level:e,text:this.data.text},this.settingsButtons.forEach(function(t){t.classList.toggle(n._CSS.settingsButtonActive,parseInt(t.dataset.level)===e)})}},{key:"merge",value:function(t){var e={text:this.data.text+t.text,level:this.data.level};this.data=e}},{key:"validate",value:function(t){return""!==t.text.trim()}},{key:"save",value:function(t){return{text:t.innerHTML,level:this.currentLevel.number}}},{key:"getTag",value:function(){var t=document.createElement(this.currentLevel.tag);return t.innerHTML=this._data.text||"",t.classList.add(this._CSS.wrapper),t.contentEditable="true",t.dataset.placeholder=this._settings.placeholder||"",t}},{key:"onPaste",value:function(t){var e=t.detail.data,n=2;switch(e.tagName){case"H1":n=1;break;case"H3":n=3;break;case"H4":n=4;break;case"H5":n=5;break;case"H6":n=6}this.data={level:n,text:e.innerHTML}}},{key:"data",get:function(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data},set:function(t){if(this._data=this.normalizeData(t),void 0!==t.level&&this._element.parentNode){var e=this.getTag();e.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(e,this._element),this._element=e}void 0!==t.text&&(this._element.innerHTML=this._data.text||"")}},{key:"currentLevel",get:function(){var e=this,t=this.levels.find(function(t){return t.number===e._data.level});return t=t||this.defaultLevel}},{key:"defaultLevel",get:function(){return this.levels[1]}},{key:"levels",get:function(){return[{number:1,tag:"H1",svg:'<svg width="16" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.14 1.494V4.98h4.62V1.494c0-.498.098-.871.293-1.12A.927.927 0 0 1 7.82 0c.322 0 .583.123.782.37.2.246.3.62.3 1.124v9.588c0 .503-.101.88-.303 1.128a.957.957 0 0 1-.779.374.921.921 0 0 1-.77-.378c-.193-.251-.29-.626-.29-1.124V6.989H2.14v4.093c0 .503-.1.88-.302 1.128a.957.957 0 0 1-.778.374.921.921 0 0 1-.772-.378C.096 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.285.374A.922.922 0 0 1 1.06 0c.321 0 .582.123.782.37.199.246.299.62.299 1.124zm11.653 9.985V5.27c-1.279.887-2.14 1.33-2.583 1.33a.802.802 0 0 1-.563-.228.703.703 0 0 1-.245-.529c0-.232.08-.402.241-.511.161-.11.446-.25.854-.424.61-.259 1.096-.532 1.462-.818a5.84 5.84 0 0 0 .97-.962c.282-.355.466-.573.552-.655.085-.082.246-.123.483-.123.267 0 .481.093.642.28.161.186.242.443.242.77v7.813c0 .914-.345 1.371-1.035 1.371-.307 0-.554-.093-.74-.28-.187-.186-.28-.461-.28-.825z"/></svg>'},{number:2,tag:"H2",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm10.99 9.288h3.527c.351 0 .62.072.804.216.185.144.277.34.277.588 0 .22-.073.408-.22.56-.146.154-.368.23-.665.23h-4.972c-.338 0-.601-.093-.79-.28a.896.896 0 0 1-.284-.659c0-.162.06-.377.182-.645s.255-.478.399-.631a38.617 38.617 0 0 1 1.621-1.598c.482-.444.827-.735 1.034-.875.369-.261.676-.523.922-.787.245-.263.432-.534.56-.81.129-.278.193-.549.193-.815 0-.288-.069-.546-.206-.773a1.428 1.428 0 0 0-.56-.53 1.618 1.618 0 0 0-.774-.19c-.59 0-1.054.26-1.392.777-.045.068-.12.252-.226.554-.106.302-.225.534-.358.696-.133.162-.328.243-.585.243a.76.76 0 0 1-.56-.223c-.149-.148-.223-.351-.223-.608 0-.31.07-.635.21-.972.139-.338.347-.645.624-.92a3.093 3.093 0 0 1 1.054-.665c.426-.169.924-.253 1.496-.253.69 0 1.277.108 1.764.324.315.144.592.343.83.595.24.252.425.544.558.875.133.33.2.674.2 1.03 0 .558-.14 1.066-.416 1.523-.277.457-.56.815-.848 1.074-.288.26-.771.666-1.45 1.22-.677.554-1.142.984-1.394 1.29a3.836 3.836 0 0 0-.331.44z"/></svg>'},{number:3,tag:"H3",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm11.61 4.919c.418 0 .778-.123 1.08-.368.301-.245.452-.597.452-1.055 0-.35-.12-.65-.36-.902-.241-.252-.566-.378-.974-.378-.277 0-.505.038-.684.116a1.1 1.1 0 0 0-.426.306 2.31 2.31 0 0 0-.296.49c-.093.2-.178.388-.255.565a.479.479 0 0 1-.245.225.965.965 0 0 1-.409.081.706.706 0 0 1-.5-.22c-.152-.148-.228-.345-.228-.59 0-.236.071-.484.214-.745a2.72 2.72 0 0 1 .627-.746 3.149 3.149 0 0 1 1.024-.568 4.122 4.122 0 0 1 1.368-.214c.44 0 .842.06 1.205.18.364.12.679.294.947.52.267.228.47.49.606.79.136.3.204.622.204.967 0 .454-.099.843-.296 1.168-.198.324-.48.64-.848.95.354.19.653.408.895.653.243.245.426.516.548.813.123.298.184.619.184.964 0 .413-.083.812-.248 1.198-.166.386-.41.73-.732 1.031a3.49 3.49 0 0 1-1.147.708c-.443.17-.932.256-1.467.256a3.512 3.512 0 0 1-1.464-.293 3.332 3.332 0 0 1-1.699-1.64c-.142-.314-.214-.573-.214-.777 0-.263.085-.475.255-.636a.89.89 0 0 1 .637-.242c.127 0 .25.037.367.112a.53.53 0 0 1 .232.27c.236.63.489 1.099.759 1.405.27.306.65.46 1.14.46a1.714 1.714 0 0 0 1.46-.824c.17-.273.256-.588.256-.947 0-.53-.145-.947-.436-1.249-.29-.302-.694-.453-1.212-.453-.09 0-.231.01-.422.028-.19.018-.313.027-.367.027-.25 0-.443-.062-.579-.187-.136-.125-.204-.299-.204-.521 0-.218.081-.394.245-.528.163-.134.406-.2.728-.2h.28z"/></svg>'},{number:4,tag:"H4",svg:'<svg width="20" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm13.003 10.09v-1.252h-3.38c-.427 0-.746-.097-.96-.29-.213-.193-.32-.456-.32-.788 0-.085.016-.171.048-.259.031-.088.078-.18.141-.276.063-.097.128-.19.195-.28.068-.09.15-.2.25-.33l3.568-4.774a5.44 5.44 0 0 1 .576-.683.763.763 0 0 1 .542-.212c.682 0 1.023.39 1.023 1.171v5.212h.29c.346 0 .623.047.832.142.208.094.313.3.313.62 0 .26-.086.45-.256.568-.17.12-.427.179-.768.179h-.41v1.252c0 .346-.077.603-.23.771-.152.168-.356.253-.612.253a.78.78 0 0 1-.61-.26c-.154-.173-.232-.427-.232-.764zm-2.895-2.76h2.895V4.91L12.26 8.823z"/></svg>'},{number:5,tag:"H5",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zm14.16 2.645h-3.234l-.388 2.205c.644-.344 1.239-.517 1.783-.517.436 0 .843.082 1.222.245.38.164.712.39.998.677.286.289.51.63.674 1.025.163.395.245.82.245 1.273 0 .658-.148 1.257-.443 1.797-.295.54-.72.97-1.276 1.287-.556.318-1.197.477-1.923.477-.813 0-1.472-.15-1.978-.45-.506-.3-.865-.643-1.076-1.031-.21-.388-.316-.727-.316-1.018 0-.177.073-.345.22-.504a.725.725 0 0 1 .556-.238c.381 0 .665.22.85.66.182.404.427.719.736.943.309.225.654.337 1.035.337.35 0 .656-.09.919-.272.263-.182.466-.431.61-.749.142-.318.214-.678.214-1.082 0-.436-.078-.808-.232-1.117a1.607 1.607 0 0 0-.62-.69 1.674 1.674 0 0 0-.864-.229c-.39 0-.67.048-.837.143-.168.095-.41.262-.725.5-.316.239-.576.358-.78.358a.843.843 0 0 1-.592-.242c-.173-.16-.259-.344-.259-.548 0-.022.025-.177.075-.463l.572-3.26c.063-.39.181-.675.354-.852.172-.177.454-.265.844-.265h3.595c.708 0 1.062.27 1.062.81a.711.711 0 0 1-.26.572c-.172.145-.426.218-.762.218z"/></svg>'},{number:6,tag:"H6",svg:'<svg width="18" height="14" xmlns="http://www.w3.org/2000/svg"><path d="M2.152 1.494V4.98h4.646V1.494c0-.498.097-.871.293-1.12A.934.934 0 0 1 7.863 0c.324 0 .586.123.786.37.2.246.301.62.301 1.124v9.588c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378c-.194-.251-.29-.626-.29-1.124V6.989H2.152v4.093c0 .503-.101.88-.304 1.128a.964.964 0 0 1-.783.374.928.928 0 0 1-.775-.378C.097 11.955 0 11.58 0 11.082V1.494C0 .996.095.623.286.374A.929.929 0 0 1 1.066 0c.323 0 .585.123.786.37.2.246.3.62.3 1.124zM12.53 7.058a3.093 3.093 0 0 1 1.004-.814 2.734 2.734 0 0 1 1.214-.264c.43 0 .827.08 1.19.24.365.161.684.39.957.686.274.296.485.645.635 1.048a3.6 3.6 0 0 1 .223 1.262c0 .637-.145 1.216-.437 1.736-.292.52-.699.926-1.221 1.218-.522.292-1.114.438-1.774.438-.76 0-1.416-.186-1.967-.557-.552-.37-.974-.919-1.265-1.645-.292-.726-.438-1.613-.438-2.662 0-.855.088-1.62.265-2.293.176-.674.43-1.233.76-1.676.33-.443.73-.778 1.2-1.004.47-.226 1.006-.339 1.608-.339.579 0 1.089.113 1.53.34.44.225.773.506.997.84.224.335.335.656.335.964 0 .185-.07.354-.21.505a.698.698 0 0 1-.536.227.874.874 0 0 1-.529-.18 1.039 1.039 0 0 1-.36-.498 1.42 1.42 0 0 0-.495-.655 1.3 1.3 0 0 0-.786-.247c-.24 0-.479.069-.716.207a1.863 1.863 0 0 0-.6.56c-.33.479-.525 1.333-.584 2.563zm1.832 4.213c.456 0 .834-.186 1.133-.56.298-.373.447-.862.447-1.468 0-.412-.07-.766-.21-1.062a1.584 1.584 0 0 0-.577-.678 1.47 1.47 0 0 0-.807-.234c-.28 0-.548.074-.804.224-.255.149-.461.365-.617.647a2.024 2.024 0 0 0-.234.994c0 .61.158 1.12.475 1.527.316.407.714.61 1.194.61z"/></svg>'}]}}]),o(t,e),r}();t.exports=r},function(t,e,n){var i=n(2);"string"==typeof i&&(i=[[t.i,i,""]]);n(4)(i,{hmr:!0,transform:void 0,insertInto:void 0}),i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,"/**\n * Plugin styles\n */\n.ce-header {\n  padding: 1em 0;\n  margin: 0;\n  margin-bottom: -0.9em;\n  line-height: 1.5em;\n  outline: none;\n}\n\n.ce-header p,\n.ce-header div{\n  padding: 0 !important;\n  margin: 0 !important;\n}\n\n/**\n * Styles for Plugin icon in Toolbar\n */\n.ce-header__icon {}\n\n.ce-header[contentEditable=true][data-placeholder]::before{\n  position: absolute;\n  content: attr(data-placeholder);\n  color: #707684;\n  font-weight: normal;\n  display: none;\n}\n\n.ce-header[contentEditable=true][data-placeholder]:empty::before {\n  display: block;\n}\n\n.ce-header[contentEditable=true][data-placeholder]:empty:focus::before {\n  display: none;\n}\n",""])},function(t,e){t.exports=function(n){var a=[];return a.toString=function(){return this.map(function(t){var e=function(t,e){var n,i=t[1]||"",r=t[3];if(!r)return i;if(e&&"function"==typeof btoa){var o=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[i].concat(a).concat([o]).join("\n")}return[i].join("\n")}(t,n);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},a.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(n[r]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&n[o[0]]||(e&&!o[2]?o[2]=e:e&&(o[2]="("+o[2]+") and ("+e+")"),a.push(o))}},a}},function(t,e,n){var i,r,l={},o=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),a=function(){var n={};return function(t){if("function"==typeof t)return t();if(void 0===n[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}}(),s=null,c=0,u=[],d=n(5);function h(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=l[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(y(i.parts[o],e))}else{var a=[];for(o=0;o<i.parts.length;o++)a.push(y(i.parts[o],e));l[i.id]={id:i.id,refs:1,parts:a}}}}function f(t,e){for(var n=[],i={},r=0;r<t.length;r++){var o=t[r],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function p(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=u[u.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=a(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,r)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);0<=e&&u.splice(e,1)}function m(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),g(e,t.attrs),p(t,e),e}function g(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function y(e,t){var n,i,r,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var a=c++;n=s=s||m(t),i=_.bind(null,n,a,!1),r=_.bind(null,n,a,!0)}else r=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(t),i=function(t,e,n){var i=n.css,r=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||o)&&(i=d(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),i=function(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),function(){v(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}t.exports=function(t,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=o()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=f(t,a);return h(s,a),function(t){for(var e=[],n=0;n<s.length;n++){var i=s[n];(r=l[i.id]).refs--,e.push(r)}for(t&&h(f(t,a),a),n=0;n<e.length;n++){var r;if(0===(r=e[n]).refs){for(var o=0;o<r.parts.length;o++)r.parts[o]();delete l[r.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function _(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=w(e,r);else{var o=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,o=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(n=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(t,e,n){"use strict";n.r(e),e.default='<svg width="10" height="14" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 14">\n  <path d="M7.6 8.15H2.25v4.525a1.125 1.125 0 0 1-2.25 0V1.125a1.125 1.125 0 1 1 2.25 0V5.9H7.6V1.125a1.125 1.125 0 0 1 2.25 0v11.55a1.125 1.125 0 0 1-2.25 0V8.15z"/>\n</svg>\n'}])},function(t,e,n){window,t.exports=function(n){var i={};function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=n,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=0)}([function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n(1).toString();var o=function(){function i(t){var e=t.data,n=(t.config,t.api);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this._elements={wrapper:null},this.settings=[{name:"unordered",title:"Unordered",icon:'<svg width="17" height="13" viewBox="0 0 17 13" xmlns="http://www.w3.org/2000/svg"> <path d="M5.625 4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0-4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0 9.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm-4.5-5a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0-4.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0 9.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25z"/></svg>',default:!1},{name:"ordered",title:"Ordered",icon:'<svg width="17" height="13" viewBox="0 0 17 13" xmlns="http://www.w3.org/2000/svg"><path d="M5.819 4.607h9.362a1.069 1.069 0 0 1 0 2.138H5.82a1.069 1.069 0 1 1 0-2.138zm0-4.607h9.362a1.069 1.069 0 0 1 0 2.138H5.82a1.069 1.069 0 1 1 0-2.138zm0 9.357h9.362a1.069 1.069 0 0 1 0 2.138H5.82a1.069 1.069 0 0 1 0-2.137zM1.468 4.155V1.33c-.554.404-.926.606-1.118.606a.338.338 0 0 1-.244-.104A.327.327 0 0 1 0 1.59c0-.107.035-.184.105-.234.07-.05.192-.114.369-.192.264-.118.475-.243.633-.373.158-.13.298-.276.42-.438a3.94 3.94 0 0 1 .238-.298C1.802.019 1.872 0 1.975 0c.115 0 .208.042.277.127.07.085.105.202.105.351v3.556c0 .416-.15.624-.448.624a.421.421 0 0 1-.32-.127c-.08-.085-.121-.21-.121-.376zm-.283 6.664h1.572c.156 0 .275.03.358.091a.294.294 0 0 1 .123.25.323.323 0 0 1-.098.238c-.065.065-.164.097-.296.097H.629a.494.494 0 0 1-.353-.119.372.372 0 0 1-.126-.28c0-.068.027-.16.081-.273a.977.977 0 0 1 .178-.268c.267-.264.507-.49.722-.678.215-.188.368-.312.46-.371.165-.11.302-.222.412-.334.109-.112.192-.226.25-.344a.786.786 0 0 0 .085-.345.6.6 0 0 0-.341-.553.75.75 0 0 0-.345-.08c-.263 0-.47.11-.62.329-.02.029-.054.107-.101.235a.966.966 0 0 1-.16.295c-.059.069-.145.103-.26.103a.348.348 0 0 1-.25-.094.34.34 0 0 1-.099-.258c0-.132.031-.27.093-.413.063-.143.155-.273.279-.39.123-.116.28-.21.47-.282.189-.072.411-.107.666-.107.307 0 .569.045.786.137a1.182 1.182 0 0 1 .618.623 1.18 1.18 0 0 1-.096 1.083 2.03 2.03 0 0 1-.378.457c-.128.11-.344.282-.646.517-.302.235-.509.417-.621.547a1.637 1.637 0 0 0-.148.187z"/></svg>',default:!0}],this._data={style:this.settings.find(function(t){return!0===t.default}).name,items:[]},this.api=n,this.data=e}return r(i,null,[{key:"enableLineBreaks",get:function(){return!0}},{key:"toolbox",get:function(){return{icon:'<svg width="17" height="13" viewBox="0 0 17 13" xmlns="http://www.w3.org/2000/svg"> <path d="M5.625 4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0-4.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm0 9.85h9.25a1.125 1.125 0 0 1 0 2.25h-9.25a1.125 1.125 0 0 1 0-2.25zm-4.5-5a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0-4.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25zm0 9.85a1.125 1.125 0 1 1 0 2.25 1.125 1.125 0 0 1 0-2.25z"/></svg>',title:"List"}}}]),r(i,[{key:"render",value:function(){var e=this,t="ordered"===this._data.style?this.CSS.wrapperOrdered:this.CSS.wrapperUnordered;return this._elements.wrapper=this._make("ul",[this.CSS.baseBlock,this.CSS.wrapper,t],{contentEditable:!0}),this._data.items.length?this._data.items.forEach(function(t){e._elements.wrapper.appendChild(e._make("li",e.CSS.item,{innerHTML:t}))}):this._elements.wrapper.appendChild(this._make("li",this.CSS.item)),this._elements.wrapper.addEventListener("keydown",function(t){switch(t.keyCode){case 13:e.getOutofList(t);break;case 8:e.backspace(t)}},!1),this._elements.wrapper}},{key:"save",value:function(){return this.data}},{key:"renderSettings",value:function(){var i=this,t=this._make("div",[this.CSS.settingsWrapper],{});return this.settings.forEach(function(e){var n=i._make("div",i.CSS.settingsButton,{innerHTML:e.icon});n.addEventListener("click",function(){i.toggleTune(e.name);var t=n.parentNode.querySelectorAll("."+i.CSS.settingsButton);Array.from(t).forEach(function(t){return t.classList.remove(i.CSS.settingsButtonActive)}),n.classList.toggle(i.CSS.settingsButtonActive)}),i._data.style===e.name&&n.classList.add(i.CSS.settingsButtonActive),t.appendChild(n)}),t}},{key:"onPaste",value:function(t){var e=t.detail.data;this.data=this.pasteHandler(e)}},{key:"toggleTune",value:function(t){this._elements.wrapper.classList.toggle(this.CSS.wrapperOrdered,"ordered"===t),this._elements.wrapper.classList.toggle(this.CSS.wrapperUnordered,"unordered"===t),this._data.style=t}},{key:"_make",value:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=document.createElement(t);for(var o in Array.isArray(n)?(e=r.classList).add.apply(e,function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(n)):n&&r.classList.add(n),i)r[o]=i[o];return r}},{key:"getOutofList",value:function(t){var e=this._elements.wrapper.querySelectorAll("."+this.CSS.item);if(!(e.length<2)){var n=e[e.length-1],i=this.currentItem;i!==n||n.textContent.trim().length||(i.parentElement.removeChild(i),this.api.blocks.insertNewBlock(),t.preventDefault(),t.stopPropagation())}}},{key:"backspace",value:function(t){var e=this._elements.wrapper.querySelectorAll("."+this.CSS.item),n=e[0];n&&e.length<2&&!n.innerHTML.replace("<br>"," ").trim()&&t.preventDefault()}},{key:"selectItem",value:function(t){t.preventDefault();var e=window.getSelection(),n=e.anchorNode.parentNode.closest("."+this.CSS.item),i=new Range;i.selectNodeContents(n),e.removeAllRanges(),e.addRange(i)}},{key:"pasteHandler",value:function(t){var e,n=t.tagName;switch(n){case"OL":e="ordered";break;case"UL":case"LI":e="unordered"}var i={type:e,items:[]};if("LI"===n)i.items=[t.innerHTML];else{var r=Array.from(t.querySelectorAll("LI"));i.items=r.map(function(t){return t.innerHTML}).filter(function(t){return!!t.trim()})}return i}},{key:"CSS",get:function(){return{baseBlock:this.api.styles.block,wrapper:"cdx-list",wrapperOrdered:"cdx-list--ordered",wrapperUnordered:"cdx-list--unordered",item:"cdx-list__item",settingsWrapper:"cdx-list-settings",settingsButton:this.api.styles.settingsButton,settingsButtonActive:this.api.styles.settingsButtonActive}}},{key:"data",set:function(t){t=t||{},this._data.style=t.style||this.settings.find(function(t){return!0===t.default}).name,this._data.items=t.items||[];var e=this._elements.wrapper;e&&e.parentNode.replaceChild(this.render(),e)},get:function(){this._data.items=[];for(var t=this._elements.wrapper.querySelectorAll(".".concat(this.CSS.item)),e=0;e<t.length;e++)t[e].innerHTML.replace("<br>"," ").trim()&&this._data.items.push(t[e].innerHTML);return this._data}},{key:"currentItem",get:function(){var t=window.getSelection().anchorNode;return t.nodeType!==Node.ELEMENT_NODE&&(t=t.parentNode),t.closest(".".concat(this.CSS.item))}}],[{key:"conversionConfig",get:function(){return{export:function(t){return t.items.join(". ")},import:function(t){return{items:[t],style:"unordered"}}}}},{key:"sanitize",get:function(){return{style:{},items:{br:!0}}}},{key:"pasteConfig",get:function(){return{tags:["OL","UL","LI"]}}}]),i}();t.exports=o},function(t,e,n){var i=n(2);"string"==typeof i&&(i=[[t.i,i,""]]);n(4)(i,{hmr:!0,transform:void 0,insertInto:void 0}),i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".cdx-list {\n    margin: 0;\n    padding-left: 40px;\n    outline: none;\n}\n\n    .cdx-list__item {\n        padding: 5.5px 0 5.5px 3px;\n        line-height: 1.6em;\n    }\n\n    .cdx-list--unordered {\n        list-style: disc;\n    }\n\n    .cdx-list--ordered {\n        list-style: decimal;\n    }\n\n    .cdx-list-settings {\n        display: flex;\n    }\n\n    .cdx-list-settings .cdx-settings-button {\n            width: 50%;\n        }\n",""])},function(t,e){t.exports=function(n){var a=[];return a.toString=function(){return this.map(function(t){var e=function(t,e){var n,i=t[1]||"",r=t[3];if(!r)return i;if(e&&"function"==typeof btoa){var o=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[i].concat(a).concat([o]).join("\n")}return[i].join("\n")}(t,n);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},a.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(n[r]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&n[o[0]]||(e&&!o[2]?o[2]=e:e&&(o[2]="("+o[2]+") and ("+e+")"),a.push(o))}},a}},function(t,e,n){var i,r,l={},o=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),a=function(){var n={};return function(t){if("function"==typeof t)return t();if(void 0===n[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}}(),s=null,c=0,u=[],d=n(5);function h(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=l[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(y(i.parts[o],e))}else{var a=[];for(o=0;o<i.parts.length;o++)a.push(y(i.parts[o],e));l[i.id]={id:i.id,refs:1,parts:a}}}}function f(t,e){for(var n=[],i={},r=0;r<t.length;r++){var o=t[r],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function p(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=u[u.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=a(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,r)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);0<=e&&u.splice(e,1)}function m(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),g(e,t.attrs),p(t,e),e}function g(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function y(e,t){var n,i,r,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var a=c++;n=s=s||m(t),i=_.bind(null,n,a,!1),r=_.bind(null,n,a,!0)}else r=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(t),i=function(t,e,n){var i=n.css,r=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||o)&&(i=d(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),i=function(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),function(){v(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}t.exports=function(t,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=o()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=f(t,a);return h(s,a),function(t){for(var e=[],n=0;n<s.length;n++){var i=s[n];(r=l[i.id]).refs--,e.push(r)}for(t&&h(f(t,a),a),n=0;n<e.length;n++){var r;if(0===(r=e[n]).refs){for(var o=0;o<r.parts.length;o++)r.parts[o]();delete l[r.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function _(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=w(e,r);else{var o=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,o=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(n=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}}])},function(t,e,n){window,t.exports=function(n){var i={};function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=n,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=0)}([function(t,e,i){function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}i(1).toString();var n=function(){function n(t){var e=t.api;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.api=e,this.button=null,this.tag="MARK",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}return o(n,null,[{key:"CSS",get:function(){return"cdx-marker"}}]),o(n,[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}},{key:"surround",value:function(t){if(t){var e=this.api.selection.findParentTag(this.tag,n.CSS);e?this.unwrap(e):this.wrap(t)}}},{key:"wrap",value:function(t){var e=document.createElement(this.tag);e.classList.add(n.CSS),e.appendChild(t.extractContents()),t.insertNode(e),this.api.selection.expandToTag(e)}},{key:"unwrap",value:function(t){this.api.selection.expandToTag(t);var e=window.getSelection(),n=e.getRangeAt(0),i=n.extractContents();t.parentNode.removeChild(t),n.insertNode(i),e.removeAllRanges(),e.addRange(n)}},{key:"checkState",value:function(){var t=this.api.selection.findParentTag(this.tag,n.CSS);this.button.classList.toggle(this.iconClasses.active,!!t)}},{key:"toolboxIcon",get:function(){return i(6).default}}],[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{mark:{class:n.CSS}}}}]),n}();t.exports=n},function(t,e,n){var i=n(2);"string"==typeof i&&(i=[[t.i,i,""]]);n(4)(i,{hmr:!0,transform:void 0,insertInto:void 0}),i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".cdx-marker {\n  background: rgba(245,235,111,0.29);\n  padding: 3px 0;\n}",""])},function(t,e){t.exports=function(n){var a=[];return a.toString=function(){return this.map(function(t){var e=function(t,e){var n,i=t[1]||"",r=t[3];if(!r)return i;if(e&&"function"==typeof btoa){var o=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[i].concat(a).concat([o]).join("\n")}return[i].join("\n")}(t,n);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},a.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(n[r]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&n[o[0]]||(e&&!o[2]?o[2]=e:e&&(o[2]="("+o[2]+") and ("+e+")"),a.push(o))}},a}},function(t,e,n){var i,r,l={},o=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),a=function(){var n={};return function(t){if("function"==typeof t)return t();if(void 0===n[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}}(),s=null,c=0,u=[],d=n(5);function h(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=l[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(y(i.parts[o],e))}else{var a=[];for(o=0;o<i.parts.length;o++)a.push(y(i.parts[o],e));l[i.id]={id:i.id,refs:1,parts:a}}}}function f(t,e){for(var n=[],i={},r=0;r<t.length;r++){var o=t[r],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function p(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=u[u.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=a(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,r)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);0<=e&&u.splice(e,1)}function m(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),g(e,t.attrs),p(t,e),e}function g(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function y(e,t){var n,i,r,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var a=c++;n=s=s||m(t),i=_.bind(null,n,a,!1),r=_.bind(null,n,a,!0)}else r=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(t),i=function(t,e,n){var i=n.css,r=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||o)&&(i=d(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),i=function(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),function(){v(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}t.exports=function(t,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=o()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=f(t,a);return h(s,a),function(t){for(var e=[],n=0;n<s.length;n++){var i=s[n];(r=l[i.id]).refs--,e.push(r)}for(t&&h(f(t,a),a),n=0;n<e.length;n++){var r;if(0===(r=e[n]).refs){for(var o=0;o<r.parts.length;o++)r.parts[o]();delete l[r.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function _(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=w(e,r);else{var o=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,o=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(n=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(t,e,n){"use strict";n.r(e),e.default='<svg xmlns="http://www.w3.org/2000/svg" viewBox="1 2 13 12" width="13" height="12"><path d="M8.367 9.633L10.7 10.98l-.624 1.135-.787-.025-.78 1.35H6.94l1.193-2.066-.407-.62.642-1.121zm.436-.763l2.899-5.061a1.278 1.278 0 011.746-.472c.617.355.835 1.138.492 1.76l-2.815 5.114-2.322-1.34zM2.62 11.644H5.39a.899.899 0 110 1.798H2.619a.899.899 0 010-1.798z"/></svg>\n'}])},function(t,e,n){window,t.exports=function(n){var i={};function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=n,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=0)}([function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n(1).toString();
/**
 * Base Paragraph Block for the Editor.js.
 * Represents simple paragraph
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */
var r=function(){function r(t){var e=t.data,n=t.config,i=t.api;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.api=i,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.onKeyUp=this.onKeyUp.bind(this),this._placeholder=n.placeholder?n.placeholder:r.DEFAULT_PLACEHOLDER,this._data={},this._element=this.drawView(),this.data=e}return o(r,null,[{key:"DEFAULT_PLACEHOLDER",get:function(){return""}}]),o(r,[{key:"onKeyUp",value:function(t){"Backspace"!==t.code&&"Delete"!==t.code||""===this._element.textContent&&(this._element.innerHTML="")}},{key:"drawView",value:function(){var t=document.createElement("DIV");return t.classList.add(this._CSS.wrapper,this._CSS.block),t.contentEditable=!0,t.dataset.placeholder=this._placeholder,t.addEventListener("keyup",this.onKeyUp),t}},{key:"render",value:function(){return this._element}},{key:"merge",value:function(t){var e={text:this.data.text+t.text};this.data=e}},{key:"validate",value:function(t){return""!==t.text.trim()}},{key:"save",value:function(t){return{text:t.innerHTML}}},{key:"onPaste",value:function(t){var e={text:t.detail.data.innerHTML};this.data=e}},{key:"data",get:function(){var t=this._element.innerHTML;return this._data.text=t,this._data},set:function(t){this._data=t||{},this._element.innerHTML=this._data.text||""}}],[{key:"conversionConfig",get:function(){return{export:"text",import:"text"}}},{key:"sanitize",get:function(){return{text:{br:!0}}}},{key:"pasteConfig",get:function(){return{tags:["P"]}}},{key:"toolbox",get:function(){return{icon:n(6).default,title:"Text"}}}]),r}();t.exports=r},function(t,e,n){var i=n(2);"string"==typeof i&&(i=[[t.i,i,""]]);n(4)(i,{hmr:!0,transform:void 0,insertInto:void 0}),i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".ce-paragraph {\n    line-height: 1.6em;\n    outline: none;\n}\n\n.ce-paragraph[data-placeholder]:empty::before{\n  content: attr(data-placeholder);\n  color: #707684;\n  font-weight: normal;\n  opacity: 0;\n}\n\n/** Show placeholder at the first paragraph if Editor is empty */\n.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {\n  opacity: 1;\n}\n\n.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before,\n.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus::before {\n  opacity: 0;\n}\n\n.ce-paragraph p:first-of-type{\n    margin-top: 0;\n}\n\n.ce-paragraph p:last-of-type{\n    margin-bottom: 0;\n}\n",""])},function(t,e){t.exports=function(n){var a=[];return a.toString=function(){return this.map(function(t){var e=function(t,e){var n,i=t[1]||"",r=t[3];if(!r)return i;if(e&&"function"==typeof btoa){var o=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[i].concat(a).concat([o]).join("\n")}return[i].join("\n")}(t,n);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},a.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(n[r]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&n[o[0]]||(e&&!o[2]?o[2]=e:e&&(o[2]="("+o[2]+") and ("+e+")"),a.push(o))}},a}},function(t,e,n){var i,r,l={},o=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),a=function(){var n={};return function(t){if("function"==typeof t)return t();if(void 0===n[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}}(),s=null,c=0,u=[],d=n(5);function h(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=l[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(y(i.parts[o],e))}else{var a=[];for(o=0;o<i.parts.length;o++)a.push(y(i.parts[o],e));l[i.id]={id:i.id,refs:1,parts:a}}}}function f(t,e){for(var n=[],i={},r=0;r<t.length;r++){var o=t[r],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function p(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=u[u.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=a(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,r)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);0<=e&&u.splice(e,1)}function m(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),g(e,t.attrs),p(t,e),e}function g(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function y(e,t){var n,i,r,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var a=c++;n=s=s||m(t),i=_.bind(null,n,a,!1),r=_.bind(null,n,a,!0)}else r=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(t),i=function(t,e,n){var i=n.css,r=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||o)&&(i=d(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),i=function(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),function(){v(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}t.exports=function(t,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=o()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=f(t,a);return h(s,a),function(t){for(var e=[],n=0;n<s.length;n++){var i=s[n];(r=l[i.id]).refs--,e.push(r)}for(t&&h(f(t,a),a),n=0;n<e.length;n++){var r;if(0===(r=e[n]).refs){for(var o=0;o<r.parts.length;o++)r.parts[o]();delete l[r.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function _(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=w(e,r);else{var o=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,o=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(n=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(t,e,n){"use strict";n.r(e),e.default='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.2 -0.3 9 11.4" width="12" height="14">\n  <path d="M0 2.77V.92A1 1 0 01.2.28C.35.1.56 0 .83 0h7.66c.28.01.48.1.63.28.14.17.21.38.21.64v1.85c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26a1 1 0 01-.21-.66V1.69H5.6v7.58h.5c.25 0 .45.08.6.23.17.16.25.35.25.6s-.08.45-.24.6a.87.87 0 01-.62.22H3.21a.87.87 0 01-.61-.22.78.78 0 01-.24-.6c0-.25.08-.44.24-.6a.85.85 0 01.61-.23h.5V1.7H1.73v1.08c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26A1 1 0 010 2.77z"/>\n</svg>\n'}])},function(t,e,n){window,t.exports=function(n){var i={};function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=n,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=0)}([function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n(1).toString(),n(6);var o=function(){function i(t){var e=t.data,n=(t.config,t.api);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this._elements={wrapper:null,items:[]},this._data={items:[]},this.api=n,this.data=e}return r(i,null,[{key:"enableLineBreaks",get:function(){return!0}},{key:"toolbox",get:function(){return{icon:'<svg width="15" height="15" viewBox="0 0 15 15" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 15a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15zm0-2.394a5.106 5.106 0 1 0 0-10.212 5.106 5.106 0 0 0 0 10.212zm-.675-4.665l2.708-2.708 1.392 1.392-2.708 2.708-1.392 1.391-2.971-2.971L5.245 6.36l1.58 1.58z"/></svg>',title:"Checklist"}}}]),r(i,[{key:"render",value:function(){var n=this;if(this._elements.wrapper=this._make("div",[this.CSS.baseBlock,this.CSS.wrapper]),this._data.items.length)this._data.items.forEach(function(t){var e=n.createChecklistItem(t);n._elements.items.push(e),n._elements.wrapper.appendChild(e)});else{var t=this.createChecklistItem();this._elements.items.push(t),this._elements.wrapper.appendChild(t)}return this._elements.wrapper.addEventListener("keydown",function(t){switch(t.keyCode){case 13:n.appendNewElement(t);break;case 8:n.backspace(t)}},!1),this._elements.wrapper.addEventListener("click",function(t){n.toggleCheckbox(t)}),this._elements.wrapper}},{key:"validate",value:function(t){return!!t.items.length}},{key:"toggleCheckbox",value:function(t){var e=t.target.closest(".".concat(this.CSS.item));e.querySelector(".".concat(this.CSS.checkbox)).contains(t.target)&&e.classList.toggle(this.CSS.itemChecked)}},{key:"createChecklistItem",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this._make("div",this.CSS.item),n=this._make("span",this.CSS.checkbox),i=this._make("div",this.CSS.textField,{innerHTML:t.text?t.text:"",contentEditable:!0});return t.checked&&e.classList.add(this.CSS.itemChecked),e.appendChild(n),e.appendChild(i),e}},{key:"appendNewElement",value:function(t){t.preventDefault();var e=window.getSelection().anchorNode,n=this._elements.items[this._elements.items.length-1].querySelector(".".concat(this.CSS.textField)),i=n.innerHTML.replace("<br>"," ").trim();if(e===n&&!i)return this.api.blocks.insertNewBlock(),void t.stopPropagation();var r=this.createChecklistItem(),o=e.parentNode.closest(".".concat(this.CSS.item));this._elements.wrapper.insertBefore(r,o.nextSibling);var a=this._elements.items.indexOf(o)+1;this._elements.items.splice(a,0,r),this.moveCaretToEnd(r.querySelector(".".concat(this.CSS.textField)))}},{key:"backspace",value:function(t){var e=t.target.closest(".".concat(this.CSS.item)),n=this._elements.items.indexOf(e),i=e.querySelector(".".concat(this.CSS.textField)).innerHTML.replace("<br>"," ").trim();this._elements.items[0].querySelector(".".concat(this.CSS.textField)).innerHTML.replace("<br>"," ").trim()&&n&&!i&&(t.preventDefault(),e.remove(),this._elements.items.splice(n,1),"undefined"!==this._elements.items[n-1]&&this.moveCaretToEnd(this._elements.items[n-1].querySelector(".".concat(this.CSS.textField))))}},{key:"save",value:function(){return this.data}},{key:"_make",value:function(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=document.createElement(t);for(var o in Array.isArray(n)?(e=r.classList).add.apply(e,function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(n)):n&&r.classList.add(n),i)r[o]=i[o];return r}},{key:"moveCaretToEnd",value:function(t){var e=document.createRange(),n=window.getSelection();e.selectNodeContents(t),e.collapse(!1),n.removeAllRanges(),n.addRange(e)}},{key:"CSS",get:function(){return{baseBlock:this.api.styles.block,wrapper:"cdx-checklist",item:"cdx-checklist__item",itemChecked:"cdx-checklist__item--checked",checkbox:"cdx-checklist__item-checkbox",textField:"cdx-checklist__item-text"}}},{key:"data",set:function(t){this._data.items=t.items||[];var e=this._elements.wrapper;e&&e.parentNode.replaceChild(this.render(),e)},get:function(){this._data.items=[];for(var t=0;t<this._elements.items.length;t++){var e=this._elements.items[t].querySelector(".".concat(this.CSS.textField)).innerHTML.replace("<br>"," ").trim();e&&this._data.items.push({text:e,checked:this._elements.items[t].classList.contains(this.CSS.itemChecked)})}return this._data}}]),i}();t.exports=o},function(t,e,n){var i=n(2);"string"==typeof i&&(i=[[t.i,i,""]]);n(4)(i,{hmr:!0,transform:void 0,insertInto:void 0}),i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".cdx-checklist__item {\n        display: flex;\n        padding: 0 10px;\n        box-sizing: content-box;\n    }\n\n        .cdx-checklist__item-text {\n            outline: none;\n            flex-grow: 1;\n            padding: 10px 0;\n        }\n\n        .cdx-checklist__item-checkbox {\n            display: inline-block;\n            flex-shrink: 0;\n            position: relative;\n            width: 20px;\n            height: 20px;\n            margin: 10px 10px 10px 0;\n            border-radius: 50%;\n            border: 1px solid #d0d0d0;\n            background: #fff;\n            cursor: pointer;\n            user-select: none;\n        }\n\n        .cdx-checklist__item-checkbox:hover {\n                border-color: #b5b5b5;\n            }\n\n        .cdx-checklist__item-checkbox::after {\n                position: absolute;\n                top: 5px;\n                left: 5px;\n                width: 8px;\n                height: 5px;\n                border: 2px solid #fcfff4;\n                border-top: none;\n                border-right: none;\n                background: transparent;\n                content: '';\n                opacity: 0;\n                transform: rotate(-45deg);\n            }\n\n        .cdx-checklist__item--checked .cdx-checklist__item-checkbox {\n                background: #388ae5;\n                border-color: #388ae5;\n            }\n\n        .cdx-checklist__item--checked .cdx-checklist__item-checkbox:hover {\n                    background: #307cd1;\n                }\n\n        .cdx-checklist__item--checked .cdx-checklist__item-checkbox::after {\n                    opacity: 1;\n                }\n",""])},function(t,e){t.exports=function(n){var a=[];return a.toString=function(){return this.map(function(t){var e=function(t,e){var n,i=t[1]||"",r=t[3];if(!r)return i;if(e&&"function"==typeof btoa){var o=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[i].concat(a).concat([o]).join("\n")}return[i].join("\n")}(t,n);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},a.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(n[r]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&n[o[0]]||(e&&!o[2]?o[2]=e:e&&(o[2]="("+o[2]+") and ("+e+")"),a.push(o))}},a}},function(t,e,n){var i,r,l={},o=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),a=function(){var n={};return function(t){if("function"==typeof t)return t();if(void 0===n[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}}(),s=null,c=0,u=[],d=n(5);function h(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=l[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(y(i.parts[o],e))}else{var a=[];for(o=0;o<i.parts.length;o++)a.push(y(i.parts[o],e));l[i.id]={id:i.id,refs:1,parts:a}}}}function f(t,e){for(var n=[],i={},r=0;r<t.length;r++){var o=t[r],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function p(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=u[u.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=a(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,r)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);0<=e&&u.splice(e,1)}function m(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),g(e,t.attrs),p(t,e),e}function g(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function y(e,t){var n,i,r,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var a=c++;n=s=s||m(t),i=_.bind(null,n,a,!1),r=_.bind(null,n,a,!0)}else r=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(t),i=function(t,e,n){var i=n.css,r=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||o)&&(i=d(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),i=function(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),function(){v(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}t.exports=function(t,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=o()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=f(t,a);return h(s,a),function(t){for(var e=[],n=0;n<s.length;n++){var i=s[n];(r=l[i.id]).refs--,e.push(r)}for(t&&h(f(t,a),a),n=0;n<e.length;n++){var r;if(0===(r=e[n]).refs){for(var o=0;o<r.parts.length;o++)r.parts[o]();delete l[r.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function _(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=w(e,r);else{var o=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,o=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(n=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(t,e,n){"use strict";Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null})}])},function(t,e,n){window,t.exports=function(n){var i={};function r(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}return r.m=n,r.c=i,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=0)}([function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n(1).toString();
/**
 * Delimiter Block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 * @version 2.0.0
 */
var o=function(){function i(t){var e=t.data,n=(t.config,t.api);!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.api=n,this._CSS={block:this.api.styles.block,wrapper:"ce-delimiter"},this._data={},this._element=this.drawView(),this.data=e}return r(i,null,[{key:"contentless",get:function(){return!0}}]),r(i,[{key:"drawView",value:function(){var t=document.createElement("DIV");return t.classList.add(this._CSS.wrapper,this._CSS.block),t}},{key:"render",value:function(){return this._element}},{key:"save",value:function(t){return{}}}],[{key:"toolbox",get:function(){return{icon:'<svg width="19" height="4" viewBox="0 0 19 4" xmlns="http://www.w3.org/2000/svg"><path d="M1.25 0H7a1.25 1.25 0 1 1 0 2.5H1.25a1.25 1.25 0 1 1 0-2.5zM11 0h5.75a1.25 1.25 0 0 1 0 2.5H11A1.25 1.25 0 0 1 11 0z"/></svg>',title:"Delimiter"}}}]),i}();t.exports=o},function(t,e,n){var i=n(2);"string"==typeof i&&(i=[[t.i,i,""]]);n(4)(i,{hmr:!0,transform:void 0,insertInto:void 0}),i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,'.ce-delimiter {\n    line-height: 1.6em;\n    width: 100%;\n    text-align: center;\n}\n\n.ce-delimiter:before {\n    display: inline-block;\n    content: "***";\n    font-size: 30px;\n    line-height: 65px;\n    height: 30px;\n    letter-spacing: 0.2em;\n}',""])},function(t,e){t.exports=function(n){var a=[];return a.toString=function(){return this.map(function(t){var e=function(t,e){var n,i=t[1]||"",r=t[3];if(!r)return i;if(e&&"function"==typeof btoa){var o=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"});return[i].concat(a).concat([o]).join("\n")}return[i].join("\n")}(t,n);return t[2]?"@media "+t[2]+"{"+e+"}":e}).join("")},a.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(n[r]=!0)}for(i=0;i<t.length;i++){var o=t[i];"number"==typeof o[0]&&n[o[0]]||(e&&!o[2]?o[2]=e:e&&(o[2]="("+o[2]+") and ("+e+")"),a.push(o))}},a}},function(t,e,n){var i,r,l={},o=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),a=function(){var n={};return function(t){if("function"==typeof t)return t();if(void 0===n[t]){var e=function(t){return document.querySelector(t)}.call(this,t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}}(),s=null,c=0,u=[],d=n(5);function h(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=l[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(y(i.parts[o],e))}else{var a=[];for(o=0;o<i.parts.length;o++)a.push(y(i.parts[o],e));l[i.id]={id:i.id,refs:1,parts:a}}}}function f(t,e){for(var n=[],i={},r=0;r<t.length;r++){var o=t[r],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function p(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=u[u.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),u.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=a(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,r)}}function v(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=u.indexOf(t);0<=e&&u.splice(e,1)}function m(t){var e=document.createElement("style");return void 0===t.attrs.type&&(t.attrs.type="text/css"),g(e,t.attrs),p(t,e),e}function g(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function y(e,t){var n,i,r,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var a=c++;n=s=s||m(t),i=_.bind(null,n,a,!1),r=_.bind(null,n,a,!0)}else r=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),p(t,e),e}(t),i=function(t,e,n){var i=n.css,r=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||o)&&(i=d(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),function(){v(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(t),i=function(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),function(){v(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}t.exports=function(t,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=o()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=f(t,a);return h(s,a),function(t){for(var e=[],n=0;n<s.length;n++){var i=s[n];(r=l[i.id]).refs--,e.push(r)}for(t&&h(f(t,a),a),n=0;n<e.length;n++){var r;if(0===(r=e[n]).refs){for(var o=0;o<r.parts.length;o++)r.parts[o]();delete l[r.id]}}}};var b,w=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function _(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=w(e,r);else{var o=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,o=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t:(n=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}}])},function(t,e,n){"use strict";n.r(e),n.d(e,"init",function(){return a});var i=n(0),l=n.n(i),r=n(1),o=n.n(r),g=n(10);function a(){return s.apply(this,arguments)}function s(){return(s=o()(l.a.mark(function t(){var c,e,o,a,s,u,d,h,f,p,v,n,m,i,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=function(t){return(t+="").length<2?t.length<1?"00":"0"+t:t},(e=document.getElementById("titleSwitch")).onchange=function(){e.checked?(document.querySelectorAll(".stat-title").forEach(function(t){return t.classList.add("d-hide")}),document.querySelectorAll(".x-axis").forEach(function(t){return t.classList.add("d-hide")}),document.querySelectorAll(".y-axis").forEach(function(t){return t.classList.add("d-hide")}),document.querySelectorAll(".linesDot").forEach(function(t){return t.classList.add("d-hide")})):(document.querySelectorAll(".stat-title").forEach(function(t){return t.classList.remove("d-hide")}),document.querySelectorAll(".x-axis").forEach(function(t){return t.classList.remove("d-hide")}),document.querySelectorAll(".y-axis").forEach(function(t){return t.classList.remove("d-hide")}),document.querySelectorAll(".linesDot").forEach(function(t){return t.classList.remove("d-hide")}))},(o=document.getElementById("spacesSwitch")).onchange=function(){return i()},(a=document.getElementById("sevenrSwitch")).onchange=function(){return i()},(s=document.getElementById("numShowSwitch")).onchange=function(){return i()},window.onscroll=function(){70<pageYOffset?(document.getElementById("weeks_calendar").style.position="fixed",document.querySelector("#weeks_calendar > .week-body").classList.add("calendar-fixed")):(document.getElementById("weeks_calendar").style.position="unset",document.querySelector("#weeks_calendar > .week-body").classList.remove("calendar-fixed"))},(u=document.querySelectorAll("#periods > .chip")).forEach(function(t,e,n){return t.onclick=function(){n.forEach(function(t){return t.classList.remove("active")}),t.classList.add("active"),i()}}),d=(new Date).getFullYear(),f=document.querySelectorAll(".my_dataviz"),p=document.getElementById("weeks_calendar"),v={statHeight:100},n=[],f.forEach(function(t){n.push(fetch("/office/stats",{method:"POST",body:JSON.stringify({find:"byid",id:Number(t.dataset.sid),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t[0]}))}),t.next=20,Promise.all(n).then(function(t){return t});case 20:m=t.sent,(i=function r(){var n,l;u.forEach(function(t){t.classList.contains("active")&&(n=t.dataset.name)}),"Y"!==n&&Number(n)<24?2==Number(n)?document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-12")||t.classList.remove("col-2","col-xxl-3")||t.classList.remove("col-6"),t.classList.add("col-4")}):Number(n)<12?document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-12")||t.classList.remove("col-6")||t.classList.remove("col-4"),t.classList.add("col-2","col-xxl-3")}):document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-12")||t.classList.remove("col-2","col-xxl-3")||t.classList.remove("col-4"),t.classList.add("col-6")}):document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-2","col-xxl-3")||t.classList.remove("col-6")||t.classList.remove("col-4"),t.classList.add("col-12")}),v.statHeight=12<=n||"Y"===n?500:250,o.checked?v.spaces=!0:v.spaces=!1,s.checked?v.numShow=!0:v.numShow=!1,v.quota=a.checked?1:0;var i=(new Date).getDay()||7;m.forEach(function(o,t){if(l=i-o.last_day<=0?new Date((new Date).setDate((new Date).getDate()+-(i-o.last_day))):new Date((new Date).setDate((new Date).getDate()+(7-(i-o.last_day)))),p.querySelector(".week-header").innerHTML=d,p.querySelectorAll(".weeks > button").length<=0)for(var a=new Date(d,0,1),s=1,e=function(){var e="".concat(c(a.getDate()),".").concat(c(a.getMonth()+1),".").concat(a.getFullYear()),t=e.split("."),n=new Date(new Date(a).setDate(a.getDate()-6));if(a.getDay()==o.last_day){n="".concat(c(n.getDate()),".").concat(c(n.getMonth()+1),".").concat(n.getFullYear());var i=document.createElement("button");if(i.dataset.date=e,i.dataset.tooltip="с "+n,i.innerText=s,i.classList.add("btn","btn-sm","btn-link","tooltip","tooltip-top"),p.querySelector(".weeks").insertAdjacentElement("beforeend",i),Number(t[2])==(new Date).getFullYear()&&Number(t[1])==Number(c((new Date).getMonth()+1))&&0<=Number(t[0])-Number(c((new Date).getDate()))&&Number(t[0])-Number(c((new Date).getDate()))<7){var r=Array.from(p.querySelectorAll(".weeks > button")).find(function(t){return t.dataset.date==e});r.classList.remove("btn-link"),r.classList.add("btn-error")}s++}a=new Date(a.setDate(a.getDate()+1))};a.getFullYear()==d;)e();p.querySelectorAll(".weeks > button").forEach(function(n,t,i){return n.onclick=function(t){i.forEach(function(t){t.classList.contains("btn-error")&&(t.classList.remove("btn-error"),t.classList.add("btn-link"))}),n.classList.remove("btn-link"),n.classList.add("btn-error");var e=n.dataset.date.split(".");l=new Date(e[2],e[1]-1,e[0],(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds()),h=new Date(new Date(l).setDate(l.getDate()-6)),r()}}),h=h||new Date(new Date(l).setDate(l.getDate()-13)),f[t].parentElement.parentElement.querySelector(".card-header > .card-title").innerText=o.title,new g.a(f[t].id,o.stat_data,o.reverted,o.last_day,d,n,h,v).drawStat()})})(),(r=document.getElementById("calendarSwitch")).onchange=function(){r.checked?document.getElementById("weeks_calendar").classList.remove("d-hide"):document.getElementById("weeks_calendar").classList.add("d-hide")},document.getElementById("year_left").onclick=function(){p.querySelector(".week-body .weeks").innerHTML="",d--,i()},document.getElementById("year_right").onclick=function(){p.querySelector(".week-body .weeks").innerHTML="",d++,i()},window.onresize=i;case 28:case"end":return t.stop()}},t)}))).apply(this,arguments)}},function(t,e,n){"use strict";n.r(e),n.d(e,"init",function(){return a});var i=n(0),l=n.n(i),r=n(1),o=n.n(r),m=n(10);function a(){return s.apply(this,arguments)}function s(){return(s=o()(l.a.mark(function t(){var c,e,o,a,s,u,d,h,f,p,n,v,i,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=function(t){return(t+="").length<2?t.length<1?"00":"0"+t:t},(e=document.getElementById("titleSwitch")).onchange=function(){e.checked?(document.querySelectorAll(".stat-title").forEach(function(t){return t.classList.add("d-hide")}),document.querySelectorAll(".x-axis").forEach(function(t){return t.classList.add("d-hide")}),document.querySelectorAll(".y-axis").forEach(function(t){return t.classList.add("d-hide")}),document.querySelectorAll(".linesDot").forEach(function(t){return t.classList.add("d-hide")})):(document.querySelectorAll(".stat-title").forEach(function(t){return t.classList.remove("d-hide")}),document.querySelectorAll(".x-axis").forEach(function(t){return t.classList.remove("d-hide")}),document.querySelectorAll(".y-axis").forEach(function(t){return t.classList.remove("d-hide")}),document.querySelectorAll(".linesDot").forEach(function(t){return t.classList.remove("d-hide")}))},(o=document.getElementById("spacesSwitch")).onchange=function(){return i()},(a=document.getElementById("numShowSwitch")).onchange=function(){return i()},window.onscroll=function(){70<pageYOffset?(document.getElementById("weeks_calendar").style.position="fixed",document.querySelector("#weeks_calendar > .week-body").classList.add("calendar-fixed")):(document.getElementById("weeks_calendar").style.position="unset",document.querySelector("#weeks_calendar > .week-body").classList.remove("calendar-fixed"))},(s=document.querySelectorAll("#periods > .chip")).forEach(function(t,e,n){return t.onclick=function(){n.forEach(function(t){return t.classList.remove("active")}),t.classList.add("active"),i()}}),u=(new Date).getFullYear(),h=document.querySelectorAll(".my_dataviz"),f=document.getElementById("weeks_calendar"),p={statHeight:100},n=[],h.forEach(function(t){n.push(fetch("/office/stats",{method:"POST",body:JSON.stringify({find:"byid",id:Number(t.dataset.sid),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t[0]}))}),t.next=18,Promise.all(n).then(function(t){return t});case 18:v=t.sent,(i=function r(){var n,l;s.forEach(function(t){t.classList.contains("active")&&(n=t.dataset.name)}),"Y"!==n&&Number(n)<24?2==Number(n)?document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-12")||t.classList.remove("col-2","col-xxl-3")||t.classList.remove("col-6"),t.classList.add("col-4")}):Number(n)<12?document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-12")||t.classList.remove("col-6")||t.classList.remove("col-4"),t.classList.add("col-2","col-xxl-3")}):document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-12")||t.classList.remove("col-2","col-xxl-3")||t.classList.remove("col-4"),t.classList.add("col-6")}):document.querySelectorAll("section .column").forEach(function(t){t.classList.remove("col-2","col-xxl-3")||t.classList.remove("col-6")||t.classList.remove("col-4"),t.classList.add("col-12")}),p.statHeight=12<=n||"Y"===n?500:250,o.checked?p.spaces=!0:p.spaces=!1,a.checked?p.numShow=!0:p.numShow=!1;var i=(new Date).getDay()||7;v.forEach(function(o,t){if(l=i-o.last_day<=0?new Date((new Date).setDate((new Date).getDate()+-(i-o.last_day))):new Date((new Date).setDate((new Date).getDate()+(7-(i-o.last_day)))),f.querySelector(".week-header").innerHTML=u,f.querySelectorAll(".weeks > button").length<=0)for(var a=new Date(u,0,1),s=1,e=function(){var e="".concat(c(a.getDate()),".").concat(c(a.getMonth()+1),".").concat(a.getFullYear()),t=e.split("."),n=new Date(new Date(a).setDate(a.getDate()-6));if(a.getDay()==o.last_day){n="".concat(c(n.getDate()),".").concat(c(n.getMonth()+1),".").concat(n.getFullYear());var i=document.createElement("button");if(i.dataset.date=e,i.dataset.tooltip="с "+n,i.innerText=s,i.classList.add("btn","btn-sm","btn-link","tooltip","tooltip-top"),f.querySelector(".weeks").insertAdjacentElement("beforeend",i),Number(t[2])==(new Date).getFullYear()&&Number(t[1])==Number(c((new Date).getMonth()+1))&&0<=Number(t[0])-Number(c((new Date).getDate()))&&Number(t[0])-Number(c((new Date).getDate()))<7){var r=Array.from(f.querySelectorAll(".weeks > button")).find(function(t){return t.dataset.date==e});r.classList.remove("btn-link"),r.classList.add("btn-error")}s++}a=new Date(a.setDate(a.getDate()+1))};a.getFullYear()==u;)e();f.querySelectorAll(".weeks > button").forEach(function(n,t,i){return n.onclick=function(t){i.forEach(function(t){t.classList.contains("btn-error")&&(t.classList.remove("btn-error"),t.classList.add("btn-link"))}),n.classList.remove("btn-link"),n.classList.add("btn-error");var e=n.dataset.date.split(".");l=new Date(e[2],e[1]-1,e[0],(new Date).getHours(),(new Date).getMinutes(),(new Date).getSeconds()),d=new Date(new Date(l).setDate(l.getDate()-6)),r()}}),d=d||new Date(new Date(l).setDate(l.getDate()-13)),h[t].parentElement.parentElement.querySelector(".card-header > .card-title").innerText=o.title,new m.a(h[t].id,o.stat_data,o.reverted,o.last_day,u,n,d,p).drawStat()})})(),(r=document.getElementById("calendarSwitch")).onchange=function(){r.checked?document.getElementById("weeks_calendar").classList.remove("d-hide"):document.getElementById("weeks_calendar").classList.add("d-hide")},document.getElementById("year_left").onclick=function(){f.querySelector(".week-body .weeks").innerHTML="",u--,i()},document.getElementById("year_right").onclick=function(){f.querySelector(".week-body .weeks").innerHTML="",u++,i()},window.onresize=i;case 26:case"end":return t.stop()}},t)}))).apply(this,arguments)}},,,,,,,,,,function(t,e,i){"use strict";i.r(e);i(38);var n=i(0),x=i.n(n),r=i(1),S=i.n(r),o=i(8),a=i.n(o),s=i(9),l=i.n(s),E=i(10),c=function(){function t(){a()(this,t)}return l()(t,null,[{key:"editStat",value:function(){function u(t){return(t+="").length<2?t.length<1?"00":"0"+t:t}var d=new dhx.Calendar("stats_calendar",{dateFormat:"%d.%m.%Y",value:new Date,weekStart:"monday"}),o=document.getElementById("posts"),t=function(){var t=S()(x.a.mark(function t(){var e,n,i,r;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o.querySelector("option")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("/office/posts",{method:"POST",body:JSON.stringify({find:"byid",id:Number(o.value),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t});case 4:if((e=t.sent)[0].stat_id){t.next=7;break}return t.abrupt("return");case 7:return n=e[0].stat_id.split(","),i=[],(r=document.querySelector("#select_stats select")).innerHTML="",r.classList.add("form-select","p-centered"),n.forEach(function(t){var e=fetch("/office/stats",{method:"POST",body:JSON.stringify({find:"byid",id:t,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t});i.push(e)}),t.next=15,Promise.all(i).then(function(t){return t.map(function(t){return t[0]})}).then(function(t){return t.forEach(function(t){if(t){var e=document.createElement("option");e.setAttribute("value",t.id),e.innerText=t.title,r.insertAdjacentElement("beforeend",e)}})});case 15:w();case 16:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();o.onchange=function(){localStorage.setItem("postId",o.value),t()},localStorage.getItem("postId")&&(o.value=localStorage.getItem("postId")),t();document.querySelectorAll(".my_dataviz");var h=document.getElementById("stats"),f=document.querySelectorAll("#periods > .chip");f.forEach(function(t,e,n){return t.onclick=function(){n.forEach(function(t){return t.classList.remove("active")}),t.classList.add("active"),w()}});var p=document.getElementById("stats_value"),v=document.getElementById("stats_quota"),m=document.getElementById("period_quota_input"),g=document.getElementById("days_quota"),y=document.getElementById("quota_btn"),b={statHeight:350,quota:0},w=function(){var e=S()(x.a.mark(function t(e){var s,n,l,o,i,r,a,c;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/office/stats",{method:"POST",body:JSON.stringify({find:"byid",id:Number(h.value),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t[0]});case 2:if(s=t.sent){t.next=5;break}return t.abrupt("return");case 5:null==s.stat_data&&(s.stat_data=[]),d.config.mark=function(e){return s.stat_data.find(function(t){return t.date=="".concat(u(e.getDate()),".").concat(u(e.getMonth()+1),".").concat(e.getFullYear())&&t.date!=o&&null!=t.value})?3==e.getDay()?"a b":"a":3==e.getDay()?"b":""},f.forEach(function(t){t.classList.contains("active")&&(n=t.dataset.name)}),"Y"!==n&&Number(n)<24?2==Number(n)?document.querySelectorAll("#stat").forEach(function(t){t.classList.remove("col-10")||t.classList.remove("col-6")||t.classList.remove("col-8"),t.classList.add("col-6")}):Number(n)<12?document.querySelectorAll("#stat").forEach(function(t){t.classList.remove("col-10")||t.classList.remove("col-8")||t.classList.remove("col-6"),t.classList.add("col-6")}):document.querySelectorAll("#stat").forEach(function(t){t.classList.remove("col-10")||t.classList.remove("col-6")||t.classList.remove("col-6"),t.classList.add("col-8")}):document.querySelectorAll("#stat").forEach(function(t){t.classList.remove("col-6")||t.classList.remove("col-8")||t.classList.remove("col-6"),t.classList.add("col-10")}),b.statHeight=600,b.quota=_.checked?1:0,0==s.reverted?k.checked=!1:k.checked=!0,l=document.getElementById("stats_rem"),p.value=null,l.value="",v.value=null,o=d.getValue(),e,i=d.getValue(!0).getDay()||7,[],r=i-s.last_day<=0?new Date(new Date(d.getValue(!0)).setDate(d.getValue(!0).getDate()+-(i-s.last_day))):new Date(new Date(d.getValue(!0)).setDate(d.getValue(!0).getDate()+(7-(i-s.last_day)))),a=new Date(new Date(r).setDate(r.getDate()-6)),new E.a("editStat",s.stat_data,s.reverted,s.last_day,(new Date).getFullYear(),n,a,b).drawStat(),(c=s.stat_data.find(function(t){return t.date==o}))&&(p.value=c.value),c&&(l.value=c.rem||""),c&&(v.value=c.quota||""),d.paint(),d.events.on("Change",function(){o=d.getValue()}),p.onkeydown=function(t){"Enter"==t.code&&(t.preventDefault(),p.blur())},v.onkeydown=function(t){"Enter"==t.code&&(t.preventDefault(),v.blur())},p.onblur=function(){var e=S()(x.a.mark(function t(e){var n,i,r;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p.value||(p.value=null),n={date:o,value:""===p.value||null===p.value?null:+p.value,rem:l.value.trim(),quota:""===v.value||null===v.value?null:+v.value},(i=s.stat_data.find(function(t){return t.date==o}))?(r=s.stat_data.indexOf(i),s.stat_data[r]=n):s.stat_data.push(n),t.next=6,fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:Number(h.value),stat_data:s.stat_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()});case 6:w();case 7:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),l.onblur=function(){var e=S()(x.a.mark(function t(e){var n,i,r;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p.value||(p.value=null),n={date:o,value:""===p.value||null===p.value?null:+p.value,rem:l.value.trim(),quota:""===v.value||null===v.value?null:+v.value},(i=s.stat_data.find(function(t){return t.date==o}))?(r=s.stat_data.indexOf(i),s.stat_data[r]=n):s.stat_data.push(n),t.next=6,fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:Number(h.value),stat_data:s.stat_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()});case 6:w();case 7:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),v.onblur=function(){var e=S()(x.a.mark(function t(e){var n,i,r;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return p.value||(p.value=null),n={date:o,value:""===p.value||null===p.value?null:+p.value,rem:l.value.trim(),quota:""===v.value||null===v.value?null:+v.value},(i=s.stat_data.find(function(t){return t.date==o}))?(r=s.stat_data.indexOf(i),s.stat_data[r]=n):s.stat_data.push(n),t.next=6,fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:Number(h.value),stat_data:s.stat_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()});case 6:w();case 7:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),y.onclick=function(){Number(m.value)&&Number(g.value)&&function(){for(var t=Number(m.value)/Number(g.value),e=[],n=d.getValue(!0),i=0;i<=Number(g.value);i++){var r=void 0;r=0==i?(p.value||(p.value=null),{date:"".concat(u(n.getDate()),".").concat(u(n.getMonth()+1),".").concat(n.getFullYear()),value:""===p.value||null===p.value?null:+p.value,rem:l.value.trim(),quota:t}):{date:"".concat(u(n.getDate()),".").concat(u(n.getMonth()+1),".").concat(n.getFullYear()),value:null,rem:"",quota:t};var o=s.stat_data.find(function(t){return t.date=="".concat(u(n.getDate()),".").concat(u(n.getMonth()+1),".").concat(n.getFullYear())});if(o){var a=s.stat_data.indexOf(o);0==i?s.stat_data[a]=r:s.stat_data[a].quota=t}else s.stat_data.push(r);e.push(fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:Number(h.value),stat_data:s.stat_data,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})),n=new Date(n.setDate(n.getDate()+1))}Promise.all(e).then(w())}()};case 35:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),e=document.getElementById("quotaSwitch"),n=document.getElementById("period_quota");e.onchange=function(){e.checked?n.classList.remove("d-hide"):n.classList.add("d-hide")};var _=document.getElementById("sevenrSwitch");_.onchange=function(){_.checked?(_.disabled=!1,k.disabled=!0):k.disabled=!1,w()};var k=document.getElementById("revertedSwitch");k.onchange=S()(x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return k.checked?(k.disabled=!1,_.disabled=!0):_.disabled=!1,t.next=3,fetch("/office/stats/update",{method:"POST",body:JSON.stringify({id:Number(h.value),reverted:k.checked?1:0,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()});case 3:w();case 4:case"end":return t.stop()}},t)})),d.events.on("Change",function(){w(),p.focus()}),h.onchange=function(){w()},i(3).reset(),window.onresize=w}}]),t}();document.querySelectorAll(".go-back").forEach(function(t){return t.onclick=function(){return window.history.back()}}),document.querySelectorAll("header a").forEach(function(t,e,n){t.getAttribute("href")==window.location.pathname&&(0==e?t.setAttribute("style","color:red !important"):(t.classList.remove("btn-link"),t.classList.add("btn-error")))});var u=location.pathname.toLocaleLowerCase(),d=document.getElementById("access").value;document.querySelectorAll(".modal-close").forEach(function(t){t.addEventListener("click",function(t){return document.querySelectorAll(".modal").forEach(function(t){return t.classList.remove("active")})})});try{document.getElementById("closeLowAccessWarn").onclick=function(t){f(t.target.parentElement)};var h=setInterval(function(){document.querySelector(".low-access").classList.remove("slideInRight"),document.querySelector(".low-access").classList.add("flash")},3e3);setTimeout(function(){document.querySelectorAll(".low-access").forEach(function(t){f(t)})},6e3);var f=function(t){clearInterval(h),t.classList.remove("slideInRight"),t.classList.add("fadeOutRight"),setTimeout(function(){t.remove()},1e3)}}catch(t){console.info("Full access on this page")}try{dhx.i18n.setLocale("calendar",{monthShort:["Янв","Фев","Мар","Апр","Май","Июнь","Июль","Авг","Сен","Окт","Ноя","Дек"],month:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],weekdaysShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"]})}catch(t){console.warn("no dxh installed")}"/office/pipes"!==u&&"/office/pipes/"!==u||i(40).pipesRouteScript(),"/office/lids"!==u&&"/office/lids/"!==u||i(41).init(),"pipes"!==u.split("/")[2]||isNaN(+u.split("/")[3])||0==+u.split("/")[3]||(i(3),i(42).pipeEditing(),i(43).stepsScript(),i(44).visScript(),(new(i(15).KanbanScript)).init(),"full"!=d&&setInterval(function(){document.querySelectorAll(".lid-menu input, .lid-menu button, .lid-menu textarea").forEach(function(t){return t.disabled=!0})},1e3));if("/office/chanels"===u||"/office/chanels/"===u){"full"==d&&document.getElementById("openChanelAddingBtn").addEventListener("click",function(t){document.getElementById("chanelAdding").classList.add("active")}),"full"==d&&document.getElementById("newChanelTitle").addEventListener("input",function(t){3<(t.target.value.trim()+"").length?(t.target.classList.remove("is-error"),document.getElementById("createNewChanel").disabled=!1):(t.target.classList.add("is-error"),document.getElementById("createNewChanel").disabled=!0)}),"full"==d&&document.getElementById("createNewChanel").addEventListener("click",function(t){fetch("/office/chanels/update",{method:"POST",body:JSON.stringify({title:document.getElementById("newChanelTitle").value,step:document.getElementById("stepsSelect").value,abbr:document.getElementById("newAbbrChanel").value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){p()})});var p=function c(){Promise.all([fetch("office/chanels/getData",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}),fetch("/office/steps/getAll",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()})]).then(function(s){var l=document.getElementById("tableBody");l.parentElement.classList.remove("d-hide"),l.innerHTML="",document.getElementById("openChanelAddingBtn").classList.remove("d-hide"),l.parentElement.parentElement.querySelector(".loading")&&l.parentElement.parentElement.querySelector(".loading").remove(),s[0].forEach(function(e){var n=e.step;s[1].forEach(function(t){t.id===e.step&&(n=t.title)});var t=document.createElement("tr"),i=document.createElement("td");i.innerText=e.title,t.insertAdjacentElement("beforeend",i);var r=document.createElement("td");e.step?r.innerText=n:(r.innerText="Шага нет",r.classList.add("text-gray")),t.insertAdjacentElement("beforeend",r);var o=document.createElement("td");e.abbr?o.innerText=e.abbr:(o.innerText="Аббревиатуры нет",o.classList.add("text-gray")),t.insertAdjacentElement("beforeend",o);var a=document.createElement("button");a.classList.add("btn"),a.classList.add("btn-sm"),a.classList.add("btn-link"),a.classList.add("d-hide"),a.classList.add("p-absolute"),a.innerHTML='<img src="images/edit.svg" alt="">',i.insertAdjacentElement("beforeend",a),document.getElementById("chaneEditinglTitleInput").addEventListener("input",function(t){return 3<(t.target.value+"").length?document.getElementById("editChanelBtn").disabled=!1:document.getElementById("editChanelBtn").disabled=!0}),"full"==d&&a.addEventListener("click",function(t){document.getElementById("chanelEditing").classList.add("active"),document.getElementById("chanelEditingTitle").innerText=document.getElementById("chaneEditinglTitleInput").value=e.title,document.getElementById("editAbbrChanel").value=e.abbr?e.abbr:"",document.getElementById("stepsSelectEdit").value=e.step?e.step:0,document.getElementById("editChanelBtn").onclick=function(t){fetch("/office/chanels/update",{method:"POST",body:JSON.stringify({id:e.id,title:document.getElementById("chaneEditinglTitleInput").value,step:document.getElementById("stepsSelectEdit").value,abbr:document.getElementById("editAbbrChanel").value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){c()})},"full"==d&&(document.getElementById("deleteChanel").onclick=function(t){confirm("Вы точно хотите удалить канал?")&&fetch("/office/chanels/delete",{method:"DELETE",body:JSON.stringify({id:e.id,active:0,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(){c(),document.getElementById("chanelEditing").classList.remove("active")})})}),t.addEventListener("mouseenter",function(t){return a.classList.remove("d-hide")}),t.addEventListener("mouseleave",function(t){return a.classList.add("d-hide")}),l.insertAdjacentElement("beforeend",t)});var n=document.getElementById("stepsSelect"),i=document.getElementById("stepsSelectEdit");n.innerHTML=i.innerHTML='<option value="0">Без шага</option>',s[1].forEach(function(t){var e=document.createElement("option");t.title?e.innerText=t.title:e.innerText="У шага нет названия; id: "+t.id,e.value=t.id,n.insertAdjacentElement("beforeend",e),i.insertAdjacentHTML("beforeend",e.outerHTML)})})};p()}if("/office/cabinet"===u||"/office/cabinet/"===u){document.getElementById("mail").oninput=function(t){!function(t){return/^([a-z0-9_-]+\.)*[a-z0-9_-]+@[a-z0-9_-]+(\.[a-z0-9_-]+)*\.[a-z]{2,6}$/.test(t)}(t.target.value)||t.target.value==t.target.dataset.old?document.getElementById("saveInfo").disabled=!0:document.getElementById("saveInfo").disabled=!1},document.getElementById("fio").oninput=function(t){t.target.value!=t.target.dataset.old?document.getElementById("saveInfo").disabled=!1:document.getElementById("saveInfo").disabled=!0},document.getElementById("saveInfo").onclick=function(t){fetch("/office/users/update",{method:"POST",body:JSON.stringify({id:document.getElementById("userId").value,login:document.getElementById("mail").value,fio:document.getElementById("fio").value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(){document.getElementById("fio").dataset.old=document.getElementById("fio").value,document.getElementById("mail").dataset.old=document.getElementById("mail").value,t.target.disabled=!0})};var v=document.getElementById("oldPass"),m=document.getElementById("newPass"),g=document.getElementById("newPassRepeat"),y=document.getElementById("change"),b=function(t){0<v.value.length&&5<m.value.length&&5<g.value.length&&m.value==g.value?y.disabled=!1:y.disabled=!0,t.target.parentElement.querySelectorAll("input:not(#oldPass)").forEach(function(t){t.value.length<6?t.classList.add("is-error"):t.classList.remove("is-error")}),0<v.value.length?v.classList.remove("is-error"):v.classList.add("is-error"),g.value!=m.value||g.value.length<=0?g.classList.add("is-error"):g.classList.remove("is-error")};v.oninput=b,m.oninput=b,g.oninput=b,y.onclick=function(t){t.target.disabled=!0,v.disabled=!0,m.disabled=!0,g.disabled=!0,fetch("/office/users/update",{method:"POST",body:JSON.stringify({id:document.getElementById("userId").value,password:v.value,newPassword:m.value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){v.value=m.value=g.value="",v.disabled=!1,m.disabled=!1,g.disabled=!1})};var w=document.getElementById("person"),_=document.getElementById("personSwitch");_.onchange=function(){_.checked?w.classList.remove("d-hide"):w.classList.add("d-hide")},c.editStat()}if("/office/privilages"===u||"/office/privilages/"===u){var k=document.getElementById("privilagesModal");document.getElementById("privilagesOpenModal").onclick=function(){return k.classList.add("active")};var T=document.getElementById("privilagesOption"),O=document.getElementById("privilageTitle"),M=document.getElementById("parentPrivilage"),D=function(t){5<t.target.value.trim().length?t.target.classList.remove("is-error"):t.target.classList.add("is-error")};O.oninput=D,O.onfocus=D,O.onblur=function(t){t.target.classList.remove("is-error")};var C=document.getElementById("mainPageAccess"),L=document.getElementById("lidsAccess"),A=document.getElementById("pipesAccess"),I=document.getElementById("chanelsAccess"),P=document.getElementById("privilagesAccess"),j=document.getElementById("tasksAccess"),N=document.getElementById("usersAccess"),B=document.getElementById("postsAccess"),F=document.getElementById("statsAccess"),R=function(){function t(t){var e;return t.querySelectorAll("input").forEach(function(t){t.checked&&(e=t.dataset.access)}),e}return{main:t(C),lids:t(L),pipes:t(A),chanels:t(I),privilage:t(P),tasks:t(j),users:t(N),posts:t(B),stats:t(F)}},H=function(t){function e(t,e){t.querySelector('input[data-access="'+e+'"]').checked=!0}for(var n in t)switch(n){case"main":e(C,t[n]);break;case"lids":e(L,t[n]);break;case"pipes":e(A,t[n]);break;case"chanels":e(I,t[n]);break;case"privilage":e(P,t[n]);break;case"tasks":e(j,t[n]);break;case"users":e(N,t[n]);break;case"posts":e(B,t[n]);break;case"stats":e(F,t[n])}},z=function(t){k.querySelectorAll('input[data-access="full"]').forEach(function(t){return t.disabled=!0});function e(t,e){t.querySelector('input[data-access="full"]').disabled="full"!=e,t.querySelector('input[data-access="watch"]').disabled="full"!=e&&"watch"!=e}for(var n in t)switch(n){case"main":e(C,t[n]);break;case"lids":e(L,t[n]);break;case"pipes":e(A,t[n]);break;case"chanels":e(I,t[n]);break;case"privilage":e(P,t[n]);break;case"tasks":e(j,t[n]);break;case"users":e(N,t[n]);break;case"posts":e(B,t[n]);break;case"stats":e(F,t[n])}},Y=document.getElementById("savePrivilage"),q=document.getElementById("deletePrivilage"),U=function o(a){k.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!0}),k.querySelectorAll('input[data-access="full"]').forEach(function(t){return t.checked=!0}),M.querySelectorAll("option").forEach(function(t){return t.classList.remove("d-hide")}),Y.onclick=null,M.value="0",fetch("/office/privilages/",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(n){if(k.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!1}),"new"!=a){var e=n.find(function(t){return t.id==a}),i=e.parent?n.find(function(t){return t.id==e.parent}):null,r=[];n.forEach(function(t){t.parent==a&&(r.push(t),M.querySelector('option[value="'+t.id+'"]').classList.add("d-hide"))}),O.value=e.title,H(e.privilage_data),i&&(M.value=i.id,z(i.privilage_data)),M.querySelector('option[value="'+a+'"]').classList.add("d-hide"),q.classList.remove("d-hide"),Y.onclick=function(t){2<O.value.trim().length?(k.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!0}),"full"==d&&fetch("/office/privilages/update",{method:"POST",body:JSON.stringify({id:a,title:O.value,parent:M.value,privilage_data:R(),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(){k.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!1}),i&&z(i)})):(O.scrollIntoView({behavior:"smooth",block:"end"}),O.classList.add("is-error"))},q.onclick=function(t){confirm("Вы точно хотите удалить?")&&(k.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!0}),"full"==d&&fetch("/office/privilages/update",{method:"POST",body:JSON.stringify({id:a,cmd:"delete",_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(){k.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!1}),o("new"),T.value="new",T.querySelector('option[value="'+a+'"]').remove(),M.querySelector('option[value="'+a+'"]').remove()}))}}else M.oninput=function(t){if("0"!=t.target.value){var e=n[t.target.value-1];H(e.privilage_data),z(e.privilage_data)}else k.querySelectorAll('.access input[type="radio"]').forEach(function(t){return t.disabled=!1}),k.querySelectorAll('input[data-access="full"]').forEach(function(t){return t.checked=!0})},Y.onclick=function(t){5<O.value.trim().length?(k.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!0}),"full"==d&&fetch("/office/privilages/update",{method:"POST",body:JSON.stringify({title:O.value,parent:M.value,privilage_data:R(),_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){k.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!1}),T.insertAdjacentHTML("afterbegin",'\n                                <option value="'.concat(t.insertId,'">').concat(O.value,"</option>\n                            ")),T.value=t.insertId,M.insertAdjacentHTML("afterbegin",'\n                                <option value="'.concat(t.insertId,'">').concat(O.value,"</option>\n                            ")),o(t.insertId)})):(O.scrollIntoView({behavior:"smooth",block:"end"}),O.classList.add("is-error"))},O.value="",q.classList.add("d-hide")})};T.oninput=function(t){return U(t.target.value)},U("new");var W=document.querySelectorAll("#users tbody tr");W.forEach(function(t){t.onclick=function(s){s.target.classList.contains("t-edit")||(document.querySelectorAll(".t-edit").forEach(function(t){return t.remove()}),t.insertAdjacentHTML("afterend",'\n        <tr class="t-edit">\n            <td colspan="4">\n                <div class="btn btn-clear float-right close-editUser"></div>\n                <div class="d-flex">\n                    <div class="col-4">\n                        <label>login</label>\n                        <input class="form-input mb-2 newLogin" placeholder="pochta@email.ru" disabled>\n                        <label>ФИО</label>\n                        <input class="form-input mb-2 newFio" placeholder="Иванов Иван Иванович" disabled>\n                        <label>Профиль</label>\n                        <select class="form-select mb-2 newProfile" disabled>\n                            <option value="0">Без профиля</option>\n                        </select>\n                        <button class="btn btn-sm btn-primary mla d-block mt-2 save" disabled>Сохранить</button>\n                    </div>      \n                </div>\n            </td>\n        </tr>\n    '),document.querySelectorAll(".close-editUser").forEach(function(t){t.onclick=function(t){return document.querySelectorAll(".t-edit").forEach(function(t){return t.remove()})}}),"full"==d&&fetch("/office/privilages/",{method:"POST",body:JSON.stringify({_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){var e=document.querySelector(".t-edit"),n=s.path[1],i=JSON.parse(n.dataset.data),r=e.querySelector(".newLogin"),o=e.querySelector(".newFio"),a=e.querySelector(".newProfile");r.value=i.login,o.value=i.fio,t.forEach(function(t){return a.insertAdjacentHTML("beforeend",'<option value="'.concat(t.id,'">').concat(t.title,"</option>"))}),a.value=i.role,e.querySelector(".save").onclick=function(e){fetch("/office/users/update",{method:"POST",body:JSON.stringify({id:i.id,login:r.value,fio:o.value,role:a.value,_csrf:document.getElementById("csrfToken").value}),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){i.login=r.value,i.fio=o.value,i.role=a.value,n.querySelector(".login").innerText=r.value,n.querySelector(".fio").innerText=o.value,n.querySelector(".priv").innerText="0"!=a.value?a.querySelector('option[value="'+a.value+'"]').innerText:"",e.path[1].dataset.data=JSON.stringify(i),document.querySelectorAll(".t-edit").forEach(function(t){return t.remove()})})},e.querySelectorAll("input, select, button").forEach(function(t){return t.disabled=!1})}));V()}}),"full"!=d&&setInterval(function(){V()},300);var V=function(){document.querySelectorAll(".access input, #savePrivilage, #deletePrivilage, .save, .newLogin, .newFio, .newProfile").forEach(function(t){t.disabled=!0})}}"/office/tasks"!==u&&"/office/tasks/"!==u||i(48).init(),"/office/contacts"!==u&&"/office/contacts/"!==u||i(49).init(),"/office/users"!==u&&"/office/users/"!==u||i(50).init(),"/office/posts"!==u&&"/office/posts/"!==u||i(51).init(),"/office/stats"!==u&&"/office/stats/"!==u||i(52).init(),"/office"!==u&&"/office/"!==u||i(59).init(),"/office/cic"!==u&&"/office/cic/"!==u||i(60).init()}]);